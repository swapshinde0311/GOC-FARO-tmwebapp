"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[1295],{6934:(e,t,s)=>{s.d(t,{A:()=>r});s(65043);var i=s(67907),a=s(72711),o=s(70579);function r(e){let{transportationType:t,handleShipmentByCompartmentPageClick:s,handleShipmentByProductPageClick:r,handleDispatchPageClick:l,isSBCEnable:n,isSBPEnable:h,isRailDispatchEnable:d}=e;const[c]=(0,i.useTranslation)();return(0,o.jsxs)("div",{className:"ViewShipmentStatusDetails ",children:[(0,o.jsx)("div",{className:"ViewShipmentStatusHeader",children:(0,o.jsx)("h4",{children:c("ROAD"===t?"ShipmentContract_CreateShipment":"ContractInfo_CreateDispatch")})}),(0,o.jsx)(a.Divider,{}),"ROAD"===t?(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{marginLeft:"10%"},children:(0,o.jsx)(a.Button,{type:"secondary",className:"ViewShipmentButton",disabled:!n,onClick:()=>s(),children:c("ContractInfo_ShipByComp")})}),(0,o.jsx)("div",{style:{marginLeft:"10%"},children:(0,o.jsx)(a.Button,{type:"secondary",className:"ViewShipmentButton",disabled:!h,onClick:()=>r(),children:c("ContractInfo_ShipByProduct")})})]}):(0,o.jsx)("div",{style:{marginLeft:"10%"},children:(0,o.jsx)(a.Button,{type:"secondary",className:"ViewShipmentButton",disabled:!d,onClick:()=>l(),children:c("ContractInfo_CreateDispatch")})})]})}},38795:(e,t,s)=>{s.r(t),s.d(t,{default:()=>F});var i=s(65043),a=s(69062),o=s(93779),r=s(7523),l=s(72067),n=s(15417),h=s(97508),d=s(40854),c=s.n(d),u=s(53536),p=s.n(u),m=s(65187),S=s(46100),C=s(43503),g=s(80312),D=s(40252),y=s(9256),R=s(44192),E=s(67907),A=s(72711),b=s(24904),f=s(85800),L=s(78374),v=s(35861),w=s(70579);function I(e){let{contract:t,modContract:s,onFieldChange:i,validationErrors:o,attributeValidationErrors:l,onDateTextChange:n,listOptions:h,onAllTerminalsChange:d,handleAddPlan:c,handleDeletePlan:u,selectedPlanRow:p,handleRowSelectionChange:S,handleCellDataEdit:C,modContractItems:g,selectedShareholder:D,isEnterpriseNode:y,onAttributeDataChange:R,handleCompAttributeCellDataEdit:I,modAttributeMetaDataList:T,expandedRows:k,toggleExpand:O,compartmentDetailsPageSize:x,isEnableForceClose:V,handleForceClose:j,handleViewShipments:P,handleViewDispatch:N,isAutoGeneratedContractCode:B}=e;const[_]=(0,E.useTranslation)();let F=[];null!==h.customerDestinationOptions&&Object.keys(h.customerDestinationOptions).length>0&&(F=a.Zj(Object.keys(h.customerDestinationOptions)));const M=(e,t)=>{let s=[];return s=e.find((e=>e.TerminalCode===t)),s.attributeValidationErrors},U=e=>{const t=e.rowData,s=e=>{var t=e.split("-");return new Date(t[0],t[1]-1,t[2])},i=(e,t)=>{var s=new Date(t);t=s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2),I(e,t)};try{return t.DataType.toLowerCase()===r.pe.STRING.toLowerCase()||t.DataType.toLowerCase()===r.pe.INT.toLowerCase()?(0,w.jsx)(A.Input,{fluid:!0,value:t.AttributeValue,disabled:t.IsReadonly,onChange:t=>I(e,t),reserveSpace:!1}):t.DataType.toLowerCase()===r.pe.FLOAT.toLowerCase()||t.DataType.toLowerCase()===r.pe.LONG.toLowerCase()||t.DataType.toLowerCase()===r.pe.DOUBLE.toLowerCase()?(0,w.jsx)(A.Input,{fluid:!0,value:null===t.AttributeValue||void 0===t.AttributeValue||""===t.AttributeValue?"":t.AttributeValue.toLocaleString(),disabled:t.IsReadonly,onChange:t=>I(e,t),reserveSpace:!1}):t.DataType.toLowerCase()===r.pe.BOOL.toLowerCase()?(0,w.jsx)(A.Checkbox,{checked:"true"===t.AttributeValue.toString().toLowerCase(),disabled:t.IsReadonly,onChange:t=>I(e,t)}):t.DataType.toLowerCase()===r.pe.DATETIME.toLowerCase()?(0,w.jsx)(A.DatePicker,{fluid:!0,value:null===t.AttributeValue||void 0===t.AttributeValue||""===t.AttributeValue?"":s(t.AttributeValue),disabled:t.IsReadonly,showYearSelector:"true",onChange:t=>i(e,t),onTextChange:t=>{i(e,t)},reserveSpace:!1}):null}catch(a){console.log("OrderDetails:Error occured on handleAttributeType",a)}},W=e=>e.rowData.IsMandatory?(0,w.jsxs)("div",{children:[(0,w.jsx)("span",{children:e.rowData.AttributeName}),(0,w.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]}):(0,w.jsx)("div",{children:(0,w.jsx)("span",{children:e.rowData.AttributeName})});const H=e=>{let t=g[e.rowIndex][e.field];return(0,w.jsx)(A.DatePicker,{fluid:!0,value:null===t?"":new Date(t),showYearSelector:"true",displayFormat:(0,v.F1)(),onChange:t=>C(t,e),onTextChange:(t,s)=>{C(t,e)},reserveSpace:!1})},q=e=>{let t=[];if("QuantityUOM"===e.field&&(t=[...h.unitOfVolume,...h.unitOfWeight]),"FinishedProductCode"===e.field&&(t=h.finishedProductOptions),"DestinationCode"===e.field){let e=h.customerDestinationOptions[s.CustomerCode];void 0!==e&&Array.isArray(e)&&(t=a.Zj(e),t=(0,v.r4)(t,_("Common_Select")))}return(0,w.jsx)(A.Select,{className:"selectDropwdown",placeholder:_("Common_Select"),value:g[e.rowIndex][e.field],fluid:!0,options:t,onChange:t=>C(t,e),reserveSpace:!1,search:!0,noResultsMessage:_("noResultsMessage")})};return(0,w.jsxs)("div",{className:"detailsContainer",children:[(0,w.jsxs)("div",{className:"row",children:[(0,w.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,w.jsx)(A.Input,{fluid:!0,value:s.ContractCode,label:_("ContractInfo_ContractCode"),indicator:"required",disabled:!!B||""!==t.ContractCode,onChange:e=>i("ContractCode",e),error:_(o.ContractCode),reserveSpace:!1})}),(0,w.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,w.jsx)(A.Select,{fluid:!0,placeholder:_("Common_Select"),label:_("Customer_Code"),indicator:"required",value:s.CustomerCode,options:F,onChange:e=>i("CustomerCode",e),error:_(o.CustomerCode),reserveSpace:!1,search:!0,noResultsMessage:_("noResultsMessage")})}),(0,w.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,w.jsx)(A.Input,{fluid:!0,value:null===s.Description?"":s.Description,label:_("ContractInfo_Description"),onChange:e=>i("Description",e),error:_(o.Description),reserveSpace:!1})}),(0,w.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,w.jsx)(A.DatePicker,{fluid:!0,value:null===s.StartDate?"":a.OL(s.StartDate),displayFormat:(0,v.F1)(),label:_("ContractInfo_StartDate"),showYearSelector:"true",indicator:"required",disablePast:!0,onChange:e=>i("StartDate",e),onTextChange:(e,t)=>{n("StartDate",e,t)},error:_(o.StartDate),reserveSpace:!1})}),(0,w.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,w.jsx)(A.DatePicker,{fluid:!0,value:null===s.EndDate?"":a.OL(s.EndDate),displayFormat:(0,v.F1)(),label:_("ContractInfo_EndDate"),showYearSelector:"true",indicator:"required",disablePast:!0,onChange:e=>i("EndDate",e),onTextChange:(e,t)=>{n("EndDate",e,t)},error:_(o.EndDate),reserveSpace:!1})}),(0,w.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,w.jsx)(A.Input,{fluid:!0,value:void 0===(0,a.cd)(r.fh,s.Status)?"":(0,a.cd)(r.fh,s.Status),label:_("ContractInfo_Status"),disabled:!0,reserveSpace:!1})}),y?(0,w.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,w.jsx)(b.y,{terminalList:h.terminalCodes,selectedTerminal:s.TerminalCodes,error:_(o.TerminalCodes),onFieldChange:i,onCheckChange:d})}):"",(0,w.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,w.jsx)(A.Select,{fluid:!0,placeholder:_("Common_Select"),label:_("ShipmentContract_Status"),value:s.Active,options:[{text:_("ViewShipment_Ok"),value:!0},{text:_("ViewShipmentStatus_Inactive"),value:!1}],onChange:e=>i("Active",e),disabled:""===t.ContractCode})}),(0,w.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,w.jsx)(A.Input,{fluid:!0,value:null===s.Remarks?"":s.Remarks,label:_("ShipmentOrder_Remarks"),onChange:e=>i("Remarks",e),indicator:s.Active!==t.Active?"required":"",error:_(o.Remarks),reserveSpace:!1})}),(0,w.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,w.jsx)(A.Select,{fluid:!0,placeholder:_("Common_All"),label:_("ContractInfo_AssociatedCarrier"),value:s.CarrierCollection,options:h.carrierOptions,multiple:!0,onChange:e=>i("CarrierCollection",e),error:_(o.CarrierCollection),reserveSpace:!1,search:!0,noResultsMessage:_("noResultsMessage")})})]}),T.length>0?T.map((e=>(0,w.jsx)(m.A,{children:(0,w.jsx)(A.Accordion,{children:(0,w.jsx)(A.Accordion.Content,{className:"attributeAccordian",title:y?e.TerminalCode+" - "+_("Attributes_Header"):_("Attributes_Header"),children:(0,w.jsx)(f.n,{selectedAttributeList:e.attributeMetaDataList,handleCellDataEdit:R,attributeValidationErrors:M(l,e.TerminalCode)})})})}))):null,(0,w.jsxs)("div",{className:"row compartmentRow",children:[(0,w.jsx)("div",{className:"col col-md-8 col-lg-9 col col-xl-9",children:(0,w.jsx)("h4",{children:_("ContractInfo_Details")})}),(0,w.jsx)("div",{className:"col col-md-4 col-lg-3 col-xl-3",children:(0,w.jsxs)("div",{className:"compartmentIconContainer",children:[(0,w.jsxs)("div",{onClick:c,className:"compartmentIcon",children:[(0,w.jsx)("div",{children:(0,w.jsx)(A.Icon,{root:"common",name:"badge-plus",size:"medium"})}),(0,w.jsx)("div",{className:"margin_l10",children:(0,w.jsx)("h5",{className:"font14",children:_("TrailerInfo_Add")})})]}),(0,w.jsxs)("div",{onClick:u,className:"compartmentIcon margin_l30",children:[(0,w.jsx)("div",{children:(0,w.jsx)(A.Icon,{root:"common",name:"delete",size:"medium"})}),(0,w.jsx)("div",{className:"margin_l10",children:(0,w.jsx)("h5",{className:"font14",children:_("TrailerInfo_Delete")})})]})]})})]}),(0,w.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,w.jsx)("div",{className:"col-12 detailsTable",children:(0,w.jsxs)(L.bQ,{data:g,rowExpansionTemplate:function(e){return Array.isArray(e.AttributesforUI)&&e.AttributesforUI.length>0?(0,w.jsx)("div",{className:"childTable ChildGridViewAllShipmentLoadingDetails",children:(0,w.jsxs)(L.bQ,{data:e.AttributesforUI,rows:x,children:[y?(0,w.jsx)(L.bQ.Column,{className:"compColHeight",field:"TerminalCode",header:_("CompartmentTerminal"),editable:!1},"TerminalCode"):"",(0,w.jsx)(L.bQ.Column,{className:"compColHeight",header:_("CompartmentAttributeName"),renderer:W,editable:!1},"AttributeName"),(0,w.jsx)(L.bQ.Column,{className:"compColHeight",header:_("CompartmentAttributeValue"),renderer:U}),Array.isArray(e.AttributesforUI)&&e.AttributesforUI.length>x?(0,w.jsx)(L.bQ.Pagination,{}):""]})}):(0,w.jsx)("div",{className:"compartmentIcon",children:(0,w.jsx)("div",{className:"gridButtonAlignLeft",children:_("CustomerInventory_NoRecordsFound")})})},expandedRows:k,selectionMode:"multiple",selection:p,onSelectionChange:S,scrollable:!0,scrollHeight:"320px",children:[(0,w.jsx)(L.bQ.Column,{className:"compColHeight colminWidth",field:"FinishedProductCode",header:(0,v.i7)(_("ContractInfo_Product")),editable:!0,editFieldType:"text",customEditRenderer:q},"FinishedProductCode"),(0,w.jsx)(L.bQ.Column,{className:"compColHeight colminWidth",field:"DestinationCode",header:_("ContractInfo_Destination"),editable:!0,editFieldType:"text",customEditRenderer:q},"DestinationCode"),(0,w.jsx)(L.bQ.Column,{className:"compColHeight colminWidth",field:"StartDate",header:_("ContractInfo_StartDate"),editable:!0,editFieldType:"text",renderer:e=>null===e.value?"":new Date(e.value).toLocaleDateString(),customEditRenderer:H},"StartDate"),(0,w.jsx)(L.bQ.Column,{className:"compColHeight colminWidth",field:"EndDate",header:_("ContractInfo_EndDate"),editable:!0,editFieldType:"text",renderer:e=>null===e.value?"":new Date(e.value).toLocaleDateString(),customEditRenderer:H},"EndDate"),(0,w.jsx)(L.bQ.Column,{className:"compColHeight colminWidth",field:"Quantity",header:(0,v.i7)(_("ContractInfo_Quantity")),editable:!0,editFieldType:"text",renderer:e=>null===e.value?"":e.value.toLocaleString(),customEditRenderer:e=>{let t=g[e.rowIndex][e.field];return"Quantity"===e.field&&null!==t&&""!==t&&(t=t.toLocaleString()),(0,w.jsx)(A.Input,{fluid:!0,value:t,onChange:t=>C(t,e),reserveSpace:!1})}},"Quantity"),(0,w.jsx)(L.bQ.Column,{className:"compColHeight colminWidth",field:"QuantityUOM",header:(0,v.i7)(_("ShipmentOrder_UOM")),editable:!0,editFieldType:"text",customEditRenderer:q},"QuantityUOM"),(0,w.jsx)(L.bQ.Column,{className:"compColHeight disabledColumn colminWidth",field:"BlockedQuantity",header:_("ContractInfo_BlockedQuantity"),renderer:e=>null===e.value?"0":e.value.toLocaleString(),editFieldType:"text"},"BlockedQuantity"),(0,w.jsx)(L.bQ.Column,{className:"compColHeight disabledColumn colminWidth",field:"LoadedQuantity",header:_("ContractInfo_LoadedQty"),renderer:e=>null===e.value?"0":e.value.toLocaleString(),editFieldType:"text"},"LoadedQuantity"),(0,w.jsx)(L.bQ.Column,{className:"compColHeight disabledColumn colminWidth",field:"RemainingQuantity",header:_("ContractInfo_RemQuantity"),renderer:e=>null===e.value?"0":e.value.toLocaleString(),editFieldType:"text"},"ReaminingQuantity"),(0,w.jsx)(L.bQ.Column,{className:"expandedColumn",initialWidth:"175px",renderer:e=>{const t=k.findIndex((t=>t.SeqNumber===e.rowData.SeqNumber))>=0;return(0,w.jsxs)("div",{onClick:()=>O(e.rowData,t),className:"compartmentIcon gridButtonFontColor",children:[(0,w.jsx)("span",{children:_(t?"Hide_Attributes":"View_Attributes")}),(0,w.jsx)(A.Icon,{root:"common",name:t?"caret-up":"caret-down",className:"margin_l10"})]})}})]})})}),(0,w.jsx)("div",{className:"row",children:(0,w.jsxs)("div",{className:"col col-md-8 col-lg-9 col col-xl-12",style:{textAlign:"right"},children:[(0,w.jsx)(A.Button,{type:"primary",onClick:j,disabled:!V,content:_("ShipmentOrder_BtnForceClose")}),""!==t.ContractCode&&t.TransportationType===r.LY.ROAD?(0,w.jsx)(A.Button,{content:_("ShipmentOrder_ViewShipments"),onClick:P}):null,""!==t.ContractCode&&t.TransportationType===r.LY.RAIL?(0,w.jsx)(A.Button,{content:_("DispatchContract_ViewDispatch"),onClick:N}):null]})})]})}I.defaultProps={listOptions:{terminalCodes:[],contractTypeOptions:[],carrierOptions:[],unitOfVolume:[],unitOfWeight:[],finishedProductOptions:[],customerDestinationOptions:{}},modContractItems:[],isEnterpriseNode:!1};var T=s(28882),k=s(11981),O=s(14159),x=s(31295),V=s(80242),j=s(97105),P=s(40510),N=s(39424),B=s(62900);class _ extends i.Component{constructor(){var e;super(...arguments),e=this,this.state={contract:{},modContract:{},validationErrors:a.Th(R.H4),modContractItems:[],terminalOptions:[],volumeUOMOptions:[],weightUOMOptions:[],carrierOptions:[],isReadyToRender:!1,saveEnabled:!1,selectedPlanRow:[],finishedProductOptions:[],customerDestinationOptions:{},attributeMetaDataList:[],compartmentAttributeMetaDataList:[],modAttributeMetaDataList:[],attributeValidationErrors:[],expandedRows:[],isEnableForceClose:!1,isShowTruckShipment:!1,isShowBackButton:!1,isShowRailDispatch:!1,isAutoGeneratedContractCode:!1,isAllowtoUpdate:!1,updatedContractStatus:"",contractKPIList:[],scheduledContractUpdate:!1,showAuthenticationLayout:!1,showForceCloseAuthenticationLayout:!1,tempContract:{},tempContactStatusObj:{}},this.handleAttributeDataChange=(e,t)=>{try{let s=[],i=p().cloneDeep(this.state.modAttributeMetaDataList),o=i.filter((t=>t.TerminalCode===e.TerminalCode));o.length>0&&Array.isArray(o[0].attributeMetaDataList)&&(s=o[0].attributeMetaDataList.filter((t=>t.Code===e.Code))),s.length>0&&(s[0].DefaultValue=t);const r=p().cloneDeep(this.state.attributeValidationErrors);r.forEach((s=>{s.TerminalCode===e.TerminalCode&&(s.attributeValidationErrors[e.Code]=a.I5(e,t))})),this.setState({attributeValidationErrors:r,modAttributeMetaDataList:i})}catch(s){console.log("ContractDetailsComposite:Error occured on handleAttributeDataChange",s)}},this.handleCompAttributeCellDataEdit=(e,t)=>{let s=p().cloneDeep(this.state.modContractItems),i=s.findIndex((t=>t.SeqNumber===e.rowData.compSequenceNo));i>=0&&(s[i].AttributesforUI[e.rowData.SeqNumber-1].AttributeValue=t),this.setState({modContractItems:s}),i>=0&&this.toggleExpand(s[i],!0,!0)},this.handleChange=(e,t)=>{try{let s=p().cloneDeep(this.state.modContract);if(s[e]=t,"CustomerCode"===e){let e=this.state.customerDestinationOptions[t];const s=p().cloneDeep(this.state.modContractItems);s.length>0&&void 0!==e&&Array.isArray(e)&&(1===e.length&&s.forEach((t=>{t.DestinationCode=e[0]})),(0===e.length||e.length>1)&&s.forEach((e=>{e.DestinationCode=null})),this.setState({modContractItems:s}))}const i={...this.state.validationErrors};s.Active===this.state.contract.Active&&(this.state.contract.Remarks!==s.Remarks&&""!==s.Remarks||(i.Remarks="")),"Active"===e&&s.Active!==this.state.contract.Active&&(s.Remarks=""),void 0!==R.H4[e]&&(i[e]=a.jr(R.H4[e],t)),this.setState({validationErrors:i,modContract:s},(()=>{"TerminalCodes"===e&&this.terminalSelectionChange(t)}))}catch(s){console.log("ContractDetailsComposite:Error occured on handleChange",s)}},this.handleRowSelectionChange=e=>{this.setState({selectedPlanRow:e})},this.handleCellDataEdit=(e,t)=>{let s=p().cloneDeep(this.state.modContractItems);s[t.rowIndex][t.field]=e,this.setState({modContractItems:s})},this.handleAddPlan=()=>{if(!this.props.userDetails.EntityResult.IsArchived)try{let e={Attributes:null,BlockedQuantity:null,ContractCode:null,CustomerCode:null,DestinationCode:null,EndDate:null,FinishedProductCode:null,FinishdedProductType:null,ItemCode:null,LoadedQuantity:null,Quantity:null,QuantityUOM:null,RemainingQuantity:null,ShareholderCode:null,StartDate:null},t=p().cloneDeep(this.state.modContractItems),s=this.state.customerDestinationOptions[this.state.modContract.CustomerCode];void 0!==s&&Array.isArray(s)&&1===s.length&&(e.DestinationCode=s[0]),e.SeqNumber=a.Mz(t),t.push(e),this.setState({modContractItems:t,selectedPlanRow:[]},(()=>{if(!1===this.props.userDetails.EntityResult.IsEnterpriseNode){var e=p().cloneDeep(this.state.compartmentAttributeMetaDataList);e.length>0&&this.formCompartmentAttributes([e[0].TerminalCode])}else this.formCompartmentAttributes(this.state.modContract.TerminalCodes)}))}catch(e){console.log("ContractDetailsComposite:Error occured on handleAddCompartment",e)}},this.handleDeletePlan=()=>{if(!this.props.userDetails.EntityResult.IsArchived)try{if(null!=this.state.selectedPlanRow&&this.state.selectedPlanRow.length>0&&this.state.modContractItems.length>0){let e=p().cloneDeep(this.state.modContractItems);this.state.selectedPlanRow.forEach(((t,s)=>{e=e.filter(((e,s)=>e.SeqNumber!==t.SeqNumber))})),this.setState({modContractItems:e})}this.setState({selectedPlanRow:[]})}catch(e){console.log("ContractDetailsComposite:Error occured on handleDeleteCompartment",e)}},this.handleDateTextChange=(e,t,s)=>{try{let i={...this.state.validationErrors},a={...this.state.modContract};i[e]=s,a[e]=t,this.setState({validationErrors:i,modContract:a})}catch(s){console.log("ContractDetailsComposite:Error occured on handleDateTextChange",s)}},this.handleAllTerminalsChange=e=>{try{const t=p().cloneDeep(this.state.modContract);t.TerminalCodes=e?[...this.state.terminalOptions]:[],this.setState({modContract:t}),this.terminalSelectionChange(t.TerminalCodes)}catch(t){console.log("ContractComposite:Error occured on handleAllTerminasChange",t)}},this.addUpdateContract=()=>{try{this.setState({saveEnabled:!1});let e=p().cloneDeep(this.state.tempContract);""===this.state.contract.ContractCode?this.createContract(e):this.updateContract(e)}catch(e){console.log("Contract Composite : Error in addUpdateContract")}},this.handleSave=()=>{try{if(this.state.updatedContractStatus===r.fh.SCHEDULED&&!1===this.state.scheduledContractUpdate)this.setState({isAllowtoUpdate:!0});else{if(Object.values(this.state.validationErrors).every((function(e){return""===e}))){let e=this.fillDetails(),t=a.pI(this.state.modAttributeMetaDataList);if(this.validateSave(e,t)){e=this.convertStringtoDecimal(e,t),e=a.pC(j.S.Contract,e),e.ContractItems.forEach((e=>a.pC(j.S.ContractItem,e)));let s=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,i=p().cloneDeep(e);this.setState({showAuthenticationLayout:s,tempContract:i},(()=>{!1===s&&this.addUpdateContract()})),e=a.HL(j.S.Contract,e),e.ContractItems.forEach((e=>a.HL(j.S.ContractItem,e)))}else this.setState({saveEnabled:!0})}}}catch(e){console.log("ContractDetailsComposite:Error occured on handleSave",e)}},this.toggleExpand=function(t,s){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.state.expandedRows,o=a.findIndex((e=>e.SeqNumber===t.SeqNumber));s?i&&o>=0?(a.splice(o,1),a.push(t)):o>=0&&a.splice(o,1):o>=0?a=a.filter((e=>e.Code!==t.Code&&e.SeqNumber!==t.SeqNumber)):a.push(t),e.setState({expandedRows:a})},this.handleReset=()=>{try{let e=a.Q3(p().cloneDeep(this.state.contract.ContractItems));this.setState({modContract:p().cloneDeep(this.state.contract),modContractItems:e,modAttributeMetaDataList:[]},(()=>{this.props.userDetails.EntityResult.IsEnterpriseNode?(this.terminalSelectionChange(this.state.contract.TerminalCodes),this.handleResetAttributeValidationError()):(this.localNodeAttribute(),this.handleResetAttributeValidationError())}));let t={...this.state.validationErrors};Object.keys(t).forEach((e=>{t[e]=""})),this.setState({validationErrors:t})}catch(e){console.log("ContractDetailsComposite:Error occured on handleReset",e)}},this.handleForceClose=()=>{try{let e=p().cloneDeep(this.state.modContract);const t={...this.state.validationErrors};null!==e.Remarks&&""!==e.Remarks||(t.Remarks="ShipmentOrder_RemarksRequired"),this.setState({validationErrors:t});let s=Object.values(t).every((function(e){return""===e})),i={Shareholder:this.props.selectedShareholder,ContractCode:e.ContractCode,ForceClose:!0,ForceCloseReason:e.Remarks,NewContractStatus:null};if(!0===s){let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,t=p().cloneDeep(i);this.setState({showForceCloseAuthenticationLayout:e,tempContactStatusObj:t},(()=>{!1===e&&this.updateContractStatus()}))}}catch(e){console.log("ContractDetailsComposite:Error occured on handleForceClose",e)}},this.updateContractStatus=()=>{let e=p().cloneDeep(this.state.tempContactStatusObj),t={ShareHolderCode:this.props.selectedShareholder,keyDataCode:o.GT,Entity:e},s={messageType:"critical",message:"ContractInfo_SavedStatus",messageResultDetails:[{keyFields:["ContractInfo_ContractCode"],keyValues:[e.ContractCode],isSuccess:!1,errorMessage:""}]};c()(l.CYk,a.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;s.messageType=t.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?this.getContract(!1):s.messageResultDetails[0].errorMessage=t.ErrorList[0],(0,O.toast)((0,w.jsx)(m.A,{children:(0,w.jsx)(k.A,{notificationMessage:s})}),{autoClose:"success"===s.messageType&&1e4})}))},this.handleViewShipments=()=>{this.setState({isShowTruckShipment:!0,isShowBackButton:!0},(()=>this.props.handleOperationVisibility(!1)))},this.handleViewDispatch=()=>{this.setState({isShowRailDispatch:!0,isShowBackButton:!0},(()=>this.props.handleOperationVisibility(!1)))},this.handleBack=()=>{this.setState({isShowTruckShipment:!1,isShowRailDispatch:!1,isShowBackButton:!1},(()=>{this.props.handleOperationVisibility(!0),this.getContract(!1)}))},this.handleShowBackButton=e=>{this.setState({isShowBackButton:e})},this.confirmAllowToUpdate=()=>(0,w.jsx)(E.TranslationConsumer,{children:e=>(0,w.jsxs)(A.Modal,{open:this.state.isAllowtoUpdate,size:"small",children:[(0,w.jsx)(A.Modal.Content,{children:(0,w.jsx)("div",{className:"col col-lg-12",children:(0,w.jsx)("h5",{children:e("Contract_ConfirmAllowToUpdate")})})}),(0,w.jsxs)(A.Modal.Footer,{children:[(0,w.jsx)(A.Button,{type:"primary",content:e("AccessCardInfo_Ok"),onClick:()=>{this.setState({isAllowtoUpdate:!1,scheduledContractUpdate:!0},(()=>{this.handleSave()}))}}),(0,w.jsx)(A.Button,{type:"primary",content:e("Cancel"),onClick:()=>{this.setState({isAllowtoUpdate:!1,saveEnabled:!0})}})]})]})}),this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1,showForceCloseAuthenticationLayout:!1})}}componentDidMount(){a.pJ(this.props.userDetails.EntityResult.IsArchived);let e=!1;void 0===this.props.selectedRow.Common_Code&&(e=!0),this.getAttributes(e),this.getTerminalList(),this.getUOMList(),this.getCarrierList(),this.getFinishedProductList(),this.getCustomerDestinationList()}getAttributes(e){try{c()(l.fKH,a.tW([n.se,n.NH],this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data;!0===s.IsSuccess?this.setState({attributeMetaDataList:p().cloneDeep(s.EntityResult.CONTRACT),attributeValidationErrors:a.Fl(s.EntityResult.CONTRACT),compartmentAttributeMetaDataList:p().cloneDeep(s.EntityResult.CONTRACT_ITEM)},(()=>this.getContract(e))):console.log("Failed to get Attributes")}))}catch(t){console.log("Error while getting Attributes:",t)}}componentWillReceiveProps(e){try{if(""!==this.state.contract.ContractCode&&void 0===e.selectedRow.Common_Code&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo){this.getContract(!0);let e={...this.state.validationErrors};Object.keys(e).forEach((t=>{e[t]=""})),this.setState({validationErrors:e})}}catch(t){console.log("ContractDetailsComposite:Error occured on componentWillReceiveProps",t)}}getCustomerDestinationList(){c()(l.E6k+"?ShareholderCode="+this.props.selectedShareholder+"&TransportationType="+this.props.transportationType,a.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess)if(Array.isArray(t.EntityResult)){let e=t.EntityResult.filter((e=>e.ShareholderCode===this.props.selectedShareholder));if(e.length>0){let t=e[0].CustomerDestinationsList;this.setState({customerDestinationOptions:t})}else console.log("no customers identified for shareholder")}else console.log("customerdestinations not identified for shareholder")})).catch((e=>{console.log("Error while getting Customer List:",e)}))}getFinishedProductList(){c()(l.w43+"?ShareholderCode="+this.props.selectedShareholder,a.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess&&Array.isArray(t.EntityResult)&&t.EntityResult.length>0){let e=a.Zj(t.EntityResult);this.setState({finishedProductOptions:e})}}))}getUOMList(){c()(l.WFM,a.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult){let e=t.EntityResult.MASS,s=[];e.forEach((e=>{s.push({text:e,value:e})}));let i=t.EntityResult.VOLUME,a=[];i.forEach((e=>{a.push({text:e,value:e})})),this.setState({volumeUOMOptions:a,weightUOMOptions:s})}}else console.log("Error in getUOM:",t.ErrorList)})).catch((e=>{console.log("Error while getting getUOM:",e)}))}getTerminalList(){try{c()(l.Oqv,a.tW([this.props.selectedShareholder],this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;!0===t.IsSuccess&&Array.isArray(t.EntityResult)&&t.EntityResult.length>0&&this.setState({terminalOptions:t.EntityResult})}))}catch(e){console.log("Contract Composite:Error occured on getTerminalsList",e)}}getContract(e){if(e)return S.w9.StartDate=new Date,S.w9.TerminalCodes=1===this.state.terminalOptions.length?[...this.state.terminalOptions]:[],this.handleResetAttributeValidationError(),void this.setState({contract:p().cloneDeep(S.w9),modContract:this.GetAutoGeneratedContractCode(p().cloneDeep(S.w9)),modContractItems:[],isReadyToRender:!0,modAttributeMetaDataList:[],contractKPIList:[],saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,g.i.add,g.TI),isEnableForceClose:!1},(()=>{!1===this.props.userDetails.EntityResult.IsEnterpriseNode&&this.localNodeAttribute()}));let t=[{key:o.GT,value:void 0===this.props.selectedRow.Common_Code?this.state.modContract.ContractCode:this.props.selectedRow.Common_Code}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:o.GT,KeyCodes:t};c()(l.n5R,a.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;if(!0===t.IsSuccess){let e=[];null!==t.EntityResult&&null!==t.EntityResult.ContractItems&&t.EntityResult.ContractItems.length>0&&(e=a.Q3(p().cloneDeep(t.EntityResult.ContractItems)));var s=a.ab(this.props.userDetails.EntityResult.FunctionsList,g.i.modify,g.WD)&&t.EntityResult.Status!==r.fh.CLOSED;this.setState({isReadyToRender:!0,contract:p().cloneDeep(t.EntityResult),modContract:p().cloneDeep(t.EntityResult),modContractItems:p().cloneDeep(e),isEnableForceClose:s,updatedContractStatus:t.EntityResult.Status,saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,g.i.modify,g.TI)&&t.EntityResult.Status!==r.fh.CLOSED},(()=>{this.getKPIList(this.props.selectedShareholder,t.EntityResult.ContractCode),this.props.userDetails.EntityResult.IsEnterpriseNode?this.terminalSelectionChange(t.EntityResult.TerminalCodes):this.localNodeAttribute()}))}else this.setState({modContract:p().cloneDeep(S.w9),contract:p().cloneDeep(S.w9),isReadyToRender:!0}),console.log("Error in GetContract:",t.ErrorList)})).catch((e=>{console.log("Error while getting Contract:",e)}))}GetAutoGeneratedContractCode(e){let t=e;return c()(l.UGn,a.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var s=e.data;!0===s.IsSuccess&&(null!==s.EntityResult&&void 0!==s.EntityResult&&""!==s.EntityResult?(t.ContractCode=s.EntityResult,this.setState({isAutoGeneratedContractCode:!0})):this.setState({isAutoGeneratedContractCode:!1}))})).catch((e=>{console.log("Error while getting AutoGeneratedShipmentCode:",e)})),t}handleResetAttributeValidationError(){try{var e=p().cloneDeep(this.state.attributeMetaDataList);this.setState({attributeValidationErrors:a.Fl(e)})}catch(t){console.log("ContractDetailsComposite:Error occured on handleResetAttributeValidationError",t)}}terminalSelectionChange(e){try{let o=[];var t=[],s=[];t=p().cloneDeep(this.state.attributeMetaDataList),s=p().cloneDeep(this.state.modAttributeMetaDataList);const r=p().cloneDeep(this.state.attributeValidationErrors);var i=p().cloneDeep(this.state.modContract);e.forEach((e=>{var a=s.find((t=>t.TerminalCode===e));void 0===a?t.forEach((function(t){if(t.TerminalCode===e){if(void 0!==i.Attributes&&null!==i.Attributes&&Array.isArray(i.Attributes))var s=i.Attributes.find((t=>t.TerminalCode===e));void 0!==s&&t.attributeMetaDataList.forEach((function(e){var t=s.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),o.push(t)}})):o.push(a)})),s=[],s=o,s=a.nQ(s),r.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.formCompartmentAttributes(e),this.setState({modAttributeMetaDataList:s,attributeValidationErrors:r})}catch(o){console.log("ContractDetailsComposite:Error occured on terminalSelectionChange",o)}}formCompartmentAttributes(e){try{let t=p().cloneDeep(this.state.compartmentAttributeMetaDataList);t=t.filter((function(t){return e.some((function(e){return t.TerminalCode===e}))}));let s=p().cloneDeep(this.state.modContractItems);s.forEach((s=>{let i=[];t.forEach((e=>{e.attributeMetaDataList.forEach((e=>{i.push({AttributeCode:e.Code,AttributeName:e.DisplayName,AttributeValue:e.DefaultValue,TerminalCode:e.TerminalCode,IsMandatory:e.IsMandatory,DataType:e.DataType,IsReadonly:e.IsReadonly,MinValue:e.MinValue,MaxValue:e.MaxValue,ValidationFormat:e.ValidationFormat,compSequenceNo:""})}))}));let o=p().cloneDeep(i);if(null!==s.Code||null!==s.AttributesforUI&&void 0!==s.AttributesforUI){null!==s.AttributesforUI&&void 0!==s.AttributesforUI?(s.AttributesforUI=s.AttributesforUI.filter((function(t){return e.some((function(e){return t.TerminalCode===e}))})),i=i.filter((function(e){return!s.AttributesforUI.some((function(t){return e.TerminalCode===t.TerminalCode}))}))):s.AttributesforUI=[];let t=p().cloneDeep(i);if(Array.isArray(s.Attributes)&&null!==s.Attributes&&void 0!==s.Attributes&&s.Attributes.length>0){s.Attributes.filter((function(t){return e.some((function(e){return t.TerminalCode===e}))})).forEach((e=>{e.ListOfAttributeData.forEach((s=>{let i=t.findIndex((t=>t.TerminalCode===e.TerminalCode&&t.AttributeCode===s.AttributeCode));i>=0&&(t[i].AttributeValue=s.AttributeValue)}))})),t.forEach((e=>{e.compSequenceNo=s.SeqNumber,s.AttributesforUI.push(e)}))}else i.forEach((e=>{e.compSequenceNo=s.SeqNumber,s.AttributesforUI.push(e)}))}else s.AttributesforUI=[],o.forEach((e=>{e.compSequenceNo=s.SeqNumber,s.AttributesforUI.push(e)}));this.toggleExpand(s,!0,!0),void 0!==s.AttributesforUI&&null!=s.AttributesforUI&&(s.AttributesforUI=a.vt(s.AttributesforUI)),s.AttributesforUI=a.Q3(s.AttributesforUI)})),this.setState({modContractItems:s})}catch(t){console.log("ContractDetailsComposite:Error in forming Compartment Attributes",t)}}fillAttributeDetails(e,t){try{return t=a.SC(t),e.Attributes=a.Gh(t),e.ContractItems.forEach((t=>{void 0!==t.AttributesforUI&&null!=t.AttributesforUI&&(t.AttributesforUI=a.mr(t.AttributesforUI));let s=[];if(this.props.userDetails.EntityResult.IsEnterpriseNode)s=p().cloneDeep(e.TerminalCodes);else{var i=p().cloneDeep(this.state.compartmentAttributeMetaDataList);i.length>0&&(s=[i[0].TerminalCode])}let o=[];t.Attributes=[],s.forEach((e=>{null!==t.AttributesforUI&&void 0!==t.AttributesforUI&&(o=t.AttributesforUI.filter((function(t){return t.TerminalCode===e})));let s={ListOfAttributeData:[]};s.TerminalCode=e,o.forEach((e=>{""===e.AttributeValue&&!0!==e.IsMandatory||s.ListOfAttributeData.push({AttributeCode:e.AttributeCode,AttributeValue:e.AttributeValue})})),null!==s.ListOfAttributeData&&void 0!==s.ListOfAttributeData&&s.ListOfAttributeData.length>0&&t.Attributes.push(s)}))})),e}catch(s){console.log("ContractDetailsComposite:Error occured on fillAttributeDetails",s)}}localNodeAttribute(){try{var e=p().cloneDeep(this.state.attributeMetaDataList);if(Array.isArray(e)&&e.length>0)this.terminalSelectionChange([e[0].TerminalCode]);else{var t=p().cloneDeep(this.state.compartmentAttributeMetaDataList);Array.isArray(t)&&t.length>0&&this.formCompartmentAttributes([t[0].TerminalCode])}}catch(s){console.log("ContractDetailsComposite:Error occured on localNodeAttribute",s)}}fillDetails(){try{let e=p().cloneDeep(this.state.modContract);return e.ShareholderCode=this.props.selectedShareholder,e.TransportationType=this.props.transportationType,null!==e.ContractType&&""!==e.ContractType&&(e.ContractType=r.XG.DEFAULT_CONTRACT_TYPE),null!==e.Status&&""!==e.Status&&(e.Status=r.fh.CREATED),e.ContractItems=p().cloneDeep(this.state.modContractItems),null!==e.ContractItems&&e.ContractItems.length>0&&e.ContractItems.forEach((t=>{t.ContractCode=e.ContractCode,t.ShareholderCode=e.ShareholderCode,t.CustomerCode=e.CustomerCode,null!==t.Quantity&&""!==t.Quantity&&(t.Quantity=t.Quantity.toLocaleString()),delete t.SeqNumber,void 0!==t.AttributesforUI&&null!=t.AttributesforUI&&(t.AttributesforUI=a.BZ(t.AttributesforUI))})),e}catch(e){console.log("ContractDetailsComposite:Error occured on filldetails",e)}}convertStringtoDecimal(e,t){try{return e.ContractItems.forEach((e=>{e.Quantity=a.bo(e.Quantity)})),e=this.fillAttributeDetails(e,t)}catch(s){console.log("convertStringtoDecimal error contract details",s)}}validateSave(e,t){const s={...this.state.validationErrors};Object.keys(R.H4).forEach((function(t){void 0!==e[t]&&(s[t]=a.jr(R.H4[t],e[t]))})),e.Active!==this.state.contract.Active&&""===e.Remarks&&(s.Remarks="ShipmentOrder_RemarksRequired");let i={messageType:"critical",message:"ContractInfo_SavedStatus",messageResultDetails:[]};var o=p().cloneDeep(this.state.attributeValidationErrors);t.forEach((e=>{o.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=a.I5(e,e.DefaultValue)}))}))})),this.setState({validationErrors:s,attributeValidationErrors:o});let r=!0;return o.forEach((e=>{if(!r)return r;r=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),r?(r=Object.values(s).every((function(e){return""===e})),e.ContractItems.length>0?e.ContractItems.forEach((e=>{T.oY.forEach((t=>{let s="";void 0!==t.validator&&(s=a.jr(t.validator,e[t.field])),""!==s&&i.messageResultDetails.push({keyFields:[t.displayName],keyValues:[e[t.field]],isSuccess:!1,errorMessage:s})})),null!==e.AttributesforUI&&void 0!==e.AttributesforUI&&e.AttributesforUI.forEach((e=>{let t=a.I5(e,e.AttributeValue);""!==t&&(this.props.userDetails.EntityResult.IsEnterpriseNode?i.messageResultDetails.push({keyFields:["CompAttributeTerminal",e.AttributeName],keyValues:[e.TerminalCode,e.AttributeValue],isSuccess:!1,errorMessage:t}):i.messageResultDetails.push({keyFields:[e.AttributeName],keyValues:[e.AttributeValue],isSuccess:!1,errorMessage:t}))})),this.toggleExpand(e,!0,!0)})):i.messageResultDetails.push({keyFields:["ContractInfo_ContractCode"],keyValues:[e.ContractCode],isSuccess:!1,errorMessage:"ErrMsg_Contract_NoItems"}),this.setState({validationErrors:s}),r=Object.values(s).every((function(e){return""===e})),i.messageResultDetails.length>0?(this.props.onSaved(this.state.modContract,"update",i),!1):r):r}createContract(e){this.handleAuthenticationClose();let t=[{key:o.GT,value:e.ContractCode}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:o.GT,KeyCodes:t,Entity:e},i={messageType:"critical",message:"ContractInfo_SavedStatus",messageResultDetails:[{keyFields:["ContractInfo_ContractCode"],keyValues:[e.ContractCode],isSuccess:!1,errorMessage:""}]};c()(l.ray,a.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;i.messageType=t.IsSuccess?"success":"critical",i.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?(this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,g.i.modify,g.TI)}),this.getContract(!1)):(i.messageResultDetails[0].errorMessage=t.ErrorList[0],this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,g.i.add,g.TI)}),console.log("Error in CreateContract:",t.ErrorList)),this.props.onSaved(this.state.modContract,"add",i)})).catch((e=>{this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,g.i.add,g.TI)}),i.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modContract,"add",i)}))}updateContract(e){this.handleAuthenticationClose();let t=[{key:o.GT,value:e.ContractCode}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:o.GT,KeyCodes:t,Entity:e},i={messageType:"critical",message:"ContractInfo_SavedStatus",messageResultDetails:[{keyFields:["ContractInfo_ContractCode"],keyValues:[e.ContractCode],isSuccess:!1,errorMessage:""}]};c()(l.KTM,a.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;i.messageType=t.IsSuccess?"success":"critical",i.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?(this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,g.i.modify,g.TI)}),this.getContract(!1)):(this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,g.i.modify,g.TI)}),i.messageResultDetails[0].errorMessage=t.ErrorList[0],console.log("Error in UpdateContract:",t.ErrorList)),this.props.onSaved(this.state.modContract,"update",i)})).catch((e=>{i.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modContract,"modify",i),this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,g.i.modify,g.TI)})}))}getCarrierList(){c()(l.Xj6+"?ShareholderCode="+this.props.selectedShareholder+"&Transportationtype="+this.props.transportationType,a.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=a.Zj(t.EntityResult);this.setState({carrierOptions:e})}}else console.log("Error in GetCarrierListForRole:",t.ErrorList)})).catch((e=>{console.log("Error while getting Carrier List:",e)}))}getKPIList(e,t){if(!0===a.ab(this.props.userDetails.EntityResult.FunctionsList,g.i.view,g.bL)){var s=this.props.transportationType;let i=s===r.LY.ROAD?[{key:"ShareholderCode",value:e},{key:"ContractCode",value:t}]:[{key:"ContractCode",value:t}],o={PageName:N.KZ,TransportationType:s,InputParameters:i};c()(l.dxq,a.tW(o,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({contractKPIList:t.EntityResult.ListKPIDetails}):(this.setState({contractKPIList:[]}),console.log("Error in contract KPIList:",t.ErrorList))})).catch((e=>{console.log("Error while getting Contract KPIList:",e)}))}}handleOperation(){return this.state.showAuthenticationLayout?this.addUpdateContract:this.state.showForceCloseAuthenticationLayout?this.updateContractStatus:void 0}getFunctionGroupName(){return this.state.showForceCloseAuthenticationLayout?g.WD:this.state.showAuthenticationLayout?g.TI:void 0}render(){let e={terminalCodes:this.state.terminalOptions,contractTypeOptions:a.Zj(Object.keys(r.XG)),carrierOptions:this.state.carrierOptions,unitOfVolume:this.state.volumeUOMOptions,unitOfWeight:this.state.weightUOMOptions,finishedProductOptions:this.state.finishedProductOptions,customerDestinationOptions:this.state.customerDestinationOptions};const t=[{fieldName:"ShipmentOrder_LastUpdated",fieldValue:new Date(this.state.modContract.LastUpdatedTime).toLocaleDateString()+" "+new Date(this.state.modContract.LastUpdatedTime).toLocaleTimeString()},{fieldName:"ShipmentOrder_LastActiveTime",fieldValue:void 0!==this.state.modContract.LastActiveTime&&null!==this.state.modContract.LastActiveTime?new Date(this.state.modContract.LastActiveTime).toLocaleDateString()+" "+new Date(this.state.modContract.LastActiveTime).toLocaleTimeString():""},{fieldName:"ShipmentOrder_CreatedTime",fieldValue:new Date(this.state.modContract.CreatedTime).toLocaleDateString()+" "+new Date(this.state.modContract.CreatedTime).toLocaleTimeString()}];return this.state.isReadyToRender?(0,w.jsxs)("div",{children:[this.state.isShowTruckShipment||this.state.isShowRailDispatch?null:(0,w.jsx)(m.A,{children:(0,w.jsx)(C.A,{entityCode:this.state.contract.ContractCode,newEntityName:"ContractInfo_Title",popUpContents:t})}),this.state.isShowTruckShipment?(0,w.jsx)(m.A,{children:(0,w.jsx)(x.default,{shipmentSource:r.U6.Contract,shipmentSourceCode:this.state.modContract.ContractCode,selectedShareholder:this.props.selectedShareholder,shipmentSourceCompartmentItems:this.state.modContractItems,shipmentSourceDetails:this.state.modContract,isShowBackButton:this.handleShowBackButton})}):this.state.isShowRailDispatch?(0,w.jsx)(m.A,{children:(0,w.jsx)(V.default,{shipmentSource:r.U6.Contract,shipmentSourceCode:this.state.modContract.ContractCode,selectedShareholder:this.props.selectedShareholder,shipmentSourceCompartmentItems:this.state.modContractItems,shipmentSourceDetails:this.state.modContract,isShowBackButton:this.handleShowBackButton})}):(0,w.jsxs)(w.Fragment,{children:[" ",(0,w.jsx)(P.A,{KPIList:this.state.contractKPIList,children:" "}),(0,w.jsx)(m.A,{children:(0,w.jsx)(I,{contract:this.state.contract,modContract:this.state.modContract,modContractItems:this.state.modContractItems,validationErrors:this.state.validationErrors,listOptions:e,onFieldChange:this.handleChange,onDateTextChange:this.handleDateTextChange,onAllTerminalsChange:this.handleAllTerminalsChange,handleAddPlan:this.handleAddPlan,handleDeletePlan:this.handleDeletePlan,selectedPlanRow:this.state.selectedPlanRow,handleRowSelectionChange:this.handleRowSelectionChange,handleCellDataEdit:this.handleCellDataEdit,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,attributeValidationErrors:this.state.attributeValidationErrors,onAttributeDataChange:this.handleAttributeDataChange,handleCompAttributeCellDataEdit:this.handleCompAttributeCellDataEdit,modAttributeMetaDataList:this.state.modAttributeMetaDataList,toggleExpand:this.toggleExpand,expandedRows:this.state.expandedRows,compartmentDetailsPageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,handleForceClose:this.handleForceClose,isEnableForceClose:this.state.isEnableForceClose,handleViewShipments:this.handleViewShipments,handleViewDispatch:this.handleViewDispatch,isAutoGeneratedContractCode:this.state.isAutoGeneratedContractCode})})]}),this.state.isShowTruckShipment||this.state.isShowRailDispatch?this.state.isShowBackButton?(0,w.jsx)("div",{className:"row",children:(0,w.jsx)("div",{className:"col col-lg-8",style:{marginTop:"1%"},children:(0,w.jsx)(E.TranslationConsumer,{children:e=>(0,w.jsx)(A.Button,{className:"backButton",onClick:this.handleBack,content:e("Back")})})})}):null:(0,w.jsx)(m.A,{children:(0,w.jsx)(y.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.isAllowtoUpdate?this.confirmAllowToUpdate():null,this.state.showAuthenticationLayout||this.state.showForceCloseAuthenticationLayout?(0,w.jsx)(B.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.contract.ContractCode?g.i.add:g.i.modify,functionGroup:this.getFunctionGroupName(),handleOperation:this.handleOperation(),handleClose:this.handleAuthenticationClose}):null]}):(0,w.jsx)(D.A,{message:"Loading"})}}const F=(0,h.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(_)},88863:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var i=s(65043),a=s(69062),o=s(93779),r=s(7523),l=s(72067),n=s(97508),h=s(40854),d=s.n(h),c=s(65187),u=s(43503),p=s(46100),m=s(53536),S=s.n(m),C=s(80312),g=s(40252),D=s(9256),y=s(67907),R=s(72711),E=s(24904),A=s(85800),b=s(78374),f=s(35861),L=s(70579);function v(e){let{order:t,modOrder:s,onFieldChange:i,validationErrors:o,attributeValidationErrors:l,onDateTextChange:n,listOptions:h,onAllTerminalsChange:d,onAttributeDataChange:u,handleCompAttributeCellDataEdit:p,handleAddPlan:m,handleDeletePlan:S,selectedPlanRow:C,modAttributeMetaDataList:g,expandedRows:D,handleRowSelectionChange:v,handleCellDataEdit:w,selectedShareholder:I,modOrderItems:T,toggleExpand:k,compartmentDetailsPageSize:O,isEnterpriseNode:x,handleForceClose:V,handleViewShipments:j,printScheduleClick:P,enableForceClose:N}=e;const[B]=(0,y.useTranslation)(),_=(e,t)=>{let s=[];return s=e.find((e=>e.TerminalCode===t)),s.attributeValidationErrors},F=e=>{const t=e.rowData,s=e=>{var t=e.split("-");return new Date(t[0],t[1]-1,t[2])},i=(e,t)=>{var s=new Date(t);t=s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2),p(e,t)};try{return t.DataType.toLowerCase()===r.pe.STRING.toLowerCase()||t.DataType.toLowerCase()===r.pe.INT.toLowerCase()?(0,L.jsx)(R.Input,{fluid:!0,value:t.AttributeValue,disabled:t.IsReadonly,onChange:t=>p(e,t),reserveSpace:!1}):t.DataType.toLowerCase()===r.pe.FLOAT.toLowerCase()||t.DataType.toLowerCase()===r.pe.LONG.toLowerCase()||t.DataType.toLowerCase()===r.pe.DOUBLE.toLowerCase()?(0,L.jsx)(R.Input,{fluid:!0,value:null===t.AttributeValue||void 0===t.AttributeValue||""===t.AttributeValue?"":t.AttributeValue.toLocaleString(),disabled:t.IsReadonly,onChange:t=>p(e,t),reserveSpace:!1}):t.DataType.toLowerCase()===r.pe.BOOL.toLowerCase()?(0,L.jsx)(R.Checkbox,{checked:"true"===t.AttributeValue.toString().toLowerCase(),disabled:t.IsReadonly,onChange:t=>p(e,t)}):t.DataType.toLowerCase()===r.pe.DATETIME.toLowerCase()?(0,L.jsx)(R.DatePicker,{fluid:!0,value:null===t.AttributeValue||void 0===t.AttributeValue||""===t.AttributeValue?"":s(t.AttributeValue),disabled:t.IsReadonly,showYearSelector:"true",onChange:t=>i(e,t),onTextChange:t=>{i(e,t)},reserveSpace:!1}):null}catch(a){console.log("OrderDetails:Error occured on handleAttributeType",a)}},M=e=>e.rowData.IsMandatory?(0,L.jsxs)("div",{children:[(0,L.jsx)("span",{children:e.rowData.AttributeName}),(0,L.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]}):(0,L.jsx)("div",{children:(0,L.jsx)("span",{children:e.rowData.AttributeName})});const U=e=>{let t=[];return"QuantityUOM"===e.field&&(t=[...h.unitOfVolume,...h.unitOfWeight]),"FinishedProductCode"===e.field&&(t=h.finishedProductOptions),(0,L.jsx)(R.Select,{className:"selectDropwdown",placeholder:B("Common_Select"),value:T[e.rowIndex][e.field],fluid:!0,options:t,onChange:t=>w(t,e),reserveSpace:!1,search:!0,noResultsMessage:B("noResultsMessage")})};return(0,L.jsxs)("div",{className:"detailsContainer",children:[(0,L.jsxs)("div",{className:"row",children:[(0,L.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,L.jsx)(R.Input,{fluid:!0,value:s.OrderCode,label:B("ShipmentOrder_OrderCode"),indicator:"required",disabled:""!==t.OrderCode,onChange:e=>i("OrderCode",e),error:B(o.OrderCode),reserveSpace:!1})}),(0,L.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,L.jsx)(R.Select,{fluid:!0,placeholder:B("Common_Select"),label:B("Customer_Code"),indicator:"required",value:s.CustomerCode,options:h.customerOptions,onChange:e=>i("CustomerCode",e),error:B(o.CustomerCode),reserveSpace:!1,search:!0,noResultsMessage:B("noResultsMessage")})}),(0,L.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,L.jsx)(R.Input,{fluid:!0,value:s.Description,label:B("ShipmentOrder_Desc"),onChange:e=>i("Description",e),error:B(o.Description),reserveSpace:!1})}),(0,L.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,L.jsx)(R.DatePicker,{fluid:!0,value:null===s.OrderStartDate?"":a.OL(s.OrderStartDate),displayFormat:(0,f.F1)(),label:B("ShipmentOrder_StartDate"),showYearSelector:"true",indicator:"required",onChange:e=>i("OrderStartDate",e),onTextChange:(e,t)=>{n("OrderStartDate",e,t)},error:B(o.OrderStartDate),reserveSpace:!1})}),(0,L.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,L.jsx)(R.DatePicker,{fluid:!0,value:null===s.OrderEndDate?"":a.OL(s.OrderEndDate),displayFormat:(0,f.F1)(),label:B("ShipmentOrder_EndDate"),showYearSelector:"true",indicator:"required",disablePast:!0,onChange:e=>i("OrderEndDate",e),onTextChange:(e,t)=>{n("OrderEndDate",e,t)},error:B(o.OrderEndDate),reserveSpace:!1})}),(0,L.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,L.jsx)(R.Input,{fluid:!0,value:void 0===(0,a.cd)(r.p_,s.OrderStatus)?"":(0,a.cd)(r.p_,s.OrderStatus),label:B("ShipmentOrder_OrderStatus"),disabled:!0,reserveSpace:!1})}),(0,L.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,L.jsx)(R.DatePicker,{fluid:!0,value:null===s.OrderDate?"":a.OL(s.OrderDate),displayFormat:(0,f.F1)(),label:B("ShipmentOrder_OrderDate"),showYearSelector:"true",indicator:"required",disabled:!0,reserveSpace:!1})}),x?(0,L.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,L.jsx)(E.y,{terminalList:h.terminalCodes,selectedTerminal:s.TerminalCodes,error:B(o.TerminalCodes),onFieldChange:i,onCheckChange:d})}):"",(0,L.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,L.jsx)(R.Select,{fluid:!0,placeholder:B("Common_Select"),label:B("ShipmentOrder_Status"),value:s.Active,options:[{text:B("ViewShipment_Ok"),value:!0},{text:B("ViewShipmentStatus_Inactive"),value:!1}],onChange:e=>i("Active",e),disabled:""===t.OrderCode})}),(0,L.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,L.jsx)(R.Input,{fluid:!0,value:null===s.Remarks?"":s.Remarks,label:B("ShipmentOrder_Remarks"),onChange:e=>i("Remarks",e),indicator:s.Active!==t.Active?"required":"",error:B(o.Remarks),reserveSpace:!1})})]}),g.length>0?g.map((e=>(0,L.jsx)(c.A,{children:(0,L.jsx)(R.Accordion,{children:(0,L.jsx)(R.Accordion.Content,{className:"attributeAccordian",title:x?e.TerminalCode+" - "+B("Attributes_Header"):B("Attributes_Header"),children:(0,L.jsx)(A.n,{selectedAttributeList:e.attributeMetaDataList,handleCellDataEdit:u,attributeValidationErrors:_(l,e.TerminalCode)})})})}))):null,(0,L.jsxs)("div",{className:"row compartmentRow",children:[(0,L.jsx)("div",{className:"col col-md-8 col-lg-9 col col-xl-9",children:(0,L.jsx)("h4",{children:B("ShipmentOrder_PlanHeader")})}),(0,L.jsx)("div",{className:"col col-md-4 col-lg-3 col-xl-3",children:(0,L.jsxs)("div",{className:"compartmentIconContainer",children:[(0,L.jsxs)("div",{onClick:m,className:"compartmentIcon",children:[(0,L.jsx)("div",{children:(0,L.jsx)(R.Icon,{root:"common",name:"badge-plus",size:"medium"})}),(0,L.jsx)("div",{className:"margin_l10",children:(0,L.jsx)("h5",{className:"font14",children:B("TrailerInfo_Add")})})]}),(0,L.jsxs)("div",{onClick:S,className:"compartmentIcon margin_l30",children:[(0,L.jsx)("div",{children:(0,L.jsx)(R.Icon,{root:"common",name:"delete",size:"medium"})}),(0,L.jsx)("div",{className:"margin_l10",children:(0,L.jsx)("h5",{className:"font14",children:B("TrailerInfo_Delete")})})]})]})})]}),(0,L.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,L.jsx)("div",{className:"col-12 detailsTable",children:(0,L.jsxs)(b.bQ,{data:T,rowExpansionTemplate:function(e){return Array.isArray(e.AttributesforUI)&&e.AttributesforUI.length>0?(0,L.jsx)("div",{className:"childTable ChildGridViewAllShipmentLoadingDetails",children:(0,L.jsxs)(b.bQ,{data:e.AttributesforUI,rows:O,children:[x?(0,L.jsx)(b.bQ.Column,{className:"compColHeight",field:"TerminalCode",header:B("CompartmentTerminal"),editable:!1},"TerminalCode"):"",(0,L.jsx)(b.bQ.Column,{className:"compColHeight",header:B("CompartmentAttributeName"),renderer:M,editable:!1},"AttributeName"),(0,L.jsx)(b.bQ.Column,{className:"compColHeight",header:B("CompartmentAttributeValue"),renderer:F}),Array.isArray(e.AttributesforUI)&&e.AttributesforUI.length>O?(0,L.jsx)(b.bQ.Pagination,{}):""]})}):(0,L.jsx)("div",{className:"compartmentIcon",children:(0,L.jsx)("div",{className:"gridButtonAlignLeft",children:B("CustomerInventory_NoRecordsFound")})})},expandedRows:D,selectionMode:"multiple",selection:C,onSelectionChange:v,scrollable:!0,scrollHeight:"320px",children:[(0,L.jsx)(b.bQ.Column,{className:"compColHeight colminWidth",field:"FinishedProductCode",header:(0,f.i7)(B("ShipmentOrder_ProductCode")),editable:!0,editFieldType:"text",customEditRenderer:U},"FinishedProductCode"),(0,L.jsx)(b.bQ.Column,{className:"compColHeight colminWidth",field:"Quantity",header:(0,f.i7)(B("ShipmentOrder_Quantity")),editable:!0,editFieldType:"text",renderer:e=>null===e.value?"":e.value.toLocaleString(),customEditRenderer:e=>{let t=T[e.rowIndex][e.field];return"Quantity"===e.field&&null!==t&&""!==t&&(t=t.toLocaleString()),(0,L.jsx)(R.Input,{fluid:!0,value:t,onChange:t=>w(t,e),reserveSpace:!1})}},"Quantity"),(0,L.jsx)(b.bQ.Column,{className:"compColHeight colminWidth",field:"QuantityUOM",header:(0,f.i7)(B("ShipmentOrder_UOM")),editable:!0,editFieldType:"text",customEditRenderer:U},"QuantityUOM"),(0,L.jsx)(b.bQ.Column,{className:"compColHeight colminWidth",field:"ScheduledDate",header:(0,f.i7)(B("Scheduled Date")),editable:!0,editFieldType:"text",renderer:e=>null===e.value?"":e.value,customEditRenderer:e=>{let t=T[e.rowIndex][e.field];return(0,L.jsx)(R.DatePicker,{fluid:!0,value:null===t?"":new Date(t),showYearSelector:"true",displayFormat:(0,f.F1)(),onChange:t=>w(t,e),onTextChange:(t,s)=>{w(t,e)},reserveSpace:!1})}},"ScheduledDate"),(0,L.jsx)(b.bQ.Column,{className:"compColHeight disabledColumn colminWidth",field:"BlockedQuantity",header:B("ShipmentOrder_ScheduledQuantity"),renderer:e=>null===e.value?"":e.value.toLocaleString(),editFieldType:"text"},"BlockedQuantity"),(0,L.jsx)(b.bQ.Column,{className:"compColHeight disabledColumn colminWidth",field:"LoadedQuantity",header:B("ShipmentOrder_LoadedQuantity"),renderer:e=>null===e.value?"":e.value.toLocaleString(),editFieldType:"text"},"LoadedQuantity"),(0,L.jsx)(b.bQ.Column,{className:"compColHeight disabledColumn colminWidth",field:"RemainingQuantity",header:B("ShipmentOrder_RemainingQuantity"),renderer:e=>null===e.value?"":e.value.toLocaleString(),editFieldType:"text"},"ReaminingQuantity"),(0,L.jsx)(b.bQ.Column,{className:"expandedColumn",initialWidth:"200px",renderer:e=>{const t=D.findIndex((t=>t.SeqNumber===e.rowData.SeqNumber))>=0;return(0,L.jsxs)("div",{onClick:()=>k(e.rowData,t),className:"compartmentIcon gridButtonFontColor",children:[(0,L.jsx)("span",{children:B(t?"Hide_Attributes":"View_Attributes")}),(0,L.jsx)(R.Icon,{root:"common",name:t?"caret-up":"caret-down",className:"margin_l10"})]})}})]})})}),(0,L.jsx)("div",{className:"row",children:(0,L.jsxs)("div",{className:"col col-md-8 col-lg-9 col col-xl-12",style:{textAlign:"right"},children:[(0,L.jsx)(R.Button,{content:B("ShipmentOrder_BtnForceClose"),disabled:""===t.OrderCode||s.OrderStatus===r.p_.CLOSED||s.OrderStatus===r.p_.FULLY_DELIVERED||!N,onClick:V}),""!==t.OrderCode?(0,L.jsx)(R.Button,{content:B("ShipmentOrder_ViewShipments"),onClick:j}):null,""!==t.OrderCode?(0,L.jsx)(R.Button,{content:B("Print Schedule"),onClick:P}):null]})})]})}v.defaultProps={listOptions:{terminalCodes:[],unitOfVolume:[],unitOfWeight:[],finishedProductOptions:[],customerOptions:[]},modOrderItems:[],isEnterpriseNode:!1};var w=s(44192),I=s(28882),T=s(15417),k=s(31295),O=s(97105),x=s(40510),V=s(39424),j=s(62900),P=s(14159),N=s(11981);class B extends i.Component{constructor(){var e;super(...arguments),e=this,this.state={order:{},modOrder:{},modOrderItems:[],validationErrors:a.Th(w.f8),isReadyToRender:!1,saveEnabled:!1,terminalOptions:[],volumeUOMOptions:[],weightUOMOptions:[],selectedPlanRow:[],finishedProductOptions:[],customerOptions:[],attributeMetaDataList:[],compartmentAttributeMetaDataList:[],modAttributeMetaDataList:[],attributeValidationErrors:[],expandedRows:[],isShowTruckShipment:!1,isShowBackButton:!1,orderKPIList:[],enableForceClose:!1,showAuthenticationLayout:!1,showForceCloseAuthenticationLayout:!1,tempOrder:{}},this.handleChange=(e,t)=>{try{let s=S().cloneDeep(this.state.modOrder);s[e]=t;const i={...this.state.validationErrors};s.Active===this.state.order.Active&&(this.state.order.Remarks!==s.Remarks&&""!==s.Remarks||(i.Remarks="")),"Active"===e&&s.Active!==this.state.order.Active&&(s.Remarks=""),void 0!==w.f8[e]&&(i[e]=a.jr(w.f8[e],t)),this.setState({validationErrors:i,modOrder:s},(()=>{"TerminalCodes"===e&&this.terminalSelectionChange(t)}))}catch(s){console.log("OrderDetailsComposite:Error occured on handleChange",s)}},this.handleRowSelectionChange=e=>{this.setState({selectedPlanRow:e})},this.handleCellDataEdit=(e,t)=>{console.log("handleCellDataEdit() called... newVal: ".concat(JSON.stringify(e),", cellData: ").concat(JSON.stringify(t)));let s=S().cloneDeep(this.state.modOrderItems);if(console.log("handleCellDataEdit() modOrderItems: ".concat(JSON.stringify(s))),"ScheduledDate"!==t.field)s[t.rowIndex][t.field]=e;else{const i=new Date(e).toISOString().split("T")[0];s[t.rowIndex][t.field]=i}console.log("handleCellDataEdit() modOrderItems: ".concat(JSON.stringify(s))),this.setState({modOrderItems:s}),console.log("handleCellDataEdit() this.state.modOrderItems: ".concat(JSON.stringify(this.state.modOrderItems)))},this.handleAddPlan=()=>{if(!this.props.userDetails.EntityResult.IsArchived)try{const e=(new Date).toISOString().split("T")[0];let t={Attributes:[],BlockedQuantity:null,FinishedProductCode:null,FinishdedProductType:null,ItemCode:null,LoadedQuantity:null,LotNumber:null,OrderCode:null,Quantity:null,QuantityUOM:this.props.userDetails.EntityResult.PageAttibutes.DefaultQtyUOMForTransactionUI.ROAD,RemainingQuantity:null,ShareholderCode:null,ScheduledDate:e},s=S().cloneDeep(this.state.modOrderItems);console.log("handleAddPlan() after lodash modOrderItems:".concat(JSON.stringify(s))),t.SeqNumber=a.Mz(s),s.push(t),console.log("handleAddPlan() after seqNumber modOrderItems:".concat(JSON.stringify(s))),this.setState({modOrderItems:s,selectedPlanRow:[]},(()=>{if(!1===this.props.userDetails.EntityResult.IsEnterpriseNode){var e=S().cloneDeep(this.state.compartmentAttributeMetaDataList);e.length>0&&this.formCompartmentAttributes([e[0].TerminalCode])}else this.formCompartmentAttributes(this.state.modOrder.TerminalCodes)}))}catch(e){console.log("OrderDetailsComposite:Error occured on handleAddCompartment",e)}},this.handleDeletePlan=()=>{if(!this.props.userDetails.EntityResult.IsArchived)try{if(null!=this.state.selectedPlanRow&&this.state.selectedPlanRow.length>0&&this.state.modOrderItems.length>0){let e=S().cloneDeep(this.state.modOrderItems);this.state.selectedPlanRow.forEach(((t,s)=>{e=e.filter(((e,s)=>e.SeqNumber!==t.SeqNumber))})),this.setState({modOrderItems:e})}this.setState({selectedPlanRow:[]})}catch(e){console.log("OrderDetailsComposite:Error occured on handleDeleteCompartment",e)}},this.handleDateTextChange=(e,t,s)=>{try{let i={...this.state.validationErrors},a={...this.state.modOrder};i[e]=s,a[e]=t,this.setState({validationErrors:i,modOrder:a})}catch(s){console.log("OrderDetailsComposite:Error occured on handleDateTextChange",s)}},this.handleAttributeDataChange=(e,t)=>{console.log("handleAttributeDataChange() called... attribute: ".concat(JSON.stringify(e)," value: ").concat(t));try{let s=[],i=S().cloneDeep(this.state.modAttributeMetaDataList),o=i.filter((t=>t.TerminalCode===e.TerminalCode));o.length>0&&Array.isArray(o[0].attributeMetaDataList)&&(s=o[0].attributeMetaDataList.filter((t=>t.Code===e.Code))),s.length>0&&(s[0].DefaultValue=t);const r=S().cloneDeep(this.state.attributeValidationErrors);r.forEach((s=>{s.TerminalCode===e.TerminalCode&&(s.attributeValidationErrors[e.Code]=a.I5(e,t))})),this.setState({attributeValidationErrors:r,modAttributeMetaDataList:i})}catch(s){console.log("OrderDetailsComposite:Error occured on handleAttributeDataChange",s)}},this.handleCompAttributeCellDataEdit=(e,t)=>{let s=S().cloneDeep(this.state.modOrderItems),i=s.findIndex((t=>t.SeqNumber===e.rowData.compSequenceNo));i>=0&&(s[i].AttributesforUI[e.rowData.SeqNumber-1].AttributeValue=t),this.setState({modOrderItems:s}),i>=0&&this.toggleExpand(s[i],!0,!0)},this.handleAllTerminalsChange=e=>{try{const t=S().cloneDeep(this.state.modOrder);t.TerminalCodes=e?[...this.state.terminalOptions]:[],this.setState({modOrder:t}),this.terminalSelectionChange(t.TerminalCodes)}catch(t){console.log("OrderComposite:Error occured on handleAllTerminasChange",t)}},this.addUpdateOrder=()=>{try{this.setState({saveEnabled:!1});let e=S().cloneDeep(this.state.tempOrder);""===this.state.order.OrderCode?this.createOrder(e):this.updateOrder(e)}catch(e){console.log("Order Composite : Error in addUpdateOrder")}},this.handleSave=()=>{console.log("handleSave() called...");try{if(Object.values(this.state.validationErrors).every((function(e){return""===e}))){let e=this.fillDetails();console.log("handleSave() modOrder:".concat(JSON.stringify(e)));let t=a.pI(this.state.modAttributeMetaDataList);if(console.log("handleSave() attributeList:".concat(JSON.stringify(t))),this.validateSave(e,t)){e=this.convertStringtoDecimal(e,t),e=a.pC(O.S.Order,e);let s=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,i=S().cloneDeep(e);this.setState({showAuthenticationLayout:s,tempOrder:i},(()=>{!1===s&&this.addUpdateOrder()})),e=a.HL(O.S.Order,e)}else this.setState({saveEnabled:!0})}}catch(e){console.log("OrderDetailsComposite:Error occured on handleSave",e)}},this.toggleExpand=function(t,s){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.state.expandedRows,o=a.findIndex((e=>e.SeqNumber===t.SeqNumber));s?i&&o>=0?(a.splice(o,1),a.push(t)):o>=0&&a.splice(o,1):o>=0?a=a.filter((e=>e.Code!==t.Code&&e.SeqNumber!==t.SeqNumber)):a.push(t),e.setState({expandedRows:a})},this.handleViewShipments=()=>{this.setState({isShowTruckShipment:!0,isShowBackButton:!0},(()=>this.props.handleOperationVisibility(!1)))},this.handleBack=()=>{this.setState({isShowTruckShipment:!1,isShowBackButton:!1},(()=>{this.props.handleOperationVisibility(!0),this.getOrder(!1)}))},this.handleShowBackButton=e=>{this.setState({isShowBackButton:e})},this.forceCloseOperation=()=>{let e=S().cloneDeep(this.state.tempOrder),t=[{key:o.SP,value:e.OrderCode}],s={OrderCode:e.OrderCode,ShareholderCode:this.props.selectedShareholder,ForceCloseReason:e.Remarks,ForceClose:!0},i={ShareHolderCode:this.props.selectedShareholder,keyDataCode:o.SP,KeyCodes:t,Entity:s},r={messageType:"critical",message:"OrderInfo_SavedStatus",messageResultDetails:[{keyFields:["ShipmentOrder_OrderCode"],keyValues:[e.OrderCode],isSuccess:!1,errorMessage:""}]};d()(l.sWv,a.tW(i,this.props.tokenDetails.tokenInfo)).then((t=>{let s=t.data;r.messageType=s.IsSuccess?"success":"critical",r.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.getOrder(!1):(r.messageResultDetails[0].errorMessage=s.ErrorList[0],console.log("Error in UpdateOrderStatus:",s.ErrorList)),this.props.onSaved(e,"add",r)})).catch((t=>{r.messageResultDetails[0].errorMessage=t,this.props.onSaved(e,"add",r)}))},this.handleForceClose=()=>{let e=S().cloneDeep(this.state.modOrder);if(""===e.Remarks){let e=this.state.validationErrors;e.Remarks="ShipmentOrder_RemarksRequired",this.setState({validationErrors:e})}else{let t=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,s=S().cloneDeep(e);this.setState({showForceCloseAuthenticationLayout:t,tempOrder:s},(()=>{!1===t&&this.forceCloseOperation()}))}},this.handleReset=()=>{try{let e=a.Q3(S().cloneDeep(this.state.order.OrderItems));this.setState({modOrder:S().cloneDeep(this.state.order),modOrderItems:e,modAttributeMetaDataList:[]},(()=>{this.props.userDetails.EntityResult.IsEnterpriseNode?(this.terminalSelectionChange(this.state.order.TerminalCodes),this.handleResetAttributeValidationError()):(this.localNodeAttribute(),this.handleResetAttributeValidationError())}));let t={...this.state.validationErrors};Object.keys(t).forEach((e=>{t[e]=""})),this.setState({validationErrors:t})}catch(e){console.log("OrderDetailsComposite:Error occured on handleReset",e)}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1,showForceCloseAuthenticationLayout:!1})},this.printScheduleClick=()=>{console.log("printScheduleClick called..."),this.printSchedule()},this.printSchedule=()=>{console.log("printSchedule() called...");let e=S().cloneDeep(this.state.order);console.log("printSchedule() order: ".concat(JSON.stringify(e)));let t={messageType:"critical",message:"ViewOrderStatus_PrintScheduleStatus",messageResultDetails:[{keyFields:["Order"],keyValues:[e.OrderCode],isSuccess:!1,errorMessage:""}]};this.handlePrintSchedule(e.OrderCode,this.props.selectedShareholder,this.props.tokenDetails.tokenInfo,(e=>{t.messageType=e.IsSuccess?"success":"critical",t.messageResultDetails[0].isSuccess=e.IsSuccess,t.messageResultDetails[0].errorMessage=e.ErrorList[0],(0,P.toast)((0,L.jsx)(c.A,{children:(0,L.jsx)(N.A,{notificationMessage:t})}),{autoClose:"success"===t.messageType&&1e4})}))}}componentDidMount(){a.pJ(this.props.userDetails.EntityResult.IsArchived);let e=!1;void 0===this.props.selectedRow.Common_Code&&(e=!0),this.getAttributes(e),this.getTerminalList(),this.getUOMList(),this.getFinishedProductList(),this.getCustomerList()}getAttributes(e){try{d()(l.fKH,a.tW([T.w4,T.vs],this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data;!0===s.IsSuccess?this.setState({attributeMetaDataList:S().cloneDeep(s.EntityResult.ORDER),attributeValidationErrors:a.Fl(s.EntityResult.ORDER),compartmentAttributeMetaDataList:S().cloneDeep(s.EntityResult.ORDERITEM)},(()=>this.getOrder(e))):console.log("Failed to get Attributes")}))}catch(t){console.log("Error while getting Attributes:",t)}}componentWillReceiveProps(e){try{if(""!==this.state.order.OrderCode&&void 0===e.selectedRow.Common_Code&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo){this.getOrder(!0);let e={...this.state.validationErrors};Object.keys(e).forEach((t=>{e[t]=""})),this.setState({validationErrors:e})}}catch(t){console.log("OrderDetailsComposite:Error occured on componentWillReceiveProps",t)}}getCustomerList(){d()(l.E6k+"?TransportationType="+r.LY.ROAD+"&ShareholderCode="+this.props.selectedShareholder,a.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess)if(Array.isArray(t.EntityResult)){let e=t.EntityResult.filter((e=>e.ShareholderCode===this.props.selectedShareholder));if(e.length>0){let t=e[0].CustomerDestinationsList,s=Object.keys(t);s=a.Zj(s),this.setState({customerOptions:s})}else console.log("no customers identified for shareholder")}else console.log("customerdestinations not identified for shareholder")}))}getFinishedProductList(){d()(l.w43+"?ShareholderCode="+this.props.selectedShareholder,a.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess&&Array.isArray(t.EntityResult)&&t.EntityResult.length>0){let e=a.Zj(t.EntityResult);this.setState({finishedProductOptions:e})}}))}getUOMList(){d()(l.WFM,a.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult){let e=t.EntityResult.MASS,s=[];e.forEach((e=>{s.push({text:e,value:e})}));let i=t.EntityResult.VOLUME,a=[];i.forEach((e=>{a.push({text:e,value:e})})),this.setState({volumeUOMOptions:a,weightUOMOptions:s})}}else console.log("Error in getUOM:",t.ErrorList)})).catch((e=>{console.log("Error while getting getUOM:",e)}))}getTerminalList(){try{d()(l.Oqv,a.tW([this.props.selectedShareholder],this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;!0===t.IsSuccess&&Array.isArray(t.EntityResult)&&t.EntityResult.length>0&&this.setState({terminalOptions:t.EntityResult})}))}catch(e){console.log("OrderComposite:Error occured on getTerminalsList",e)}}getOrder(e){if(console.log("getOrder() called... isNewOrder: ".concat(e)),e)return p.js.OrderStartDate=new Date,p.js.TerminalCodes=1===this.state.terminalOptions.length?[...this.state.terminalOptions]:[],p.js.OrderDate=new Date,this.handleResetAttributeValidationError(),void this.setState({order:S().cloneDeep(p.js),modOrder:S().cloneDeep(p.js),modOrderItems:[],isReadyToRender:!0,modAttributeMetaDataList:[],orderKPIList:[],saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,C.i.add,C.dB)},(()=>{!1===this.props.userDetails.EntityResult.IsEnterpriseNode&&this.localNodeAttribute()}));let t=[{key:o.SP,value:void 0===this.props.selectedRow.Common_Code?this.state.modOrder.OrderCode:this.props.selectedRow.Common_Code}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:o.SP,KeyCodes:t};d()(l.jBr,a.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;if(!0===t.IsSuccess){console.log("getOrder() called...1 result.EntityResult: ".concat(JSON.stringify(t.EntityResult)));let e=[];null!==t.EntityResult&&null!==t.EntityResult.OrderItems&&t.EntityResult.OrderItems.length>0&&(e=a.Q3(S().cloneDeep(t.EntityResult.OrderItems))),console.log("getOrder() called...2 result.EntityResult: ".concat(JSON.stringify(t.EntityResult))),this.setState({isReadyToRender:!0,order:S().cloneDeep(t.EntityResult),modOrder:S().cloneDeep(t.EntityResult),modOrderItems:S().cloneDeep(e),saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,C.i.modify,C.dB)&&t.EntityResult.OrderStatus!==r.p_.CLOSED&&t.EntityResult.OrderStatus!==r.p_.FULLY_DELIVERED,enableForceClose:a.ab(this.props.userDetails.EntityResult.FunctionsList,C.i.modify,C.dB)},(()=>{this.getKPIList(this.props.selectedShareholder,t.EntityResult.OrderCode),this.props.userDetails.EntityResult.IsEnterpriseNode?this.terminalSelectionChange(t.EntityResult.TerminalCodes):this.localNodeAttribute()}))}else this.setState({modOrder:S().cloneDeep(p.js),order:S().cloneDeep(p.js),isReadyToRender:!0}),console.log("Error in GetOrder:",t.ErrorList)})).catch((e=>{console.log("Error while getting Order:",e)}))}handleResetAttributeValidationError(){try{var e=S().cloneDeep(this.state.attributeMetaDataList);this.setState({attributeValidationErrors:a.Fl(e)})}catch(t){console.log("OrderDetailsComposite:Error occured on handleResetAttributeValidationError",t)}}terminalSelectionChange(e){try{let o=[];var t=[],s=[];t=S().cloneDeep(this.state.attributeMetaDataList),s=S().cloneDeep(this.state.modAttributeMetaDataList);const r=S().cloneDeep(this.state.attributeValidationErrors);var i=S().cloneDeep(this.state.modOrder);e.forEach((e=>{var a=s.find((t=>t.TerminalCode===e));void 0===a?t.forEach((function(t){if(t.TerminalCode===e){var s=i.Attributes.find((t=>t.TerminalCode===e));void 0!==s&&t.attributeMetaDataList.forEach((function(e){var t=s.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),o.push(t)}})):o.push(a)})),s=[],s=o,s=a.nQ(s),r.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.formCompartmentAttributes(e),this.setState({modAttributeMetaDataList:s,attributeValidationErrors:r})}catch(o){console.log("OrderDetailsComposite:Error occured on terminalSelectionChange",o)}}formCompartmentAttributes(e){console.log("formCompartmentAttributes() called... selectedTerminals: ".concat(JSON.stringify(e)));try{let t=S().cloneDeep(this.state.compartmentAttributeMetaDataList);t=t.filter((function(t){return e.some((function(e){return t.TerminalCode===e}))}));let s=S().cloneDeep(this.state.modOrderItems);console.log("formCompartmentAttributes() modOrderItems: ".concat(JSON.stringify(s))),s.forEach((s=>{let i=[];s.ScheduledDate="",t.forEach((e=>{e.attributeMetaDataList.forEach((e=>{i.push({AttributeCode:e.Code,AttributeName:e.DisplayName,AttributeValue:e.DefaultValue,TerminalCode:e.TerminalCode,IsMandatory:e.IsMandatory,DataType:e.DataType,IsReadonly:e.IsReadonly,MinValue:e.MinValue,MaxValue:e.MaxValue,ValidationFormat:e.ValidationFormat,compSequenceNo:""})}))}));let o=S().cloneDeep(i);if(null!==s.Code||null!==s.AttributesforUI&&void 0!==s.AttributesforUI){null!==s.AttributesforUI&&void 0!==s.AttributesforUI?(s.AttributesforUI=s.AttributesforUI.filter((function(t){return e.some((function(e){return t.TerminalCode===e}))})),i=i.filter((function(e){return!s.AttributesforUI.some((function(t){return e.TerminalCode===t.TerminalCode}))}))):s.AttributesforUI=[];let t=S().cloneDeep(i);if(Array.isArray(s.Attributes)&&null!==s.Attributes&&void 0!==s.Attributes&&s.Attributes.length>0){s.Attributes.filter((function(t){return e.some((function(e){return t.TerminalCode===e}))})).forEach((e=>{e.ListOfAttributeData.forEach((i=>{let a=t.findIndex((t=>t.TerminalCode===e.TerminalCode&&t.AttributeCode===i.AttributeCode));a>=0&&(t[a].AttributeValue=i.AttributeValue,s.ScheduledDate=i.AttributeValue)}))})),t.forEach((e=>{e.compSequenceNo=s.SeqNumber,s.AttributesforUI.push(e)}))}else i.forEach((e=>{e.compSequenceNo=s.SeqNumber,s.AttributesforUI.push(e)}))}else s.AttributesforUI=[],o.forEach((e=>{e.compSequenceNo=s.SeqNumber,s.AttributesforUI.push(e)}));this.toggleExpand(s,!0,!0),void 0!==s.AttributesforUI&&null!=s.AttributesforUI&&(s.AttributesforUI=a.vt(s.AttributesforUI)),s.AttributesforUI=a.Q3(s.AttributesforUI)})),console.log("formCompartmentAttributes() before save state modOrderItems: ".concat(JSON.stringify(s))),this.setState({modOrderItems:s})}catch(t){console.log("OrderDetailsComposite:Error in forming Compartment Attributes",t)}}fillAttributeDetails(e,t){try{return t=a.SC(t),e.Attributes=a.Gh(t),e.OrderItems.forEach((t=>{void 0!==t.AttributesforUI&&null!=t.AttributesforUI&&(t.AttributesforUI=a.mr(t.AttributesforUI));let s=[];if(this.props.userDetails.EntityResult.IsEnterpriseNode)s=S().cloneDeep(e.TerminalCodes);else{var i=S().cloneDeep(this.state.compartmentAttributeMetaDataList);i.length>0&&(s=[i[0].TerminalCode])}let o=[];t.Attributes=[],s.forEach((e=>{null!==t.AttributesforUI&&void 0!==t.AttributesforUI&&(o=t.AttributesforUI.filter((function(t){return t.TerminalCode===e})));let s={ListOfAttributeData:[]};s.TerminalCode=e,o.forEach((e=>{""===e.AttributeValue&&!0!==e.IsMandatory||s.ListOfAttributeData.push({AttributeCode:e.AttributeCode,AttributeValue:e.AttributeValue})})),null!==s.ListOfAttributeData&&void 0!==s.ListOfAttributeData&&s.ListOfAttributeData.length>0&&t.Attributes.push(s)}))})),e}catch(s){console.log("OrderDetailsComposite:Error occured on fillAttributeDetails",s)}}localNodeAttribute(){try{var e=S().cloneDeep(this.state.attributeMetaDataList);if(Array.isArray(e)&&e.length>0)this.terminalSelectionChange([e[0].TerminalCode]);else{var t=S().cloneDeep(this.state.compartmentAttributeMetaDataList);Array.isArray(t)&&t.length>0&&this.formCompartmentAttributes([t[0].TerminalCode])}}catch(s){console.log("OrderDetailsComposite:Error occured on localNodeAttribute",s)}}fillDetails(){try{let e=S().cloneDeep(this.state.modOrder);return e.ShareholderCode=this.props.selectedShareholder,""===this.state.order.OrderCode&&(e.OrderDate=new Date),e.OrderItems=S().cloneDeep(this.state.modOrderItems),null!==e.OrderItems&&e.OrderItems.length>0&&e.OrderItems.forEach((t=>{t.OrderCode=e.OrderCode,t.ShareholderCode=e.ShareholderCode,null!==t.Quantity&&""!==t.Quantity&&(t.Quantity=t.Quantity.toLocaleString()),delete t.SeqNumber,void 0!==t.AttributesforUI&&null!=t.AttributesforUI&&(t.AttributesforUI.forEach((e=>{if("ScheduledDate"===e.AttributeCode){const s=new Date(t.ScheduledDate).toISOString().split("T")[0];console.log("datePart: ".concat(s)),e.AttributeValue=s}})),t.AttributesforUI=a.BZ(t.AttributesforUI))})),e}catch(e){console.log("OrderDetailsComposite:Error occured on filldetails",e)}}convertStringtoDecimal(e,t){try{return e.OrderItems.forEach((e=>{e.Quantity=a.bo(e.Quantity)})),e=this.fillAttributeDetails(e,t)}catch(s){console.log("convertStringtoDecimal error order details",s)}}validateSave(e,t){const s={...this.state.validationErrors};Object.keys(w.f8).forEach((function(t){void 0!==e[t]&&(s[t]=a.jr(w.f8[t],e[t]))})),e.Active!==this.state.order.Active&&""===e.Remarks&&(s.Remarks="ShipmentOrder_RemarksRequired");let i={messageType:"critical",message:"OrderInfo_SavedStatus",messageResultDetails:[]};var o=S().cloneDeep(this.state.attributeValidationErrors);t.forEach((e=>{o.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=a.I5(e,e.DefaultValue)}))}))})),this.setState({validationErrors:s,attributeValidationErrors:o});let r=!0;return o.forEach((e=>{if(!r)return r;r=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),r?(r=Object.values(s).every((function(e){return""===e})),e.OrderItems.length>0?e.OrderItems.forEach((e=>{I.I2.forEach((t=>{let s="";void 0!==t.validator&&(s=a.jr(t.validator,e[t.field])),""!==s&&i.messageResultDetails.push({keyFields:[t.displayName],keyValues:[e[t.field]],isSuccess:!1,errorMessage:s})})),null!==e.AttributesforUI&&void 0!==e.AttributesforUI&&e.AttributesforUI.forEach((e=>{let t=a.I5(e,e.AttributeValue);""!==t&&(this.props.userDetails.EntityResult.IsEnterpriseNode?i.messageResultDetails.push({keyFields:["CompAttributeTerminal",e.AttributeName],keyValues:[e.TerminalCode,e.AttributeValue],isSuccess:!1,errorMessage:t}):i.messageResultDetails.push({keyFields:[e.AttributeName],keyValues:[e.AttributeValue],isSuccess:!1,errorMessage:t}))})),this.toggleExpand(e,!0,!0)})):i.messageResultDetails.push({keyFields:["ShipmentOrder_OrderCode"],keyValues:[e.OrderCode],isSuccess:!1,errorMessage:"ShipmentOrder_MandatoryOrderPlan"}),this.setState({validationErrors:s}),r=Object.values(s).every((function(e){return""===e})),i.messageResultDetails.length>0?(this.props.onSaved(this.state.modOrder,"update",i),!1):r):r}createOrder(e){this.handleAuthenticationClose();let t=[{key:o.SP,value:e.OrderCode}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:o.SP,KeyCodes:t,Entity:e},i={messageType:"critical",message:"OrderInfo_SavedStatus",messageResultDetails:[{keyFields:["ShipmentOrder_OrderCode"],keyValues:[e.OrderCode],isSuccess:!1,errorMessage:""}]};d()(l.Lm3,a.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;i.messageType=t.IsSuccess?"success":"critical",i.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?(this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,C.i.modify,C.dB)}),this.getOrder(!1)):(i.messageResultDetails[0].errorMessage=t.ErrorList[0],this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,C.i.add,C.dB)}),console.log("Error in CreateOrder:",t.ErrorList)),this.props.onSaved(this.state.modOrder,"add",i)})).catch((e=>{this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,C.i.add,C.dB)}),i.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modOrder,"add",i)}))}updateOrder(e){this.handleAuthenticationClose();let t=[{key:o.SP,value:e.OrderCode}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:o.SP,KeyCodes:t,Entity:e},i={messageType:"critical",message:"OrderInfo_SavedStatus",messageResultDetails:[{keyFields:["ShipmentOrder_OrderCode"],keyValues:[e.OrderCode],isSuccess:!1,errorMessage:""}]};d()(l.ict,a.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;i.messageType=t.IsSuccess?"success":"critical",i.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?(this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,C.i.modify,C.dB)}),this.getOrder(!1)):(this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,C.i.modify,C.dB)}),i.messageResultDetails[0].errorMessage=t.ErrorList[0],console.log("Error in UpdateOrder:",t.ErrorList)),this.props.onSaved(this.state.modOrder,"update",i)})).catch((e=>{i.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modOrder,"modify",i),this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,C.i.modify,C.dB)})}))}getKPIList(e,t){if(!0===a.ab(this.props.userDetails.EntityResult.FunctionsList,C.i.view,C.bL)){let s={PageName:V.Uw,TransportationType:r.LY.ROAD,InputParameters:[{key:"ShareholderCode",value:e},{key:"OrderCode",value:t}]};d()(l.dxq,a.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({orderKPIList:t.EntityResult.ListKPIDetails}):(this.setState({orderKPIList:[]}),console.log("Error in order KPIList:",t.ErrorList))})).catch((e=>{console.log("Error while getting Order KPIList:",e)}))}}handleOperation(){return this.state.showAuthenticationLayout?this.addUpdateOrder:this.state.showForceCloseAuthenticationLayout?this.forceCloseOperation:void 0}getFunctionGroupName(){return this.state.showForceCloseAuthenticationLayout?C.Iu:this.state.showAuthenticationLayout?C.dB:void 0}handlePrintSchedule(e,t,s,i){console.log("handlePrintSchedule() called... orderCode: ".concat(e," shCode: ").concat(t));var r=[{key:o.FR,value:t},{key:o.jz,value:"PRINT_ORDER_SCHEDULE"}],n={ShareholderCode:t,OrderCode:e};console.log("handlePrintSchedule() input: ".concat(JSON.stringify(n)));var h={ShareHolderCode:t,keyDataCode:o.yz,KeyCodes:r,Input:n};d()(l.moS,a.tW(h,s)).then((e=>{var t=e.data;console.log("handlePrintSchedule() result: ".concat(JSON.stringify(t))),i(t)})).catch((e=>{console.log("Error while handlePrintSchedule:",e)}))}render(){let e={terminalCodes:this.state.terminalOptions,unitOfVolume:this.state.volumeUOMOptions,unitOfWeight:this.state.weightUOMOptions,finishedProductOptions:this.state.finishedProductOptions,customerOptions:this.state.customerOptions};const t=[{fieldName:"ShipmentOrder_LastUpdated",fieldValue:new Date(this.state.modOrder.LastUpdatedTime).toLocaleDateString()+" "+new Date(this.state.modOrder.LastUpdatedTime).toLocaleTimeString()},{fieldName:"ShipmentOrder_LastActiveTime",fieldValue:void 0!==this.state.modOrder.LastActiveTime&&null!==this.state.modOrder.LastActiveTime?new Date(this.state.modOrder.LastActiveTime).toLocaleDateString()+" "+new Date(this.state.modOrder.LastActiveTime).toLocaleTimeString():""},{fieldName:"ShipmentOrder_CreatedTime",fieldValue:new Date(this.state.modOrder.CreatedTime).toLocaleDateString()+" "+new Date(this.state.modOrder.CreatedTime).toLocaleTimeString()}];return this.state.isReadyToRender?(0,L.jsxs)("div",{children:[this.state.isShowTruckShipment?null:(0,L.jsx)(c.A,{children:(0,L.jsx)(u.A,{entityCode:this.state.order.OrderCode,newEntityName:"ShipmentOrder_NewOrder",popUpContents:this.state.isShowTruckShipment?"":t})}),this.state.isShowTruckShipment?(0,L.jsx)(c.A,{children:(0,L.jsx)(k.default,{shipmentSource:r.U6.Order,shipmentSourceCode:this.state.modOrder.OrderCode,selectedShareholder:this.props.selectedShareholder,shipmentSourceCompartmentItems:this.state.modOrderItems,shipmentSourceDetails:this.state.modOrder,isShowBackButton:this.handleShowBackButton})}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(x.A,{KPIList:this.state.orderKPIList,children:" "}),(0,L.jsx)(c.A,{children:(0,L.jsx)(v,{order:this.state.order,modOrder:this.state.modOrder,modOrderItems:this.state.modOrderItems,validationErrors:this.state.validationErrors,listOptions:e,onFieldChange:this.handleChange,onDateTextChange:this.handleDateTextChange,onAllTerminalsChange:this.handleAllTerminalsChange,handleAddPlan:this.handleAddPlan,handleDeletePlan:this.handleDeletePlan,selectedPlanRow:this.state.selectedPlanRow,handleRowSelectionChange:this.handleRowSelectionChange,handleCellDataEdit:this.handleCellDataEdit,selectedShareholder:this.props.selectedShareholder,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,attributeValidationErrors:this.state.attributeValidationErrors,onAttributeDataChange:this.handleAttributeDataChange,handleCompAttributeCellDataEdit:this.handleCompAttributeCellDataEdit,modAttributeMetaDataList:this.state.modAttributeMetaDataList,toggleExpand:this.toggleExpand,expandedRows:this.state.expandedRows,compartmentDetailsPageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,handleForceClose:this.handleForceClose,handleViewShipments:this.handleViewShipments,enableForceClose:this.state.enableForceClose,printScheduleClick:this.printScheduleClick})})]}),this.state.isShowTruckShipment?this.state.isShowBackButton?(0,L.jsx)("div",{className:"row",children:(0,L.jsx)("div",{className:"col col-lg-8",style:{marginTop:"1%"},children:(0,L.jsx)(y.TranslationConsumer,{children:e=>(0,L.jsx)(R.Button,{className:"backButton",onClick:this.handleBack,content:e("Back")})})})}):null:(0,L.jsx)(c.A,{children:(0,L.jsx)(D.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.showAuthenticationLayout||this.state.showForceCloseAuthenticationLayout?(0,L.jsx)(j.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.order.OrderCode?C.i.add:C.i.modify,functionGroup:this.getFunctionGroupName(),handleOperation:this.handleOperation(),handleClose:this.handleAuthenticationClose}):null]}):(0,L.jsx)(g.A,{message:"Loading"})}}const _=(0,n.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(B)},79668:(e,t,s)=>{s.r(t),s.d(t,{default:()=>T});var i=s(65043),a=s(80312),o=s(7523),r=s(72067),l=s(40854),n=s.n(l),h=s(14159),d=s(11981),c=s(66554),u=s(69062),p=s(65187),m=s(97508),S=(s(92342),s(19380)),C=s(70579);function g(e){let{tableData:t,columnDetails:s,pageSize:i,exportRequired:a,exportFileName:o,columnPickerRequired:r,columnGroupingRequired:l,selectionRequired:n,terminalsToShow:h,onSelectionChange:d,onRowClick:c,parentComponent:u}=e;return(0,C.jsx)(S.A,{data:t,columns:s,rowsPerPage:i,exportRequired:a,exportFileName:o,columnPickerRequired:r,columnGroupingRequired:l,selectionRequired:n,onSelectionHandle:d,onRowClick:c,parentComponent:u,terminalsToShow:h})}g.defaultProps={pageSize:10,terminalsToShow:2,tableData:[],columnDetails:[]};var D=s(38795),y=s(15441),R=s(40252),E=s(80297),A=s(39424),b=s(93779),f=s(6934),L=s(31295),v=s(80242),w=s(62900);class I extends i.Component{constructor(){super(...arguments),this.state={isDetails:!1,isReadyToRender:!1,toDate:"",fromDate:"",isDetailsModified:!1,operationsVisibilty:{add:!1,delete:!1,shareholder:!0},selectedRow:{},selectedItems:[],data:{},dateError:"",contractKPIList:[],isLoadShipment:!1,shipmentType:"",terminalCodes:[],isLoadRailDispatch:!1,selectedContractCode:[],isShowRightPane:!1,isSBCEnable:!1,isSBPEnable:!1,isRailDispatchEnable:!1,showDeleteAuthenticationLayout:!1},this.componentName="ContractComponent",this.componentWillUnmount=()=>{this.clearStorage(),window.removeEventListener("beforeunload",this.clearStorage)},this.clearStorage=()=>{sessionStorage.removeItem(this.componentName+"GridState")},this.handleDelete=()=>{this.handleAuthenticationClose();try{var{operationsVisibilty:e}={...this.state};e.delete=!1,this.setState({operationsVisibilty:e});for(var t=[],s=0;s<this.state.selectedItems.length;s++){var i=this.state.selectedShareholder,a=this.state.selectedItems[s].Common_Code,o={keyDataCode:0,ShareHolderCode:i,KeyCodes:[{Key:b.GT,Value:a}]};t.push(o)}n()(r.oVu,u.tW(t,this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data,i=s.isSuccess;null!==s.ResultDataList&&void 0!==s.ResultDataList&&(i=s.ResultDataList.filter((function(e){return!e.IsSuccess})).length!==s.ResultDataList.length);var a=u.Cy(s,"ContractList_ContractDelSuccess",["ContractCode"]);i?(this.setState({isReadyToRender:!1}),this.getContractList(this.state.selectedShareholder,this.state.fromDate.toISOString(),this.state.toDate.toISOString()),this.getKPIList(this.state.selectedShareholder),e.delete=!1,this.setState({selectedItems:[],operationsVisibilty:e,selectedRow:{}})):(e.delete=!0,this.setState({operationsVisibilty:e})),a.messageResultDetails.forEach((e=>{e.keyFields.length>0&&(e.keyFields[0]="ContractInfo_ContractCode")})),(0,h.toast)((0,C.jsx)(p.A,{children:(0,C.jsx)(d.A,{notificationMessage:a})}),{autoClose:"success"===a.messageType&&1e4})})).catch((e=>{console.log("Error occured while deleting:"+e);var{operationsVisibilty:t}={...this.state};t.delete=!0,this.setState({operationsVisibilty:t})}))}catch(l){console.log("ContractComposite:Error occured on handleDelete",l)}},this.handleShareholderSelectionChange=e=>{try{this.setState({selectedShareholder:e,isReadyToRender:!1,selectedItems:[]}),this.getContractList(e,this.state.fromDate.toISOString(),this.state.toDate.toISOString()),this.getKPIList(e),this.getTerminalsList(e)}catch(t){console.log("ContractComposite:Error occured on handleShareholderSelectionChange",t)}},this.handleAdd=()=>{try{let e={...this.state.operationsVisibilty};e.delete=!1,e.add=!1,e.shareholder=!1,this.setState({isDetails:!0,selectedRow:{},operationsVisibilty:e,isLoadShipment:!1,isLoadRailDispatch:!1})}catch(e){console.log("ContractComposite:Error occured on handleAdd",e)}},this.handleRowClick=e=>{try{let t={...this.state.operationsVisibilty};t.add=u.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.add,a.TI),t.delete=u.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.remove,a.TI),t.shareholder=!1,this.setState({isDetails:!0,selectedRow:e,selectedItems:[e],operationsVisibilty:t,isLoadShipment:!1,isLoadRailDispatch:!1})}catch(t){console.log("ContractComposite:Error occured on Row click",t)}},this.savedEvent=(e,t,s)=>{try{let i={...this.state.operationsVisibilty};if("success"===s.messageType&&(i.add=u.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.add,a.TI),i.delete=u.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.remove,a.TI),this.setState({isDetailsModified:!0,operationsVisibilty:i})),"success"===s.messageType&&"add"===t){let t=[{Common_Code:e.ContractCode}];this.setState({selectedItems:t})}(0,h.toast)((0,C.jsx)(p.A,{children:(0,C.jsx)(d.A,{notificationMessage:s})}),{autoClose:"success"===s.messageType&&1e4})}catch(i){console.log("ContractComposite:Error occured on savedEvent",i)}},this.handleBack=()=>{try{let e={...this.state.operationsVisibilty};e.add=u.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.add,a.TI),e.delete=!1,e.shareholder=!0,this.setState({isDetails:!1,selectedRow:{},selectedItems:[],operationsVisibilty:e,isLoadShipment:!1,isLoadRailDispatch:!1,isReadyToRender:!1}),this.getContractList(this.state.selectedShareholder,this.state.fromDate.toISOString(),this.state.toDate.toISOString()),this.getKPIList(this.state.selectedShareholder)}catch(e){console.log("ContractComposite:Error occured on Back click",e)}},this.handleRangeSelect=e=>{let{to:t,from:s}=e;void 0!==t&&this.setState({toDate:t}),void 0!==s&&this.setState({fromDate:s})},this.handleDateTextChange=(e,t)=>{""===e&&this.setState({dateError:"",toDate:"",fromDate:""}),null!==t&&""!==t?this.setState({dateError:"Common_InvalidDate",toDate:"",fromDate:""}):this.setState({dateError:"",toDate:e.to,fromDate:e.from})},this.handleSelection=e=>{try{let t={...this.state.operationsVisibilty},s=e.findIndex((e=>o.fh[e.ShipmentGridContract_Status]===o.fh.CREATED))>=0;t.delete=e.length>0&&s&&u.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.remove,a.TI);let i=!0;i=Object.values(e).every((function(e){return"CLOSED"!==e.ShipmentGridContract_Status.toUpperCase()&&"EXPIRED"!==e.ShipmentGridContract_Status.toUpperCase()})),i?this.setState({isShowRightPane:!0}):this.setState({isShowRightPane:!1}),this.setState({selectedItems:e,operationsVisibilty:t})}catch(t){console.log("ContractComposite:Error occured on handleSelection",t)}},this.handleLoadContracts=()=>{let e=u.wb(this.state.toDate,this.state.fromDate);""!==e?this.setState({dateError:e}):(this.setState({dateError:""}),this.getContractList(this.state.selectedShareholder,this.state.fromDate.toISOString(),this.state.toDate.toISOString()))},this.handleDispatchPageClick=()=>{let e=[];var{operationsVisibilty:t}={...this.state};t.delete=!1;for(var s=0;s<this.state.selectedItems.length;s++){var i=this.state.selectedItems[s].Common_Code;e.push(i)}this.setState({isLoadRailDispatch:!0,selectedContractCode:e,operationsVisibilty:t})},this.handleShipmentByProductPageClick=()=>{let e=[];var{operationsVisibilty:t}={...this.state};t.delete=!1;for(var s=0;s<this.state.selectedItems.length;s++){var i=this.state.selectedItems[s].Common_Code;e.push(i)}this.setState({isLoadShipment:!0,shipmentType:"ShipmentByProduct",selectedContractCode:e,operationsVisibilty:t})},this.handleShipmentByCompartmentPageClick=()=>{let e=[];var{operationsVisibilty:t}={...this.state};t.delete=!1;for(var s=0;s<this.state.selectedItems.length;s++){var i=this.state.selectedItems[s].Common_Code;e.push(i)}this.setState({isLoadShipment:!0,shipmentType:"ShipmentByCompartment",selectedContractCode:e,operationsVisibilty:t})},this.handleOperationVisibility=e=>{let t={...this.state.operationsVisibilty};!0===e?(t.add=u.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.add,a.TI),t.delete=u.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.remove,a.TI),t.shareholder=!1):(t.add=e,t.delete=e,t.shareholder=e),this.setState({operationsVisibilty:t})},this.authenticateDelete=()=>{try{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showDeleteAuthenticationLayout:e}),!1===e&&this.handleDelete()}catch(e){console.log("Order Composite : Error in authenticateDelete")}},this.handleAuthenticationClose=()=>{this.setState({showDeleteAuthenticationLayout:!1})}}componentDidMount(){try{u.pJ(this.props.userDetails.EntityResult.IsArchived);const e={...this.state.operationsVisibilty};e.add=u.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.add,a.TI);let t=new Date;t.setHours(23,59,59);let s=new Date;s.setHours(0,0,0),this.setState({fromDate:s,toDate:t}),t=t.toISOString(),s=s.toISOString(),this.setState({operationsVisibilty:e,selectedShareholder:this.props.userDetails.EntityResult.PrimaryShareholder}),this.getContractList(this.props.userDetails.EntityResult.PrimaryShareholder,s,t),this.getKPIList(this.props.userDetails.EntityResult.PrimaryShareholder),this.getTerminalsList(this.props.userDetails.EntityResult.PrimaryShareholder),this.getlookupValues()}catch(e){console.log("ContractComposite:Error occured on ComponentDidMount",e)}window.addEventListener("beforeunload",this.clearStorage)}getTransportationType(){let e=o.LY.ROAD;return void 0!==this.props.activeItem&&void 0!==this.props.activeItem.itemProps&&void 0!==this.props.activeItem.itemProps.transportationType&&(e=this.props.activeItem.itemProps.transportationType),e}getContractList(e,t,s){this.setState({isReadyToRender:!1});let i=this.getTransportationType(),a=new Date(t),o=new Date(s);a.setHours(0,0,0),o.setHours(23,59,59);let l={ShareholderCode:e,TransportationType:i,startRange:a,endRange:o};n()(r.Q1P,u.tW(l,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;!0===t.IsSuccess?this.setState({data:t.EntityResult,isReadyToRender:!0}):(this.setState({data:{},isReadyToRender:!0}),console.log("Error in ContractListForRole:",t.ErrorList))})).catch((e=>{this.setState({data:{},isReadyToRender:!0}),console.log("Error while getting Contract List:",e)}))}getKPIList(e){if(!0===u.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.view,a.bL)){var t={message:"",messageType:"critical",messageResultDetails:[]};let s={PageName:A.dD,TransportationType:this.props.activeItem.itemProps.transportationType,InputParameters:[{key:"ShareholderCode",value:e}]};n()(r.dxq,u.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var s=e.data;!0===s.IsSuccess?this.setState({contractKPIList:s.EntityResult.ListKPIDetails}):(this.setState({contractKPIList:[]}),console.log("Error in contract KPIList:",s.ErrorList),t.messageResultDetails.push({keyFields:[],keyValues:[],isSuccess:!1,errorMessage:s.ErrorList[0]})),t.messageResultDetails.length>0&&(0,h.toast)((0,C.jsx)(p.A,{children:(0,C.jsx)(d.A,{notificationMessage:t})}),{autoClose:"success"===t.messageType&&1e4})})).catch((e=>{console.log("Error while getting Contract KPIList:",e)}))}}getTerminalsList(e){try{null!==e&&""!==e?n()(r.Oqv,u.tW([e],this.props.tokenDetails.tokenInfo)).then((e=>{e.data.IsSuccess&&this.setState({terminalCodes:e.data.EntityResult})})):this.setState({terminalCodes:[]})}catch(t){console.log("DestinationComposite:Error occured on getTerminalsList",t)}}getlookupValues(){try{let e=u.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.add,a.de),t=u.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.add,a.yu),s=u.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.add,a.xz);n()(r.xAA+"?LookUpTypeCode=Contract",u.Jm(this.props.tokenDetails.tokenInfo)).then((i=>{var a=i.data;if(!0===a.IsSuccess){"0"!==a.EntityResult.EnableContract&&(e&&this.setState({isSBCEnable:!0}),t&&this.setState({isSBPEnable:!0}),s&&this.setState({isRailDispatchEnable:!0}))}}))}catch(e){console.log("ContractComposite:Error occured on getLookUpData",e)}}getFunctionGroupName(){if(this.state.showDeleteAuthenticationLayout)return a.TI}getDeleteorEditMode(){return this.state.showDeleteAuthenticationLayout?a.i.remove:a.i.modify}handleOperation(){if(this.state.showDeleteAuthenticationLayout)return this.handleDelete}render(){let e=this.state.selectedItems.length>0&&this.state.isShowRightPane;return(0,C.jsxs)("div",{children:[void 0===this.props.shipmentSource||""===this.props.shipmentSource||null===this.props.shipmentSource?(0,C.jsx)(p.A,{children:(0,C.jsx)(c.$,{operationsVisibilty:this.state.operationsVisibilty,breadcrumbItem:this.props.activeItem,shareholders:this.props.userDetails.EntityResult.ShareholderList,selectedShareholder:this.state.selectedShareholder,onShareholderChange:this.handleShareholderSelectionChange,onDelete:this.authenticateDelete,onAdd:this.handleAdd,handleBreadCrumbClick:this.props.handleBreadCrumbClick})}):"",this.state.isDetails?(0,C.jsx)(p.A,{children:(0,C.jsx)(D.default,{selectedRow:this.state.selectedRow,onBack:this.handleBack,onSaved:this.savedEvent,transportationType:this.getTransportationType(),selectedShareholder:this.state.selectedShareholder,handleOperationVisibility:this.handleOperationVisibility},"ContractDetails")}):this.state.isLoadShipment&&this.state.shipmentType?(0,C.jsx)(p.A,{children:(0,C.jsx)(L.default,{shipmentSource:o.U6.Contract,selectedSourceCode:this.state.selectedContractCode,shipmentType:this.state.shipmentType,shipmentSourceFromSummary:!0,selectedShareholder:this.state.selectedShareholder,activeItem:this.props.activeItem})}):this.state.isLoadRailDispatch?(0,C.jsx)(v.default,{selectedShareholder:this.state.selectedShareholder,shipmentSource:o.U6.Contract,selectedSourceCode:this.state.selectedContractCode,shipmentType:this.state.shipmentType,shipmentSourceFromSummary:!0,userDetails:this.props.userDetails,activeItem:this.props.activeItem}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(p.A,{children:(0,C.jsx)("div",{className:"kpiSummaryContainer",children:(0,C.jsx)(E.A,{kpiList:this.state.contractKPIList,pageName:"Contract"})})}),this.state.isReadyToRender?(0,C.jsxs)("div",{className:e?"showShipmentStatusRightPane":"",children:[(0,C.jsx)(p.A,{children:(0,C.jsx)(y.L,{dateRange:{from:this.state.fromDate,to:this.state.toDate},dateError:this.state.dateError,handleDateTextChange:this.handleDateTextChange,handleRangeSelect:this.handleRangeSelect,handleLoadOrders:this.handleLoadContracts,filterText:"LoadContracts"})}),(0,C.jsx)(p.A,{children:(0,C.jsx)("div",{className:"compositeTransactionList",children:(0,C.jsx)(g,{tableData:this.state.data.Table,columnDetails:this.state.data.Column,pageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,exportRequired:!0,exportFileName:"ContractList",columnPickerRequired:!0,terminalsToShow:this.props.userDetails.EntityResult.PageAttibutes.NoOfTerminalsToShow,selectionRequired:!0,columnGroupingRequired:!0,onSelectionChange:this.handleSelection,onRowClick:this.handleRowClick,parentComponent:this.componentName})})})]}):(0,C.jsx)(R.A,{message:"Loading"}),e?(0,C.jsx)("div",{children:(0,C.jsx)(f.A,{transportationType:this.props.activeItem.itemProps.transportationType,handleShipmentByCompartmentPageClick:this.handleShipmentByCompartmentPageClick,handleShipmentByProductPageClick:this.handleShipmentByProductPageClick,handleDispatchPageClick:this.handleDispatchPageClick,isSBCEnable:this.state.isSBCEnable,isSBPEnable:this.state.isSBPEnable,isRailDispatchEnable:this.state.isRailDispatchEnable})}):""]}),(0,C.jsx)(p.A,{children:(0,C.jsx)(h.ToastContainer,{hideProgressBar:!0,closeOnClick:!1,closeButton:!0,newestOnTop:!0,position:"bottom-right",toastClassName:"toast-notification-wrap"})}),this.state.showDeleteAuthenticationLayout?(0,C.jsx)(w.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:this.getDeleteorEditMode(),functionGroup:this.getFunctionGroupName(),handleClose:this.handleAuthenticationClose,handleOperation:this.handleOperation()}):null]})}}const T=(0,m.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(I)},57405:(e,t,s)=>{s.r(t),s.d(t,{default:()=>I});var i=s(65043),a=s(80312),o=s(72067),r=s(40854),l=s.n(r),n=s(14159),h=s(11981),d=s(66554),c=s(69062),u=s(65187),p=s(97508),m=s(93779),S=(s(92342),s(19380)),C=s(70579);function g(e){let{tableData:t,columnDetails:s,pageSize:i,exportRequired:a,exportFileName:o,columnPickerRequired:r,columnGroupingRequired:l,selectionRequired:n,terminalsToShow:h,onSelectionChange:d,onRowClick:c,parentComponent:u}=e;return(0,C.jsx)(S.A,{data:t,columns:s,rowsPerPage:i,exportRequired:a,exportFileName:o,columnPickerRequired:r,columnGroupingRequired:l,selectionRequired:n,onSelectionHandle:d,onRowClick:c,parentComponent:u,terminalsToShow:h})}g.defaultProps={pageSize:10,terminalsToShow:2,tableData:[],columnDetails:[]};var D=s(88863),y=s(15441),R=s(40252),E=s(80297),A=s(39424),b=s(7523),f=s(31295),L=s(6934),v=s(62900);class w extends i.Component{constructor(){super(...arguments),this.state={isDetails:!1,isReadyToRender:!1,toDate:"",fromDate:"",isDetailsModified:!1,operationsVisibilty:{add:!1,delete:!1,shareholder:!0},selectedRow:{},selectedItems:[],data:{},dateError:"",orderKPIList:[],None:[],isLoadShipment:!1,shipmentType:"",selectedCodes:[],isSBCEnable:!1,isSBPEnable:!1,showDeleteAuthenticationLayout:!1},this.componentName="OrderComponent",this.componentWillUnmount=()=>{this.clearStorage(),window.removeEventListener("beforeunload",this.clearStorage)},this.clearStorage=()=>{sessionStorage.removeItem(this.componentName+"GridState")},this.handleDelete=()=>{this.handleAuthenticationClose();try{let t={...this.state.operationsVisibilty};t.delete=!1,this.setState({operationsVisibilty:t});let s=[];for(var e=0;e<this.state.selectedItems.length;e++){let t=this.state.selectedShareholder,i=this.state.selectedItems[e].Common_Code,a={keyDataCode:0,ShareHolderCode:t,KeyCodes:[{Key:m.SP,Value:i}]};s.push(a)}l()(o._JN,c.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{let s=e.data,i=s.isSuccess;null!==s.ResultDataList&&void 0!==s.ResultDataList&&(i=s.ResultDataList.filter((function(e){return!e.IsSuccess})).length!==s.ResultDataList.length);let a=c.Cy(s,"OrderInfo_DeletionStatus",["OrderCode"]);i?(this.setState({isReadyToRender:!1}),this.getOrderList(this.state.selectedShareholder,this.state.fromDate.toISOString(),this.state.toDate.toISOString()),t.delete=!1,this.setState({selectedItems:[],operationsVisibilty:t,selectedRow:{}})):(t.delete=!0,this.setState({operationsVisibilty:t})),a.messageResultDetails.forEach((e=>{e.keyFields.length>0&&(e.keyFields[0]="ShipmentOrdertList_OrderCode")})),(0,n.toast)((0,C.jsx)(u.A,{children:(0,C.jsx)(h.A,{notificationMessage:a})}),{autoClose:"success"===a.messageType&&1e4})})).catch((e=>{throw e}))}catch(t){console.log("OrderComposite:Error occured on handleDelet",t)}},this.handleShareholderSelectionChange=e=>{try{let{operationsVisibilty:t}={...this.state};t.delete=!1,this.setState({selectedShareholder:e,isReadyToRender:!1,selectedItems:[],operationsVisibilty:t}),this.getOrderList(e,this.state.fromDate.toISOString(),this.state.toDate.toISOString()),this.getKPIList(e)}catch(t){console.log("OrderComposite:Error occured on handleShareholderSelectionChange",t)}},this.handleAdd=()=>{try{let e={...this.state.operationsVisibilty};e.delete=!1,e.add=!1,e.shareholder=!1,this.setState({isDetails:!0,selectedRow:{},operationsVisibilty:e})}catch(e){console.log("OrderComposite:Error occured on handleAdd",e)}},this.handleRowClick=e=>{try{let t={...this.state.operationsVisibilty};t.add=c.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.add,a.dB),t.delete=c.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.remove,a.dB),t.shareholder=!1,this.setState({isDetails:!0,selectedRow:e,selectedItems:[e],operationsVisibilty:t})}catch(t){console.log("OrderComposite:Error occured on Row click",t)}},this.handleSelection=e=>{try{let t={...this.state.operationsVisibilty},s=!(e.findIndex((e=>b.p_[e.ShipmentGridOrder_Status]!==b.p_.NOT_SCHEDULED))>=0);t.delete=e.length>0&&s&&c.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.remove,a.dB),this.setState({selectedItems:e,operationsVisibilty:t})}catch(t){console.log("OrderComposite:Error occured on handleSelection",t)}},this.savedEvent=(e,t,s)=>{try{let i={...this.state.operationsVisibilty};if("success"===s.messageType&&(i.add=c.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.add,a.dB),i.delete=c.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.remove,a.dB),this.setState({isDetailsModified:!0,operationsVisibilty:i})),"success"===s.messageType&&"add"===t){let t=[{Common_Code:e.OrderCode,Common_Status:e.Active,Common_Shareholder:e.ShareholderCode}];this.setState({selectedItems:t})}(0,n.toast)((0,C.jsx)(u.A,{children:(0,C.jsx)(h.A,{notificationMessage:s})}),{autoClose:"success"===s.messageType&&1e4})}catch(i){console.log("OrderComposite:Error occured on savedEvent",i)}},this.handleOperationVisibility=e=>{let t={...this.state.operationsVisibilty};!0===e?(t.add=c.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.add,a.dB),t.delete=c.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.remove,a.dB),t.shareholder=!1):(t.add=e,t.delete=e,t.shareholder=e),this.setState({operationsVisibilty:t})},this.handleBack=()=>{try{let e={...this.state.operationsVisibilty};e.add=c.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.add,a.dB),e.delete=!1,e.shareholder=!0,this.setState({isDetails:!1,selectedRow:{},selectedItems:[],operationsVisibilty:e,isReadyToRender:!1}),this.getOrderList(this.state.selectedShareholder,this.state.fromDate.toISOString(),this.state.toDate.toISOString()),this.getKPIList(this.state.selectedShareholder)}catch(e){console.log("OrderComposite:Error occured on Back click",e)}},this.handleRangeSelect=e=>{let{to:t,from:s}=e;void 0!==t&&this.setState({toDate:t}),void 0!==s&&this.setState({fromDate:s})},this.handleDateTextChange=(e,t)=>{""===e&&this.setState({dateError:"",toDate:"",fromDate:""}),null!==t&&""!==t?this.setState({dateError:"Common_InvalidDate",toDate:"",fromDate:""}):this.setState({dateError:"",toDate:e.to,fromDate:e.from})},this.handleLoadOrders=()=>{let e=c.wb(this.state.toDate,this.state.fromDate);""!==e?this.setState({dateError:e}):(this.setState({dateError:""}),this.getOrderList(this.state.selectedShareholder,this.state.fromDate.toISOString(),this.state.toDate.toISOString()))},this.handleShipmentByProductPageClick=()=>{let e=[];for(var t=0;t<this.state.selectedItems.length;t++){var s=this.state.selectedItems[t].Common_Code;e.push(s)}this.setState({isLoadShipment:!0,shipmentType:"ShipmentByProduct",selectedCodes:e})},this.handleShipmentByCompartmentPageClick=()=>{let e=[];for(var t=0;t<this.state.selectedItems.length;t++){var s=this.state.selectedItems[t].Common_Code;e.push(s)}this.setState({isLoadShipment:!0,shipmentType:"ShipmentByCompartment",selectedCodes:e})},this.authenticateDelete=()=>{try{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showDeleteAuthenticationLayout:e}),!1===e&&this.handleDelete()}catch(e){console.log("Order Composite : Error in authenticateDelete")}},this.handleAuthenticationClose=()=>{this.setState({showDeleteAuthenticationLayout:!1})}}componentDidMount(){try{c.pJ(this.props.userDetails.EntityResult.IsArchived);const e={...this.state.operationsVisibilty};e.add=c.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.add,a.dB);let t=new Date;t.setHours(23,59,59);let s=new Date;s.setHours(0,0,0),this.setState({fromDate:s,toDate:t}),t=t.toISOString(),s=s.toISOString(),this.setState({operationsVisibilty:e,selectedShareholder:this.props.userDetails.EntityResult.PrimaryShareholder}),this.getOrderList(this.props.userDetails.EntityResult.PrimaryShareholder,s,t),this.getKPIList(this.props.userDetails.EntityResult.PrimaryShareholder),this.getlookupValues()}catch(e){console.log("OrderComposite:Error occured on ComponentDidMount",e)}window.addEventListener("beforeunload",this.clearStorage)}getKPIList(e){if(!0===c.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.view,a.bL)){var t={message:"",messageType:"critical",messageResultDetails:[]};let s={PageName:A.Vf,TransportationType:b.LY.ROAD,InputParameters:[{key:"ShareholderCode",value:e}]};l()(o.dxq,c.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var s=e.data;!0===s.IsSuccess?this.setState({orderKPIList:s.EntityResult.ListKPIDetails}):(this.setState({orderKPIList:[]}),console.log("Error in order KPIList:",s.ErrorList),t.messageResultDetails.push({keyFields:[],keyValues:[],isSuccess:!1,errorMessage:s.ErrorList[0]})),t.messageResultDetails.length>0&&(0,n.toast)((0,C.jsx)(u.A,{children:(0,C.jsx)(h.A,{notificationMessage:t})}),{autoClose:"success"===t.messageType&&1e4})})).catch((e=>{console.log("Error while getting Order KPIList:",e)}))}}getOrderList(e,t,s){this.setState({isReadyToRender:!1});let i=new Date(t),a=new Date(s);i.setHours(0,0,0),a.setHours(23,59,59);let r={ShareholderCode:e,startRange:i,endRange:a};l()(o.Azj,c.tW(r,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;!0===t.IsSuccess?this.setState({data:t.EntityResult,isReadyToRender:!0}):(this.setState({data:{},isReadyToRender:!0}),console.log("Error in OrderListForRole:",t.ErrorList))})).catch((e=>{this.setState({data:{},isReadyToRender:!0}),console.log("Error while getting Order List:",e)}))}getlookupValues(){try{let e=c.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.add,a.de),t=c.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.add,a.yu);l()(o.xAA+"?LookUpTypeCode=Order",c.Jm(this.props.tokenDetails.tokenInfo)).then((s=>{var i=s.data;if(!0===i.IsSuccess){"0"!==i.EntityResult.EnableOrder&&(e&&this.setState({isSBCEnable:!0}),t&&this.setState({isSBPEnable:!0}))}}))}catch(e){console.log("OrderComposite:Error occured on getLookUpData",e)}}getFunctionGroupName(){if(this.state.showDeleteAuthenticationLayout)return a.dB}getDeleteorEditMode(){return this.state.showDeleteAuthenticationLayout?a.i.remove:a.i.modify}handleOperation(){if(this.state.showDeleteAuthenticationLayout)return this.handleDelete}render(){let e=this.state.selectedItems.length>0;return(0,C.jsxs)("div",{children:[void 0===this.props.shipmentSource||""===this.props.shipmentSource||null===this.props.shipmentSource?(0,C.jsx)(u.A,{children:(0,C.jsx)(d.$,{operationsVisibilty:this.state.operationsVisibilty,breadcrumbItem:this.props.activeItem,shareholders:this.props.userDetails.EntityResult.ShareholderList,selectedShareholder:this.state.selectedShareholder,onShareholderChange:this.handleShareholderSelectionChange,onDelete:this.authenticateDelete,onAdd:this.handleAdd,handleBreadCrumbClick:this.props.handleBreadCrumbClick})}):"",this.state.isDetails?(0,C.jsx)(u.A,{children:(0,C.jsx)(D.default,{selectedRow:this.state.selectedRow,onBack:this.handleBack,onSaved:this.savedEvent,selectedShareholder:this.state.selectedShareholder,handleOperationVisibility:this.handleOperationVisibility},"OrderDetails")}):this.state.isLoadShipment&&this.state.shipmentType?(0,C.jsx)(u.A,{children:(0,C.jsx)(f.default,{shipmentSource:b.U6.Order,selectedSourceCode:this.state.selectedCodes,shipmentType:this.state.shipmentType,shipmentSourceFromSummary:!0,selectedShareholder:this.state.selectedShareholder})}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(u.A,{children:(0,C.jsx)("div",{className:"kpiSummaryContainer",children:(0,C.jsx)(E.A,{kpiList:this.state.orderKPIList,pageName:"Orders"})})}),this.state.isReadyToRender?(0,C.jsxs)("div",{className:e?"showShipmentStatusRightPane":"",children:[(0,C.jsx)(u.A,{children:(0,C.jsx)(y.L,{dateRange:{from:this.state.fromDate,to:this.state.toDate},dateError:this.state.dateError,handleDateTextChange:this.handleDateTextChange,handleRangeSelect:this.handleRangeSelect,handleLoadOrders:this.handleLoadOrders,filterText:"LoadOrders"})}),(0,C.jsx)(u.A,{children:(0,C.jsx)("div",{className:"compositeTransactionList",children:(0,C.jsx)(g,{tableData:this.state.data.Table,columnDetails:this.state.data.Column,pageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,exportRequired:!0,exportFileName:"OrderList",columnPickerRequired:!0,terminalsToShow:this.props.userDetails.EntityResult.PageAttibutes.NoOfTerminalsToShow,selectionRequired:!0,columnGroupingRequired:!0,onSelectionChange:this.handleSelection,onRowClick:this.handleRowClick,parentComponent:this.componentName})})})]}):(0,C.jsx)(R.A,{message:"Loading"}),e?(0,C.jsx)("div",{children:(0,C.jsx)(L.A,{transportationType:b.LY.ROAD,handleShipmentByCompartmentPageClick:this.handleShipmentByCompartmentPageClick,handleShipmentByProductPageClick:this.handleShipmentByProductPageClick,isSBCEnable:this.state.isSBCEnable,isSBPEnable:this.state.isSBPEnable})}):""]}),this.state.showDeleteAuthenticationLayout?(0,C.jsx)(v.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:this.getDeleteorEditMode(),functionGroup:this.getFunctionGroupName(),handleClose:this.handleAuthenticationClose,handleOperation:this.handleOperation()}):null,(0,C.jsx)(u.A,{children:(0,C.jsx)(n.ToastContainer,{hideProgressBar:!0,closeOnClick:!1,closeButton:!0,newestOnTop:!0,position:"bottom-right",toastClassName:"toast-notification-wrap"})})]})}}const I=(0,p.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(w)},80242:(e,t,s)=>{s.r(t),s.d(t,{default:()=>V});var i=s(65043),a=s(66554),o=s(19380),r=s(70579);function l(e){let{tableData:t,columnDetails:s,pageSize:i,exportRequired:a,exportFileName:l,columnPickerRequired:n,columnGroupingRequired:h,selectionRequired:d,terminalsToShow:c,selectedItems:u,onSelectionChange:p,onRowClick:m,parentComponent:S}=e;return(0,r.jsx)(o.A,{data:t,columns:s,rowsPerPage:i,exportRequired:a,exportFileName:l,columnPickerRequired:n,columnGroupingRequired:h,selectionRequired:d,selectedItems:u,onSelectionHandle:p,onRowClick:m,parentComponent:S,terminalsToShow:c})}l.defaultProps={pageSize:10,terminalsToShow:2,tableData:[],columnDetails:[],selectedItems:[]};var n=s(61114),h=s(40854),d=s.n(h),c=s(7523),u=s(72067),p=s(14159),m=(s(92342),s(97508)),S=(s(63973),s(11981)),C=s(69062),g=s(65187),D=s(93779),y=s(80312),R=s(40252),E=s(15441),A=s(53536),b=s.n(A),f=s(72711),L=s(73571),v=s(67907),w=s(61227),I=s(79668),T=s(39424),k=s(80297),O=s(62900);class x extends i.Component{constructor(){var e;super(...arguments),e=this,this.state={isDetails:!1,isReadyToRender:!1,isDetailsModified:!1,operationsVisibility:{add:!1,delete:!1,shareholder:!1},selectedRow:{},selectedItems:[],selectedShareholder:"",data:{},fromDate:new Date,toDate:new Date,dateError:"",terminalCodes:[],nextOperations:[],currentStatuses:[],currentAccess:{},lastStatus:"",modalData:{closeDispatch:{isOpen:!1,data:{reason:"",dispatchCode:"",dispatchStatus:""},validationErrors:{reason:""}}},subPageName:"",isDirectOpenSubPage:!1,isDisplayDetails:!1,isReadyToShowOperation:!1,isDisplayRightPane:!1,enableHSEInspection:!0,railLookUpData:{},showReport:!1,drawerStatus:!1,isGoBackToSource:!1,isContractDisable:!1,railDispatchKPIList:[],railDispatchDeleteStates:[],activityInfo:[],showDeleteAuthenticationLayout:!1,showAuthorizeToLoadAuthenticationLayout:!1,showCloseShipmentAuthenticationLayout:!1,showViewBOLAuthenticationLayout:!1,showPrintBOLAuthenticationLayout:!1,showFANAuthenticationLayout:!1},this.componentName="RailDispatchComponent",this.componentWillUnmount=()=>{this.clearStorage(),window.removeEventListener("beforeunload",this.clearStorage)},this.clearStorage=()=>{sessionStorage.removeItem(this.componentName+"GridState")},this.getLookUpData=(e,t)=>{d()(u.xAA+"?LookUpTypeCode="+e,C.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{const s=e.data;!0===s.IsSuccess?t(s.EntityResult):console.log("Error in getLookUpData: ",s.ErrorList)})).catch((e=>{console.log("RailDispatchComposite: Error occurred on getLookUpData",e)}))},this.handleAdd=()=>{try{const e=b().cloneDeep(this.state.operationsVisibility);e.delete=!1,e.add=!1,this.setState({isDetails:!0,selectedItems:[],selectedRow:{},operationsVisibility:e,isDirectOpenSubPage:!1,isReadyToShowOperation:!1,isDisplayRightPane:!1,drawerStatus:!1}),this.setRightPaneDisplay(!0),void 0!==this.props.shipmentSource&&this.props.isShowBackButton(!1)}catch(e){console.log("RailDispatchComposite: Error occurred on handleAdd")}},this.handleDelete=()=>{this.handleAuthenticationClose();try{const e=b().cloneDeep(this.state.operationsVisibility);e.delete=!1,this.setState({operationsVisibility:e});const t=[];for(let s of this.state.selectedItems)t.push({ShareHolderCode:this.state.selectedShareholder,KeyCodes:[{Key:D.s0,Value:s.Common_Code}]});d()(u.OaK,C.tW(t,this.props.tokenDetails.tokenInfo)).then((t=>{const s=t.data;let i=s.IsSuccess;if(void 0!==s.ResultDataList&&null!==s.ResultDataList){i=s.ResultDataList.filter((e=>!e.IsSuccess)).length!==s.ResultDataList.length}const a=C.Cy(s,"Shipment_DeletionStatus",["RailDispatchCode"]);null!==s.ErrorList&&void 0!==s.ErrorList&&s.ErrorList.length>0&&0===a.messageResultDetails.length&&(a.message="ERRMSG_EXCEPTION_IN_WEBAPI"===s.ErrorList[0]?"CannotDeleteRailTransaction":s.ErrorList[0],a.messageType=s.IsSuccess?"success":"critical"),i&&(this.setState({isReadyToRender:!1}),this.getRailDispatchList(this.state.selectedShareholder),this.getKPIList(),e.delete=!1,this.setState({selectedItems:[],operationsVisibility:e,selectedRow:{},isReadyToShowOperation:!1})),console.log(a),a.messageResultDetails.forEach((e=>{e.keyFields.length>0&&(e.keyFields[0]="RailDispatchPlanDetail_DispatchCode")})),this.handleNotify(a)})).catch((e=>{throw e}))}catch(e){console.log("RailDispatchComposite: Error occurred on handleDelete")}},this.handleRangeSelect=e=>{let{to:t,from:s}=e;void 0!==t&&this.setState({toDate:t}),void 0!==s&&this.setState({fromDate:s})},this.handleDateTextChange=(e,t)=>{""===e&&this.setState({dateError:"",toDate:"",fromDate:""}),null!==t&&""!==t?this.setState({dateError:"Common_InvalidDate",toDate:"",fromDate:""}):this.setState({dateError:"",toDate:e.to,fromDate:e.from})},this.handleLoadOrders=()=>{const e=C.wb(this.state.toDate,this.state.fromDate);""!==e?this.setState({dateError:e}):(this.setState({dateError:""}),this.getRailDispatchList(this.state.selectedShareholder))},this.handleBack=()=>{try{if(void 0!==this.props.shipmentSource&&this.props.shipmentSourceFromSummary){let e={...this.state.operationsVisibility};e.add=C.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.add,y.xz),e.shareholder=!0,this.setState({isDetails:!1,selectedRow:{},selectedItems:[],operationsVisibility:e,isReadyToShowOperation:!1,drawerStatus:!1,isGoBackToSource:!0,isReadyToRender:!1})}const e=b().cloneDeep(this.state.operationsVisibility);e.add=C.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.add,y.xz),e.delete=!1,this.setRightPaneDisplay(!1),this.setState({isDetails:!1,selectedRow:{},selectedItems:[],operationsVisibility:e,isReadyToShowOperation:!1,drawerStatus:!1,isReadyToRender:!1}),this.getRailDispatchList(this.state.selectedShareholder),this.getKPIList(),this.props.isShowBackButton(!0)}catch(e){console.log("RailDispatchComposite: Error occurred on Back click",e)}},this.handleSubPageBack=()=>{try{if(this.setRightPaneDisplay(!0),this.state.isDirectOpenSubPage){const e=b().cloneDeep(this.state.operationsVisibility);e.add=C.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.add,y.xz),this.setState({isDetails:!1,selectedRow:{},operationsVisibility:e,subPageName:"",isDirectOpenSubPage:!1,isReadyToRender:!1}),this.getRailDispatchList(this.state.selectedShareholder),void 0!==this.props.shipmentSource&&this.props.isShowBackButton(!0)}else this.setState({subPageName:""}),this.handleRowClick(this.state.selectedItems[0])}catch(e){console.log("RailDispatchComposite: Error occurred on Back click",e)}},this.handleRowClick=function(t){let s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var{operationsVisibility:a,activityInfo:o}={...e.state};a.add=C.ab(e.props.userDetails.EntityResult.FunctionsList,y.i.add,y.xz);let l=o.filter((e=>e.ActivityCode===c.Ch.RAILDISPATCH_ENABLE_DELETEPLAN&&e.ActionTypeCode===c.Gd.CHECK));var r=[];void 0!==l&&l.length>0&&(r=l[0].ShipmentStates),a.delete=!e.props.userDetails.EntityResult.IsWebPortalUser&&(r.indexOf(t.ViewRailDispatchDetails_ShipmentStatus.toUpperCase())>-1&&C.ab(e.props.userDetails.EntityResult.FunctionsList,y.i.remove,y.xz)),s&&e.getRailDispatchStatusOperation(t.Common_Code,t.ViewRailDispatchDetails_ShipmentStatus,t),e.setRightPaneDisplay(!0),e.setState({isDetails:!0,selectedRow:t,selectedItems:[t],operationsVisibility:a,isDisplayDetails:i,drawerStatus:!1}),void 0!==e.props.shipmentSource&&e.props.isShowBackButton(!1)}catch(l){console.log("RailDispatchComposite: Error occurred on handleRowClick",l)}},this.handleOperationClick=e=>{let t=this.state.operationsVisibility;switch(e){case"ViewRailDispatch_AuthorizeToLoad":this.authorizeToLoadClick();break;case"ViewRailDispatch_CloseDispatch":this.handleConfirmCloseDispatch(this.state.selectedItems[0].Common_Code,this.state.selectedItems[0].ViewRailDispatchDetails_ShipmentStatus);break;case"ViewRailDispatch_ManualEntry":this.setState({subPageName:"RailDispatchCompartmentManualEntryDetails"}),this.state.isDetails||(this.handleRowClick(this.state.selectedItems[0],!1),this.setState({isDirectOpenSubPage:!0})),t.delete=!1,t.add=!1;break;case"ViewRailDispatch_PrintBOL":this.printBOLClick();break;case"ViewRailDispatch_PrintFAN":this.printFANClick();break;case"ViewRailDispatch_RecordWeight":this.setState({subPageName:"RailDispatchRecordWeightDetails"}),this.state.isDetails||(this.handleRowClick(this.state.selectedItems[0],!1),this.setState({isDirectOpenSubPage:!0})),t.delete=!1,t.add=!1;break;case"ViewRailDispatch_ViewAuditTrail":this.setState({subPageName:"RailDispatchViewAuditTrailDetails"}),this.state.isDetails||(this.handleRowClick(this.state.selectedItems[0],!1),this.setState({isDirectOpenSubPage:!0})),t.delete=!1,t.add=!1;break;case"ViewRailDispatch_ViewBOL":this.viewBOLClick();break;case"ViewRailDispatch_ViewLoadingDetails":this.setState({subPageName:"RailDispatchViewLoadingDetailsDetails"}),this.state.isDetails||(this.handleRowClick(this.state.selectedItems[0],!1),this.setState({isDirectOpenSubPage:!0})),t.delete=!1,t.add=!1;break;case"ViewRailDispatch_RailWagonAssignment":this.setState({subPageName:"RailDispatchRailWagonAssignmentDetails"}),this.state.isDetails||(this.handleRowClick(this.state.selectedItems[0],!1),this.setState({isDirectOpenSubPage:!0})),t.delete=!1,t.add=!1;break;case"ViewRailDispatch_ProductAssignment":this.setState({subPageName:"RailDispatchProductAssignmentDetails"}),this.state.isDetails||(this.handleRowClick(this.state.selectedItems[0],!1),this.setState({isDirectOpenSubPage:!0})),t.delete=!1,t.add=!1;break;case"ViewRailDispatch_LoadSpotAssignment":this.setState({subPageName:"RailDispatchLoadSpotAssignmentDetails"}),this.state.isDetails||(this.handleRowClick(this.state.selectedItems[0],!1),this.setState({isDirectOpenSubPage:!0})),t.delete=!1,t.add=!1;break;case"ViewRailDispatch_BSIOutbound":this.handleBSIOutbound(this.state.selectedItems[0].Common_Code);break;default:return}this.setState({operationsVisibility:t})},this.handleSelection=e=>{try{const a=b().cloneDeep(this.state.operationsVisibility);var{drawerStatus:t,activityInfo:s}={...this.state};let o=s.filter((e=>e.ActivityCode===c.Ch.RAILDISPATCH_ENABLE_DELETEPLAN&&e.ActionTypeCode===c.Gd.CHECK));var i=[];void 0!==o&&o.length>0&&(i=o[0].ShipmentStates);let r=!(e.findIndex((e=>i.indexOf(e.ViewRailDispatchDetails_ShipmentStatus.toUpperCase())<0))>=0);a.delete=!this.props.userDetails.EntityResult.IsWebPortalUser&&(r&&e.length>0&&C.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.remove,y.xz)),t=1!==e.length,this.setState({selectedItems:e,operationsVisibility:a,drawerStatus:t}),1===e.length?(this.setRightPaneDisplay(!0),this.getRailDispatchStatusOperation(e[0].Common_Code,e[0].ViewRailDispatchDetails_ShipmentStatus,e[0])):(this.setRightPaneDisplay(!1),this.setState({isReadyToShowOperation:!1}))}catch(a){console.log("RailDispatchComposite: Error occurred on handleSelection",a)}},this.handleUpdateStatusOperation=e=>{const t={Common_Code:e.DispatchCode,ViewRailDispatchDetails_ShipmentStatus:e.DispatchStatus,RailRouteConfigurationDetails_RailRouteCode:e.RouteCode,ScheduledDate:e.ScheduledDate,ViewRailDispatchList_LoadedDate:e.LoadEndTime,AssociatedTerminals:e.TerminalCodes,AcutalTerminalCode:e.ActualTerminalCode};this.setState({selectedItems:[t],selectedRow:t},(()=>{this.getRailDispatchStatusOperation(e.DispatchCode,e.DispatchStatus,t)}))},this.savedEvent=(e,t,s)=>{try{var{operationsVisibility:i,activityInfo:a}={...this.state};let r=a.filter((e=>e.ActivityCode===c.Ch.RAILDISPATCH_ENABLE_DELETEPLAN&&e.ActionTypeCode===c.Gd.CHECK));var o=[];if(void 0!==r&&r.length>0&&(o=r[0].ShipmentStates),"success"===s.messageType&&(i.add=C.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.add,y.xz),i.delete=!this.props.userDetails.EntityResult.IsWebPortalUser&&(o.indexOf(e.DispatchStatus.toUpperCase())>-1&&C.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.remove,y.xz)),this.setState({isDetailsModified:!0,operationsVisibility:i})),"success"===s.messageType&&"add"===t){const t=[{RailDispatchCode:e.Code,Common_Shareholder:e.ShareholderCode}];this.setState({selectedItems:t})}this.handleNotify(s)}catch(r){console.log("RailDispatchComposite: Error occurred on savedEvent",r)}},this.handleShareholderSelectionChange=e=>{try{this.setState({selectedShareholder:e}),this.getRailDispatchList(e)}catch(t){console.log("RailDispatchComposite: Error occurred on handleShareholderSelectionChange",t)}},this.authorizeToLoadClick=()=>{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showAuthorizeToLoadAuthenticationLayout:e},(()=>{!1===e&&this.handleAuthorizeToLoad()}))},this.handleAuthorizeToLoad=()=>{this.handleAuthenticationClose();let e=this.state.selectedItems[0].Common_Code;const t={DispatchCode:e,DispatchStatus:this.state.selectedItems[0].ViewRailDispatchDetails_ShipmentStatus,TMWebApiRequest:{ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,KeyCodes:[{key:"RailDispatchCode",value:e}]}},s={messageType:"critical",message:"ViewRailDispatch_AuthorizeLoad_status",messageResultDetails:[{keyFields:["RailDispatchPlanDetail_DispatchCode"],keyValues:[e],isSuccess:!1,errorMessage:""}]};d()(u.f0B,C.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;if(s.messageType=t.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess){const e=b().cloneDeep(this.state.operationsVisibility);if(e.delete=!1,this.state.isDetails){const e=b().cloneDeep(this.state.selectedRow);e.ViewRailDispatchDetails_ShipmentStatus=c.Mw.CHECKED_IN,this.setState({selectedRow:e})}else this.getRailDispatchList(this.state.selectedShareholder);this.setState({operationsVisibility:e})}else s.messageResultDetails[0].errorMessage=t.ErrorList[0],console.log("Error in handleAuthorizeToLoad: ",t.ErrorList);this.handleNotify(s)})).catch((e=>{console.log("Error while handleAuthorizeToLoad: ",e)}))},this.handleConfirmCloseDispatch=(e,t)=>{const s=this.state.modalData;s.closeDispatch.isOpen=!0,s.closeDispatch.data.dispatchCode=e,s.closeDispatch.data.dispatchStatus=t,this.setState({modalData:s})},this.handleCloseDispatchReasonChange=e=>{const t=this.state.modalData;t.closeDispatch.data.reason=e,this.setState({modalData:t})},this.forceCloseRailDispatch=()=>{const e=b().cloneDeep(this.state.modalData);if(""===e.closeDispatch.data.reason)return e.closeDispatch.validationErrors.reason="ViewShipment_MandatoryReason",void this.setState({modalData:e});e.closeDispatch.validationErrors.reason="";let t=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showCloseShipmentAuthenticationLayout:t},(()=>{!1===t&&this.closeRailDispatch()}))},this.closeRailDispatch=()=>{this.handleAuthenticationClose();const e=b().cloneDeep(this.state.modalData),t={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,KeyCodes:[{key:"RailDispatchCode",value:e.closeDispatch.data.dispatchCode}],Entity:{Reason:e.closeDispatch.data.reason,DispatchCode:e.closeDispatch.data.dispatchCode,DispatchStatus:e.closeDispatch.data.dispatchStatus}},s={messageType:"critical",message:"ViewRailDispatch_CloseDispatch_status",messageResultDetails:[{keyFields:["RailDispatchPlanDetail_DispatchCode"],keyValues:[e.closeDispatch.data.dispatchCode],isSuccess:!1,errorMessage:""}]};d()(u.sgw,C.tW(t,this.props.tokenDetails.tokenInfo)).then((t=>{const i=t.data;if(e.closeDispatch.isOpen=!1,s.messageType=i.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=i.IsSuccess,!0===i.IsSuccess)if(this.state.isDetails){const e=b().cloneDeep(this.state.selectedRow);e.ViewRailDispatchDetails_ShipmentStatus=c.Mw.CLOSED,this.setState({selectedRow:e})}else this.getRailDispatchList(this.state.selectedShareholder);else s.messageResultDetails[0].errorMessage=i.ErrorList[0],console.log("Error in forceCloseRailDispatch: ",i.ErrorList);this.setState({modalData:e}),this.handleNotify(s)})).catch((e=>{console.log("Error while forceCloseRailDispatch: ",e)}))},this.printFANClick=()=>{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showFANAuthenticationLayout:e},(()=>{!1===e&&this.handlePrintFAN()}))},this.handlePrintFAN=()=>{this.handleAuthenticationClose();let e=this.state.selectedItems[0].Common_Code;const t={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,KeyCodes:[{key:"RailDispatchCode",value:e}]},s={messageType:"critical",message:"ShipmentCompDetail_PrintStatus",messageResultDetails:[{keyFields:["RailDispatchPlanDetail_DispatchCode"],keyValues:[e],isSuccess:!1,errorMessage:""}]};d()(u.Dmj,C.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;s.messageType=t.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=t.IsSuccess,!0!==t.IsSuccess&&(s.messageResultDetails[0].errorMessage=t.ErrorList[0],console.log("Error in handlePrintFAN: ",t.ErrorList)),this.handleNotify(s)})).catch((e=>{console.log("Error while handlePrintFAN: ",e)}))},this.handleModalBack=()=>{this.setState({showReport:!1})},this.viewBOLClick=()=>{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showViewBOLAuthenticationLayout:e},(()=>{!1===e&&this.handleViewBOL()}))},this.handleViewBOL=()=>{this.handleAuthenticationClose(),void 0===this.reportServiceURI?d()(u.yTV,C.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{e.data.IsSuccess&&(this.reportServiceURI=e.data.EntityResult,this.setState({showReport:!0}))})):this.setState({showReport:!0})},this.printBOLClick=()=>{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showPrintBOLAuthenticationLayout:e},(()=>{!1===e&&this.handlePrintBOL()}))},this.handlePrintBOL=()=>{this.handleAuthenticationClose();let e=this.state.selectedItems[0].Common_Code;const t={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,KeyCodes:[{key:"RailDispatchCode",value:e}]},s={messageType:"critical",message:"ShipmentCompDetail_PrintStatus",messageResultDetails:[{keyFields:["RailDispatchPlanDetail_DispatchCode"],keyValues:[e],isSuccess:!1,errorMessage:""}]};d()(u.lBV,C.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;s.messageType=t.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=t.IsSuccess,!0!==t.IsSuccess&&(s.messageResultDetails[0].errorMessage=t.ErrorList[0],console.log("Error in handlePrintBOL: ",t.ErrorList)),this.handleNotify(s)})).catch((e=>{console.log("Error while handlePrintBOL: ",e)}))},this.setRightPaneDisplay=e=>{this.setState({isDisplayRightPane:e})},this.handleDrawer=()=>{var e=b().cloneDeep(this.state.drawerStatus);this.setState({drawerStatus:!e})},this.authenticateDelete=()=>{try{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showDeleteAuthenticationLayout:e}),!1===e&&this.handleDelete()}catch(e){console.log("Marine Shipment Composite : Error in authenticateDelete")}},this.handleAuthenticationClose=()=>{this.setState({showDeleteAuthenticationLayout:!1,showAuthorizeToLoadAuthenticationLayout:!1,showCloseShipmentAuthenticationLayout:!1,showViewBOLAuthenticationLayout:!1,showPrintBOLAuthenticationLayout:!1,showFANAuthenticationLayout:!1})}}componentDidMount(){try{if(C.pJ(this.props.userDetails.EntityResult.IsArchived),this.props.shipmentSourceFromSummary){const e=b().cloneDeep(this.state.operationsVisibility);e.add=!1,this.setState({isDetails:!0,selectedItems:[],selectedRow:{},operationsVisibility:e,isDirectOpenSubPage:!1,isReadyToShowOperation:!1}),this.setRightPaneDisplay(!0)}const e=b().cloneDeep(this.state.operationsVisibility);e.add=C.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.add,y.xz),this.setState({operationsVisibility:e,selectedShareholder:this.props.userDetails.EntityResult.PrimaryShareholder}),this.CheckRailDispatchDeleteAllowed(),this.getLookUpData("HSEInspection",(e=>{this.setState({enableHSEInspection:"True"===e.EnableRail})})),this.getLookUpData("Rail",(e=>{this.setState({railLookUpData:e})})),this.getTerminalsList(this.props.userDetails.EntityResult.PrimaryShareholder),this.getRailDispatchList(this.props.userDetails.EntityResult.PrimaryShareholder),this.getKPIList(),this.getContractLookupValues(),this.GetShipmentActivityInfo()}catch(e){console.log("RailDispatchComposite: Error occurred on componentDidMount",e)}window.addEventListener("beforeunload",this.clearStorage)}GetShipmentActivityInfo(){try{d()(u.S_j,C.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{e.data.IsSuccess&&this.setState({activityInfo:e.data.EntityResult})})).catch((e=>{console.log("Error while getting shipment activityInfo:",e)}))}catch(e){console.log("Error in GetShipmentActivityInfo:",e)}}getTerminalsList(e){try{null!==e&&""!==e?d()(u.Oqv,C.tW([e],this.props.tokenDetails.tokenInfo)).then((e=>{e.data.IsSuccess&&this.setState({terminalCodes:e.data.EntityResult})})):this.setState({terminalCodes:[]})}catch(t){console.log("RailDispatchComposite: Error occurred on getTerminalsList",t)}}getRailDispatchList(e){try{this.setState({isReadyToRender:!1});const t={ShareHolderCode:e,TransportationType:c.LY.RAIL,ShipmentFrom:null,ScheduledFrom:null,ScheduledTo:null,ShipmentTypeCode:null};if(this.props.shipmentSourceFromSummary||void 0===this.props.shipmentSource){const e=new Date(this.state.fromDate),s=new Date(this.state.toDate);e.setHours(0,0,0),s.setHours(23,59,59),t.ScheduledFrom=e,t.ScheduledTo=s,t.ShipmentType=c.ls.All,t.ShipmentFrom=c.U6.All}else t.ShipmentFrom=this.props.shipmentSource,t.ShipmentType=c.ls.All,t.ShipmentTypeCode=this.props.shipmentSourceCode;d()(u.SKh,C.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;!0===t.IsSuccess?this.setState({data:t.EntityResult,isReadyToRender:!0},(()=>{if(1===this.state.selectedItems.length){const s=this.state.selectedItems[0],i=t.EntityResult.Table.filter((e=>e.Common_Code===s.Common_Code));let{operationsVisibility:a,activityInfo:o}={...this.state},r=o.filter((e=>e.ActivityCode===c.Ch.RAILDISPATCH_ENABLE_DELETEPLAN&&e.ActionTypeCode===c.Gd.CHECK));var e=[];void 0!==r&&r.length>0&&(e=r[0].ShipmentStates),a.delete=!this.props.userDetails.EntityResult.IsWebPortalUser&&(e.indexOf(i[0].ViewRailDispatchDetails_ShipmentStatus.toUpperCase())>-1&&C.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.remove,y.xz)),this.state.isDetails?this.setState({selectedItems:i,selectedRow:i[0],operationsVisibility:a}):(this.getRailDispatchStatusOperation(i[0].Common_Code,i[0].ViewRailDispatchDetails_ShipmentStatus,i[0]),this.setState({selectedItems:i,operationsVisibility:a}))}})):(this.setState({data:[],isReadyToRender:!0}),console.log("Error in GetRailDispatchListForRole: ",t.ErrorList))})).catch((e=>{this.setState({data:[],isReadyToRender:!0}),console.log("Error while getting RailDispatch List: ",e)}))}catch(t){this.setState({isReadyToRender:!0}),console.log(t)}}CheckRailDispatchDeleteAllowed(){try{d()(u.Cro,C.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{e.data.IsSuccess&&this.setState({railDispatchDeleteStates:e.data.EntityResult})})).catch((e=>{console.log("Error while fetching delete states in Rail:",e)}))}catch(e){console.log("Error while fetching delete states in Rail:",e)}}getRailDispatchStatusOperation(e,t,s){this.setState({isReadyToShowOperation:!1}),this.getRailDispatchOperations(e,t,s,(()=>{this.getRailDispatchAllChangeStatus(e,(()=>{this.setState({isReadyToShowOperation:!0})}))}))}handleNotify(e){try{(0,p.toast)((0,r.jsx)(g.A,{children:(0,r.jsx)(S.A,{notificationMessage:e})}),{autoClose:"success"===e.messageType&&1e4})}catch(t){console.log("RailDispatchComposite: Error occurred on handleNotify",t)}}getTransportationType(){let e=c.LY.RAIL;const{itemProps:t}=this.props.activeItem;return void 0!==t&&void 0!==t.transportationType&&(e=t.transportationType),e}getRailDispatchOperations(e,t,s,i){var a=s.AcutalTerminalCode;null!==a&&void 0!==a||1===this.state.selectedItems.length&&(a=this.state.selectedItems[0].AcutalTerminalCode);const o={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,KeyCodes:[{key:"RailDispatchStatus",value:t},{key:"DispatchCode",value:e}]};d()(u.L0B,C.tW(o,this.props.tokenDetails.tokenInfo)).then((e=>{const s=e.data;if(!0===s.IsSuccess){const e={ViewRailDispatch_EditAccess:!1,ViewRailDispatch_DisableAdjustPlanQty:!1,ViewRailDispatch_DisableWagonForceClose:!1,ViewRailDispatch_Delete:!1,ViewRailDispatch_Update:!1};for(let t in e)void 0!==s.EntityResult[t]&&(e[t]=s.EntityResult[t],"ViewRailDispatch_Update"!==t&&"ViewRailDispatch_Delete"!==t&&delete s.EntityResult[t]);const o=["ViewRailDispatch_Update","ViewRailDispatch_Delete","ViewRailDispatch_AuthorizeToLoad","ViewRailDispatch_PrintFAN","ViewRailDispatch_RecordWeight","ViewRailDispatch_RailWagonAssignment","ViewRailDispatch_ProductAssignment","ViewRailDispatch_LoadSpotAssignment","ViewRailDispatch_ManualEntry","ViewRailDispatch_ViewLoadingDetails","ViewRailDispatch_ViewAuditTrail","ViewRailDispatch_CloseDispatch","ViewRailDispatch_ViewBOL","ViewRailDispatch_PrintBOL"],r=[];for(let i of o)if("ViewRailDispatch_Update"!==i&&"ViewRailDispatch_Delete"!==i){if(t!==c.Mw.CHECKED_IN||"ViewRailDispatch_ProductAssignment"!==i)if("ViewRailDispatch_RailWagonAssignment"===i||"ViewRailDispatch_ProductAssignment"===i||"ViewRailDispatch_LoadSpotAssignment"===i){if(!this.props.userDetails.EntityResult.IsEnterpriseNode&&"READY"!==t&&null===a)continue;!0===s.EntityResult[i]&&r.push(i)}else if(!0===s.EntityResult[i]){if(("ViewRailDispatch_CloseDispatch"===i||"ViewRailDispatch_RecordWeight"===i||"ViewRailDispatch_ManualEntry"===i)&&!this.props.userDetails.EntityResult.IsEnterpriseNode&&a!==this.props.userDetails.EntityResult.TerminalCode)continue;if(("ViewRailDispatch_PrintFAN"===i||"ViewRailDispatch_PrintBOL"===i)&&this.props.userDetails.EntityResult.IsWebPortalUser)continue;r.push(i)}}else{let t=this.state.operationsVisibility;"ViewRailDispatch_Update"===i&&(e.ViewRailDispatch_Update=s.EntityResult[i]),"ViewRailDispatch_Delete"===i&&(t.delete=s.EntityResult[i],e.ViewRailDispatch_Delete=s.EntityResult[i]),this.setState({operationsVisibility:t})}t!==c.Mw.CLOSED||!this.props.userDetails.EntityResult.IsBSIEnabledLicense||this.props.userDetails.EntityResult.IsArchived||this.props.userDetails.EntityResult.IsWebPortalUser||r.push("ViewRailDispatch_BSIOutbound"),this.setState({nextOperations:r,currentAccess:e}),i()}else console.log("Error in getRailDispatchOperations: ",s.ErrorList)})).catch((e=>{console.log("Error while getRailDispatchOperations: ",e)}))}getRailDispatchAllChangeStatus(e,t){const s={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,KeyCodes:[{key:"DispatchCode",value:e}]};d()(u.O7v,C.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{const s=e.data;!0===s.IsSuccess?(this.setState({currentStatuses:s.EntityResult}),t()):console.log("Error in getRailDispatchAllChangeStatus: ",s.ErrorList)})).catch((e=>{console.log("Error while getRailDispatchAllChangeStatus: ",e)}))}renderModal(){let e=null;e=this.props.userDetails.EntityResult.IsArchived?"TM/"+c.mD+"/RailBOL":"TM/"+c.PZ+"/RailBOL";let t={Culture:this.props.userDetails.EntityResult.UICulture,ShareholderCode:this.state.selectedShareholder,RailDispatchCode:1===this.state.selectedItems.length?this.state.selectedItems[0].Common_Code:this.state.selectedRow.Common_Code};return(0,r.jsx)(L.A,{showReport:this.state.showReport,handleBack:this.handleModalBack,handleModalClose:this.handleModalBack,proxyServerHost:u._Oi,reportServiceHost:this.reportServiceURI,filePath:e,parameters:t})}handleBSIOutbound(e){const t={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,KeyCodes:[{key:"RailDispatchCode",value:e}]},s={messageType:"critical",message:"ViewRailDispatch_BSIOutbound_status",messageResultDetails:[{keyFields:["RailDispatchPlanDetail_DispatchCode"],keyValues:[e],isSuccess:!1,errorMessage:""}]};d()(u.X6q,C.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;s.messageType=t.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=t.IsSuccess,!0!==t.IsSuccess&&(s.messageResultDetails[0].errorMessage=t.ErrorList[0],console.log("Error in handleBSIOutbound: ",t.ErrorList)),this.handleNotify(s)})).catch((e=>{console.log("Error while handleBSIOutbound: ",e)}))}getKPIList(){if(!0===C.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.view,y.bL)){var e={message:"",messageType:"critical",messageResultDetails:[]};let t={PageName:T.$8,InputParameters:[]};d()(u.dxq,C.tW(t,this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data;!0===s.IsSuccess?this.setState({railDispatchKPIList:s.EntityResult.ListKPIDetails}):(this.setState({railDispatchKPIList:[]}),console.log("Error in Rail Dispatch KPIList:",s.ErrorList),e.messageResultDetails.push({keyFields:[],keyValues:[],isSuccess:!1,errorMessage:s.ErrorList[0]})),e.messageResultDetails.length>0&&(0,p.toast)((0,r.jsx)(g.A,{children:(0,r.jsx)(S.A,{notificationMessage:e})}),{autoClose:"success"===e.messageType&&1e4})})).catch((e=>{console.log("Error while getting Rail Dispatch KPIList:",e)}))}}getContractLookupValues(){try{C.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.add,y.xz)&&this.getLookUpData("Contract",(e=>{this.setState({isContractDisable:"0"!==e.EnableContract})}))}catch(e){console.log("Error while getContractLookupValues: ",e)}}getFunctionGroupName(){return this.state.showDeleteAuthenticationLayout?y.xz:this.state.showCloseShipmentAuthenticationLayout?y.hE:this.state.showAuthorizeToLoadAuthenticationLayout?y.Ig:this.state.showViewBOLAuthenticationLayout||this.state.showPrintBOLAuthenticationLayout?y.FO:this.state.showFANAuthenticationLayout?y.dY:void 0}getDeleteorEditMode(){return this.state.showDeleteAuthenticationLayout?y.i.remove:y.i.modify}handleOperation(){return this.state.showDeleteAuthenticationLayout?this.handleDelete:this.state.showAuthorizeToLoadAuthenticationLayout?this.handleAuthorizeToLoad:this.state.showCloseShipmentAuthenticationLayout?this.closeRailDispatch:this.state.showFANAuthenticationLayout?this.handlePrintFAN:this.state.showViewBOLAuthenticationLayout?this.handleViewBOL:this.state.showPrintBOLAuthenticationLayout?this.handlePrintBOL:void 0}render(){const e=this.state.modalData;const t=1===this.state.selectedItems.length&&this.state.isDisplayRightPane;return(0,r.jsxs)("div",{children:[void 0===this.props.shipmentSource||""===this.props.shipmentSource||null===this.props.shipmentSource?(0,r.jsx)(g.A,{children:(0,r.jsx)(a.$,{operationsVisibilty:this.state.operationsVisibility,breadcrumbItem:this.props.activeItem,onAdd:this.handleAdd,onDelete:this.authenticateDelete,shrVisible:!1,handleBreadCrumbClick:this.props.handleBreadCrumbClick})}):(0,r.jsx)(r.Fragment,{children:this.state.isDetails?"":(0,r.jsx)(r.Fragment,{children:this.state.isGoBackToSource?null:(0,r.jsx)(v.TranslationConsumer,{children:e=>(0,r.jsx)("div",{className:"headerContainer",children:(0,r.jsxs)("div",{className:"row headerSpacing",children:[(0,r.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,r.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:this.props.shipmentSourceCode+" - "+e("Dispatch_OtherSource")})}),(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"headerItemRight",children:(0,r.jsx)(f.Button,{type:"primary",content:e("RailDispatchPlanList_AddNew"),disabled:!this.state.isContractDisable,onClick:this.handleAdd})})})]})})})})}),this.state.isGoBackToSource?(0,r.jsx)(g.A,{children:(0,r.jsx)(I.default,{shipmentSource:this.props.shipmentSource,activeItem:this.props.activeItem})}):"",!0===this.state.isDetails?(0,r.jsx)("div",{className:t?this.state.drawerStatus?"drawerClose":"showShipmentStatusRightPane":"",children:(0,r.jsx)(g.A,{children:(0,r.jsx)(n.default,{Key:"RailDispatchDetails",selectedRow:this.state.selectedRow,onBack:this.handleBack,onSubPageBack:this.handleSubPageBack,onSaved:this.savedEvent,terminalCodes:this.state.terminalCodes,selectedShareholder:this.state.selectedShareholder,getLookUpData:this.getLookUpData,onNotify:this.handleNotify,onUpdateStatusOperation:this.handleUpdateStatusOperation,subPageName:this.state.subPageName,isDirectOpenSubPage:this.state.isDirectOpenSubPage,isDisplayDetails:this.state.isDisplayDetails,currentAccess:this.state.currentAccess,onSetRightPaneDisplay:this.setRightPaneDisplay,enableHSEInspection:this.state.enableHSEInspection,railLookUpData:this.state.railLookUpData,shipmentSource:this.props.shipmentSource,shipmentSourceCode:this.props.shipmentSourceCode,shipmentSourceCompartmentItems:this.props.shipmentSourceCompartmentItems,shipmentSourceDetails:this.props.shipmentSourceDetails,shipmentSourceFromSummary:this.props.shipmentSourceFromSummary,selectedSourceCode:this.props.selectedSourceCode})})}):(0,r.jsxs)("div",{children:[void 0===this.props.shipmentSource||""===this.props.shipmentSource||null===this.props.shipmentSource?(0,r.jsx)(g.A,{children:(0,r.jsx)("div",{className:"kpiSummaryContainer",children:(0,r.jsx)(k.A,{kpiList:this.state.railDispatchKPIList,pageName:"RailDispatch"})})}):"",(0,r.jsx)("div",{className:t?this.state.drawerStatus?"drawerClose":"showShipmentStatusRightPane":"",children:void 0===this.props.shipmentSourceFromSummary||""===this.props.shipmentSourceFromSummary||null===this.props.shipmentSourceFromSummary?(0,r.jsxs)("div",{children:[void 0===this.props.shipmentSource?(0,r.jsx)(g.A,{children:(0,r.jsx)(E.L,{dateRange:{from:this.state.fromDate,to:this.state.toDate},dateError:this.state.dateError,handleDateTextChange:this.handleDateTextChange,handleRangeSelect:this.handleRangeSelect,handleLoadOrders:this.handleLoadOrders,filterText:"LoadShipments"})}):null,this.state.isReadyToRender?(0,r.jsx)(g.A,{children:(0,r.jsx)("div",{className:"compositeTransactionList",children:(0,r.jsx)(l,{tableData:this.state.data.Table,columnDetails:this.state.data.Column,pageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,exportRequired:!0,exportFileName:"RailDispatchList",columnPickerRequired:!0,terminalsToShow:this.props.userDetails.EntityResult.PageAttibutes.NoOfTerminalsToShow,selectionRequired:!0,columnGroupingRequired:!0,onSelectionChange:this.handleSelection,onRowClick:this.handleRowClick,parentComponent:this.componentName})})}):(0,r.jsx)(R.A,{loadingClass:"globalLoader",message:""})]}):null})]}),t?(0,r.jsx)("div",{className:this.state.drawerStatus?"marineStatusLeftPane":"",children:(0,r.jsx)(w.A,{selectedItem:this.state.selectedItems,shipmentNextOperations:this.state.nextOperations,handleDetailsPageClick:this.handleRowClick,handleOperationButtonClick:this.handleOperationClick,currentStatuses:this.state.currentStatuses,isDetails:this.state.isDetails,handleDrawer:this.handleDrawer,isWebPortalUser:this.props.userDetails.EntityResult.IsWebPortalUser,title:"ViewAllShipment_Details",unAllowedOperations:[],webPortalAllowedOperations:["ViewRailDispatch_ViewLoadingDetails","ViewRailDispatch_ViewAuditTrail","ViewRailDispatch_ViewBOL"]})}):null,this.state.showDeleteAuthenticationLayout||this.state.showAuthorizeToLoadAuthenticationLayout||this.state.showCloseShipmentAuthenticationLayout||this.state.showViewBOLAuthenticationLayout||this.state.showPrintBOLAuthenticationLayout||this.state.showFANAuthenticationLayout?(0,r.jsx)(O.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:this.getDeleteorEditMode(),functionGroup:this.getFunctionGroupName(),handleClose:this.handleAuthenticationClose,handleOperation:this.handleOperation()}):null,void 0===this.props.shipmentSource?(0,r.jsx)(g.A,{children:(0,r.jsx)(p.ToastContainer,{hideProgressBar:!0,closeOnClick:!1,closeButton:!0,newestOnTop:!0,position:"bottom-right",toastClassName:"toast-notification-wrap"})}):null,Object.keys(this.state.selectedRow).length>0||1===this.state.selectedItems.length?this.renderModal():"",(0,r.jsx)(g.A,{children:(0,r.jsx)(v.TranslationConsumer,{children:t=>(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(f.Modal,{size:"mini",open:this.state.modalData.closeDispatch.isOpen,closeOnDimmerClick:!1,children:[(0,r.jsx)(f.Modal.Content,{children:(0,r.jsx)(f.Input,{fluid:!0,label:t("ViewRailDispatchList_ForceCloseHeader"),onChange:this.handleCloseDispatchReasonChange,error:t(this.state.modalData.closeDispatch.validationErrors.reason),reserveSpace:!1})}),(0,r.jsxs)(f.Modal.Footer,{children:[(0,r.jsx)(f.Button,{content:t("AccessCardInfo_Ok"),onClick:this.forceCloseRailDispatch}),(0,r.jsx)(f.Button,{content:t("AccessCardInfo_Cancel"),onClick:()=>{e.closeDispatch.isOpen=!1,e.closeDispatch.data.reason="",e.closeDispatch.validationErrors.reason="",this.setState({modalData:e})}})]})]})})})})]})}}const V=(0,m.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(x)},31295:(e,t,s)=>{s.r(t),s.d(t,{default:()=>U});var i=s(65043),a=s(97508),o=s(19380),r=s(70579);function l(e){let{tableData:t,columnDetails:s,pageSize:i,exportRequired:a,exportFileName:l,columnPickerRequired:n,columnGroupingRequired:h,selectionRequired:d,terminalsToShow:c,selectedItems:u,onSelectionChange:p,onRowClick:m,parentComponent:S}=e;return(0,r.jsx)("div",{children:(0,r.jsx)(o.A,{data:t,columns:s,rowsPerPage:i,exportRequired:a,exportFileName:l,columnPickerRequired:n,columnGroupingRequired:h,selectionRequired:d,selectedItems:u,onSelectionHandle:p,onRowClick:m,parentComponent:S,terminalsToShow:c})})}l.defaultProps={pageSize:10,terminalsToShow:2,tableData:[],columnDetails:[],selectedItems:[]};var n=s(275),h=s(66554),d=s(65187),c=s(40252),u=s(14159),p=(s(92342),s(63973),s(80312)),m=s(69062),S=s(72067),C=s(7523),g=s(40854),D=s.n(g),y=s(11981),R=s(73571),E=s(93779),A=s(61227),b=s(15441),f=s(64149),L=s(43503),v=s(53536),w=s.n(v),I=s(67907),T=s(82501),k=s(2070),O=s(80297),x=s(39424),V=s(15417),j=s(72711),P=s(57405),N=s(79668),B=s(56507),_=s(62900),F=s(78374);class M extends i.Component{constructor(){super(...arguments),this.state={shipment:{},isDetails:!1,isReadyToRender:!1,isDetailsModified:"false",operationsVisibilty:{add:!0,delete:!1,shareholder:!0},selectedRow:{},selectedItems:[],selectedShareholder:void 0===this.props.selectedShareholder||null===this.props.selectedShareholder||""===this.props.selectedShareholder?this.props.userDetails.EntityResult.PrimaryShareholder:this.props.selectedShareholder,popUpContent:[],data:{},terminalCodes:[],fromDate:new Date,toDate:new Date,dateError:"",shipmentNextOperations:[],currentShipmentStatuses:[],shipmentType:"",isOperation:!1,isManualEntry:!1,isViewAuditTrail:!1,auditTrailList:[],modAuditTrailList:[],truckShipmentKPIList:[],attributeMetaDataList:[],isViewLoadingDetails:!1,modViewLoadingDetails:[],loadingExpandedRows:[],nonConfigColumns:[],isSealCompartments:!1,sealCompartments:[],isRecordWeight:!1,recordWeightList:[],weighBridgeCode:"",scadaValue:"",allowOutofRangeTW:!1,isNotRevised:!1,staticLoadingDetails:[],showReport:!1,isCloseShipment:!1,isVehicleCrippled:!1,reasonForClosure:"",modCustomValues:{},drawerStatus:!1,popUpOpen:!1,isGoBackToSource:!1,isContractDisable:!1,isOrderDisable:!1,activityInfo:[],isLadenWeightValid:!1,ladenWeightError:"",vehicleForRecordWeight:{},showDeleteAuthenticationLayout:!1,showAuthorizeToLoadAuthenticationLayout:!1,showAllowToLoadAuthenticationLayout:!1,showCloseShipmentAuthenticationLayout:!1,showViewBOLAuthenticationLayout:!1,showPrintBOLAuthenticationLayout:!1,showFANAuthenticationLayout:!1,isAllocateBay:!1,bayData:[],selectBay:"",isDeAllocateBay:!1,ShipmentBay:""},this.componentName="TruckShipmentComponent",this.handleAdd=e=>{try{let t="";t=null!==e?e:this.state.popUpContent[0].fieldName;const s={...this.state.operationsVisibilty};s.shareholder=!1,s.add=!1,this.setState({isDetails:!0,isManualEntry:!1,isViewAuditTrail:!1,isViewLoadingDetails:!1,selectedRow:{},operationsVisibilty:s,shipmentType:t}),void 0!==this.props.shipmentSource&&this.props.isShowBackButton(!1)}catch(t){console.log("TruckShipmentComposite:Error occured on handleAdd",t)}},this.handleShareholderSelectionChange=e=>{try{this.setState({selectedShareholder:e,isReadyToRender:!1,selectedItems:[]}),this.getShipmentList(e),this.getTerminalsList(e),this.getKPIList(e)}catch(t){console.log("TruckShipmentComposite:Error occured on handleShareholderSelectionChange",t)}},this.handleSelection=e=>{try{var{operationsVisibilty:t,drawerStatus:s,activityInfo:i}={...this.state};let o=i.filter((e=>e.ActivityCode===C.Ch.SHIPMENT_ENABLE_DELETE&&e.ActionTypeCode===C.Gd.CHECK));var a=[];void 0!==o&&o.length>0&&(a=o[0].ShipmentStates);let r=!(e.findIndex((e=>a.indexOf(e.ViewShipmentStatus_ShipmentStatus.toUpperCase())<0))>=0),l=e.filter((function(e){return e.ViewShipmentStatus_ShipmentType===C.Pm.PRODUCT})).length,n=e.filter((function(e){return e.ViewShipmentStatus_ShipmentType===C.Pm.COMPARTMENT})).length,h=!0;l>0&&(h=m.ab(this.props.userDetails.EntityResult.FunctionsList,p.i.remove,p.yu));let d=!0;n>0&&(d=m.ab(this.props.userDetails.EntityResult.FunctionsList,p.i.remove,p.de)),t.delete=!this.props.userDetails.EntityResult.IsWebPortalUser&&(r&&e.length>0&&d&&h),s=1!==e.length,this.setState({selectedItems:e,operationsVisibilty:t,isOperation:!1,drawerStatus:s,shipment:{}},(()=>{1===e.length&&(this.getShipment(e[0]),this.setState({isOperation:!0,shipmentType:e[0].ViewShipmentStatus_ShipmentType}))}))}catch(o){console.log("TruckShipmentComposite:Error occured on handleSelection",o)}},this.componentWillUnmount=()=>{this.clearStorage(),window.removeEventListener("beforeunload",this.clearStorage)},this.clearStorage=()=>{sessionStorage.removeItem(this.componentName+"GridState")},this.closeShipment=()=>{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showCloseShipmentAuthenticationLayout:e},(()=>{!1===e&&this.handleShipmentClose()}))},this.handleShipmentClose=()=>{this.handleAuthenticationClose();try{let s={messageType:"critical",message:"ViewAllShipment_ShipmentClose",messageResultDetails:[{keyFields:["ShipmentCompDetail_ShipmentNumber"],keyValues:[this.state.shipment.ShipmentCode],isSuccess:!1,errorMessage:""}]},i=this.formCloseShipmentRequest();var e=[{key:E.FR,value:this.state.selectedShareholder},{key:E.yz,value:this.state.shipment.ShipmentCode}],t={ShareHolderCode:this.state.selectedShareholder,keyDataCode:E.yz,KeyCodes:e,Entity:i};D()(S.dWY,m.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;s.messageType=t.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?this.getShipmentList(this.state.selectedShareholder):s.messageResultDetails[0].errorMessage=t.ErrorList[0],(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:s})}),{autoClose:"success"===s.messageType&&1e4})})).catch((e=>{console.log("Error while shipment close:",e)}))}catch(s){console.log("Error while closing the shipment:",s)}},this.handleCloseShipmentModal=()=>(0,r.jsx)(I.TranslationConsumer,{children:e=>(0,r.jsxs)(j.Modal,{open:this.state.isCloseShipment,size:"mini",children:[(0,r.jsxs)(j.Modal.Content,{children:[(0,r.jsx)("div",{className:"col col-lg-12",children:(0,r.jsx)("h3",{children:e("ViewShipment_CloseHeader")+" : "+this.state.shipment.ShipmentCode})}),(0,r.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,r.jsx)("div",{className:"col col-lg-9",children:(0,r.jsx)("label",{children:e("CloseShipment_VehicleCrippled")})}),(0,r.jsx)("div",{children:(0,r.jsx)(j.Checkbox,{checked:this.state.isVehicleCrippled,onChange:e=>{this.setState({isVehicleCrippled:e},(()=>{e?this.setState({reasonForClosure:"Crippled"}):this.setState({reasonForClosure:""})}))}})})]}),(0,r.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:(0,r.jsx)("div",{className:"col col-lg-12",children:(0,r.jsx)(j.Input,{fluid:!0,value:this.state.reasonForClosure,label:e("ViewShipment_Reason"),disbaled:!!this.state.isVehicleCrippled,reserveSpace:!1,onChange:e=>{this.setState({reasonForClosure:e})}})})})]}),(0,r.jsxs)(j.Modal.Footer,{children:[(0,r.jsx)(j.Button,{type:"primary",content:e("AccessCardInfo_Ok"),onClick:()=>{if(""===this.state.reasonForClosure){let e={messageType:"critical",message:"ViewAllShipment_ShipmentClose",messageResultDetails:[{keyFields:["ShipmentCompDetail_ShipmentNumber"],keyValues:[this.state.shipment.ShipmentCode],isSuccess:!1,errorMessage:"Enter_ReasonForCloseure"}]};(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:e})}),{autoClose:"success"===e.messageType&&1e4})}else this.setState({isCloseShipment:!1},(()=>{this.closeShipment()}))}}),(0,r.jsx)(j.Button,{type:"primary",content:e("Cancel"),onClick:()=>{this.setState({isCloseShipment:!1,isVehicleCrippled:!1,reasonForClosure:""})}})]})]})}),this.confirmRecordLadenWeight=()=>(0,r.jsx)(I.TranslationConsumer,{children:e=>(0,r.jsxs)(j.Modal,{open:this.state.isLadenWeightValid,size:"small",children:[(0,r.jsx)(j.Modal.Content,{children:(0,r.jsx)("div",{className:"col col-lg-12",children:(0,r.jsx)("h5",{children:e(this.state.ladenWeightError)+e("ConfirmCaptureLadenWeight")})})}),(0,r.jsxs)(j.Modal.Footer,{children:[(0,r.jsx)(j.Button,{type:"primary",content:e("AccessCardInfo_Ok"),onClick:()=>{this.setState({isLadenWeightValid:!1},(()=>{this.RecordLadenWeight()}))}}),(0,r.jsx)(j.Button,{type:"primary",content:e("Cancel"),onClick:()=>{this.setState({isLadenWeightValid:!1})}})]})]})}),this.confirmAllowToLoad=()=>(0,r.jsx)(I.TranslationConsumer,{children:e=>(0,r.jsxs)(j.Modal,{open:this.state.isNotRevised,size:"small",children:[(0,r.jsx)(j.Modal.Content,{children:(0,r.jsx)("div",{className:"col col-lg-12",children:(0,r.jsx)("h5",{children:e("ViewShipment_ConfirmAllowToLoad")})})}),(0,r.jsxs)(j.Modal.Footer,{children:[(0,r.jsx)(j.Button,{type:"primary",content:e("AccessCardInfo_Ok"),onClick:()=>{this.setState({isNotRevised:!1},(()=>{this.allowToLoad()}))}}),(0,r.jsx)(j.Button,{type:"primary",content:e("Cancel"),onClick:()=>{this.setState({isNotRevised:!1})}})]})]})}),this.printBOLClick=()=>{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showPrintBOLAuthenticationLayout:e},(()=>{!1===e&&this.printBOL()}))},this.printBOL=()=>{this.handleAuthenticationClose();let e=w().cloneDeep(this.state.shipment),t={messageType:"critical",message:"ViewShipmentStatus_PrintBOL_status",messageResultDetails:[{keyFields:["ShipmentCompDetail_ShipmentNumber"],keyValues:[e.ShipmentCode],isSuccess:!1,errorMessage:""}]};this.handlePrintBOL(e.ShipmentCode,this.state.selectedShareholder,this.props.tokenDetails.tokenInfo,(e=>{t.messageType=e.IsSuccess?"success":"critical",t.messageResultDetails[0].isSuccess=e.IsSuccess,t.messageResultDetails[0].errorMessage=e.ErrorList[0],(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:t})}),{autoClose:"success"===t.messageType&&1e4})}))},this.printFANClick=()=>{console.log("printFANClick called...");let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showFANAuthenticationLayout:e},(()=>{!1===e&&this.printFAN()}))},this.printFAN=()=>{console.log("printFAN called..."),this.handleAuthenticationClose();let e=w().cloneDeep(this.state.shipment),t={messageType:"critical",message:"ViewShipmentStatus_PrintFAN_status",messageResultDetails:[{keyFields:["ShipmentCompDetail_ShipmentNumber"],keyValues:[e.ShipmentCode],isSuccess:!1,errorMessage:""}]};this.handlePrintFAN(e.ShipmentCode,this.state.selectedShareholder,this.props.tokenDetails.tokenInfo,(e=>{t.messageType=e.IsSuccess?"success":"critical",t.messageResultDetails[0].isSuccess=e.IsSuccess,t.messageResultDetails[0].errorMessage=e.ErrorList[0],(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:t})}),{autoClose:"success"===t.messageType&&1e4})}))},this.allowToLoad=()=>{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showAllowToLoadAuthenticationLayout:e},(()=>{!1===e&&this.ConfirmedAllowToLoad()}))},this.ConfirmedAllowToLoad=()=>{let e={messageType:"critical",message:"ViewShipment_AllowToLoad_status",messageResultDetails:[{keyFields:["ShipmentCompDetail_ShipmentNumber"],keyValues:[w().cloneDeep(this.state.shipment).ShipmentCode],isSuccess:!1,errorMessage:""}]};this.handleAllowToLoad(w().cloneDeep(this.state.shipment),this.state.selectedShareholder,this.props.tokenDetails.tokenInfo,(t=>{e.messageType=t.IsSuccess?"success":"critical",e.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?this.getShipmentList(this.state.selectedShareholder):e.messageResultDetails[0].errorMessage=t.ErrorList[0],(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:e})}),{autoClose:"success"===e.messageType&&1e4})}))},this.handleSealClose=()=>{this.setState({isSealCompartments:!1,sealCompartments:[]})},this.handleModalBack=()=>{this.setState({showReport:!1})},this.handleViewBOL=()=>{this.handleAuthenticationClose(),void 0===this.reportServiceURI?D()(S.yTV,m.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{e.data.IsSuccess&&(this.reportServiceURI=e.data.EntityResult,this.setState({showReport:!0}))})):this.setState({showReport:!0})},this.authorizeToLoadOnClick=()=>{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showAuthorizeToLoadAuthenticationLayout:e},(()=>{!1===e&&this.authorizeToLoad()}))},this.authorizeToLoad=()=>{this.handleAuthenticationClose();let e={messageType:"critical",message:"ViewShipment_AuthorizeLoad_status",messageResultDetails:[{keyFields:["ShipmentCompDetail_ShipmentNumber"],keyValues:[w().cloneDeep(this.state.shipment).ShipmentCode],isSuccess:!1,errorMessage:""}]};this.handleAuthorizeToLoad(w().cloneDeep(this.state.shipment),this.state.selectedShareholder,this.props.tokenDetails.tokenInfo,(t=>{e.messageType=t.IsSuccess?"success":"critical",e.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?this.getShipmentList(this.state.selectedShareholder):e.messageResultDetails[0].errorMessage=t.ErrorList[0],(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:e})}),{autoClose:"success"===e.messageType&&1e4})}))},this.handleOperationClick=e=>{let t=w().cloneDeep(this.state.shipment),s={messageType:"critical",message:e+"_status",messageResultDetails:[{keyFields:["ShipmentCompDetail_ShipmentNumber"],keyValues:[t.ShipmentCode],isSuccess:!1,errorMessage:""}]};switch(e){case C.fY.ViewShipment_AuthorizeLoad:this.authorizeToLoadOnClick();break;case C.fY.ViewShipment_AllowToLoad:w().cloneDeep(this.state.staticLoadingDetails).filter((e=>e.Planned_Quantity!==e.Revised_Planned_Quantity)).length<=0?this.setState({isNotRevised:!0}):this.allowToLoad();break;case C.fY.ManualEntry:this.setState({isManualEntry:!0,isDetails:!1},(()=>{void 0!==this.props.shipmentSource&&this.props.isShowBackButton(!1)}));break;case C.fY.ViewShipment_RecordWeight:this.getRecordWeightList();break;case C.fY.ViewShipment_CloseShipment:this.setState({isCloseShipment:!0});break;case C.fY.ViewShipmentStatus_PrintFAN:this.printFANClick();break;case C.fY.ViewShipmentStatus_PrintBOL:this.printBOLClick();break;case C.fY.ViewShipmentStatus_ViewBOL:let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showViewBOLAuthenticationLayout:e},(()=>{!1===e&&this.handleViewBOL()}));break;case C.fY.ViewAllShipment_SendBOL:this.handleSendBOL(t.ShipmentCode,this.state.selectedShareholder,this.props.tokenDetails.tokenInfo,(e=>{s.messageType=e.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=e.IsSuccess,s.messageResultDetails[0].errorMessage=e.ErrorList[0],(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:s})}),{autoClose:"success"===s.messageType&&1e4})}));break;case C.fY.ViewAllShipment_BSIOutbound:this.handleBSIOutbound(t.ShipmentCode,this.state.selectedShareholder,this.props.tokenDetails.tokenInfo,(e=>{s.messageType=e.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=e.IsSuccess,s.messageResultDetails[0].errorMessage=e.ErrorList[0],(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:s})}),{autoClose:"success"===s.messageType&&1e4})}));break;case C.fY.ViewShipment_ViewAuditTrail:this.handleViewAuditTrail(this.state.selectedShareholder,t.ShipmentCode,this.state.selectedItems[0].ViewShipmentStatus_ShipmentType,this.props.tokenDetails.tokenInfo,(e=>{if(!0===e.IsSuccess){let s=e.EntityResult,i=w().cloneDeep(this.state.attributeMetaDataList.SHIPMENTSTATUSTIME);for(let e=0;e<s.length;e++)s[e].UpdatedTime=new Date(s[e].UpdatedTime).toLocaleDateString()+" "+new Date(s[e].UpdatedTime).toLocaleTimeString();let a=e.EntityResult;for(let e=0;e<a.length;e++)a[e].AttributesforUI=this.formReadonlyCompAttributes(a[e].Attributes,i);var{operationsVisibilty:t}={...this.state};t.add=!1,t.delete=!1,this.setState({operationsVisibilty:t,auditTrailList:a,modAuditTrailList:s,isViewAuditTrail:!0}),void 0!==this.props.shipmentSource&&this.props.isShowBackButton(!1)}else s.messageType=e.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=e.IsSuccess,s.messageResultDetails[0].errorMessage=e.ErrorList[0],(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:s})}),{autoClose:"success"===s.messageType&&1e4})}));break;case C.fY.ViewShipment_ViewLoadingDetails:this.handleViewLoadingDetails(t.ShipmentCode,this.state.selectedShareholder,this.props.tokenDetails.tokenInfo,(e=>{if(!0===e.IsSuccess){let s=e.EntityResult,i=[];if(null!==s&&null!==s.Table&&s.Table.length>0){let e=0;s.Table.forEach((t=>{t.seqNo=e,t.endtime=new Date(t.endtime).toLocaleDateString()+" "+new Date(t.endtime).toLocaleTimeString(),t.starttime=new Date(t.starttime).toLocaleDateString()+" "+new Date(t.starttime).toLocaleTimeString(),e++,t.productcode=t.productcode.split("&nbsp;").join(" ")}))}null!==s&&null!==s.Table1&&s.Table1.length>0&&(i=s.Table1[0].NonConfiguredColumns.split(","));var{operationsVisibilty:t}={...this.state};t.add=!1,t.delete=!1,this.setState({operationsVisibilty:t,modViewLoadingDetails:s,isViewLoadingDetails:!0,nonConfigColumns:i}),void 0!==this.props.shipmentSource&&this.props.isShowBackButton(!1)}else s.messageType=e.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=e.IsSuccess,s.messageResultDetails[0].errorMessage=e.ErrorList[0],(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:s})}),{autoClose:"success"===s.messageType&&1e4})}));break;case C.fY.ViewAllShipment_SealCompartments:this.handleSealCompartments(t.ShipmentCode,this.state.selectedShareholder,this.props.tokenDetails.tokenInfo,(e=>{s.messageType=e.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=e.IsSuccess,!0===e.IsSuccess?this.setState({isSealCompartments:!0,sealCompartments:e.EntityResult}):(s.messageResultDetails[0].errorMessage=e.ErrorList[0],(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:s})}),{autoClose:"success"===s.messageType&&1e4}))}));break;case"ViewAllocateBay_AllocateBay":this.getBays();break;case"ViewAllocateBay_DeallocateBay":this.setState({isDeAllocateBay:!0});break;default:return}},this.getBays=()=>{let e=w().cloneDeep(this.state.shipment),t=[];e.ShipmentCompartments.forEach((e=>{t.push(e.FinishedProductCode)}));const s={ShareHolderCode:this.state.selectedShareholder,KeyCodes:[{key:"TransactionType",value:"SHIPMENT"},{key:"TransportationType",value:"ROAD"},{key:"TerminalCode",value:this.state.shipment.ActualTerminalCode},{key:"FinishedProductCode",value:t.toString()}]};D()(S.Fkg,m.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=t.EntityResult;e.forEach((e=>{e.SupportedProducts.forEach((t=>{""===e.AssociatedProduct||void 0===e.AssociatedProduct?e.AssociatedProduct=t.Code:e.AssociatedProduct+=","+t.Code}))})),this.setState({bayData:e,isAllocateBay:!0})}else this.setState({bayData:[],isAllocateBay:!0}),console.log("Error in getBays:",t.ErrorList)})).catch((e=>{this.setState({bayData:[],isReadyToRender:!0}),console.log("Error while getBays:",e)}))},this.handleRowClick=e=>{try{let{operationsVisibilty:s,activityInfo:i}={...this.state},a=i.filter((e=>e.ActivityCode===C.Ch.SHIPMENT_ENABLE_DELETE&&e.ActionTypeCode===C.Gd.CHECK));var t=[];void 0!==a&&a.length>0&&(t=a[0].ShipmentStates),s.add=this.state.popUpContent.length>0;let o="";e.ViewShipmentStatus_ShipmentType===C.Pm.COMPARTMENT&&(o=p.de,s.delete=!this.props.userDetails.EntityResult.IsWebPortalUser&&(t.indexOf(e.ViewShipmentStatus_ShipmentStatus.toUpperCase())>-1&&m.ab(this.props.userDetails.EntityResult.FunctionsList,p.i.remove,p.de))),e.ViewShipmentStatus_ShipmentType===C.Pm.PRODUCT&&(o=p.yu,s.delete=!this.props.userDetails.EntityResult.IsWebPortalUser&&(t.indexOf(e.ViewShipmentStatus_ShipmentStatus.toUpperCase())>-1&&m.ab(this.props.userDetails.EntityResult.FunctionsList,p.i.remove,p.yu))),s.shareholder=!1,void 0!==this.props.shipmentSource&&this.props.isShowBackButton(!1),this.setState({isDetails:!0,selectedRow:e,selectedItems:[e],operationsVisibilty:s,shipmentType:o})}catch(s){console.log("TruckShipmentComposite:Error occured on Row click",s)}},this.handleDelete=()=>{try{var{operationsVisibilty:e}={...this.state};e.delete=!1,this.setState({operationsVisibilty:e});for(var t=[],s=0;s<this.state.selectedItems.length;s++){var i=this.state.selectedShareholder,a=this.state.selectedItems[s].Common_Code,o=this.state.selectedItems[s].ViewShipmentStatus_ShipmentType,l={keyDataCode:0,ShareHolderCode:i,KeyCodes:[{Key:E.yz,Value:a},{Key:E.Pm,Value:o}]};t.push(l)}D()(S.aAA,m.tW(t,this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data,i=s.IsSuccess;null!==s.ResultDataList&&void 0!==s.ResultDataList&&(i=s.ResultDataList.filter((function(e){return!e.IsSuccess})).length!==s.ResultDataList.length);var a=m.Cy(s,"Shipment_DeletionStatus",["ShipmentCode"]);i?(this.setState({isReadyToRender:!1}),this.handleAuthenticationClose(),this.getShipmentList(this.state.selectedShareholder),this.getKPIList(this.state.selectedShareholder),e.delete=!1,this.setState({selectedItems:[],operationsVisibilty:e,selectedRow:{}}),this.handleAuthenticationClose()):(e.delete=!0,this.setState({operationsVisibilty:e}),this.handleAuthenticationClose()),a.messageResultDetails.forEach((e=>{e.keyFields.length>0&&(e.keyFields[0]="ShipmentByCompartmentList_ShipmentCode")})),(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:a})}),{autoClose:"success"===a.messageType&&1e4})})).catch((e=>{console.log("TruckShipmentComposite:Error occured on handleDelete",e);var{operationsVisibilty:t}={...this.state};t.delete=!0,this.setState({operationsVisibilty:t}),this.handleAuthenticationClose()}))}catch(n){console.log("TruckShipmentComposite:Error occured on handleDelete",n)}},this.savedEvent=(e,t,s)=>{try{let{operationsVisibilty:o,activityInfo:l}={...this.state},n=l.filter((e=>e.ActivityCode===C.Ch.SHIPMENT_ENABLE_DELETE&&e.ActionTypeCode===C.Gd.CHECK));var i=[];if(void 0!==n&&n.length>0&&(i=n[0].ShipmentStates),"success"===s.messageType&&(o.add=this.state.popUpContent.length>0,o.delete=!this.props.userDetails.EntityResult.IsWebPortalUser&&(i.indexOf(e.Status.toUpperCase())>-1&&m.ab(this.props.userDetails.EntityResult.FunctionsList,p.i.remove,0===e.ShipmentType?p.de:p.yu)),this.setState({isDetailsModified:!0,operationsVisibilty:o})),"success"===s.messageType&&"add"===t){var a=[{Common_Code:e.ShipmentCode,Common_Shareholder:this.state.selectedShareholder,ViewShipmentStatus_ShipmentType:0===e.ShipmentType?C.Pm.COMPARTMENT:C.Pm.PRODUCT}];this.setState({selectedItems:a})}(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:s})}),{autoClose:"success"===s.messageType&&1e4})}catch(o){console.log("TruckShipmentComposite:Error occured on savedEvent",o)}},this.handleBack=()=>{try{if(void 0!==this.props.shipmentSource&&this.props.shipmentSourceFromSummary){let e={...this.state.operationsVisibilty};e.add=this.state.popUpContent.length>0,e.delete=!1,e.shareholder=!0,this.setState({isManualEntry:!1,isViewAuditTrail:!1,isDetails:!1,selectedRow:{},selectedItems:[],operationsVisibilty:e,isViewLoadingDetails:!1,isSealCompartments:!1,drawerStatus:!1,isGoBackToSource:!0,isReadyToRender:!1})}else{let e={...this.state.operationsVisibilty};e.add=this.state.popUpContent.length>0,e.delete=!1,e.shareholder=!0,this.setState({isManualEntry:!1,isViewAuditTrail:!1,isDetails:!1,selectedRow:{},selectedItems:[],operationsVisibilty:e,isViewLoadingDetails:!1,isSealCompartments:!1,drawerStatus:!1,isReadyToRender:!1}),this.getShipmentList(this.state.selectedShareholder),this.getKPIList(this.state.selectedShareholder),this.props.isShowBackButton(!0)}}catch(e){console.log("TruckShipmentComposite:Error occured on Back click",e)}},this.handleRangeSelect=e=>{let{to:t,from:s}=e;void 0!==t&&this.setState({toDate:t}),void 0!==s&&this.setState({fromDate:s})},this.RecordTareWeight=()=>{try{var e=[{key:E.bW,value:this.state.weighBridgeCode},{key:E.VA,value:this.state.scadaValue},{key:E.ok,value:this.state.shipment.VehicleCode},{key:E.yz,value:this.state.shipment.ShipmentCode},{key:E.Rb,value:this.state.allowOutofRangeTW}];let s={messageType:"critical",message:"ViewAllShipment_Record_Weight",messageResultDetails:[{keyFields:["ShipmentCompDetail_ShipmentNumber"],keyValues:[this.state.shipment.ShipmentCode],isSuccess:!1,errorMessage:""}]};var t={ShareHolderCode:this.state.selectedShareholder,keyDataCode:E.bW,KeyCodes:e};D()(S.wVD,m.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{s.messageType=e.data.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=e.data.IsSuccess,e.data.IsSuccess&&this.setState({isRecordWeight:!1},(()=>{this.getShipmentList(this.state.selectedShareholder)})),s.messageResultDetails[0].errorMessage=e.data.ErrorList[0],(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:s})}),{autoClose:"success"===s.messageType&&1e4})})).catch((e=>{console.log("Error while recording tare weight:",e)}))}catch(s){console.log("Error in GetScadaValue")}},this.getScadaValue=()=>{try{var e=[{key:E.bW,value:this.state.weighBridgeCode}],t={ShareHolderCode:this.state.selectedShareholder,keyDataCode:E.bW,KeyCodes:e};D()(S.$E2,m.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{let t={messageType:"critical",message:"ViewAllShipment_Record_Weight",messageResultDetails:[{keyFields:["ShipmentCompDetail_ShipmentNumber"],keyValues:[this.state.shipment.ShipmentCode],isSuccess:!1,errorMessage:""}]};t.messageType=e.data.IsSuccess?"success":"critical",t.messageResultDetails[0].isSuccess=e.data.IsSuccess,e.data.IsSuccess?this.setState({scadaValue:e.data.EntityResult}):(t.messageResultDetails[0].errorMessage=e.data.ErrorList[0],(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:t})}),{autoClose:"success"===t.messageType&&1e4}))})).catch((e=>{console.log("Error while getting weigh brdige Scada value:",e)}))}catch(s){console.log("Error in GetScadaValue")}},this.handleStatus=e=>e===C.bw.EMPTY?"EMPTY":e===C.bw.LOADING?"LOADING":e===C.bw.PART_FILLED?"PART_FILLED":e===C.bw.OVER_FILLED?"OVER_FILLED":e===C.bw.FORCE_COMPLETED?"FORCE_COMPLETED":e===C.bw.COMPLETED?"COMPLETED":e===C.bw.INTERRUPTED?"INTERRUPTED":"",this.getSiteConfigurationLookUP=()=>{try{D()(S.xAA+"?LookUpTypeCode=SiteConfiguration",m.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;if(!0===t.IsSuccess){let e=t.EntityResult;this.getWeighBridge(e)}else console.log("Error in getSiteConfigurationLookUP: ",t.ErrorList)})).catch((e=>{console.log("TruckShipmentComposite: Error occurred on getSiteConfigurationLookUP",e)}))}catch(e){console.log("TruckShipmentComposite: Error occurred on getSiteConfigurationLookUP",e)}},this.handleRecordWeight=()=>(0,r.jsx)(I.TranslationConsumer,{children:e=>(0,r.jsxs)(j.Modal,{open:this.state.isRecordWeight,size:"small",children:[(0,r.jsxs)(j.Modal.Content,{children:[(0,r.jsx)("div",{className:"col col-lg-12",children:(0,r.jsx)("h3",{children:e("ViewAllShipment_RecordWeightShipment")+" : "+this.state.shipment.ShipmentCode})}),(0,r.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,r.jsx)("div",{className:"col col-lg-9",children:(0,r.jsx)(j.Select,{fluid:!0,placeholder:e("Select_WB"),label:e("ViewShipment_WeighBridgeCode"),value:this.state.weighBridgeCode,options:m.Zj(this.state.recordWeightList),onChange:e=>{this.setState({weighBridgeCode:e},(()=>this.getScadaValue()))}})}),(0,r.jsx)("div",{className:"shipmentRecordWeightButtonDiv",children:(0,r.jsx)(j.Button,{type:"primary",size:"small",className:"shipmentRecordWeightButton",content:e("ViewShipment_ReadWeight"),onClick:()=>this.getScadaValue(),disabled:null===this.state.weighBridgeCode||""===this.state.weighBridgeCode||void 0===this.state.weighBridgeCode})})]}),(0,r.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:(0,r.jsx)("div",{className:"col col-lg-12",children:(0,r.jsx)(j.Input,{fluid:!0,value:this.state.scadaValue,label:e("ViewShipment_Weight"),reserveSpace:!1,disabled:!0})})}),(0,r.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:(0,r.jsx)("div",{className:"col col-lg-12",children:(0,r.jsx)(j.Checkbox,{className:"LabelEnabled",label:e("Allow_Out_of_Tolerance_for_TW"),checked:this.state.allowOutofRangeTW,onChange:e=>{this.setState({allowOutofRangeTW:e})},disabled:!1})})})]}),(0,r.jsxs)(j.Modal.Footer,{children:[(0,r.jsx)(j.Button,{type:"primary",className:"shipmentRecordWeightOtherbuttons",content:e("ViewShipment_RecordTareWeight"),onClick:()=>this.RecordTareWeight(),disabled:null===this.state.scadaValue||""===this.state.scadaValue||void 0===this.state.scadaValue}),(0,r.jsx)(j.Button,{type:"primary",content:e("ViewShipment_RecordLadenWeight"),className:"shipmentRecordWeightOtherbuttons",onClick:()=>this.getSiteConfigurationLookUP(),disabled:null===this.state.scadaValue||""===this.state.scadaValue||void 0===this.state.scadaValue}),(0,r.jsx)(j.Button,{type:"primary",content:e("Cancel"),className:"shipmentRecordWeightOtherbuttons",onClick:()=>{this.setState({isRecordWeight:!1,weighBridgeCode:"",scadaValue:""})}})]})]})}),this.handleDateTextChange=(e,t)=>{""===e&&this.setState({dateError:"",toDate:"",fromDate:""}),null!==t&&""!==t?this.setState({dateError:"Common_InvalidDate",toDate:"",fromDate:""}):this.setState({dateError:"",toDate:e.to,fromDate:e.from})},this.handleLoadOrders=()=>{let e=m.wb(this.state.toDate,this.state.fromDate);""!==e?this.setState({dateError:e}):(this.setState({dateError:""}),this.getShipmentList(this.state.selectedShareholder))},this.onBack=()=>{let e={...this.state.operationsVisibilty};e.add=this.state.popUpContent.length>0,e.shareholder=!0,this.setState({isManualEntry:!1,isViewAuditTrail:!1,isDetails:!1,isViewLoadingDetails:!1,operationsVisibilty:e,loadingExpandedRows:[],isReadyToRender:!1}),void 0!==this.props.shipmentSource&&this.props.isShowBackButton(!0),this.getShipmentList(this.state.selectedShareholder)},this.toggleExpand=(e,t)=>{let s=this.state.loadingExpandedRows,i=s.findIndex((t=>t.seqNo===e.seqNo));t?s.splice(i,1):s.push(e),this.setState({loadingExpandedRows:s})},this.handleDrawer=()=>{var e=w().cloneDeep(this.state.drawerStatus);this.setState({drawerStatus:!e})},this.handlePopUpClick=()=>{this.state.operationsVisibilty.add&&this.state.popUpContent.length>0&&(!1===this.state.popUpOpen?this.setState({popUpOpen:!0}):this.setState({popUpOpen:!1}))},this.popUpMenuClick=e=>{this.setState({popUpOpen:!1}),this.handleAdd(e)},this.authenticateDelete=()=>{try{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showDeleteAuthenticationLayout:e}),!1===e&&this.handleDelete()}catch(e){console.log("Shipment Composite : Error in authenticateDelete")}},this.handleAuthenticationClose=()=>{this.setState({showDeleteAuthenticationLayout:!1,showAuthorizeToLoadAuthenticationLayout:!1,showAllowToLoadAuthenticationLayout:!1,showCloseShipmentAuthenticationLayout:!1,showViewBOLAuthenticationLayout:!1,showPrintBOLAuthenticationLayout:!1,showFANAuthenticationLayout:!1})},this.confirmAllocateBay=()=>{let e=w().cloneDeep(this.state.bayData);return(0,r.jsx)(I.TranslationConsumer,{children:t=>(0,r.jsxs)(j.Modal,{open:this.state.isAllocateBay,size:"small",children:[(0,r.jsxs)(j.Modal.Content,{children:[(0,r.jsx)("div",{className:"col col-lg-12",children:(0,r.jsxs)("h3",{children:[t("ViewAllocateBay_AllocateBay")," -"," ",this.state.shipment.ShipmentCode]})}),(0,r.jsx)("div",{className:"col-12 detailsTable",children:(0,r.jsxs)(F.bQ,{className:"iconblock",data:e,selection:this.state.selectBay,selectionMode:"single",showHeader:!0,onSelectionChange:e=>this.setState({selectBay:e}),rows:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,resizableColumns:!0,children:[(0,r.jsx)(F.bQ.Column,{className:"compColHeight compColmiddle",field:"BayCode",header:t("ViewAllocateBay_BayCode"),editable:!1}),(0,r.jsx)(F.bQ.Column,{className:"compColHeight compColmiddle",field:"AssociatedProduct",header:t("ViewAllocateBay_FinishProduct"),editable:!1}),(0,r.jsx)(F.bQ.Column,{className:"compColHeight compColmiddle",field:"CurrentQueue",header:t("ViewAllocateBay_CurrentQueue"),editable:!1}),(0,r.jsx)(F.bQ.Column,{className:"compColHeight compColmiddle",field:"MaximumQueue",header:t("ViewAllocateBay_MaximumQueue"),editable:!1}),Array.isArray(e)&&e.length>this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize?(0,r.jsx)(F.bQ.Pagination,{}):""]})})]}),(0,r.jsxs)(j.Modal.Footer,{children:[(0,r.jsx)(j.Button,{type:"primary",content:t("MarineEOD_Close"),className:"cancelButton",onClick:()=>this.setState({isAllocateBay:!1})}),(0,r.jsx)(j.Button,{type:"primary",content:t("ViewAllocateBay_Allocate"),onClick:()=>{if(null===this.state.selectBay||void 0===this.state.selectBay||0===this.state.selectBay.length){let e={messageType:"critical",message:"ViewAllocateBay_Allocate",messageResultDetails:[{keyFields:["BayCode"],keyValues:[],isSuccess:!1,errorMessage:"ViewAllocateBay_bayrequired"}]};(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:e})}),{autoClose:"success"===e.messageType&&1e4})}else this.AllocateBay(this.state.shipment.ShipmentCode,this.state.selectBay[0].BayCode,"SHIPMENT")}})]})]})})},this.confirmDeAllocateBay=()=>(0,r.jsx)(I.TranslationConsumer,{children:e=>(0,r.jsxs)(j.Modal,{open:this.state.isDeAllocateBay,size:"small",children:[(0,r.jsx)(j.Modal.Content,{children:(0,r.jsx)("div",{className:"col col-lg-12",children:(0,r.jsx)("h5",{children:e("ViewAllocateBay_ConfirmDeallocateBay",[this.state.ShipmentBay,"Shipment"])})})}),(0,r.jsxs)(j.Modal.Footer,{children:[(0,r.jsx)(j.Button,{type:"primary",className:"cancelButton",content:e("Cancel"),onClick:()=>{this.setState({isDeAllocateBay:!1})}}),(0,r.jsx)(j.Button,{type:"primary",content:e("ViewAllocateBay_Deallocate"),onClick:()=>{this.setState({isDeAllocateBay:!1},(()=>{this.DeAllocateBay(this.state.shipment.ShipmentCode,"SHIPMENT",this.state.ShipmentBay)}))}})]})]})})}populatePopupContents(){let e=[...this.state.popUpContent],t=m.ab(this.props.userDetails.EntityResult.FunctionsList,p.i.add,p.de),s=m.ab(this.props.userDetails.EntityResult.FunctionsList,p.i.add,p.yu);t&&e.push({fieldName:"ShipmentByCompartment",fieldValue:"ContractInfo_ShipByComp"}),s&&e.push({fieldName:"ShipmentByProduct",fieldValue:"ContractInfo_ShipByProduct"});const i={...this.state.operationsVisibilty};i.add=e.length>0,this.setState({popUpContent:e,operationsVisibilty:i})}getTerminalsList(e){try{null!==e&&""!==e?D()(S.Oqv,m.tW([e],this.props.tokenDetails.tokenInfo)).then((e=>{e.data.IsSuccess&&this.setState({terminalCodes:e.data.EntityResult})})):this.setState({terminalCodes:[]})}catch(t){console.log("DestinationComposite:Error occured on getTerminalsList",t)}}getVehicle(e){let t=[{key:E.ok,value:e}],s={ShareHolderCode:this.state.selectedShareholder,keyDataCode:E.ok,KeyCodes:t};D()(S.jvS,m.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;!0===t.IsSuccess?null!==t.EntityResult&&this.setState({vehicleForRecordWeight:t.EntityResult}):(this.setState({vehicleForRecordWeight:{}}),console.log("Error in GetVehicle:",t.ErrorList))})).catch((e=>{this.setState({vehicleForRecordWeight:{}}),console.log("Error while getting Vehicle:",e)}))}GetViewAllShipmentCustomData(e){var t=[{key:E.yz,value:e.ShipmentCode},{key:E.Bw,value:e.Status},{key:E.ok,value:e.VehicleCode}],s={ShareHolderCode:this.state.selectedShareholder,keyDataCode:E.yz,KeyCodes:t};D()(S.QhJ,m.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{e.data.IsSuccess?this.setState({modCustomValues:e.data.EntityResult}):this.setState({modCustomValues:{}})})).catch((t=>{console.log("Error while getting shipment custom details:",t,e)}))}getKPIList(e){if(!0===m.ab(this.props.userDetails.EntityResult.FunctionsList,p.i.view,p.bL)){var t={message:"",messageType:"critical",messageResultDetails:[]};let s={PageName:x.Gh,InputParameters:[{key:"ShareholderCode",value:e}]};D()(S.dxq,m.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var s=e.data;!0===s.IsSuccess?this.setState({truckShipmentKPIList:s.EntityResult.ListKPIDetails}):(this.setState({truckShipmentKPIList:[]}),console.log("Error in truck shipment KPIList:",s.ErrorList),t.messageResultDetails.push({keyFields:[],keyValues:[],isSuccess:!1,errorMessage:s.ErrorList[0]})),t.messageResultDetails.length>0&&(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:t})}),{autoClose:"success"===t.messageType&&1e4})})).catch((e=>{console.log("Error while getting truck shipment KPIList:",e)}))}}getShipment(e){var t=[{key:E.yz,value:e.Common_Code}],s={ShareHolderCode:this.state.selectedShareholder,keyDataCode:E.yz,KeyCodes:t};D()(S.TJ4,m.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data;!0===s.IsSuccess&&this.setState({shipment:s.EntityResult},(()=>{this.getAttributes(),this.getLoadingDetails(e),this.getShipmentStatusOperations(s.EntityResult),this.getShipmentStatuses(e),this.getVehicle(s.EntityResult.VehicleCode),this.GetBayByTrnsaction(s.EntityResult.ShipmentCode,"SHIPMENT",s.EntityResult.ShareholderCode)}))})).catch((t=>{console.log("Error while getting Shipment:",t,e)}))}getLoadingDetails(e){var t=[{key:E.yz,value:e.ShipmentCode}],s={ShareHolderCode:this.state.selectedShareholder,keyDataCode:E.yz,KeyCodes:t};D()(S.MUl,m.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{e.data.IsSuccess?this.setState({staticLoadingDetails:e.data.EntityResult}):this.setState({staticLoadingDetails:[]})})).catch((t=>{console.log("Error while getting Shipment Loading Details:",t,e)}))}getAttributes(){try{D()(S.fKH,m.tW([V.ZN],this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({attributeMetaDataList:w().cloneDeep(t.EntityResult)}):console.log("Failed to get Attributes")}))}catch(e){console.log("Error while getting Attributes:",e)}}getShipmentStatusOperations(e){try{let t={ShareHolderCode:this.state.selectedShareholder,keyDataCode:0,KeyCodes:null,Entity:e};D()(S.DOP,m.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;let s=[];Object.keys(t.EntityResult).forEach((e=>{t.EntityResult[e]&&s.push(e)})),this.setState({shipmentNextOperations:s})})).catch((e=>{console.log("Error while getting getShipmentStatusOperations:",e)}))}catch(t){console.log(t)}}getShipmentStatuses(e){try{D()(S.BpG+"?shCode="+this.state.selectedShareholder+"&shipmentCode="+e.Common_Code+"&shipmentType="+e.ViewShipmentStatus_ShipmentType,m.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;this.setState({currentShipmentStatuses:t.EntityResult})})).catch((e=>{console.log("Error while getting getShipmentStatuses:",e)}))}catch(t){console.log(t)}}componentDidMount(){try{if(m.pJ(this.props.userDetails.EntityResult.IsArchived),this.props.shipmentSourceFromSummary){const e={...this.state.operationsVisibilty};e.shareholder=!1,e.add=!1,this.setState({isDetails:!0,isManualEntry:!1,isViewAuditTrail:!1,isViewLoadingDetails:!1,selectedRow:{},operationsVisibilty:e,shipmentType:this.props.shipmentType,selectedShareholder:this.props.selectedShareholder})}this.populatePopupContents(),this.GetShipmentActivityInfo(),this.getTerminalsList(this.state.selectedShareholder),this.getShipmentList(this.state.selectedShareholder),this.getKPIList(this.state.selectedShareholder),this.getlookupValues()}catch(e){console.log("TruckShipmentComposite:Error occured on ComponentDidMount",e)}window.addEventListener("beforeunload",this.clearStorage)}GetShipmentActivityInfo(){try{D()(S.S_j,m.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{e.data.IsSuccess&&this.setState({activityInfo:e.data.EntityResult})})).catch((e=>{console.log("Error while getting shipment activityInfo:",e)}))}catch(e){console.log("Error in GetShipmentActivityInfo:",e)}}getShipmentList(e){try{this.setState({isReadyToRender:!1});let t={ShareholderCode:e,TransportationType:null,ScheduledFrom:null,ScheduledTo:null,ShipmentType:null,ShipmentFrom:null,ShipmentTypeCode:null};if(void 0!==this.props.shipmentSource)t.ShipmentFrom=this.props.shipmentSource,t.ShipmentType=C.ls.All,t.ShipmentTypeCode=this.props.shipmentSourceCode;else{let e=new Date(this.state.fromDate),s=new Date(this.state.toDate);e.setHours(0,0,0),s.setHours(23,59,59),t.ScheduledFrom=e,t.ScheduledTo=s,t.ShipmentType=C.ls.All,t.ShipmentFrom=C.U6.All}D()(S.I7Y,m.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?(this.props.shipmentSource,this.setState({data:t.EntityResult,isReadyToRender:!0},(()=>{if(!0===this.state.isOperation&&1===this.state.selectedItems.length){let i=this.state.selectedItems[0];var e=t.EntityResult.Table.filter((function(e){return e.Common_Code===i.Common_Code}));if(e.length>0){let{operationsVisibilty:t,activityInfo:i}={...this.state},a=i.filter((e=>e.ActivityCode===C.Ch.SHIPMENT_ENABLE_DELETE&&e.ActionTypeCode===C.Gd.CHECK));var s=[];void 0!==a&&a.length>0&&(s=a[0].ShipmentStates),t.delete=!this.props.userDetails.EntityResult.IsWebPortalUser&&(s.indexOf(e[0].ViewShipmentStatus_ShipmentStatus.toUpperCase())>-1&&m.ab(this.props.userDetails.EntityResult.FunctionsList,p.i.remove,e[0].ViewShipmentStatus_ShipmentType===C.Pm.PRODUCT?p.yu:p.de)),this.setState({selectedItems:e,operationsVisibilty:t}),this.getShipment(e[0])}}}))):(this.setState({data:[],isReadyToRender:!0}),console.log("Error in GetShipmentListForRole:",t.ErrorList))})).catch((e=>{this.setState({data:[],isReadyToRender:!0}),console.log("Error while getting Shipment List:",e)}))}catch(t){this.setState({isReadyToRender:!0}),console.log(t)}}handleAuthorizeToLoad(e,t,s,i){var a=[{key:E.FR,value:t},{key:E.Bw,value:e.Status},{key:E.yz,value:e.ShipmentCode},{key:E.qF,value:e.DriverCode},{key:E.ok,value:e.VehicleCode}],o={ShareHolderCode:t,keyDataCode:E.yz,KeyCodes:a};D()(S.TlJ,m.tW(o,s)).then((e=>{var t=e.data;i(t)})).catch((e=>{console.log("Error while AuthorizeToLoad:",e)}))}getlookupValues(){try{m.ab(this.props.userDetails.EntityResult.FunctionsList,p.i.add,p.de)&&(D()(S.xAA+"?LookUpTypeCode=Contract",m.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess&&this.setState({isContractDisable:"0"!==t.EntityResult.EnableContract})})),D()(S.xAA+"?LookUpTypeCode=Order",m.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess&&this.setState({isOrderDisable:"0"!==t.EntityResult.EnableOrder})})))}catch(e){console.log("TruckShipmentComposite:Error occured on getLookUpData",e)}}handleAllowToLoad(e,t,s,i){var a=[{key:E.FR,value:t},{key:E.Bw,value:e.Status},{key:E.yz,value:e.ShipmentCode},{key:E.qF,value:e.DriverCode}],o={ShareHolderCode:t,keyDataCode:E.yz,KeyCodes:a};D()(S.L0J,m.tW(o,s)).then((e=>{var t=e.data;i(t)})).catch((e=>{console.log("Error while AllowToLoad:",e)}))}formCloseShipmentRequest(){try{let e={topUpDecantApprovalStatus:"",topUpDecantEnabled:"",Remarks:"",listShipmentCompartmentInfo:[],listShipmentLoadingCompData:[]};return e.topUpDecantApprovalStatus=this.state.modCustomValues.TopUpDecantStatusText,e.topUpDecantEnabled=this.state.modCustomValues.EnableTopUpDecant,e.Remarks=this.state.reasonForClosure,e}catch(e){console.log("Error while forming request for closing the shipment:",e)}}handlePrintFAN(e,t,s,i){console.log("handlePrintFAN called...");var a=[{key:E.FR,value:t},{key:E.yz,value:e}],o={ShareHolderCode:t,keyDataCode:E.yz,KeyCodes:a};D()(S.pKs,m.tW(o,s)).then((e=>{var t=e.data;i(t)})).catch((e=>{console.log("Error while handlePrintFAN:",e)}))}handleSendBOL(e,t,s,i){var a=[{key:E.FR,value:t},{key:E.yz,value:e}],o={ShareHolderCode:t,keyDataCode:E.yz,KeyCodes:a};D()(S.wnr,m.tW(o,s)).then((e=>{var t=e.data;i(t)})).catch((e=>{console.log("Error while handleSendBOL:",e)}))}handlePrintBOL(e,t,s,i){var a=[{key:E.FR,value:t},{key:E.yz,value:e}],o={ShareHolderCode:t,keyDataCode:E.yz,KeyCodes:a};D()(S.bX0,m.tW(o,s)).then((e=>{var t=e.data;i(t)})).catch((e=>{console.log("Error while handlePrintBOL:",e)}))}handleBSIOutbound(e,t,s,i){var a=[{key:E.FR,value:t},{key:E.yz,value:e}],o={ShareHolderCode:t,keyDataCode:E.yz,KeyCodes:a};D()(S.pMq,m.tW(o,s)).then((e=>{var t=e.data;i(t)})).catch((e=>{console.log("Error while handleBSIOutbound:",e)}))}handleSealCompartments(e,t,s,i){var a=[{key:E.FR,value:t},{key:E.yz,value:e}],o={ShareHolderCode:t,keyDataCode:E.yz,KeyCodes:a};D()(S.yi_,m.tW(o,s)).then((e=>{var t=e.data;i(t)})).catch((e=>{console.log("Error while handleBSIOutbound:",e)}))}handleViewAuditTrail(e,t,s,i,a){D()(S.J30+"?shCode="+e+"&shipmentCode="+t+"&shipmentType="+s,m.Jm(i)).then((e=>{var t=e.data;a(t)})).catch((e=>{console.log("Error while getting handleViewAuditTrail:",e)}))}handleViewLoadingDetails(e,t,s,i){D()(S.rd1+"?shipmentCode="+e+"&shCode="+t,m.Jm(s)).then((e=>{var t=e.data;i(t)})).catch((e=>{console.log("Error while getting handleViewLoadingDetails:",e)}))}formReadonlyCompAttributes(e,t){let s=[];return null!==t&&void 0!==t&&t.length>0&&t.forEach((e=>{e.attributeMetaDataList.forEach((e=>{s.push({AttributeCode:e.Code,AttributeName:e.DisplayName?e.DisplayName:e.Code,AttributeValue:e.DefaultValue,TerminalCode:e.TerminalCode,IsMandatory:e.IsMandatory,DataType:e.DataType,IsReadonly:e.IsReadonly,MinValue:e.MinValue,MaxValue:e.MaxValue,ValidationFormat:e.ValidationFormat,compSequenceNo:""})}))})),null!==e&&void 0!==e&&e.length>0&&e.forEach((e=>{s.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.ListOfAttributeData.forEach((e=>{t.AttributeCode===e.AttributeCode&&(t.AttributeValue=e.AttributeValue)}))}))})),s}getRecordWeightList(){D()(S.IP6,m.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;this.setState({isRecordWeight:!0,recordWeightList:t.EntityResult})})).catch((e=>{console.log("Error while getting RecordWeightList:",e)}))}renderModal(){let e=null;e=this.props.userDetails.EntityResult.IsArchived?"TM/"+C.mD+"/TMBOL":"TM/"+C.PZ+"/TMBOL";let t={Culture:this.props.userDetails.EntityResult.UICulture,Shareholder:this.state.selectedShareholder,ShipmentCode:1===this.state.selectedItems.length?this.state.selectedItems[0].Common_Code:this.state.selectedRow.Common_Code};return(0,r.jsx)(R.A,{showReport:this.state.showReport,handleBack:this.handleModalBack,handleModalClose:this.handleModalBack,proxyServerHost:S._Oi,reportServiceHost:this.reportServiceURI,filePath:e,parameters:t})}RecordLadenWeight(){try{var e=[{key:E.bW,value:this.state.weighBridgeCode},{key:E.VA,value:this.state.scadaValue},{key:E.ok,value:this.state.shipment.VehicleCode},{key:E.yz,value:this.state.shipment.ShipmentCode},{key:E.Rb,value:this.state.allowOutofRangeTW}];let s={messageType:"critical",message:"ViewAllShipment_Record_Weight",messageResultDetails:[{keyFields:["ShipmentCompDetail_ShipmentNumber"],keyValues:[this.state.shipment.ShipmentCode],isSuccess:!1,errorMessage:""}]};var t={ShareHolderCode:this.state.selectedShareholder,keyDataCode:E.bW,KeyCodes:e};D()(S.eib,m.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{s.messageType=e.data.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=e.data.IsSuccess,e.data.IsSuccess&&this.setState({isRecordWeight:!1},(()=>{this.getShipmentList(this.state.selectedShareholder)})),s.messageResultDetails[0].errorMessage=e.data.ErrorList[0],(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:s})}),{autoClose:"success"===s.messageType&&1e4})})).catch((e=>{console.log("Error while recording laden weight:",e)}))}catch(s){console.log("Error in GetScadaValue")}}getWeighBridge(e){try{var t=[{key:E.bW,value:this.state.weighBridgeCode}],s={keyDataCode:E.bW,KeyCodes:t};D()(S.Swg,m.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data;if(!0===s.IsSuccess){let t=s.EntityResult;this.getLadenWeightData(this.state.vehicleForRecordWeight.TareWeight,this.state.vehicleForRecordWeight.WeightUOM,t.WeightUOM,this.state.vehicleForRecordWeight.MaxLoadableWeight,this.state.scadaValue,e)}else console.log("Error in GetWeighBridge:",s.ErrorList)})).catch((e=>{console.log("Error while GetWeighBridge:",e)}))}catch(i){console.log("Error in get GetWeighBridge",i)}}ValidateLadenWeight(e,t){let s={messageType:"critical",message:"ViewAllShipment_Record_Weight",messageResultDetails:[]};var i=!0;try{let n=t.MinLadenweightQuantityTolerance,h=t.MaxLadenweightQuantityTolerance;var a="",o=0,l=0;if(isNaN(parseFloat(this.state.scadaValue))?(a="MesuredWeight_Improper",i=!1):isNaN(parseFloat(e.ConvertedRegisteredTareWeight))?(a="Improper_Tare_Weight",i=!1):isNaN(parseFloat(e.ConvertedMaxLoadableWeight))?(a="Improper_Max_Weight",i=!1):isNaN(parseFloat(e.ConvertedMeasuredTareWeight))&&(a="TareWeight_Not_Captured",i=!1),!0===i)o=(parseFloat(e.ConvertedMeasuredTareWeight)+parseFloat(e.ConvertedLoadedQty))*parseFloat(n)/100,l=(parseFloat(e.ConvertedMeasuredTareWeight)+parseFloat(e.ConvertedLoadedQty))*parseFloat(h)/100,parseFloat(e.ConvertedLoadedQty)>parseFloat(e.ConvertedMaxLoadableWeight)|parseFloat(this.state.scadaValue)>parseFloat(e.ConvertedMaxLoadableWeight)+parseFloat(e.ConvertedRegisteredTareWeight)?a="ShipmentWeight_GreaterThan_MaxLoadableWeight":parseFloat(this.state.scadaValue)<parseFloat(e.ConvertedMeasuredTareWeight)+parseFloat(e.ConvertedLoadedQty)-o?a="MeasuredWeight_LessThan_ExpectedLoadedWeight":parseFloat(this.state.scadaValue)>parseFloat(e.ConvertedMeasuredTareWeight)+parseFloat(e.ConvertedLoadedQty)+l&&(a="MeasuredWeight_MoreThan_ExpectedLoadedWeight");else if(""!==a&&(s.messageResultDetails.push({keyFields:["ShipmentCompDetail_ShipmentNumber"],keyValues:[this.state.shipment.ShipmentCode],isSuccess:!1,errorMessage:a}),this.setState({isLadenWeightValid:!1})),s.messageResultDetails.length>0)return(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:s})}),{autoClose:"success"===s.messageType&&1e4}),!1;""!==a?this.setState({isLadenWeightValid:!0,ladenWeightError:a}):this.RecordLadenWeight()}catch(a){console.log("Error while validating laden weight : ",a)}return i}getLadenWeightData(e,t,s,i,a,o){let r={};try{D()(S.htF+"?shipmentCode="+this.state.shipment.ShipmentCode+"&shCode="+this.state.selectedShareholder+"&vehicleTareWeight="+e+"&vehicleWeightUOM="+t+"&weightUOM="+s+"&maxLoadableWeight="+i+"&weight="+a,m.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{e.data.IsSuccess&&(r=e.data.EntityResult,this.ValidateLadenWeight(r,o))})).catch((e=>{console.log("Error while getting Shipment trailer weigh data Details:",e,this.state.shipment)}))}catch(l){console.log("Error in getLadenWeightData:",l)}}isNodeEnterpriseOrWebortal(){return!(!this.props.userDetails.EntityResult.IsEnterpriseNode&&!this.props.userDetails.EntityResult.IsWebPortalUser)}getFunctionGroupName(){return!this.state.showDeleteAuthenticationLayout||this.state.shipmentType.toLowerCase()!==p.yu&&this.state.shipmentType.toLowerCase()!==C.Pm.PRODUCT.toLowerCase()?!this.state.showDeleteAuthenticationLayout||this.state.shipmentType.toLowerCase()!==p.de&&this.state.shipmentType.toLowerCase()!==C.Pm.COMPARTMENT.toLowerCase()?this.state.showCloseShipmentAuthenticationLayout?p.d4:this.state.showAllowToLoadAuthenticationLayout||this.state.showAuthorizeToLoadAuthenticationLayout?p.Nm:this.state.showViewBOLAuthenticationLayout||this.state.showPrintBOLAuthenticationLayout?p.PD:this.state.showFANAuthenticationLayout?p.tM:void 0:p.de:p.yu}getDeleteorEditMode(){return this.state.showDeleteAuthenticationLayout?p.i.remove:p.i.modify}handleOperation(){return this.state.showDeleteAuthenticationLayout?this.handleDelete:this.state.showAuthorizeToLoadAuthenticationLayout?this.authorizeToLoad:this.state.showAllowToLoadAuthenticationLayout?this.ConfirmedAllowToLoad:this.state.showCloseShipmentAuthenticationLayout?this.handleShipmentClose:this.state.showFANAuthenticationLayout?this.printFAN:this.state.showViewBOLAuthenticationLayout?this.handleViewBOL:this.state.showPrintBOLAuthenticationLayout?this.printBOL:void 0}GetBayByTrnsaction(e,t,s){var i={ShareHolderCode:s,KeyCodes:[{key:E.yz,value:e},{key:E.D_,value:t}]};D()(S.nfn,m.tW(i,this.props.tokenDetails.tokenInfo),m.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;t.IsSuccess&&this.setState({ShipmentBay:t.EntityResult.BayCode})})).catch((e=>{console.log("Error while GetBayByTrnsaction:",e)}))}AllocateBay(e,t,s){var i=[{key:E.yz,value:e},{key:E.Kz,value:t},{key:E.EW,value:s}],a={ShareHolderCode:this.state.selectedShareholder,keyDataCode:E.yz,KeyCodes:i};let o={messageType:"critical",message:"BayAllocation_SaveStatus",messageResultDetails:[{keyFields:["BayCode"],keyValues:[t],isSuccess:!1,errorMessage:""}]};D()(S.AiH,m.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;o.messageType=t.IsSuccess?"success":"critical",o.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?(this.getShipmentList(this.state.selectedShareholder),this.setState({isAllocateBay:!1})):o.messageResultDetails[0].errorMessage=t.ResultDataList[0].ErrorList[0],(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:o})}),{autoClose:"success"===o.messageType&&1e4})})).catch((e=>{console.log("Error while AllocateBay:",e)}))}DeAllocateBay(e,t,s){var i=[{key:E.yz,value:e},{key:E.EW,value:t}],a={ShareHolderCode:this.state.selectedShareholder,KeyCodes:i};let o={messageType:"critical",message:"BayDeAllocation_SavedStatus",messageResultDetails:[{keyFields:["BayCode"],keyValues:[s],isSuccess:!1,errorMessage:""}]};D()(S.viJ,m.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;o.messageType=t.IsSuccess?"success":"critical",o.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?this.getShipmentList(this.state.selectedShareholder):o.messageResultDetails[0].errorMessage=t.ErrorList[0],(0,u.toast)((0,r.jsx)(d.A,{children:(0,r.jsx)(y.A,{notificationMessage:o})}),{autoClose:"success"===o.messageType&&1e4})})).catch((e=>{console.log("Error while DeAllocateBay:",e)}))}render(){const e=[{fieldName:"DriverInfo_LastUpdated",fieldValue:new Date(this.state.shipment.LastUpdatedTime).toLocaleDateString()+" "+new Date(this.state.shipment.LastUpdatedTime).toLocaleTimeString()},{fieldName:"DriverInfo_LastActive",fieldValue:void 0!==this.state.shipment.LastActiveTime&&null!==this.state.shipment.LastActiveTime?new Date(this.state.shipment.LastActiveTime).toLocaleDateString()+" "+new Date(this.state.shipment.LastActiveTime).toLocaleTimeString():""},{fieldName:"DriverInfo_CreatedTime",fieldValue:new Date(this.state.shipment.CreatedTime).toLocaleDateString()+" "+new Date(this.state.shipment.CreatedTime).toLocaleTimeString()}];let t=!0,s=1===this.state.selectedItems.length,i="globalLoader";return void 0!==this.props.shipmentSource&&""!==this.props.shipmentSource&&null!==this.props.shipmentSource&&(t=!1,i="nestedList"),(0,r.jsxs)("div",{children:[void 0===this.props.shipmentSource||""===this.props.shipmentSource||null===this.props.shipmentSource?(0,r.jsx)(d.A,{children:(0,r.jsx)(h.$,{operationsVisibilty:this.state.operationsVisibilty,breadcrumbItem:this.props.activeItem,shareholders:this.props.userDetails.EntityResult.ShareholderList,selectedShareholder:this.state.selectedShareholder,onShareholderChange:this.handleShareholderSelectionChange,onDelete:this.authenticateDelete,onAdd:this.handleAdd,popUpContent:this.state.popUpContent.length>0?this.state.popUpContent:[],handleBreadCrumbClick:this.props.handleBreadCrumbClick})}):(0,r.jsx)(r.Fragment,{children:this.state.isDetails?"":(0,r.jsx)(r.Fragment,{children:this.state.isGoBackToSource?null:(0,r.jsx)(I.TranslationConsumer,{children:e=>(0,r.jsx)("div",{className:"headerContainer",children:(0,r.jsxs)("div",{className:"row headerSpacing",children:[(0,r.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,r.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:this.props.shipmentSourceCode+" - "+e("Shipment_OtherSource")})}),(0,r.jsx)("div",{className:"headerItemRight",children:(0,r.jsx)(j.Popup,{element:(0,r.jsx)("div",{children:(0,r.jsx)(j.Button,{type:"primary",content:e("Add_Shipment"),disabled:this.props.shipmentSource===C.U6.Contract?!this.state.isContractDisable:this.props.shipmentSource===C.U6.Order&&!this.state.isOrderDisable,onClick:this.handlePopUpClick})}),on:"click",open:this.state.popUpOpen,children:(0,r.jsx)("div",{onMouseLeave:()=>this.setState({popUpOpen:!1}),children:(0,r.jsx)(j.VerticalMenu,{style:{textAlign:"right"},children:(0,r.jsxs)(j.VerticalMenu,{children:[(0,r.jsx)(j.VerticalMenu.Header,{children:e("Common_Create")}),this.state.popUpContent.map((t=>(0,r.jsx)(j.VerticalMenu.Item,{onClick:()=>this.popUpMenuClick(t.fieldName),children:e(t.fieldValue)})))]})})})})})]})})})})}),this.state.isGoBackToSource?(0,r.jsx)(d.A,{children:this.props.shipmentSource===C.U6.Order?(0,r.jsx)(P.default,{shipmentSource:this.props.shipmentSource}):this.props.shipmentSource===C.U6.Contract?(0,r.jsx)(N.default,{shipmentSource:this.props.shipmentSource,activeItem:this.props.activeItem}):null}):"",this.state.isDetails&&this.state.shipmentType?(0,r.jsx)(d.A,{children:(0,r.jsx)(f.default,{selectedRow:this.state.selectedRow,onBack:this.handleBack,onSaved:this.savedEvent,terminalCodes:this.state.terminalCodes,selectedShareholder:this.state.selectedShareholder,ShipmentType:this.state.shipmentType,handleAuthorizeToLoad:this.handleAuthorizeToLoad,handleAllowToLoad:this.handleAllowToLoad,handleViewAuditTrail:this.handleViewAuditTrail,handleViewLoadingDetails:this.handleViewLoadingDetails,handlePrintFAN:this.handlePrintFAN,handlePrintBOL:this.handlePrintBOL,handleSendBOL:this.handleSendBOL,handleBSIOutbound:this.handleBSIOutbound,handleSealCompartments:this.handleSealCompartments,handleViewBOL:this.handleViewBOL,shipmentSource:this.props.shipmentSource,shipmentSourceCode:this.props.shipmentSourceCode,shipmentSourceCompartmentItems:this.props.shipmentSourceCompartmentItems,shipmentSourceDetails:this.props.shipmentSourceDetails,shipmentSourceFromSummary:this.props.shipmentSourceFromSummary,selectedSourceCode:this.props.selectedSourceCode},"ShipmentDetails")}):(0,r.jsx)("div",{children:this.state.isViewAuditTrail?(0,r.jsx)(d.A,{children:(0,r.jsx)(T.I,{ShipmentCode:this.state.selectedItems[0].Common_Code,auditTrailList:this.state.auditTrailList,modAuditTrailList:this.state.modAuditTrailList,Attributes:void 0!==this.state.auditTrailList&&this.state.auditTrailList.length>0?this.state.auditTrailList[0].AttributesforUI:[],handleBack:this.onBack})}):this.state.isViewLoadingDetails?(0,r.jsx)(d.A,{children:(0,r.jsx)(k.f,{ShipmentCode:this.state.selectedItems[0].Common_Code,modLoadingDetails:this.state.modViewLoadingDetails,handleBack:this.onBack,expandedRows:this.state.loadingExpandedRows,toggleExpand:this.toggleExpand,nonConfigColumns:this.state.nonConfigColumns})}):this.state.isManualEntry?(0,r.jsxs)(d.A,{children:[(0,r.jsx)(I.TranslationConsumer,{children:t=>(0,r.jsx)(L.A,{entityCode:this.state.shipment.ShipmentCode+" - "+t("LoadingDetailsEntry_Title"),popUpContents:e})}),(0,r.jsx)(n.default,{shipment:this.state.shipment,handleBack:this.onBack,selectedShareholder:this.state.selectedShareholder})]}):(0,r.jsxs)("div",{children:[void 0===this.props.shipmentSource||""===this.props.shipmentSource||null===this.props.shipmentSource?(0,r.jsx)(d.A,{children:(0,r.jsx)("div",{className:"kpiSummaryContainer",children:(0,r.jsx)(O.A,{kpiList:this.state.truckShipmentKPIList,pageName:"TruckShipment"})})}):"",(0,r.jsx)("div",{className:s&&Array.isArray(this.state.shipment.ShipmentCompartments)&&this.state.shipment.ShipmentCompartments.length>0?this.state.drawerStatus?"drawerClose":"showShipmentStatusRightPane":"",children:void 0===this.props.shipmentSourceFromSummary||""===this.props.shipmentSourceFromSummary||null===this.props.shipmentSourceFromSummary?(0,r.jsxs)("div",{children:[(0,r.jsx)(d.A,{children:void 0===this.props.shipmentSource?(0,r.jsx)("div",{children:(0,r.jsx)(b.L,{dateRange:{from:this.state.fromDate,to:this.state.toDate},dateError:this.state.dateError,handleDateTextChange:this.handleDateTextChange,handleRangeSelect:this.handleRangeSelect,handleLoadOrders:this.handleLoadOrders,filterText:"LoadShipments"})}):null}),this.state.isReadyToRender?(0,r.jsx)(d.A,{children:(0,r.jsx)("div",{className:!0===t?"compositeTransactionList":"",children:(0,r.jsx)(l,{tableData:this.state.data.Table,columnDetails:this.state.data.Column,pageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,exportRequired:!0,exportFileName:"TruckShipmentList",columnPickerRequired:!0,terminalsToShow:this.props.userDetails.EntityResult.PageAttibutes.NoOfTerminalsToShow,selectionRequired:!0,columnGroupingRequired:!0,onSelectionChange:this.handleSelection,onRowClick:this.handleRowClick,fillPage:t,parentComponent:this.componentName,selectedItems:this.state.selectedItems})})}):(0,r.jsx)(c.A,{loadingClass:i,message:""})]}):""}),s&&Array.isArray(this.state.shipment.ShipmentCompartments)&&this.state.shipment.ShipmentCompartments.length>0?(0,r.jsx)("div",{className:this.state.drawerStatus?"marineStatusLeftPane":"",children:(0,r.jsx)(A.A,{selectedItem:this.state.selectedItems,shipmentNextOperations:this.state.shipmentNextOperations,handleDetailsPageClick:this.handleRowClick,handleOperationButtonClick:this.handleOperationClick,currentStatuses:this.state.currentShipmentStatuses,unAllowedOperations:["ManualEntry","ViewShipment_AuthorizeLoad","ViewShipment_AllowToLoad","ViewShipment_RecordWeight","ViewAllocateBay_AllocateBay","ViewAllocateBay_DeallocateBay","ViewShipment_CloseShipment","ViewShipmentStatus_PrintFAN"],webPortalAllowedOperations:["ViewShipment_ViewLoadingDetails","ViewShipmentStatus_ViewBOL","ViewShipment_ViewAuditTrail"],isWebPortalUser:this.props.userDetails.EntityResult.IsWebPortalUser,isDetails:!1,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,handleDrawer:this.handleDrawer,title:"ViewAllShipment_Details"})}):""]})}),Object.keys(this.state.selectedRow).length>0||1===this.state.selectedItems.length?this.renderModal():"",this.state.showDeleteAuthenticationLayout||this.state.showAllowToLoadAuthenticationLayout||this.state.showAuthorizeToLoadAuthenticationLayout||this.state.showCloseShipmentAuthenticationLayout||this.state.showViewBOLAuthenticationLayout||this.state.showPrintBOLAuthenticationLayout||this.state.showFANAuthenticationLayout?(0,r.jsx)(_.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:this.getDeleteorEditMode(),functionGroup:this.getFunctionGroupName(),handleClose:this.handleAuthenticationClose,handleOperation:this.handleOperation()}):null,void 0===this.props.shipmentSource?(0,r.jsx)(d.A,{children:(0,r.jsx)(u.ToastContainer,{hideProgressBar:!0,closeOnClick:!1,closeButton:!0,newestOnTop:!0,position:"bottom-right",toastClassName:"toast-notification-wrap"})}):"",this.state.isRecordWeight?this.handleRecordWeight():null,this.state.isSealCompartments?(0,r.jsx)(d.A,{children:(0,r.jsx)(B.default,{transactionCode:this.state.shipment.ShipmentCode,selectedShareholder:this.state.selectedShareholder,sealCompartments:this.state.sealCompartments,handleSealClose:this.handleSealClose})}):null,this.state.isNotRevised?this.confirmAllowToLoad():null,this.state.isCloseShipment?this.handleCloseShipmentModal():null,this.state.isLadenWeightValid?this.confirmRecordLadenWeight():null,this.state.isAllocateBay?this.confirmAllocateBay():null,this.state.isDeAllocateBay?this.confirmDeAllocateBay():null]})}}const U=(0,a.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(M)},15441:(e,t,s)=>{s.d(t,{L:()=>l});s(65043);var i=s(67907),a=s(72711),o=s(35861),r=s(70579);function l(e){let{handleDateTextChange:t,handleRangeSelect:s,handleLoadOrders:l,dateError:n,dateRange:h,filterText:d}=e;return(0,r.jsx)(i.TranslationConsumer,{children:e=>(0,r.jsxs)("div",{className:"dateRangeContainer",children:[(0,r.jsx)("div",{className:"dateRangeMargin",children:(0,r.jsx)(a.DatePicker,{type:"daterange",closeOnSelection:!0,error:e(n),displayFormat:(0,o.F1)(),rangeValue:h,onTextChange:t,onRangeSelect:s,reserveSpace:!1})}),(0,r.jsx)("div",{className:"dateSearch",children:(0,r.jsx)(a.Button,{content:e(d),onClick:l})})]})})}},73571:(e,t,s)=>{s.d(t,{A:()=>p});s(65043);var i=s(72711),a=s(728),o=s(92569),r=s(47766),l=(s(60663),s(7523)),n=s(97508),h=s(70579);function d(e){let{proxyServerHost:t,reportServiceHost:s,parameters:i,filePath:a,...l}=e;const n=t+"api/report",d=(e,t)=>{const s=t.settings.beforeSend;t.settings.beforeSend=function(t){s&&s(t),l.userDetails.EntityResult.IsWebPortalUser||(t.withCredentials=!0),t.URL_DEBUG.indexOf("parameters")>-1&&(t.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var t=e.hostElement;setTimeout((()=>{var e=t.querySelector(".wj-viewer-splitter"),s=t.querySelector(".wj-viewer-tabsleft").querySelectorAll("li")[2];s.disabled||(s.className="hidden",e.click())}),1e3)}})}};let c={Authorization:"Bearer "+l.tokenDetails.tokenInfo};const u=(e,i)=>{r._ReportService.prototype.load=function(e){var i=this,a=new r._Promise;return this._checkReportController(a)?(this.httpRequest(this._getReportInstancesUrl(),{method:"POST",data:e}).then((function(e){var o=r._parseReportExecutionInfo(e.responseText);i._instanceId=o.id,i._status=r._ExecutionStatus.loaded,i._outlinesLocation=o.outlinesLocation,i._statusLocation=o.statusLocation.replace(s,t),i._pageSettingsLocation=o.pageSettingsLocation,i._featuresLocation=o.featuresLocation,i._parametersLocation=o.parametersLocation,a.resolve(o)}),(function(e){a.reject(i._getError(e))})),a):a}};return(0,h.jsx)("div",{children:l.userDetails.EntityResult.IsWebPortalUser?(0,h.jsx)("div",{children:(0,h.jsx)(o.R,{requestHeaders:c,style:{height:"80vh"},parameters:i,serviceUrl:n,filePath:a,initialized:u,beforeSendRequest:d})}):(0,h.jsx)("div",{children:(0,h.jsx)(o.R,{style:{height:"80vh"},parameters:i,serviceUrl:n,filePath:a,initialized:u,beforeSendRequest:d})})})}d.defaultProps={parameters:{}},a.setLicenseKey(l.yQ);const c=(0,n.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(d);var u=s(67907);function p(e){let{proxyServerHost:t,reportServiceHost:s,filePath:a,handleBack:o,showReport:r,handleModalClose:l,parameters:n}=e;const[d]=(0,u.useTranslation)();return(0,h.jsx)(i.Modal,{style:{padding:"0px"},size:"fullscreen",open:r,children:(0,h.jsxs)("div",{children:[(0,h.jsx)(i.Header,{title:d("Header_TerminalManager"),menu:!1}),(0,h.jsx)(c,{proxyServerHost:t,reportServiceHost:s,filePath:a,parameters:n}),(0,h.jsx)("div",{style:{marginTop:"10px",marginLeft:"20px"},children:(0,h.jsx)(i.Button,{className:"backButton",onClick:o,content:d("Report_Back")})})]})})}p.defaultProps={parameters:{}}},97105:(e,t,s)=>{s.d(t,{S:()=>i});const i={Driver:["License1ExpiryDate","License1IssueDate","License2IssueDate","License2ExpiryDate","License3IssueDate","License3ExpiryDate","HazardousLicenseExpiry"],CarrierCompany:["PermitExpiryDate"],PrimeMover:["RoadTaxNoIssueDate","RoadTaxNoExpiryDate","licenseExpiryDate"],Wagon:["LicenseExpiryDate"],Vehicle:["LicenseNoIssueDate","LicenseNoExpiryDate","RoadTaxNoIssueDate","RoadTaxNoExpiryDate","Bondexpirydate","HazardousLicenseExpiry"],Contract:["StartDate","EndDate"],ContractItem:["StartDate","EndDate"],Order:["OrderStartDate","OrderEndDate","OrderDate","DeliveryDate"],AccessCard:["ExpiryDate","IssueDate","PasswordExpiryDate"],Trailer:["HazardousLicenseExpiry"]}}}]);
//# sourceMappingURL=1295.e2bda2c7.chunk.js.map