(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[944,5841,8222,7980,5599],{52129:(e,t,i)=>{"use strict";i.d(t,{m:()=>d});var o=i(65043),s=i(72711),n=i(67907),r=i(65187),a=i(69062),l=i(70579);function c(e){let{operationsVisibilty:t,breadcrumbItem:i,terminals:c,selectedTerminal:d,onTerminalChange:p,onDelete:u,onAdd:m,popUpContent:h,terminalVisible:g,handleBreadCrumbClick:y,addVisible:C,deleteVisible:S}=e;const[R,E]=(0,o.useState)(!1),[f,x]=(0,o.useState)(!1);function T(){t.add&&(h.length>0?x(!1===f):m())}return(0,l.jsxs)("div",{className:"row",style:{alignItems:"flex-start",padding:"0px"},children:[(0,l.jsx)("div",{className:"col-9 col-sm-9 col-md-9 col-lg-10 col-xl-10",style:{padding:"0px"},children:(0,l.jsxs)("div",{className:"row",style:{marginTop:"10px",alignItems:""},children:[(0,l.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-8",children:(0,l.jsxs)(r.A,{children:[" ",(0,l.jsx)(n.TranslationConsumer,{children:e=>(0,l.jsxs)(s.Breadcrumb,{children:[i.parents.map((t=>(0,l.jsx)(s.Breadcrumb.Item,{onClick:()=>{void 0!==y&&null!==y&&y(t.itemCode,i.parents)},children:e(t.localizedKey)},t.itemCode))),(0,l.jsx)(s.Breadcrumb.Item,{children:e(i.localizedKey)},i.itemCode)]})})]})}),(0,l.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-4",children:(0,l.jsx)(n.TranslationConsumer,{children:e=>(0,l.jsx)("div",{className:"compartmentIcon",style:{justifyContent:"flex-start"},children:!1===g?"":(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{children:(0,l.jsxs)("h4",{className:"shrText",children:[e("Common_Terminal"),":"]})}),(0,l.jsx)("div",{className:"opSelect",children:(0,l.jsx)(s.Select,{placeholder:e("Common_Terminal"),value:d,disabled:!t.terminal,options:a.Zj(c),onChange:e=>p(e)})})]})})})}),(0,l.jsx)(n.TranslationConsumer,{children:e=>(0,l.jsxs)(s.Modal,{open:R,size:"small",children:[(0,l.jsx)(s.Modal.Content,{children:(0,l.jsx)("div",{children:(0,l.jsx)("b",{children:e("Confirm_Delete")})})}),(0,l.jsxs)(s.Modal.Footer,{children:[(0,l.jsx)(s.Button,{type:"secondary",content:e("Cancel"),onClick:()=>E(!1)}),(0,l.jsx)(s.Button,{type:"primary",content:e("PipelineDispatch_BtnSubmit"),onClick:()=>{E(!1),u()}})]})]})})]})}),(0,l.jsx)("div",{className:"col-3 col-sm-3 col-md-3 col-lg-2 col-xl-2",children:(0,l.jsxs)("div",{style:{float:"right",display:"inline-block",marginTop:"10px"},children:[C?(0,l.jsx)(s.Popup,{position:"bottom right",className:"popup-theme-wrap",element:(0,l.jsx)("div",{className:(t.add?"iconCircle ":"iconCircleDisable ")+"iconblock",onClick:T,children:(0,l.jsx)(s.Icon,{root:"common",name:"badge-plus",size:"small",color:"white"})}),on:"click",open:f,children:(0,l.jsx)("div",{onMouseLeave:()=>x(!1),children:(0,l.jsx)(n.TranslationConsumer,{children:e=>(0,l.jsx)(s.VerticalMenu,{children:(0,l.jsxs)(s.VerticalMenu,{children:[(0,l.jsx)(s.VerticalMenu.Header,{children:e("Common_Create")}),h.map((t=>(0,l.jsx)(s.VerticalMenu.Item,{onClick:()=>{return e=t.fieldName,x(!1),void m(e);var e},children:e(t.fieldValue)})))]})})})})}):"",S?(0,l.jsx)("div",{style:{marginLeft:"10px"},onClick:()=>{t.delete&&E(!0)},className:(t.delete?"iconCircle ":"iconCircleDisable ")+"iconblock",children:(0,l.jsx)(s.Icon,{root:"common",name:"delete",size:"small",color:"white"})}):""]})})]})}c.defaultProps={operationsVisibilty:{add:!1,delete:!1,terminal:!1},breadcrumbItem:{itemName:"",itemCode:"",localizedKey:"",itemProps:{},parents:[],isComponent:!1},terminals:[],selectedTerminal:"",popUpContent:[],terminalVisible:!0,addVisible:!0,deleteVisible:!0};i(38726);function d(e){let{operationsVisibilty:t,breadcrumbItem:i,terminals:o,selectedTerminal:s,onTerminalChange:n,onDelete:r,onAdd:a,terminalVisible:d,handleBreadCrumbClick:p,addVisible:u,deleteVisible:m}=e;return(0,l.jsx)(c,{operationsVisibilty:t,breadcrumbItem:i,terminals:o,selectedTerminal:s,onTerminalChange:n,onDelete:r,onAdd:a,terminalVisible:d,handleBreadCrumbClick:p,addVisible:u,deleteVisible:m})}},62900:(e,t,i)=>{"use strict";i.d(t,{A:()=>S});var o=i(65043),s=i(67907),n=i(72711),r=i(72067),a=i(69062),l=i(97508),c=i(44192),d=i(40854),p=i.n(d),u=i(53536),m=i.n(u),h=i(86111),g=i.n(h),y=i(70579);class C extends o.Component{constructor(){super(...arguments),this.state={isPasswordRequired:!1,Password:"",validationErrors:a.Th(c.Qh),authenticationResponse:"",btnAuthenticateEnabled:!0},this.onFieldChange=(e,t)=>{this.setState({Password:t});const i=m().cloneDeep(this.state.validationErrors);void 0!==c.Qh[e]&&(i[e]=a.jr(c.Qh[e],t),this.setState({validationErrors:i,authenticationResponse:""}))},this.validatePassword=e=>{this.setState({btnAuthenticateEnabled:!1});const t={...this.state.validationErrors};null!==e&&""!==e||(t.Password="UserValidationForm_ReqfldValPassword"),this.setState({validationErrors:t});var i=!0;return i&&(i=Object.values(t).every((function(e){return""===e}))),i},this.onCloseClick=()=>{this.setState({isPasswordRequired:!1,authenticationResponse:"",btnAuthenticateEnabled:!0},(()=>this.props.handleClose()))},this.AuthenticateUser=()=>{if(this.validatePassword(this.state.Password)){this.setState({authenticationResponse:""});try{var e=this.state.Password,t=this.props.Username,i=g().lib.WordArray.random(16),o=g().PBKDF2(t,i,{keySize:8,iterations:100}),s=g().lib.WordArray.random(16),n=g().AES.encrypt(e,o,{iv:s,padding:g().pad.Pkcs7,mode:g().mode.CBC}),l=i.toString()+s.toString()+n.toString();p()(r.KrY+"?encryptedPassword="+encodeURIComponent(l),a.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess&&"true"===t.EntityResult.toLowerCase()?(this.setState({isPasswordRequired:!1}),this.props.handleOperation()):this.setState({authenticationResponse:t.ErrorList[0],btnAuthenticateEnabled:!0})})).catch((e=>{this.setState({authenticationResponse:e,btnAuthenticateEnabled:!0})}))}catch(c){this.setState({authenticationResponse:c,btnAuthenticateEnabled:!0})}}else this.setState({btnAuthenticateEnabled:!0})}}componentDidMount(){try{this.IsPasswordRequired()}catch(e){console.log("BaseProductDetailsComposite:Error occured on componentDidMount",e)}}IsPasswordRequired(){try{let e=a.Hp(this.props.userDetails.EntityResult.roleFunctionInfo,this.props.functionName,this.props.functionGroup);this.setState({isPasswordRequired:e}),!1===e&&this.props.handleOperation()}catch(e){console.log("Error in IsPasswordRequired method:",e)}}render(){return(0,y.jsx)("div",{children:!0===this.state.isPasswordRequired?(0,y.jsx)(s.TranslationConsumer,{children:e=>(0,y.jsxs)(n.Modal,{open:!0,size:"mini",children:[(0,y.jsxs)(n.Modal.Content,{children:[(0,y.jsxs)("div",{className:"row",children:[(0,y.jsx)("div",{className:"col col-lg-8",style:{marginLeft:"10px"},children:(0,y.jsx)("h4",{children:e("User_Authentication")})}),(0,y.jsx)("div",{className:"col-12 col-lg-3",style:{textAlign:"right"},onClick:this.onCloseClick,children:(0,y.jsx)(n.Icon,{root:"common",name:"close"})})]}),(0,y.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,y.jsx)("div",{className:"col col-lg-12",children:(0,y.jsx)("label",{children:(0,y.jsxs)("h5",{children:[e("UserValidation_Form_AccountName"),":",this.props.Username]})})}),(0,y.jsx)("div",{className:"col col-lg-12",children:(0,y.jsx)(n.Input,{fluid:!0,type:"password",disablePasswordToggle:!1,value:this.state.Password,indicator:"required",onChange:e=>this.onFieldChange("Password",e),label:e("AccessCardInfo_x_Pwd"),error:e(this.state.validationErrors.Password),reserveSpace:!1})})]})]}),(0,y.jsxs)(n.Modal.Footer,{children:[(0,y.jsx)("span",{className:"ui error-message autherrormsg",children:e(this.state.authenticationResponse)}),(0,y.jsx)(n.Button,{type:"primary",disabled:!this.state.btnAuthenticateEnabled,content:e("UserValidationForm_Authentication"),onClick:this.AuthenticateUser})]})]})}):null})}}const S=(0,l.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(C)},19380:(e,t,i)=>{"use strict";i.d(t,{A:()=>f});var o=i(65043),s=i(728),n=i(62672),r=i(27976),a=i(44063),l=i(39078),c=i(48546),d=i(82967),p=i(11201),u=i(43439),m=(i(60663),i(48385)),h=i(72711),g=i(67907),y=i(65187),C=i(53536),S=(i(90837),i(70579));const R=e=>{const[t,i]=(0,o.useState)(null),[R]=(0,g.useTranslation)(),E=t=>new s.CollectionView(e.sourceData,{pageSize:t}),[f,x]=(0,o.useState)(E(e.rowsPerPage)),T=o.createRef(),b=o.createRef(),w=o.createRef(),D=o.createRef(),j=o.useRef(),P=o.useRef(e.selectionRequired?[]:null);let v=null;const I=t=>{try{if(L(),e.onRowClick&&t.addEventListener(t.hostElement,"click",(i=>{let o=t.hitTest(i);if(o.target.closest(".wj-cell")&&![...o.target.closest(".wj-cell").classList].includes("wj-group")&&o.cellType===n.CellType.Cell){const i=t.rows[o.row].dataItem;e.onRowClick(i)}})),t.selectionMode=s.asEnum("None",n.SelectionMode),t.select(-1,-1),i(t),e.selectionRequired){v=new p.Selector(t,{itemChecked:(i,o)=>{e.singleSelection&&t.rows.filter((e=>e.isSelected&&1===P.current.filter((t=>C.isEqual(t,e.dataItem))).length)).forEach((e=>{e.isSelected=!1})),e.onSelectionHandle(t.rows.filter((e=>e.isSelected)).map((e=>e.dataItem)))},showCheckAll:!e.singleSelection});let i=v.column.grid;v.column=i.rowHeaders.columns[0],i.headersVisibility=n.HeadersVisibility.All,i.selectionMode=s.asEnum("None",n.SelectionMode)}}catch(o){console.log("Error in gridInitialized: "+o)}};(0,o.useEffect)((()=>{try{if(null!=T){let e=T.current.control;b.current.control.grid=e}x(E(e.rowsPerPage))}catch(t){console.log("Error in grid update:",t)}}),[e.sourceData]),(0,o.useEffect)((()=>{try{t&&e.selectionRequired&&(P.current.length=0,P.current.push(...e.selectedItems),t.rows.forEach((t=>{1===e.selectedItems.filter((e=>C.isEqual(e,t.dataItem))).length?t.isSelected=!0:t.isSelected=!1})),t.refresh())}catch(i){console.log("Error in pre-selecting rows:",i)}}),[e.selectedItems]),(0,o.useEffect)((()=>{try{if(localStorage.getItem(e.parentComponent+"GridState")&&"null"!==localStorage.getItem(e.parentComponent+"GridState")&&t){let o=JSON.parse(localStorage.getItem(e.parentComponent+"GridState")),n=t;n.columns.forEach((e=>{let t=o.columns.filter((t=>t.binding===e.binding));e.visible=t.length>0?t[0].visible:e.visible})),w.current.control.filterDefinition=o.filterDefinition,n.collectionView.deferUpdate((()=>{n.collectionView.sortDescriptions.clear();for(let e=0;e<o.sortDescriptions.length;e++){let t=o.sortDescriptions[e];n.collectionView.sortDescriptions.push(new s.SortDescription(t.property,t.ascending))}}));for(let e=0;e<o.groupDescriptions.length;e++)n.collectionView.groupDescriptions.push(new s.PropertyGroupDescription(o.groupDescriptions[e])),n.columns.filter((t=>t.binding===o.groupDescriptions[e]))[0].visible=!1;if(sessionStorage.getItem(e.parentComponent+"GridState")&&"null"!==sessionStorage.getItem(e.parentComponent+"GridState")){let t=JSON.parse(sessionStorage.getItem(e.parentComponent+"GridState"));n.collectionView.moveToPage(n.collectionView.pageCount-1>=t.pageIndex?t.pageIndex:n.collectionView.pageCount-1),b&&(b.current.control.text=t.searchText)}i(n),t.refresh()}}catch(o){console.log("Error in restoring local storage settings: ",o)}}),[f]),(0,o.useEffect)((()=>{try{t&&j.current&&e.columnPickerRequired&&(j.current.itemsSource=t.columns,j.current.checkedMemberPath="visible",j.current.displayMemberPath="header",j.current.lostFocus.addHandler((()=>{(0,s.hidePopup)(j.current.hostElement)})))}catch(i){console.log("Error in initializing column picker properties:",i)}}),[j.current]),(0,o.useEffect)((()=>()=>{e.columnPickerRequired&&j.current&&(0,s.hidePopup)(j.current.hostElement)}),[]);const k=()=>{try{let o=t;o.itemsSource.pageSize=e.sourceData.length,i(o),u.FlexGridXlsxConverter.saveAsync(t,{includeColumnHeaders:!0,includeCellStyles:!1,formatItem:null},e.exportFileName),o.itemsSource.pageSize=e.rowsPerPage,i(o)}catch(o){console.log("Error in export grid to excel:",o)}},A=(t,i)=>{if(void 0!==i&&null!==i){if("boolean"===typeof t||"Active"===i.Name)return t?(0,S.jsx)(h.Icon,{name:"check",size:"small",color:"green"}):(0,S.jsx)(h.Icon,{name:"close",size:"small",color:"red"});if(""===t||null===t||void 0===t)return t;if(("TerminalCodes"===i.Name||"1"===i.PopOver)&&null!==t)return(o=t).split(",").length>e.terminalsToShow?(0,S.jsx)(h.Popup,{className:"popup-theme-wrap",on:"hover",element:o.split(",").length,children:(0,S.jsx)(h.Card,{children:(0,S.jsx)(h.Card.Content,{children:o})})}):o;if(void 0!==i.DataType&&"DateTime"===i.DataType)return new Date(t).toLocaleDateString()+" "+new Date(t).toLocaleTimeString();if(void 0!==i.DataType&&"Date"===i.DataType)return new Date(t).toLocaleDateString();if(void 0!==i.DataType&&"Time"===i.DataType)return new Date(t).toLocaleTimeString()}var o;return t},N=()=>{try{if(t&&w.current){let i={columns:t.columns.map((e=>({binding:e.binding,visible:e.visible}))),filterDefinition:w.current.control.filterDefinition,sortDescriptions:t.collectionView.sortDescriptions.map((e=>({property:e.property,ascending:e.ascending}))),groupDescriptions:t.collectionView.groupDescriptions.map((e=>e.propertyName?e.propertyName:null))};if(t.collectionView.groupDescriptions&&t.collectionView.groupDescriptions.length>0){[...document.getElementsByClassName("wj-column-selector-group")].forEach((e=>{e.parentNode.parentNode.classList.add("wj-grouped-checkbox")}))}let o={pageIndex:t.collectionView.pageIndex,searchText:b.current.control.text};localStorage.setItem(e.parentComponent+"GridState",JSON.stringify(i)),sessionStorage.setItem(e.parentComponent+"GridState",JSON.stringify(o))}}catch(i){console.log("Error in saving grid state")}},L=()=>{let e=s.culture.FlexGridFilter,t=l.Operator;s.culture.FlexGridFilter.header=R("WijmoGridFilterHeader"),s.culture.FlexGridFilter.ascending="\u2191 "+R("WijmoGridFilterAscending"),s.culture.FlexGridFilter.descending="\u2193 "+R("WijmoGridFilterDescending"),s.culture.FlexGridFilter.apply=R("RoleAdminEdit_Apply"),s.culture.FlexGridFilter.clear=R("OrderCreate_btnClear"),s.culture.FlexGridFilter.conditions=R("WijmoGridFilterCondition"),s.culture.FlexGridFilter.values=R("WijmoGridFilterValue"),s.culture.FlexGridFilter.search=R("LoadingDetailsView_SearchGrid"),s.culture.FlexGridFilter.selectAll=R("WijmoGridFilterSelectAll"),s.culture.FlexGridFilter.and=R("WijmoGridFilterAnd"),s.culture.FlexGridFilter.or=R("WijmoGridFilterOr"),s.culture.FlexGridFilter.cancel=R("AccessCardInfo_Cancel"),e.stringOperators=[{name:R("WijmoGridFilterUnset"),op:null},{name:R("WijmoGridFilterEqual"),op:t.EQ},{name:R("WijmoGridFilterNotEqual"),op:t.NE},{name:R("WijmoGridFilterBeginsWith"),op:t.BW},{name:R("WijmoGridFilterEndsWith"),op:t.EW},{name:R("WijmoGridFilterContains"),op:t.CT},{name:R("WijmoGridFilterDoesNotContain"),op:t.NC}],e.numberOperators=[{name:R("WijmoGridFilterUnset"),op:null},{name:R("WijmoGridFilterEqual"),op:t.EQ},{name:R("WijmoGridFilterNotEqual"),op:t.NE},{name:R("WijmoGridFilterGreaterThan"),op:t.GT},{name:R("WijmoGridFilterLessThan"),op:t.LT},{name:R("WijmoGridFilterGreaterThanOrEqual"),op:t.GE},{name:R("WijmoGridFilterLessThanOrEqual"),op:t.LE}],e.dateOperators=[{name:R("WijmoGridFilterUnset"),op:null},{name:R("WijmoGridFilterEqual"),op:t.EQ},{name:R("WijmoGridFilterDateEarlierThan"),op:t.LT},{name:R("WijmoGridFilterDateLaterThan"),op:t.GT}],e.booleanOperators=[{name:R("WijmoGridFilterUnset"),op:null},{name:R("WijmoGridFilterEqual"),op:t.EQ},{name:R("WijmoGridFilterNotEqual"),op:t.NE}]},F=e=>{try{if(window.screen.width<1024&&e.WidthPx&&""!==e.WidthPx)return parseInt(e.WidthPx)}catch(t){console.log("Error in width:",t)}return e.WidthPercentage.includes("*")?e.WidthPercentage:parseInt(e.WidthPercentage)};return(0,S.jsx)("div",{className:"pl-1",children:(0,S.jsx)(y.A,{children:(0,S.jsx)(g.TranslationConsumer,{children:i=>(0,S.jsxs)(o.Fragment,{children:[(0,S.jsxs)("div",{className:"row pl-0",children:[(0,S.jsx)("div",{className:"col-10 col-sm-12 col-md-5 col-lg-6",children:(0,S.jsx)(c.q,{class:"ui single-input",ref:b,placeholder:i("LoadingDetailsView_SearchGrid")})}),(0,S.jsx)("div",{className:"col-10 col-sm-12 col-md-7 col-lg-6",children:(0,S.jsxs)("div",{style:{float:"right"},children:[e.columnPickerRequired?(0,S.jsxs)(h.Button,{id:"colPicker",actionType:"button",type:"primary",onClick:e=>(e=>{try{let i=j.current.hostElement;i.offsetHeight?((0,s.hidePopup)(i,!0,!0),t.focus()):((0,s.showPopup)(i,e.target,s.PopupPosition.Below,!0,!1),j.current.focus()),j.current.focus(),e.preventDefault()}catch(i){console.log("Error in Column Picker click event:",i)}})(e),children:[(0,S.jsx)("div",{style:{display:"inline-block"},children:i("WijmoGridColumnPicker")}),(0,S.jsx)("div",{style:{display:"inline-block"},children:(0,S.jsx)(h.Icon,{name:"caret-down",className:"btnIcon",size:"small"})})]}):null,e.exportRequired?(0,S.jsxs)(h.Button,{actionType:"button",type:"primary",className:"mt-3 mt-md-0",onClick:k,children:[(0,S.jsx)("div",{style:{display:"inline-block"},children:i("WijmoGridExport")}),(0,S.jsx)("div",{style:{display:"inline-block",marginLeft:"0.2rem"},children:(0,S.jsx)("span",{className:"icon-Xls",style:{fontSize:"17px",position:"absolute",top:"3px"}})})]}):null]})})]}),(0,S.jsxs)("div",{className:"tableScroll",children:[e.columnGroupingRequired?(0,S.jsx)(m.u,{className:"group-panel",grid:t,placeholder:i("WijmoGridGroupPanelPlaceholder")}):null,(0,S.jsx)(y.A,{children:(0,S.jsxs)(r.MC,{ref:T,autoGenerateColumns:!1,alternatingRowStep:0,autoRowHeights:!0,headersVisibility:"Column",itemsSource:f,selectionMode:s.asEnum("None",n.SelectionMode),initialized:I,virtualizationThreshold:[0,1e4],onUpdatedView:N,children:[(0,S.jsx)(a.M,{ref:w}),e.columns.map((t=>(0,S.jsx)(r.aK,{header:i(t.Name),binding:t.Name,width:F(t),minWidth:100,isReadOnly:!0,wordWrap:!0,align:"left",children:(0,S.jsx)(r.Gw,{cellType:"Cell",template:i=>(0,S.jsx)("span",{style:null!=e.conditionalRowStyleCheck&&e.conditionalRowStyleCheck(i.item)?{...e.conditionalRowStyles}:null,children:A(i.item[t.Name],t)})})},t.Name)))]})}),e.columnPickerRequired?(0,S.jsx)("div",{className:"column-picker-div",children:(0,S.jsx)(d.qF,{className:"column-picker",initialized:t=>(t=>{e.columnPickerRequired&&(j.current=t)})(t)})}):null]}),(0,S.jsx)("div",{className:"row",children:(0,S.jsx)(d.Ne,{ref:D,className:"ml-auto mr-auto mt-3",headerFormat:i("WijmoGridPagingTemplate"),byPage:!0,cv:f})})]})})})})};R.defaultProps={sourceData:[],columns:[],exportRequired:!0,exportFileName:"Grid.xlsx",selectionRequired:!1,columnPickerRequired:!1,columnGroupingRequired:!1,rowsPerPage:10,terminalsToShow:2,singleSelection:!1,selectedItems:[]};const E=R,f=e=>(0,S.jsx)(E,{sourceData:e.data,columns:e.columns,exportRequired:e.exportRequired,exportFileName:e.exportFileName,columnPickerRequired:e.columnPickerRequired,selectionRequired:e.selectionRequired,columnGroupingRequired:e.columnGroupingRequired,conditionalRowStyleCheck:e.conditionalRowStyleCheck,conditionalRowStyles:e.conditionalRowStyles,rowsPerPage:e.rowsPerPage,onSelectionHandle:e.onSelectionHandle,onRowClick:e.onRowClick,parentComponent:e.parentComponent,terminalsToShow:e.terminalsToShow,singleSelection:e.singleSelection,selectedItems:e.selectedItems})},79129:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>j});var o=i(65043),s=i(19380),n=i(70579);function r(e){let{tableData:t,columnDetails:i,pageSize:o,exportRequired:r,exportFileName:a,columnPickerRequired:l,columnGroupingRequired:c,selectionRequired:d,terminalsToShow:p,onSelectionChange:u,onRowClick:m,parentComponent:h}=e;return(0,n.jsx)(s.A,{data:t,columns:i,rowsPerPage:o,exportRequired:r,exportFileName:a,columnPickerRequired:l,columnGroupingRequired:c,selectionRequired:d,onSelectionHandle:u,onRowClick:m,parentComponent:h,terminalsToShow:p})}r.defaultProps={pageSize:10,terminalsToShow:2,tableData:[],columnDetails:[]};var a=i(34624),l=i(40854),c=i.n(l),d=i(7523),p=i(72067),u=i(14159),m=(i(92342),i(9966)),h=i(50805),g=i(97508),y=(i(63973),i(11981)),C=i(69062),S=i(65187),R=i(80312),E=i(40252),f=i(53536),x=i.n(f),T=i(15821),b=i(52129),w=i(62900);class D extends o.Component{constructor(){super(...arguments),this.state={isDetails:!1,isReadyToRender:!1,isDetailsModified:!1,operationsVisibility:{add:!1,delete:!1,terminal:!0},selectedRow:{},selectedItems:[],selectedShareholder:"",selectedTerminal:"",data:{},isEnable:!0,terminalVisible:!1,showAuthenticationLayout:!1},this.componentName="HSEConfigurationComponent",this.componentWillUnmount=()=>{C.D6(this.componentName+"GridState"),window.removeEventListener("beforeunload",(()=>C.D6(this.componentName+"GridState")))},this.handleAdd=()=>{try{const e=x().cloneDeep(this.state.operationsVisibility);e.add=!1,e.delete=!1,e.terminal=!1,this.setState({isDetails:!0,selectedRow:{},operationsVisibility:e})}catch(e){console.log("HSEConfigurationComposite: Error occurred on handleAdd")}},this.handleBack=()=>{try{const e=x().cloneDeep(this.state.operationsVisibility);e.add=C.ab(this.props.userDetails.EntityResult.FunctionsList,R.i.add,this.props.activeItem.itemProps.transportationType+R.Lg),e.terminal=!0,e.delete=!1,this.setState({isDetails:!1,selectedRow:{},selectedItems:[],operationsVisibility:e,isReadyToRender:!1}),this.getHSEConfigurationList(this.state.selectedShareholder)}catch(e){console.log("HSEConfigurationComposite: Error occurred on Back click",e)}},this.handleRowClick=e=>{try{const t=x().cloneDeep(this.state.operationsVisibility);t.add=C.ab(this.props.userDetails.EntityResult.FunctionsList,R.i.add,this.props.activeItem.itemProps.transportationType+R.Lg),t.delete=C.ab(this.props.userDetails.EntityResult.FunctionsList,R.i.remove,this.props.activeItem.itemProps.transportationType+R.Lg),t.terminal=!1,this.setState({isDetails:!0,selectedRow:e,selectedItems:[e],operationsVisibility:t})}catch(t){console.log("HSEConfigurationComposite: Error occurred on handleRowClick",t)}},this.handleSelection=e=>{try{const t=x().cloneDeep(this.state.operationsVisibility);t.delete=e.length>0&&C.ab(this.props.userDetails.EntityResult.FunctionsList,R.i.remove,this.props.activeItem.itemProps.transportationType+R.Lg),this.setState({selectedItems:e,operationsVisibility:t})}catch(t){console.log("HSEConfigurationComposite: Error occurred on handleSelection",t)}},this.handleTerminalSelectionChange=e=>{try{this.setState({selectedTerminal:e,selectedRow:{},selectedItems:[],isReadyToRender:!0}),this.getLookUpData()}catch(t){console.log("HSEConfigurationComposite:Error occured on handleTerminalSelectionChange",t)}},this.savedEvent=(e,t,i)=>{try{const s=x().cloneDeep(this.state.operationsVisibility);if("success"===i.messageType&&(s.add=C.ab(this.props.userDetails.EntityResult.FunctionsList,R.i.add,this.props.activeItem.itemProps.transportationType+R.Lg),s.delete=C.ab(this.props.userDetails.EntityResult.FunctionsList,R.i.remove,this.props.activeItem.itemProps.transportationType+R.Lg),this.setState({isDetailsModified:!0,operationsVisibility:s})),"success"===i.messageType&&"add"===t){var o=[{HSE_TransportationUnit:e.TransportationUnit,HSE_TransportationUnitType:e.TransportationUnitType,LocationInfo_LocationType:e.LocationTypeCode,PipelineEntry_TransactionType:e.TransactionType,ViewReceipt_LastUpdatedTime:e.LastUpdatedTime}];this.setState({selectedItems:o})}(0,u.toast)((0,n.jsx)(S.A,{children:(0,n.jsx)(y.A,{notificationMessage:i})}),{autoClose:"success"===i.messageType&&1e4})}catch(s){console.log("HSEConfigurationComposite: Error occurred on savedEvent",s)}},this.handleDelete=()=>{try{const e=x().cloneDeep(this.state.operationsVisibility);e.delete=!1,this.setState({operationsVisibility:e});const t=[];for(let i of this.state.selectedItems){const e={ShareHolderCode:this.state.selectedShareholder,KeyCodes:[{key:"TransportationType",value:this.props.activeItem.itemProps.transportationType},{key:"TransactionType",value:i.PipelineEntry_TransactionType},{key:"LocationType",value:i.LocationInfo_LocationType},{key:"TransportationUnit",value:i.HSE_TransportationUnit},{key:"TransportationUnitType",value:i.HSE_TransportationUnitType},{key:"TerminalCode",value:this.state.selectedTerminal}]};t.push(e)}c()(p.Owu,C.tW(t,this.props.tokenDetails.tokenInfo)).then((t=>{const i=t.data;let o=i.isSuccess;if(null!==t.ResultDataList&&void 0!==i.ResultDataList){o=i.ResultDataList.filter((function(e){return!e.IsSuccess})).length!==i.ResultDataList.length}let s=C.Cy(i,"HSE_Configuration_DeletionStatus",["TransportationType"]);o&&(this.setState({isReadyToRender:!1,showAuthenticationLayout:!1}),this.getHSEConfigurationList(),e.delete=!1,this.setState({selectedItems:[],operationsVisibility:e,selectedRow:{}})),(0,u.toast)((0,n.jsx)(S.A,{children:(0,n.jsx)(y.A,{notificationMessage:s})}),{autoClose:"success"===s.messageType&&1e4})})).catch((e=>{throw e}))}catch(e){console.log("HSEConfigurationComposite: Error occurred on handleDelete")}},this.authenticateDelete=()=>{try{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showAuthenticationLayout:e}),!1===e&&this.handleDelete()}catch(e){console.log("HSEConfigComposite : Error in authenticateDelete")}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})}}componentDidMount(){try{C.pJ(this.props.userDetails.EntityResult.IsArchived),this.getTerminalList(),this.props.userDetails.EntityResult.IsEnterpriseNode?this.setState({terminalVisible:!0}):this.setState({terminalVisible:!1})}catch(e){console.log("HSEConfigurationComposite: Error occurred on componentDidMount",e)}window.addEventListener("beforeunload",(()=>C.D6(this.componentName+"GridState")))}getTerminalList(){try{let e=[],t=this.props.userDetails.EntityResult.SecondaryShareholders;e.push(this.props.userDetails.EntityResult.PrimaryShareholder),Array.isArray(t)&&t.forEach((t=>{e.push(t)})),c()(p.Oqv,C.tW(e,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;!0===t.IsSuccess&&(Array.isArray(t.EntityResult)&&t.EntityResult.length>0&&this.setState({terminalOptions:t.EntityResult,isReadyToRender:!0}),this.setState({selectedTerminal:this.state.terminalOptions[0]}),this.getLookUpData())}))}catch(e){console.log("SiteViewComposite:Error occured on getTerminalsList",e)}}getLookUpData(){c()(p.xAA+"?LookUpTypeCode=HSEInspection",C.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;if(!0===t.IsSuccess){let e=!0;switch(this.props.activeItem.itemProps.transportationType){case d.LY.ROAD:"False"===t.EntityResult.EnableRoad&&(e=!1);break;case d.LY.MARINE:"False"===t.EntityResult.EnableMarine&&(e=!1);break;case d.LY.RAIL:"False"===t.EntityResult.EnableRail&&(e=!1);break;case d.LY.PIPELINE:"False"===t.EntityResult.EnablePipeline&&(e=!1);break;default:e=!0}if(this.setState({isEnable:e}),e){const e=x().cloneDeep(this.state.operationsVisibility);e.add=C.ab(this.props.userDetails.EntityResult.FunctionsList,R.i.add,this.props.activeItem.itemProps.transportationType+R.Lg),this.setState({operationsVisibility:e,selectedShareholder:this.props.userDetails.EntityResult.PrimaryShareholder}),this.getHSEConfigurationList()}}else console.log("Error in getLookUpData: ",t.ErrorList)})).catch((e=>{console.log("HSEInspectionDetailsComposite: Error occurred on getLookUpData",e)}))}getHSEConfigurationList(){try{c()(p.msC+"?TransportationType="+this.props.activeItem.itemProps.transportationType+"&TerminalCode="+this.state.selectedTerminal,C.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;!0===t.IsSuccess?this.setState({data:t.EntityResult,isReadyToRender:!0}):(this.setState({data:{},isReadyToRender:!0}),console.log("Error in getHSEConfigurationList:",t.ErrorList))})).catch((e=>{this.setState({data:{},isReadyToRender:!0}),console.log("Error while getting HSEConfiguration List:",e)}))}catch(e){console.log("HSEConfigurationComposite: Error occurred on getHSEConfigurationList",e)}}getFunctionGroupName(){return this.props.activeItem.itemProps.transportationType===d.LY.RAIL?R.Rl:this.props.activeItem.itemProps.transportationType===d.LY.MARINE?R.fL:this.props.activeItem.itemProps.transportationType===d.LY.PIPELINE?R.fN:R.Rc}render(){return(0,n.jsxs)("div",{children:[(0,n.jsx)(S.A,{children:(0,n.jsx)(b.m,{operationsVisibilty:this.state.operationsVisibility,breadcrumbItem:this.props.activeItem,onAdd:this.handleAdd,onDelete:this.authenticateDelete,terminalVisible:this.state.terminalVisible,terminals:this.state.terminalOptions,selectedTerminal:this.state.selectedTerminal,onTerminalChange:this.handleTerminalSelectionChange,handleBreadCrumbClick:this.props.handleBreadCrumbClick})}),!0===this.state.isDetails?(0,n.jsx)(S.A,{children:(0,n.jsx)(a.default,{Key:"HSEConfigurationDetails",transportationType:this.props.activeItem.itemProps.transportationType,selectedRow:this.state.selectedRow,onBack:this.handleBack,onSaved:this.savedEvent,selectedShareholder:this.state.selectedShareholder,selectedTerminal:this.state.selectedTerminal})}):(0,n.jsx)("div",{children:this.state.isReadyToRender?(0,n.jsx)(S.A,{children:(0,n.jsx)("div",{className:"compositeTransactionList",children:(0,n.jsx)(r,{tableData:this.state.data.Table,columnDetails:this.state.data.Column,pageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,exportRequired:!0,exportFileName:"HSEConfigurationList",columnPickerRequired:!0,terminalsToShow:this.props.userDetails.EntityResult.PageAttibutes.NoOfTerminalsToShow,selectionRequired:!0,columnGroupingRequired:!0,onSelectionChange:this.handleSelection,onRowClick:this.handleRowClick,parentComponent:this.componentName})})}):(0,n.jsx)(n.Fragment,{children:this.state.isEnable?(0,n.jsx)(E.A,{loadingClass:"globalLoader",message:""}):(0,n.jsx)(T.default,{errorMessage:"HSEConfigurationDisabled"})})}),this.state.showAuthenticationLayout?(0,n.jsx)(w.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:R.i.remove,functionGroup:this.getFunctionGroupName(),handleClose:this.handleAuthenticationClose,handleOperation:this.handleDelete}):null,(0,n.jsx)(S.A,{children:(0,n.jsx)(u.ToastContainer,{hideProgressBar:!0,closeOnClick:!1,closeButton:!0,newestOnTop:!0,position:"bottom-right",toastClassName:"toast-notification-wrap"})})]})}}const j=(0,g.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})),(e=>({userActions:(0,h.zH)(m,e)})))(D)},80312:(e,t,i)=>{"use strict";i.d(t,{$3:()=>_,$H:()=>oe,$J:()=>me,$K:()=>ge,$V:()=>jt,$b:()=>Et,$p:()=>H,AE:()=>b,Al:()=>q,B2:()=>ot,By:()=>bt,CW:()=>gt,DA:()=>l,Ee:()=>We,FO:()=>I,Fy:()=>Fe,G9:()=>it,H8:()=>ee,Hq:()=>at,Ig:()=>L,Iu:()=>C,JI:()=>ct,JJ:()=>te,JU:()=>K,Jz:()=>Ke,KQ:()=>re,Kk:()=>Ze,Kw:()=>et,LP:()=>vt,LR:()=>d,Lg:()=>Q,Mg:()=>Ee,Mm:()=>F,N1:()=>$,Nm:()=>h,No:()=>ce,Ow:()=>O,P2:()=>n,P8:()=>Se,PD:()=>ke,PE:()=>p,PG:()=>J,PP:()=>mt,Pb:()=>Ne,QB:()=>f,QC:()=>Z,RE:()=>nt,RO:()=>Qe,Rc:()=>Ct,Rl:()=>ft,Rx:()=>yt,TI:()=>S,Tm:()=>he,Ug:()=>X,Ur:()=>Ue,V9:()=>c,VK:()=>U,VL:()=>ue,VQ:()=>ae,WD:()=>Ve,Wf:()=>j,YO:()=>A,YY:()=>Ie,Yb:()=>ye,Yg:()=>_e,Z9:()=>ut,ZE:()=>dt,ZU:()=>E,_N:()=>St,_S:()=>Pt,_d:()=>It,aS:()=>W,aZ:()=>pt,au:()=>Te,b0:()=>Dt,bL:()=>qe,c2:()=>Me,d4:()=>Le,dB:()=>y,dD:()=>He,dK:()=>B,dY:()=>k,de:()=>u,dv:()=>Pe,eQ:()=>a,f3:()=>fe,fF:()=>V,fL:()=>Rt,fN:()=>Tt,fk:()=>P,fl:()=>Ce,fr:()=>x,go:()=>s,h:()=>pe,hD:()=>D,hE:()=>v,hh:()=>Xe,hk:()=>ne,hz:()=>ht,i:()=>o,j2:()=>rt,jN:()=>z,je:()=>g,jx:()=>M,kL:()=>$e,ke:()=>Oe,km:()=>le,l0:()=>se,l6:()=>Be,lz:()=>N,m0:()=>R,nS:()=>we,nk:()=>lt,nn:()=>T,np:()=>Y,oh:()=>st,op:()=>Je,pt:()=>Ge,qk:()=>de,qp:()=>Re,r6:()=>De,rQ:()=>je,rj:()=>G,rp:()=>r,t3:()=>xt,tM:()=>Ae,to:()=>At,ts:()=>tt,uH:()=>xe,uy:()=>Ye,w1:()=>ve,x5:()=>ie,xz:()=>w,y_:()=>ze,yu:()=>m,yx:()=>wt,z8:()=>be,z_:()=>kt});const o={view:"view",add:"add",modify:"modify",remove:"remove"},s="carriercompany",n="driver",r="customer",a="trailer",l="originterminal",c="destination",d="primemover",p="vehicle",u="shipmentbycompartment",m="shipmentbyproduct",h="ViewShipmentStatus",g="vessel",y="order",C="OrderForceClose",S="contract",R="receiptplanbycompartment",E="ViewMarineShipment",f="MarineShipmentByCompartment",x="ViewMarineReceipt",T="supplier",b="finishedproduct",w="RailDispatch",D="RailReceipt",j="RailRoute",P="RailWagon",v="CloseRailDispatch",I="PrintRailBOL",k="PrintRailFAN",A="RailDispatchLoadSpotAssignment",N="RailDispatchProductAssignment",L="ViewRailDispatch",F="ViewRailLoadingDetails",V="CloseRailReceipt",G="PrintRailBOD",M="PrintRailRAN",q="ViewRailReceipt",H="ViewRailUnLoadingDetails",W="SMS",O="UnAccountedTransactionTank",U="UnAccountedTransactionMeter",B="PipelineDispatch",_="PipelineReceipt",z="PipelineDispatchManualEntry",K="PipelineReceiptManualEntry",J="LookUpData",Y="HSEInspection",Q="HSEInspectionConfig",$="Email",Z="Shareholder",X="LocationConfig",ee="DeviceConfig",te="baseproduct",ie="SiteView",oe="LeakageManualEntry",se="Terminal",ne="SlotInformation",re="TankGroup",ae="Tank",le="SealMaster",ce="TankEODEntry",de="UnmatchedLocalTransactions",pe="AccessCard",ue="ResetPin",me="SlotConfiguration",he="PrintMarineFAN",ge="PrintMarineBOL",ye="ViewMarineLoadingDetails",Ce="ViewMarineShipmentAuditTrail",Se="CloseMarineShipment",Re="IssueCard",Ee="ActivateCard",fe="RevokeCard",xe="AutoIDAssociation",Te="MarineReceiptByCompartment",be="PrintMarineRAN",we="PrintMarineBOD",De="ViewMarineUnloadingDetails",je="ViewMarineReceiptAuditTrail",Pe="CloseMarineReceipt",ve="WeekendConfig",Ie="EODAdmin",ke="PrintBOL",Ae="PrintFAN",Ne="PrintBOD",Le="CloseShipment",Fe="CloseReceipt",Ve="CONTRACTFORCECLOSE",Ge="Captain",Me="OverrideShipmentSequence",qe="KPIInformation",He="Language",We="WebPortalUserMap",Oe="BayGroup",Ue="PipelineHeaderSiteView",Be="TankMonitor",_e="PersonAdmin",ze="ProductReconciliationReports",Ke="ReportConfiguration",Je="EXECONFIGURATION",Ye="ShareholderAllocation",Qe="NotificationGroup",$e="NotificationRestriction",Ze="NotificationConfig",Xe="AllowWeighBridgeManualEntry",et="ProductAllocation",tt="MasterDeviceConfiguration",it="ShareholderAgreement",ot="TANKSHAREHOLDERPRIMEFUNCTION",st="ROLEADMIN",nt="ShiftConfig",rt="PrinterConfiguration",at="CustomerAgreement",lt="BaySCADAConfiguration",ct="RailReceiptUnloadSpotAssignment",dt="STAFF_VISITOR",pt="PipelineMeterSiteView",ut="RailSiteView",mt="MarineSiteView",ht="LoadingDetails",gt="UnloadingDetails",yt="RoadHSEInspection",Ct="RoadHSEInspectionConfig",St="MarineHSEInspection",Rt="MarineHSEInspectionConfig",Et="RailHSEInspection",ft="RailHSEInspectionConfig",xt="PipelineHSEInspection",Tt="PipelineHSEInspectionConfig",bt="PrintRAN",wt="ViewReceiptStatus",Dt="customerrecipe",jt="COAParameter",Pt="COATemplate",vt="COAManagement",It="COACustomer",kt="COAAssignment",At="ProductForecastConfiguration"},50477:()=>{}}]);
//# sourceMappingURL=944.25b4030d.chunk.js.map