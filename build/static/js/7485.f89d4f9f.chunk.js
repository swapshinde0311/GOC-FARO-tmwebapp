"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[7485,248],{979:(e,t,s)=>{s.d(t,{A:()=>C});var a=s(65043),i=s(16432),l=s(65187),o=s(72711),n=s(67907),r=s(97508),c=s(40854),d=s.n(c),h=s(72067),p=s(69062),m=s(53536),u=s.n(m),y=s(7523),x=s(70579);class g extends a.Component{constructor(){super(...arguments),this.state={searchBayResult:"",pageIndex:1,pageSize:1},this.onBaySearchChange=e=>{this.setState({searchBayResult:e})},this.onCheckboxChange=(e,t)=>{try{this.props.onBaySelect(e,t)}catch(s){console.log("BayQueueComposite:Error occured on onCheckboxChange",s)}}}componentDidMount(){this.getLookUpData()}getLookUpData(){try{d()(h.xAA+"?LookUpTypeCode=BayAllocation",p.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess&&(isNaN(parseInt(t.EntityResult.PageSize))||this.setState({pageSize:parseInt(t.EntityResult.PageSize)}))}))}catch(e){console.log("BayAllocationDetailsComposite:Error occured on getLookUpData",e)}}getBayTooltip(e){return(0,x.jsx)(n.TranslationConsumer,{children:t=>(0,x.jsxs)("div",{children:[t("BayGroupList_BayCode")," : ",e.BayCode," ",(0,x.jsx)("br",{}),t("BayGroupList_LoadingType")," : ",e.LoadingType,(0,x.jsx)("br",{}),t("BayTooltip_QueueSize")," : ",e.MaximumQueue,(0,x.jsx)("br",{}),t("BaySearch_BayMode")," : ",e.IsManual?"Manual Bay":"Auto",(0,x.jsx)("br",{}),t("TankGroupInfo_Active")," : ",e.Active?"true":"false"]})})}getBayShipmentTooltip(e){return(0,x.jsx)(n.TranslationConsumer,{children:t=>(0,x.jsxs)("div",{children:[null===e.ShipmentCode?t("Receipt_Code"):t("ViewShipmentStatus_ShipmentCode")," ",": ",e.Code," ",(0,x.jsx)("br",{}),t("Receipt_Shareholder")," : ",e.ShareholderCode,(0,x.jsx)("br",{}),t("ViewReceipt_CarrierCompany")," : ",e.CarrierCode,(0,x.jsx)("br",{}),t("ViewReceipt_Vehicle")," : ",e.VehicleCode,(0,x.jsx)("br",{}),t("DriverInfo_Driver")," : ",e.DriverCode,(0,x.jsx)("br",{}),t("ScheduledDate")," :"," ",new Date(e.ScheduledDate).toLocaleDateString()]})})}getBayTypeTooltip(e){return(0,x.jsx)(n.TranslationConsumer,{children:t=>(0,x.jsxs)("div",{children:[t("BayType_Title")," :"," ","BOTH"===e.BayType?t("BayType_Both"):e.BayType]})})}getTransactionIdentifier(e,t){return e+y.uV+t}render(){let{searchBayResult:e}=this.state,t=this.props.bayData.filter((t=>t.BayCode.toLowerCase().includes(e.toLowerCase())||t.ShipmentReceiptItem.some((function(t){return t.Code.toLowerCase().includes(e.toLowerCase())})))),s=[],a=u().cloneDeep(this.state.pageIndex);this.state.pageSize>=t.length&&(a=1);let r=(a-1)*this.state.pageSize,c=r+this.state.pageSize;return c>=t.length&&(c=t.length),s=t.slice(r,c),(0,x.jsx)(n.TranslationConsumer,{children:e=>(0,x.jsxs)("div",{className:"detailsContainer",children:[(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-4",children:(0,x.jsx)(o.Input,{className:"input-example",placeholder:e("BayAllocation_SearchBay"),search:!0,onChange:e=>this.onBaySearchChange(e)})}),(0,x.jsx)("div",{className:"col-4",children:t.length>this.state.pageSize?(0,x.jsx)(o.Pagination,{totalItems:t.length,itemsPerPage:this.state.pageSize,activePage:this.state.pageIndex,onPageChange:e=>{this.setState({pageIndex:e})}}):""}),(0,x.jsx)("div",{className:"col-4",style:{marginTop:"1rem"},children:(0,x.jsxs)("div",{style:{float:"right"},children:[e("Common_LastUpdated")+" : "+this.props.updatedTime,(0,x.jsx)("span",{style:{marginLeft:"1rem",cursor:"pointer"},onClick:()=>this.props.onRefresh(),children:(0,x.jsx)("img",{style:{width:"6%"},src:"/Refresh.png",alt:""})})]})})]}),(0,x.jsx)(l.A,{children:s.length>0?s.map(((e,t)=>(0,x.jsx)("div",{style:{overflowX:"auto"},children:(0,x.jsxs)(o.Table,{children:[(0,x.jsx)(o.Table.Header,{children:(0,x.jsx)(o.Table.HeaderCell,{colSpan:e.MaximumQueue+2,content:e.BayCode,children:(0,x.jsx)("div",{className:"row",style:{marginBottom:"-1rem"},children:(0,x.jsxs)("div",{style:{display:"flex"},children:[(0,x.jsx)("div",{children:e.MaximumQueue>0&&!0===e.Active&&!0===this.props.isBayAllocation?(0,x.jsx)(o.Checkbox,{label:e.BayCode,checked:!0===e.SelectedBay,onChange:t=>this.onCheckboxChange(e.BayCode,t)}):(0,x.jsx)("div",{style:{whiteSpace:"pre"},children:(0,x.jsx)(o.InputLabel,{label:e.BayCode+"   "})})}),(0,x.jsx)("div",{children:(0,x.jsx)(l.A,{children:(0,x.jsx)(o.Tooltip,{element:(0,x.jsx)(o.Icon,{style:{paddingBottom:"5px"},name:"badge-info",root:"common"}),content:this.getBayTooltip(e),size:"mini",position:"right center"})})}),(0,x.jsx)(l.A,{children:(0,x.jsx)(o.Tooltip,{element:(0,x.jsx)("span",{className:"bayTypeIconPosition",children:(0,x.jsx)("icon",{style:{fontSize:"25px"},className:"BOTH"===e.BayType?"icon-Loading-Unloading":"LOADING"===e.BayType?"icon-Loading":"icon-Unloading"})}),content:this.getBayTypeTooltip(e),size:"mini",position:"right center"})}),!1===this.props.isManualMode?(0,x.jsx)("div",{style:{position:"absolute",right:"18px"},children:(0,x.jsx)("span",{style:{marginTop:"-0.3rem"},children:(0,x.jsx)(o.Icon,{name:"locked",root:"Building"})})}):""]})})})}),(0,x.jsx)(o.Table.Body,{children:(0,x.jsx)(o.Table.Row,{children:(0,x.jsx)(i.gL,{droppableId:e.BayCode,type:"Type1",children:t=>(0,x.jsxs)("div",{ref:t.innerRef,...t.droppableProps,children:[e.ShipmentReceiptItem.length>0?e.ShipmentReceiptItem.map(((t,s)=>(0,x.jsx)(o.Table.Cell,{className:this.props.selectedShipmentReceiptItem.Code===t.Code?"bayAllocationtd tdSelected":"bayAllocationtd",onClick:()=>this.props.isBayAllocation?this.props.onCellClick(s,e.BayCode):"",children:(0,x.jsx)(l.A,{children:(0,x.jsx)(i.sx,{draggableId:this.getTransactionIdentifier(t.Code,t.ShareholderCode),isDragDisabled:!1===this.props.isBayAllocation,children:(e,a)=>(0,x.jsxs)("div",{ref:e.innerRef,...e.draggableProps,...e.dragHandleProps,children:[(0,x.jsxs)("div",{className:"bayAllocationFontSize",children:[t.Code,(0,x.jsx)(l.A,{children:(0,x.jsx)(o.Tooltip,{element:(0,x.jsx)("span",{className:"bayAllocationInfoIcon",children:(0,x.jsx)(o.Icon,{name:"badge-info",root:"common"})}),content:this.getBayShipmentTooltip(t),size:"mini",position:"right center"})})]}),(0,x.jsx)("div",{className:"bayAllocationFontSize",children:t.VehicleCode}),s>0?(0,x.jsx)("div",{children:(0,x.jsx)("img",{className:"bayAllocationImagePosition",src:"/Vehicle.png",alt:"",title:"Vehicle"})}):(0,x.jsx)("div",{children:(0,x.jsx)("img",{className:"bayAllocationImagePosition",src:"/VehiclewithBay.png",alt:"",title:"Vehicle"})})]})})})}))):(0,x.jsx)(o.Table.Cell,{className:"bayAllocationtd",children:(0,x.jsx)("img",{className:"bayAllocationImagePosition",src:"/BayEmpty.png",alt:"",title:"Bay"})}),e.MaximumQueue>0?[...Array.from(Array(e.MaximumQueue-(0===e.ShipmentReceiptItem.length?1:e.ShipmentReceiptItem.length)).keys())].map(((e,t)=>(0,x.jsx)(o.Table.Cell,{className:"bayAllocationtd"}))):"",(0,x.jsx)(o.Table.Cell,{})]})})})})]})}))):e("BaySearch_NoResult")})]})})}}const C=(0,r.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(g)},66554:(e,t,s)=>{s.d(t,{$:()=>d});var a=s(65043),i=s(72711),l=s(67907),o=s(65187),n=s(69062),r=s(70579);function c(e){let{operationsVisibilty:t,breadcrumbItem:s,shareholders:c,selectedShareholder:d,onShareholderChange:h,onDelete:p,onAdd:m,popUpContent:u,shrVisible:y,handleBreadCrumbClick:x,addVisible:g,deleteVisible:C}=e;const[j,b]=(0,a.useState)(!1),[B,T]=(0,a.useState)(!1);function S(){t.add&&(u.length>0?T(!1===B):m())}return(0,r.jsxs)("div",{className:"row",style:{alignItems:"flex-start",padding:"0px"},children:[(0,r.jsx)("div",{className:"col-9 col-sm-9 col-md-9 col-lg-10 col-xl-10",style:{padding:"0px"},children:(0,r.jsxs)("div",{className:"row",style:{marginTop:"10px",alignItems:""},children:[(0,r.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-8",children:(0,r.jsxs)(o.A,{children:[" ",(0,r.jsx)(l.TranslationConsumer,{children:e=>(0,r.jsxs)(i.Breadcrumb,{children:[s.parents.map((t=>(0,r.jsx)(i.Breadcrumb.Item,{onClick:()=>{void 0!==x&&null!==x&&x(t.itemCode,s.parents)},children:e(t.localizedKey)},t.itemCode))),(0,r.jsx)(i.Breadcrumb.Item,{children:e(s.localizedKey)},s.itemCode)]})})]})}),(0,r.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-4",children:(0,r.jsx)(l.TranslationConsumer,{children:e=>(0,r.jsx)("div",{className:"compartmentIcon",style:{justifyContent:"flex-start"},children:!1===y?"":(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsxs)("h4",{className:"shrText",children:[e("Common_Shareholder"),":"]})}),(0,r.jsx)("div",{className:"opSelect",children:(0,r.jsx)(i.Select,{placeholder:e("Common_Shareholder"),value:d,disabled:!t.shareholder,options:n.Zj(c),onChange:e=>h(e)})})]})})})}),(0,r.jsx)(l.TranslationConsumer,{children:e=>(0,r.jsxs)(i.Modal,{open:j,size:"small",children:[(0,r.jsx)(i.Modal.Content,{children:(0,r.jsx)("div",{children:(0,r.jsx)("b",{children:e("Confirm_Delete")})})}),(0,r.jsxs)(i.Modal.Footer,{children:[(0,r.jsx)(i.Button,{type:"secondary",content:e("Cancel"),onClick:()=>b(!1)}),(0,r.jsx)(i.Button,{type:"primary",content:e("PipelineDispatch_BtnSubmit"),onClick:()=>{b(!1),p()}})]})]})})]})}),(0,r.jsx)("div",{className:"col-3 col-sm-3 col-md-3 col-lg-2 col-xl-2",children:(0,r.jsxs)("div",{style:{float:"right",display:"inline-block",marginTop:"10px"},children:[g?(0,r.jsx)(i.Popup,{position:"bottom right",className:"popup-theme-wrap",element:(0,r.jsx)("div",{className:(t.add?"iconCircle ":"iconCircleDisable ")+"iconblock",onClick:S,children:(0,r.jsx)(i.Icon,{root:"common",name:"badge-plus",size:"small",color:"white"})}),on:"click",open:B,children:(0,r.jsx)("div",{onMouseLeave:()=>T(!1),children:(0,r.jsx)(l.TranslationConsumer,{children:e=>(0,r.jsx)(i.VerticalMenu,{children:(0,r.jsxs)(i.VerticalMenu,{children:[(0,r.jsx)(i.VerticalMenu.Header,{children:e("Common_Create")}),u.map((t=>(0,r.jsx)(i.VerticalMenu.Item,{onClick:()=>{return e=t.fieldName,T(!1),void m(e);var e},children:e(t.fieldValue)})))]})})})})}):"",C?(0,r.jsx)("div",{style:{marginLeft:"10px"},onClick:()=>{t.delete&&b(!0)},className:(t.delete?"iconCircle ":"iconCircleDisable ")+"iconblock",children:(0,r.jsx)(i.Icon,{root:"common",name:"delete",size:"small",color:"white"})}):""]})})]})}c.defaultProps={operationsVisibilty:{add:!1,delete:!1,shareholder:!1},breadcrumbItem:{itemName:"",itemCode:"",localizedKey:"",itemProps:{},parents:[],isComponent:!1},shareholders:[],selectedShareholder:"",popUpContent:[],shrVisible:!0,addVisible:!0,deleteVisible:!0};s(38726);function d(e){let{operationsVisibilty:t,breadcrumbItem:s,shareholders:a,selectedShareholder:i,onShareholderChange:l,onDelete:o,onAdd:n,popUpContent:d,shrVisible:h,handleBreadCrumbClick:p,addVisible:m,deleteVisible:u}=e;return(0,r.jsx)(c,{operationsVisibilty:t,breadcrumbItem:s,shareholders:a,selectedShareholder:i,onShareholderChange:l,onDelete:o,onAdd:n,popUpContent:d,shrVisible:h,handleBreadCrumbClick:p,addVisible:m,deleteVisible:u})}},60248:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var a=s(65043),i=s(97508),l=s(67907),o=s(72711),n=s(40854),r=s.n(n),c=s(72067),d=s(69062),h=s(40252),p=s(979),m=s(16432),u=s(70579);class y extends a.Component{constructor(){super(...arguments),this.refreshTimer=null,this.state={bayData:[],isReadyToRender:!1,isInitialLoad:!0,lastUpdatedTime:"",isManualMode:!0,refreshTime:1e4,selectedShipmentReceiptItem:{}},this.startRefreshTimer=()=>{this.refreshTimer=setInterval((()=>{this.setState({isReadyToRender:!1},(()=>{this.getBays()}))}),this.state.refreshTime)},this.stopRefreshTimer=()=>{null!==this.refreshTimer&&clearInterval(this.refreshTimer)},this.handleRefresh=()=>{this.setState({isReadyToRender:!1},(()=>{this.getBays()}))}}componentDidMount(){try{this.getBays(),this.getBayAllocationType(),this.getLookUpData()}catch(e){console.log("BayQueueDetailsComposite:Error occured on componentDidMount",e)}}componentWillUnmount(){this.stopRefreshTimer()}getBays(){try{r()(c.ytI,d.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{let t=(new Date).toLocaleDateString()+" "+(new Date).toLocaleTimeString();var s=e.data;if(this.stopRefreshTimer(),!0===s.IsSuccess){let e=[];Array.isArray(s.EntityResult.BayData.Table)&&s.EntityResult.BayData.Table.forEach((t=>{t.ShipmentReceiptItem=[];let a=[];Array.isArray(s.EntityResult.lstBayAllocationQueue)&&(a=s.EntityResult.lstBayAllocationQueue.filter((e=>e.BayCode===t.BayCode))),a.length>0&&a[0].AllocationItems.sort(((e,t)=>e.QueueNumber>t.QueueNumber?1:-1)).forEach((e=>{if(Array.isArray(s.EntityResult.BayData.Table2)){let a=s.EntityResult.BayData.Table2.filter((t=>null!==e.ShipmentCode&&e.ShipmentCode===t.ShipmentCode||null!==e.ReceiptCode&&e.ReceiptCode===t.Code));t.ShipmentReceiptItem.push(a[0])}})),e.push(t)})),this.setState({bayData:e,isReadyToRender:!0,isInitialLoad:!1,lastUpdatedTime:t})}else this.setState({bayData:[],isReadyToRender:!0,isInitialLoad:!1,lastUpdatedTime:t}),console.log("Error in getBays:",s.ErrorList);this.startRefreshTimer()})).catch((e=>{this.setState({bayData:[],isReadyToRender:!0,isInitialLoad:!1}),console.log("Error while getBays:",e)}))}catch(e){console.log("BayQueueDetailsComposite:Error occured on getBays",e)}}getBayAllocationType(){try{r()(c.NJd,d.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data,s=!0;!0===t.IsSuccess&&"false"===t.EntityResult.toLowerCase()&&(s=!1),this.setState({isManualMode:s})})).catch((e=>{console.log("Error while getBayAllocationType:",e)}))}catch(e){console.log("BayQueueDetailsComposite:Error occured on getBayAllocationType",e)}}getLookUpData(){try{r()(c.xAA+"?LookUpTypeCode=BayAllocation",d.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess&&(isNaN(parseInt(t.EntityResult.BayQueueMonitorRefreshInterval))||this.setState({refreshTime:parseInt(t.EntityResult.BayQueueMonitorRefreshInterval)}))}))}catch(e){console.log("BayQueueDetailsComposite:Error occured on getLookUpData",e)}}render(){return this.state.isInitialLoad?(0,u.jsx)(h.A,{message:"Loading"}):(0,u.jsx)(l.TranslationConsumer,{children:e=>(0,u.jsxs)("div",{children:[this.state.isReadyToRender?"":(0,u.jsx)("div",{className:"authLoading parameterLoader",children:(0,u.jsx)(o.Loader,{text:" ",className:"globalLoaderPositionPosition"})}),(0,u.jsx)("div",{className:"bayQueueMonitorContainer",children:(0,u.jsx)(m.JY,{children:(0,u.jsx)(p.A,{bayData:this.state.bayData,onBaySelect:this.handleBaySelect,isManualMode:this.state.isManualMode,onRefresh:this.handleRefresh,updatedTime:this.state.lastUpdatedTime,onCellClick:this.handleCellClick,selectedShipmentReceiptItem:this.state.selectedShipmentReceiptItem,isBayAllocation:!1})})})]})})}}const x=(0,i.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(y)},87485:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var a=s(65043),i=s(97508),l=s(65187),o=s(66554),n=s(60248),r=s(70579);class c extends a.Component{render(){return(0,r.jsxs)("div",{children:[(0,r.jsx)(l.A,{children:(0,r.jsx)(o.$,{breadcrumbItem:this.props.activeItem,shareholders:this.props.userDetails.EntityResult.ShareholderList,handleBreadCrumbClick:this.props.handleBreadCrumbClick,shrVisible:!1,addVisible:!1,deleteVisible:!1})}),(0,r.jsx)(l.A,{children:(0,r.jsx)(n.default,{})})]})}}const d=(0,i.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(c)},38726:()=>{}}]);
//# sourceMappingURL=7485.f89d4f9f.chunk.js.map