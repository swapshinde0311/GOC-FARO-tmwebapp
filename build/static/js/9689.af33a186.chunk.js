(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[9689,5841,8222,9999],{66554:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var i=s(65043),a=s(72711),n=s(67907),o=s(65187),r=s(69062),l=s(70579);function d(e){let{operationsVisibilty:t,breadcrumbItem:s,shareholders:d,selectedShareholder:c,onShareholderChange:h,onDelete:m,onAdd:u,popUpContent:p,shrVisible:D,handleBreadCrumbClick:y,addVisible:C,deleteVisible:E}=e;const[g,S]=(0,i.useState)(!1),[T,v]=(0,i.useState)(!1);function A(){t.add&&(p.length>0?v(!1===T):u())}return(0,l.jsxs)("div",{className:"row",style:{alignItems:"flex-start",padding:"0px"},children:[(0,l.jsx)("div",{className:"col-9 col-sm-9 col-md-9 col-lg-10 col-xl-10",style:{padding:"0px"},children:(0,l.jsxs)("div",{className:"row",style:{marginTop:"10px",alignItems:""},children:[(0,l.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-8",children:(0,l.jsxs)(o.A,{children:[" ",(0,l.jsx)(n.TranslationConsumer,{children:e=>(0,l.jsxs)(a.Breadcrumb,{children:[s.parents.map((t=>(0,l.jsx)(a.Breadcrumb.Item,{onClick:()=>{void 0!==y&&null!==y&&y(t.itemCode,s.parents)},children:e(t.localizedKey)},t.itemCode))),(0,l.jsx)(a.Breadcrumb.Item,{children:e(s.localizedKey)},s.itemCode)]})})]})}),(0,l.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-4",children:(0,l.jsx)(n.TranslationConsumer,{children:e=>(0,l.jsx)("div",{className:"compartmentIcon",style:{justifyContent:"flex-start"},children:!1===D?"":(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{children:(0,l.jsxs)("h4",{className:"shrText",children:[e("Common_Shareholder"),":"]})}),(0,l.jsx)("div",{className:"opSelect",children:(0,l.jsx)(a.Select,{placeholder:e("Common_Shareholder"),value:c,disabled:!t.shareholder,options:r.Zj(d),onChange:e=>h(e)})})]})})})}),(0,l.jsx)(n.TranslationConsumer,{children:e=>(0,l.jsxs)(a.Modal,{open:g,size:"small",children:[(0,l.jsx)(a.Modal.Content,{children:(0,l.jsx)("div",{children:(0,l.jsx)("b",{children:e("Confirm_Delete")})})}),(0,l.jsxs)(a.Modal.Footer,{children:[(0,l.jsx)(a.Button,{type:"secondary",content:e("Cancel"),onClick:()=>S(!1)}),(0,l.jsx)(a.Button,{type:"primary",content:e("PipelineDispatch_BtnSubmit"),onClick:()=>{S(!1),m()}})]})]})})]})}),(0,l.jsx)("div",{className:"col-3 col-sm-3 col-md-3 col-lg-2 col-xl-2",children:(0,l.jsxs)("div",{style:{float:"right",display:"inline-block",marginTop:"10px"},children:[C?(0,l.jsx)(a.Popup,{position:"bottom right",className:"popup-theme-wrap",element:(0,l.jsx)("div",{className:(t.add?"iconCircle ":"iconCircleDisable ")+"iconblock",onClick:A,children:(0,l.jsx)(a.Icon,{root:"common",name:"badge-plus",size:"small",color:"white"})}),on:"click",open:T,children:(0,l.jsx)("div",{onMouseLeave:()=>v(!1),children:(0,l.jsx)(n.TranslationConsumer,{children:e=>(0,l.jsx)(a.VerticalMenu,{children:(0,l.jsxs)(a.VerticalMenu,{children:[(0,l.jsx)(a.VerticalMenu.Header,{children:e("Common_Create")}),p.map((t=>(0,l.jsx)(a.VerticalMenu.Item,{onClick:()=>{return e=t.fieldName,v(!1),void u(e);var e},children:e(t.fieldValue)})))]})})})})}):"",E?(0,l.jsx)("div",{style:{marginLeft:"10px"},onClick:()=>{t.delete&&S(!0)},className:(t.delete?"iconCircle ":"iconCircleDisable ")+"iconblock",children:(0,l.jsx)(a.Icon,{root:"common",name:"delete",size:"small",color:"white"})}):""]})})]})}d.defaultProps={operationsVisibilty:{add:!1,delete:!1,shareholder:!1},breadcrumbItem:{itemName:"",itemCode:"",localizedKey:"",itemProps:{},parents:[],isComponent:!1},shareholders:[],selectedShareholder:"",popUpContent:[],shrVisible:!0,addVisible:!0,deleteVisible:!0};s(38726);function c(e){let{operationsVisibilty:t,breadcrumbItem:s,shareholders:i,selectedShareholder:a,onShareholderChange:n,onDelete:o,onAdd:r,popUpContent:c,shrVisible:h,handleBreadCrumbClick:m,addVisible:u,deleteVisible:p}=e;return(0,l.jsx)(d,{operationsVisibilty:t,breadcrumbItem:s,shareholders:i,selectedShareholder:a,onShareholderChange:n,onDelete:o,onAdd:r,popUpContent:c,shrVisible:h,handleBreadCrumbClick:m,addVisible:u,deleteVisible:p})}},62900:(e,t,s)=>{"use strict";s.d(t,{A:()=>E});var i=s(65043),a=s(67907),n=s(72711),o=s(72067),r=s(69062),l=s(97508),d=s(44192),c=s(40854),h=s.n(c),m=s(53536),u=s.n(m),p=s(86111),D=s.n(p),y=s(70579);class C extends i.Component{constructor(){super(...arguments),this.state={isPasswordRequired:!1,Password:"",validationErrors:r.Th(d.Qh),authenticationResponse:"",btnAuthenticateEnabled:!0},this.onFieldChange=(e,t)=>{this.setState({Password:t});const s=u().cloneDeep(this.state.validationErrors);void 0!==d.Qh[e]&&(s[e]=r.jr(d.Qh[e],t),this.setState({validationErrors:s,authenticationResponse:""}))},this.validatePassword=e=>{this.setState({btnAuthenticateEnabled:!1});const t={...this.state.validationErrors};null!==e&&""!==e||(t.Password="UserValidationForm_ReqfldValPassword"),this.setState({validationErrors:t});var s=!0;return s&&(s=Object.values(t).every((function(e){return""===e}))),s},this.onCloseClick=()=>{this.setState({isPasswordRequired:!1,authenticationResponse:"",btnAuthenticateEnabled:!0},(()=>this.props.handleClose()))},this.AuthenticateUser=()=>{if(this.validatePassword(this.state.Password)){this.setState({authenticationResponse:""});try{var e=this.state.Password,t=this.props.Username,s=D().lib.WordArray.random(16),i=D().PBKDF2(t,s,{keySize:8,iterations:100}),a=D().lib.WordArray.random(16),n=D().AES.encrypt(e,i,{iv:a,padding:D().pad.Pkcs7,mode:D().mode.CBC}),l=s.toString()+a.toString()+n.toString();h()(o.KrY+"?encryptedPassword="+encodeURIComponent(l),r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess&&"true"===t.EntityResult.toLowerCase()?(this.setState({isPasswordRequired:!1}),this.props.handleOperation()):this.setState({authenticationResponse:t.ErrorList[0],btnAuthenticateEnabled:!0})})).catch((e=>{this.setState({authenticationResponse:e,btnAuthenticateEnabled:!0})}))}catch(d){this.setState({authenticationResponse:d,btnAuthenticateEnabled:!0})}}else this.setState({btnAuthenticateEnabled:!0})}}componentDidMount(){try{this.IsPasswordRequired()}catch(e){console.log("BaseProductDetailsComposite:Error occured on componentDidMount",e)}}IsPasswordRequired(){try{let e=r.Hp(this.props.userDetails.EntityResult.roleFunctionInfo,this.props.functionName,this.props.functionGroup);this.setState({isPasswordRequired:e}),!1===e&&this.props.handleOperation()}catch(e){console.log("Error in IsPasswordRequired method:",e)}}render(){return(0,y.jsx)("div",{children:!0===this.state.isPasswordRequired?(0,y.jsx)(a.TranslationConsumer,{children:e=>(0,y.jsxs)(n.Modal,{open:!0,size:"mini",children:[(0,y.jsxs)(n.Modal.Content,{children:[(0,y.jsxs)("div",{className:"row",children:[(0,y.jsx)("div",{className:"col col-lg-8",style:{marginLeft:"10px"},children:(0,y.jsx)("h4",{children:e("User_Authentication")})}),(0,y.jsx)("div",{className:"col-12 col-lg-3",style:{textAlign:"right"},onClick:this.onCloseClick,children:(0,y.jsx)(n.Icon,{root:"common",name:"close"})})]}),(0,y.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,y.jsx)("div",{className:"col col-lg-12",children:(0,y.jsx)("label",{children:(0,y.jsxs)("h5",{children:[e("UserValidation_Form_AccountName"),":",this.props.Username]})})}),(0,y.jsx)("div",{className:"col col-lg-12",children:(0,y.jsx)(n.Input,{fluid:!0,type:"password",disablePasswordToggle:!1,value:this.state.Password,indicator:"required",onChange:e=>this.onFieldChange("Password",e),label:e("AccessCardInfo_x_Pwd"),error:e(this.state.validationErrors.Password),reserveSpace:!1})})]})]}),(0,y.jsxs)(n.Modal.Footer,{children:[(0,y.jsx)("span",{className:"ui error-message autherrormsg",children:e(this.state.authenticationResponse)}),(0,y.jsx)(n.Button,{type:"primary",disabled:!this.state.btnAuthenticateEnabled,content:e("UserValidationForm_Authentication"),onClick:this.AuthenticateUser})]})]})}):null})}}const E=(0,l.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(C)},91637:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var i=s(65043),a=s(97508),n=s(65187),o=s(40854),r=s.n(o),l=s(66554),d=s(72067),c=s(69062),h=s(53536),m=s.n(h),u=s(46100),p=s(44192),D=s(67907),y=s(35861),C=s(72711),E=s(34348),g=s.n(E),S=s(98277),T=s(70579);function v(e){let{onFieldChange:t,modEodAdminDetails:s,validationErrors:i,handleSave:a,handCloseDay:n,handOpenDay:o,minutesError:r,handReset:l,OpenDayEnabled:d,CloseDayEnabled:c,saveEnabled:h}=e;function m(e){try{var t=e.slice(0,2),s=e.slice(2,5);return t>12&&t<22?"0"+(t-12)+s+" PM":t>=22&&t<24?t-12+s+" PM":"12"===t?"12"+s+" PM":"00"===t?"12"+s+" AM":e+" AM"}catch(i){console.log("EODAdministrationDetails:Error occured on showOpentime",i)}}function p(e){return parseInt(e)<10&&(e="0"+e),e}return(0,T.jsx)(D.TranslationConsumer,{children:e=>(0,T.jsxs)("div",{className:"detailsContainer",children:[(0,T.jsxs)("div",{className:"row",children:[(0,T.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,T.jsx)(C.Select,{fluid:!0,label:e("EOD_TerminalAction"),disabled:!0,value:s.ID===u.Re.ID?"NOTSTARTED":s.CurrentAction,onChange:e=>t("CurrentAction",e),options:(0,y.r4)([{text:e("ShiftInfo_NotStarted"),value:"NOTSTARTED"},{text:e("ShiftInfo_Open"),value:"OPEN"},{text:e("ShiftInfo_Close"),value:"CLOSE"}],e("Common_Select")),reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage")})}),(0,T.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,T.jsx)(C.Input,{fluid:!0,value:s.ID===u.Re.ID?"":m(s.OpenTime.slice(11,16)),label:e("EOD_ActionStartTime"),disabled:!0})}),(0,T.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,T.jsx)(S._,{value:g()(null===s.CloseTime||void 0===s.CloseTime||""===s.CloseTime?(new Date).setSeconds(0):new Date(s.CloseTime).setSeconds(0)),label:e("EOD_EODTime"),displayFormat:"hh:mm A",onChange:e=>t("CloseTime",function(e){var t=new Date(e),s=t.getFullYear(),i=t.getMonth()+1,a=t.getDate(),n=t.getHours(),o=t.getMinutes(),r=t.getSeconds();return s+"-"+p(i)+"-"+p(a)+" "+p(n)+":"+p(o)+":"+p(r)}(e)),error:e(i.CloseTime)})})]}),(0,T.jsxs)("div",{className:"row",children:[(0,T.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,T.jsxs)("div",{className:"row",style:{paddingLeft:"16px"},children:[(0,T.jsx)(C.Input,{value:null===s.DenyEntryTime?"":s.DenyEntryTime,label:e("EOD_DenyEntry"),indicator:"required",onChange:e=>t("DenyEntryTime",e),reserveSpace:!1,error:e(i.DenyEntryTime)}),(0,T.jsx)("span",{style:{paddingTop:"35px",paddingLeft:"12px"},children:e("minutes")})]})}),(0,T.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,T.jsxs)("div",{className:"row",style:{paddingLeft:"16px"},children:[(0,T.jsx)(C.Input,{value:null===s.DenyLoadTime?"":s.DenyLoadTime,label:e("EOD_DenyLoad"),indicator:"required",onChange:e=>t("DenyLoadTime",e),reserveSpace:!1,className:"denyLoadMinutes",error:e(""!==i.DenyLoadTime?i.DenyLoadTime:r)}),(0,T.jsx)("span",{style:{paddingTop:"35px",paddingLeft:"12px"},children:e("minutes")})]})}),(0,T.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,T.jsx)(C.Input,{fluid:!0,value:null===s.Remarks?"":s.Remarks,label:e("EOD_Remarks"),onChange:e=>t("Remarks",e),reserveSpace:!1,error:e(i.Remarks)})})]}),(0,T.jsxs)("div",{className:"row",children:[(0,T.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,T.jsx)(C.Checkbox,{fluid:!0,label:e("EOD_CloseAutomatic"),disabled:!0,checked:s.IsCloseAutomatic})}),(0,T.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,T.jsx)(C.Checkbox,{fluid:!0,label:e("EOD_OpenAutomatic"),disabled:!0,checked:s.IsOpenAutomatic})})]}),(0,T.jsx)("div",{className:"row",children:(0,T.jsxs)("div",{className:"col col-lg-12",style:{textAlign:"right"},children:[(0,T.jsx)(C.Button,{className:"OpenDayButton",onClick:o,disabled:!d,content:e("EOD_OpenDay")}),(0,T.jsx)(C.Button,{className:"CloseDayButton",onClick:n,disabled:!c,content:e("EOD_EOD")}),(0,T.jsx)(C.Button,{className:"ResetButton",onClick:l,content:e("EODAdministration_Reset")}),(0,T.jsx)(C.Button,{className:"saveButton",onClick:a,disabled:!h,content:e("Save")})]})})]})})}var A=s(78374);function R(e){let{modEodSumary:t}=e;const[s]=(0,D.useTranslation)(),i=e=>null==e||""===e||void 0===e?"":new Date(e).toLocaleDateString()+" "+new Date(e).toLocaleTimeString();return(0,T.jsxs)("div",{className:"detailsContainer",children:[(0,T.jsx)("div",{className:"row",children:(0,T.jsx)("div",{className:"col col-md-8 col-lg-9 col col-xl-9",children:(0,T.jsx)("h3",{children:s("EODAdminInfo_EODSummary")})})}),(0,T.jsx)("div",{className:"row",children:(0,T.jsx)("div",{className:"col-12 detailsTable",children:(0,T.jsxs)(A.bQ,{data:t,scrollable:!0,value:"",children:[(0,T.jsx)(A.bQ.Column,{className:"compColHeight",field:"OpenTime",header:s("EOD_ActionStartTime"),renderer:e=>i(e.rowData.OpenTime),editable:!1,editFieldType:"text"},"OpenTime"),(0,T.jsx)(A.bQ.Column,{className:"compColHeight",field:"CloseTime",header:s("EOD_ActionEndTime"),renderer:e=>i(e.rowData.CloseTime),editable:!1,editFieldType:"text"},"CloseTime"),(0,T.jsx)(A.bQ.Column,{className:"compColHeight",field:"Action",header:s("EOD_Status"),editable:!1,editFieldType:"text"},"Action")]})})})]})}var x=s(11981),b=s(14159),O=(s(92342),s(40252)),f=s(80312),j=s(93779),k=s(7523),I=s(62900);class N extends i.Component{constructor(){super(...arguments),this.state={operationsVisibilty:{},selectedShareholder:"",minutesError:"",eodAdminDetails:{},modEodAdminDetails:{},eodSummary:[],modEodSumary:[],isTerminalEntryTimeValid:"",isNextWorkingDay:!1,validationErrors:c.Th(p.T7),isReadyToRender:!1,isSummaryReadyToRender:!1,ScheduleDayOfMonth:"",Enabled:!1,OpenDayEnabled:!1,CloseDayEnabled:!1,SaveEnabled:!1,Save:!1,close:!1,isCurrentTime:!1,saveClick:!0,showAuthenticationLayout:!1,tempEodAdminDetails:{}},this.onFieldChange=(e,t)=>{try{var s=this.state.modEodAdminDetails;s[e]=t,this.setState({modEodAdminDetails:s});const i=m().cloneDeep(this.state.validationErrors);"DenyEntryTime"!==e&&"DenyLoadTime"!==e||(c.bo(s.DenyEntryTime)<c.bo(s.DenyLoadTime)?this.setState({minutesError:"EODAdministration_DenyLoadTimeExceeded",saveClick:!1}):this.setState({minutesError:"",saveClick:!0})),void 0!==p.T7[e]&&(i[e]=c.jr(p.T7[e],t),this.setState({validationErrors:i}))}catch(i){console.log("EODAdminInfoComposite:Error occured on onFieldChange",i)}},this.OpenDayEnent=e=>{try{(0,b.toast)((0,T.jsx)(n.A,{children:(0,T.jsx)(x.A,{notificationMessage:e})}),{autoClose:"success"===e.messageType&&1e4})}catch(t){console.log("EODAdministrationComposite: Error occured on OpenDayEnent",t)}},this.handEODOpenDay=()=>{try{this.setState({OpenDayEnabled:!1});var e=m().cloneDeep(this.state.modEodAdminDetails),t={messageType:"critical",message:"",messageResultDetails:[]},s=[{key:j.Pk,value:e.CloseTime}],i={ShareholderCode:this.props.userDetails.EntityResult.PrimaryShareholder,KeyCodes:s};r()(d.lDU,c.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{var s=e.data;t.messageType=s.IsSuccess?"success":"critical",!0===s.IsSuccess?(t.message="EODAdminInfo_OpenSuccess",this.IsNextWorkingDay(),this.getLookUpData()):t.message=s.ErrorList[0],this.OpenDayEnent(t),this.GetEODAdminDetails()}))}catch(a){this.OpenDayEnent(t),this.setState({OpenDayEnabled:!0}),console.log("Error while handEODOpenDay:",a)}},this.handEODCloseDay=()=>{try{this.setState({CloseDayEnabled:!1});var e={messageType:"critical",message:"",messageResultDetails:[]},t=[{key:j._R,value:this.state.modEodAdminDetails.ID}],s={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,keyCodes:t};r()(d.J8Y,c.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data;e.messageType=s.IsSuccess?"success":"critical",!0===s.IsSuccess?(e.message="EODAdminInfo_CloseSuccess",this.setState({close:!0})):(e.message=s.ErrorList[0],this.setState({close:!1})),this.OpenDayEnent(e),this.IsNextWorkingDay(),this.getLookUpData()}))}catch(i){this.OpenDayEnent(e),this.setState({CloseDayEnabled:!0}),console.log("Error while handEODCloseDay:",i)}},this.handleSaveClick=()=>{try{var e=this.state.saveClick,t=m().cloneDeep(this.state.validationErrors),s={messageType:"critical",message:"",messageResultDetails:[]};Object.keys(t).forEach((s=>{""!==t[s]&&(e=!1)})),""!==t.CloseTime&&(s.messageType="critical",s.message="EOD_EnterEODTime",this.OpenDayEnent(s)),!0===e&&this.handleSave()}catch(i){console.log("Error while handleSaveClick:",i)}},this.handleUpdate=()=>{this.handleAuthenticationClose();try{this.setState({SaveEnabled:!1});var e={messageType:"critical",message:"",messageResultDetails:[{keyFields:["EODAdminInfo_Saving"],keyValues:["Save"],isSuccess:!1,errorMessage:""}]},t=m().cloneDeep(this.state.modEodAdminDetails);t.CloseTime=this.state.eodAdminDetails.CloseTime.slice(0,4)+t.CloseTime.slice(4);var s=[{key:j.Pk,value:t.CloseTime},{key:j.Bv,value:null===t.CurrentAction?"NOTSTARTED":t.CurrentAction},{key:j._R,value:t.ID},{key:j._B,value:t.CloseTime},{key:j.jC,value:this.state.ScheduleDayOfMonth}],i={CurrentAction:null===t.CurrentAction?"NOTSTARTED":t.CurrentAction,IsOpenAutomatic:t.IsOpenAutomatic,IsCloseAutomatic:t.IsCloseAutomatic,DenyEntryTime:t.DenyEntryTime,DenyLoadTime:t.DenyLoadTime,Remarks:t.Remarks},a={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,keyCodes:s,entity:i};r()(d.cyt,c.tW(a,this.props.tokenDetails.tokenInfo)).then((s=>{var i=s.data;e.messageType=i.IsSuccess?"success":"critical",!0===i.IsSuccess?(this.state.modEodAdminDetails.CloseTime.slice(4)!==this.state.eodAdminDetails.CloseTime.slice(4)&&!0===this.state.CloseDayEnabled||this.state.modEodAdminDetails.CloseTime.slice(4)!==this.state.eodAdminDetails.CloseTime.slice(4)&&!0===this.state.OpenDayEnabled?(e.messageResultDetails[0].isSuccess=!0,e.message="EODAdminInfo_SavingClosetime"):e.messageResultDetails[0].isSuccess=!0,this.OpenDayEnent(e),this.setState({eodAdminDetails:t},(()=>{this.GetEODAdminDetails()}))):(e.messageResultDetails[0].errorMessage="EODAdminInfo_CannotChangeEODTime",this.OpenDayEnent(e))})),this.setState({SaveEnabled:!0})}catch(n){this.setState({SaveEnabled:!0}),console.log("Error while EODSaveDay:",n)}},this.handleSave=()=>{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showAuthenticationLayout:e},(()=>{!1===e&&this.handleUpdate()}))},this.handleReset=()=>{try{var e=m().cloneDeep(this.state.eodAdminDetails);this.setState({modEodAdminDetails:e,validationErrors:[]},(()=>{this.handleResetValidationError(),c.bo(e.DenyEntryTime)<c.bo(e.DenyLoadTime)?this.setState({minutesError:"EODAdministration_DenyLoadTimeExceeded",saveClick:!1}):this.setState({minutesError:""})}))}catch(t){console.log("EODAdministrationComposite:Error occured on handleReset",t)}},this.OpenTimeIsEqualNow=e=>{try{var t=this.state.modEodSumary,s=[{key:j.Pk,value:t[0].OpenTime}],i={ShareholderCode:this.props.userDetails.EntityResult.PrimaryShareholder,keyCodes:s};r()(d.W8b,c.tW(i,this.props.tokenDetails.tokenInfo)).then((t=>{const s=t.data;if(!0===s.IsSuccess){var i=s.EntityResult.toLowerCase();this.setState({isCurrentTime:"false"!==i}),e()}else console.log("EODAdministrationComposite: Error occurred on OpenTimeIsEqualNow")}))}catch(a){console.log("EODAdministrationComposite: Error occurred on OpenTimeIsEqualNow",a)}},this.onShareholderChange=()=>{},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})}}showClosetime(e){try{return(new Date).getUTCFullYear()+e.slice(4)}catch(t){console.log("EODAdministrationDetails:Error occured on showClosetime",t)}}GetEODAdminDetails(){try{var e={ShareholderCode:this.props.userDetails.EntityResult.PrimaryShareholder};r()(d.ckn,c.tW(e,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess&&void 0!==t.EntityResult.CloseTime){t.EntityResult.CloseTime=t.EntityResult.CloseTime.slice(0,19),this.setState({eodAdminDetails:m().cloneDeep(t.EntityResult),modEodAdminDetails:m().cloneDeep(t.EntityResult),isReadyToRender:!0},(()=>{this.GetEODSummary()}));var s=this.showClosetime(this.state.modEodAdminDetails.CloseTime),i=this.state.modEodAdminDetails;i.CloseTime=s,this.setState({modEodAdminDetails:i})}else this.setState({eodAdminDetails:m().cloneDeep(u.Re),modEodAdminDetails:m().cloneDeep(u.Re)},(()=>{this.GetEODSummary()})),console.log("Error in GetEODAdminDetails",t.ErrorList)}))}catch(t){console.log("Error while getEODAdminDetails:",t)}}GetEODSummary(){try{var e={ShareholderCode:this.props.userDetails.EntityResult.PrimaryShareholder};r()(d.PCd,c.tW(e,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data,s=[],i=this;if(!0===t.IsSuccess&&void 0!==t.EntityResult.Table1&&t.EntityResult.Table1.length>0&&void 0!==t.EntityResult.Table1[0].CloseTime&&""!==t.EntityResult.Table1[0].CloseTime)this.setState({eodSummary:m().cloneDeep(t.EntityResult.Table1),modEodSumary:m().cloneDeep(t.EntityResult.Table1),isSummaryReadyToRender:!0},(()=>{if(null!==this.state.modEodSumary[0]&&void 0!==this.state.modEodSumary[0]){var e=new Promise((function(e,t){i.OpenTimeIsEqualNow(e)}));s.push(e)}}));else{let e=[],t=[];this.setState({eodSummary:e,modEodSumary:t,isSummaryReadyToRender:!0},(()=>{if(null!==this.state.modEodSumary[0]&&void 0!==this.state.modEodSumary[0]){var e=new Promise((function(e,t){i.OpenTimeIsEqualNow(e)}));s.push(e)}}))}var a={messageType:"critical",message:"",messageResultDetails:[]};this.state.eodAdminDetails.ID!==u.Re.ID?this.setState({OpenDayEnabled:!1,CloseDayEnabled:this.state.Enabled,SaveEnabled:this.state.Enabled}):Promise.all(s).then((()=>{this.state.eodSummary.length>0?this.state.isCurrentTime?(this.state.close||(a.messageType="success",a.message="EODAdminInfo_OpenOnce",this.OpenDayEnent(a)),this.setState({OpenDayEnabled:!1})):this.setState({OpenDayEnabled:!0}):this.setState({OpenDayEnabled:!this.state.modEodAdminDetails.DenyOpen&&this.state.Enabled}),this.setState({CloseDayEnabled:!1,SaveEnabled:this.state.Enabled}),this.state.isTerminalEntryTimeValid===k.wU.WeekEndTime&&!1===this.state.isNextWorkingDay?(a.messageType="success",a.message="EODAdminInfo_Weekend",this.OpenDayEnent(a),this.setState({OpenDayEnabled:!1})):this.state.isTerminalEntryTimeValid===k.wU.HolidayTime&&!1===this.state.isNextWorkingDay&&(a.messageType="success",a.message="EODAdminInfo_Holiday",this.OpenDayEnent(a),this.setState({OpenDayEnabled:!1}))})),this.state.isNextWorkingDay&&(a.messageType="success",a.message="EODAdminInfo_NextWorkingDay",this.OpenDayEnent(a),this.setState({OpenDayEnabled:!1,CloseDayEnabled:!1}))}))}catch(t){console.log("Error while getEODSummary:",t)}}IsTerminalEntryTimeValid(){try{var e={ShareholderCode:this.props.userDetails.EntityResult.PrimaryShareholder};r()(d.aaQ,c.tW(e,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({isTerminalEntryTimeValid:t.EntityResult},(()=>{this.GetEODAdminDetails()})):(this.setState((()=>{this.GetEODAdminDetails()})),console.log("Error in IsTerminalEntryTimeValid",t.ErrorList))}))}catch(t){console.log("Error while getIsTerminalEntryTimeValid:",t)}}IsNextWorkingDay(){try{var e={ShareholderCode:this.props.userDetails.EntityResult.PrimaryShareholder};r()(d.vWJ,c.tW(e,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(null!==t.EntityResult)var s=t.EntityResult.toLowerCase();else this.setState({isNextWorkingDay:!1});!0===t.IsSuccess?this.setState({isNextWorkingDay:"true"===s},(()=>{this.IsTerminalEntryTimeValid()})):(this.setState((()=>{this.IsTerminalEntryTimeValid()})),console.log("Error while IsNextWorkingDay:",t.ErrorList))}))}catch(t){console.log("Error while IsNextWorkingDay:",t)}}handleResetValidationError(){try{this.setState({validationErrors:c.Th(p.T7)})}catch(e){console.log("EODAdministrationComposite:Error occured on handleResetValidationError",e)}}getLookUpData(){try{r()(d.xAA+"?LookUpTypeCode=EODConfiguration",c.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;if(!0===t.IsSuccess){let e=t.EntityResult.ScheduleDayOfMonth;this.setState({ScheduleDayOfMonth:e})}else console.log("Error in getLookUpData: ",t.ErrorList)}))}catch(e){console.log("EODAdministrationComposite: Error occurred on getLookUpData",e)}}componentDidMount(){try{if(c.pJ(this.props.userDetails.EntityResult.IsArchived),!c.ab(this.props.userDetails.EntityResult.FunctionsList,f.i.view,f.YY)){return void this.OpenDayEnent({messageType:"critical",messageResultDetails:[{keyFields:"",keyValues:"",isSuccess:!1,errorMessage:"BSI_EODAdministrationSecurityError"}]})}this.setState({Enabled:c.ab(this.props.userDetails.EntityResult.FunctionsList,f.i.modify,f.YY)},(()=>{this.IsNextWorkingDay(),this.getLookUpData()}))}catch(e){console.log("EODAdminInfoComposite:Error occured on componentDidMount",e)}}render(){return(0,T.jsxs)("div",{children:[this.state.isReadyToRender&&this.state.isSummaryReadyToRender?(0,T.jsxs)("div",{children:[(0,T.jsx)(n.A,{children:(0,T.jsx)(l.$,{operationsVisibilty:this.state.operationsVisibilty,breadcrumbItem:this.props.activeItem,shareholders:this.props.userDetails.EntityResult.ShareholderList,selectedShareholder:this.state.selectedShareholder,onShareholderChange:this.onShareholderChange,addVisible:!1,deleteVisible:!1,shrVisible:!1,handleBreadCrumbClick:this.props.handleBreadCrumbClick})}),(0,T.jsx)(n.A,{children:(0,T.jsx)(v,{modEodAdminDetails:this.state.modEodAdminDetails,onFieldChange:this.onFieldChange,validationErrors:this.state.validationErrors,minutesError:this.state.minutesError,handleSave:this.handleSaveClick,handCloseDay:this.handEODCloseDay,handOpenDay:this.handEODOpenDay,handReset:this.handleReset,OpenDayEnabled:this.state.OpenDayEnabled,CloseDayEnabled:this.state.CloseDayEnabled,saveEnabled:this.state.SaveEnabled})}),(0,T.jsx)(n.A,{children:(0,T.jsx)(R,{modEodSumary:this.state.modEodSumary})})]}):(0,T.jsx)(O.A,{loadingClass:"globalLoader",message:""}),(0,T.jsx)(n.A,{children:(0,T.jsx)(b.ToastContainer,{hideProgressBar:!0,closeOnClick:!1,closeButton:!0,newestOnTop:!0,position:"bottom-right",toastClassName:"toast-notification-wrap"})}),this.state.showAuthenticationLayout?(0,T.jsx)(I.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:f.i.modify,functionGroup:f.YY,handleOperation:this.handleUpdate,handleClose:this.handleAuthenticationClose}):null]})}}const w=(0,a.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(N)},98277:(e,t,s)=>{"use strict";s.d(t,{_:()=>n});s(65043);var i=s(7676),a=s(70579);function n(e){let{value:t,label:s,displayFormat:n,onChange:o,disabled:r,error:l}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"ui input-label",children:(0,a.jsx)("span",{className:"input-label-message",children:s})}),(0,a.jsx)("div",{className:"ui single-input picker-input datetime-time  fluid has-icon",children:(0,a.jsx)(i.A,{showSecond:!1,defaultValue:t,value:t,onChange:o,format:n,use12Hours:!0,className:"input-wrap",disabled:r,error:l})})]})}n.defaultProps={disabled:!1}},80312:(e,t,s)=>{"use strict";s.d(t,{$3:()=>G,$H:()=>ie,$J:()=>ue,$K:()=>De,$V:()=>Ot,$b:()=>St,$p:()=>U,AE:()=>R,Al:()=>B,B2:()=>it,By:()=>Rt,CW:()=>Dt,DA:()=>l,Ee:()=>Fe,FO:()=>k,Fy:()=>Le,G9:()=>st,H8:()=>ee,Hq:()=>rt,Ig:()=>P,Iu:()=>C,JI:()=>dt,JJ:()=>te,JU:()=>Y,Jz:()=>Ye,KQ:()=>oe,Kk:()=>Ze,Kw:()=>et,LP:()=>jt,LR:()=>c,Lg:()=>J,Mg:()=>Se,Mm:()=>L,N1:()=>$,Nm:()=>p,No:()=>de,Ow:()=>W,P2:()=>n,P8:()=>Ee,PD:()=>Ie,PE:()=>h,PG:()=>z,PP:()=>ut,Pb:()=>we,QB:()=>T,QC:()=>Z,RE:()=>nt,RO:()=>Je,Rc:()=>Ct,Rl:()=>Tt,Rx:()=>yt,TI:()=>E,Tm:()=>pe,Ug:()=>X,Ur:()=>He,V9:()=>d,VK:()=>H,VL:()=>me,VQ:()=>re,WD:()=>Me,Wf:()=>O,YO:()=>N,YY:()=>ke,Yb:()=>ye,Yg:()=>Ge,Z9:()=>mt,ZE:()=>ct,ZU:()=>S,_N:()=>Et,_S:()=>ft,_d:()=>kt,aS:()=>F,aZ:()=>ht,au:()=>Ae,b0:()=>bt,bL:()=>Be,c2:()=>_e,d4:()=>Pe,dB:()=>y,dD:()=>Ue,dK:()=>q,dY:()=>I,de:()=>m,dv:()=>fe,eQ:()=>r,f3:()=>Te,fF:()=>M,fL:()=>gt,fN:()=>At,fk:()=>f,fl:()=>Ce,fr:()=>v,go:()=>a,h:()=>he,hD:()=>b,hE:()=>j,hh:()=>Xe,hk:()=>ne,hz:()=>pt,i:()=>i,j2:()=>ot,jN:()=>Q,je:()=>D,jx:()=>_,kL:()=>$e,ke:()=>We,km:()=>le,l0:()=>ae,l6:()=>qe,lz:()=>w,m0:()=>g,nS:()=>xe,nk:()=>lt,nn:()=>A,np:()=>K,oh:()=>at,op:()=>ze,pt:()=>Ve,qk:()=>ce,qp:()=>ge,r6:()=>be,rQ:()=>Oe,rj:()=>V,rp:()=>o,t3:()=>vt,tM:()=>Ne,to:()=>Nt,ts:()=>tt,uH:()=>ve,uy:()=>Ke,w1:()=>je,x5:()=>se,xz:()=>x,y_:()=>Qe,yu:()=>u,yx:()=>xt,z8:()=>Re,z_:()=>It});const i={view:"view",add:"add",modify:"modify",remove:"remove"},a="carriercompany",n="driver",o="customer",r="trailer",l="originterminal",d="destination",c="primemover",h="vehicle",m="shipmentbycompartment",u="shipmentbyproduct",p="ViewShipmentStatus",D="vessel",y="order",C="OrderForceClose",E="contract",g="receiptplanbycompartment",S="ViewMarineShipment",T="MarineShipmentByCompartment",v="ViewMarineReceipt",A="supplier",R="finishedproduct",x="RailDispatch",b="RailReceipt",O="RailRoute",f="RailWagon",j="CloseRailDispatch",k="PrintRailBOL",I="PrintRailFAN",N="RailDispatchLoadSpotAssignment",w="RailDispatchProductAssignment",P="ViewRailDispatch",L="ViewRailLoadingDetails",M="CloseRailReceipt",V="PrintRailBOD",_="PrintRailRAN",B="ViewRailReceipt",U="ViewRailUnLoadingDetails",F="SMS",W="UnAccountedTransactionTank",H="UnAccountedTransactionMeter",q="PipelineDispatch",G="PipelineReceipt",Q="PipelineDispatchManualEntry",Y="PipelineReceiptManualEntry",z="LookUpData",K="HSEInspection",J="HSEInspectionConfig",$="Email",Z="Shareholder",X="LocationConfig",ee="DeviceConfig",te="baseproduct",se="SiteView",ie="LeakageManualEntry",ae="Terminal",ne="SlotInformation",oe="TankGroup",re="Tank",le="SealMaster",de="TankEODEntry",ce="UnmatchedLocalTransactions",he="AccessCard",me="ResetPin",ue="SlotConfiguration",pe="PrintMarineFAN",De="PrintMarineBOL",ye="ViewMarineLoadingDetails",Ce="ViewMarineShipmentAuditTrail",Ee="CloseMarineShipment",ge="IssueCard",Se="ActivateCard",Te="RevokeCard",ve="AutoIDAssociation",Ae="MarineReceiptByCompartment",Re="PrintMarineRAN",xe="PrintMarineBOD",be="ViewMarineUnloadingDetails",Oe="ViewMarineReceiptAuditTrail",fe="CloseMarineReceipt",je="WeekendConfig",ke="EODAdmin",Ie="PrintBOL",Ne="PrintFAN",we="PrintBOD",Pe="CloseShipment",Le="CloseReceipt",Me="CONTRACTFORCECLOSE",Ve="Captain",_e="OverrideShipmentSequence",Be="KPIInformation",Ue="Language",Fe="WebPortalUserMap",We="BayGroup",He="PipelineHeaderSiteView",qe="TankMonitor",Ge="PersonAdmin",Qe="ProductReconciliationReports",Ye="ReportConfiguration",ze="EXECONFIGURATION",Ke="ShareholderAllocation",Je="NotificationGroup",$e="NotificationRestriction",Ze="NotificationConfig",Xe="AllowWeighBridgeManualEntry",et="ProductAllocation",tt="MasterDeviceConfiguration",st="ShareholderAgreement",it="TANKSHAREHOLDERPRIMEFUNCTION",at="ROLEADMIN",nt="ShiftConfig",ot="PrinterConfiguration",rt="CustomerAgreement",lt="BaySCADAConfiguration",dt="RailReceiptUnloadSpotAssignment",ct="STAFF_VISITOR",ht="PipelineMeterSiteView",mt="RailSiteView",ut="MarineSiteView",pt="LoadingDetails",Dt="UnloadingDetails",yt="RoadHSEInspection",Ct="RoadHSEInspectionConfig",Et="MarineHSEInspection",gt="MarineHSEInspectionConfig",St="RailHSEInspection",Tt="RailHSEInspectionConfig",vt="PipelineHSEInspection",At="PipelineHSEInspectionConfig",Rt="PrintRAN",xt="ViewReceiptStatus",bt="customerrecipe",Ot="COAParameter",ft="COATemplate",jt="COAManagement",kt="COACustomer",It="COAAssignment",Nt="ProductForecastConfiguration"},93779:(e,t,s)=>{"use strict";s.d(t,{$A:()=>I,$L:()=>lt,$Q:()=>Ue,Ae:()=>je,BX:()=>ne,Bl:()=>pe,Bv:()=>Ce,Bw:()=>Z,Cb:()=>j,Cg:()=>O,DN:()=>nt,D_:()=>ot,Dm:()=>N,E7:()=>K,EW:()=>P,FN:()=>ae,FR:()=>n,FY:()=>pt,GA:()=>Fe,GT:()=>S,Ge:()=>we,HB:()=>oe,JQ:()=>z,KJ:()=>ee,Kz:()=>q,Ln:()=>H,M$:()=>He,O5:()=>tt,Of:()=>Te,Oo:()=>st,Pk:()=>ye,Pm:()=>$,Q5:()=>dt,QK:()=>qe,QV:()=>Ze,QZ:()=>ct,Qu:()=>se,RX:()=>Oe,Rb:()=>F,Rp:()=>A,SP:()=>D,T5:()=>Me,UB:()=>E,UT:()=>l,Ui:()=>Q,VA:()=>U,Vk:()=>Ae,Wb:()=>Re,Wv:()=>ve,X3:()=>ze,Y4:()=>W,Yl:()=>it,Zx:()=>J,_B:()=>Ee,_C:()=>f,_R:()=>De,_j:()=>ce,_n:()=>i,aM:()=>M,aW:()=>Be,bW:()=>B,c4:()=>at,cD:()=>r,c_:()=>x,cx:()=>_,dL:()=>ht,eE:()=>le,eS:()=>Qe,eT:()=>v,f:()=>w,f7:()=>ue,fR:()=>he,g1:()=>de,gN:()=>Ke,gO:()=>G,iH:()=>rt,ij:()=>et,j1:()=>b,jC:()=>ge,je:()=>me,jz:()=>re,ll:()=>Xe,mM:()=>g,mO:()=>ut,mW:()=>Le,ml:()=>y,mm:()=>$e,nB:()=>te,nT:()=>Pe,np:()=>Ne,oA:()=>R,oG:()=>Ye,oV:()=>X,ok:()=>h,oy:()=>d,pL:()=>ke,pe:()=>We,pw:()=>Ge,qF:()=>o,qQ:()=>mt,qp:()=>m,s0:()=>T,sA:()=>fe,st:()=>ie,tY:()=>L,uw:()=>Y,v6:()=>a,vL:()=>Ve,vf:()=>Ie,wH:()=>Je,wO:()=>Se,wX:()=>V,x4:()=>xe,xf:()=>u,xy:()=>c,yI:()=>C,yV:()=>k,yz:()=>p,zL:()=>be,zf:()=>_e});const i="CarrierCode",a="TransportationType",n="ShareHolderCode",o="DriverCode",r="CustomerCode",l="TrailerCode",d="OriginTerminalCode",c="PrimeMoverCode",h="VehicleCode",m="DestinationCode",u="FinishedProductCode",p="ShipmentCode",D="OrderCode",y="ReceiptCode",C="MarineDispatchCode",E="MarineReceiptCode",g="SupplierCode",S="ContractCode",T="RailDispatchCode",v="RailReceiptCode",A="RailRouteCode",R="WagonCode",x="CompartmentCode",b="SMSConfigurationCode",O="PipelineDispatchCode",f="PipelineReceiptCode",j="EmailConfigurationCode",k="BaseProductCode",I="LocationCode",N="SiteViewType",w="EntityCode",P="EntityType",L="CardReaderCode",M="AccessCardCode",V="BcuCode",_="DeuCode",B="WeighBridgeCode",U="Weight",F="OutOfToleranceAllowed",W="LoadingArmCode",H="TransportationType",q="BayCode",G="TransactionNumber",Q="BatchNumber",Y="TerminalCode",z="TankGroupCode",K="TankCode",J="MeterCode",$="ShipmentType",Z="ShipmentStatus",X="MeterLineType",ee="DispatchCode",te="ReceiptStatus",se="FPTransactionID",ie="ProductCategoryType",ae="Reason",ne="SealMasterCode",oe="Reason",re="OperationName",le="FPTransactionID",de="ProductCategoryType",ce="CompartmentSeqNoInVehicle",he="AdjustedPlanQuantity",me="ForceComplete",ue="DispatchStatus",pe="HolidayDate",De="ActionID",ye="EODTimePrev",Ce="TerminalAction",Ee="EODTime",ge="MonthStartDay",Se="CaptainCode",Te="GeneralTMUserType",ve="GeneralTMUserCode",Ae="IsPriority",Re="ActualTerminalCode",xe="ShipmentBondNo",be="ReceiptBondNo",Oe="DeviceType",fe="DeviceCode",je="BayGroup",ke="PipelineHeaderCode",Ie="ExchangePartner",Ne="PersonID",we="UserName",Pe="PipelinePlanCode",Le="PipelinePlanType",Me="ChannelCode",Ve="ProcessName",_e="ReconciliationCode",Be="NotificationGroupCode",Ue="NotificationGroupStatus",Fe="NotificationGroupDesc",We="NotificationResSource",He="NotificationResMsgCode",qe="NotificationOrigResSource",Ge="NotificationOrigResMsgCode",Qe="NotificationMessageCode",Ye="PositionType",ze="ExchangeAgreementCode",Ke="ProductTransferAgreementCode",Je="ShareholderAgreementStatus",$e="RequestorShareholder",Ze="LenderShareholder",Xe="RequestCode",et="TransferReferenceCode",tt="ShiftID",st="ShiftName",it="PrinterName",at="LocationType",nt="ForceClosureReason",ot="TransactionType",rt="CustomerRecipeCode",lt="COATemplateCode",dt="COAManagementCode",ct="COAParameterCode",ht="COAManagementFinishedProductCode",mt="COASeqNumber",ut="ForecastDate",pt="ForecastTanks"},35861:(e,t,s)=>{"use strict";s.d(t,{F1:()=>r,i7:()=>l,r4:()=>o});var i=s(86178),a=s.n(i),n=(s(15660),s(65043),s(70579));function o(e,t){if(Array.isArray(e)){0===e.filter((e=>e.text===t)).length&&e.unshift({value:null,text:t})}return e}function r(){let e=window.navigator.userLanguage||window.navigator.language;return a().locale(e),a().localeData().longDateFormat("L")}function l(e){return(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{children:e}),(0,n.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]})}},50477:()=>{}}]);
//# sourceMappingURL=9689.af33a186.chunk.js.map