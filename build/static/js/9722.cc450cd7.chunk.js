(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[9722,8149,5841,8222],{66554:(e,t,i)=>{"use strict";i.d(t,{$:()=>c});var s=i(65043),a=i(72711),o=i(67907),n=i(65187),r=i(69062),l=i(70579);function d(e){let{operationsVisibilty:t,breadcrumbItem:i,shareholders:d,selectedShareholder:c,onShareholderChange:h,onDelete:u,onAdd:p,popUpContent:m,shrVisible:C,handleBreadCrumbClick:g,addVisible:S,deleteVisible:D}=e;const[y,x]=(0,s.useState)(!1),[w,T]=(0,s.useState)(!1);function L(){t.add&&(m.length>0?T(!1===w):p())}return(0,l.jsxs)("div",{className:"row",style:{alignItems:"flex-start",padding:"0px"},children:[(0,l.jsx)("div",{className:"col-9 col-sm-9 col-md-9 col-lg-10 col-xl-10",style:{padding:"0px"},children:(0,l.jsxs)("div",{className:"row",style:{marginTop:"10px",alignItems:""},children:[(0,l.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-8",children:(0,l.jsxs)(n.A,{children:[" ",(0,l.jsx)(o.TranslationConsumer,{children:e=>(0,l.jsxs)(a.Breadcrumb,{children:[i.parents.map((t=>(0,l.jsx)(a.Breadcrumb.Item,{onClick:()=>{void 0!==g&&null!==g&&g(t.itemCode,i.parents)},children:e(t.localizedKey)},t.itemCode))),(0,l.jsx)(a.Breadcrumb.Item,{children:e(i.localizedKey)},i.itemCode)]})})]})}),(0,l.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-4",children:(0,l.jsx)(o.TranslationConsumer,{children:e=>(0,l.jsx)("div",{className:"compartmentIcon",style:{justifyContent:"flex-start"},children:!1===C?"":(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{children:(0,l.jsxs)("h4",{className:"shrText",children:[e("Common_Shareholder"),":"]})}),(0,l.jsx)("div",{className:"opSelect",children:(0,l.jsx)(a.Select,{placeholder:e("Common_Shareholder"),value:c,disabled:!t.shareholder,options:r.Zj(d),onChange:e=>h(e)})})]})})})}),(0,l.jsx)(o.TranslationConsumer,{children:e=>(0,l.jsxs)(a.Modal,{open:y,size:"small",children:[(0,l.jsx)(a.Modal.Content,{children:(0,l.jsx)("div",{children:(0,l.jsx)("b",{children:e("Confirm_Delete")})})}),(0,l.jsxs)(a.Modal.Footer,{children:[(0,l.jsx)(a.Button,{type:"secondary",content:e("Cancel"),onClick:()=>x(!1)}),(0,l.jsx)(a.Button,{type:"primary",content:e("PipelineDispatch_BtnSubmit"),onClick:()=>{x(!1),u()}})]})]})})]})}),(0,l.jsx)("div",{className:"col-3 col-sm-3 col-md-3 col-lg-2 col-xl-2",children:(0,l.jsxs)("div",{style:{float:"right",display:"inline-block",marginTop:"10px"},children:[S?(0,l.jsx)(a.Popup,{position:"bottom right",className:"popup-theme-wrap",element:(0,l.jsx)("div",{className:(t.add?"iconCircle ":"iconCircleDisable ")+"iconblock",onClick:L,children:(0,l.jsx)(a.Icon,{root:"common",name:"badge-plus",size:"small",color:"white"})}),on:"click",open:w,children:(0,l.jsx)("div",{onMouseLeave:()=>T(!1),children:(0,l.jsx)(o.TranslationConsumer,{children:e=>(0,l.jsx)(a.VerticalMenu,{children:(0,l.jsxs)(a.VerticalMenu,{children:[(0,l.jsx)(a.VerticalMenu.Header,{children:e("Common_Create")}),m.map((t=>(0,l.jsx)(a.VerticalMenu.Item,{onClick:()=>{return e=t.fieldName,T(!1),void p(e);var e},children:e(t.fieldValue)})))]})})})})}):"",D?(0,l.jsx)("div",{style:{marginLeft:"10px"},onClick:()=>{t.delete&&x(!0)},className:(t.delete?"iconCircle ":"iconCircleDisable ")+"iconblock",children:(0,l.jsx)(a.Icon,{root:"common",name:"delete",size:"small",color:"white"})}):""]})})]})}d.defaultProps={operationsVisibilty:{add:!1,delete:!1,shareholder:!1},breadcrumbItem:{itemName:"",itemCode:"",localizedKey:"",itemProps:{},parents:[],isComponent:!1},shareholders:[],selectedShareholder:"",popUpContent:[],shrVisible:!0,addVisible:!0,deleteVisible:!0};i(38726);function c(e){let{operationsVisibilty:t,breadcrumbItem:i,shareholders:s,selectedShareholder:a,onShareholderChange:o,onDelete:n,onAdd:r,popUpContent:c,shrVisible:h,handleBreadCrumbClick:u,addVisible:p,deleteVisible:m}=e;return(0,l.jsx)(d,{operationsVisibilty:t,breadcrumbItem:i,shareholders:s,selectedShareholder:a,onShareholderChange:o,onDelete:n,onAdd:r,popUpContent:c,shrVisible:h,handleBreadCrumbClick:u,addVisible:p,deleteVisible:m})}},62900:(e,t,i)=>{"use strict";i.d(t,{A:()=>D});var s=i(65043),a=i(67907),o=i(72711),n=i(72067),r=i(69062),l=i(97508),d=i(44192),c=i(40854),h=i.n(c),u=i(53536),p=i.n(u),m=i(86111),C=i.n(m),g=i(70579);class S extends s.Component{constructor(){super(...arguments),this.state={isPasswordRequired:!1,Password:"",validationErrors:r.Th(d.Qh),authenticationResponse:"",btnAuthenticateEnabled:!0},this.onFieldChange=(e,t)=>{this.setState({Password:t});const i=p().cloneDeep(this.state.validationErrors);void 0!==d.Qh[e]&&(i[e]=r.jr(d.Qh[e],t),this.setState({validationErrors:i,authenticationResponse:""}))},this.validatePassword=e=>{this.setState({btnAuthenticateEnabled:!1});const t={...this.state.validationErrors};null!==e&&""!==e||(t.Password="UserValidationForm_ReqfldValPassword"),this.setState({validationErrors:t});var i=!0;return i&&(i=Object.values(t).every((function(e){return""===e}))),i},this.onCloseClick=()=>{this.setState({isPasswordRequired:!1,authenticationResponse:"",btnAuthenticateEnabled:!0},(()=>this.props.handleClose()))},this.AuthenticateUser=()=>{if(this.validatePassword(this.state.Password)){this.setState({authenticationResponse:""});try{var e=this.state.Password,t=this.props.Username,i=C().lib.WordArray.random(16),s=C().PBKDF2(t,i,{keySize:8,iterations:100}),a=C().lib.WordArray.random(16),o=C().AES.encrypt(e,s,{iv:a,padding:C().pad.Pkcs7,mode:C().mode.CBC}),l=i.toString()+a.toString()+o.toString();h()(n.KrY+"?encryptedPassword="+encodeURIComponent(l),r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess&&"true"===t.EntityResult.toLowerCase()?(this.setState({isPasswordRequired:!1}),this.props.handleOperation()):this.setState({authenticationResponse:t.ErrorList[0],btnAuthenticateEnabled:!0})})).catch((e=>{this.setState({authenticationResponse:e,btnAuthenticateEnabled:!0})}))}catch(d){this.setState({authenticationResponse:d,btnAuthenticateEnabled:!0})}}else this.setState({btnAuthenticateEnabled:!0})}}componentDidMount(){try{this.IsPasswordRequired()}catch(e){console.log("BaseProductDetailsComposite:Error occured on componentDidMount",e)}}IsPasswordRequired(){try{let e=r.Hp(this.props.userDetails.EntityResult.roleFunctionInfo,this.props.functionName,this.props.functionGroup);this.setState({isPasswordRequired:e}),!1===e&&this.props.handleOperation()}catch(e){console.log("Error in IsPasswordRequired method:",e)}}render(){return(0,g.jsx)("div",{children:!0===this.state.isPasswordRequired?(0,g.jsx)(a.TranslationConsumer,{children:e=>(0,g.jsxs)(o.Modal,{open:!0,size:"mini",children:[(0,g.jsxs)(o.Modal.Content,{children:[(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col col-lg-8",style:{marginLeft:"10px"},children:(0,g.jsx)("h4",{children:e("User_Authentication")})}),(0,g.jsx)("div",{className:"col-12 col-lg-3",style:{textAlign:"right"},onClick:this.onCloseClick,children:(0,g.jsx)(o.Icon,{root:"common",name:"close"})})]}),(0,g.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,g.jsx)("div",{className:"col col-lg-12",children:(0,g.jsx)("label",{children:(0,g.jsxs)("h5",{children:[e("UserValidation_Form_AccountName"),":",this.props.Username]})})}),(0,g.jsx)("div",{className:"col col-lg-12",children:(0,g.jsx)(o.Input,{fluid:!0,type:"password",disablePasswordToggle:!1,value:this.state.Password,indicator:"required",onChange:e=>this.onFieldChange("Password",e),label:e("AccessCardInfo_x_Pwd"),error:e(this.state.validationErrors.Password),reserveSpace:!1})})]})]}),(0,g.jsxs)(o.Modal.Footer,{children:[(0,g.jsx)("span",{className:"ui error-message autherrormsg",children:e(this.state.authenticationResponse)}),(0,g.jsx)(o.Button,{type:"primary",disabled:!this.state.btnAuthenticateEnabled,content:e("UserValidationForm_Authentication"),onClick:this.AuthenticateUser})]})]})}):null})}}const D=(0,l.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(S)},19380:(e,t,i)=>{"use strict";i.d(t,{A:()=>w});var s=i(65043),a=i(728),o=i(62672),n=i(27976),r=i(44063),l=i(39078),d=i(48546),c=i(82967),h=i(11201),u=i(43439),p=(i(60663),i(48385)),m=i(72711),C=i(67907),g=i(65187),S=i(53536),D=(i(90837),i(70579));const y=e=>{const[t,i]=(0,s.useState)(null),[y]=(0,C.useTranslation)(),x=t=>new a.CollectionView(e.sourceData,{pageSize:t}),[w,T]=(0,s.useState)(x(e.rowsPerPage)),L=s.createRef(),E=s.createRef(),f=s.createRef(),b=s.createRef(),R=s.useRef(),A=s.useRef(e.selectionRequired?[]:null);let v=null;const M=t=>{try{if(P(),e.onRowClick&&t.addEventListener(t.hostElement,"click",(i=>{let s=t.hitTest(i);if(s.target.closest(".wj-cell")&&![...s.target.closest(".wj-cell").classList].includes("wj-group")&&s.cellType===o.CellType.Cell){const i=t.rows[s.row].dataItem;e.onRowClick(i)}})),t.selectionMode=a.asEnum("None",o.SelectionMode),t.select(-1,-1),i(t),e.selectionRequired){v=new h.Selector(t,{itemChecked:(i,s)=>{e.singleSelection&&t.rows.filter((e=>e.isSelected&&1===A.current.filter((t=>S.isEqual(t,e.dataItem))).length)).forEach((e=>{e.isSelected=!1})),e.onSelectionHandle(t.rows.filter((e=>e.isSelected)).map((e=>e.dataItem)))},showCheckAll:!e.singleSelection});let i=v.column.grid;v.column=i.rowHeaders.columns[0],i.headersVisibility=o.HeadersVisibility.All,i.selectionMode=a.asEnum("None",o.SelectionMode)}}catch(s){console.log("Error in gridInitialized: "+s)}};(0,s.useEffect)((()=>{try{if(null!=L){let e=L.current.control;E.current.control.grid=e}T(x(e.rowsPerPage))}catch(t){console.log("Error in grid update:",t)}}),[e.sourceData]),(0,s.useEffect)((()=>{try{t&&e.selectionRequired&&(A.current.length=0,A.current.push(...e.selectedItems),t.rows.forEach((t=>{1===e.selectedItems.filter((e=>S.isEqual(e,t.dataItem))).length?t.isSelected=!0:t.isSelected=!1})),t.refresh())}catch(i){console.log("Error in pre-selecting rows:",i)}}),[e.selectedItems]),(0,s.useEffect)((()=>{try{if(localStorage.getItem(e.parentComponent+"GridState")&&"null"!==localStorage.getItem(e.parentComponent+"GridState")&&t){let s=JSON.parse(localStorage.getItem(e.parentComponent+"GridState")),o=t;o.columns.forEach((e=>{let t=s.columns.filter((t=>t.binding===e.binding));e.visible=t.length>0?t[0].visible:e.visible})),f.current.control.filterDefinition=s.filterDefinition,o.collectionView.deferUpdate((()=>{o.collectionView.sortDescriptions.clear();for(let e=0;e<s.sortDescriptions.length;e++){let t=s.sortDescriptions[e];o.collectionView.sortDescriptions.push(new a.SortDescription(t.property,t.ascending))}}));for(let e=0;e<s.groupDescriptions.length;e++)o.collectionView.groupDescriptions.push(new a.PropertyGroupDescription(s.groupDescriptions[e])),o.columns.filter((t=>t.binding===s.groupDescriptions[e]))[0].visible=!1;if(sessionStorage.getItem(e.parentComponent+"GridState")&&"null"!==sessionStorage.getItem(e.parentComponent+"GridState")){let t=JSON.parse(sessionStorage.getItem(e.parentComponent+"GridState"));o.collectionView.moveToPage(o.collectionView.pageCount-1>=t.pageIndex?t.pageIndex:o.collectionView.pageCount-1),E&&(E.current.control.text=t.searchText)}i(o),t.refresh()}}catch(s){console.log("Error in restoring local storage settings: ",s)}}),[w]),(0,s.useEffect)((()=>{try{t&&R.current&&e.columnPickerRequired&&(R.current.itemsSource=t.columns,R.current.checkedMemberPath="visible",R.current.displayMemberPath="header",R.current.lostFocus.addHandler((()=>{(0,a.hidePopup)(R.current.hostElement)})))}catch(i){console.log("Error in initializing column picker properties:",i)}}),[R.current]),(0,s.useEffect)((()=>()=>{e.columnPickerRequired&&R.current&&(0,a.hidePopup)(R.current.hostElement)}),[]);const I=()=>{try{let s=t;s.itemsSource.pageSize=e.sourceData.length,i(s),u.FlexGridXlsxConverter.saveAsync(t,{includeColumnHeaders:!0,includeCellStyles:!1,formatItem:null},e.exportFileName),s.itemsSource.pageSize=e.rowsPerPage,i(s)}catch(s){console.log("Error in export grid to excel:",s)}},N=(t,i)=>{if(void 0!==i&&null!==i){if("boolean"===typeof t||"Active"===i.Name)return t?(0,D.jsx)(m.Icon,{name:"check",size:"small",color:"green"}):(0,D.jsx)(m.Icon,{name:"close",size:"small",color:"red"});if(""===t||null===t||void 0===t)return t;if(("TerminalCodes"===i.Name||"1"===i.PopOver)&&null!==t)return(s=t).split(",").length>e.terminalsToShow?(0,D.jsx)(m.Popup,{className:"popup-theme-wrap",on:"hover",element:s.split(",").length,children:(0,D.jsx)(m.Card,{children:(0,D.jsx)(m.Card.Content,{children:s})})}):s;if(void 0!==i.DataType&&"DateTime"===i.DataType)return new Date(t).toLocaleDateString()+" "+new Date(t).toLocaleTimeString();if(void 0!==i.DataType&&"Date"===i.DataType)return new Date(t).toLocaleDateString();if(void 0!==i.DataType&&"Time"===i.DataType)return new Date(t).toLocaleTimeString()}var s;return t},j=()=>{try{if(t&&f.current){let i={columns:t.columns.map((e=>({binding:e.binding,visible:e.visible}))),filterDefinition:f.current.control.filterDefinition,sortDescriptions:t.collectionView.sortDescriptions.map((e=>({property:e.property,ascending:e.ascending}))),groupDescriptions:t.collectionView.groupDescriptions.map((e=>e.propertyName?e.propertyName:null))};if(t.collectionView.groupDescriptions&&t.collectionView.groupDescriptions.length>0){[...document.getElementsByClassName("wj-column-selector-group")].forEach((e=>{e.parentNode.parentNode.classList.add("wj-grouped-checkbox")}))}let s={pageIndex:t.collectionView.pageIndex,searchText:E.current.control.text};localStorage.setItem(e.parentComponent+"GridState",JSON.stringify(i)),sessionStorage.setItem(e.parentComponent+"GridState",JSON.stringify(s))}}catch(i){console.log("Error in saving grid state")}},P=()=>{let e=a.culture.FlexGridFilter,t=l.Operator;a.culture.FlexGridFilter.header=y("WijmoGridFilterHeader"),a.culture.FlexGridFilter.ascending="\u2191 "+y("WijmoGridFilterAscending"),a.culture.FlexGridFilter.descending="\u2193 "+y("WijmoGridFilterDescending"),a.culture.FlexGridFilter.apply=y("RoleAdminEdit_Apply"),a.culture.FlexGridFilter.clear=y("OrderCreate_btnClear"),a.culture.FlexGridFilter.conditions=y("WijmoGridFilterCondition"),a.culture.FlexGridFilter.values=y("WijmoGridFilterValue"),a.culture.FlexGridFilter.search=y("LoadingDetailsView_SearchGrid"),a.culture.FlexGridFilter.selectAll=y("WijmoGridFilterSelectAll"),a.culture.FlexGridFilter.and=y("WijmoGridFilterAnd"),a.culture.FlexGridFilter.or=y("WijmoGridFilterOr"),a.culture.FlexGridFilter.cancel=y("AccessCardInfo_Cancel"),e.stringOperators=[{name:y("WijmoGridFilterUnset"),op:null},{name:y("WijmoGridFilterEqual"),op:t.EQ},{name:y("WijmoGridFilterNotEqual"),op:t.NE},{name:y("WijmoGridFilterBeginsWith"),op:t.BW},{name:y("WijmoGridFilterEndsWith"),op:t.EW},{name:y("WijmoGridFilterContains"),op:t.CT},{name:y("WijmoGridFilterDoesNotContain"),op:t.NC}],e.numberOperators=[{name:y("WijmoGridFilterUnset"),op:null},{name:y("WijmoGridFilterEqual"),op:t.EQ},{name:y("WijmoGridFilterNotEqual"),op:t.NE},{name:y("WijmoGridFilterGreaterThan"),op:t.GT},{name:y("WijmoGridFilterLessThan"),op:t.LT},{name:y("WijmoGridFilterGreaterThanOrEqual"),op:t.GE},{name:y("WijmoGridFilterLessThanOrEqual"),op:t.LE}],e.dateOperators=[{name:y("WijmoGridFilterUnset"),op:null},{name:y("WijmoGridFilterEqual"),op:t.EQ},{name:y("WijmoGridFilterDateEarlierThan"),op:t.LT},{name:y("WijmoGridFilterDateLaterThan"),op:t.GT}],e.booleanOperators=[{name:y("WijmoGridFilterUnset"),op:null},{name:y("WijmoGridFilterEqual"),op:t.EQ},{name:y("WijmoGridFilterNotEqual"),op:t.NE}]},V=e=>{try{if(window.screen.width<1024&&e.WidthPx&&""!==e.WidthPx)return parseInt(e.WidthPx)}catch(t){console.log("Error in width:",t)}return e.WidthPercentage.includes("*")?e.WidthPercentage:parseInt(e.WidthPercentage)};return(0,D.jsx)("div",{className:"pl-1",children:(0,D.jsx)(g.A,{children:(0,D.jsx)(C.TranslationConsumer,{children:i=>(0,D.jsxs)(s.Fragment,{children:[(0,D.jsxs)("div",{className:"row pl-0",children:[(0,D.jsx)("div",{className:"col-10 col-sm-12 col-md-5 col-lg-6",children:(0,D.jsx)(d.q,{class:"ui single-input",ref:E,placeholder:i("LoadingDetailsView_SearchGrid")})}),(0,D.jsx)("div",{className:"col-10 col-sm-12 col-md-7 col-lg-6",children:(0,D.jsxs)("div",{style:{float:"right"},children:[e.columnPickerRequired?(0,D.jsxs)(m.Button,{id:"colPicker",actionType:"button",type:"primary",onClick:e=>(e=>{try{let i=R.current.hostElement;i.offsetHeight?((0,a.hidePopup)(i,!0,!0),t.focus()):((0,a.showPopup)(i,e.target,a.PopupPosition.Below,!0,!1),R.current.focus()),R.current.focus(),e.preventDefault()}catch(i){console.log("Error in Column Picker click event:",i)}})(e),children:[(0,D.jsx)("div",{style:{display:"inline-block"},children:i("WijmoGridColumnPicker")}),(0,D.jsx)("div",{style:{display:"inline-block"},children:(0,D.jsx)(m.Icon,{name:"caret-down",className:"btnIcon",size:"small"})})]}):null,e.exportRequired?(0,D.jsxs)(m.Button,{actionType:"button",type:"primary",className:"mt-3 mt-md-0",onClick:I,children:[(0,D.jsx)("div",{style:{display:"inline-block"},children:i("WijmoGridExport")}),(0,D.jsx)("div",{style:{display:"inline-block",marginLeft:"0.2rem"},children:(0,D.jsx)("span",{className:"icon-Xls",style:{fontSize:"17px",position:"absolute",top:"3px"}})})]}):null]})})]}),(0,D.jsxs)("div",{className:"tableScroll",children:[e.columnGroupingRequired?(0,D.jsx)(p.u,{className:"group-panel",grid:t,placeholder:i("WijmoGridGroupPanelPlaceholder")}):null,(0,D.jsx)(g.A,{children:(0,D.jsxs)(n.MC,{ref:L,autoGenerateColumns:!1,alternatingRowStep:0,autoRowHeights:!0,headersVisibility:"Column",itemsSource:w,selectionMode:a.asEnum("None",o.SelectionMode),initialized:M,virtualizationThreshold:[0,1e4],onUpdatedView:j,children:[(0,D.jsx)(r.M,{ref:f}),e.columns.map((t=>(0,D.jsx)(n.aK,{header:i(t.Name),binding:t.Name,width:V(t),minWidth:100,isReadOnly:!0,wordWrap:!0,align:"left",children:(0,D.jsx)(n.Gw,{cellType:"Cell",template:i=>(0,D.jsx)("span",{style:null!=e.conditionalRowStyleCheck&&e.conditionalRowStyleCheck(i.item)?{...e.conditionalRowStyles}:null,children:N(i.item[t.Name],t)})})},t.Name)))]})}),e.columnPickerRequired?(0,D.jsx)("div",{className:"column-picker-div",children:(0,D.jsx)(c.qF,{className:"column-picker",initialized:t=>(t=>{e.columnPickerRequired&&(R.current=t)})(t)})}):null]}),(0,D.jsx)("div",{className:"row",children:(0,D.jsx)(c.Ne,{ref:b,className:"ml-auto mr-auto mt-3",headerFormat:i("WijmoGridPagingTemplate"),byPage:!0,cv:w})})]})})})})};y.defaultProps={sourceData:[],columns:[],exportRequired:!0,exportFileName:"Grid.xlsx",selectionRequired:!1,columnPickerRequired:!1,columnGroupingRequired:!1,rowsPerPage:10,terminalsToShow:2,singleSelection:!1,selectedItems:[]};const x=y,w=e=>(0,D.jsx)(x,{sourceData:e.data,columns:e.columns,exportRequired:e.exportRequired,exportFileName:e.exportFileName,columnPickerRequired:e.columnPickerRequired,selectionRequired:e.selectionRequired,columnGroupingRequired:e.columnGroupingRequired,conditionalRowStyleCheck:e.conditionalRowStyleCheck,conditionalRowStyles:e.conditionalRowStyles,rowsPerPage:e.rowsPerPage,onSelectionHandle:e.onSelectionHandle,onRowClick:e.onRowClick,parentComponent:e.parentComponent,terminalsToShow:e.terminalsToShow,singleSelection:e.singleSelection,selectedItems:e.selectedItems})},53804:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>G});var s=i(65043),a=i(66554),o=i(19380),n=i(70579);function r(e){let{tableData:t,columnDetails:i,pageSize:s,exportRequired:a,exportFileName:r,columnPickerRequired:l,columnGroupingRequired:d,selectionRequired:c,terminalsToShow:h,selectedItems:u,onSelectionChange:p,onRowClick:m,parentComponent:C}=e;return(0,n.jsx)(o.A,{data:t,columns:i,rowsPerPage:s,exportRequired:a,exportFileName:r,columnPickerRequired:l,columnGroupingRequired:d,selectionRequired:c,selectedItems:u,onSelectionHandle:p,onRowClick:m,parentComponent:C,terminalsToShow:h})}var l=i(45372),d=i(78374),c=i(67907),h=i(72711),u=i(43503),p=i(69062),m=i(80312);function C(e){let{tableData:t,loadingDetailsHideFields:i,setValid:a,onSaved:o,userDetails:r,handleBack:l,status:C,isWebPortalUser:g}=e;const[S]=(0,c.useTranslation)(),[D,y]=(0,s.useState)(!1),[x,w]=(0,s.useState)({});const T=e=>{try{const t=e.rowData[e.field];return void 0===t||null===t||""===t?"":new Date(t).toLocaleDateString()+" "+new Date(t).toLocaleTimeString()}catch(t){return""}},L=e=>{try{const t=e.rowData[e.field];return void 0===t||null===t||""===t?"":t.toLocaleString()}catch(t){return""}},E=e=>{if(p.pJ(r.EntityResult.IsArchived),p.ab(r.EntityResult.FunctionsList,m.i.modify,m.Yb))y(!0),w(e);else{o([],"Permission",{messageType:"critical",message:"ShipmentCompDetail_Permission",messageResultDetails:[{keyFields:"",keyValues:"",isSuccess:!1,errorMessage:"ShipmentCompDetail_LoadingDetailsPermission"}]})}},f=e=>{let{value:t}=e;try{if(null!=t&&""!==t){var i=t.indexOf(" ");if(0===i)return"";var s=t.substr(0,i),a=t.substr(i+1,t.length-i-1);return parseFloat(s).toLocaleString()+" "+a}}catch(o){return t}return""};return(0,n.jsxs)("div",{children:[(0,n.jsx)(u.A,{entityCode:S("ViewMarineLoadingDetails_Title")}),(0,n.jsxs)("div",{className:"detailsContainer",children:[(0,n.jsx)("div",{className:"row",children:(0,n.jsx)("div",{className:"col col-md-8 col-lg-9 col col-xl-9",children:(0,n.jsx)("h4",{children:S("ViewShipment_LoadingDetails")})})}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"detailsTable loadingTable",children:(0,n.jsxs)(d.bQ,{data:t,scrollable:!0,resizableColumns:!0,children:[i.indexOf("IsInvalid")>-1||g?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"90px",field:"IsInvalid",header:S("ViewMarineLoadingDetails_Valid"),editable:!1,editFieldType:"text",renderer:e=>(e=>{if(null==e.rowData.BaseProductCode||0===e.rowData.BaseProductCode.toString().length)return e.rowData.IsInvalid?(0,n.jsx)("span",{children:S("ViewMarineLoadingDetails_Invalid")}):"CLOSED"!==C?(0,n.jsx)("button",{className:"ValidBtn",onClick:()=>E(e),children:S("ViewMarineLoadingDetails_Valid")}):(0,n.jsx)("span",{children:S("ViewMarineLoadingDetails_Valid")})})(e)},"IsInvalid"),i.indexOf("CompartmentSeqNoInVehicle")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"130px",field:"CompartmentSeqNoInVehicle",header:S("ViewMarineLoadingDetails_CompartmentSeqNo"),editable:!1,editFieldType:"text"},"CompartmentSeqNoInVehicle"),i.indexOf("productcode")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"130px",field:"productcode",header:S("ViewMarineLoadingDetails_ProductCode"),editable:!1,editFieldType:"text",renderer:e=>e.rowData.productcode.replace(/&nbsp;/g," ")},"productcode"),i.indexOf("BaseProductCode")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"170px",field:"BaseProductCode",header:S("ViewMarineLoadingDetails_BaseProductCode"),editable:!1,editFieldType:"text"},"BaseProductCode"),i.indexOf("TankCode")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"130px",field:"TankCode",header:S("ViewMarineLoadingDetails_TankCode"),editable:!1,editFieldType:"text"},"TankCode"),i.indexOf("BayCode")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"130px",field:"BayCode",header:S("ViewMarineLoadingDetails_BayCode"),editable:!1,editFieldType:"text"},"BayCode"),i.indexOf("BCUCode")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"130px",field:"BCUCode",header:S("ViewMarineLoadingDetails_BCUCode"),editable:!1,editFieldType:"text"},"BCUCode"),i.indexOf("MeterCode")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"120px",field:"MeterCode",header:S("ViewMarineLoadingDetails_MeterCode"),editable:!1,editFieldType:"text"},"MeterCode"),i.indexOf("GrossQuantity")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"130px",field:"GrossQuantity",header:S("ViewMarineLoadingDetails_GrossQuantity"),editable:!1,editFieldType:"text",renderer:e=>f(e)},"GrossQuantity"),i.indexOf("NetQuantity")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"120px",field:"NetQuantity",header:S("ViewMarineLoadingDetails_NetQuantity"),editable:!1,editFieldType:"text",renderer:e=>f(e)},"NetQuantity"),i.indexOf("Density")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"140px",field:"Density",header:S("ViewMarineLoadingDetails_ProductDensity"),editable:!1,editFieldType:"text",renderer:e=>f(e)},"Density"),i.indexOf("Pressure")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"100px",field:"Pressure",header:S("ViewMarineLoadingDetails_Pressure"),editable:!1,editFieldType:"text",renderer:e=>f(e)},"Pressure"),i.indexOf("Temperature")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"120px",field:"Temperature",header:S("ViewMarineLoadingDetails_Temperature"),editable:!1,editFieldType:"text",renderer:e=>f(e)},"Temperature"),i.indexOf("StartTime")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"200px",field:"StartTime",header:S("ViewMarineLoadingDetails_StartTime"),editable:!1,editFieldType:"text",renderer:e=>T(e)},"StartTime"),i.indexOf("EndTime")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"200px",field:"EndTime",header:S("ViewMarineLoadingDetails_EndTime"),editable:!1,editFieldType:"text",renderer:e=>T(e)},"EndTime"),i.indexOf("StartTotalizer")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"130px",field:"StartTotalizer",header:S("ViewMarineLoadingDetails_StartTotalizer"),editable:!1,editFieldType:"text",renderer:e=>L(e)},"StartTotalizer"),i.indexOf("EndTotalizer")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"120px",field:"EndTotalizer",header:S("ViewMarineLoadingDetails_EndTotalizer"),editable:!1,editFieldType:"text",renderer:e=>L(e)},"EndTotalizer"),i.indexOf("NetStartTotalizer")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"150px",field:"NetStartTotalizer",header:S("ViewMarineLoadingDetails_netstarttotalizer"),editable:!1,editFieldType:"text",renderer:e=>L(e)},"NetStartTotalizer"),i.indexOf("NetEndtoTalizer")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"140px",field:"NetEndtoTalizer",header:S("ViewMarineLoadingDetails_netendtotalizer"),editable:!1,editFieldType:"text",renderer:e=>L(e)},"NetEndtoTalizer"),i.indexOf("TransactionID")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"170px",field:"TransactionID",header:S("ViewMarineLoadingDetails_TransactionNo"),editable:!1,editFieldType:"text"},"TransactionID"),i.indexOf("Mass")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"100px",field:"Mass",header:S("ViewMarineLoadingDetails_Mass"),editable:!1,editFieldType:"text"},"Mass"),i.indexOf("WeightInAir")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"100px",field:"WeightInAir",header:S("ViewMarineLoadingDetails_WeightInAir"),editable:!1,editFieldType:"text"},"WeightInAir"),i.indexOf("WeightInVacuum")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"100px",field:"WeightInVacuum",header:S("ViewMarineLoadingDetails_WeightInVacuum"),editable:!1,editFieldType:"text"},"WeightInVacuum"),i.indexOf("TankStartGrossQuantity")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"200px",field:"TankStartGrossQuantity",header:S("ViewMarineLoadingDetails_TankStartGrossQuantity"),editable:!1,editFieldType:"text",renderer:e=>f(e)},"TankStartGrossQuantity"),i.indexOf("TankEndGrossQuantity")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"200px",field:"TankEndGrossQuantity",header:S("ViewMarineLoadingDetails_TankEndGrossQuantity"),editable:!1,editFieldType:"text",renderer:e=>f(e)},"TankEndGrossQuantity"),i.indexOf("TankStartNetQuantity")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"200px",field:"TankStartNetQuantity",header:S("ViewMarineLoadingDetails_TankStartNetQuantity"),editable:!1,editFieldType:"text",renderer:e=>L(e)},"TankStartNetQuantity"),i.indexOf("TankEndNetQuantity")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"200px",field:"TankEndNetQuantity",header:S("ViewMarineLoadingDetails_TankEndNetQuantity"),editable:!1,editFieldType:"text",renderer:e=>L(e)},"TankEndNetQuantity"),i.indexOf("TankStartGrossMass")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"180px",field:"TankStartGrossMass",header:S("ViewMarineLoadingDetails_TankStartGrossMass"),editable:!1,editFieldType:"text"},"TankStartGrossMass"),i.indexOf("TankEndGrossMass")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"180px",field:"TankEndGrossMass",header:S("ViewMarineLoadingDetails_TankEndGrossMass"),editable:!1,editFieldType:"text"},"TankEndGrossMass"),i.indexOf("EndTemperature")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"130px",field:"EndTemperature",header:S("ViewMarineLoadingDetails_EndTemperature"),editable:!1,editFieldType:"text"},"EndTemperature"),i.indexOf("StartPressure")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"130px",field:"StartPressure",header:S("ViewMarineLoadingDetails_StartPressure"),editable:!1,editFieldType:"text"},"StartPressure"),i.indexOf("EndPressure")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"120px",field:"EndPressure",header:S("ViewMarineLoadingDetails_EndPressure"),editable:!1,editFieldType:"text"},"EndPressure"),i.indexOf("ReferenceDensity")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"130px",field:"ReferenceDensity",header:S("ViewMarineLoadingDetails_ReferenceDensity"),editable:!1,editFieldType:"text",renderer:e=>f(e)},"ReferenceDensity"),i.indexOf("StartProductDensity")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"130px",field:"StartProductDensity",header:S("ViewMarineLoadingDetails_StartProductDensity"),editable:!1,editFieldType:"text",renderer:e=>f(e)},"StartProductDensity"),i.indexOf("EndProductDensity")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"130px",field:"EndProductDensity",header:S("ViewMarineLoadingDetails_EndProductDensity"),editable:!1,editFieldType:"text",renderer:e=>f(e)},"EndProductDensity"),i.indexOf("StartWeightInAir")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"130px",field:"StartWeightInAir",header:S("ViewMarineLoadingDetails_StartWeightInAir"),editable:!1,editFieldType:"text"},"StartWeightInAir"),i.indexOf("EndWeightInAir")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"120px",field:"EndWeightInAir",header:S("ViewMarineLoadingDetails_EndWeightInAir"),editable:!1,editFieldType:"text"},"EndWeightInAir"),i.indexOf("Remarks")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"100px",field:"Remarks",header:S("ViewMarineLoadingDetails_Remarks"),editable:!1,editFieldType:"text"},"Remarks"),i.indexOf("PresetQuantity")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"130px",field:"PresetQuantity",header:S("ViewMarineLoadingDetails_PresetQuantity"),editable:!1,editFieldType:"text"},"PresetQuantity"),i.indexOf("resetQuantity")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"130px",field:"resetQuantity",header:S("ViewMarineLoadingDetails_resetQuantity"),editable:!1,editFieldType:"text",renderer:e=>f(e)},"resetQuantity"),i.indexOf("CalculatedGross")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"130px",field:"CalculatedGross",header:S("ViewMarineLoadingDetails_CalculatedGross"),editable:!1,editFieldType:"text",renderer:e=>f(e)},"CalculatedGross"),i.indexOf("CalculatedNet")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"120px",field:"CalculatedNet",header:S("ViewMarineLoadingDetails_CalculatedNet"),editable:!1,editFieldType:"text",renderer:e=>f(e)},"CalculatedNet"),i.indexOf("CalculatedValueUOM")>-1?"":(0,n.jsx)(d.bQ.Column,{className:"compColHeight",initialWidth:"130px",field:"CalculatedValueUOM",header:S("ViewMarineLoadingDetails_CalculatedValueUOM"),editable:!1,editFieldType:"text",renderer:e=>f(e)},"CalculatedValueUOM")]})}),(0,n.jsx)(c.TranslationConsumer,{children:e=>(0,n.jsxs)(h.Modal,{open:D,size:"small",children:[(0,n.jsx)(h.Modal.Content,{children:(0,n.jsx)("div",{children:(0,n.jsx)("b",{children:e("InValid_Confirm")})})}),(0,n.jsxs)(h.Modal.Footer,{children:[(0,n.jsx)(h.Button,{type:"secondary",content:e("Cancel"),onClick:()=>{y(!1),w({})}}),(0,n.jsx)(h.Button,{type:"primary",content:e("Confirm"),onClick:()=>{y(!1),w({}),a(x.rowData.fptransactionid,x.rowData.ProductCategoryType)}})]})]})})]}),(0,n.jsx)("div",{className:"row",style:{paddingTop:"15px"},children:(0,n.jsx)("div",{className:"col col-lg-8",children:(0,n.jsx)(h.Button,{className:"backButton",onClick:l,content:S("Back")})})})]})]})}C.defaultProps={};var g=i(40854),S=i.n(g),D=i(72067),y=i(14159),x=(i(92342),i(9966)),w=i(50805),T=i(97508),L=i(73571),E=(i(63973),i(11981)),f=i(65187),b=i(93779),R=i(15417),A=i(62900),v=i(44192),M=i(40252),I=i(15441),N=i(53536),j=i.n(N),P=i(7523),V=i(45127);function k(e){let{DispatchCode:t,auditTrailList:i,handleBack:a,modAuditTrailList:o,auditExpandedRows:r,Attributes:l,isWebPortalUser:u}=e;const[p]=(0,c.useTranslation)(),m=e=>e===P.Kl.EMPTY?"EMPTY":e===P.Kl.LOADING?"LOADING":e===P.Kl.PART_FILLED?"PART_FILLED":e===P.Kl.OVER_FILLED?"OVER_FILLED":e===P.Kl.FORCE_COMPLETED?"FORCE_COMPLETED":e===P.Kl.COMPLETED?"COMPLETED":e===P.Kl.INTERRUPTED?"INTERRUPTED":"",[C,g]=(0,s.useState)(!1),S=(e,t)=>(t.cls=null,e.fontSize="7px",t.val===P.oL.AUTO_LOADED?t.text=P.n1.AUTO_LOADED:t.val===P.oL.CLOSED?t.text=P.n1.CLOSED:t.val===P.oL.INTERRUPTED?t.text=P.n1.INTERRUPTED:t.val===P.oL.LOADING?t.text=P.n1.LOADING:t.val===P.oL.MANUALLY_LOADED?t.text=P.n1.MANUALLY_LOADED:t.val===P.oL.PARTIALLY_LOADED?t.text=P.n1.PARTIALLY_LOADED:t.val===P.oL.QUEUED?t.text=P.n1.QUEUED:t.val===P.oL.READY&&(t.text=P.n1.READY),t),D=e=>{try{const t=e.rowData[e.field];return void 0===t||null===t||""===t?"":new Date(t).toLocaleDateString()+" "+new Date(t).toLocaleTimeString()}catch(t){return""}};function y(e){return Array.isArray(e.AttributesforUI)&&e.AttributesforUI.length>0?(0,n.jsx)("div",{className:"childTable ChildGridViewAllShipmentLoadingDetails",children:(0,n.jsxs)(d.bQ,{data:e.AttributesforUI,children:[(0,n.jsx)(d.bQ.Column,{className:"compColHeight",header:p("CompartmentAttributeName"),renderer:x,editable:!1},"AttributeName"),(0,n.jsx)(d.bQ.Column,{className:"compColHeight",header:p("CompartmentAttributeValue"),renderer:w})]})}):(0,n.jsx)("div",{className:"compartmentIcon",children:(0,n.jsx)("div",{style:{paddingRight:"87%"},children:p("CustomerInventory_NoRecordsFound")})})}const x=e=>(0,n.jsx)("div",{children:(0,n.jsx)("span",{children:e.rowData.AttributeName})}),w=e=>{const t=e.rowData;try{return t.DataType.toLowerCase()===P.pe.STRING.toLowerCase()||t.DataType.toLowerCase()===P.pe.INT.toLowerCase()||t.DataType.toLowerCase()===P.pe.FLOAT.toLowerCase()||t.DataType.toLowerCase()===P.pe.LONG.toLowerCase()||t.DataType.toLowerCase()===P.pe.DOUBLE.toLowerCase()?(0,n.jsx)(h.Input,{fluid:!0,value:t.AttributeValue,disabled:!0,reserveSpace:!1}):t.DataType.toLowerCase()===P.pe.BOOL.toLowerCase()?(0,n.jsx)(h.Checkbox,{checked:"true"===t.AttributeValue.toString().toLowerCase(),disabled:!0}):t.DataType.toLowerCase()===P.pe.DATETIME.toLowerCase()?(0,n.jsx)(h.DatePicker,{fluid:!0,minuteStep:"5",value:null===t.AttributeValue||void 0===t.AttributeValue||""===t.AttributeValue?"":new Date(t.AttributeValue),disabled:!0,showYearSelector:"true",reserveSpace:!1}):null}catch(i){console.log("TrailerDetails:Error occured on handleAttributeType",i)}};return(0,n.jsxs)("div",{children:[(0,n.jsx)(c.TranslationConsumer,{children:e=>(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"detailsContainer",children:[(0,n.jsx)("div",{className:"row",children:(0,n.jsx)("div",{className:"col-12",children:(0,n.jsx)("h3",{children:e("Transaction_AuditTrail_Heading")+" : "+t})})}),(0,n.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,n.jsx)("div",{className:"col-12 container-fluid",children:(0,n.jsxs)(V.IO,{itemsSource:o,chartType:"Line",bindingX:"UpdatedTime",palette:["red"],style:{width:"100%",minWidth:"800px",height:"450px"},children:[(0,n.jsx)(V.tN,{position:"Bottom"}),(0,n.jsx)(V.vc,{wjProperty:"axisY",majorUnit:1,max:7,min:0,itemFormatter:S,axisLine:!0}),(0,n.jsx)(V.t3,{binding:"DispatchStatus",name:e("MarineShipmentByCompartmentList_ShipmentStatus")})]})})}),(0,n.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,n.jsx)("div",{className:"col-12 detailsTable",id:"printTable",children:(0,n.jsxs)(d.bQ,{data:i,scrollable:!0,rowExpansionTemplate:y,expandedRows:r,children:[(0,n.jsx)(d.bQ.Column,{className:"compColHeight colminWidth",field:"DispatchStatus",header:e("MarineShipmentByCompartmentList_ShipmentStatus"),editable:!1,editFieldType:"text"},"DispatchStatus"),(0,n.jsx)(d.bQ.Column,{className:"compColHeight colminWidth",field:"UpdatedTime",header:e("ViewMarineReceiptAuditTrail_UpdatedTime"),editable:!1,editFieldType:"text",renderer:e=>D(e)},"DispatchCompartmentStatus"),(0,n.jsx)(d.bQ.Column,{className:"compColHeight colminWidth",header:e("ViewMarineReceiptAuditTrail_ReceiptCompartmentSeq"),field:"CompartmentSeqNoInVehicle",editable:!1,editFieldType:"text"}),(0,n.jsx)(d.bQ.Column,{className:"compColHeight colminWidth",field:"DispatchCompartmentStatus",header:e("ViewMarineReceiptAuditTrail_ReceiptCompartmentStatus"),editable:!1,renderer:e=>m(e.rowData.DispatchCompartmentStatus),editFieldType:"text"},"CompartmentSeqNoInVehicle"),(0,n.jsx)(d.bQ.Column,{className:"compColHeight colminWidth",header:e("PIN"),editable:!1,field:"UserPIN",editFieldType:"text"}),(0,n.jsx)(d.bQ.Column,{className:"compColHeight colminWidth",header:e("ViewAuditTrail_OfficerName"),editable:!1,field:"OfficerName",editFieldType:"text"}),l.map((t=>(0,n.jsx)(d.bQ.Column,{className:"compColHeight colminWidth",header:e(t.AttributeName),editable:!1})))]})})}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col-12 col-sm-6 col-lg-8",children:(0,n.jsx)(h.Button,{className:"backButton",onClick:a,content:e("Back")})}),u?"":(0,n.jsx)("div",{className:"col-12 col-sm-6 col-lg-4",style:{textAlign:"right"},children:(0,n.jsx)(h.Button,{className:"printButton",onClick:()=>{g(!0)},content:e("ViewAuditTrail_PrintAuditTrail")})})]})]})})}),(0,n.jsx)(c.TranslationConsumer,{children:e=>(0,n.jsx)(h.Modal,{open:C,className:"marineModalPrint",children:(0,n.jsxs)(h.Modal.Content,{children:[(0,n.jsx)("div",{className:"col col-md-8 col-lg-9 col col-xl-9",children:(0,n.jsx)("h3",{children:e("Transaction_AuditTrail_Heading")+" : "+t})}),(0,n.jsx)("div",{className:"col-md-10 container-fluid",children:(0,n.jsxs)(V.IO,{itemsSource:o,chartType:"Line",bindingX:"UpdatedTime",palette:["red"],style:{width:"100%",height:"450px"},children:[(0,n.jsx)(V.tN,{position:"Bottom"}),(0,n.jsx)(V.vc,{wjProperty:"axisY",majorUnit:1,max:7,min:0,itemFormatter:S,axisLine:!0}),(0,n.jsx)(V.t3,{binding:"DispatchStatus",name:e("MarineShipmentByCompartmentList_ShipmentStatus")})]})}),(0,n.jsx)("div",{className:"col-12 detailsTable",children:(0,n.jsxs)(d.bQ,{data:i,children:[(0,n.jsx)(d.bQ.Column,{className:"compColHeight",field:"DispatchStatus",header:e("MarineShipmentByCompartmentList_ShipmentStatus"),editable:!1,editFieldType:"text"},"DispatchStatus"),(0,n.jsx)(d.bQ.Column,{className:"compColHeight",field:"UpdatedTime",header:e("ViewMarineReceiptAuditTrail_UpdatedTime"),editable:!1,editFieldType:"text",renderer:e=>D(e)},"DispatchCompartmentStatus"),(0,n.jsx)(d.bQ.Column,{className:"compColHeight",header:e("ViewMarineReceiptAuditTrail_ReceiptCompartmentSeq"),field:"CompartmentSeqNoInVehicle",editable:!1,editFieldType:"text"}),(0,n.jsx)(d.bQ.Column,{className:"compColHeight",field:"DispatchCompartmentStatus",header:e("ViewMarineReceiptAuditTrail_ReceiptCompartmentStatus"),editable:!1,renderer:e=>m(e.rowData.DispatchCompartmentStatus),editFieldType:"text"},"CompartmentSeqNoInVehicle"),(0,n.jsx)(d.bQ.Column,{className:"compColHeight",header:e("PIN"),editable:!1,field:"UserPIN",editFieldType:"text"}),(0,n.jsx)(d.bQ.Column,{className:"compColHeight",header:e("ViewAuditTrail_OfficerName"),editable:!1,field:"OfficerName",editFieldType:"text"}),l.map((t=>(0,n.jsx)(d.bQ.Column,{className:"compColHeight",header:e(t.AttributeName),editable:!1})))]})}),(0,n.jsx)(h.Modal.Footer,{children:(0,n.jsxs)("div",{className:"viewPrint",children:[(0,n.jsx)(h.Button,{type:"secondary",size:"small",content:e("MarineEOD_Close"),onClick:()=>{g(!1)}}),(0,n.jsx)(h.Button,{type:"primary",size:"small",content:e("ViewAuditTrail_Print"),onClick:()=>{let i=window.document.getElementById("printTable").innerHTML;const s=window.document.createElement("IFRAME");let a=null;window.document.body.appendChild(s),a=s.contentWindow.document;const o=i.substring(0,i.indexOf("<table")+6),n=i.substring(i.indexOf("<table")+6,i.length);i=e("ViewAuditTrail_ViewAuditTrailForShipment")+" : "+t+o+' border="1" cellspacing="0"'+n,i=i.replace('<tfoot class="p-datatable-tfoot">',""),i=i.replace('<tr><td class="compColHeight"></td><td class="compColHeight"></td><td class="compColHeight"></td><td class="compColHeight"></td><td class="compColHeight"></td><td class="compColHeight"></td></tr>',""),a.write(i),a.close(),s.contentWindow.focus(),s.contentWindow.print(),setTimeout((()=>{window.document.body.removeChild(s)}),2e3)}})]})})]})})})]})}i(728).setLicenseKey(P.yQ);var _=i(53164),O=i(46100),F=i(61227),B=i(39424),W=i(80297);class U extends s.Component{constructor(){super(...arguments),this.state={isDetails:!1,isReadyToRender:!1,isDetailsModified:!1,operationsVisibilty:{add:!1,delete:!1,shareholder:!1},selectedRow:{},selectedItems:[],selectedShareholder:"",data:[],loadingDetails:[],productAllocationDetails:[],terminalCodes:[],fromDate:new Date,toDate:new Date,dateError:"",shipmentNextOperations:[],currentShipmentStatuses:[],loadingDetailsHideFields:[],lastStatus:"",reason:"",isError:!1,isOperation:!1,isViewDetails:!1,isCloseShipment:!1,isViewAuditTrail:!1,isViewProductAllocation:!1,isViewLoadingDetails:!1,isManualEntry:!1,isCloseShipmentBtn:!1,auditTrailList:[],auditAttributeMetaDataList:[],modAuditTrailList:[],auditExpandedRows:[],validationErrors:p.Th(v.FQ),viewTab:0,modMarineDispatch:{},isShowPanle:!1,marineDispatchBtnStatus:!1,drawerStatus:!1,showReport:!1,marineShipmentKPIList:[],deleteEnableForConfigure:[],activityInfo:[],showDeleteAuthenticationLayout:!1,showAuthorizeToLoadAuthenticationLayout:!1,showCloseShipmentAuthenticationLayout:!1,showViewBOLAuthenticationLayout:!1,showPrintBOLAuthenticationLayout:!1,showFANAuthenticationLayout:!1},this.componentName="MarineDispatchComponent",this.handleAdd=()=>{try{var{operationsVisibilty:e}={...this.state};e.delete=!1,e.add=!1,e.shareholder=!1,this.setState({drawerStatus:!1,isDetails:!1},(()=>{this.setState({viewTab:0,isDetails:!0,isShowPanle:!1,selectedRow:{},operationsVisibilty:e})}))}catch(t){console.log(t),console.log("MarineDisatchComposite:Error occured on handleAdd")}},this.handleDelete=()=>{this.handleAuthenticationClose();try{var{operationsVisibilty:e}={...this.state};e.delete=!1,this.setState({operationsVisibilty:e,deleteEnableForConfigure:[]});for(var t=[],i=0;i<this.state.selectedItems.length;i++){var s=this.state.selectedItems[i].Common_Code,a={KeyCodes:[{Key:b.yI,Value:s}]};t.push(a)}S()(D.Y2E,p.tW(t,this.props.tokenDetails.tokenInfo)).then((t=>{var i=t.data,s=p.Cy(i,"Shipment_DeletionStatus",["MarineDispatchCode"]);this.getMarineDispatchList(),this.getKPIList(),e.delete=!1,this.setState({selectedItems:[],operationsVisibilty:e,selectedRow:{},isDetails:!1,deleteEnableForConfigure:[]},(()=>{this.state.isShowPanle&&this.setState({isDetails:!0,isShowPanle:!1,isReadyToRender:!1})})),s.messageResultDetails.forEach((e=>{e.keyFields.length>0&&(e.keyFields[0]="ViewShipmentStatus_ShipmentCode")})),(0,y.toast)((0,n.jsx)(f.A,{children:(0,n.jsx)(E.A,{notificationMessage:s})}),{autoClose:"success"===s.messageType&&1e4})})).catch((e=>{throw e}))}catch(o){console.log("MarineDisatchComposite:Error occured on handleDelete")}},this.handleBack=()=>{try{var{operationsVisibilty:e}={...this.state};if(e.add=p.ab(this.props.userDetails.EntityResult.FunctionsList,m.i.add,m.QB),e.delete=!1,this.getMarineDispatchList(),this.getKPIList(),this.state.isDetails&&(this.state.isViewAuditTrail||this.state.isViewLoadingDetails||this.state.isManualEntry||this.state.isViewProductAllocation)){var t={DispatchCode:this.state.selectedItems[0].Common_Code};this.handleClickRefresh(t),this.setState({isDetails:!1,isViewDetails:!1,isViewAuditTrail:!1,isViewLoadingDetails:!1,isManualEntry:!1,isShowPanle:!1,isViewProductAllocation:!1,drawerStatus:!1,deleteEnableForConfigure:[]},(()=>{this.setState({isDetails:!0,isShowPanle:!0})}))}else this.setState({isDetails:!1,isViewDetails:!1,isShowPanle:!1,isViewAuditTrail:!1,isViewProductAllocation:!1,isViewLoadingDetails:!1,isManualEntry:!1,selectedRow:{},selectedItems:[],operationsVisibilty:e,drawerStatus:!1,deleteEnableForConfigure:[],isReadyToRender:!1})}catch(i){console.log("MarineDispatchComposite:Error occured on Back click",i)}},this.handleRangeSelect=e=>{let{to:t,from:i}=e;void 0!==t&&this.setState({toDate:t}),void 0!==i&&this.setState({fromDate:i})},this.handleDateTextChange=(e,t)=>{""===e&&this.setState({dateError:"",toDate:"",fromDate:""}),null!==t&&""!==t?this.setState({dateError:"Common_InvalidDate",toDate:"",fromDate:""}):this.setState({dateError:"",toDate:e.to,fromDate:e.from})},this.handleLoadOrders=()=>{let e=p.wb(this.state.toDate,this.state.fromDate);""!==e?this.setState({dateError:e}):(this.setState({dateError:""}),this.getMarineDispatchList())},this.handleModalBack=()=>{this.setState({showReport:!1})},this.CloseShipment=()=>{this.setState({isCloseShipmentBtn:!0}),setTimeout((()=>{this.setState({isCloseShipmentBtn:!1})}),1500);var e=j().cloneDeep(this.state.reason);if(this.onFieldChange("Reason",e)){let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showCloseShipmentAuthenticationLayout:e},(()=>{!1===e&&this.handleShipmentClose()}))}else this.setState({isError:!0})},this.handleShipmentClose=()=>{this.handleAuthenticationClose();var e=j().cloneDeep(this.state.reason),t=j().cloneDeep(this.state.selectedItems[0]),i=[{key:b.yI,value:t.Common_Code},{key:b.HB,value:e}],s={keyDataCode:b.yI,KeyCodes:i},a={messageType:"critical",message:"ViewMarineDispatch_CloseShipment_status",messageResultDetails:[{keyFields:["Marine_ShipmentCompDetail_ShipmentNumber"],keyValues:[t.Common_Code],isSuccess:!1,errorMessage:""}]};S()(D.b30,p.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var i=e.data;if(a.messageType=i.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=i.IsSuccess,!0===i.IsSuccess?this.setState({isCloseShipment:!1,reason:""}):(a.messageResultDetails[0].errorMessage=i.ErrorList[0]+P.uV+"",console.log("Error in CloseShipment:",i.ErrorList)),this.savedEvent(t,"CloseShipment",a),!0===this.state.isDetails){var s={DispatchCode:this.state.selectedItems[0].Common_Code};this.handleClickRefresh(s)}else this.componentDidMount()})).catch((e=>{a.messageResultDetails[0].errorMessage=e,this.savedEvent(t,"CloseShipment",a),console.log("Error while CloseShipment:",e)}))},this.viewBOLClick=()=>{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showViewBOLAuthenticationLayout:e},(()=>{!1===e&&this.handleViewBOL()}))},this.handleViewBOL=()=>{this.handleAuthenticationClose(),void 0===this.reportServiceURI?S()(D.yTV,p.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{e.data.IsSuccess&&(this.reportServiceURI=e.data.EntityResult,this.setState({showReport:!0}))})):this.setState({showReport:!0})},this.handleOperationClick=e=>{this.setState({marineDispatchBtnStatus:!0}),setTimeout((()=>{this.setState({marineDispatchBtnStatus:!1})}),800),e===P.i4.ViewMarineShipmentList_AuthorizeToLoad?this.authorizeToLoadOnClick():e===P.i4.ViewMarineShipmentList_CloseMarineShipment?this.setState({isCloseShipment:!0}):e===P.i4.ViewMarineShipmentList_ViewAuditTrail?this.getAuditTrailList(this.state.selectedItems[0]):e===P.i4.ViewMarineShipmentList_ViewTransactions?this.getMarineDispatchLoadingDetail():e===P.i4.ViewMarineShipmentList_PrintFAN?this.printFANClick():e===P.i4.ViewMarineShipmentList_ViewBOL?this.viewBOLClick():e===P.i4.ViewMarineShipmentList_PrintBOL?this.printBOLClick():e===P.i4.ViewMarineShipmentList_BSIOutbound?this.BSIOutbound():e===P.i4.ViewMarineShipmentList_ManualEntry&&this.getMarineDispatch(this.state.selectedItems[0])},this.handleRowClick=e=>{try{if(!p.ab(this.props.userDetails.EntityResult.FunctionsList,m.i.view,m.QB)){return void this.savedEvent(e,"Permission",{messageType:"critical",message:"ShipmentCompDetail_Permission",messageResultDetails:[{keyFields:"",keyValues:"",isSuccess:!1,errorMessage:"BSI_SHIPMENTSECURITYERROR"}]})}var{operationsVisibilty:t,activityInfo:i}={...this.state};t.add=p.ab(this.props.userDetails.EntityResult.FunctionsList,m.i.add,m.QB);let a=i.filter((e=>e.ActivityCode===P.Ch.MARINE_SHIPMENT_ENABLE_DELETE&&e.ActionTypeCode===P.Gd.CHECK));var s=[];void 0!==a&&a.length>0&&(s=a[0].ShipmentStates),t.delete=!this.props.userDetails.EntityResult.IsWebPortalUser&&(s.indexOf(e.MarineShipmentByCompartmentList_ShipmentStatus.toUpperCase())>-1&&p.ab(this.props.userDetails.EntityResult.FunctionsList,m.i.remove,m.QB)),t.shareholder=!1,this.GetShipmentStatusOperations([e]),this.GetShipmentStatuses([e]),this.setState({isDetails:!0,selectedRow:e,selectItems:[e],selectedItems:[e],isShowPanle:!0,operationsVisibilty:t})}catch(a){console.log("MarineDispatchComposite:Error occured on handleRowClick",a)}},this.handleGoDetails=e=>{try{if(!p.ab(this.props.userDetails.EntityResult.FunctionsList,m.i.view,m.QB)){return void this.savedEvent(e,"Permission",{messageType:"critical",message:"ShipmentCompDetail_Permission",messageResultDetails:[{keyFields:"",keyValues:"",isSuccess:!1,errorMessage:"BSI_SHIPMENTSECURITYERROR"}]})}var{operationsVisibilty:t}=this.state;t.shareholder=!1,void 0!==e.MarineShipmentByCompartmentList_ShipmentStatus&&this.GetShipmentStatusOperations([e]),this.GetShipmentStatuses([e]),this.setState({isDetails:!0,isShowPanle:!0,selectedRow:e,viewTab:2,operationsVisibilty:t}),this.setState({isOperation:!0})}catch(i){console.log("MarineDispatchComposite:Error occured on handleRowClick",i)}},this.handleSelection=e=>{try{var{operationsVisibilty:t,drawerStatus:i,activityInfo:s}={...this.state};let o=s.filter((e=>e.ActivityCode===P.Ch.MARINE_SHIPMENT_ENABLE_DELETE&&e.ActionTypeCode===P.Gd.CHECK));var a=[];void 0!==o&&o.length>0&&(a=o[0].ShipmentStates);let n=!(e.findIndex((e=>a.indexOf(e.MarineShipmentByCompartmentList_ShipmentStatus.toUpperCase())<0))>=0);t.delete=!this.props.userDetails.EntityResult.IsWebPortalUser&&(n&&e.length>0&&p.ab(this.props.userDetails.EntityResult.FunctionsList,m.i.remove,m.QB)),i=!1,this.setState({selectedItems:e,operationsVisibilty:t,isOperation:!1,deleteEnableForConfigure:[],drawerStatus:i}),1===e.length&&(this.GetShipmentStatusOperations(e),this.GetShipmentStatuses(e),this.setState({isOperation:!0}))}catch(o){console.log("MarineDispatchComposite:Error occured on handleSelection",o)}},this.savedEvent=(e,t,i)=>{try{var{operationsVisibilty:s,activityInfo:a}={...this.state};let l=a.filter((e=>e.ActivityCode===P.Ch.MARINE_SHIPMENT_ENABLE_DELETE&&e.ActionTypeCode===P.Gd.CHECK));var o=[];void 0!==l&&l.length>0&&(o=l[0].ShipmentStates);let d=void 0===e.MarineShipmentByCompartmentList_ShipmentStatus||null===e.MarineShipmentByCompartmentList_ShipmentStatus?e.DispatchStatus:e.MarineShipmentByCompartmentList_ShipmentStatus;if("success"===i.messageType&&(s.add=p.ab(this.props.userDetails.EntityResult.FunctionsList,m.i.add,m.QB),s.delete=!this.props.userDetails.EntityResult.IsWebPortalUser&&(o.indexOf(d.toUpperCase())>-1&&p.ab(this.props.userDetails.EntityResult.FunctionsList,m.i.remove,m.QB)),this.setState({isDetailsModified:!0,operationsVisibilty:s})),"success"===i.messageType&&"add"===t){var r=[{MarineDispatchCode:e.DispatchCode,Common_Shareholder:e.ShareholderCode,Common_Code:e.DispatchCode,MarineShipmentByCompartmentList_ShipmentStatus:d}];this.setState({selectedItems:r})}(0,y.toast)((0,n.jsx)(f.A,{children:(0,n.jsx)(E.A,{notificationMessage:i})}),{autoClose:"success"===i.messageType&&1e4})}catch(l){console.log("MarineDispatchComposite:Error occured on savedEvent",l)}},this.handlePageAdd=e=>{var t=this.getTransportationType(),i=[{key:b.yI,value:e.DispatchCode},{key:b.v6,value:t}],s={keyDataCode:b.yI,KeyCodes:i};S()(D.FDo,p.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e={Common_Code:t.EntityResult.DispatchCode,MarineShipmentByCompartmentList_ShipmentStatus:t.EntityResult.DispatchStatus};this.setState({isDetails:!1,isShowPanle:!1},(()=>{this.setState({isDetails:!0,isShowPanle:!0,selectedItems:[e]}),this.handleRowClick(e)}))}})).catch((e=>{console.log("Error while getting marineDispatch:",e)}))},this.authorizeToLoadOnClick=()=>{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showAuthorizeToLoadAuthenticationLayout:e},(()=>{!1===e&&this.authorizeToLoad()}))},this.authorizeToLoad=()=>{this.handleAuthenticationClose();var e=j().cloneDeep(this.state.selectedItems[0]),t=[{key:b.yI,value:e.Common_Code},{key:b.f7,value:e.MarineShipmentByCompartmentList_ShipmentStatus}],i={keyDataCode:b.yI,KeyCodes:t},s={messageType:"critical",message:"ViewMarineDispatch_AuthorizeLoad_status",messageResultDetails:[{keyFields:["Marine_ShipmentCompDetail_ShipmentNumber"],keyValues:[e.Common_Code],isSuccess:!1,errorMessage:""}]};S()(D.J2F,p.tW(i,this.props.tokenDetails.tokenInfo)).then((t=>{var i=t.data;if(s.messageType=i.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=i.IsSuccess,!0===i.IsSuccess){var a={Common_Code:e.Common_Code};this.setState({selectedRow:a,isOperation:!0},(()=>{if(!0===this.state.isDetails){var e={DispatchCode:this.state.selectedItems[0].Common_Code};this.handleClickRefresh(e)}else this.componentDidMount()})),!0===this.state.isDetails&&this.setState({isDetails:!1,isShowPanle:!1},(()=>{this.setState({isDetails:!0,isShowPanle:!0})}))}else console.log("Error in AuthorizeToLoad:",i.ErrorList),s.messageResultDetails[0].errorMessage=i.ErrorList[0]+P.uV+"";this.savedEvent(e,"AuthorizeToLoad",s)})).catch((t=>{s.messageResultDetails[0].errorMessage=t,this.savedEvent(e,"AuthorizeToLoad",s),console.log("Error while AuthorizeToLoad:",t)}))},this.printFANClick=()=>{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showFANAuthenticationLayout:e},(()=>{!1===e&&this.printFAN()}))},this.printFAN=()=>{this.handleAuthenticationClose();var e=j().cloneDeep(this.state.selectedItems[0]),t=[{key:b.yI,value:e.Common_Code}],i={keyDataCode:b.yI,KeyCodes:t},s={messageType:"critical",message:"MarineDispatchDetail_PrintStatus",messageResultDetails:[{keyFields:["Marine_ShipmentCompDetail_ShipmentNumber"],keyValues:[e.Common_Code],isSuccess:!1,errorMessage:""}]};S()(D.J6L,p.tW(i,this.props.tokenDetails.tokenInfo)).then((t=>{var i=t.data;s.messageType=i.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=i.IsSuccess,!0===i.IsSuccess||(s.messageResultDetails[0].errorMessage=i.ErrorList[0]+P.uV+"",console.log("Error in printFAN:",i.ErrorList)),this.savedEvent(e,"printFAN",s)})).catch((t=>{s.messageResultDetails[0].errorMessage=t,this.savedEvent(e,"printFAN",s),console.log("Error while printFAN:",t)}))},this.printBOLClick=()=>{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showPrintBOLAuthenticationLayout:e},(()=>{!1===e&&this.printBOL()}))},this.printBOL=()=>{this.handleAuthenticationClose();var e=j().cloneDeep(this.state.selectedItems[0]),t=[{key:b.yI,value:e.Common_Code}],i={keyDataCode:b.yI,KeyCodes:t},s={messageType:"critical",message:"MarineDispatchDetail_PrintStatus",messageResultDetails:[{keyFields:["Marine_ShipmentCompDetail_ShipmentNumber"],keyValues:[e.Common_Code],isSuccess:!1,errorMessage:""}]};S()(D.jXr,p.tW(i,this.props.tokenDetails.tokenInfo)).then((t=>{var i=t.data;s.messageType=i.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=i.IsSuccess,!0===i.IsSuccess||(s.messageResultDetails[0].errorMessage=i.ErrorList[0]+P.uV+"",console.log("Error in printBOL:",i.ErrorList)),this.savedEvent(e,"printBOL",s)})).catch((t=>{s.messageResultDetails[0].errorMessage=t,this.savedEvent(e,"printBOL",s),console.log("Error while printBOL:",t)}))},this.setValid=(e,t)=>{var i=[{key:b.yI,value:this.state.selectedItems[0].Common_Code},{key:b.eE,value:e},{key:b.g1,value:t}],s={keyDataCode:b.yI,KeyCodes:i};S()(D.nKO,p.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{e.data.IsSuccess&&this.getMarineDispatchLoadingDetail()})).catch((e=>{console.log("MarineDisatchComposite:Error occured on setValid",e)}))},this.componentWillUnmount=()=>{this.clearStorage(),window.removeEventListener("beforeunload",this.clearStorage)},this.clearStorage=()=>{sessionStorage.removeItem(this.componentName+"GridState")},this.handleShareholderSelectionChange=e=>{try{this.setState({selectedShareholder:e}),this.getMarineDispatchList(),this.getTerminalsList(e)}catch(t){console.log("MarineDispatchComposite:Error occured on handleShareholderSelectionChange",t)}},this.formAuditAttributes=e=>{try{let t=j().cloneDeep(this.state.auditAttributeMetaDataList);t=t.filter((function(t){return t.TerminalCode===e}));let i=j().cloneDeep(this.state.auditTrailList),s=[];t.forEach((e=>{e.attributeMetaDataList.forEach((e=>{s.push({AttributeCode:e.Code,AttributeName:e.DisplayName,AttributeValue:e.DefaultValue,TerminalCode:e.TerminalCode,IsMandatory:e.IsMandatory,DataType:e.DataType,IsReadonly:e.IsReadonly,auditSequenceNo:""})}))}));let a=j().cloneDeep(s);i.forEach((t=>{if(null!==t.index||null!==t.AttributesforUI&&void 0!==t.AttributesforUI){null!==t.AttributesforUI&&void 0!==t.AttributesforUI?(t.AttributesforUI=t.AttributesforUI.filter((function(t){return t.TerminalCode===e})),s=s.filter((function(e){return!t.AttributesforUI.some((function(t){return e.TerminalCode===t.TerminalCode}))}))):t.AttributesforUI=[];let i=j().cloneDeep(s);if(Array.isArray(t.Attributes)&&null!==t.Attributes&&void 0!==t.Attributes&&t.Attributes.length>0){t.Attributes.filter((function(t){return t.TerminalCode===e})).forEach((e=>{e.ListOfAttributeData.forEach((t=>{let s=i.findIndex((i=>i.TerminalCode===e.TerminalCode&&i.AttributeCode===t.AttributeCode));s>=0&&(i[s].AttributeValue=t.AttributeValue)}))})),i.forEach((e=>{e.auditSequenceNo=t.index,t.AttributesforUI.push(e)}))}else{j().cloneDeep(s).forEach((e=>{e.auditSequenceNo=t.index,t.AttributesforUI.push(e)}))}}else t.AttributesforUI=[],a.forEach((e=>{e.auditSequenceNo=t.index,t.AttributesforUI.push(e)}))})),this.setState({auditTrailList:i})}catch(t){console.log("TrailerDetailsComposite:Error in forming Compartment Attributes",t)}},this.onTabChange=e=>{this.setState({viewTab:e})},this.handleDrawer=()=>{var e=j().cloneDeep(this.state.drawerStatus);this.setState({drawerStatus:!e})},this.authenticateDelete=()=>{try{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showDeleteAuthenticationLayout:e}),!1===e&&this.handleDelete()}catch(e){console.log("Marine Shipment Composite : Error in authenticateDelete")}},this.handleAuthenticationClose=()=>{this.setState({showDeleteAuthenticationLayout:!1,showAuthorizeToLoadAuthenticationLayout:!1,showCloseShipmentAuthenticationLayout:!1,showViewBOLAuthenticationLayout:!1,showPrintBOLAuthenticationLayout:!1,showFANAuthenticationLayout:!1})}}getAttributes(){try{S()(D.fKH,p.tW([R.ip],this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;t.IsSuccess?this.setState({auditAttributeMetaDataList:t.EntityResult.MARINEDISPATCHSTATUSTIME}):console.log("Failed to get Attributes")}))}catch(e){console.log("Error while getting Attributes:",e)}}renderModal(){let e=null;e=this.props.userDetails.EntityResult.IsArchived?"TM/"+P.mD+"/MarineBOL":"TM/"+P.PZ+"/MarineBOL";let t={Culture:this.props.userDetails.EntityResult.UICulture,DispatchCode:1===this.state.selectedItems.length?this.state.selectedItems[0].Common_Code:this.state.selectedRow.Common_Code};return(0,n.jsx)(L.A,{showReport:this.state.showReport,handleBack:this.handleModalBack,handleModalClose:this.handleModalBack,proxyServerHost:D._Oi,reportServiceHost:this.reportServiceURI,filePath:e,parameters:t})}GetShipmentStatusOperations(e){try{S()(D.fB+"?DispatchStatus="+e[0].MarineShipmentByCompartmentList_ShipmentStatus,p.Jm(this.props.tokenDetails.tokenInfo)).then((t=>{var i=t.data;let s=[];if(Object.keys(i.EntityResult).forEach((e=>{i.EntityResult[e]&&s.push(e)})),this.props.userDetails.EntityResult.IsWebPortalUser){let e=s.filter((function(e){return e!==P.i4.ViewMarineShipmentList_PrintFAN&&e!==P.i4.ViewMarineShipmentList_PrintBOL}));s=e}if(this.props.userDetails.EntityResult.IsArchived||this.props.userDetails.EntityResult.IsWebPortalUser){let e=s.filter((function(e){return e===P.i4.ViewMarineShipmentList_ViewAuditTrail||e===P.i4.ViewMarineShipmentList_ViewBOL||e===P.i4.ViewMarineShipmentList_ViewTransactions}));s=e}let a=s.filter((e=>e===P.i4.ViewMarineShipmentList_ViewTransactions?!!p.ab(this.props.userDetails.EntityResult.FunctionsList,m.i.view,m.Yb):e===P.i4.ViewMarineShipmentList_ViewAuditTrail?!!p.ab(this.props.userDetails.EntityResult.FunctionsList,m.i.view,m.fl):e===P.i4.ViewMarineShipmentList_CloseMarineShipment?!!p.ab(this.props.userDetails.EntityResult.FunctionsList,m.i.modify,m.P8):e===P.i4.ViewMarineShipmentList_PrintFAN?!!p.ab(this.props.userDetails.EntityResult.FunctionsList,m.i.view,m.Tm):e===P.i4.ViewMarineShipmentList_ViewBOL?!!p.ab(this.props.userDetails.EntityResult.FunctionsList,m.i.view,m.$K):e!==P.i4.ViewMarineShipmentList_PrintBOL||!!p.ab(this.props.userDetails.EntityResult.FunctionsList,m.i.view,m.$K)));this.props.userDetails.EntityResult.IsEnterpriseNode||"READY"===e.MarineReceiptByCompartmentList_ReceiptStatus||null!==e.localTerminalCode||(a=[]),this.setState({shipmentNextOperations:a})})).catch((e=>{console.log("Error while getting GetShipmentStatusOperations:",e)}))}catch(t){console.log(t)}}GetShipmentStatuses(e){try{S()(D.uY9+"?MarineDispatchCode="+e[0].Common_Code+"&ShipmentType=COMPARTMENT",p.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;this.setState({currentShipmentStatuses:t.EntityResult}),t.IsSuccess})).catch((e=>{console.log("Error while getting GetShipmentStatuses:",e)}))}catch(t){console.log(t)}}getTerminalsList(e){try{null!==e&&""!==e?S()(D.Oqv,p.tW([e],this.props.tokenDetails.tokenInfo)).then((e=>{e.data.IsSuccess&&this.setState({terminalCodes:e.data.EntityResult})})):this.setState({terminalCodes:[]})}catch(t){console.log("MarineDispatchComposite:Error occured on getTerminalsList",t)}}handleClickRefresh(e){var t=this.getTransportationType(),i=[{key:b.yI,value:e.DispatchCode},{key:b.v6,value:t}],s={keyDataCode:b.yI,KeyCodes:i};S()(D.FDo,p.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e={Common_Code:t.EntityResult.DispatchCode,MarineShipmentByCompartmentList_ShipmentStatus:t.EntityResult.DispatchStatus};this.setState({isDetails:!1,isShowPanle:!1},(()=>{this.setState({selectedItems:[e]}),this.handleRowClick(e),this.GetShipmentStatusOperations([e])}))}})).catch((e=>{console.log("Error while getting marineDispatch:",e)}))}getMarineDispatchList(){this.setState({isReadyToRender:!1});let e=new Date(this.state.fromDate),t=new Date(this.state.toDate);e.setHours(0,0,0),t.setHours(23,59,59);let i={startRange:e,endRange:t,TransportationType:"MARINE"};S()(D.IMi,p.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({data:t.EntityResult,isReadyToRender:!0},(()=>{if(!0===this.state.isOperation&&1===this.state.selectedItems.length){let s=this.state.selectedItems[0];var e=t.EntityResult.Table.filter((function(e){return e.Common_Code===s.Common_Code}));let{operationsVisibilty:a,activityInfo:o}={...this.state},n=o.filter((e=>e.ActivityCode===P.Ch.MARINE_SHIPMENT_ENABLE_DELETE&&e.ActionTypeCode===P.Gd.CHECK));var i=[];void 0!==n&&n.length>0&&(i=n[0].ShipmentStates),a.delete=!this.props.userDetails.EntityResult.IsWebPortalUser&&(i.indexOf(e[0].MarineShipmentByCompartmentList_ShipmentStatus.toUpperCase())>-1&&p.ab(this.props.userDetails.EntityResult.FunctionsList,m.i.remove,m.QB)),this.setState({selectedItems:e,operationsVisibilty:a}),this.GetShipmentStatusOperations(e),this.GetShipmentStatuses(e)}})):(this.setState({data:[],isReadyToRender:!0}),console.log("Error in GetMarineDispatchListForRole:",t.ErrorList))})).catch((e=>{this.setState({data:[],isReadyToRender:!0}),console.log("Error while geting MarineDispatch List:",e)}))}BSIOutbound(){var e=j().cloneDeep(this.state.selectedItems[0]),t=[{key:b.yI,value:e.Common_Code}],i={keyDataCode:b.yI,KeyCodes:t},s={messageType:"critical",message:"ViewMarineDispatch_BSIOutbound_status",messageResultDetails:[{keyFields:["Marine_ShipmentCompDetail_ShipmentNumber"],keyValues:[e.Common_Code],isSuccess:!1,errorMessage:""}]};S()(D.HV,p.tW(i,this.props.tokenDetails.tokenInfo)).then((t=>{var i=t.data;s.messageType=i.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=i.IsSuccess,!0===i.IsSuccess||(s.messageResultDetails[0].errorMessage=i.ErrorList[0],console.log("Error in BSIOutbound:",i.ErrorList)),this.savedEvent(e,"BSIOutbound",s)})).catch((t=>{s.messageResultDetails[0].errorMessage=t,this.savedEvent(e,"BSIOutbound",s),console.log("Error while BSIOutbound:",t)}))}getMarineDispatch(e){O.Y0.QuantityUOM=this.props.userDetails.EntityResult.PageAttibutes.DefaultUOMS.QuantityUOM,O.Y0.TerminalCodes=1===this.state.terminalCodes.length?[...this.state.terminalCodes]:[];var t=this.getTransportationType();if(O.Y0.TransportationType=t,void 0!==e.Common_Code){var i=[{key:b.yI,value:e.Common_Code},{key:b.v6,value:t}],s={keyDataCode:b.yI,KeyCodes:i},a={messageType:"critical",message:"ViewMarineDispatchManualEntry_status",messageResultDetails:[{keyFields:["Marine_ShipmentCompDetail_ShipmentNumber"],keyValues:[e.Common_Code],isSuccess:!1,errorMessage:""}]};S()(D.FDo,p.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{var i=t.data;let{operationsVisibilty:s}=this.state;!0===i.IsSuccess?(s.delete=!1,s.add=!1,this.setState({modMarineDispatch:j().cloneDeep(i.EntityResult),isManualEntry:!0,operationsVisibilty:s,deleteEnableForConfigure:[]})):(a.messageResultDetails[0].errorMessage=i.ErrorList[0],this.savedEvent(e,"CloseShipment",a),console.log("Error in GetMarineDispatch:",i.ErrorList))})).catch((t=>{a.messageResultDetails[0].errorMessage=t,this.savedEvent(e,"CloseShipment",a),console.log("Error while getting marineDispatch:",t)}))}else this.setState({modMarineDispatch:j().cloneDeep(O.Y0),isManualEntry:!0})}onFieldChange(e,t){try{const i=j().cloneDeep(this.state.validationErrors);if(this.setState({reason:t}),void 0!==v.FQ[e])return i[e]=p.jr(v.FQ[e],t),this.setState({validationErrors:i}),""===i.Reason||void 0===i.Reason}catch(i){console.log("MarineReceiptDetailsComposite:Error occured on handleChange",i)}}getMarineDispatchLoadingDetail(){var e=j().cloneDeep(this.state.selectedItems[0]),t={messageType:"critical",message:"ShipmentCompDetail_SavedStatus",messageResultDetails:[{keyFields:["Marine_ShipmentCompDetail_ShipmentNumber"],keyValues:[e.Common_Code],isSuccess:!1,errorMessage:""}]};S()(D.jCj+"?MarineDispatchCode="+e.Common_Code,p.Jm(this.props.tokenDetails.tokenInfo)).then((i=>{var s=i.data;t.messageType=s.IsSuccess?"success":"critical",t.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.setState({loadingDetails:s.EntityResult}):(this.setState({loadingDetails:[]}),t.messageResultDetails[0].errorMessage=s.ErrorList[0],this.setState({data:[],isReadyToRender:!0}),this.savedEvent(e,"MarineDispatchLoadingDetail",t))})).catch((i=>{this.setState({loadingDetails:[]}),t.messageResultDetails[0].errorMessage=i,this.savedEvent(e,"MarineDispatchLoadingDetail",t),this.setState({data:[],isReadyToRender:!0}),console.log("Error while getting MarineDispatchLoadingDetail:",i)})),S()(D.LfS+"?MarineDispatchCode="+e.Common_Code,p.Jm(this.props.tokenDetails.tokenInfo)).then((i=>{var s=i.data;t.messageType=s.IsSuccess?"success":"critical",t.messageResultDetails[0].isSuccess=s.IsSuccess;var{operationsVisibilty:a}={...this.state};a.delete=!1,a.add=!1,a.shareholder=!1,!0===s.IsSuccess?this.setState({loadingDetailsHideFields:s.EntityResult,isReadyToRender:!0,isViewLoadingDetails:!0,operationsVisibilty:a}):(this.setState({loadingDetailsHideFields:[],isReadyToRender:!0,isViewLoadingDetails:!0,operationsVisibilty:a}),t.messageResultDetails[0].errorMessage=s.ErrorList[0],this.savedEvent(e,"MarineDispatchLoadingDetail",t))})).catch((i=>{this.setState({loadingDetailsHideFields:[],isReadyToRender:!0,isViewLoadingDetails:!0}),t.messageResultDetails[0].errorMessage=i,this.savedEvent(e,"MarineDispatchLoadingDetail",t),console.log("Error while getting MarineDispatchLoadingDetail:",i)}))}componentDidMount(){try{p.pJ(this.props.userDetails.EntityResult.IsArchived);var{operationsVisibilty:e}={...this.state};e.add=p.ab(this.props.userDetails.EntityResult.FunctionsList,m.i.add,m.QB),this.getAttributes(),this.setState({operationsVisibilty:e,selectedShareholder:this.props.userDetails.EntityResult.PrimaryShareholder}),this.getTerminalsList(this.props.userDetails.EntityResult.PrimaryShareholder),this.getMarineDispatchList(this.props.userDetails.EntityResult.PrimaryShareholder),this.getKPIList(),this.GetShipmentActivityInfo()}catch(t){console.log("MarineDispatchComposite:Error occured on componentDidMount",t)}window.addEventListener("beforeunload",this.clearStorage)}GetShipmentActivityInfo(){try{S()(D.S_j,p.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{e.data.IsSuccess&&this.setState({activityInfo:e.data.EntityResult})})).catch((e=>{console.log("Error while getting shipment activityInfo:",e)}))}catch(e){console.log("Error in GetShipmentActivityInfo:",e)}}getTransportationType(){var e=P.LY.MARINE;const{itemProps:t}=this.props.activeItem;return void 0!==t&&void 0!==t.transportationType&&(e=t.transportationType),e}getAuditTrailList(e){var{operationsVisibilty:t}={...this.state};t.add=!1,t.delete=!1,S()(D.a$r+"?MarineDispatchCode="+e.Common_Code,p.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var i=e.data;if(!0===i.IsSuccess){var s=j().cloneDeep(i.EntityResult),a=j().cloneDeep(i.EntityResult);for(let e=0;e<s.length;e++){let t=s[e].DispatchStatus;t===P.n1.AUTO_LOADED?t=P.oL.AUTO_LOADED:t===P.n1.CLOSED?t=P.oL.CLOSED:t===P.n1.INTERRUPTED?t=P.oL.INTERRUPTED:t===P.n1.LOADING?t=P.oL.LOADING:t===P.n1.MANUALLY_LOADED?t=P.oL.MANUALLY_LOADED:t===P.n1.PARTIALLY_LOADED?t=P.oL.PARTIALLY_LOADED:t===P.n1.QUEUED?t=P.oL.QUEUED:t===P.n1.READY&&(t=P.oL.READY),s[e].DispatchStatus=t,s[e].UpdatedTime=new Date(s[e].UpdatedTime).toLocaleDateString()+" "+new Date(s[e].UpdatedTime).toLocaleTimeString(),a[e].index=e}this.setState({operationsVisibilty:t,auditTrailList:a,modAuditTrailList:s,isViewAuditTrail:!0,deleteEnableForConfigure:[]},(()=>{let e=j().cloneDeep(this.state.auditAttributeMetaDataList);for(let t=0;t<a.length;t++)a[t].AttributesforUI=this.formReadonlyCompAttributes(a[t].Attributes,e)}))}else console.log("Error in getAuditTrailList:",i.ErrorList)})).catch((e=>{console.log("Error while getting getAuditTrailList:",e)}))}formReadonlyCompAttributes(e,t){let i=[];return null!==t&&void 0!==t&&t.length>0&&t.forEach((e=>{e.attributeMetaDataList.forEach((e=>{i.push({AttributeCode:e.Code,AttributeName:e.DisplayName?e.DisplayName:e.Code,AttributeValue:e.DefaultValue,TerminalCode:e.TerminalCode,IsMandatory:e.IsMandatory,DataType:e.DataType,IsReadonly:e.IsReadonly,MinValue:e.MinValue,MaxValue:e.MaxValue,ValidationFormat:e.ValidationFormat,compSequenceNo:""})}))})),null!==e&&void 0!==e&&e.length>0&&e.forEach((e=>{i.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.ListOfAttributeData.forEach((e=>{t.AttributeCode===e.AttributeCode&&(t.AttributeValue=e.AttributeValue)}))}))})),i}getKPIList(){if(!0===p.ab(this.props.userDetails.EntityResult.FunctionsList,m.i.view,m.bL)){var e={message:"",messageType:"critical",messageResultDetails:[]};let t={PageName:B.bl,InputParameters:[]};S()(D.dxq,p.tW(t,this.props.tokenDetails.tokenInfo)).then((t=>{var i=t.data;!0===i.IsSuccess?this.setState({marineShipmentKPIList:i.EntityResult.ListKPIDetails}):(this.setState({marineShipmentKPIList:[]}),console.log("Error in Marine Shipment KPIList:",i.ErrorList),e.messageResultDetails.push({keyFields:[],keyValues:[],isSuccess:!1,errorMessage:i.ErrorList[0]})),e.messageResultDetails.length>0&&(0,y.toast)((0,n.jsx)(f.A,{children:(0,n.jsx)(E.A,{notificationMessage:e})}),{autoClose:"success"===e.messageType&&1e4})})).catch((e=>{console.log("Error while getting Marine Shipment KPIList:",e)}))}}getFunctionGroupName(){return this.state.showDeleteAuthenticationLayout?m.QB:this.state.showCloseShipmentAuthenticationLayout?m.P8:this.state.showAuthorizeToLoadAuthenticationLayout?m.ZU:this.state.showViewBOLAuthenticationLayout||this.state.showPrintBOLAuthenticationLayout?m.$K:this.state.showFANAuthenticationLayout?m.Tm:void 0}getDeleteorEditMode(){return this.state.showDeleteAuthenticationLayout?m.i.remove:m.i.modify}handleOperation(){return this.state.showDeleteAuthenticationLayout?this.handleDelete:this.state.showAuthorizeToLoadAuthenticationLayout?this.authorizeToLoad:this.state.showCloseShipmentAuthenticationLayout?this.handleShipmentClose:this.state.showFANAuthenticationLayout?this.printFAN:this.state.showViewBOLAuthenticationLayout?this.handleViewBOL:this.state.showPrintBOLAuthenticationLayout?this.printBOL:void 0}render(){let e=1===this.state.selectedItems.length,t=!0;void 0!==this.props.shipmentSource&&""!==this.props.shipmentSource&&null!==this.props.shipmentSource&&(t=!1);let i=!0;if(e&&void 0!==this.state.selectedRow.Common_Code){let e=this.state.activityInfo.filter((e=>e.ActivityCode===P.Ch.MARINE_SHIPMENT_ENABLE_UPDATE&&e.ActionTypeCode===P.Gd.CHECK)),t=[];void 0!==e&&e.length>0&&(t=e[0].ShipmentStates),i=t.indexOf(this.state.selectedItems[0].MarineShipmentByCompartmentList_ShipmentStatus.toUpperCase())>-1}return(0,n.jsxs)("div",{children:[(0,n.jsx)(c.TranslationConsumer,{children:e=>(0,n.jsxs)(h.Modal,{className:"popup-theme-wrap",closeIcon:!0,onClose:()=>this.setState({isCloseShipment:!1,reason:""}),open:this.state.isCloseShipment,closeOnDimmerClick:!1,closeOnDocumentClick:!1,size:"small",children:[(0,n.jsx)(h.Modal.Header,{children:e("ViewMarineShipment_CloseHeader")}),(0,n.jsx)(h.Modal.Content,{children:(0,n.jsx)(h.Input,{fluid:!0,value:this.state.reason,indicator:"required",onChange:e=>this.onFieldChange("Reason",e),label:e("ViewMarineShipmentList_Reason"),error:e(this.state.validationErrors.Reason)})}),(0,n.jsxs)(h.Modal.Footer,{children:[(0,n.jsx)(h.Button,{type:"secondary",size:"small",content:e("ViewMarineShipmentList_Cancel"),onClick:()=>this.setState({isCloseShipment:!1,reason:"",validationErrors:[]})}),(0,n.jsx)(h.Button,{type:"primary",size:"small",disabled:this.state.isCloseShipmentBtn,content:e("ViewMarineShipmentList_Active"),onClick:()=>this.CloseShipment()})]})]})}),(0,n.jsx)(f.A,{children:(0,n.jsx)(a.$,{operationsVisibilty:this.state.operationsVisibilty,breadcrumbItem:this.props.activeItem,shrVisible:!1,shareholders:this.props.userDetails.EntityResult.ShareholderList,selectedShareholder:this.state.selectedShareholder,onShareholderChange:this.handleShareholderSelectionChange,onAdd:this.handleAdd,onDelete:this.authenticateDelete,handleBreadCrumbClick:this.props.handleBreadCrumbClick})}),this.state.isViewLoadingDetails?(0,n.jsx)(f.A,{children:(0,n.jsx)(C,{tableData:this.state.loadingDetails.Table,loadingDetailsHideFields:this.state.loadingDetailsHideFields,setValid:this.setValid,handleBack:this.handleBack,onSaved:this.savedEvent,userDetails:this.props.userDetails,status:this.state.selectedItems[0].MarineShipmentByCompartmentList_ShipmentStatus,isWebPortalUser:this.props.userDetails.EntityResult.IsWebPortalUser})}):this.state.isViewAuditTrail?(0,n.jsx)(f.A,{children:(0,n.jsx)(k,{DispatchCode:this.state.selectedItems[0].Common_Code,auditTrailList:this.state.auditTrailList,modAuditTrailList:this.state.modAuditTrailList,handleBack:this.handleBack,auditExpandedRows:this.state.auditExpandedRows,auditToggleExpand:this.auditToggleExpand,IsEnterpriseNode:this.props.IsEnterpriseNode,isWebPortalUser:this.props.userDetails.EntityResult.IsWebPortalUser,Attributes:void 0!==this.state.auditTrailList&&this.state.auditTrailList.length>0&&void 0!==this.state.auditTrailList[0].AttributesforUI?this.state.auditTrailList[0].AttributesforUI:[]})}):this.state.isManualEntry?(0,n.jsx)("div",{children:(0,n.jsx)(f.A,{children:(0,n.jsx)(_.default,{dispatchCode:this.state.modMarineDispatch.DispatchCode,handleBack:this.handleBack,IsBonded:this.state.modMarineDispatch.IsBonded,DispatchStatus:this.state.modMarineDispatch.DispatchStatus,QuantityUOM:this.state.modMarineDispatch.QuantityUOM,ActualTerminalCode:this.state.modMarineDispatch.ActualTerminalCode})})}):!0===this.state.isDetails?(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:this.state.isShowPanle?this.state.drawerStatus?"drawerClose":"showShipmentStatusRightPane":"",children:(0,n.jsx)(f.A,{children:(0,n.jsx)(l.default,{selectedRow:this.state.selectedRow,selectedShareholder:this.state.selectedShareholder,terminalCodes:this.state.terminalCodes,onBack:this.handleBack,onSaved:this.savedEvent,genericProps:this.props.activeItem.itemProps,viewTab:this.state.viewTab,onTabChange:this.onTabChange,handlePageAdd:this.handlePageAdd,updateEnableForConfigure:i})})}),this.state.isShowPanle?(0,n.jsx)("div",{className:this.state.drawerStatus?"marineStatusLeftPane":"",children:(0,n.jsx)(f.A,{children:(0,n.jsx)(F.A,{selectedItem:[{Common_Code:this.state.selectedItems[0].Common_Code}],shipmentNextOperations:this.state.shipmentNextOperations,handleDetailsPageClick:this.handleGoDetails,handleOperationButtonClick:this.handleOperationClick,currentStatuses:this.state.currentShipmentStatuses,isDetails:!0,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,isWebPortalUser:this.props.userDetails.EntityResult.IsWebPortalUser,handleDrawer:this.handleDrawer,title:"ViewAllShipment_Details",unAllowedOperations:["ViewMarineShipmentList_AuthorizeToLoad","ViewMarineShipmentList_CloseMarineShipment","ViewMarineShipmentList_PrintFAN","ViewMarineShipmentList_PrintBOL","ViewMarineShipmentList_ManualEntry"],webPortalAllowedOperations:["ViewMarineShipmentList_ViewTransactions","ViewMarineShipmentList_ViewBOL","ViewMarineShipmentList_ViewAuditTrail"]})})}):""]}):this.state.isReadyToRender?(0,n.jsxs)("div",{children:[(0,n.jsx)(f.A,{children:(0,n.jsx)("div",{className:"kpiSummaryContainer",children:(0,n.jsx)(W.A,{kpiList:this.state.marineShipmentKPIList,pageName:"MarineDispatch"})})}),(0,n.jsxs)("div",{className:e?this.state.drawerStatus?"drawerClose":"showShipmentStatusRightPane":"",children:[(0,n.jsx)(f.A,{children:(0,n.jsx)(I.L,{dateRange:{from:this.state.fromDate,to:this.state.toDate},dateError:this.state.dateError,handleDateTextChange:this.handleDateTextChange,handleRangeSelect:this.handleRangeSelect,handleLoadOrders:this.handleLoadOrders,filterText:"LoadShipments"})}),(0,n.jsx)(f.A,{children:(0,n.jsx)("div",{className:!0===t?"compositeTransactionList":"",children:(0,n.jsx)(r,{tableData:this.state.data.Table,columnDetails:this.state.data.Column,pageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,exportRequired:!0,exportFileName:"MarineDispatchList",columnPickerRequired:!0,terminalsToShow:this.props.userDetails.EntityResult.PageAttibutes.NoOfTerminalsToShow,selectionRequired:!0,columnGroupingRequired:!0,onSelectionChange:this.handleSelection,onRowClick:this.handleRowClick,parentComponent:this.componentName})})})]}),e?(0,n.jsx)("div",{className:this.state.drawerStatus?"marineStatusLeftPane":"",children:(0,n.jsx)(f.A,{children:(0,n.jsx)(F.A,{selectedItem:[{Common_Code:this.state.selectedItems[0].Common_Code}],shipmentNextOperations:this.state.shipmentNextOperations,handleDetailsPageClick:this.handleGoDetails,handleOperationButtonClick:this.handleOperationClick,currentStatuses:this.state.currentShipmentStatuses,isDetails:!1,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,isWebPortalUser:this.props.userDetails.EntityResult.IsWebPortalUser,handleDrawer:this.handleDrawer,title:"ViewAllShipment_Details",unAllowedOperations:["ViewMarineShipmentList_AuthorizeToLoad","ViewMarineShipmentList_CloseMarineShipment","ViewMarineShipmentList_PrintFAN","ViewMarineShipmentList_PrintBOL","ViewMarineShipmentList_ManualEntry"],webPortalAllowedOperations:["ViewMarineShipmentList_ViewTransactions","ViewMarineShipmentList_ViewBOL","ViewMarineShipmentList_ViewAuditTrail"]})})}):""]}):(0,n.jsx)(M.A,{message:"Loading"}),Object.keys(this.state.selectedRow).length>0||1===this.state.selectedItems.length?this.renderModal():"",this.state.showDeleteAuthenticationLayout||this.state.showAuthorizeToLoadAuthenticationLayout||this.state.showCloseShipmentAuthenticationLayout||this.state.showViewBOLAuthenticationLayout||this.state.showPrintBOLAuthenticationLayout||this.state.showFANAuthenticationLayout?(0,n.jsx)(A.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:this.getDeleteorEditMode(),functionGroup:this.getFunctionGroupName(),handleClose:this.handleAuthenticationClose,handleOperation:this.handleOperation()}):null,(0,n.jsx)(f.A,{children:(0,n.jsx)(y.ToastContainer,{hideProgressBar:!0,closeOnClick:!1,closeButton:!0,newestOnTop:!0,position:"bottom-right",toastClassName:"toast-notification-wrap"})})]})}}const G=(0,T.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})),(e=>({userActions:(0,w.zH)(x,e)})))(U)},15441:(e,t,i)=>{"use strict";i.d(t,{L:()=>r});i(65043);var s=i(67907),a=i(72711),o=i(35861),n=i(70579);function r(e){let{handleDateTextChange:t,handleRangeSelect:i,handleLoadOrders:r,dateError:l,dateRange:d,filterText:c}=e;return(0,n.jsx)(s.TranslationConsumer,{children:e=>(0,n.jsxs)("div",{className:"dateRangeContainer",children:[(0,n.jsx)("div",{className:"dateRangeMargin",children:(0,n.jsx)(a.DatePicker,{type:"daterange",closeOnSelection:!0,error:e(l),displayFormat:(0,o.F1)(),rangeValue:d,onTextChange:t,onRangeSelect:i,reserveSpace:!1})}),(0,n.jsx)("div",{className:"dateSearch",children:(0,n.jsx)(a.Button,{content:e(c),onClick:r})})]})})}},73571:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});i(65043);var s=i(72711),a=i(728),o=i(92569),n=i(47766),r=(i(60663),i(7523)),l=i(97508),d=i(70579);function c(e){let{proxyServerHost:t,reportServiceHost:i,parameters:s,filePath:a,...r}=e;const l=t+"api/report",c=(e,t)=>{const i=t.settings.beforeSend;t.settings.beforeSend=function(t){i&&i(t),r.userDetails.EntityResult.IsWebPortalUser||(t.withCredentials=!0),t.URL_DEBUG.indexOf("parameters")>-1&&(t.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var t=e.hostElement;setTimeout((()=>{var e=t.querySelector(".wj-viewer-splitter"),i=t.querySelector(".wj-viewer-tabsleft").querySelectorAll("li")[2];i.disabled||(i.className="hidden",e.click())}),1e3)}})}};let h={Authorization:"Bearer "+r.tokenDetails.tokenInfo};const u=(e,s)=>{n._ReportService.prototype.load=function(e){var s=this,a=new n._Promise;return this._checkReportController(a)?(this.httpRequest(this._getReportInstancesUrl(),{method:"POST",data:e}).then((function(e){var o=n._parseReportExecutionInfo(e.responseText);s._instanceId=o.id,s._status=n._ExecutionStatus.loaded,s._outlinesLocation=o.outlinesLocation,s._statusLocation=o.statusLocation.replace(i,t),s._pageSettingsLocation=o.pageSettingsLocation,s._featuresLocation=o.featuresLocation,s._parametersLocation=o.parametersLocation,a.resolve(o)}),(function(e){a.reject(s._getError(e))})),a):a}};return(0,d.jsx)("div",{children:r.userDetails.EntityResult.IsWebPortalUser?(0,d.jsx)("div",{children:(0,d.jsx)(o.R,{requestHeaders:h,style:{height:"80vh"},parameters:s,serviceUrl:l,filePath:a,initialized:u,beforeSendRequest:c})}):(0,d.jsx)("div",{children:(0,d.jsx)(o.R,{style:{height:"80vh"},parameters:s,serviceUrl:l,filePath:a,initialized:u,beforeSendRequest:c})})})}c.defaultProps={parameters:{}},a.setLicenseKey(r.yQ);const h=(0,l.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(c);var u=i(67907);function p(e){let{proxyServerHost:t,reportServiceHost:i,filePath:a,handleBack:o,showReport:n,handleModalClose:r,parameters:l}=e;const[c]=(0,u.useTranslation)();return(0,d.jsx)(s.Modal,{style:{padding:"0px"},size:"fullscreen",open:n,children:(0,d.jsxs)("div",{children:[(0,d.jsx)(s.Header,{title:c("Header_TerminalManager"),menu:!1}),(0,d.jsx)(h,{proxyServerHost:t,reportServiceHost:i,filePath:a,parameters:l}),(0,d.jsx)("div",{style:{marginTop:"10px",marginLeft:"20px"},children:(0,d.jsx)(s.Button,{className:"backButton",onClick:o,content:c("Report_Back")})})]})})}p.defaultProps={parameters:{}}},80312:(e,t,i)=>{"use strict";i.d(t,{$3:()=>Q,$H:()=>se,$J:()=>pe,$K:()=>Ce,$V:()=>Rt,$b:()=>xt,$p:()=>B,AE:()=>E,Al:()=>F,B2:()=>st,By:()=>Et,CW:()=>Ct,DA:()=>l,Ee:()=>We,FO:()=>M,Fy:()=>Ve,G9:()=>it,H8:()=>ee,Hq:()=>rt,Ig:()=>P,Iu:()=>S,JI:()=>dt,JJ:()=>te,JU:()=>z,Jz:()=>ze,KQ:()=>ne,Kk:()=>Ze,Kw:()=>et,LP:()=>vt,LR:()=>c,Lg:()=>J,Mg:()=>xe,Mm:()=>V,N1:()=>$,Nm:()=>m,No:()=>de,Ow:()=>U,P2:()=>o,P8:()=>De,PD:()=>Ie,PE:()=>h,PG:()=>K,PP:()=>pt,Pb:()=>je,QB:()=>w,QC:()=>Z,RE:()=>ot,RO:()=>Je,Rc:()=>St,Rl:()=>wt,Rx:()=>gt,TI:()=>D,Tm:()=>me,Ug:()=>X,Ur:()=>Ge,V9:()=>d,VK:()=>G,VL:()=>ue,VQ:()=>re,WD:()=>ke,Wf:()=>R,YO:()=>N,YY:()=>Me,Yb:()=>ge,Yg:()=>Qe,Z9:()=>ut,ZE:()=>ct,ZU:()=>x,_N:()=>Dt,_S:()=>At,_d:()=>Mt,aS:()=>W,aZ:()=>ht,au:()=>Le,b0:()=>bt,bL:()=>Fe,c2:()=>Oe,d4:()=>Pe,dB:()=>g,dD:()=>Be,dK:()=>H,dY:()=>I,de:()=>u,dv:()=>Ae,eQ:()=>r,f3:()=>we,fF:()=>k,fL:()=>yt,fN:()=>Lt,fk:()=>A,fl:()=>Se,fr:()=>T,go:()=>a,h:()=>he,hD:()=>b,hE:()=>v,hh:()=>Xe,hk:()=>oe,hz:()=>mt,i:()=>s,j2:()=>nt,jN:()=>q,je:()=>C,jx:()=>O,kL:()=>$e,ke:()=>Ue,km:()=>le,l0:()=>ae,l6:()=>He,lz:()=>j,m0:()=>y,nS:()=>fe,nk:()=>lt,nn:()=>L,np:()=>Y,oh:()=>at,op:()=>Ke,pt:()=>_e,qk:()=>ce,qp:()=>ye,r6:()=>be,rQ:()=>Re,rj:()=>_,rp:()=>n,t3:()=>Tt,tM:()=>Ne,to:()=>Nt,ts:()=>tt,uH:()=>Te,uy:()=>Ye,w1:()=>ve,x5:()=>ie,xz:()=>f,y_:()=>qe,yu:()=>p,yx:()=>ft,z8:()=>Ee,z_:()=>It});const s={view:"view",add:"add",modify:"modify",remove:"remove"},a="carriercompany",o="driver",n="customer",r="trailer",l="originterminal",d="destination",c="primemover",h="vehicle",u="shipmentbycompartment",p="shipmentbyproduct",m="ViewShipmentStatus",C="vessel",g="order",S="OrderForceClose",D="contract",y="receiptplanbycompartment",x="ViewMarineShipment",w="MarineShipmentByCompartment",T="ViewMarineReceipt",L="supplier",E="finishedproduct",f="RailDispatch",b="RailReceipt",R="RailRoute",A="RailWagon",v="CloseRailDispatch",M="PrintRailBOL",I="PrintRailFAN",N="RailDispatchLoadSpotAssignment",j="RailDispatchProductAssignment",P="ViewRailDispatch",V="ViewRailLoadingDetails",k="CloseRailReceipt",_="PrintRailBOD",O="PrintRailRAN",F="ViewRailReceipt",B="ViewRailUnLoadingDetails",W="SMS",U="UnAccountedTransactionTank",G="UnAccountedTransactionMeter",H="PipelineDispatch",Q="PipelineReceipt",q="PipelineDispatchManualEntry",z="PipelineReceiptManualEntry",K="LookUpData",Y="HSEInspection",J="HSEInspectionConfig",$="Email",Z="Shareholder",X="LocationConfig",ee="DeviceConfig",te="baseproduct",ie="SiteView",se="LeakageManualEntry",ae="Terminal",oe="SlotInformation",ne="TankGroup",re="Tank",le="SealMaster",de="TankEODEntry",ce="UnmatchedLocalTransactions",he="AccessCard",ue="ResetPin",pe="SlotConfiguration",me="PrintMarineFAN",Ce="PrintMarineBOL",ge="ViewMarineLoadingDetails",Se="ViewMarineShipmentAuditTrail",De="CloseMarineShipment",ye="IssueCard",xe="ActivateCard",we="RevokeCard",Te="AutoIDAssociation",Le="MarineReceiptByCompartment",Ee="PrintMarineRAN",fe="PrintMarineBOD",be="ViewMarineUnloadingDetails",Re="ViewMarineReceiptAuditTrail",Ae="CloseMarineReceipt",ve="WeekendConfig",Me="EODAdmin",Ie="PrintBOL",Ne="PrintFAN",je="PrintBOD",Pe="CloseShipment",Ve="CloseReceipt",ke="CONTRACTFORCECLOSE",_e="Captain",Oe="OverrideShipmentSequence",Fe="KPIInformation",Be="Language",We="WebPortalUserMap",Ue="BayGroup",Ge="PipelineHeaderSiteView",He="TankMonitor",Qe="PersonAdmin",qe="ProductReconciliationReports",ze="ReportConfiguration",Ke="EXECONFIGURATION",Ye="ShareholderAllocation",Je="NotificationGroup",$e="NotificationRestriction",Ze="NotificationConfig",Xe="AllowWeighBridgeManualEntry",et="ProductAllocation",tt="MasterDeviceConfiguration",it="ShareholderAgreement",st="TANKSHAREHOLDERPRIMEFUNCTION",at="ROLEADMIN",ot="ShiftConfig",nt="PrinterConfiguration",rt="CustomerAgreement",lt="BaySCADAConfiguration",dt="RailReceiptUnloadSpotAssignment",ct="STAFF_VISITOR",ht="PipelineMeterSiteView",ut="RailSiteView",pt="MarineSiteView",mt="LoadingDetails",Ct="UnloadingDetails",gt="RoadHSEInspection",St="RoadHSEInspectionConfig",Dt="MarineHSEInspection",yt="MarineHSEInspectionConfig",xt="RailHSEInspection",wt="RailHSEInspectionConfig",Tt="PipelineHSEInspection",Lt="PipelineHSEInspectionConfig",Et="PrintRAN",ft="ViewReceiptStatus",bt="customerrecipe",Rt="COAParameter",At="COATemplate",vt="COAManagement",Mt="COACustomer",It="COAAssignment",Nt="ProductForecastConfiguration"},93779:(e,t,i)=>{"use strict";i.d(t,{$A:()=>I,$L:()=>lt,$Q:()=>Be,Ae:()=>ve,BX:()=>oe,Bl:()=>me,Bv:()=>Se,Bw:()=>Z,Cb:()=>v,Cg:()=>R,DN:()=>ot,D_:()=>nt,Dm:()=>N,E7:()=>Y,EW:()=>P,FN:()=>ae,FR:()=>o,FY:()=>mt,GA:()=>We,GT:()=>x,Ge:()=>je,HB:()=>ne,JQ:()=>K,KJ:()=>ee,Kz:()=>H,Ln:()=>G,M$:()=>Ge,O5:()=>tt,Of:()=>we,Oo:()=>it,Pk:()=>ge,Pm:()=>$,Q5:()=>dt,QK:()=>He,QV:()=>Ze,QZ:()=>ct,Qu:()=>ie,RX:()=>Re,Rb:()=>W,Rp:()=>L,SP:()=>C,T5:()=>ke,UB:()=>D,UT:()=>l,Ui:()=>q,VA:()=>B,Vk:()=>Le,Wb:()=>Ee,Wv:()=>Te,X3:()=>Ke,Y4:()=>U,Yl:()=>st,Zx:()=>J,_B:()=>De,_C:()=>A,_R:()=>Ce,_j:()=>ce,_n:()=>s,aM:()=>k,aW:()=>Fe,bW:()=>F,c4:()=>at,cD:()=>r,c_:()=>f,cx:()=>O,dL:()=>ht,eE:()=>le,eS:()=>qe,eT:()=>T,f:()=>j,f7:()=>pe,fR:()=>he,g1:()=>de,gN:()=>Ye,gO:()=>Q,iH:()=>rt,ij:()=>et,j1:()=>b,jC:()=>ye,je:()=>ue,jz:()=>re,ll:()=>Xe,mM:()=>y,mO:()=>pt,mW:()=>Ve,ml:()=>g,mm:()=>$e,nB:()=>te,nT:()=>Pe,np:()=>Ne,oA:()=>E,oG:()=>ze,oV:()=>X,ok:()=>h,oy:()=>d,pL:()=>Me,pe:()=>Ue,pw:()=>Qe,qF:()=>n,qQ:()=>ut,qp:()=>u,s0:()=>w,sA:()=>Ae,st:()=>se,tY:()=>V,uw:()=>z,v6:()=>a,vL:()=>_e,vf:()=>Ie,wH:()=>Je,wO:()=>xe,wX:()=>_,x4:()=>fe,xf:()=>p,xy:()=>c,yI:()=>S,yV:()=>M,yz:()=>m,zL:()=>be,zf:()=>Oe});const s="CarrierCode",a="TransportationType",o="ShareHolderCode",n="DriverCode",r="CustomerCode",l="TrailerCode",d="OriginTerminalCode",c="PrimeMoverCode",h="VehicleCode",u="DestinationCode",p="FinishedProductCode",m="ShipmentCode",C="OrderCode",g="ReceiptCode",S="MarineDispatchCode",D="MarineReceiptCode",y="SupplierCode",x="ContractCode",w="RailDispatchCode",T="RailReceiptCode",L="RailRouteCode",E="WagonCode",f="CompartmentCode",b="SMSConfigurationCode",R="PipelineDispatchCode",A="PipelineReceiptCode",v="EmailConfigurationCode",M="BaseProductCode",I="LocationCode",N="SiteViewType",j="EntityCode",P="EntityType",V="CardReaderCode",k="AccessCardCode",_="BcuCode",O="DeuCode",F="WeighBridgeCode",B="Weight",W="OutOfToleranceAllowed",U="LoadingArmCode",G="TransportationType",H="BayCode",Q="TransactionNumber",q="BatchNumber",z="TerminalCode",K="TankGroupCode",Y="TankCode",J="MeterCode",$="ShipmentType",Z="ShipmentStatus",X="MeterLineType",ee="DispatchCode",te="ReceiptStatus",ie="FPTransactionID",se="ProductCategoryType",ae="Reason",oe="SealMasterCode",ne="Reason",re="OperationName",le="FPTransactionID",de="ProductCategoryType",ce="CompartmentSeqNoInVehicle",he="AdjustedPlanQuantity",ue="ForceComplete",pe="DispatchStatus",me="HolidayDate",Ce="ActionID",ge="EODTimePrev",Se="TerminalAction",De="EODTime",ye="MonthStartDay",xe="CaptainCode",we="GeneralTMUserType",Te="GeneralTMUserCode",Le="IsPriority",Ee="ActualTerminalCode",fe="ShipmentBondNo",be="ReceiptBondNo",Re="DeviceType",Ae="DeviceCode",ve="BayGroup",Me="PipelineHeaderCode",Ie="ExchangePartner",Ne="PersonID",je="UserName",Pe="PipelinePlanCode",Ve="PipelinePlanType",ke="ChannelCode",_e="ProcessName",Oe="ReconciliationCode",Fe="NotificationGroupCode",Be="NotificationGroupStatus",We="NotificationGroupDesc",Ue="NotificationResSource",Ge="NotificationResMsgCode",He="NotificationOrigResSource",Qe="NotificationOrigResMsgCode",qe="NotificationMessageCode",ze="PositionType",Ke="ExchangeAgreementCode",Ye="ProductTransferAgreementCode",Je="ShareholderAgreementStatus",$e="RequestorShareholder",Ze="LenderShareholder",Xe="RequestCode",et="TransferReferenceCode",tt="ShiftID",it="ShiftName",st="PrinterName",at="LocationType",ot="ForceClosureReason",nt="TransactionType",rt="CustomerRecipeCode",lt="COATemplateCode",dt="COAManagementCode",ct="COAParameterCode",ht="COAManagementFinishedProductCode",ut="COASeqNumber",pt="ForecastDate",mt="ForecastTanks"},50477:()=>{}}]);
//# sourceMappingURL=9722.cc450cd7.chunk.js.map