"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[8311,9158,6001,6777,8382,735,3116,4629,3920,3235,5973,8354],{40510:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(65043),r=s(80297),i=s(65187),l=s(67907),o=s(70579);function n(e){let{KPIList:t,pageName:s,rowHeight:n,widgetHeight:d,isDraggable:c,isResizable:h,kpiDisplayTopBreakpoint:u}=e;const[m,p]=(0,a.useState)(1),C=a.useRef(null),T=()=>{let e=window.pageYOffset,t=m;if(C.current&&C.current.getBoundingClientRect().top<u)t=0;else{if(0!==e)return;t=1}p(t)};return(0,a.useEffect)((()=>{"undefined"!==typeof window&&window.addEventListener("scroll",T)})),(0,a.useEffect)((()=>()=>{window.removeEventListener("scroll",T)}),[]),(0,o.jsx)("div",{ref:C,children:1===m?(0,o.jsx)(l.TranslationConsumer,{children:e=>(0,o.jsx)("div",{style:{marginTop:"6px"},children:(0,o.jsx)(i.A,{children:(0,o.jsx)(r.A,{kpiList:t,isDraggable:c,isResizable:h,rowHeight:n,widgetHeight:d,pageName:s})})})}):""})}n.defaultProps={kpiDisplayTopBreakpoint:100}},18311:(e,t,s)=>{s.r(t),s.d(t,{default:()=>P});var a=s(65043),r=s(46100),i=s(72711),l=s(67907),o=s(24904),n=s(78374),d=s(35861),c=s(65187),h=s(85800),u=s(7523),m=s(69062),p=s(70579);function C(e){let{vessel:t,modVessel:s,validationErrors:a,onFieldChange:r,onCarrierCompanyChange:C,onLoadingTypeChange:T,onActiveStatusChange:g,listOptions:E,onDateTextChange:I,onAllTerminalsChange:D,handleAddCompartment:A,handleDeleteCompartment:y,selectedCompRow:S,handleCellDataEdit:v,handleRowSelectionChange:L,isEnterpriseNode:b,modAttributeMetaDataList:N,attributeValidationErrors:V,onAttributeDataChange:f,handleCompAttributeCellDataEdit:R,toggleExpand:x,expandedRows:O,compartmentDetailsPageSize:M,onCarrierSearchChange:j}=e;const[P]=(0,l.useTranslation)(),w=e=>{let t=s.VehicleTrailers[0].Trailer.Compartments[e.rowIndex][e.field];return"Capacity"===e.field&&null!==t&&""!==t&&(t=t.toLocaleString()),(0,p.jsx)(i.Input,{fluid:!0,value:t,onChange:t=>v(t,e),reserveSpace:!1,disabled:"Code"===e.field})},U=(e,t)=>{let s=[];return s=e.find((e=>e.TerminalCode===t)),s.attributeValidationErrors},k=e=>{const t=e.rowData,s=e=>{var t=e.split("-");return new Date(t[0],t[1]-1,t[2])},a=(e,t)=>{var s=new Date(t);t=s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2),R(e,t)};try{return t.DataType.toLowerCase()===u.pe.STRING.toLowerCase()||t.DataType.toLowerCase()===u.pe.INT.toLowerCase()?(0,p.jsx)(i.Input,{fluid:!0,value:t.AttributeValue,disabled:t.IsReadonly,onChange:t=>R(e,t),reserveSpace:!1}):t.DataType.toLowerCase()===u.pe.FLOAT.toLowerCase()||t.DataType.toLowerCase()===u.pe.LONG.toLowerCase()||t.DataType.toLowerCase()===u.pe.DOUBLE.toLowerCase()?(0,p.jsx)(i.Input,{fluid:!0,value:null===t.AttributeValue||void 0===t.AttributeValue||""===t.AttributeValue?"":t.AttributeValue.toLocaleString(),disabled:t.IsReadonly,onChange:t=>R(e,t),reserveSpace:!1}):t.DataType.toLowerCase()===u.pe.BOOL.toLowerCase()?(0,p.jsx)(i.Checkbox,{checked:"true"===t.AttributeValue.toString().toLowerCase(),disabled:t.IsReadonly,onChange:t=>R(e,t)}):t.DataType.toLowerCase()===u.pe.DATETIME.toLowerCase()?(0,p.jsx)(i.DatePicker,{fluid:!0,value:null===t.AttributeValue||void 0===t.AttributeValue||""===t.AttributeValue?"":s(t.AttributeValue),disabled:t.IsReadonly,showYearSelector:"true",onChange:t=>a(e,t),onTextChange:t=>{a(e,t)},reserveSpace:!1}):null}catch(r){console.log("TrailerDetails:Error occured on handleAttributeType",r)}},H=e=>e.rowData.IsMandatory?(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{children:e.rowData.AttributeName}),(0,p.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]}):(0,p.jsx)("div",{children:(0,p.jsx)("span",{children:e.rowData.AttributeName})});return(0,p.jsxs)("div",{className:"detailsContainer",children:[(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(i.Input,{fluid:!0,value:s.Code,indicator:"required",disabled:""!==t.Code,onChange:e=>r("Code",e),label:P("Vessel_Code"),error:P(a.Code),reserveSpace:!1})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(i.Input,{fluid:!0,value:s.Name,label:P("Vessel_Name"),indicator:"required",onChange:e=>r("Name",e),error:P(a.Name,{label:P("Vessel_Name")}),reserveSpace:!1})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(i.Input,{fluid:!0,value:s.Description,label:P("Vehicle_Desc"),onChange:e=>r("Description",e),error:P(a.Description),reserveSpace:!1})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(i.Select,{fluid:!0,placeholder:P("Common_Select"),label:P("Vehicle_CarrierCompany"),value:s.CarrierCompanyCode,options:E.carriers,onChange:e=>{C(e)},indicator:"required",error:P(a.CarrierCompanyCode),reserveSpace:!1,disabled:""!==t.Code,search:!0,noResultsMessage:P("noResultsMessage"),onSearch:j})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(i.Select,{fluid:!0,placeholder:P("Common_Select"),label:P("Vessel_Type"),value:s.VehicleType,options:E.vesselType,onChange:e=>{r("VehicleType",e)},indicator:"required",error:P(a.VehicleType),reserveSpace:!1,disabled:""!==t.Code,search:!0,noResultsMessage:P("noResultsMessage")})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(i.Select,{fluid:!0,placeholder:P("Common_Select"),label:P("Vehicle_ProductType"),value:s.ProductType,options:E.productType,onChange:e=>{r("ProductType",e)},indicator:"required",error:P(a.ProductType),reserveSpace:!1,search:!0,noResultsMessage:P("noResultsMessage")})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(i.Select,{fluid:!0,placeholder:P("Common_Select"),label:P("Vehicle_LoadingType"),value:s.VehicleTrailers[0].Trailer.LoadingType,options:E.loadingType,onChange:e=>{T(e)},indicator:"required",error:P(a.LoadingType),reserveSpace:!1,search:!0,noResultsMessage:P("noResultsMessage")})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(i.Input,{fluid:!0,value:s.LicenseNo,label:P("Vehicle_LicenseNo"),indicator:"required",onChange:e=>r("LicenseNo",e),error:P(a.LicenseNo),reserveSpace:!1})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(i.DatePicker,{fluid:!0,value:null===s.LicenseNoExpiryDate?"":m.OL(s.LicenseNoExpiryDate),displayFormat:(0,d.F1)(),label:P("Vehicle_LicenseExpiry"),showYearSelector:"true",indicator:"required",onChange:e=>r("LicenseNoExpiryDate",e),onTextChange:(e,t)=>{I("LicenseNoExpiryDate",e,t)},error:P(a.LicenseNoExpiryDate),reserveSpace:!1})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(i.Input,{fluid:!0,value:s.RegisteredInCountry,label:P("Vessel_Country"),onChange:e=>r("RegisteredInCountry",e),error:P(a.RegisteredInCountry,{label:P("Vessel_Country")}),reserveSpace:!1})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(i.Input,{fluid:!0,value:null===s.Height?"":s.Height.toLocaleString(),label:P("Vehicle_height"),onChange:e=>r("Height",e),error:P(a.Height,{label:P("Vehicle_height")}),reserveSpace:!1})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(i.Input,{fluid:!0,value:null===s.Width?"":s.Width.toLocaleString(),label:P("Vehicle_Width"),onChange:e=>r("Width",e),error:P(a.Width,{label:P("Vehicle_Width")}),reserveSpace:!1})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(i.Input,{fluid:!0,value:null===s.Length?"":s.Length.toLocaleString(),label:P("Vehicle_Length"),onChange:e=>r("Length",e),error:P(a.Length,{label:P("Vehicle_Length")}),reserveSpace:!1})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(i.Select,{fluid:!0,placeholder:P("Common_Select"),label:P("Vehicle_UOMDimemsion"),value:s.LWHUOM,options:(0,d.r4)(E.unitOfDimension,P("Common_Select")),onChange:e=>{r("LWHUOM",e)},error:P(a.LWHUOM),reserveSpace:!1,search:!0,noResultsMessage:P("noResultsMessage")})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(i.Input,{fluid:!0,value:null===s.MaxLoadableVolume?"":s.MaxLoadableVolume.toLocaleString(),label:P("Vehicle_MaxLoadVolume"),onChange:e=>r("MaxLoadableVolume",e),error:P(a.MaxLoadableVolume),reserveSpace:!1,disabled:!0})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(i.Select,{fluid:!0,placeholder:P("Common_Select"),label:P("Vehicle_UOMVolume"),value:s.VolumeUOM,options:E.unitOfVolume,onChange:e=>{r("VolumeUOM",e)},error:P(a.VolumeUOM),reserveSpace:!1,disabled:!0})}),b?(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(o.y,{terminalList:E.terminalCodes,selectedTerminal:s.TerminalCodes,error:P(a.TerminalCodes),onFieldChange:r,onCheckChange:D})}):"",(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(i.Select,{fluid:!0,placeholder:P("Common_Select"),label:P("Vehicle_Status"),value:s.Active,options:[{text:P("ViewShipment_Ok"),value:!0},{text:P("ViewShipmentStatus_Inactive"),value:!1}],onChange:e=>g(e)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(i.Input,{fluid:!0,value:null===s.Remarks?"":s.Remarks,label:P("Vehicle_Remarks"),onChange:e=>r("Remarks",e),indicator:s.Active!==t.Active?"required":"",error:P(a.Remarks)})})]}),N.length>0?N.map((e=>(0,p.jsx)(c.A,{children:(0,p.jsx)(i.Accordion,{children:(0,p.jsx)(i.Accordion.Content,{className:"attributeAccordian",title:b?e.TerminalCode+" - "+P("Attributes_Header"):P("Attributes_Header"),children:(0,p.jsx)(h.n,{selectedAttributeList:e.attributeMetaDataList,handleCellDataEdit:f,attributeValidationErrors:U(V,e.TerminalCode)})})})}))):null,(0,p.jsxs)("div",{className:"row compartmentRow",children:[(0,p.jsx)("div",{className:"col col-md-8 col-lg-9 col col-xl-9",children:(0,p.jsx)("h4",{children:P("Trailer_CompartmentInfo")})}),(0,p.jsx)("div",{className:"col col-md-4 col-lg-3 col-xl-3",children:(0,p.jsxs)("div",{className:"compartmentIconContainer",children:[(0,p.jsxs)("div",{onClick:A,className:"compartmentIcon",children:[(0,p.jsx)("div",{children:(0,p.jsx)(i.Icon,{root:"common",name:"badge-plus",size:"medium"})}),(0,p.jsx)("div",{className:"margin_l10",children:(0,p.jsx)("h5",{className:"font14",children:P("TrailerInfo_Add")})})]}),(0,p.jsxs)("div",{onClick:y,className:"compartmentIcon margin_l30",children:[(0,p.jsx)("div",{children:(0,p.jsx)(i.Icon,{root:"common",name:"delete",size:"medium"})}),(0,p.jsx)("div",{className:"margin_l10",children:(0,p.jsx)("h5",{className:"font14",children:P("TrailerInfo_Delete")})})]})]})})]}),(0,p.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,p.jsx)("div",{className:"col-12 detailsTable havingchildTable",children:(0,p.jsxs)(n.bQ,{data:s.VehicleTrailers[0].Trailer.Compartments,rowExpansionTemplate:function(e){return Array.isArray(e.AttributesforUI)&&e.AttributesforUI.length>0?(0,p.jsx)("div",{className:"childTable",children:(0,p.jsxs)(n.bQ,{data:e.AttributesforUI,row:1,rows:M,children:[b?(0,p.jsx)(n.bQ.Column,{className:"compColHeight",field:"TerminalCode",header:P("CompartmentTerminal"),editable:!1},"TerminalCode"):"",(0,p.jsx)(n.bQ.Column,{className:"compColHeight",header:P("CompartmentAttributeName"),renderer:H,editable:!1},"AttributeName"),(0,p.jsx)(n.bQ.Column,{className:"compColHeight",header:P("CompartmentAttributeValue"),renderer:k}),(0,p.jsx)(n.bQ.Pagination,{})]})}):(0,p.jsx)("div",{className:"compartmentIcon",children:(0,p.jsx)("div",{className:"gridButtonAlignLeft",children:P("CustomerInventory_NoRecordsFound")})})},expandedRows:O,selectionMode:"multiple",selection:S,onSelectionChange:L,onEdit:v,scrollable:!0,scrollHeight:"320px",children:[(0,p.jsx)(n.bQ.Column,{className:"compColHeight disabledColumn colminWidth",field:"Code",header:P("Trailer_CompCode"),editFieldType:"text"},"Code"),(0,p.jsx)(n.bQ.Column,{className:"compColHeight colminWidth",field:"Description",header:P("Trailer_Desc"),editable:!0,editFieldType:"text",customEditRenderer:w},"Description"),(0,p.jsx)(n.bQ.Column,{className:"compColHeight colminWidth",field:"Capacity",header:(0,d.i7)(P("Trailer_CompCapacity")),editable:!0,renderer:e=>null===e.value?"":e.value.toLocaleString(),editFieldType:"text",customEditRenderer:w},"Capacity"),(0,p.jsx)(n.bQ.Column,{className:"compColHeight colminWidth",field:"UOM",header:(0,d.i7)(P("Trailer_UOM")),editable:!0,editFieldType:"text",customEditRenderer:e=>(0,p.jsx)(i.Select,{className:"selectDropwdown",value:s.VehicleTrailers[0].Trailer.Compartments[e.rowIndex][e.field],fluid:!0,options:E.unitOfVolume,onChange:t=>v(t,e),indicator:"required",reserveSpace:!1,search:!0,noResultsMessage:P("noResultsMessage")})},"UOM"),(0,p.jsx)(n.bQ.Column,{className:"expandedColumn",initialWidth:"200px",renderer:e=>{const t=O.findIndex((t=>t.CompartmentSeqNoInTrailer===e.rowData.CompartmentSeqNoInTrailer))>=0;return(0,p.jsxs)("div",{onClick:()=>x(e.rowData,t),className:"compartmentIcon gridButtonFontColor",children:[(0,p.jsx)("span",{children:P(t?"Hide_Attributes":"View_Attributes")}),(0,p.jsx)(i.Icon,{root:"common",name:t?"caret-up":"caret-down",className:"margin_l10"})]})}})]})})})]})}C.defaultProps={listOptions:{carriers:[],vesselType:[],productType:[],loadingType:[],unitOfVolume:[],unitOfDimension:[],terminalCodes:[]},isEnterpriseNode:!1};var T=s(9256),g=s(44192),E=s(40854),I=s.n(E),D=s(72067),A=s(97508),y=(s(38726),s(43503)),S=s(93779),v=s(80312),L=s(53536),b=s.n(L),N=s(40252),V=s(28882),f=s(15417),R=s(97105),x=s(40510),O=s(39424),M=s(62900);class j extends a.Component{constructor(){var e;super(...arguments),e=this,this.state={vessel:b().cloneDeep(r.Ut),modVessel:{},validationErrors:m.Th(g.VF),isReadyToRender:!1,saveEnabled:!1,carrierOptions:[],carrierSearchOptions:[],terminalOptions:[],selectedCompRow:[],productTypeOptions:[],loadingTypeOptions:[],vesselTypeOptions:[],volumeUOMOptions:[],weightUOMOptions:[],lengthUOMOptions:[],attributeMetaDataList:[],modAttributeMetaDataList:[],attributeValidationErrors:[],expandedRows:[],vesselKPIList:[],maxNumberOfCompartments:30,showAuthenticationLayout:!1,tempVessel:{}},this.handleAllTerminalsChange=e=>{try{let t=b().cloneDeep(this.state.modVessel),s=[...this.state.terminalOptions];t.TerminalCodes=e?s:[],this.setState({modVessel:t},(()=>{this.terminalSelectionChange(t.TerminalCodes)}))}catch(t){console.log("VesselDetailsComposite:Error occured on handleAllTerminalsChange",t)}},this.handleDateTextChange=(e,t,s)=>{try{let a={...this.state.validationErrors},r=b().cloneDeep(this.state.modVessel);a[e]=s,r[e]=t,this.setState({validationErrors:a,modVessel:r})}catch(s){console.log("VesselDetailsComposite:Error occured on handleDateTextChange",s)}},this.handleChange=(e,t)=>{try{const s=b().cloneDeep(this.state.modVessel);s[e]=t;const a=b().cloneDeep(this.state.validationErrors);void 0!==g.VF[e]&&(a[e]=m.jr(g.VF[e],t),this.setState({validationErrors:a})),this.setState({modVessel:s},(()=>{"TerminalCodes"===e&&this.terminalSelectionChange(t)}))}catch(s){console.log("VesselDetailsComposite:Error occured on handleChange",s)}},this.onCarrierCompanyChange=e=>{try{const t=b().cloneDeep(this.state.modVessel),s=b().cloneDeep(this.state.validationErrors);t.CarrierCompanyCode=e,this.setState({modVessel:t}),this.props.userDetails.EntityResult.IsEnterpriseNode&&this.getTerminalsForCarrier(e),s.CarrierCompanyCode="",this.setState({validationErrors:s})}catch(t){console.log("VesselDetailsComposite:Error occured on onCarrierCompanyChange",t)}},this.handleLoadingTypeChange=e=>{try{const t=b().cloneDeep(this.state.modVessel);t.VehicleTrailers[0].Trailer.LoadingType=e,this.setState({modVessel:t})}catch(t){console.log("VesselDetailsComposite:Error occured on handleLoadingTypeChange",t)}},this.handleActiveStatusChange=e=>{try{const t=b().cloneDeep(this.state.modVessel);t.Active=e,t.Active!==this.state.vessel.Active&&(t.Remarks=""),this.setState({modVessel:t});const s=b().cloneDeep(this.state.validationErrors);t.Active===this.state.vessel.Active&&(null!==t.Remarks&&""!==t.Remarks||(s.Remarks="")),this.setState({validationErrors:s})}catch(t){console.log("VesselDetailsComposite:Error occured on handleActiveStatusChange",t)}},this.handleAddCompartment=()=>{if(!this.props.userDetails.EntityResult.IsArchived)try{let e={Attributes:[],Capacity:null,Code:null,CompartmentSeqNoInTrailer:0,TrailerCode:null,ShareholderCode:null,CarrierCompanyCode:null,Description:"",FRUOM:null,FlangeNo:null,MaxFR:null,Name:"",NoofSeals:null,UOM:null},t=b().cloneDeep(this.state.modVessel);if(null!==t.VehicleTrailers[0].Trailer.Compartments){t.VehicleTrailers[0].Trailer.Compartments.length>0&&(e.UOM=t.VehicleTrailers[0].Trailer.Compartments[0].UOM);let s=1;t.VehicleTrailers[0].Trailer.Compartments.forEach((e=>{e.CompartmentSeqNoInTrailer=s,++s})),e.CompartmentSeqNoInTrailer=t.VehicleTrailers[0].Trailer.Compartments.length+1,t.VehicleTrailers[0].Trailer.Compartments.push(e)}this.setState({modVessel:t,selectedCompRow:[]},(()=>{if(!1===this.props.userDetails.EntityResult.IsEnterpriseNode){var e=b().cloneDeep(this.state.attributeMetaDataList.marine_trailercompartment);e.length>0&&this.formCompartmentAttributes([e[0].TerminalCode])}else this.formCompartmentAttributes(t.TerminalCodes)}))}catch(e){console.log("VesselDetailsComposite:Error occured on handleAddCompartment",e)}},this.handleDeleteCompartment=()=>{if(!this.props.userDetails.EntityResult.IsArchived)try{if(null!=this.state.selectedCompRow&&this.state.selectedCompRow.length>0&&this.state.modVessel.VehicleTrailers[0].Trailer.Compartments.length>0){let e=b().cloneDeep(this.state.modVessel);this.state.selectedCompRow.forEach(((t,s)=>{e.VehicleTrailers[0].Trailer.Compartments=e.VehicleTrailers[0].Trailer.Compartments.filter(((e,s)=>e.CompartmentSeqNoInTrailer!==t.CompartmentSeqNoInTrailer))}));let t=1;e.VehicleTrailers[0].Trailer.Compartments.forEach((e=>{e.CompartmentSeqNoInTrailer=t,++t})),this.setState({modVessel:e})}this.setState({selectedCompRow:[]})}catch(e){console.log("VesselDetailsComposite:Error occured on handleDeleteCompartment",e)}},this.handleRowSelectionChange=e=>{this.setState({selectedCompRow:e})},this.handleCellDataEdit=(e,t)=>{let s=b().cloneDeep(this.state.modVessel);"Description"===t.field&&(s.VehicleTrailers[0].Trailer.Compartments[t.rowIndex][t.field]=e),"Capacity"===t.field&&(isNaN(parseInt(e))&&(e=""),s.VehicleTrailers[0].Trailer.Compartments[t.rowIndex][t.field]=e),"UOM"===t.field&&s.VehicleTrailers[0].Trailer.Compartments.forEach((t=>{t.UOM=e})),this.toggleExpand(s.VehicleTrailers[0].Trailer.Compartments[t.rowIndex],!0,!0),this.setState({modVessel:s})},this.handleReset=()=>{try{const{validationErrors:e}={...this.state},t=b().cloneDeep(this.state.vessel);Object.keys(e).forEach((function(t){e[t]=""})),this.setState({modVessel:{...t},selectedCompRow:[],validationErrors:e,modAttributeMetaDataList:[]},(()=>{this.props.userDetails.EntityResult.IsEnterpriseNode?(this.terminalSelectionChange(t.TerminalCodes),this.handleResetAttributeValidationError()):(this.localNodeAttribute(),this.handleResetAttributeValidationError())}))}catch(e){console.log("VesselDetailsComposite:Error occured on handleReset",e)}},this.saveVessel=()=>{try{this.setState({saveEnabled:!1});let e=b().cloneDeep(this.state.tempVessel);""===this.state.vessel.Code?this.createVessel(e):this.updateVessel(e)}catch(e){console.log("VesselDetailsComposite : Error in saveVessel")}},this.handleSave=()=>{try{let e=this.fillDetails(),t=m.pI(this.state.modAttributeMetaDataList);if(this.validateSave(e,t)){e=this.convertStringtoDecimal(e,t),e=m.pC(R.S.Vehicle,e);let s=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,a=b().cloneDeep(e);this.setState({showAuthenticationLayout:s,tempVessel:a},(()=>{!1===s&&this.saveVessel()}))}else this.setState({saveEnabled:!0})}catch(e){console.log("VesselDetailsComposite:Error occured on handleSave",e)}},this.handleAttributeDataChange=(e,t)=>{try{let s=[],a=b().cloneDeep(this.state.modAttributeMetaDataList),r=a.filter((t=>t.TerminalCode===e.TerminalCode));r.length>0&&Array.isArray(r[0].attributeMetaDataList)&&(s=r[0].attributeMetaDataList.filter((t=>t.Code===e.Code))),s.length>0&&(s[0].DefaultValue=t);const i=b().cloneDeep(this.state.attributeValidationErrors);i.forEach((s=>{s.TerminalCode===e.TerminalCode&&(s.attributeValidationErrors[e.Code]=m.I5(e,t))})),this.setState({attributeValidationErrors:i,modAttributeMetaDataList:a})}catch(s){console.log("VesselDetailsComposite:Error occured on handleAttributeDataChange",s)}},this.toggleExpand=function(t,s){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.state.expandedRows,i=r.findIndex((e=>e.CompartmentSeqNoInTrailer===t.CompartmentSeqNoInTrailer));s?a&&i>=0?(r.splice(i,1),r.push(t)):i>=0&&r.splice(i,1):i>=0?r=r.filter((e=>e.Code!==t.Code&&e.CompartmentSeqNoInTrailer!==t.CompartmentSeqNoInTrailer)):r.push(t),e.setState({expandedRows:r})},this.handleCompAttributeCellDataEdit=(e,t)=>{let s=b().cloneDeep(this.state.modVessel),a=s.VehicleTrailers[0].Trailer.Compartments.findIndex((t=>t.CompartmentSeqNoInTrailer===e.rowData.compSequenceNo));a>=0&&(s.VehicleTrailers[0].Trailer.Compartments[a].AttributesforUI[e.rowData.SeqNumber-1].AttributeValue=t),this.setState({modVessel:s}),a>=0&&this.toggleExpand(s.VehicleTrailers[0].Trailer.Compartments[a],!0,!0)},this.handleCarrierSearchChange=e=>{try{let t=this.state.carrierOptions.filter((t=>t.value.toLowerCase().includes(e.toLowerCase())));t.length>u.bM&&(t=t.slice(0,u.bM)),this.setState({carrierSearchOptions:t})}catch(t){console.log("VesselDetailsCompositeComposite:Error occured on handleCarrierSearchChange",t)}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})}}getAttributes(e){try{I()(D.fKH,m.tW([f.Yy,f.k9],this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data;!0===s.IsSuccess?this.setState({attributeMetaDataList:b().cloneDeep(s.EntityResult),attributeValidationErrors:m.Fl(s.EntityResult.marine_vessel)},(()=>this.getVessel(e))):console.log("Failed to get Attributes")}))}catch(t){console.log("Error while getting Attributes:",t)}}getVessel(e){if(r.Ut.TerminalCodes=[],r.Ut.VehicleType=u.$O.Ship,r.Ut.ShareholderCode=this.props.selectedShareholder,r.Ut.ProductType="ALLPROD",r.Ut.VehicleTrailers[0].Trailer.LoadingType="BOTTOM",void 0!==e.Common_Code){var t=[{key:S.ok,value:e.Common_Code},{key:S._n,value:e.Vehicle_CarrierCompany},{key:S.v6,value:u.LY.MARINE}],s={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,keyDataCode:S.ok,KeyCodes:t};I()(D.zRL,m.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?(null!==t.EntityResult.VehicleTrailers[0].Trailer.Compartments&&t.EntityResult.VehicleTrailers[0].Trailer.Compartments.length>0&&(t.EntityResult.VehicleTrailers[0].Trailer.Compartments=t.EntityResult.VehicleTrailers[0].Trailer.Compartments.sort(((e,t)=>e.CompartmentSeqNoInTrailer-t.CompartmentSeqNoInTrailer))),this.setState({isReadyToRender:!0,vessel:b().cloneDeep(t.EntityResult),modVessel:b().cloneDeep(t.EntityResult),saveEnabled:m.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.je)},(()=>{this.getTerminalsForCarrier(t.EntityResult.CarrierCompanyCode),this.getKPIList(this.props.selectedShareholder,t.EntityResult.Code),this.props.userDetails.EntityResult.IsEnterpriseNode?this.terminalSelectionChange(t.EntityResult.TerminalCodes):this.localNodeAttribute()}))):(this.setState({vessel:b().cloneDeep(r.Ut),modVessel:b().cloneDeep(r.Ut),isReadyToRender:!0}),console.log("Error in GetVessel:",t.ErrorList))})).catch((t=>{console.log("Error while getting Vessel:",t,e)}))}else this.setState({vessel:b().cloneDeep(r.Ut),modVessel:b().cloneDeep(r.Ut),isReadyToRender:!0,modAttributeMetaDataList:[],vesselKPIList:[],saveEnabled:m.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.add,v.je)},(()=>{!1===this.props.userDetails.EntityResult.IsEnterpriseNode&&this.localNodeAttribute()}))}terminalSelectionChange(e){try{if(void 0!==e&&null!==e){let r=[];var t=[],s=[];t=b().cloneDeep(this.state.attributeMetaDataList),s=b().cloneDeep(this.state.modAttributeMetaDataList);const i=b().cloneDeep(this.state.attributeValidationErrors);var a=b().cloneDeep(this.state.modVessel);e.forEach((e=>{var i=s.find((t=>t.TerminalCode===e));void 0===i?t.marine_vessel.forEach((function(t){if(t.TerminalCode===e){var s=a.Attributes.find((t=>t.TerminalCode===e));void 0!==s&&t.attributeMetaDataList.forEach((function(e){var t=s.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),r.push(t)}})):r.push(i)})),s=[],s=r,s=m.nQ(s),i.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.formCompartmentAttributes(e),this.setState({modAttributeMetaDataList:s,attributeValidationErrors:i})}}catch(r){console.log("VesselDetailsComposite:Error occured on terminalSelectionChange",r)}}formCompartmentAttributes(e){try{let s=b().cloneDeep(this.state.attributeMetaDataList);s=s.marine_trailercompartment.filter((function(t){return e.some((function(e){return t.TerminalCode===e}))}));var t=b().cloneDeep(this.state.modVessel);let a=[];s.forEach((e=>{e.attributeMetaDataList.forEach((e=>{a.push({AttributeCode:e.Code,AttributeName:e.DisplayName,AttributeValue:e.DefaultValue,TerminalCode:e.TerminalCode,IsMandatory:e.IsMandatory,DataType:e.DataType,IsReadonly:e.IsReadonly,MinValue:e.MinValue,MaxValue:e.MaxValue,ValidationFormat:e.ValidationFormat,compSequenceNo:""})}))}));let r=b().cloneDeep(a);t.VehicleTrailers[0].Trailer.Compartments.forEach((t=>{if(null!==t.Code||null!==t.AttributesforUI&&void 0!==t.AttributesforUI){null!==t.AttributesforUI&&void 0!==t.AttributesforUI?(t.AttributesforUI=t.AttributesforUI.filter((function(t){return e.some((function(e){return t.TerminalCode===e}))})),a=a.filter((function(e){return!t.AttributesforUI.some((function(t){return e.TerminalCode===t.TerminalCode}))}))):t.AttributesforUI=[];let s=b().cloneDeep(a);if(Array.isArray(t.Attributes)&&null!==t.Attributes&&void 0!==t.Attributes&&t.Attributes.length>0){t.Attributes.filter((function(t){return e.some((function(e){return t.TerminalCode===e}))})).forEach((e=>{e.ListOfAttributeData.forEach((t=>{let a=s.findIndex((s=>s.TerminalCode===e.TerminalCode&&s.AttributeCode===t.AttributeCode));a>=0&&(s[a].AttributeValue=t.AttributeValue)}))})),s.forEach((e=>{e.compSequenceNo=t.CompartmentSeqNoInTrailer,t.AttributesforUI.push(e)}))}else a.forEach((e=>{e.compSequenceNo=t.CompartmentSeqNoInTrailer,t.AttributesforUI.push(e)}))}else t.AttributesforUI=[],r.forEach((e=>{e.compSequenceNo=t.CompartmentSeqNoInTrailer,t.AttributesforUI.push(e)}));this.toggleExpand(t,!0,!0),void 0!==t.AttributesforUI&&null!=t.AttributesforUI&&(t.AttributesforUI=m.vt(t.AttributesforUI)),t.AttributesforUI=m.Q3(t.AttributesforUI)})),this.setState({modVessel:t})}catch(s){console.log("VesselDetailsComposite:Error in forming Compartment Attributes",s)}}getCarrierList(){I()(D.Xj6+"?ShareholderCode=&Transportationtype="+u.LY.MARINE,m.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=m.Zj(t.EntityResult),s=b().cloneDeep(e);s.length>u.bM&&(s=s.slice(0,u.bM)),this.setState({carrierOptions:e,carrierSearchOptions:s})}}else console.log("Error in GetCarrierListForRole:",t.ErrorList)})).catch((e=>{console.log("Error while getting Carrier List:",e)}))}getLoadingTypes(){I()(D.zVP,m.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=m.Zj(t.EntityResult);this.setState({loadingTypeOptions:e})}}else console.log("Error in getLoadingTypes:",t.ErrorList)})).catch((e=>{console.log("Error while getting getLoadingTypes:",e)}))}getProductTypes(){I()(D.YG_,m.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=m.Zj(t.EntityResult);this.setState({productTypeOptions:e})}}else console.log("Error in getProductTypes:",t.ErrorList)})).catch((e=>{console.log("Error while getting getProductTypes:",e)}))}getVesselTypes(){I()(D.WX0,m.tW([u.LY.MARINE],this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult.Table){let e=t.EntityResult.Table,s=[];e.forEach((e=>{s.push({text:e.VehicleTypeCode,value:e.VehicleTypeCode})})),this.setState({vesselTypeOptions:s})}}else console.log("Error in getVesselTypes:",t.ErrorList)})).catch((e=>{console.log("Error while getting getVesselTypes:",e)}))}getUOMList(){I()(D.WFM,m.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult){let e=t.EntityResult.MASS,s=[];e.forEach((e=>{s.push({text:e,value:e})})),t.EntityResult.VOLUME.forEach((e=>{s.push({text:e,value:e})}));let a=t.EntityResult.LENGTH,r=[];a.forEach((e=>{r.push({text:e,value:e})})),this.setState({volumeUOMOptions:s,lengthUOMOptions:r})}}else console.log("Error in getUOM:",t.ErrorList)})).catch((e=>{console.log("Error while getting getUOM:",e)}))}getTerminalsForCarrier(e){if(this.props.userDetails.EntityResult.IsEnterpriseNode){const s=b().cloneDeep(this.state.modVessel);let a=[...this.state.terminalOptions];s.CarrierCompanyCode=e;try{if(void 0===e)return a=[],s.TerminalCodes=[],void this.setState({terminalOptions:a,modVessel:s},(()=>{this.formCompartmentAttributes([])}));let t=[{key:S._n,value:e},{key:S.v6,value:u.LY.MARINE}],r={ShareHolderCode:this.props.selectedShareholder,keyDataCode:S._n,KeyCodes:t};I()(D.pm$,m.tW(r,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;!0===t.IsSuccess&&null!==t.EntityResult&&null!==t.EntityResult.TerminalCodes?(a=[...t.EntityResult.TerminalCodes],this.setState({terminalOptions:a})):(a=[],this.setState({terminalOptions:a}),console.log("Error in getTerminalsForCarrier:",t.ErrorList));let r={...this.state.vessel};void 0!==r.Code&&""!==r.Code&&null!==r.Code||(1===a.length?s.TerminalCodes=[...a]:s.TerminalCodes=[]),Array.isArray(s.TerminalCodes)&&(s.TerminalCodes=a.filter((e=>s.TerminalCodes.includes(e)))),this.setState({modVessel:s},(()=>{this.terminalSelectionChange(s.TerminalCodes)}))})).catch((t=>{a=[],s.TerminalCodes=[],this.setState({terminalOptions:a,modVessel:s}),console.log("Error while getting Carrier:",t,e)}))}catch(t){a=[],s.TerminalCodes=[],this.setState({terminalOptions:a,modVessel:s}),console.log("VesselDetailsComposite:Error occured on getTerminalsForCarrier",t)}}}componentDidMount(){try{m.pJ(this.props.userDetails.EntityResult.IsArchived),this.getAttributes(this.props.selectedRow),this.getCarrierList(),this.getLoadingTypes(),this.getProductTypes(),this.getVesselTypes(),this.getUOMList(),this.getLookupValue()}catch(e){console.log("VesselDetailsComposite:Error occured on componentDidMount",e)}}componentWillReceiveProps(e){try{if(""!==this.state.vessel.Code&&void 0===e.selectedRow.Common_Code&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo){this.getVessel(e.selectedRow);let t={...this.state.validationErrors};Object.keys(t).forEach((e=>{t[e]=""})),this.setState({validationErrors:t})}}catch(t){console.log("VesselDetailsComposite:Error occured on componentWillReceiveProps",t)}}handleResetAttributeValidationError(){try{var e=b().cloneDeep(this.state.attributeMetaDataList);this.setState({attributeValidationErrors:m.Fl(e.marine_vessel)})}catch(t){console.log("handleAttributeValidationError:Error occured on handleReset",t)}}localNodeAttribute(){try{var e=b().cloneDeep(this.state.attributeMetaDataList);Array.isArray(e.marine_vessel)&&e.marine_vessel.length>0?this.terminalSelectionChange([e.marine_vessel[0].TerminalCode]):Array.isArray(e.marine_trailercompartment)&&e.marine_trailercompartment.length>0&&this.formCompartmentAttributes([e.marine_trailercompartment[0].TerminalCode])}catch(t){console.log("VesselDetailsComposite:Error occured on localNodeAttribute",t)}}convertStringtoDecimal(e,t){try{return null!==e.Height&&""!==e.Height&&(e.Height=m.bo(e.Height)),null!==e.Length&&""!==e.Length&&(e.Length=m.bo(e.Length)),null!==e.Width&&""!==e.Width&&(e.Width=m.bo(e.Width)),e.VehicleTrailers[0].Trailer.Compartments.forEach((e=>{e.Capacity=m.bo(e.Capacity)})),e=this.fillAttributeDetails(e,t)}catch(s){console.log("convertStringtoDecimal error Vesseldetails",s)}}fillDetails(){try{let t=b().cloneDeep(this.state.modVessel);t.ShareholderCode=this.props.userDetails.EntityResult.PrimaryShareholder,t.TransportationType=u.LY.MARINE,t.VehicleTrailers[0].Trailer.Compartments.forEach((e=>{e.TrailerCode=t.Code,e.ShareholderCode=t.ShareholderCode,e.CarrierCompanyCode=t.CarrierCompanyCode,null!==e.Capacity&&""!==e.Capacity&&(e.Capacity=e.Capacity.toLocaleString()),null!==e.Code&&""!==e.Code||(e.Code=m.d1(t.VehicleTrailers[0].Trailer.Compartments).toString()),void 0!==e.AttributesforUI&&null!=e.AttributesforUI&&(e.AttributesforUI=m.BZ(e.AttributesforUI))})),""===t.Height&&(t.Height=null),""===t.Length&&(t.Length=null),""===t.Width&&(t.Width=null),null!==t.Height&&""!==t.Height&&(t.Height=t.Height.toLocaleString()),null!==t.Length&&""!==t.Length&&(t.Length=t.Length.toLocaleString()),null!==t.Width&&""!==t.Width&&(t.Width=t.Width.toLocaleString());var e=new Date;return t.LicenseNoIssueDate=e.getUTCDate(),t.VehicleTrailers[0].TrailerCode=t.Code,t.VehicleTrailers[0].VehicleCode=t.Code,t.VehicleTrailers[0].ShareholderCode=t.ShareholderCode,t.VehicleTrailers[0].CarrierCompanyCode=t.CarrierCompanyCode,t.VehicleTrailers[0].TrailerSeq=1,t.VehicleTrailers[0].Trailer.Code=t.Code,t.VehicleTrailers[0].Trailer.Name=t.Name,t.VehicleTrailers[0].Trailer.ShareholderCode=t.ShareholderCode,t.VehicleTrailers[0].Trailer.TransportationType=u.LY.MARINE,t.VehicleTrailers[0].Trailer.CarrierCompanyCode=t.CarrierCompanyCode,t.VehicleTrailers[0].Trailer.TrailerType=t.VehicleType,t.VehicleTrailers[0].Trailer.ProductType=t.ProductType,t.VehicleTrailers[0].Trailer.TareWeight=t.TareWeight,t.VehicleTrailers[0].Trailer.MaxLoadableWeight=t.MaxLoadableWeight,t.VehicleTrailers[0].Trailer.WeightUOM=t.WeightUOM,t.VehicleTrailers[0].Trailer.Active=t.Active,t}catch(t){console.log("VesselDetailsComposite:Error occured on fillDetails",t)}}fillAttributeDetails(e,t){try{return t=m.SC(t),e.Attributes=m.Gh(t),e.VehicleTrailers[0].Trailer.Compartments.forEach((t=>{void 0!==t.AttributesforUI&&null!=t.AttributesforUI&&(t.AttributesforUI=m.mr(t.AttributesforUI));let s=[];if(this.props.userDetails.EntityResult.IsEnterpriseNode)s=b().cloneDeep(e.TerminalCodes);else{var a=b().cloneDeep(this.state.attributeMetaDataList.marine_trailercompartment);a.length>0&&(s=[a[0].TerminalCode])}let r=[];t.Attributes=[],void 0!==s&&null!==s&&s.forEach((e=>{null!==t.AttributesforUI&&void 0!==t.AttributesforUI&&(r=t.AttributesforUI.filter((function(t){return t.TerminalCode===e})));let s={ListOfAttributeData:[]};s.TerminalCode=e,r.forEach((e=>{""===e.AttributeValue&&!0!==e.IsMandatory||s.ListOfAttributeData.push({AttributeCode:e.AttributeCode,AttributeValue:e.AttributeValue})})),null!==s.ListOfAttributeData&&void 0!==s.ListOfAttributeData&&s.ListOfAttributeData.length>0&&t.Attributes.push(s)}))})),e}catch(s){console.log("VesselDetailsComposite:Error occured on fillAttributeDetails",s)}}validateSave(e,t){const s={...this.state.validationErrors};Object.keys(g.VF).forEach((function(t){void 0!==e[t]&&(s[t]=m.jr(g.VF[t],e[t]))})),e.Active!==this.state.vessel.Active&&(null!==e.Remarks&&""!==e.Remarks||(s.Remarks="Vehicle_RemarksRequired")),null!==e.VehicleTrailers[0].Trailer.LoadingType&&""!==e.VehicleTrailers[0].Trailer.LoadingType||(s.LoadingType="RailWagonConfigurationDetails_MandatoryLoadingType");let a={messageType:"critical",message:"VesselDetail_SavedStatus",messageResultDetails:[]};null===e.Height&&null==e.Width&&null===e.Length||null!==e.LWHUOM?s.LWHUOM="":s.LWHUOM="Vessel_UFDRequired";var r=b().cloneDeep(this.state.attributeValidationErrors);t.forEach((e=>{r.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=m.I5(e,e.DefaultValue)}))}))})),this.setState({validationErrors:s,attributeValidationErrors:r});var i=!0;return r.forEach((e=>{if(!i)return i;i=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),i?(i=Object.values(s).every((function(e){return""===e})),e.VehicleTrailers[0].Trailer.Compartments.length>0?e.VehicleTrailers[0].Trailer.Compartments.length<=this.state.maxNumberOfCompartments?e.VehicleTrailers[0].Trailer.Compartments.forEach((e=>{V.Ig.forEach((t=>{let s="";void 0!==t.validator&&(s=m.jr(t.validator,e[t.field])),""!==s&&a.messageResultDetails.push({keyFields:["Trailer_CompCode",t.displayName],keyValues:[e.Code,e[t.field]],isSuccess:!1,errorMessage:s})})),null!==e.AttributesforUI&&void 0!==e.AttributesforUI&&e.AttributesforUI.forEach((t=>{let s=m.I5(t,t.AttributeValue);""!==s&&(this.props.userDetails.EntityResult.IsEnterpriseNode?a.messageResultDetails.push({keyFields:["CompAttributeComp","CompAttributeTerminal",t.AttributeName],keyValues:[e.Code,t.TerminalCode,t.AttributeValue],isSuccess:!1,errorMessage:s}):a.messageResultDetails.push({keyFields:["CompAttributeComp",t.AttributeName],keyValues:[e.Code,t.AttributeValue],isSuccess:!1,errorMessage:s}))})),this.toggleExpand(e,!0,!0)})):a.messageResultDetails.push({keyFields:["Vessel_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:"Compartment_limit_Exceeded"}):a.messageResultDetails.push({keyFields:["Vessel_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:"TrailerInfo_CompartmentRequired"}),a.messageResultDetails.length>0?(this.props.onSaved(this.state.modVessel,"update",a),!1):i):i}createVessel(e){let t=[{key:S.ok,value:e.Code}],s={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,keyDataCode:S.ok,KeyCodes:t,Entity:e},a={messageType:"critical",message:"VesselDetail_SavedStatus",messageResultDetails:[{keyFields:["Vessel_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:""}]};I()(D.X0c,m.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{let s=t.data;a.messageType=s.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.setState({saveEnabled:m.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.je),showAuthenticationLayout:!1},(()=>this.getVessel({Common_Code:e.Code,Vehicle_CarrierCompany:e.CarrierCompanyCode}))):(a.messageResultDetails[0].errorMessage=s.ErrorList[0],this.setState({saveEnabled:m.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.add,v.je),showAuthenticationLayout:!1}),console.log("Error in CreateVessel:",s.ErrorList)),this.props.onSaved(this.state.modVessel,"add",a)})).catch((e=>{this.setState({saveEnabled:m.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.add,v.je),showAuthenticationLayout:!1}),a.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modRigidTruck,"add",a)}))}updateVessel(e){let t=[{key:S.ok,value:e.Code}],s={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,keyDataCode:S.ok,KeyCodes:t,Entity:e},a={messageType:"critical",message:"VesselDetail_SavedStatus",messageResultDetails:[{keyFields:["Vessel_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:""}]};I()(D.il5,m.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{let s=t.data;a.messageType=s.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.setState({saveEnabled:m.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.je),showAuthenticationLayout:!1},(()=>this.getVessel({Common_Code:e.Code,Vehicle_CarrierCompany:e.CarrierCompanyCode}))):(this.setState({saveEnabled:m.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.je),showAuthenticationLayout:!1}),a.messageResultDetails[0].errorMessage=s.ErrorList[0],console.log("Error in UpdateVessel:",s.ErrorList)),this.props.onSaved(this.state.modRigidTruck,"update",a)})).catch((e=>{a.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modRigidTruck,"modify",a),this.setState({saveEnabled:m.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.je),showAuthenticationLayout:!1})}))}getCarrierSearchOptions(){let e=b().cloneDeep(this.state.carrierSearchOptions),t=this.state.modVessel.CarrierCompanyCode;if(null!==t&&""!==t&&void 0!==t){void 0===e.find((e=>e.value.toLowerCase()===t.toLowerCase()))&&e.push({text:t,value:t})}return e}getKPIList(e,t){if(!0===m.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.view,v.bL)){let e={PageName:O.YA,InputParameters:[{key:"VesselCode",value:t}]};I()(D.dxq,m.tW(e,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({vesselKPIList:t.EntityResult.ListKPIDetails}):(this.setState({vesselKPIList:[]}),console.log("Error in vessel KPIList:",t.ErrorList))})).catch((e=>{console.log("Error while getting Vessel KPIList:",e)}))}}getLookupValue(){try{I()(D.xAA+"?LookUpTypeCode=VirtualPreset",m.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess&&(isNaN(parseInt(t.EntityResult.MarineMaximumNumberOfCompartments))||this.setState({maxNumberOfCompartments:parseInt(t.EntityResult.MarineMaximumNumberOfCompartments)}))}))}catch(e){console.log("Error while getting LookupValue:",e)}}render(){const e={carriers:this.getCarrierSearchOptions(),vesselType:this.state.vesselTypeOptions,productType:this.state.productTypeOptions,loadingType:this.state.loadingTypeOptions,unitOfVolume:this.state.volumeUOMOptions,unitOfDimension:this.state.lengthUOMOptions,terminalCodes:this.state.terminalOptions},t=[{fieldName:"Vessel_LastUpdated",fieldValue:new Date(this.state.modVessel.LastUpdateTime).toLocaleDateString()+" "+new Date(this.state.modVessel.LastUpdateTime).toLocaleTimeString()},{fieldName:"Vessel_LastActiveTime",fieldValue:void 0!==this.state.modVessel.LastActiveTime&&null!==this.state.modVessel.LastActiveTime?new Date(this.state.modVessel.LastActiveTime).toLocaleDateString()+" "+new Date(this.state.modVessel.LastActiveTime).toLocaleTimeString():""},{fieldName:"Vessel_CreateTime",fieldValue:new Date(this.state.modVessel.CreatedTime).toLocaleDateString()+" "+new Date(this.state.modVessel.CreatedTime).toLocaleTimeString()}];return this.state.isReadyToRender?(0,p.jsxs)("div",{children:[(0,p.jsx)(c.A,{children:(0,p.jsx)(y.A,{entityCode:this.state.vessel.Code,newEntityName:"VesselDetails_VesselHeader",popUpContents:t})}),(0,p.jsx)(x.A,{KPIList:this.state.vesselKPIList,children:" "}),(0,p.jsx)(c.A,{children:(0,p.jsx)(C,{vessel:this.state.vessel,modVessel:this.state.modVessel,validationErrors:this.state.validationErrors,listOptions:e,onFieldChange:this.handleChange,onCarrierCompanyChange:this.onCarrierCompanyChange,onLoadingTypeChange:this.handleLoadingTypeChange,onAllTerminalsChange:this.handleAllTerminalsChange,onActiveStatusChange:this.handleActiveStatusChange,onDateTextChange:this.handleDateTextChange,handleAddCompartment:this.handleAddCompartment,handleDeleteCompartment:this.handleDeleteCompartment,handleCellDataEdit:this.handleCellDataEdit,handleRowSelectionChange:this.handleRowSelectionChange,selectedCompRow:this.state.selectedCompRow,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,modAttributeMetaDataList:this.state.modAttributeMetaDataList,attributeValidationErrors:this.state.attributeValidationErrors,onAttributeDataChange:this.handleAttributeDataChange,expandedRows:this.state.expandedRows,compartmentDetailsPageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,toggleExpand:this.toggleExpand,handleCompAttributeCellDataEdit:this.handleCompAttributeCellDataEdit,onCarrierSearchChange:this.handleCarrierSearchChange})}),(0,p.jsx)(c.A,{children:(0,p.jsx)(T.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.showAuthenticationLayout?(0,p.jsx)(M.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.vessel.Code?v.i.add:v.i.modify,functionGroup:v.je,handleOperation:this.saveVessel,handleClose:this.handleAuthenticationClose}):null]}):(0,p.jsx)(N.A,{message:"Loading"})}}const P=(0,A.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(j)},24904:(e,t,s)=>{s.d(t,{y:()=>o});s(65043);var a=s(67907),r=s(72711),i=s(69062),l=s(70579);function o(e){let{terminalList:t,selectedTerminal:s,validationError:o,onFieldChange:n,onCheckChange:d}=e;return null===s&&(s=[]),(0,l.jsx)(a.TranslationConsumer,{children:e=>(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,l.jsx)("div",{style:{width:"80%"},children:(0,l.jsx)(r.Select,{fluid:!0,placeholder:e("Common_Select"),label:e("TerminalCodes"),value:s,multiple:!0,options:i.Zj(t),onChange:e=>n("TerminalCodes",e),error:e(o),disabled:0===t.length,reserveSpace:!1})}),(0,l.jsx)("div",{className:"ddlSelectAll",children:(0,l.jsx)(r.Checkbox,{label:e("Common_All"),checked:Array.isArray(s)&&s.length===t.length,onChange:e=>d(e)})})]})})}o.defaultProps={terminalList:[],selectedTerminal:[],validationError:""}},43503:(e,t,s)=>{s.d(t,{A:()=>o});s(65043);var a=s(67907),r=s(72711),i=s(70579);function l(e){let{entityCode:t,newEntityName:s,popUpContents:l}=e;return(0,i.jsx)(a.TranslationConsumer,{children:e=>(0,i.jsx)("div",{className:"headerContainer",children:(0,i.jsxs)("div",{className:"row headerSpacing",children:[(0,i.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,i.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(s):t})}),""!==t&&void 0!==t&&l.length>0?(0,i.jsx)("div",{className:"headerItemRight",children:(0,i.jsx)(r.Popup,{element:(0,i.jsxs)("div",{children:[e(l[0].fieldName)+" ",":"," "+l[0].fieldValue,(0,i.jsx)(r.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,i.jsx)(r.List,{className:"detailsHeaderPopUp",children:l.map((t=>(0,i.jsxs)(r.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}l.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const o=l},9256:(e,t,s)=>{s.d(t,{q:()=>l});s(65043);var a=s(72711),r=s(67907),i=s(70579);function l(e){let{handleBack:t,handleSave:s,handleReset:l,saveEnabled:o}=e;return(0,i.jsx)(r.TranslationConsumer,{children:e=>(0,i.jsxs)("div",{className:"row userActionPosition",children:[(0,i.jsx)("div",{className:"col-12 col-md-3 col-lg-4",children:(0,i.jsx)(a.Button,{className:"backButton",onClick:t,content:e("Back")})}),(0,i.jsx)("div",{className:"col-12 col-md-9 col-lg-8",children:(0,i.jsxs)("div",{style:{float:"right"},children:[(0,i.jsx)(a.Button,{content:e("LookUpData_btnReset"),className:"cancelButton",onClick:l}),(0,i.jsx)(a.Button,{content:e("Save"),disabled:!o,onClick:s})]})})]})})}l.defaultProps={saveEnabled:!1}},85800:(e,t,s)=>{s.d(t,{n:()=>n});s(65043);var a=s(72711),r=s(67907),i=s(7523),l=s(35861),o=s(70579);function n(e){let{selectedAttributeList:t,handleCellDataEdit:s,attributeValidationErrors:n}=e;const d=e=>{if("0000-00-00"===e.DefaultValue)return c(e,new Date),new Date;var t=e.DefaultValue.split("-");return new Date(t[0],t[1]-1,t[2])},c=(e,t)=>{var a=new Date(t);t=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2),s(e,t)};return(0,o.jsx)(r.TranslationConsumer,{children:e=>(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("div",{className:"col-md-12 attributeDetails-wrap",children:(0,o.jsx)("div",{className:"row",children:t.map((t=>t.DataType.toLowerCase()===i.pe.STRING.toLowerCase()&&!0===t.IsVisible?(0,o.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,o.jsx)(a.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(n[t.Code]),reserveSpace:!1})}):t.DataType.toLowerCase()!==i.pe.INT.toLowerCase()&&t.DataType.toLowerCase()!==i.pe.LONG.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()!==i.pe.FLOAT.toLowerCase()&&t.DataType.toLowerCase()!==i.pe.DOUBLE.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()===i.pe.BOOL.toLowerCase()&&!0===t.IsVisible?(0,o.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,o.jsx)(a.Checkbox,{className:"deviceCheckBox customDeviceCheckBox",label:e(t.DisplayName),checked:null===t.DefaultValue?"":"true"===t.DefaultValue.toString().toLowerCase(),disabled:!0===t.IsReadonly,onChange:e=>s(t,e)})}):t.DataType.toLowerCase()===i.pe.DATETIME.toLowerCase()&&!0===t.IsVisible?(0,o.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,o.jsx)(a.DatePicker,{fluid:!0,value:null===t.DefaultValue||""===t.DefaultValue?"":d(t),label:e(t.DisplayName),displayFormat:(0,l.F1)(),showYearSelector:"true",indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>c(t,e),onTextChange:e=>{c(t,e)},error:e(n[t.Code]),reserveSpace:!1})}):null:(0,o.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,o.jsx)(a.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue||""===t.DefaultValue?"":t.DefaultValue.toLocaleString(),indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(n[t.Code]),reserveSpace:!1})}):(0,o.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,o.jsx)(a.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(n[t.Code]),reserveSpace:!1})})))})})})})}},15417:(e,t,s)=>{s.d(t,{$7:()=>R,AN:()=>se,AU:()=>N,Ak:()=>Ge,Ao:()=>a,B6:()=>Q,C4:()=>Ue,CG:()=>Z,Ct:()=>K,Cw:()=>P,EY:()=>L,G$:()=>Qe,G6:()=>Xe,GF:()=>me,GJ:()=>j,Gj:()=>he,Gl:()=>ie,H9:()=>Ye,HB:()=>be,HP:()=>v,Hr:()=>Le,II:()=>rt,IQ:()=>D,Jr:()=>W,Jx:()=>Ie,Ki:()=>te,LP:()=>re,Lv:()=>i,MK:()=>g,MX:()=>ee,Mx:()=>B,N4:()=>Me,NH:()=>Ee,OF:()=>Je,Ps:()=>k,Q7:()=>Ke,QY:()=>U,SF:()=>l,Sq:()=>Se,Sw:()=>oe,TQ:()=>$,U7:()=>b,UH:()=>T,UO:()=>le,V_:()=>fe,Vy:()=>He,W9:()=>de,WN:()=>I,Wr:()=>r,Ww:()=>X,XP:()=>Ve,Xk:()=>Y,Yb:()=>ye,Yy:()=>p,Z2:()=>je,ZN:()=>x,ZO:()=>Ae,Zu:()=>We,_G:()=>q,_N:()=>h,_u:()=>ce,ad:()=>ne,al:()=>De,ao:()=>H,bK:()=>G,bN:()=>E,cf:()=>O,dO:()=>Re,dU:()=>m,dv:()=>o,eE:()=>z,g:()=>S,gG:()=>n,gS:()=>Ne,gT:()=>st,gW:()=>J,gZ:()=>$e,go:()=>V,gp:()=>_,hq:()=>Oe,i6:()=>et,ip:()=>ue,k9:()=>C,kI:()=>A,l4:()=>Pe,l5:()=>y,lA:()=>M,lU:()=>Ze,mD:()=>_e,mY:()=>w,mq:()=>d,n$:()=>at,n7:()=>u,nZ:()=>xe,rA:()=>we,s$:()=>ke,s8:()=>Fe,se:()=>ge,tA:()=>ve,vK:()=>tt,vs:()=>Te,w2:()=>ze,w4:()=>Ce,wT:()=>c,wY:()=>f,wf:()=>pe,wk:()=>ae,xW:()=>F,yM:()=>qe,yO:()=>Be});const a="driver",r="carriercompany",i="shareholder",l="baseProduct",o="TRAILER",n="TRAILERCOMPARTMENT",d="terminal",c="customer",h="destination",u="finishedproduct",m="tank",p="marine_vessel",C="marine_trailercompartment",T="supplier",g="vehicle",E="vehicletrailer",I="originterminal",D="bay",A="loadingArm",y="cardreader",S="vehicleprimemover",v="meter",L="SHIPMENT",b="SHIPMENTCOMPARTMENT",N="SHIPMENTDESTINATIONCOMPARTMENT",V="SHIPMENTDETAILS",f="SHIPMENTTRAILERWEIGHBRIDGE",R="SHIPMENTTRAILER",x="SHIPMENTSTATUSTIME",O="MARINEDISPATCH",M="MARINEDISPATCHCOMPARTMENTDETAIL",j="railwagon",P="primemover",w="bcu",U="RAILRECEIPTPLAN",k="RAILRECEIPTWAGONDETAILPLAN",H="RAILUNLOADINGDETAILSFP",_="RAILUNLOADINGDETAILSBP",F="RAILUNLOADINGDETAILSADDITIVE",W="RAILDISPATCHPLAN",G="RAILDISPATCHITEM",q="RAILDISPATCHSTATUSCHANGE",B="RAILDISPATCHWAGON",K="RAILDISPATCHWAGONDETAILPLAN",Y="RAILDISPATCHWAGONWEIGHBRIDGE",Q="RAILDISPATCHWAGONCOMPARTMENT",z="RAILLOADINGDETAILSFP",Z="RAILLOADINGDETAILSBP",J="RAILLOADINGDETAILSADDITIVE",X="marineReceipt",$="UNACCOUNTEDMETERTRANSACTION",ee="UNACCOUNTEDTANKTRANSACTION",te="marineLoadingDetailsFP",se="marineLoadingDetailsAdditive",ae="marineLoadingDetailsBP",re="marineReceiptCompartmentDetail",ie="marineUnloadingDetailsFP",le="marineUnloadingDetailsBP",oe="accessCard",ne="LOADINGDETAILSFP",de="LOADINGDETAILSBP",ce="LOADINGDETAILSADDITIVE",he="MARINERECEIPTSTATUSTIME",ue="MARINEDISPATCHSTATUSTIME",me="RECEIPT",pe="UNLOADINGTRANSACTIONS",Ce="ORDER",Te="ORDERITEM",ge="CONTRACT",Ee="CONTRACT_ITEM",Ie="RECEIPTORIGINTERMINALCOMPARTMENT",De="GeneralTMUser_CAPTAIN",Ae="weighbridge",ye="deu",Se="GeneralTMUser_STAFF",ve="GeneralTMUser_VISITOR",Le="PIPELINEHEADER",be="SEALMASTER",Ne="PIPELINERECEIPT",Ve="ROADSHIPMENTSLOTINFO",fe="ROADRECEIPTSLOTINFO",Re="MARINESHIPMENTSLOTINFO",xe="MARINERECEIPTSLOTINFO",Oe="PIPELINEDISPATCH",Me="PIPELINETRANSACTIONS",je="PIPELINEDISPATCHSTATUSTIME",Pe="PIPELINERECEIPTSTATUSTIME",we="PROCESSCONFIG",Ue="PRODUCTALLOCATIONITEM",ke="HSEINSPECTIONSHIPMENTRIGIDTRUCK",He="HSEINSPECTIONSHIPMENTTRAILER",_e="HSEINSPECTIONSHIPMENTPRIMEMOVER",Fe="HSEINSPECTIONSHIPMENTNONFILLINGVEHICLE",We="HSEINSPECTIONMARINESHIPMENTBARGE",Ge="HSEINSPECTIONMARINESHIPMENTSHIP",qe="HSEINSPECTIONSHIPMENTRAILWAGON",Be="HSEINSPECTIONSHIPMENTPIPELINE",Ke="HSEINSPECTIONRECEIPTRIGIDTRUCK",Ye="HSEINSPECTIONRECEIPTTRAILER",Qe="HSEINSPECTIONRECEIPTPRIMEMOVER",ze="HSEINSPECTIONRECEIPTNONFILLINGVEHICLE",Ze="HSEINSPECTIONMARINERECEIPTBARGE",Je="HSEINSPECTIONMARINERECEIPTSHIP",Xe="HSEINSPECTIONRECEIPTRAILWAGON",$e="HSEINSPECTIONRECEIPTPIPELINE",et="SHAREHOLDERAGREEMENT",tt="COATEMPLATE",st="COAMANAGEMENT",at="COACUSTOMER",rt="COAASSIGNMENT"},97105:(e,t,s)=>{s.d(t,{S:()=>a});const a={Driver:["License1ExpiryDate","License1IssueDate","License2IssueDate","License2ExpiryDate","License3IssueDate","License3ExpiryDate","HazardousLicenseExpiry"],CarrierCompany:["PermitExpiryDate"],PrimeMover:["RoadTaxNoIssueDate","RoadTaxNoExpiryDate","licenseExpiryDate"],Wagon:["LicenseExpiryDate"],Vehicle:["LicenseNoIssueDate","LicenseNoExpiryDate","RoadTaxNoIssueDate","RoadTaxNoExpiryDate","Bondexpirydate","HazardousLicenseExpiry"],Contract:["StartDate","EndDate"],ContractItem:["StartDate","EndDate"],Order:["OrderStartDate","OrderEndDate","OrderDate","DeliveryDate"],AccessCard:["ExpiryDate","IssueDate","PasswordExpiryDate"],Trailer:["HazardousLicenseExpiry"]}},35861:(e,t,s)=>{s.d(t,{F1:()=>o,i7:()=>n,r4:()=>l});var a=s(86178),r=s.n(a),i=(s(15660),s(65043),s(70579));function l(e,t){if(Array.isArray(e)){0===e.filter((e=>e.text===t)).length&&e.unshift({value:null,text:t})}return e}function o(){let e=window.navigator.userLanguage||window.navigator.language;return r().locale(e),r().localeData().longDateFormat("L")}function n(e){return(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{children:e}),(0,i.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]})}}}]);
//# sourceMappingURL=8311.786c881a.chunk.js.map