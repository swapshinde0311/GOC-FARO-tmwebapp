"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[1652,9158,6001,6777,8382,735,3116,3920,3235,5973,8354],{40510:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(65043),o=s(80297),i=s(65187),r=s(67907),l=s(70579);function n(e){let{KPIList:t,pageName:s,rowHeight:n,widgetHeight:d,isDraggable:c,isResizable:u,kpiDisplayTopBreakpoint:h}=e;const[C,p]=(0,a.useState)(1),E=a.useRef(null),m=()=>{let e=window.pageYOffset,t=C;if(E.current&&E.current.getBoundingClientRect().top<h)t=0;else{if(0!==e)return;t=1}p(t)};return(0,a.useEffect)((()=>{"undefined"!==typeof window&&window.addEventListener("scroll",m)})),(0,a.useEffect)((()=>()=>{window.removeEventListener("scroll",m)}),[]),(0,l.jsx)("div",{ref:E,children:1===C?(0,l.jsx)(r.TranslationConsumer,{children:e=>(0,l.jsx)("div",{style:{marginTop:"6px"},children:(0,l.jsx)(i.A,{children:(0,l.jsx)(o.A,{kpiList:t,isDraggable:c,isResizable:u,rowHeight:n,widgetHeight:d,pageName:s})})})}):""})}n.defaultProps={kpiDisplayTopBreakpoint:100}},81652:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var a=s(65043),o=s(69062),i=s(40854),r=s.n(i),l=s(72067),n=s(72711),d=s(67907),c=s(24904),u=s(65187),h=s(85800),C=s(70579);function p(e){let{baseProduct:t,modBaseProduct:s,validationErrors:a,selectedColor:o,onFieldChange:i,listOptions:r,onActiveStatusChange:l,isEnterpriseNode:p,onAllTerminalsChange:E,modAttributeMetaDataList:m,attributeValidationErrors:I,onAttributeDataChange:P,onColorPickerChange:D,onColorPickerClose:A,onApplyColor:g,onChangeColor:T,colorPickerState:S,onHexValueChange:v,isValidHex:y}=e;const N=(e,t)=>{let s=[];return s=e.find((e=>e.TerminalCode===t)),s.attributeValidationErrors};return(0,C.jsx)(d.TranslationConsumer,{children:e=>(0,C.jsxs)("div",{className:"detailsContainer",children:[(0,C.jsxs)("div",{className:"row",children:[(0,C.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,C.jsx)(n.Input,{fluid:!0,value:s.Code,indicator:"required",disabled:""!==t.Code,onChange:e=>i("Code",e),label:e("BaseProductInfo_BaseProdCode"),error:e(a.Code),reserveSpace:!1})}),(0,C.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,C.jsx)(n.Input,{fluid:!0,value:s.Name,indicator:"required",onChange:e=>i("Name",e),label:e("BaseProductInfo_BaseProdName"),error:e(a.Name),reserveSpace:!1})}),(0,C.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,C.jsx)(n.Input,{fluid:!0,value:s.Description,label:e("BaseProductInfo_Desc"),onChange:e=>i("Description",e),error:e(a.Description),reserveSpace:!1})}),(0,C.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,C.jsx)(n.Select,{fluid:!0,placeholder:e("Common_Select"),label:e("BaseProductInfo_DensityUOM"),value:s.DensityUOM,options:r.DensityUOM,onChange:e=>{i("DensityUOM",e)},indicator:"required",error:e(a.DensityUOM),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage")})}),(0,C.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,C.jsx)(n.Input,{fluid:!0,indicator:"required",value:null===s.MinDensity?"":s.MinDensity.toLocaleString(),label:e("BaseProductInfo_MinDensity"),onChange:e=>i("MinDensity",e),error:e(a.MinDensity),reserveSpace:!1})}),(0,C.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,C.jsx)(n.Input,{fluid:!0,indicator:"required",value:null===s.MaxDensity?"":s.MaxDensity.toLocaleString(),label:e("BaseProductInfo_MaxDensity"),onChange:e=>i("MaxDensity",e),error:e(a.MaxDensity),reserveSpace:!1})}),(0,C.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,C.jsx)(n.Select,{fluid:!0,placeholder:e("Common_Select"),label:e("BaseProductInfo_ProductType"),value:s.ProductType,options:r.productType,onChange:e=>{i("ProductType",e)},indicator:"required",error:e(a.ProductType),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage")})}),(0,C.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,C.jsx)(n.Input,{fluid:!0,value:s.AliasName,label:e("BaseProductInfo_Alias"),onChange:e=>i("AliasName",e),error:e(a.AliasName),reserveSpace:!1})}),(0,C.jsxs)("div",{className:"col-12 col-md-6 col-lg-4 checkboxSelect",children:[(0,C.jsx)(n.Checkbox,{label:e("BaseProductInfo_Additive"),checked:!!s.IsAdditive,onChange:e=>i("IsAdditive",e),disabled:!0===s.VapourRecoveryProduct}),(0,C.jsx)(n.Checkbox,{label:e("BaseProductInfo_IsVapRecProd"),checked:!!s.VapourRecoveryProduct,disabled:!0===s.IsAdditive,onChange:e=>i("VapourRecoveryProduct",e)})]}),(0,C.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,C.jsx)(n.Input,{fluid:!0,value:s.HazchemCode,label:e("BaseProductInfo_HazchemCode"),onChange:e=>i("HazchemCode",e),error:e(a.HazchemCode),reserveSpace:!1})}),(0,C.jsxs)("div",{className:"col-12 col-md-6 col-lg-4",children:[(0,C.jsx)(n.Input,{fluid:!0,className:"color-picker-input ".concat(o&&"#ffffff"!==o?"color-selected":""),label:e("FinishedProdut_colorCode"),onFocus:()=>D(),value:null===s.Color?"":s.Color,style:{backgroundColor:o},reserveSpace:!1,error:y?"":e(a.Color),onChange:e=>v(e)}),S?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(n.ColorPicker,{onApply:()=>g({hex:o}),onChange:e=>T(e),value:o}),(0,C.jsx)(n.Button,{type:"primary",iconRoot:"common",icon:"close",className:"color-picker-close",content:"",onClick:()=>A(),iconPosition:"left"})]}):""]}),(0,C.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,C.jsx)(n.Select,{fluid:!0,placeholder:e("Common_Select"),label:e("BaseProductList_Status"),value:s.Active,options:[{text:e("ViewShipment_Ok"),value:!0},{text:e("ViewShipmentStatus_Inactive"),value:!1}],onChange:e=>l(e),error:e(a.Active),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage")})}),(0,C.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,C.jsx)(n.Input,{fluid:!0,value:s.Remarks,onChange:e=>i("Remarks",e),label:e("BaseProductList_Remarks"),error:e(a.Remarks),indicator:s.Active!==t.Active?"required":"",reserveSpace:!1})}),p?(0,C.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,C.jsx)(c.y,{terminalList:r.terminalCodes,selectedTerminal:s.TerminalCodes,error:e(a.TerminalCodes),onFieldChange:i,onCheckChange:E})}):""]}),m.length>0?m.map((t=>(0,C.jsx)(u.A,{children:(0,C.jsx)(n.Accordion,{children:(0,C.jsx)(n.Accordion.Content,{className:"attributeAccordian",title:p?t.TerminalCode+" - "+e("Attributes_Header"):e("Attributes_Header"),children:(0,C.jsx)(h.n,{selectedAttributeList:t.attributeMetaDataList,handleCellDataEdit:P,attributeValidationErrors:N(I,t.TerminalCode)})})})}))):null]})})}p.defaultProps={listOptions:{productType:[],DensityUOM:[]},isEnterpriseNode:!1};var E=s(9256),m=s(97508),I=s(46100),P=s(44192),D=(s(38726),s(43503)),A=s(93779),g=s(40252),T=s(53536),S=s.n(T),v=s(80312),y=s(15417),N=s(40510),b=s(39424),L=s(62900);class R extends a.Component{constructor(){super(...arguments),this.state={baseProduct:S().cloneDeep(I.WD),modBaseProduct:{},appliedColor:"",selColor:"",validationErrors:o.Th(P.ni),isReadyToRender:!1,saveEnabled:!1,showColorPicker:!1,productTypeOptions:[],densityUOMOptions:[],attributeMetaDataList:[],modAttributeMetaDataList:[],attributeValidationErrors:[],baseProductKPIList:[],showAuthenticationLayout:!1,tempBaseProduct:{}},this.handleChange=(e,t)=>{try{const s=S().cloneDeep(this.state.modBaseProduct);s[e]=t,this.setState({modBaseProduct:s});const a=S().cloneDeep(this.state.validationErrors);void 0!==P.ni[e]&&(a[e]=o.jr(P.ni[e],t),this.setState({validationErrors:a})),"TerminalCodes"===e&&this.terminalSelectionChange(t)}catch(s){console.log("BaseProductDetailsComposite:Error occured on handleChange",s)}},this.handleAllTerminalsChange=e=>{try{var t=[...this.props.terminalCodes],s=S().cloneDeep(this.state.modBaseProduct);s.TerminalCodes=e?[...t]:[],this.setState({modBaseProduct:s}),this.terminalSelectionChange(s.TerminalCodes)}catch(a){console.log("BaseProductDetailsComposite:Error occured on handleAllTerminasChange",a)}},this.assignColor=e=>{if(null!==e&&""!==e){var t=e,s=S().cloneDeep(this.state.modBaseProduct);s.Color=t,this.setState({selColor:t,modBaseProduct:s,appliedColor:t})}else this.setState({selColor:"",appliedColor:t})},this.handleColorPicker=()=>{try{this.setState({showColorPicker:!0,isValidHex:!0})}catch(e){console.log("BaseProductDetailsProject:Error occured on handleColorPicker",e)}},this.handleColorPickerClose=()=>{var e=S().cloneDeep(this.state.modBaseProduct);try{e.Color=void 0!==this.state.appliedColor?this.state.appliedColor:"",this.setState({showColorPicker:!1,selColor:void 0!==this.state.appliedColor?this.state.appliedColor:"",modBaseProduct:e,isValidHex:!0})}catch(t){console.log("baseProductDetailsProject:Error occured on handleColorPickerClose",t)}},this.handleApplyColor=e=>{if(this.state.isValidHex){var t=S().cloneDeep(this.state.modBaseProduct);t.Color=e.hex,this.setState({appliedColor:e.hex,showColorPicker:!1,selColor:e.hex,modBaseProduct:t})}},this.handleOnColorChange=e=>{var t=S().cloneDeep(this.state.modBaseProduct);t.Color=e.hex,this.setState({selColor:e.hex,modBaseProduct:t,isValidHex:!0})},this.handleActiveStatusChange=e=>{try{let t=S().cloneDeep(this.state.modBaseProduct);t.Active=e,t.Active!==this.state.baseProduct.Active&&(t.Remarks=""),this.setState({modBaseProduct:t})}catch(t){console.log(t)}},this.handleReset=()=>{try{const{validationErrors:e}={...this.state},t=S().cloneDeep(this.state.baseProduct);let s="";null!==this.state.baseProduct.Color&&""!==this.state.baseProduct.Color&&(s=this.state.baseProduct.Color),t.Color=s,Object.keys(e).forEach((function(t){e[t]=""})),this.setState({modBaseProduct:{...t},selectedCompRow:[],validationErrors:e,modAttributeMetaDataList:[],selColor:s,appliedColor:s,showColorPicker:!1,isValidHex:!0},(()=>{this.props.userDetails.EntityResult.IsEnterpriseNode?(this.terminalSelectionChange(t.TerminalCodes),this.handleResetAttributeValidationError()):(this.localNodeAttribute(),this.handleResetAttributeValidationError())}))}catch(e){console.log("BaseProductDetailsComposite:Error occured on handleReset",e)}},this.handleSave=()=>{try{let e=this.fillDetails(),t=o.pI(this.state.modAttributeMetaDataList);if(null!==e.Color&&""!==e.Color||(e.Color=""),this.validateSave(e,t)){let t=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,s=S().cloneDeep(e);this.setState({showAuthenticationLayout:t,tempBaseProduct:s},(()=>{!1===t&&this.saveBaseProduct()}))}}catch(e){console.log("BaseProductDetailsComposite:Error occured on handleSave",e)}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})},this.saveBaseProduct=()=>{try{this.setState({saveEnabled:!1});let e=S().cloneDeep(this.state.tempBaseProduct),t=o.pI(this.state.modAttributeMetaDataList);e=this.convertStringtoDecimal(e,t),""===this.state.baseProduct.Code?this.createBaseProduct(e):this.updateBaseProduct(e)}catch(e){console.log("BaseProductDetailsComposite : Error in saveBaseProduct")}},this.handleHexValueChange=e=>{try{let s=S().cloneDeep(this.state.modBaseProduct);var t=S().cloneDeep(this.state.validationErrors);s.Color=e,this.setState({modBaseProduct:s});let a=/^#[0-9A-Fa-f]{6}$/.test(e);a?this.setState({selColor:e}):(void 0===e&&""===e||""===s.Color&&void 0===s.Color||(t.Color="FP_Color_hex"),this.setState({selColor:"#ffffff"})),this.setState({validationErrors:t,isValidHex:a})}catch(s){console.log(s)}},this.handleAttributeDataChange=(e,t)=>{try{let s=[],a=S().cloneDeep(this.state.modAttributeMetaDataList),i=a.filter((t=>t.TerminalCode===e.TerminalCode));i.length>0&&Array.isArray(i[0].attributeMetaDataList)&&(s=i[0].attributeMetaDataList.filter((t=>t.Code===e.Code))),s.length>0&&(s[0].DefaultValue=t);const r=S().cloneDeep(this.state.attributeValidationErrors);r.forEach((s=>{s.TerminalCode===e.TerminalCode&&(s.attributeValidationErrors[e.Code]=o.I5(e,t))})),this.setState({attributeValidationErrors:r,modAttributeMetaDataList:a})}catch(s){console.log("BaseProductDetailsComposite:Error occured on handleAttributeDataChange",s)}}}componentDidMount(){try{o.pJ(this.props.userDetails.EntityResult.IsArchived),console.log(this.props.userDetails.EntityResult),this.getAttributes(this.props.selectedRow),this.getProductTypes(),this.getDensityUOMList()}catch(e){console.log("BaseProductDetailsComposite:Error occured on componentDidMount",e)}}componentWillReceiveProps(e){try{if(""!==this.state.baseProduct.Code&&void 0===e.selectedRow.Common_Code&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo){this.getAttributes(e.selectedRow);let t={...this.state.validationErrors};Object.keys(t).forEach((e=>{t[e]=""})),this.setState({validationErrors:t})}}catch(t){console.log("BaseProductDetailsComposite:Error occured on componentWillReceiveProps",t)}}getAttributes(e){try{r()(l.fKH,o.tW([y.SF],this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data;!0===s.IsSuccess?this.setState({attributeMetaDataList:S().cloneDeep(s.EntityResult),attributeValidationErrors:o.Fl(s.EntityResult.baseProduct)},(()=>this.getBaseProduct(e))):console.log("Error in getAttributes:")}))}catch(t){console.log("Error while getAttributes:",t)}}terminalSelectionChange(e){try{if(void 0!==e&&null!==e){let i=[];var t=[],s=[];t=S().cloneDeep(this.state.attributeMetaDataList),s=S().cloneDeep(this.state.modAttributeMetaDataList);const r=S().cloneDeep(this.state.attributeValidationErrors);var a=S().cloneDeep(this.state.modBaseProduct);e.forEach((e=>{var o=s.find((t=>t.TerminalCode===e));void 0===o?t.baseProduct.forEach((function(t){if(t.TerminalCode===e){var s=a.Attributes.find((t=>t.TerminalCode===e));void 0!==s&&t.attributeMetaDataList.forEach((function(e){var t=s.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),i.push(t)}})):i.push(o)})),s=[],s=i,s=o.nQ(s),r.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.setState({modAttributeMetaDataList:s,attributeValidationErrors:r})}}catch(i){console.log("BaseProductDetailsComposite:Error occured on terminalSelectionChange",i)}}localNodeAttribute(){try{var e=S().cloneDeep(this.state.attributeMetaDataList);Array.isArray(e.baseProduct)&&e.baseProduct.length>0&&this.terminalSelectionChange([e.baseProduct[0].TerminalCode])}catch(t){console.log("BaseProductDetailsComposite:Error occured on localNodeAttribute",t)}}getBaseProduct(e){if(I.WD.DensityUOM=this.props.userDetails.EntityResult.PageAttibutes.DefaultUOMS.DensityUOM,this.props.userDetails.EntityResult.IsEnterpriseNode&&(I.WD.TerminalCodes=1===this.props.terminalCodes.length?[...this.props.terminalCodes]:[]),void 0!==e.Common_Code){var t=[{key:A.yV,value:e.Common_Code}],s={keyDataCode:A.yV,KeyCodes:t};r()(l.ZeY,o.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?(this.setState({isReadyToRender:!0,baseProduct:S().cloneDeep(t.EntityResult),modBaseProduct:S().cloneDeep(t.EntityResult),saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.JJ)},(()=>{this.getKPIList(t.EntityResult.Code),this.props.userDetails.EntityResult.IsEnterpriseNode?this.terminalSelectionChange(t.EntityResult.TerminalCodes):this.localNodeAttribute()})),null!==t.EntityResult&&void 0!==t.EntityResult&&this.assignColor(t.EntityResult.Color)):(this.setState({baseProduct:S().cloneDeep(I.WD),modBaseProduct:S().cloneDeep(I.WD),isReadyToRender:!0,selColor:""}),console.log("Error in getBaseProduct:",t.ErrorList))})).catch((t=>{console.log("Error while getting BaseProduct:",t,e)}))}else this.setState({baseProduct:S().cloneDeep(I.WD),modBaseProduct:S().cloneDeep(I.WD),isReadyToRender:!0,modAttributeMetaDataList:[],baseProductKPIList:[],saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.add,v.JJ),selColor:"",appliedColor:""},(()=>{this.props.userDetails.EntityResult.IsEnterpriseNode?1===this.props.terminalCodes.length?this.terminalSelectionChange(this.props.terminalCodes):this.terminalSelectionChange([]):this.localNodeAttribute()}))}getProductTypes(){r()(l.YG_,o.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=o.Zj(t.EntityResult);this.setState({productTypeOptions:e})}}else console.log("Error in getProductTypes:",t.ErrorList)})).catch((e=>{console.log("Error while getting getProductTypes:",e)}))}getDensityUOMList(){r()(l.WFM,o.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult){let e=t.EntityResult.DENSITY,s=[];e.forEach((e=>{s.push({text:e,value:e})})),this.setState({densityUOMOptions:s})}}else console.log("Error in getUOM:",t.ErrorList)})).catch((e=>{console.log("Error while getting getUOM:",e)}))}handleResetAttributeValidationError(){try{var e=S().cloneDeep(this.state.attributeMetaDataList);this.setState({attributeValidationErrors:o.Fl(e.baseProduct)})}catch(t){console.log("handleAttributeValidationError:Error occured on handleReset",t)}}fillDetails(){try{let e=S().cloneDeep(this.state.modBaseProduct);return null!==e.MinDensity&&""!==e.MinDensity&&(e.MinDensity=e.MinDensity.toLocaleString()),null!==e.MaxDensity&&""!==e.MaxDensity&&(e.MaxDensity=e.MaxDensity.toLocaleString()),this.setState({modBaseProduct:e}),e}catch(e){console.log("BaseProductDetailsComposite:Error occured on fillDetails",e)}}validateSave(e,t){const s={...this.state.validationErrors};Object.keys(P.ni).forEach((function(t){void 0!==e[t]&&(s[t]=o.jr(P.ni[t],e[t]))})),null!==e.MinDensity&&""!==e.MinDensity&&null!==e.MaxDensity&&""!==e.MaxDensity&&o.bo(e.MinDensity)>=o.bo(e.MaxDensity)&&(s.MaxDensity="BaseProductInfo_MaxDensityLesser"),e.Active!==this.state.baseProduct.Active&&(null!==e.Remarks&&""!==e.Remarks||(s.Remarks="BaseProductInfo_EnterRemarks"));var a=S().cloneDeep(this.state.attributeValidationErrors);t.forEach((e=>{a.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=o.I5(e,e.DefaultValue)}))}))})),this.setState({validationErrors:s,attributeValidationErrors:a});var i=!0;return a.forEach((e=>{if(!i)return i;i=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),i&&(i=Object.values(s).every((function(e){return""===e}))),i}convertStringtoDecimal(e,t){try{return null!==e.MinDensity&&""!==e.MinDensity&&(e.MinDensity=o.bo(e.MinDensity)),null!==e.MaxDensity&&""!==e.MaxDensity&&(e.MaxDensity=o.bo(e.MaxDensity)),t=o.SC(t),e.Attributes=o.Gh(t),e}catch(s){console.log("convertStringtoDecimal error BaseProduct Details",s)}}createBaseProduct(e){let t=[{key:A.yV,value:e.Code}],s={keyDataCode:A.yV,KeyCodes:t,Entity:e},a={messageType:"critical",message:"BaseProductInfo_SavedStatus",messageResultDetails:[{keyFields:["BaseProductInfo_BaseProdCode"],keyValues:[e.Code],isSuccess:!1,errorMessage:""}]};r()(l.Nbw,o.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{let s=t.data;a.messageType=s.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.JJ),showAuthenticationLayout:!1},(()=>this.getBaseProduct({Common_Code:e.Code}))):(a.messageResultDetails[0].errorMessage=s.ErrorList[0],this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.add,v.JJ),showAuthenticationLayout:!1}),console.log("Error in createBaseProduct:",s.ErrorList)),this.props.onSaved(this.state.modBaseProduct,"add",a)})).catch((e=>{this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.add,v.JJ),showAuthenticationLayout:!1}),a.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modBaseProduct,"add",a)}))}updateBaseProduct(e){let t=[{key:A.yV,value:e.Code}],s={keyDataCode:A.yV,KeyCodes:t,Entity:e},a={messageType:"critical",message:"BaseProductInfo_SavedStatus",messageResultDetails:[{keyFields:["BaseProductInfo_BaseProdCode"],keyValues:[e.Code],isSuccess:!1,errorMessage:""}]};r()(l.AP8,o.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{let s=t.data;a.messageType=s.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.JJ),showAuthenticationLayout:!1},(()=>this.getBaseProduct({Common_Code:e.Code}))):(a.messageResultDetails[0].errorMessage=s.ErrorList[0],this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.JJ),showAuthenticationLayout:!1}),console.log("Error in update BaseProduct:",s.ErrorList)),this.props.onSaved(this.state.modBaseProduct,"update",a)})).catch((e=>{this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.JJ),showAuthenticationLayout:!1}),a.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modBaseProduct,"modify",a)}))}getKPIList(e){if(!0===o.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.view,v.bL)){let t={PageName:b.Uo,InputParameters:[{key:"BaseProductCode",value:e}]};r()(l.dxq,o.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({baseProductKPIList:t.EntityResult.ListKPIDetails}):(this.setState({baseProductKPIList:[]}),console.log("Error in base product KPIList:",t.ErrorList))})).catch((e=>{console.log("Error while getting Base Product KPIList:",e)}))}}render(){const e={productType:this.state.productTypeOptions,DensityUOM:this.state.densityUOMOptions,terminalCodes:this.props.terminalCodes},t=[{fieldName:"BaseProductInfo_LastUpdated",fieldValue:new Date(this.state.modBaseProduct.LastUpdatedTime).toLocaleDateString()+" "+new Date(this.state.modBaseProduct.LastUpdatedTime).toLocaleTimeString()},{fieldName:"BaseProductInfo_LastActivatedTime",fieldValue:void 0!==this.state.modBaseProduct.LastActiveTime&&null!==this.state.modBaseProduct.LastActiveTime?new Date(this.state.modBaseProduct.LastActiveTime).toLocaleDateString()+" "+new Date(this.state.modBaseProduct.LastActiveTime).toLocaleTimeString():""},{fieldName:"BaseProductInfo_Created",fieldValue:new Date(this.state.modBaseProduct.CreatedTime).toLocaleDateString()+" "+new Date(this.state.modBaseProduct.CreatedTime).toLocaleTimeString()}];return this.state.isReadyToRender?(0,C.jsxs)("div",{children:[(0,C.jsx)(u.A,{children:(0,C.jsx)(D.A,{entityCode:this.state.baseProduct.Code,newEntityName:"BaseProductInfo_NewBaseProduct",popUpContents:t})}),(0,C.jsx)(N.A,{KPIList:this.state.baseProductKPIList,children:" "}),(0,C.jsx)(u.A,{children:(0,C.jsx)(p,{baseProduct:this.state.baseProduct,modBaseProduct:this.state.modBaseProduct,listOptions:e,validationErrors:this.state.validationErrors,selectedColor:this.state.selColor,onFieldChange:this.handleChange,onActiveStatusChange:this.handleActiveStatusChange,onAllTerminalsChange:this.handleAllTerminalsChange,onColorPickerChange:this.handleColorPicker,onColorPickerClose:this.handleColorPickerClose,onApplyColor:this.handleApplyColor,onChangeColor:this.handleOnColorChange,onHexValueChange:this.handleHexValueChange,colorPickerState:this.state.showColorPicker,isValidHex:this.state.isValidHex,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,attributeValidationErrors:this.state.attributeValidationErrors,modAttributeMetaDataList:this.state.modAttributeMetaDataList,onAttributeDataChange:this.handleAttributeDataChange})}),(0,C.jsx)(u.A,{children:(0,C.jsx)(E.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.showAuthenticationLayout?(0,C.jsx)(L.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.baseProduct.Code?v.i.add:v.i.modify,functionGroup:v.JJ,handleOperation:this.saveBaseProduct,handleClose:this.handleAuthenticationClose}):null]}):(0,C.jsx)(g.A,{message:"Loading"})}}const f=(0,m.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(R)},24904:(e,t,s)=>{s.d(t,{y:()=>l});s(65043);var a=s(67907),o=s(72711),i=s(69062),r=s(70579);function l(e){let{terminalList:t,selectedTerminal:s,validationError:l,onFieldChange:n,onCheckChange:d}=e;return null===s&&(s=[]),(0,r.jsx)(a.TranslationConsumer,{children:e=>(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)("div",{style:{width:"80%"},children:(0,r.jsx)(o.Select,{fluid:!0,placeholder:e("Common_Select"),label:e("TerminalCodes"),value:s,multiple:!0,options:i.Zj(t),onChange:e=>n("TerminalCodes",e),error:e(l),disabled:0===t.length,reserveSpace:!1})}),(0,r.jsx)("div",{className:"ddlSelectAll",children:(0,r.jsx)(o.Checkbox,{label:e("Common_All"),checked:Array.isArray(s)&&s.length===t.length,onChange:e=>d(e)})})]})})}l.defaultProps={terminalList:[],selectedTerminal:[],validationError:""}},43503:(e,t,s)=>{s.d(t,{A:()=>l});s(65043);var a=s(67907),o=s(72711),i=s(70579);function r(e){let{entityCode:t,newEntityName:s,popUpContents:r}=e;return(0,i.jsx)(a.TranslationConsumer,{children:e=>(0,i.jsx)("div",{className:"headerContainer",children:(0,i.jsxs)("div",{className:"row headerSpacing",children:[(0,i.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,i.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(s):t})}),""!==t&&void 0!==t&&r.length>0?(0,i.jsx)("div",{className:"headerItemRight",children:(0,i.jsx)(o.Popup,{element:(0,i.jsxs)("div",{children:[e(r[0].fieldName)+" ",":"," "+r[0].fieldValue,(0,i.jsx)(o.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,i.jsx)(o.List,{className:"detailsHeaderPopUp",children:r.map((t=>(0,i.jsxs)(o.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}r.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const l=r},9256:(e,t,s)=>{s.d(t,{q:()=>r});s(65043);var a=s(72711),o=s(67907),i=s(70579);function r(e){let{handleBack:t,handleSave:s,handleReset:r,saveEnabled:l}=e;return(0,i.jsx)(o.TranslationConsumer,{children:e=>(0,i.jsxs)("div",{className:"row userActionPosition",children:[(0,i.jsx)("div",{className:"col-12 col-md-3 col-lg-4",children:(0,i.jsx)(a.Button,{className:"backButton",onClick:t,content:e("Back")})}),(0,i.jsx)("div",{className:"col-12 col-md-9 col-lg-8",children:(0,i.jsxs)("div",{style:{float:"right"},children:[(0,i.jsx)(a.Button,{content:e("LookUpData_btnReset"),className:"cancelButton",onClick:r}),(0,i.jsx)(a.Button,{content:e("Save"),disabled:!l,onClick:s})]})})]})})}r.defaultProps={saveEnabled:!1}},85800:(e,t,s)=>{s.d(t,{n:()=>n});s(65043);var a=s(72711),o=s(67907),i=s(7523),r=s(35861),l=s(70579);function n(e){let{selectedAttributeList:t,handleCellDataEdit:s,attributeValidationErrors:n}=e;const d=e=>{if("0000-00-00"===e.DefaultValue)return c(e,new Date),new Date;var t=e.DefaultValue.split("-");return new Date(t[0],t[1]-1,t[2])},c=(e,t)=>{var a=new Date(t);t=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2),s(e,t)};return(0,l.jsx)(o.TranslationConsumer,{children:e=>(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-md-12 attributeDetails-wrap",children:(0,l.jsx)("div",{className:"row",children:t.map((t=>t.DataType.toLowerCase()===i.pe.STRING.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(n[t.Code]),reserveSpace:!1})}):t.DataType.toLowerCase()!==i.pe.INT.toLowerCase()&&t.DataType.toLowerCase()!==i.pe.LONG.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()!==i.pe.FLOAT.toLowerCase()&&t.DataType.toLowerCase()!==i.pe.DOUBLE.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()===i.pe.BOOL.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.Checkbox,{className:"deviceCheckBox customDeviceCheckBox",label:e(t.DisplayName),checked:null===t.DefaultValue?"":"true"===t.DefaultValue.toString().toLowerCase(),disabled:!0===t.IsReadonly,onChange:e=>s(t,e)})}):t.DataType.toLowerCase()===i.pe.DATETIME.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.DatePicker,{fluid:!0,value:null===t.DefaultValue||""===t.DefaultValue?"":d(t),label:e(t.DisplayName),displayFormat:(0,r.F1)(),showYearSelector:"true",indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>c(t,e),onTextChange:e=>{c(t,e)},error:e(n[t.Code]),reserveSpace:!1})}):null:(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue||""===t.DefaultValue?"":t.DefaultValue.toLocaleString(),indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(n[t.Code]),reserveSpace:!1})}):(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(n[t.Code]),reserveSpace:!1})})))})})})})}},15417:(e,t,s)=>{s.d(t,{$7:()=>f,AN:()=>se,AU:()=>b,Ak:()=>Fe,Ao:()=>a,B6:()=>Y,C4:()=>we,CG:()=>z,Ct:()=>K,Cw:()=>j,EY:()=>y,G$:()=>Ye,G6:()=>$e,GF:()=>Ce,GJ:()=>O,Gj:()=>ue,Gl:()=>ie,H9:()=>qe,HB:()=>Ne,HP:()=>v,Hr:()=>ye,II:()=>ot,IQ:()=>A,Jr:()=>G,Jx:()=>De,Ki:()=>te,LP:()=>oe,Lv:()=>i,MK:()=>I,MX:()=>ee,Mx:()=>J,N4:()=>Be,NH:()=>Pe,OF:()=>Qe,Ps:()=>H,Q7:()=>Ke,QY:()=>w,SF:()=>r,Sq:()=>Se,Sw:()=>le,TQ:()=>X,U7:()=>N,UH:()=>m,UO:()=>re,V_:()=>Re,Vy:()=>Ve,W9:()=>de,WN:()=>D,Wr:()=>o,Ww:()=>$,XP:()=>Le,Xk:()=>q,Yb:()=>Te,Yy:()=>p,Z2:()=>Oe,ZN:()=>M,ZO:()=>ge,Zu:()=>Ge,_G:()=>W,_N:()=>u,_u:()=>ce,ad:()=>ne,al:()=>Ae,ao:()=>V,bK:()=>F,bN:()=>P,cf:()=>x,dO:()=>fe,dU:()=>C,dv:()=>l,eE:()=>Z,g:()=>S,gG:()=>n,gS:()=>be,gT:()=>st,gW:()=>Q,gZ:()=>Xe,go:()=>L,gp:()=>U,hq:()=>xe,i6:()=>et,ip:()=>he,k9:()=>E,kI:()=>g,l4:()=>je,l5:()=>T,lA:()=>B,lU:()=>ze,mD:()=>Ue,mY:()=>k,mq:()=>d,n$:()=>at,n7:()=>h,nZ:()=>Me,rA:()=>ke,s$:()=>He,s8:()=>_e,se:()=>Ie,tA:()=>ve,vK:()=>tt,vs:()=>me,w2:()=>Ze,w4:()=>Ee,wT:()=>c,wY:()=>R,wf:()=>pe,wk:()=>ae,xW:()=>_,yM:()=>We,yO:()=>Je});const a="driver",o="carriercompany",i="shareholder",r="baseProduct",l="TRAILER",n="TRAILERCOMPARTMENT",d="terminal",c="customer",u="destination",h="finishedproduct",C="tank",p="marine_vessel",E="marine_trailercompartment",m="supplier",I="vehicle",P="vehicletrailer",D="originterminal",A="bay",g="loadingArm",T="cardreader",S="vehicleprimemover",v="meter",y="SHIPMENT",N="SHIPMENTCOMPARTMENT",b="SHIPMENTDESTINATIONCOMPARTMENT",L="SHIPMENTDETAILS",R="SHIPMENTTRAILERWEIGHBRIDGE",f="SHIPMENTTRAILER",M="SHIPMENTSTATUSTIME",x="MARINEDISPATCH",B="MARINEDISPATCHCOMPARTMENTDETAIL",O="railwagon",j="primemover",k="bcu",w="RAILRECEIPTPLAN",H="RAILRECEIPTWAGONDETAILPLAN",V="RAILUNLOADINGDETAILSFP",U="RAILUNLOADINGDETAILSBP",_="RAILUNLOADINGDETAILSADDITIVE",G="RAILDISPATCHPLAN",F="RAILDISPATCHITEM",W="RAILDISPATCHSTATUSCHANGE",J="RAILDISPATCHWAGON",K="RAILDISPATCHWAGONDETAILPLAN",q="RAILDISPATCHWAGONWEIGHBRIDGE",Y="RAILDISPATCHWAGONCOMPARTMENT",Z="RAILLOADINGDETAILSFP",z="RAILLOADINGDETAILSBP",Q="RAILLOADINGDETAILSADDITIVE",$="marineReceipt",X="UNACCOUNTEDMETERTRANSACTION",ee="UNACCOUNTEDTANKTRANSACTION",te="marineLoadingDetailsFP",se="marineLoadingDetailsAdditive",ae="marineLoadingDetailsBP",oe="marineReceiptCompartmentDetail",ie="marineUnloadingDetailsFP",re="marineUnloadingDetailsBP",le="accessCard",ne="LOADINGDETAILSFP",de="LOADINGDETAILSBP",ce="LOADINGDETAILSADDITIVE",ue="MARINERECEIPTSTATUSTIME",he="MARINEDISPATCHSTATUSTIME",Ce="RECEIPT",pe="UNLOADINGTRANSACTIONS",Ee="ORDER",me="ORDERITEM",Ie="CONTRACT",Pe="CONTRACT_ITEM",De="RECEIPTORIGINTERMINALCOMPARTMENT",Ae="GeneralTMUser_CAPTAIN",ge="weighbridge",Te="deu",Se="GeneralTMUser_STAFF",ve="GeneralTMUser_VISITOR",ye="PIPELINEHEADER",Ne="SEALMASTER",be="PIPELINERECEIPT",Le="ROADSHIPMENTSLOTINFO",Re="ROADRECEIPTSLOTINFO",fe="MARINESHIPMENTSLOTINFO",Me="MARINERECEIPTSLOTINFO",xe="PIPELINEDISPATCH",Be="PIPELINETRANSACTIONS",Oe="PIPELINEDISPATCHSTATUSTIME",je="PIPELINERECEIPTSTATUSTIME",ke="PROCESSCONFIG",we="PRODUCTALLOCATIONITEM",He="HSEINSPECTIONSHIPMENTRIGIDTRUCK",Ve="HSEINSPECTIONSHIPMENTTRAILER",Ue="HSEINSPECTIONSHIPMENTPRIMEMOVER",_e="HSEINSPECTIONSHIPMENTNONFILLINGVEHICLE",Ge="HSEINSPECTIONMARINESHIPMENTBARGE",Fe="HSEINSPECTIONMARINESHIPMENTSHIP",We="HSEINSPECTIONSHIPMENTRAILWAGON",Je="HSEINSPECTIONSHIPMENTPIPELINE",Ke="HSEINSPECTIONRECEIPTRIGIDTRUCK",qe="HSEINSPECTIONRECEIPTTRAILER",Ye="HSEINSPECTIONRECEIPTPRIMEMOVER",Ze="HSEINSPECTIONRECEIPTNONFILLINGVEHICLE",ze="HSEINSPECTIONMARINERECEIPTBARGE",Qe="HSEINSPECTIONMARINERECEIPTSHIP",$e="HSEINSPECTIONRECEIPTRAILWAGON",Xe="HSEINSPECTIONRECEIPTPIPELINE",et="SHAREHOLDERAGREEMENT",tt="COATEMPLATE",st="COAMANAGEMENT",at="COACUSTOMER",ot="COAASSIGNMENT"},35861:(e,t,s)=>{s.d(t,{F1:()=>l,i7:()=>n,r4:()=>r});var a=s(86178),o=s.n(a),i=(s(15660),s(65043),s(70579));function r(e,t){if(Array.isArray(e)){0===e.filter((e=>e.text===t)).length&&e.unshift({value:null,text:t})}return e}function l(){let e=window.navigator.userLanguage||window.navigator.language;return o().locale(e),o().localeData().longDateFormat("L")}function n(e){return(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{children:e}),(0,i.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]})}}}]);
//# sourceMappingURL=1652.4b4d118d.chunk.js.map