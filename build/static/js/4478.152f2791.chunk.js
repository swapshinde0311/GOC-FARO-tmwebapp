"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[4478,5841,8222],{66554:(e,t,a)=>{a.d(t,{$:()=>d});var s=a(65043),o=a(72711),l=a(67907),n=a(65187),i=a(69062),r=a(70579);function c(e){let{operationsVisibilty:t,breadcrumbItem:a,shareholders:c,selectedShareholder:d,onShareholderChange:h,onDelete:m,onAdd:p,popUpContent:u,shrVisible:C,handleBreadCrumbClick:g,addVisible:x,deleteVisible:S}=e;const[T,y]=(0,s.useState)(!1),[j,k]=(0,s.useState)(!1);function v(){t.add&&(u.length>0?k(!1===j):p())}return(0,r.jsxs)("div",{className:"row",style:{alignItems:"flex-start",padding:"0px"},children:[(0,r.jsx)("div",{className:"col-9 col-sm-9 col-md-9 col-lg-10 col-xl-10",style:{padding:"0px"},children:(0,r.jsxs)("div",{className:"row",style:{marginTop:"10px",alignItems:""},children:[(0,r.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-8",children:(0,r.jsxs)(n.A,{children:[" ",(0,r.jsx)(l.TranslationConsumer,{children:e=>(0,r.jsxs)(o.Breadcrumb,{children:[a.parents.map((t=>(0,r.jsx)(o.Breadcrumb.Item,{onClick:()=>{void 0!==g&&null!==g&&g(t.itemCode,a.parents)},children:e(t.localizedKey)},t.itemCode))),(0,r.jsx)(o.Breadcrumb.Item,{children:e(a.localizedKey)},a.itemCode)]})})]})}),(0,r.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-4",children:(0,r.jsx)(l.TranslationConsumer,{children:e=>(0,r.jsx)("div",{className:"compartmentIcon",style:{justifyContent:"flex-start"},children:!1===C?"":(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsxs)("h4",{className:"shrText",children:[e("Common_Shareholder"),":"]})}),(0,r.jsx)("div",{className:"opSelect",children:(0,r.jsx)(o.Select,{placeholder:e("Common_Shareholder"),value:d,disabled:!t.shareholder,options:i.Zj(c),onChange:e=>h(e)})})]})})})}),(0,r.jsx)(l.TranslationConsumer,{children:e=>(0,r.jsxs)(o.Modal,{open:T,size:"small",children:[(0,r.jsx)(o.Modal.Content,{children:(0,r.jsx)("div",{children:(0,r.jsx)("b",{children:e("Confirm_Delete")})})}),(0,r.jsxs)(o.Modal.Footer,{children:[(0,r.jsx)(o.Button,{type:"secondary",content:e("Cancel"),onClick:()=>y(!1)}),(0,r.jsx)(o.Button,{type:"primary",content:e("PipelineDispatch_BtnSubmit"),onClick:()=>{y(!1),m()}})]})]})})]})}),(0,r.jsx)("div",{className:"col-3 col-sm-3 col-md-3 col-lg-2 col-xl-2",children:(0,r.jsxs)("div",{style:{float:"right",display:"inline-block",marginTop:"10px"},children:[x?(0,r.jsx)(o.Popup,{position:"bottom right",className:"popup-theme-wrap",element:(0,r.jsx)("div",{className:(t.add?"iconCircle ":"iconCircleDisable ")+"iconblock",onClick:v,children:(0,r.jsx)(o.Icon,{root:"common",name:"badge-plus",size:"small",color:"white"})}),on:"click",open:j,children:(0,r.jsx)("div",{onMouseLeave:()=>k(!1),children:(0,r.jsx)(l.TranslationConsumer,{children:e=>(0,r.jsx)(o.VerticalMenu,{children:(0,r.jsxs)(o.VerticalMenu,{children:[(0,r.jsx)(o.VerticalMenu.Header,{children:e("Common_Create")}),u.map((t=>(0,r.jsx)(o.VerticalMenu.Item,{onClick:()=>{return e=t.fieldName,k(!1),void p(e);var e},children:e(t.fieldValue)})))]})})})})}):"",S?(0,r.jsx)("div",{style:{marginLeft:"10px"},onClick:()=>{t.delete&&y(!0)},className:(t.delete?"iconCircle ":"iconCircleDisable ")+"iconblock",children:(0,r.jsx)(o.Icon,{root:"common",name:"delete",size:"small",color:"white"})}):""]})})]})}c.defaultProps={operationsVisibilty:{add:!1,delete:!1,shareholder:!1},breadcrumbItem:{itemName:"",itemCode:"",localizedKey:"",itemProps:{},parents:[],isComponent:!1},shareholders:[],selectedShareholder:"",popUpContent:[],shrVisible:!0,addVisible:!0,deleteVisible:!0};a(38726);function d(e){let{operationsVisibilty:t,breadcrumbItem:a,shareholders:s,selectedShareholder:o,onShareholderChange:l,onDelete:n,onAdd:i,popUpContent:d,shrVisible:h,handleBreadCrumbClick:m,addVisible:p,deleteVisible:u}=e;return(0,r.jsx)(c,{operationsVisibilty:t,breadcrumbItem:a,shareholders:s,selectedShareholder:o,onShareholderChange:l,onDelete:n,onAdd:i,popUpContent:d,shrVisible:h,handleBreadCrumbClick:m,addVisible:p,deleteVisible:u})}},54478:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var s=a(65043),o=a(69062),l=a(40854),n=a.n(l),i=a(72067),r=a(97508),c=a(72711),d=a(65187),h=a(66554),m=a(93779),p=a(14159),u=(a(92342),a(11981)),C=(a(63973),a(9256),a(70579));class g extends s.Component{constructor(){super(...arguments),this.state={TankShareholderList:[],totalTankCapacity:0,totalGrossVolume:0,totalNetVolume:0,totalGrossMass:0,BPColor:"",tankfill:{}},this.handlePercentageChange=(e,t)=>{const{value:a}=t.target,s=[...this.state.TankShareholderList];let o=parseFloat(a);if(""===a&&(o=0),isNaN(o)||o<0||o>100)return void alert("Please enter a valid percentage between 0 and 100");s.reduce(((t,a,s)=>s===e?t+o:t+a.Percentage),0)<=100?(s[e].Percentage=o,s.forEach(((e,t)=>{e.TotalCapacity=e.Percentage/100*this.state.totalTankCapacity,e.AvailableQty=e.Percentage/100*this.state.totalGrossVolume,e.NetQty=e.Percentage/100*this.state.totalNetVolume,e.KGAr=e.Percentage/100*this.state.totalGrossMass})),this.setState({TankShareholderList:s})):alert("Total percentage exceeds 100%")},this.saveTankShareholder=e=>n().post(i.moS,{OperationName:"INSERTSHAREHOLDERSTOCKPERCENTAGE",ShareHolderCode:e.Shareholder,Percentage:e.Percentage,TotalCapacity:e.TotalCapacity,AvailableQty:e.AvailableQty,NetQty:e.NetQty,KGAr:e.KGAr}),this.handleReset=()=>{const e=this.state.TankShareholderList.map((e=>({...e,Percentage:0,TotalCapacity:0})));this.setState({TankShareholderList:e})}}componentDidMount(){console.log("componentDidMount Called");try{o.pJ(this.props.userDetails.EntityResult.IsArchived),this.props.userDetails.EntityResult.IsDCHEnabled&&this.getExternalSystemInfo(),this.getTankShareholder(),this.updateTankFill()}catch(e){console.log("TankShareholderComposite:Error occured on componentDidMount",e)}}getTankShareholder(){try{n()(i.ClS+"?inputString=GetTankShareholder",o.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(console.log("handleStartUnloading: ".concat(JSON.stringify(t))),!0===t.IsSuccess){const e=t.EntityResult,a=e[0].TotalTankCapacity,s=e[0].TotalGrossVolume,o=e[0].TotalNetVolume,l=e[0].TotalGrossMass,n=e[0].BPColor;this.setState({TankShareholderList:e,totalTankCapacity:a,totalGrossVolume:s,totalNetVolume:o,totalGrossMass:l,BPColor:n})}}))}catch(e){console.log("RailReceiptComposite:Error occured on handleStartUnloading",e)}}handleSaveTankSharholder(){try{const e={values:this.state.TankShareholderList};console.log("handleSave in handleSaveTankSharholder() TankShareholder: ".concat(JSON.stringify(e))),console.log("handleSave in handleSaveTankSharholder:");let t={keyDataCode:"",KeyCodes:[{key:m.jz,value:"UPDATETANKSHAREHOLDER"}],Input:this.state.TankShareholderList},a={messageType:"success",message:"TankShareholder Updated successfully",messageResultDetails:[{keyFields:[],keyValues:[],isSuccess:!0,errorMessage:""}]};n()(i.moS,o.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;console.log("handleSave in handleSaveTankSharholder() TankShareholder: ".concat(JSON.stringify(t))),a.messageType=t.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=t.IsSuccess,a.message="TankShareholder Updated Successfully",console.log("handleSave in handleSaveTankSharholder() TankShareholder: ".concat(JSON.stringify(a.message))),console.log("ProjectPost api in TankSharholder response result =",t)})).catch((e=>{a.messageResultDetails[0].errorMessage="Error creating TankShareholder "})),(0,p.toast)((0,C.jsx)(d.A,{children:(0,C.jsx)(u.A,{notificationMessage:a})}),{autoClose:"success"===a.messageType&&1e4})}catch(e){console.log("handleSaveTankSharholder Error occured on handleSave",e)}}componentDidUpdate(e,t){t.totalTankCapacity===this.state.totalTankCapacity&&t.totalGrossVolume===this.state.totalGrossVolume&&t.BPColor===this.state.BPColor||this.updateTankFill()}updateTankFill(){const{totalTankCapacity:e,totalGrossVolume:t,BPColor:a}=this.state,s=t/e*100;console.log("BPColor in updateTankFill",a);const o={width:"100%",backgroundColor:"".concat(a),position:"absolute",bottom:"0",textAlign:"center",color:"#1b1c1d",height:"".concat(s,"%")};this.setState({tankfill:o})}render(){const{totalTankCapacity:e,totalGrossVolume:t,tankfill:a}=this.state,s=t/e*100,o=e-t;return(0,C.jsxs)("div",{children:[(0,C.jsx)(d.A,{children:(0,C.jsx)(h.$,{breadcrumbItem:this.props.activeItem,shareholders:this.props.userDetails.EntityResult.ShareholderList,handleBreadCrumbClick:this.props.handleBreadCrumbClick,shrVisible:!1,addVisible:!1,deleteVisible:!1})}),(0,C.jsx)("div",{className:"detailsContainer1",children:(0,C.jsx)("div",{children:(0,C.jsxs)("table",{className:"tableTank",children:[(0,C.jsx)("thead",{children:(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{children:"Shareholder"}),(0,C.jsx)("th",{children:"Percentage(%)"}),(0,C.jsx)("th",{children:"Available Quantity"}),(0,C.jsx)("th",{children:"Net Quantity"})]})}),(0,C.jsx)("tbody",{children:this.state.TankShareholderList.map(((e,t)=>(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{children:e.Code}),(0,C.jsx)("td",{children:(0,C.jsx)("input",{type:"text",value:e.Percentage,onChange:e=>this.handlePercentageChange(t,e),onBlur:()=>this.saveTankShareholder(t)})}),(0,C.jsx)("td",{children:e.AvailableQty}),(0,C.jsx)("td",{children:e.NetQty})]},t)))}),(0,C.jsx)("tfoot",{children:(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{children:"Total"}),(0,C.jsx)("td",{children:"100"}),(0,C.jsx)("td",{children:this.state.totalGrossVolume}),(0,C.jsx)("td",{children:this.state.totalNetVolume})]})})]})})}),(0,C.jsx)("div",{className:"row userActionPosition",children:(0,C.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,C.jsxs)("div",{style:{float:"right"},children:[(0,C.jsx)(c.Button,{content:"Reset",className:"cancelButton",onClick:this.handleReset}),(0,C.jsx)(c.Button,{content:"Save",onClick:()=>this.handleSaveTankSharholder()})]})})}),(0,C.jsxs)("div",{className:"tank-container",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{className:"tank",children:(0,C.jsx)("div",{style:a,children:"".concat(s.toFixed(2),"%")})}),(0,C.jsx)("div",{className:"tank-capacity",children:(0,C.jsxs)("p",{children:["Capacity: ",e," L"]})})]}),(0,C.jsxs)("div",{className:"tank-info",children:[(0,C.jsxs)("p",{className:"tank-infoVolume",children:["Remaining Volume: ",o," L"]}),(0,C.jsxs)("p",{children:["Gross Volume: ",t," L"]})]})]}),(0,C.jsx)(d.A,{children:(0,C.jsx)(p.ToastContainer,{hideProgressBar:!0,closeOnClick:!1,closeButton:!0,newestOnTop:!0,position:"bottom-right",toastClassName:"toast-notification-wrap"})})]})}}const x=(0,r.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(g)},9256:(e,t,a)=>{a.d(t,{q:()=>n});a(65043);var s=a(72711),o=a(67907),l=a(70579);function n(e){let{handleBack:t,handleSave:a,handleReset:n,saveEnabled:i}=e;return(0,l.jsx)(o.TranslationConsumer,{children:e=>(0,l.jsxs)("div",{className:"row userActionPosition",children:[(0,l.jsx)("div",{className:"col-12 col-md-3 col-lg-4",children:(0,l.jsx)(s.Button,{className:"backButton",onClick:t,content:e("Back")})}),(0,l.jsx)("div",{className:"col-12 col-md-9 col-lg-8",children:(0,l.jsxs)("div",{style:{float:"right"},children:[(0,l.jsx)(s.Button,{content:e("LookUpData_btnReset"),className:"cancelButton",onClick:n}),(0,l.jsx)(s.Button,{content:e("Save"),disabled:!i,onClick:a})]})})]})})}n.defaultProps={saveEnabled:!1}},93779:(e,t,a)=>{a.d(t,{$A:()=>A,$L:()=>rt,$Q:()=>we,Ae:()=>Ve,BX:()=>le,Bl:()=>ue,Bv:()=>xe,Bw:()=>Y,Cb:()=>V,Cg:()=>P,DN:()=>lt,D_:()=>nt,Dm:()=>B,E7:()=>J,EW:()=>I,FN:()=>oe,FR:()=>l,FY:()=>ut,GA:()=>Qe,GT:()=>y,Ge:()=>Me,HB:()=>ne,JQ:()=>q,KJ:()=>ee,Kz:()=>H,Ln:()=>_,M$:()=>_e,O5:()=>tt,Of:()=>je,Oo:()=>at,Pk:()=>ge,Pm:()=>X,Q5:()=>ct,QK:()=>He,QV:()=>Ye,QZ:()=>dt,Qu:()=>ae,RX:()=>Pe,Rb:()=>Q,Rp:()=>v,SP:()=>C,T5:()=>Le,UB:()=>S,UT:()=>r,Ui:()=>K,VA:()=>w,Vk:()=>ve,Wb:()=>be,Wv:()=>ke,X3:()=>qe,Y4:()=>U,Yl:()=>st,Zx:()=>$,_B:()=>Se,_C:()=>D,_R:()=>Ce,_j:()=>de,_n:()=>s,aM:()=>L,aW:()=>Fe,bW:()=>F,c4:()=>ot,cD:()=>i,c_:()=>N,cx:()=>O,dL:()=>ht,eE:()=>re,eS:()=>Ke,eT:()=>k,f:()=>M,f7:()=>pe,fR:()=>he,g1:()=>ce,gN:()=>Je,gO:()=>z,iH:()=>it,ij:()=>et,j1:()=>f,jC:()=>Te,je:()=>me,jz:()=>ie,ll:()=>Ze,mM:()=>T,mO:()=>pt,mW:()=>Ee,ml:()=>g,mm:()=>Xe,nB:()=>te,nT:()=>Ie,np:()=>Be,oA:()=>b,oG:()=>We,oV:()=>Z,ok:()=>h,oy:()=>c,pL:()=>Re,pe:()=>Ue,pw:()=>ze,qF:()=>n,qQ:()=>mt,qp:()=>m,s0:()=>j,sA:()=>De,st:()=>se,tY:()=>E,uw:()=>W,v6:()=>o,vL:()=>Ge,vf:()=>Ae,wH:()=>$e,wO:()=>ye,wX:()=>G,x4:()=>Ne,xf:()=>p,xy:()=>d,yI:()=>x,yV:()=>R,yz:()=>u,zL:()=>fe,zf:()=>Oe});const s="CarrierCode",o="TransportationType",l="ShareHolderCode",n="DriverCode",i="CustomerCode",r="TrailerCode",c="OriginTerminalCode",d="PrimeMoverCode",h="VehicleCode",m="DestinationCode",p="FinishedProductCode",u="ShipmentCode",C="OrderCode",g="ReceiptCode",x="MarineDispatchCode",S="MarineReceiptCode",T="SupplierCode",y="ContractCode",j="RailDispatchCode",k="RailReceiptCode",v="RailRouteCode",b="WagonCode",N="CompartmentCode",f="SMSConfigurationCode",P="PipelineDispatchCode",D="PipelineReceiptCode",V="EmailConfigurationCode",R="BaseProductCode",A="LocationCode",B="SiteViewType",M="EntityCode",I="EntityType",E="CardReaderCode",L="AccessCardCode",G="BcuCode",O="DeuCode",F="WeighBridgeCode",w="Weight",Q="OutOfToleranceAllowed",U="LoadingArmCode",_="TransportationType",H="BayCode",z="TransactionNumber",K="BatchNumber",W="TerminalCode",q="TankGroupCode",J="TankCode",$="MeterCode",X="ShipmentType",Y="ShipmentStatus",Z="MeterLineType",ee="DispatchCode",te="ReceiptStatus",ae="FPTransactionID",se="ProductCategoryType",oe="Reason",le="SealMasterCode",ne="Reason",ie="OperationName",re="FPTransactionID",ce="ProductCategoryType",de="CompartmentSeqNoInVehicle",he="AdjustedPlanQuantity",me="ForceComplete",pe="DispatchStatus",ue="HolidayDate",Ce="ActionID",ge="EODTimePrev",xe="TerminalAction",Se="EODTime",Te="MonthStartDay",ye="CaptainCode",je="GeneralTMUserType",ke="GeneralTMUserCode",ve="IsPriority",be="ActualTerminalCode",Ne="ShipmentBondNo",fe="ReceiptBondNo",Pe="DeviceType",De="DeviceCode",Ve="BayGroup",Re="PipelineHeaderCode",Ae="ExchangePartner",Be="PersonID",Me="UserName",Ie="PipelinePlanCode",Ee="PipelinePlanType",Le="ChannelCode",Ge="ProcessName",Oe="ReconciliationCode",Fe="NotificationGroupCode",we="NotificationGroupStatus",Qe="NotificationGroupDesc",Ue="NotificationResSource",_e="NotificationResMsgCode",He="NotificationOrigResSource",ze="NotificationOrigResMsgCode",Ke="NotificationMessageCode",We="PositionType",qe="ExchangeAgreementCode",Je="ProductTransferAgreementCode",$e="ShareholderAgreementStatus",Xe="RequestorShareholder",Ye="LenderShareholder",Ze="RequestCode",et="TransferReferenceCode",tt="ShiftID",at="ShiftName",st="PrinterName",ot="LocationType",lt="ForceClosureReason",nt="TransactionType",it="CustomerRecipeCode",rt="COATemplateCode",ct="COAManagementCode",dt="COAParameterCode",ht="COAManagementFinishedProductCode",mt="COASeqNumber",pt="ForecastDate",ut="ForecastTanks"},11981:(e,t,a)=>{a.d(t,{A:()=>i});a(65043);var s=a(72711),o=a(67907),l=a(7523),n=a(70579);function i(e){let{notificationMessage:t}=e;function a(e){try{return e.split(l.uV)[0]}catch(t){return console.log(t),""}}function i(e){try{let t=e.split(l.uV);return t.splice(0,1),t}catch(t){return console.log(t),[]}}return(0,n.jsx)(o.TranslationConsumer,{children:e=>(0,n.jsx)(s.Notification,{className:"toast-notification",severity:t.messageType,hasIcon:!0,title:e(t.message),children:t.messageResultDetails.map((t=>{var s="";if(t.keyFields.length>0)for(var o=0;o<t.keyFields.length;o++)s=s+e(t.keyFields[o])+" : "+t.keyValues[o]+", ";return(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{style:{color:t.isSuccess?"#7eb338":"#F15A4F"},children:[s,t.isSuccess?e("NotificationList_MessageType_Success"):e("NotificationList_MessageType_Failure")+" : "+e(a(t.errorMessage),i(t.errorMessage))]}),(0,n.jsx)("br",{})]})}))})})}},92342:()=>{}}]);
//# sourceMappingURL=4478.152f2791.chunk.js.map