"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[8319],{88319:(e,t,i)=>{i.r(t),i.d(t,{default:()=>S});var a=i(65043),l=i(78374),r=i(67907),o=i(72711),s=i(40854),d=i.n(s),n=i(7523),E=i(72067),c=i(69062),T=i(50805),I=i(9966),A=i(97508),N=i(53536),C=i.n(N),m=i(93779),D=i(45127),p=i(728),u=i(15417),R=i(70579);p.setLicenseKey(n.yQ);class P extends a.Component{constructor(){super(...arguments),this.state={receiptViewAuditTrailData:[],modReceiptViewAuditTrailData:[],auditTrailAttributeMetaDataList:[],Attributes:[]},this.handlePrint=()=>{try{this.setState({openPrint:!0},(()=>{}))}catch(e){console.log("MarineReceiptViewAuditTrailDetailsComposite:Error occured on handlePrint",e)}}}getReceiptViewAuditTrail(e){if(void 0===e)return void this.setState({receiptViewAuditTrailData:[],modReceiptViewAuditTrailData:[]});let t=[{key:m.eT,value:e}];let i={ReceiptCode:e,TmWebApiRequest:{ShareHolderCode:this.props.shareholderCode,KeyCodes:t}};d()(E.Ivq,c.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({receiptViewAuditTrailData:C().cloneDeep(t.EntityResult),modReceiptViewAuditTrailData:C().cloneDeep(t.EntityResult)}):this.setState({receiptViewAuditTrailData:[],modReceiptViewAuditTrailData:[]});var i=C().cloneDeep(this.state.modReceiptViewAuditTrailData),a=C().cloneDeep(this.state.receiptViewAuditTrailData);for(let l=0;l<i.length;l++){let e=i[l].ReceiptStatus;e===n.a$.AUTO_UNLOADED?e=n.PH.AUTO_LOADED:e===n.a$.CHECKED_IN?e=n.PH.CHECKED_IN:e===n.a$.CLOSED?e=n.PH.CLOSED:e===n.a$.INTERRUPTED?e=n.PH.INTERRUPTED:e===n.a$.UNLOADING?e=n.PH.UNLOADING:e===n.a$.MANUALLY_UNLOADED?e=n.PH.MANUALLY_UNLOADED:e===n.a$.PARTIALLY_UNLOADED?e=n.PH.PARTIALLY_UNLOADED:e===n.a$.QUEUED?e=n.PH.QUEUED:e===n.a$.READY?e=n.PH.READY:e===n.a$.DE_QUEUED?e=n.PH.DE_QUEUED:e===n.a$.WEIGHED_IN?e=n.PH.WEIGHED_IN:e===n.a$.WEIGHED_OUT?e=n.PH.WEIGHED_OUT:e===n.a$.USER_DEFINED?e=n.PH.USER_DEFINED:e===n.a$.ASSIGNED?e=n.PH.ASSIGNED:e===n.a$.CANCELLED?e=n.PH.CANCELLED:e===n.a$.EXPIRED?e=n.PH.EXPIRED:e===n.a$.REJECTED&&(e=n.PH.REJECTED);let t=C().cloneDeep(this.state.auditTrailAttributeMetaDataList);for(let i=0;i<a.length;i++)a[i].AttributesforUI=this.formReadonlyCompAttributes(a[i].Attributes,t);let r=a.length>0?a[0].AttributesforUI:[];i[l].ReceiptStatus=e,i[l].UpdatedTime=new Date(i[l].UpdatedTime).toLocaleDateString()+" "+new Date(i[l].UpdatedTime).toLocaleTimeString(),this.setState({modReceiptViewAuditTrailData:i,Attributes:r,receiptViewAuditTrailData:a})}})).catch((e=>{console.log("Error while getting MarineReceiptViewAuditTrail:",e)}))}formReadonlyCompAttributes(e,t){let i=[];return null!==t&&void 0!==t&&t.length>0&&t.forEach((e=>{e.attributeMetaDataList.forEach((e=>{i.push({AttributeCode:e.Code,AttributeName:e.DisplayName?e.DisplayName:e.Code,AttributeValue:e.DefaultValue,TerminalCode:e.TerminalCode,IsMandatory:e.IsMandatory,DataType:e.DataType,IsReadonly:e.IsReadonly,MinValue:e.MinValue,MaxValue:e.MaxValue,ValidationFormat:e.ValidationFormat,compSequenceNo:""})}))})),null!==e&&void 0!==e&&e.length>0&&e.forEach((e=>{i.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.ListOfAttributeData.forEach((e=>{t.AttributeCode===e.AttributeCode&&(t.AttributeValue=e.AttributeValue)}))}))})),i}getAttributes(){try{d()(E.fKH,c.tW([u.ip],this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({auditTrailAttributeMetaDataList:C().cloneDeep(t.EntityResult.MARINEDISPATCHSTATUSTIME)},(()=>{this.getReceiptViewAuditTrail(this.props.selectedRow.Common_Code)})):console.log("Error in getAttributes:")}))}catch(e){console.log("Error while getAttributes:",e)}}componentDidMount(){try{this.getAttributes(),c.pJ(this.props.userDetails.EntityResult.IsArchived)}catch(e){console.log("RailReceiptViewAuditTrailDetailsComposite:Error occured on componentDidMount",e)}}printTable(){let e=window.document.getElementById("printTable").innerHTML;const t=window.document.createElement("IFRAME");let i=null;window.document.body.appendChild(t),i=t.contentWindow.document;const a=e.substring(0,e.indexOf("<table")+6),l=e.substring(e.indexOf("<table")+6,e.length);e=a+' border="1" cellspacing="0"'+l,e=e.replace('<tfoot class="p-datatable-tfoot">',""),e=e.replace('<tr><td class="compColHeight"></td><td class="compColHeight"></td><td class="compColHeight"></td><td class="compColHeight"></td><td class="compColHeight"></td><td class="compColHeight"></td></tr>',""),i.write(e),console.info(e),i.close(),t.contentWindow.focus(),t.contentWindow.print(),setTimeout((()=>{document.body.removeChild(t)}),2e3)}render(){const e=e=>0===e&&null!==e?n.PH.COMPLETED.toLocaleString():1===e&&null!==e?n.PH.EMPTY.toLocaleString():2===e&&null!==e?n.PH.FORCE_COMPLETED.toLocaleString():3===e&&null!==e?n.PH.INTERRUPTED.toLocaleString():4===e&&null!==e?n.PH.OVER_UNLOADED.toLocaleString():5===e&&null!==e?n.PH.PART_UNLOADED.toLocaleString():6===e&&null!==e?n.PH.UNLOAD_NOTSTARTED.toLocaleString():7===e&&null!==e?n.PH.UNLOADING.toLocaleString():e,t=e=>{const t=e.rowData.AttributesforUI.filter((t=>t.AttributeName===e.name))[0];return t.DataType.toLowerCase()===n.pe.STRING.toLowerCase()||t.DataType.toLowerCase()===n.pe.INT.toLowerCase()||t.DataType.toLowerCase()===n.pe.LONG.toLowerCase()||t.DataType.toLowerCase()===n.pe.FLOAT.toLowerCase()?(0,R.jsx)("label",{children:t.AttributeValue}):t.DataType.toLowerCase()===n.pe.BOOL.toLowerCase()?(0,R.jsx)(o.Checkbox,{checked:"true"===t.AttributeValue.toString().toLowerCase(),disabled:!0}):(0,R.jsx)("label",{children:new Date(t.AttributeValue).toLocaleDateString()})},i=(e,t)=>(t.cls=null,e.fontSize="7px",t.val===n.PH.AUTO_LOADED?t.text=n.a$.AUTO_LOADED:t.val===n.PH.CHECKED_IN?t.text=n.a$.CHECKED_IN:t.val===n.PH.CLOSED?t.text=n.a$.CLOSED:t.val===n.PH.INTERRUPTED?t.text=n.a$.INTERRUPTED:t.val===n.PH.UNLOADING?t.text=n.a$.UNLOADING:t.val===n.PH.MANUALLY_UNLOADED?t.text=n.a$.MANUALLY_UNLOADED:t.val===n.PH.PARTIALLY_UNLOADED?t.text=n.a$.PARTIALLY_UNLOADED:t.val===n.PH.QUEUED?t.text=n.a$.QUEUED:t.val===n.PH.READY?t.text=n.a$.READY:t.val===n.PH.DE_QUEUED?t.text=n.a$.DE_QUEUED:t.val===n.PH.WEIGHED_IN?t.text=n.a$.WEIGHED_IN:t.val===n.PH.WEIGHED_OUT?t.text=n.a$.WEIGHED_OUT:t.val===n.PH.USER_DEFINED?t.text=n.a$.USER_DEFINED:t.val===n.PH.ASSIGNED?t.text=n.a$.ASSIGNED:t.val===n.PH.CANCELLED?t.text=n.a$.CANCELLED:t.val===n.PH.EXPIRED?t.text=n.a$.EXPIRED:t.val===n.PH.REJECTED&&(t.text=n.a$.REJECTED),t);return(0,R.jsx)(r.TranslationConsumer,{children:a=>(0,R.jsxs)("div",{children:[(0,R.jsxs)(o.Modal,{onClose:()=>this.setState({openPrint:!1}),size:"large",open:this.state.openPrint,className:"marineModalPrint",closeOnDimmerClick:!1,children:[(0,R.jsx)(o.Modal.Content,{children:(0,R.jsxs)("div",{id:"printTable",children:[(0,R.jsx)("div",{className:"ViewAuditTrailDetailsPrint",children:(0,R.jsx)("b",{children:a("ViewAuditTrail_ViewAuditTrailForReceipt")+" : "+this.props.selectedRow.Common_Code})}),(0,R.jsx)("div",{className:"col-md-10 container-fluid",children:(0,R.jsxs)(D.IO,{itemsSource:this.state.modReceiptViewAuditTrailData,chartType:"Line",bindingX:"UpdatedTime",palette:["red"],style:{width:"100%",height:"450px"},children:[(0,R.jsx)(D.tN,{position:"Bottom"}),(0,R.jsx)(D.vc,{wjProperty:"axisY",majorUnit:1,max:16,min:0,itemFormatter:i,axisLine:!0}),(0,R.jsx)(D.t3,{binding:"ReceiptStatus",name:"ReceiptStatus"})]})}),(0,R.jsx)("div",{className:"col-12 detailsTable",children:(0,R.jsxs)(l.bQ,{data:this.state.receiptViewAuditTrailData,scrollable:!0,value:"",children:[(0,R.jsx)(l.bQ.Column,{className:"compColHeight",field:"ReceiptCode",header:a("Receipt_Code"),editable:!1,editFieldType:"text"},"ReceiptCode"),(0,R.jsx)(l.bQ.Column,{className:"compColHeight",field:"ReceiptStatus",header:a("ReceiptStatus"),editable:!1,renderer:t=>e(t.rowData.ReceiptStatus),editFieldType:"text"},"ReceiptStatus"),(0,R.jsx)(l.bQ.Column,{className:"compColHeight",field:"TrailerCode",header:a("Rail_Wagon_Code"),editable:!1,editFieldType:"text"},"TrailerCode"),(0,R.jsx)(l.bQ.Column,{className:"compColHeight",field:"CarrierCompanyCode",header:a("Carrier_Company_Code"),editable:!1,editFieldType:"text"},"CarrierCompanyCode"),(0,R.jsx)(l.bQ.Column,{className:"compColHeight",field:"ReceiptCompartmentStatus",renderer:e=>null===e.value?"":c.cd(n.vy,e.value),header:a("ReceiptCompartmentStatus"),editable:!1,editFieldType:"text"},"ReceiptCompartmentStatus"),(0,R.jsx)(l.bQ.Column,{className:"compColHeight",field:"UserPIN",header:a("PIN"),editable:!1,editFieldType:"text"},"UserPIN"),(0,R.jsx)(l.bQ.Column,{className:"compColHeight",field:"UpdatedTime",renderer:e=>new Date(e.value).toLocaleString(),header:a("SAAuditTrial_UpdatedTime"),editable:!1,editFieldType:"text"},"UpdatedTime"),(0,R.jsx)(l.bQ.Column,{className:"compColHeight",field:"OfficerName",header:a("ViewAuditTrail_OfficerName"),editable:!1,editFieldType:"text"},"OfficerName"),this.state.Attributes.map((e=>(0,R.jsx)(l.bQ.Column,{className:"compColHeight",header:a(e.AttributeName),editable:!1,renderer:t})))]})})]})}),(0,R.jsxs)(o.Modal.Footer,{children:[(0,R.jsx)(o.Button,{type:"primary",size:"small",content:a("EOD_Print"),onClick:()=>{this.printTable()}}),(0,R.jsx)(o.Button,{type:"primary",size:"small",content:a("MarineEOD_Close"),onClick:()=>{this.setState({openPrint:!1})}})]})]}),(0,R.jsxs)("div",{className:"detailsContainer",children:[(0,R.jsx)("div",{className:"row",children:(0,R.jsx)("div",{className:"col-12 ",children:(0,R.jsx)("h3",{children:a("ViewAuditTrail_ViewAuditTrailForReceipt")+" : "+this.props.selectedRow.Common_Code})})}),(0,R.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,R.jsx)("div",{className:"col-12 detailsTable container-fluid",children:(0,R.jsxs)(D.IO,{itemsSource:this.state.modReceiptViewAuditTrailData,chartType:"Line",bindingX:"UpdatedTime",palette:["red"],style:{width:"100%",minWidth:"800px",height:"450px"},children:[(0,R.jsx)(D.tN,{position:"Bottom"}),(0,R.jsx)(D.vc,{wjProperty:"axisY",majorUnit:1,max:16,min:0,itemFormatter:i,axisLine:!0}),(0,R.jsx)(D.t3,{binding:"ReceiptStatus",name:"ReceiptStatus"})]})})}),(0,R.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,R.jsx)("div",{className:"col-12 detailsTable",children:(0,R.jsxs)(l.bQ,{data:this.state.receiptViewAuditTrailData,scrollable:!0,value:"",children:[(0,R.jsx)(l.bQ.Column,{className:"compColHeight colminWidth",field:"ReceiptCode",header:a("Receipt_Code"),editable:!1,editFieldType:"text"},"ReceiptCode"),(0,R.jsx)(l.bQ.Column,{className:"compColHeight colminWidth",field:"ReceiptStatus",header:a("ReceiptStatus"),editable:!1,renderer:t=>e(t.rowData.ReceiptStatus),editFieldType:"text"},"ReceiptStatus"),(0,R.jsx)(l.bQ.Column,{className:"compColHeight colminWidth",field:"TrailerCode",header:a("Rail_Wagon_Code"),editable:!1,editFieldType:"text"},"TrailerCode"),(0,R.jsx)(l.bQ.Column,{className:"compColHeight colminWidth",field:"CarrierCompanyCode",header:a("Carrier_Company_Code"),editable:!1,editFieldType:"text"},"CarrierCompanyCode"),(0,R.jsx)(l.bQ.Column,{className:"compColHeight colminWidth",field:"ReceiptCompartmentStatus",renderer:e=>null===e.value?"":c.cd(n.vy,e.value),header:a("ReceiptCompartmentStatus"),editable:!1,editFieldType:"text"},"ReceiptCompartmentStatus"),(0,R.jsx)(l.bQ.Column,{className:"compColHeight colminWidth",field:"UserPIN",header:a("PIN"),editable:!1,editFieldType:"text"},"UserPIN"),(0,R.jsx)(l.bQ.Column,{className:"compColHeight colminWidth",field:"UpdatedTime",renderer:e=>new Date(e.value).toLocaleString(),header:a("SAAuditTrial_UpdatedTime"),editable:!1,editFieldType:"text"},"UpdatedTime"),(0,R.jsx)(l.bQ.Column,{className:"compColHeight colminWidth",field:"OfficerName",header:a("ViewAuditTrail_OfficerName"),editable:!1,editFieldType:"text"},"OfficerName"),this.state.Attributes.map((e=>(0,R.jsx)(l.bQ.Column,{className:"compColHeight colminWidth",header:a(e.AttributeName),editable:!1,renderer:t})))]})})}),(0,R.jsxs)("div",{className:"row",children:[(0,R.jsx)("div",{className:"col-12 col-sm-6 col-lg-8",children:(0,R.jsx)(o.Button,{className:"backButton",onClick:this.props.handleBack,content:a("Back")})}),(0,R.jsx)("div",{className:"col-12 col-sm-6 col-lg-4",style:{textAlign:"right"},children:(0,R.jsx)(o.Button,{className:"printButton",onClick:this.handlePrint,content:a("ViewEAAuditTrail_PrintAuditTrail")})})]})]})]})})}}const S=(0,A.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})),(e=>({userActions:(0,T.zH)(I,e)})))(P)},15417:(e,t,i)=>{i.d(t,{$7:()=>U,AN:()=>ie,AU:()=>O,Ak:()=>$e,Ao:()=>a,B6:()=>K,C4:()=>Ge,CG:()=>J,Ct:()=>B,Cw:()=>v,EY:()=>L,G$:()=>Ke,G6:()=>qe,GF:()=>Ie,GJ:()=>y,Gj:()=>ce,Gl:()=>re,H9:()=>Ye,HB:()=>He,HP:()=>h,Hr:()=>Le,II:()=>lt,IQ:()=>u,Jr:()=>W,Jx:()=>pe,Ki:()=>te,LP:()=>le,Lv:()=>r,MK:()=>m,MX:()=>ee,Mx:()=>k,N4:()=>we,NH:()=>De,OF:()=>Ze,Ps:()=>f,Q7:()=>Be,QY:()=>G,SF:()=>o,Sq:()=>Se,Sw:()=>se,TQ:()=>z,U7:()=>H,UH:()=>C,UO:()=>oe,V_:()=>xe,Vy:()=>je,W9:()=>ne,WN:()=>p,Wr:()=>l,Ww:()=>q,XP:()=>be,Xk:()=>Y,Yb:()=>Pe,Yy:()=>A,Z2:()=>ye,ZN:()=>g,ZO:()=>Re,Zu:()=>We,_G:()=>Q,_N:()=>c,_u:()=>Ee,ad:()=>de,al:()=>ue,ao:()=>j,bK:()=>$,bN:()=>D,cf:()=>M,dO:()=>Ue,dU:()=>I,dv:()=>s,eE:()=>X,g:()=>S,gG:()=>d,gS:()=>Oe,gT:()=>it,gW:()=>Z,gZ:()=>ze,go:()=>b,gp:()=>V,hq:()=>Me,i6:()=>et,ip:()=>Te,k9:()=>N,kI:()=>R,l4:()=>ve,l5:()=>P,lA:()=>w,lU:()=>Je,mD:()=>Ve,mY:()=>_,mq:()=>n,n$:()=>at,n7:()=>T,nZ:()=>ge,rA:()=>_e,s$:()=>fe,s8:()=>Fe,se:()=>me,tA:()=>he,vK:()=>tt,vs:()=>Ce,w2:()=>Xe,w4:()=>Ne,wT:()=>E,wY:()=>x,wf:()=>Ae,wk:()=>ae,xW:()=>F,yM:()=>Qe,yO:()=>ke});const a="driver",l="carriercompany",r="shareholder",o="baseProduct",s="TRAILER",d="TRAILERCOMPARTMENT",n="terminal",E="customer",c="destination",T="finishedproduct",I="tank",A="marine_vessel",N="marine_trailercompartment",C="supplier",m="vehicle",D="vehicletrailer",p="originterminal",u="bay",R="loadingArm",P="cardreader",S="vehicleprimemover",h="meter",L="SHIPMENT",H="SHIPMENTCOMPARTMENT",O="SHIPMENTDESTINATIONCOMPARTMENT",b="SHIPMENTDETAILS",x="SHIPMENTTRAILERWEIGHBRIDGE",U="SHIPMENTTRAILER",g="SHIPMENTSTATUSTIME",M="MARINEDISPATCH",w="MARINEDISPATCHCOMPARTMENTDETAIL",y="railwagon",v="primemover",_="bcu",G="RAILRECEIPTPLAN",f="RAILRECEIPTWAGONDETAILPLAN",j="RAILUNLOADINGDETAILSFP",V="RAILUNLOADINGDETAILSBP",F="RAILUNLOADINGDETAILSADDITIVE",W="RAILDISPATCHPLAN",$="RAILDISPATCHITEM",Q="RAILDISPATCHSTATUSCHANGE",k="RAILDISPATCHWAGON",B="RAILDISPATCHWAGONDETAILPLAN",Y="RAILDISPATCHWAGONWEIGHBRIDGE",K="RAILDISPATCHWAGONCOMPARTMENT",X="RAILLOADINGDETAILSFP",J="RAILLOADINGDETAILSBP",Z="RAILLOADINGDETAILSADDITIVE",q="marineReceipt",z="UNACCOUNTEDMETERTRANSACTION",ee="UNACCOUNTEDTANKTRANSACTION",te="marineLoadingDetailsFP",ie="marineLoadingDetailsAdditive",ae="marineLoadingDetailsBP",le="marineReceiptCompartmentDetail",re="marineUnloadingDetailsFP",oe="marineUnloadingDetailsBP",se="accessCard",de="LOADINGDETAILSFP",ne="LOADINGDETAILSBP",Ee="LOADINGDETAILSADDITIVE",ce="MARINERECEIPTSTATUSTIME",Te="MARINEDISPATCHSTATUSTIME",Ie="RECEIPT",Ae="UNLOADINGTRANSACTIONS",Ne="ORDER",Ce="ORDERITEM",me="CONTRACT",De="CONTRACT_ITEM",pe="RECEIPTORIGINTERMINALCOMPARTMENT",ue="GeneralTMUser_CAPTAIN",Re="weighbridge",Pe="deu",Se="GeneralTMUser_STAFF",he="GeneralTMUser_VISITOR",Le="PIPELINEHEADER",He="SEALMASTER",Oe="PIPELINERECEIPT",be="ROADSHIPMENTSLOTINFO",xe="ROADRECEIPTSLOTINFO",Ue="MARINESHIPMENTSLOTINFO",ge="MARINERECEIPTSLOTINFO",Me="PIPELINEDISPATCH",we="PIPELINETRANSACTIONS",ye="PIPELINEDISPATCHSTATUSTIME",ve="PIPELINERECEIPTSTATUSTIME",_e="PROCESSCONFIG",Ge="PRODUCTALLOCATIONITEM",fe="HSEINSPECTIONSHIPMENTRIGIDTRUCK",je="HSEINSPECTIONSHIPMENTTRAILER",Ve="HSEINSPECTIONSHIPMENTPRIMEMOVER",Fe="HSEINSPECTIONSHIPMENTNONFILLINGVEHICLE",We="HSEINSPECTIONMARINESHIPMENTBARGE",$e="HSEINSPECTIONMARINESHIPMENTSHIP",Qe="HSEINSPECTIONSHIPMENTRAILWAGON",ke="HSEINSPECTIONSHIPMENTPIPELINE",Be="HSEINSPECTIONRECEIPTRIGIDTRUCK",Ye="HSEINSPECTIONRECEIPTTRAILER",Ke="HSEINSPECTIONRECEIPTPRIMEMOVER",Xe="HSEINSPECTIONRECEIPTNONFILLINGVEHICLE",Je="HSEINSPECTIONMARINERECEIPTBARGE",Ze="HSEINSPECTIONMARINERECEIPTSHIP",qe="HSEINSPECTIONRECEIPTRAILWAGON",ze="HSEINSPECTIONRECEIPTPIPELINE",et="SHAREHOLDERAGREEMENT",tt="COATEMPLATE",it="COAMANAGEMENT",at="COACUSTOMER",lt="COAASSIGNMENT"}}]);
//# sourceMappingURL=8319.8bd0e593.chunk.js.map