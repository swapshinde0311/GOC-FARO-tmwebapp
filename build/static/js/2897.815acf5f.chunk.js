"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[2897,5841,8222],{66554:(e,t,s)=>{s.d(t,{$:()=>d});var l=s(65043),a=s(72711),o=s(67907),i=s(65187),r=s(69062),n=s(70579);function c(e){let{operationsVisibilty:t,breadcrumbItem:s,shareholders:c,selectedShareholder:d,onShareholderChange:h,onDelete:m,onAdd:p,popUpContent:u,shrVisible:x,handleBreadCrumbClick:j,addVisible:C,deleteVisible:v}=e;const[g,S]=(0,l.useState)(!1),[b,D]=(0,l.useState)(!1);function y(){t.add&&(u.length>0?D(!1===b):p())}return(0,n.jsxs)("div",{className:"row",style:{alignItems:"flex-start",padding:"0px"},children:[(0,n.jsx)("div",{className:"col-9 col-sm-9 col-md-9 col-lg-10 col-xl-10",style:{padding:"0px"},children:(0,n.jsxs)("div",{className:"row",style:{marginTop:"10px",alignItems:""},children:[(0,n.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-8",children:(0,n.jsxs)(i.A,{children:[" ",(0,n.jsx)(o.TranslationConsumer,{children:e=>(0,n.jsxs)(a.Breadcrumb,{children:[s.parents.map((t=>(0,n.jsx)(a.Breadcrumb.Item,{onClick:()=>{void 0!==j&&null!==j&&j(t.itemCode,s.parents)},children:e(t.localizedKey)},t.itemCode))),(0,n.jsx)(a.Breadcrumb.Item,{children:e(s.localizedKey)},s.itemCode)]})})]})}),(0,n.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-4",children:(0,n.jsx)(o.TranslationConsumer,{children:e=>(0,n.jsx)("div",{className:"compartmentIcon",style:{justifyContent:"flex-start"},children:!1===x?"":(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:(0,n.jsxs)("h4",{className:"shrText",children:[e("Common_Shareholder"),":"]})}),(0,n.jsx)("div",{className:"opSelect",children:(0,n.jsx)(a.Select,{placeholder:e("Common_Shareholder"),value:d,disabled:!t.shareholder,options:r.Zj(c),onChange:e=>h(e)})})]})})})}),(0,n.jsx)(o.TranslationConsumer,{children:e=>(0,n.jsxs)(a.Modal,{open:g,size:"small",children:[(0,n.jsx)(a.Modal.Content,{children:(0,n.jsx)("div",{children:(0,n.jsx)("b",{children:e("Confirm_Delete")})})}),(0,n.jsxs)(a.Modal.Footer,{children:[(0,n.jsx)(a.Button,{type:"secondary",content:e("Cancel"),onClick:()=>S(!1)}),(0,n.jsx)(a.Button,{type:"primary",content:e("PipelineDispatch_BtnSubmit"),onClick:()=>{S(!1),m()}})]})]})})]})}),(0,n.jsx)("div",{className:"col-3 col-sm-3 col-md-3 col-lg-2 col-xl-2",children:(0,n.jsxs)("div",{style:{float:"right",display:"inline-block",marginTop:"10px"},children:[C?(0,n.jsx)(a.Popup,{position:"bottom right",className:"popup-theme-wrap",element:(0,n.jsx)("div",{className:(t.add?"iconCircle ":"iconCircleDisable ")+"iconblock",onClick:y,children:(0,n.jsx)(a.Icon,{root:"common",name:"badge-plus",size:"small",color:"white"})}),on:"click",open:b,children:(0,n.jsx)("div",{onMouseLeave:()=>D(!1),children:(0,n.jsx)(o.TranslationConsumer,{children:e=>(0,n.jsx)(a.VerticalMenu,{children:(0,n.jsxs)(a.VerticalMenu,{children:[(0,n.jsx)(a.VerticalMenu.Header,{children:e("Common_Create")}),u.map((t=>(0,n.jsx)(a.VerticalMenu.Item,{onClick:()=>{return e=t.fieldName,D(!1),void p(e);var e},children:e(t.fieldValue)})))]})})})})}):"",v?(0,n.jsx)("div",{style:{marginLeft:"10px"},onClick:()=>{t.delete&&S(!0)},className:(t.delete?"iconCircle ":"iconCircleDisable ")+"iconblock",children:(0,n.jsx)(a.Icon,{root:"common",name:"delete",size:"small",color:"white"})}):""]})})]})}c.defaultProps={operationsVisibilty:{add:!1,delete:!1,shareholder:!1},breadcrumbItem:{itemName:"",itemCode:"",localizedKey:"",itemProps:{},parents:[],isComponent:!1},shareholders:[],selectedShareholder:"",popUpContent:[],shrVisible:!0,addVisible:!0,deleteVisible:!0};s(38726);function d(e){let{operationsVisibilty:t,breadcrumbItem:s,shareholders:l,selectedShareholder:a,onShareholderChange:o,onDelete:i,onAdd:r,popUpContent:d,shrVisible:h,handleBreadCrumbClick:m,addVisible:p,deleteVisible:u}=e;return(0,n.jsx)(c,{operationsVisibilty:t,breadcrumbItem:s,shareholders:l,selectedShareholder:a,onShareholderChange:o,onDelete:i,onAdd:r,popUpContent:d,shrVisible:h,handleBreadCrumbClick:m,addVisible:p,deleteVisible:u})}},12897:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var l=s(65043),a=(s(66554),s(7523)),o=s(40854),i=s.n(o),r=s(72067),n=(s(92342),s(97508)),c=(s(63973),s(69062)),d=s(65187),h=s(72711),m=s(67907),p=s(60446),u=s.n(p),x=s(70579);function j(e){let{data:t,selectedDate:s,handleDateChange:l,onSearchChange:a,handleViewBOL:o}=e;return(0,x.jsx)(m.TranslationConsumer,{children:e=>(0,x.jsxs)("div",{className:"detailsContainer mobileContainDetail",children:[(0,x.jsx)("div",{id:"Date mobilePastDate",children:(0,x.jsxs)("div",{className:"slotBlocksDispaly",style:{justifyContent:"center"},children:[(0,x.jsx)("div",{children:(0,x.jsx)(h.Icon,{onClick:()=>l(-1),style:{cursor:"pointer"},root:"common",name:"caret-left",exactSize:24})}),(0,x.jsx)("div",{className:"mobile-slot-date-span",children:(0,x.jsx)("span",{children:s.format("DD MMM YYYY")})}),(0,x.jsx)("div",{children:(0,x.jsx)(h.Icon,{onClick:()=>l(1),style:{cursor:"pointer"},root:"common",name:"caret-right",exactSize:24})})]})}),(0,x.jsx)("div",{className:"mobilePastSearch",children:(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,x.jsx)(h.Input,{style:{border:"none"},className:"input-example mobile-input",placeholder:e("Common_Search"),icon:(0,x.jsx)(h.Icon,{name:"search",root:"common",size:"small"}),onChange:e=>a(e),fluid:!0})})})}),t.length>0?t.map(((t,s)=>(0,x.jsxs)("div",{className:"mobilePastTableHeader",children:[(0,x.jsxs)("div",{className:"row mobilePastHeaderRow",children:[(0,x.jsx)("div",{className:"col-4 col-md-4 col-lg-4",children:e("Common_Code")}),(0,x.jsx)("div",{className:"col-4 col-md-4 col-lg-4",children:e("ViewShipment_Vehicle")}),(0,x.jsx)("div",{className:"col-4 col-md-4 col-lg-4",children:e("ViewShipment_Shareholder")})]}),(0,x.jsxs)("div",{className:"row mobilePastHeaderRowContent",children:[(0,x.jsx)("div",{className:"col-4 col-md-4 col-lg-4",children:t.Code}),(0,x.jsx)("div",{className:"col-4 col-md-4 col-lg-4",children:t.VehicleCode}),(0,x.jsx)("div",{className:"col-4 col-md-4 col-lg-4",children:t.ShareHolder})]}),(0,x.jsxs)("div",{className:"row mobilepastTableBottom",children:[(0,x.jsx)("div",{className:"col-8 col-md-8 col-lg-8 mobile-past-loaded-date",children:e("ShipmentByCompartmentList_LoadedDate")+" : "+u()(t.LoadedDate).format("DD MMM YYYY")}),(0,x.jsxs)("div",{className:"col-4 col-md-4 col-lg-4",children:[(0,x.jsx)(h.Icon,{onClick:()=>o(t.Code,t.ShareHolder),style:{cursor:"pointer"},root:"common",name:"document-standard",exactSize:20})," ",(0,x.jsx)("span",{className:"mobilePastBOLButton",onClick:()=>o(t.Code,t.ShareHolder),children:e("Report_TMBOL")})]})]})]}))):(0,x.jsx)("div",{className:"col-12 col-md-12 col-lg-12",style:{textAlign:"center"},children:e("MarineDashboard_NoDataAvailable")})]})})}var C=s(73571);class v extends l.Component{constructor(){super(...arguments),this.state={data:[],searchList:[],searchText:"",viewBOLCode:"",viewBOLShareholder:"",showReport:!1,selectedDate:u()().set("hour",0).set("minute",0).set("second",0).set("millisecond",0)},this.componentWillUnmount=()=>{},this.getPastShipmentsListForRole=()=>{try{i()(r.GOw,c.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;!0===t.IsSuccess&&this.setState({data:t.EntityResult.Table},(()=>{this.onSearchChange("")}))})).catch((e=>{console.log("Error in getPastShipmentsListForRole API:",e)}))}catch(e){console.log("PastShipmentsComposite:Error occured on getPastShipmentsListForRole",e)}},this.onSearchChange=e=>{try{let t=this.state.data,s=this.state.selectedDate.format("DD MMM YYYY"),l=[];l=""===e?t.filter((e=>u()(e.LoadedDate).format("DD MMM YYYY")===s)):t.filter((t=>u()(t.LoadedDate).format("DD MMM YYYY")===s&&t.Code.toLowerCase().includes(e.toLowerCase()))),this.setState({searchList:l,searchText:e})}catch(t){console.log("PastShipmentsComposite:Error occured on onSearchChange",t)}},this.handleDateChange=e=>{try{let t=this.state.selectedDate;t=t.add(e,"day"),this.setState({selectedDate:t},(()=>{this.onSearchChange(this.state.searchText)}))}catch(t){console.log("error in handleDateChanage",t)}},this.handleViewBOL=(e,t)=>{this.setState({viewBOLCode:e,viewBOLShareholder:t}),void 0===this.reportServiceURI?i()(r.yTV,c.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{e.data.IsSuccess&&(this.reportServiceURI=e.data.EntityResult,this.setState({showReport:!0}))})):this.setState({showReport:!0})},this.handleModalBack=()=>{this.setState({showReport:!1})}}componentDidMount(){try{this.getPastShipmentsListForRole()}catch(e){console.log("PastShipmentsComposite:Error occured on ComponentDidMount",e)}}renderModal(){let e=null;e=this.props.userDetails.EntityResult.IsArchived?"TM/"+a.mD+"/TMBOL":"TM/"+a.PZ+"/TMBOL";let t={Culture:this.props.userDetails.EntityResult.UICulture,Shareholder:this.state.viewBOLShareholder,ShipmentCode:this.state.viewBOLCode};return(0,x.jsx)(C.A,{showReport:this.state.showReport,handleBack:this.handleModalBack,handleModalClose:this.handleModalBack,proxyServerHost:r._Oi,reportServiceHost:this.reportServiceURI,filePath:e,parameters:t})}render(){return(0,x.jsx)(m.TranslationConsumer,{children:e=>(0,x.jsxs)("div",{children:[(0,x.jsx)(d.A,{children:(0,x.jsx)("div",{className:"ui breadcrumb pl-1 mobile-bread-crumb mobile-align-items-start",children:(0,x.jsx)("div",{className:"section pl-1 mt-sm-2 mt-lg-0",children:(0,x.jsx)("span",{children:e("PastShipments")})})})}),(0,x.jsxs)(d.A,{children:[(0,x.jsx)(j,{data:this.state.searchList,selectedDate:this.state.selectedDate,onSearchChange:this.onSearchChange,handleDateChange:this.handleDateChange,handleViewBOL:this.handleViewBOL}),Object.keys(this.state.searchList).length>0?this.renderModal():""]})]})})}}const g=(0,n.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(v)},73571:(e,t,s)=>{s.d(t,{A:()=>p});s(65043);var l=s(72711),a=s(728),o=s(92569),i=s(47766),r=(s(60663),s(7523)),n=s(97508),c=s(70579);function d(e){let{proxyServerHost:t,reportServiceHost:s,parameters:l,filePath:a,...r}=e;const n=t+"api/report",d=(e,t)=>{const s=t.settings.beforeSend;t.settings.beforeSend=function(t){s&&s(t),r.userDetails.EntityResult.IsWebPortalUser||(t.withCredentials=!0),t.URL_DEBUG.indexOf("parameters")>-1&&(t.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var t=e.hostElement;setTimeout((()=>{var e=t.querySelector(".wj-viewer-splitter"),s=t.querySelector(".wj-viewer-tabsleft").querySelectorAll("li")[2];s.disabled||(s.className="hidden",e.click())}),1e3)}})}};let h={Authorization:"Bearer "+r.tokenDetails.tokenInfo};const m=(e,l)=>{i._ReportService.prototype.load=function(e){var l=this,a=new i._Promise;return this._checkReportController(a)?(this.httpRequest(this._getReportInstancesUrl(),{method:"POST",data:e}).then((function(e){var o=i._parseReportExecutionInfo(e.responseText);l._instanceId=o.id,l._status=i._ExecutionStatus.loaded,l._outlinesLocation=o.outlinesLocation,l._statusLocation=o.statusLocation.replace(s,t),l._pageSettingsLocation=o.pageSettingsLocation,l._featuresLocation=o.featuresLocation,l._parametersLocation=o.parametersLocation,a.resolve(o)}),(function(e){a.reject(l._getError(e))})),a):a}};return(0,c.jsx)("div",{children:r.userDetails.EntityResult.IsWebPortalUser?(0,c.jsx)("div",{children:(0,c.jsx)(o.R,{requestHeaders:h,style:{height:"80vh"},parameters:l,serviceUrl:n,filePath:a,initialized:m,beforeSendRequest:d})}):(0,c.jsx)("div",{children:(0,c.jsx)(o.R,{style:{height:"80vh"},parameters:l,serviceUrl:n,filePath:a,initialized:m,beforeSendRequest:d})})})}d.defaultProps={parameters:{}},a.setLicenseKey(r.yQ);const h=(0,n.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(d);var m=s(67907);function p(e){let{proxyServerHost:t,reportServiceHost:s,filePath:a,handleBack:o,showReport:i,handleModalClose:r,parameters:n}=e;const[d]=(0,m.useTranslation)();return(0,c.jsx)(l.Modal,{style:{padding:"0px"},size:"fullscreen",open:i,children:(0,c.jsxs)("div",{children:[(0,c.jsx)(l.Header,{title:d("Header_TerminalManager"),menu:!1}),(0,c.jsx)(h,{proxyServerHost:t,reportServiceHost:s,filePath:a,parameters:n}),(0,c.jsx)("div",{style:{marginTop:"10px",marginLeft:"20px"},children:(0,c.jsx)(l.Button,{className:"backButton",onClick:o,content:d("Report_Back")})})]})})}p.defaultProps={parameters:{}}},38726:()=>{},92342:()=>{}}]);
//# sourceMappingURL=2897.815acf5f.chunk.js.map