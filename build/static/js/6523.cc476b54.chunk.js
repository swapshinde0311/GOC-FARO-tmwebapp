"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[6523],{96523:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var s=a(65043),r=a(72711),i=a(67907),o=a(70579);function n(e){let{coaParameter:t,modCOAParameter:a,validationErrors:s,onFieldChange:n,onActiveStatusChange:l,isEnterpriseNode:c}=e;return(0,o.jsx)(i.TranslationConsumer,{children:e=>(0,o.jsx)("div",{className:"detailsContainer",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,o.jsx)(r.Input,{fluid:!0,value:a.Name,label:e("Common_Name"),indicator:"required",disabled:""!==t.Name,onChange:e=>n("Name",e),error:e(s.Name),reserveSpace:!1})}),(0,o.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,o.jsx)(r.Input,{fluid:!0,value:a.Specification,label:e("COAPara_Specification"),onChange:e=>n("Specification",e),error:e(s.Specification),reserveSpace:!1})}),(0,o.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,o.jsx)(r.Input,{fluid:!0,value:a.Method,onChange:e=>n("Method",e),label:e("COAPara_Method"),error:e(s.Method),reserveSpace:!1})}),(0,o.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,o.jsx)(r.Input,{fluid:!0,value:a.Description,onChange:e=>n("Description",e),label:e("COAParameter_Description"),error:e(s.Description),reserveSpace:!1})}),(0,o.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,o.jsx)(r.Select,{fluid:!0,placeholder:e("FinishedProductInfo_Select"),label:e("COAParameter_IsActive"),value:a.IsActive,options:[{text:e("ViewShipment_Ok"),value:!0},{text:e("ViewShipmentStatus_Inactive"),value:!1}],onChange:e=>l(e)})}),(0,o.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,o.jsx)(r.Input,{fluid:!0,value:null===a.Remarks?"":a.Remarks,label:e("COAParameter_Remarks"),onChange:e=>n("Remarks",e),indicator:a.IsActive!==t.IsActive?"required":"",error:e(s.Remarks),reserveSpace:!1})})]})})})}n.defaultProps={isEnterpriseNode:!1};var l=a(9256),c=a(44192),d=a(69062),m=a(46100),h=a(40854),u=a.n(h),p=a(72067),v=(a(7523),a(97508)),C=(a(38726),a(65187)),A=a(43503),P=a(93779),g=a(80312),y=a(53536),D=a.n(y),E=a(40252),S=a(62900);a(11981);class O extends s.Component{constructor(){super(...arguments),this.state={coaParameter:D().cloneDeep(m.HK),modCOAParameter:{},validationErrors:d.Th(c.f1),isReadyToRender:!1,saveEnabled:!1,showAuthenticationLayout:!1,tempCOAParameter:{}},this.handleChange=(e,t)=>{try{const a=D().cloneDeep(this.state.modCOAParameter),s=D().cloneDeep(this.state.validationErrors);a[e]=t,this.setState({modCOAParameter:a}),void 0!==c.f1[e]&&(s[e]=d.jr(c.f1[e],t),this.setState({validationErrors:s}))}catch(a){console.log("COAParameterDetailsComposite:Error occured on handleChange",a)}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})},this.saveCOAParameter=()=>{try{this.setState({saveEnabled:!1});let e=D().cloneDeep(this.state.tempCOAParameter);""===this.state.coaParameter.Name?this.createCOAParameter(e):this.updateCOAParameter(e)}catch(e){console.log("COAParameterDetailsComposite : Error in saveCOAParameter")}},this.handleSave=()=>{try{let e=D().cloneDeep(this.state.modCOAParameter);if(this.validateSave()){let t=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,a=D().cloneDeep(e);this.setState({showAuthenticationLayout:t,tempCOAParameter:a},(()=>{!1===t&&this.saveCOAParameter()}))}else this.setState({saveEnabled:!0})}catch(e){console.log("COAParameterDetailsComposite:Error occured on handleSave",e)}},this.handleReset=()=>{try{const e={...this.state.validationErrors},t=D().cloneDeep(this.state.coaParameter);D().cloneDeep(this.state.coaParameter);Object.keys(e).forEach((function(t){e[t]=""})),this.setState({modCOAParameter:{...t},validationErrors:e})}catch(e){console.log("COAParameterDetailsComposite:Error occured on handleReset",e)}},this.handleActiveStatusChange=e=>{try{let t=D().cloneDeep(this.state.modCOAParameter);t.IsActive=e,t.IsActive!==this.state.coaParameter.IsActive&&(t.Remarks=""),this.setState({modCOAParameter:t})}catch(t){console.log(t)}}}componentWillReceiveProps(e){try{""!==this.state.coaParameter.Name&&void 0===e.selectedRow.Common_Name&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo&&this.getCOAParameter(e.selectedRow)}catch(t){console.log("COAParameterDetailsComposite:Error occured on componentWillReceiveProps",t)}}componentDidMount(){try{d.pJ(this.props.userDetails.EntityResult.IsArchived),this.getCOAParameter(this.props.selectedRow)}catch(e){console.log("COAParameterDetailsComposite:Error occured on componentDidMount",e)}}getCOAParameter(e){if(void 0!==e.Common_Name){var t=[{key:P.QZ,value:e.Common_Name}],a={keyDataCode:P.QZ,KeyCodes:t};u()(p.DeG,d.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({isReadyToRender:!0,coaParameter:D().cloneDeep(t.EntityResult),modCOAParameter:D().cloneDeep(t.EntityResult),saveEnabled:d.ab(this.props.userDetails.EntityResult.FunctionsList,g.i.modify,g.$V)}):(this.setState({coaParameter:D().cloneDeep(m.HK),modCOAParameter:D().cloneDeep(m.HK),isReadyToRender:!0},(()=>{})),console.log("Error in getCOAParameter:",t.ErrorList))})).catch((t=>{console.log("Error while getting coaParameter:",t,e)}))}else this.setState({coaParameter:D().cloneDeep(m.HK),modCOAParameter:D().cloneDeep(m.HK),isReadyToRender:!0,saveEnabled:d.ab(this.props.userDetails.EntityResult.FunctionsList,g.i.add,g.$V)})}validateSave(){const{modCOAParameter:e}=this.state;var t=D().cloneDeep(this.state.validationErrors);Object.keys(c.f1).forEach((function(a){t[a]=d.jr(c.f1[a],e[a])})),e.IsActive!==this.state.coaParameter.IsActive&&(null!==e.Remarks&&""!==e.Remarks||(t.Remarks="COA_RemarksRequired")),this.setState({validationErrors:t});var a=!0;return a&&(a=Object.values(t).every((function(e){return""===e}))),a}createCOAParameter(e){var t=[{key:P.QZ,value:""}],a={keyDataCode:P.QZ,KeyCodes:t,Entity:e},s={messageType:"critical",message:"COAParameterDetails_SavedStatus",messageResultDetails:[{keyFields:["COAParameter_Name"],keyValues:[e.Name],isSuccess:!1,errorMessage:""}]};u()(p.n$I,d.tW(a,this.props.tokenDetails.tokenInfo)).then((t=>{var a=t.data;s.messageType=a.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=a.IsSuccess,!0===a.IsSuccess?this.setState({saveEnabled:d.ab(this.props.userDetails.EntityResult.FunctionsList,g.i.modify,g.$V),showAuthenticationLayout:!1},(()=>this.getCOAParameter({Common_Name:e.Name}))):(s.messageResultDetails[0].errorMessage=a.ErrorList[0],this.setState({saveEnabled:d.ab(this.props.userDetails.EntityResult.FunctionsList,g.i.add,g.$V),showAuthenticationLayout:!1}),console.log("Error in createCOAParameter:",a.ErrorList)),this.props.onSaved(e,"add",s)})).catch((t=>{this.setState({saveEnabled:d.ab(this.props.userDetails.EntityResult.FunctionsList,g.i.add,g.$V),showAuthenticationLayout:!1}),s.messageResultDetails[0].errorMessage=t,this.props.onSaved(e,"add",s)}))}updateCOAParameter(e){let t=[{key:P.QZ,value:e.Name}],a={keyDataCode:P.QZ,KeyCodes:t,Entity:e},s={messageType:"critical",message:"COAParameterDetails_SavedStatus",messageResultDetails:[{keyFields:["COAParameter_Name"],keyValues:[e.Name],isSuccess:!1,errorMessage:""}]};u()(p.wRE,d.tW(a,this.props.tokenDetails.tokenInfo)).then((t=>{var a=t.data;s.messageType=a.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=a.IsSuccess,!0===a.IsSuccess?this.setState({saveEnabled:d.ab(this.props.userDetails.EntityResult.FunctionsList,g.i.modify,g.$V),showAuthenticationLayout:!1},(()=>this.getCOAParameter({Common_Name:e.Name}))):(s.messageResultDetails[0].errorMessage=a.ErrorList[0],this.setState({saveEnabled:d.ab(this.props.userDetails.EntityResult.FunctionsList,g.i.modify,g.$V),showAuthenticationLayout:!1}),console.log("Error in updateCOAParameter:",a.ErrorList)),this.props.onSaved(e,"update",s)})).catch((t=>{s.messageResultDetails[0].errorMessage=t,this.props.onSaved(e,"modify",s),this.setState({saveEnabled:d.ab(this.props.userDetails.EntityResult.FunctionsList,g.i.modify,g.$V),showAuthenticationLayout:!1})}))}render(){const e=[{fieldName:"COAParameter_LastUpDt",fieldValue:new Date(this.state.modCOAParameter.LastUpdatedTime).toLocaleDateString()+" "+new Date(this.state.modCOAParameter.LastUpdatedTime).toLocaleTimeString()},{fieldName:"COAParameter_LastUpdatedBy",fieldValue:this.state.modCOAParameter.LastUpdatedUser}];return this.state.isReadyToRender?(0,o.jsxs)("div",{children:[(0,o.jsx)(C.A,{children:(0,o.jsx)(A.A,{entityCode:this.state.coaParameter.Name,newEntityName:"COAParameter_Title",popUpContents:e})}),(0,o.jsx)(C.A,{children:(0,o.jsx)(n,{coaParameter:this.state.coaParameter,modCOAParameter:this.state.modCOAParameter,genericProps:this.props.genericProps,validationErrors:this.state.validationErrors,onFieldChange:this.handleChange,onActiveStatusChange:this.handleActiveStatusChange,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode})}),(0,o.jsx)(C.A,{children:(0,o.jsx)(l.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.showAuthenticationLayout?(0,o.jsx)(S.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.coaParameter.Name?g.i.add:g.i.modify,functionGroup:g.$V,handleOperation:this.saveCOAParameter,handleClose:this.handleAuthenticationClose}):null]}):(0,o.jsx)(E.A,{message:"Loading"})}}const f=(0,v.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(O)},43503:(e,t,a)=>{a.d(t,{A:()=>n});a(65043);var s=a(67907),r=a(72711),i=a(70579);function o(e){let{entityCode:t,newEntityName:a,popUpContents:o}=e;return(0,i.jsx)(s.TranslationConsumer,{children:e=>(0,i.jsx)("div",{className:"headerContainer",children:(0,i.jsxs)("div",{className:"row headerSpacing",children:[(0,i.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,i.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(a):t})}),""!==t&&void 0!==t&&o.length>0?(0,i.jsx)("div",{className:"headerItemRight",children:(0,i.jsx)(r.Popup,{element:(0,i.jsxs)("div",{children:[e(o[0].fieldName)+" ",":"," "+o[0].fieldValue,(0,i.jsx)(r.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,i.jsx)(r.List,{className:"detailsHeaderPopUp",children:o.map((t=>(0,i.jsxs)(r.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}o.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const n=o},9256:(e,t,a)=>{a.d(t,{q:()=>o});a(65043);var s=a(72711),r=a(67907),i=a(70579);function o(e){let{handleBack:t,handleSave:a,handleReset:o,saveEnabled:n}=e;return(0,i.jsx)(r.TranslationConsumer,{children:e=>(0,i.jsxs)("div",{className:"row userActionPosition",children:[(0,i.jsx)("div",{className:"col-12 col-md-3 col-lg-4",children:(0,i.jsx)(s.Button,{className:"backButton",onClick:t,content:e("Back")})}),(0,i.jsx)("div",{className:"col-12 col-md-9 col-lg-8",children:(0,i.jsxs)("div",{style:{float:"right"},children:[(0,i.jsx)(s.Button,{content:e("LookUpData_btnReset"),className:"cancelButton",onClick:o}),(0,i.jsx)(s.Button,{content:e("Save"),disabled:!n,onClick:a})]})})]})})}o.defaultProps={saveEnabled:!1}}}]);
//# sourceMappingURL=6523.cc476b54.chunk.js.map