"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[8754,9158,6001,6777,8382,735,3116,4629,3920,3235,5973,8354],{40510:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(65043),i=a(80297),s=a(65187),o=a(67907),l=a(70579);function n(e){let{KPIList:t,pageName:a,rowHeight:n,widgetHeight:d,isDraggable:c,isResizable:u,kpiDisplayTopBreakpoint:h}=e;const[m,p]=(0,r.useState)(1),C=r.useRef(null),T=()=>{let e=window.pageYOffset,t=m;if(C.current&&C.current.getBoundingClientRect().top<h)t=0;else{if(0!==e)return;t=1}p(t)};return(0,r.useEffect)((()=>{"undefined"!==typeof window&&window.addEventListener("scroll",T)})),(0,r.useEffect)((()=>()=>{window.removeEventListener("scroll",T)}),[]),(0,l.jsx)("div",{ref:C,children:1===m?(0,l.jsx)(o.TranslationConsumer,{children:e=>(0,l.jsx)("div",{style:{marginTop:"6px"},children:(0,l.jsx)(s.A,{children:(0,l.jsx)(i.A,{kpiList:t,isDraggable:c,isResizable:u,rowHeight:n,widgetHeight:d,pageName:a})})})}):""})}n.defaultProps={kpiDisplayTopBreakpoint:100}},48754:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var r=a(65043),i=a(69062),s=a(44192),o=a(9256),l=a(93779),n=a(7523),d=a(72067),c=a(15417),u=a(97508),h=a(40854),m=a.n(h),p=a(80312),C=a(46100),T=a(65187),g=a(43503),E=a(72711),I=a(78374),A=a(24904),D=a(67907),S=a(85800),b=a(35861),y=a(70579);function L(e){let{trailer:t,modTrailer:a,validationErrors:r,attributeValidationErrors:s,listOptions:o,onFieldChange:l,onDateTextChange:d,onAllTerminalsChange:c,selectedCompRow:u,modAttributeMetaDataList:h,expandedRows:m,handleRowSelectionChange:p,handleCellDataEdit:C,onAttributeDataChange:g,handleCompAttributeCellDataEdit:L,handleAddCompartment:f,handleDeleteCompartment:v,isEnterpriseNode:N,toggleExpand:R,compartmentDetailsPageSize:x,onCarrierSearchChange:O,hazardousEnabled:M}=e;const[w]=(0,D.useTranslation)(),j=(e,t)=>{let a=[];return a=e.find((e=>e.TerminalCode===t)),a.attributeValidationErrors},P=e=>{const t=e.rowData,a=e=>{var t=e.split("-");return new Date(t[0],t[1]-1,t[2])},r=(e,t)=>{var a=new Date(t);t=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2),L(e,t)};try{return t.DataType.toLowerCase()===n.pe.STRING.toLowerCase()||t.DataType.toLowerCase()===n.pe.INT.toLowerCase()?(0,y.jsx)(E.Input,{fluid:!0,value:t.AttributeValue,disabled:t.IsReadonly,onChange:t=>L(e,t),reserveSpace:!1}):t.DataType.toLowerCase()===n.pe.FLOAT.toLowerCase()||t.DataType.toLowerCase()===n.pe.LONG.toLowerCase()||t.DataType.toLowerCase()===n.pe.DOUBLE.toLowerCase()?(0,y.jsx)(E.Input,{fluid:!0,value:null===t.AttributeValue||void 0===t.AttributeValue||""===t.AttributeValue?"":t.AttributeValue.toLocaleString(),disabled:t.IsReadonly,onChange:t=>L(e,t),reserveSpace:!1}):t.DataType.toLowerCase()===n.pe.BOOL.toLowerCase()?(0,y.jsx)(E.Checkbox,{checked:"true"===t.AttributeValue.toString().toLowerCase(),disabled:t.IsReadonly,onChange:t=>L(e,t)}):t.DataType.toLowerCase()===n.pe.DATETIME.toLowerCase()?(0,y.jsx)(E.DatePicker,{fluid:!0,value:null===t.AttributeValue||void 0===t.AttributeValue||""===t.AttributeValue?"":a(t.AttributeValue),disabled:t.IsReadonly,showYearSelector:"true",onChange:t=>r(e,t),onTextChange:t=>{r(e,t)},reserveSpace:!1}):null}catch(i){console.log("TrailerDetails:Error occured on handleAttributeType",i)}},U=e=>e.rowData.IsMandatory?(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{children:e.rowData.AttributeName}),(0,y.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]}):(0,y.jsx)("div",{children:(0,y.jsx)("span",{children:e.rowData.AttributeName})});const k=e=>{let t=a.Compartments[e.rowIndex][e.field];return"Capacity"===e.field&&null!==t&&""!==t&&(t=t.toLocaleString()),(0,y.jsx)(E.Input,{fluid:!0,value:t,onChange:t=>C(t,e),reserveSpace:!1,disabled:"Code"===e.field})};return(0,y.jsxs)("div",{className:"detailsContainer",children:[(0,y.jsxs)("div",{className:"row",children:[(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(E.Input,{fluid:!0,value:a.Code,label:w("Trailer_Code"),indicator:"required",disabled:""!==t.Code,onChange:e=>l("Code",e),error:w(r.Code),reserveSpace:!1})}),(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(E.Input,{fluid:!0,value:a.Name,label:w("TrailerList_Name"),indicator:"required",onChange:e=>l("Name",e),error:w(r.Name),reserveSpace:!1})}),(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(E.Input,{fluid:!0,value:null===a.Description?"":a.Description,label:w("Trailer_Desc"),onChange:e=>l("Description",e),error:w(r.Description),reserveSpace:!1})}),(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(E.Select,{fluid:!0,placeholder:w("Common_Select"),label:w("TrailerList_Carrier"),value:null===a.CarrierCompanyCode?"":a.CarrierCompanyCode,options:o.carriers,onChange:e=>{l("CarrierCompanyCode",e)},indicator:"required",error:w(r.CarrierCompanyCode),reserveSpace:!1,disabled:""!==t.Code,search:!0,noResultsMessage:w("noResultsMessage"),onSearch:O})}),(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(E.Select,{fluid:!0,placeholder:w("Common_Select"),label:w("Trailer_ProductType"),value:a.ProductType,options:o.productType,onChange:e=>{l("ProductType",e)},indicator:"required",error:w(r.ProductType),reserveSpace:!1,search:!0,noResultsMessage:w("noResultsMessage")})}),(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(E.Select,{fluid:!0,placeholder:w("Common_Select"),label:w("Trailer_LoadingType"),value:a.LoadingType,options:o.loadingType,onChange:e=>{l("LoadingType",e)},indicator:"required",error:w(r.LoadingType),reserveSpace:!1,search:!0,noResultsMessage:w("noResultsMessage")})}),(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(E.Input,{fluid:!0,value:null===a.TareWeight?"":a.TareWeight.toLocaleString(),label:w("Trailer_Tareweight"),indicator:"required",onChange:e=>l("TareWeight",e),error:w(r.TareWeight),reserveSpace:!1})}),(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(E.Input,{fluid:!0,value:null===a.MaxLoadableWeight_UI?"":a.MaxLoadableWeight_UI.toLocaleString(),label:w("Trailer_MaxLoadWeight"),indicator:"required",onChange:e=>l("MaxLoadableWeight_UI",e),error:w(r.MaxLoadableWeight_UI),reserveSpace:!1})}),(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(E.Select,{fluid:!0,placeholder:w("Common_Select"),label:w("Trailer_WeightUOM"),value:a.WeightUOM,options:o.unitOfWeight,onChange:e=>{l("WeightUOM",e)},indicator:"required",error:w(r.WeightUOM),reserveSpace:!1,search:!0,noResultsMessage:w("noResultsMessage")})}),(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(E.Input,{fluid:!0,value:null===a.Height?"":a.Height.toLocaleString(),label:w("Trailer_height"),onChange:e=>l("Height",e),error:w(r.Height),reserveSpace:!1})}),(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(E.Input,{fluid:!0,value:null===a.Width?"":a.Width.toLocaleString(),label:w("Trailer_Width"),onChange:e=>l("Width",e),error:w(r.Width),reserveSpace:!1})}),(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(E.Input,{fluid:!0,value:null===a.Length?"":a.Length.toLocaleString(),label:w("Trailer_Length"),onChange:e=>l("Length",e),error:w(r.Length),reserveSpace:!1})}),(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(E.Select,{fluid:!0,placeholder:w("Common_Select"),label:w("Trailer_UOMDimemsion"),value:a.LWHUOM,options:(0,b.r4)(o.unitOfDimension,w("Common_Select")),onChange:e=>{l("LWHUOM",e)},error:w(r.LWHUOM),reserveSpace:!1,search:!0,noResultsMessage:w("noResultsMessage")})}),(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(E.Input,{fluid:!0,value:null===a.MaxLoadableVolume?"":a.MaxLoadableVolume.toLocaleString(),label:w("Trailer_MaxLoadVolume"),onChange:e=>l("MaxLoadableVolume",e),error:w(r.MaxLoadableVolume),reserveSpace:!1,disabled:!0})}),(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(E.Select,{fluid:!0,placeholder:w("Common_Select"),label:w("Trailer_VolumeUOM"),value:a.VolumeUOM,options:o.unitOfVolume,onChange:e=>{l("VolumeUOM",e)},error:w(r.VolumeUOM),reserveSpace:!1,disabled:!0})}),M?(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,y.jsx)("div",{style:{width:"48%"},children:(0,y.jsx)(E.Select,{fluid:!0,placeholder:w("Common_Select"),label:w("FP_HazardousCategory"),value:null===a.HazardousCategory?"":a.HazardousCategory,options:(0,b.r4)(o.hazardousTankerCategoryOptions,w("Common_Select")),onChange:e=>l("HazardousCategory",e),reserveSpace:!1,search:!0,noResultsMessage:w("noResultsMessage"),error:w(r.HazardousCategory)})}),(0,y.jsx)("div",{style:{width:"48%"},children:(0,y.jsx)(E.DatePicker,{fluid:!0,value:null===a.HazardousLicenseExpiry?"":(0,i.OL)(a.HazardousLicenseExpiry),displayFormat:(0,b.F1)(),label:w("DriverInfo_HazardousLicExpiry"),disablePast:!0,showYearSelector:"true",onChange:e=>l("HazardousLicenseExpiry",e),onTextChange:(e,t)=>{d("HazardousLicenseExpiry",e,t)},error:w(r.HazardousLicenseExpiry),reserveSpace:!1})})]})}):"",(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(E.Select,{fluid:!0,placeholder:w("Common_Select"),label:w("Trailer_Status"),value:a.Active,options:[{text:w("ViewShipment_Ok"),value:!0},{text:w("ViewShipmentStatus_Inactive"),value:!1}],onChange:e=>l("Active",e)})}),(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(E.Input,{fluid:!0,value:null===a.Remarks?"":a.Remarks,label:w("Trailer_Remarks"),onChange:e=>l("Remarks",e),indicator:a.Active!==t.Active?"required":"",error:w(r.Remarks),reserveSpace:!1})}),N?(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(A.y,{terminalList:o.terminalCodes,selectedTerminal:a.TerminalCodes,error:w(r.TerminalCodes),onFieldChange:l,onCheckChange:c})}):""]}),h.length>0?h.map((e=>(0,y.jsx)(T.A,{children:(0,y.jsx)(E.Accordion,{children:(0,y.jsx)(E.Accordion.Content,{className:"attributeAccordian",title:N?e.TerminalCode+" - "+w("Attributes_Header"):w("Attributes_Header"),children:(0,y.jsx)(S.n,{selectedAttributeList:e.attributeMetaDataList,handleCellDataEdit:g,attributeValidationErrors:j(s,e.TerminalCode)})})})}))):null,(0,y.jsxs)("div",{className:"row compartmentRow",children:[(0,y.jsx)("div",{className:"col col-md-8 col-lg-9 col col-xl-9",children:(0,y.jsx)("h4",{children:w("Trailer_CompartmentInfo")})}),(0,y.jsx)("div",{className:"col col-md-4 col-lg-3 col-xl-3",children:(0,y.jsxs)("div",{className:"compartmentIconContainer",children:[(0,y.jsxs)("div",{onClick:f,className:"compartmentIcon",children:[(0,y.jsx)("div",{children:(0,y.jsx)(E.Icon,{root:"common",name:"badge-plus",size:"medium"})}),(0,y.jsx)("div",{className:"margin_l10",children:(0,y.jsx)("h5",{className:"font14",children:w("TrailerInfo_Add")})})]}),(0,y.jsxs)("div",{onClick:v,className:"compartmentIcon margin_l30",children:[(0,y.jsx)("div",{children:(0,y.jsx)(E.Icon,{root:"common",name:"delete",size:"medium"})}),(0,y.jsx)("div",{className:"margin_l10",children:(0,y.jsx)("h5",{className:"font14",children:w("TrailerInfo_Delete")})})]})]})})]}),(0,y.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,y.jsx)("div",{className:"col-12 detailsTable havingchildTable",children:(0,y.jsxs)(I.bQ,{data:a.Compartments,rowExpansionTemplate:function(e){return Array.isArray(e.AttributesforUI)&&e.AttributesforUI.length>0?(0,y.jsx)("div",{className:"childTable ChildGridViewAllShipmentLoadingDetails",children:(0,y.jsxs)(I.bQ,{data:e.AttributesforUI,rows:x,children:[N?(0,y.jsx)(I.bQ.Column,{className:"compColHeight",field:"TerminalCode",header:w("CompartmentTerminal"),editable:!1},"TerminalCode"):"",(0,y.jsx)(I.bQ.Column,{className:"compColHeight",header:w("CompartmentAttributeName"),renderer:U,editable:!1},"AttributeName"),(0,y.jsx)(I.bQ.Column,{className:"compColHeight",header:w("CompartmentAttributeValue"),renderer:P}),Array.isArray(e.AttributesforUI)&&e.AttributesforUI.length>x?(0,y.jsx)(I.bQ.Pagination,{}):""]})}):(0,y.jsx)("div",{className:"compartmentIcon",children:(0,y.jsx)("div",{className:"gridButtonAlignLeft",children:w("CustomerInventory_NoRecordsFound")})})},expandedRows:m,scrollable:!0,scrollHeight:"320px",selectionMode:"multiple",selection:u,onSelectionChange:p,children:[(0,y.jsx)(I.bQ.Column,{className:"compColHeight disabledColumn colminWidth",field:"Code",header:w("Trailer_CompCode"),editFieldType:"text"},"Code"),(0,y.jsx)(I.bQ.Column,{className:"compColHeight colminWidth",field:"Description",header:w("Trailer_Desc"),editable:!0,editFieldType:"text",customEditRenderer:k},"Description"),(0,y.jsx)(I.bQ.Column,{className:"compColHeight colminWidth",field:"Capacity",header:(0,b.i7)(w("Trailer_CompCapacity")),editable:!0,editFieldType:"text",renderer:e=>null===e.value?"":e.value.toLocaleString(),customEditRenderer:k},"Capacity"),(0,y.jsx)(I.bQ.Column,{className:"compColHeight colminWidth",field:"UOM",header:(0,b.i7)(w("Trailer_UOM")),editable:!0,editFieldType:"text",customEditRenderer:e=>{let t=[...o.unitOfVolume,...o.unitOfWeight];return(0,y.jsx)(E.Select,{className:"selectDropwdown",placeholder:w("Common_Select"),value:a.Compartments[e.rowIndex][e.field],fluid:!0,options:t,onChange:t=>C(t,e),indicator:"required",reserveSpace:!1,search:!0,noResultsMessage:w("noResultsMessage")})}},"UOM"),(0,y.jsx)(I.bQ.Column,{className:"expandedColumn",initialWidth:"200px",renderer:e=>{const t=m.findIndex((t=>t.CompartmentSeqNoInTrailer===e.rowData.CompartmentSeqNoInTrailer))>=0;return(0,y.jsxs)("div",{onClick:()=>R(e.rowData,t),className:"compartmentIcon gridButtonFontColor",children:[(0,y.jsx)("span",{children:w(t?"Hide_Attributes":"View_Attributes")}),(0,y.jsx)(E.Icon,{root:"common",name:t?"caret-up":"caret-down",className:"margin_l10"})]})}})]})})})]})}L.defaultProps={listOptions:{carriers:[],productType:[],loadingType:[],unitOfWeight:[],unitOfVolume:[],unitOfDimension:[],terminalCodes:[],hazardousTankerCategoryOptions:[]},isEnterpriseNode:!1,hazardousEnabled:!1};var f=a(53536),v=a.n(f),N=a(28882),R=a(40252),x=a(40510),O=a(39424),M=a(97105),w=a(62900);class j extends r.Component{constructor(){var e;super(...arguments),e=this,this.state={trailer:{},modTrailer:{},validationErrors:i.Th(s.kI),isReadyToRender:!1,carrierOptions:[],carrierSearchOptions:[],terminalOptions:[],lengthUOMOptions:[],volumeUOMOptions:[],weightUOMOptions:[],productTypeOptions:[],loadingTypeOptions:[],attributeMetaDataList:[],compartmentAttributeMetaDataList:[],modAttributeMetaDataList:[],attributeValidationErrors:[],saveEnabled:!1,selectedCompRow:[],expandedRows:[],trailerKPIList:[],hazardousEnabled:!1,hazardousTankerCategoryOptions:[],maxNumberOfCompartments:12,showAuthenticationLayout:!1,tempTrailer:{}},this.toggleExpand=function(t,a){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.state.expandedRows,s=i.findIndex((e=>e.CompartmentSeqNoInTrailer===t.CompartmentSeqNoInTrailer));a?r&&s>=0?(i.splice(s,1),i.push(t)):s>=0&&i.splice(s,1):s>=0?i=i.filter((e=>e.Code!==t.Code&&e.CompartmentSeqNoInTrailer!==t.CompartmentSeqNoInTrailer)):i.push(t),e.setState({expandedRows:i})},this.handleCarrierSearchChange=e=>{try{let t=this.state.carrierOptions.filter((t=>t.value.toLowerCase().includes(e.toLowerCase())));t.length>n.bM&&(t=t.slice(0,n.bM)),this.setState({carrierSearchOptions:t})}catch(t){console.log("TrailerDetailsComposite:Error occured on handleCarrierSearchChange",t)}},this.handleChange=(e,t)=>{try{let a={...this.state.modTrailer};"CarrierCompanyCode"===e&&this.handleCarrierChange(t),a[e]=t;const r={...this.state.validationErrors};a.Active===this.state.trailer.Active&&(this.state.trailer.Remarks!==a.Remarks&&""!==a.Remarks||(r.Remarks=""),""===a.Remarks&&(a.Remarks=this.state.trailer.Remarks)),"Active"===e&&a.Active!==this.state.trailer.Active&&(a.Remarks=""),void 0!==s.kI[e]&&(r[e]=i.jr(s.kI[e],t)),this.setState({validationErrors:r,modTrailer:a},(()=>{"TerminalCodes"===e&&this.terminalSelectionChange(t)}))}catch(a){console.log("TrailerDetailsComposite:Error occured on handleChange",a)}},this.handleRowSelectionChange=e=>{this.setState({selectedCompRow:e})},this.handleCellDataEdit=(e,t)=>{let a=v().cloneDeep(this.state.modTrailer);"Description"===t.field&&(a.Compartments[t.rowIndex][t.field]=e),"Capacity"===t.field&&(isNaN(parseFloat(e))&&(e=""),a.Compartments[t.rowIndex][t.field]=e),"UOM"===t.field&&a.Compartments.forEach((t=>{t.UOM=e})),this.toggleExpand(a.Compartments[t.rowIndex],!0,!0),this.setState({modTrailer:a})},this.handleAttributeDataChange=(e,t)=>{try{let a=[],r=v().cloneDeep(this.state.modAttributeMetaDataList),s=r.filter((t=>t.TerminalCode===e.TerminalCode));s.length>0&&Array.isArray(s[0].attributeMetaDataList)&&(a=s[0].attributeMetaDataList.filter((t=>t.Code===e.Code))),a.length>0&&(a[0].DefaultValue=t);const o=v().cloneDeep(this.state.attributeValidationErrors);o.forEach((a=>{a.TerminalCode===e.TerminalCode&&(a.attributeValidationErrors[e.Code]=i.I5(e,t))})),this.setState({modAttributeMetaDataList:r,attributeValidationErrors:o})}catch(a){console.log("TrailerDetailsComposite:Error occured on handleAttributeDataChange",a)}},this.handleCompAttributeCellDataEdit=(e,t)=>{let a=v().cloneDeep(this.state.modTrailer),r=a.Compartments.findIndex((t=>t.CompartmentSeqNoInTrailer===e.rowData.compSequenceNo));r>=0&&(a.Compartments[r].AttributesforUI[e.rowData.SeqNumber-1].AttributeValue=t),this.setState({modTrailer:a}),r>=0&&this.toggleExpand(a.Compartments[r],!0,!0)},this.handleAllTerminalsChange=e=>{try{let t=v().cloneDeep(this.state.modTrailer),a=[...this.state.terminalOptions];t.TerminalCodes=e?a:[],this.setState({modTrailer:t},(()=>this.terminalSelectionChange(t.TerminalCodes)))}catch(t){console.log("TrailerDetailsComposite:Error occured on handleAllTerminalsChange",t)}},this.handleAddCompartment=()=>{if(!this.props.userDetails.EntityResult.IsArchived)try{let e={Attributes:[],Capacity:null,Code:null,CompartmentSeqNoInTrailer:0,TrailerCode:null,ShareholderCode:null,CarrierCompanyCode:null,Description:"",FRUOM:null,FlangeNo:null,MaxFR:null,Name:"",NoofSeals:null,UOM:null},t=v().cloneDeep(this.state.modTrailer);if(null!==t.Compartments){t.Compartments.length>0&&(e.UOM=t.Compartments[0].UOM);let a=1;t.Compartments.forEach((e=>{e.CompartmentSeqNoInTrailer=a,++a})),e.CompartmentSeqNoInTrailer=t.Compartments.length+1,t.Compartments.push(e)}this.setState({modTrailer:t,selectedCompRow:[]},(()=>{if(!1===this.props.userDetails.EntityResult.IsEnterpriseNode){var e=v().cloneDeep(this.state.compartmentAttributeMetaDataList);e.length>0&&this.formCompartmentAttributes([e[0].TerminalCode])}else this.formCompartmentAttributes(t.TerminalCodes)}))}catch(e){console.log("TrailerDetailsComposite:Error occured on handleAddCompartment",e)}},this.handleDeleteCompartment=()=>{if(!this.props.userDetails.EntityResult.IsArchived)try{if(null!=this.state.selectedCompRow&&this.state.selectedCompRow.length>0&&this.state.modTrailer.Compartments.length>0){let e=v().cloneDeep(this.state.modTrailer);this.state.selectedCompRow.forEach(((t,a)=>{e.Compartments=e.Compartments.filter(((e,a)=>e.CompartmentSeqNoInTrailer!==t.CompartmentSeqNoInTrailer))}));let t=1;e.Compartments.forEach((e=>{e.CompartmentSeqNoInTrailer=t,++t})),this.setState({modTrailer:e})}this.setState({selectedCompRow:[]})}catch(e){console.log("TrailerDetailsComposite:Error occured on handleDeleteCompartment",e)}},this.handleCarrierChange=e=>{if(this.props.userDetails.EntityResult.IsEnterpriseNode)this.getTerminalsForCarrier(e);else{var t=v().cloneDeep(this.state.modTrailer);t.CarrierCompanyCode=e;t.TerminalCodes=[],this.setState({terminalCodes:[],modTrailer:t})}if(void 0!==s.kI.CarrierCompanyCode){const t={...this.state.validationErrors};t.CarrierCompanyCode=i.jr(s.kI.CarrierCompanyCode,e),this.setState({validationErrors:t})}},this.saveTrailer=()=>{try{this.setState({saveEnabled:!1});let e=v().cloneDeep(this.state.tempTrailer);""===this.state.trailer.Code?this.createTrailer(e):this.updateTrailer(e)}catch(e){console.log("TrailersComposite : Error in saveTrailer")}},this.handleSave=()=>{try{if(Object.values(this.state.validationErrors).every((function(e){return""===e}))){let e=this.fillDetails(),t=i.pI(this.state.modAttributeMetaDataList);if(this.validateSave(e,t)){e=this.convertStringtoDecimal(e,t),e=i.pC(M.S.Trailer,e);let a=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,r=v().cloneDeep(e);this.setState({showAuthenticationLayout:a,tempTrailer:r},(()=>{!1===a&&this.saveTrailer()}))}else this.setState({saveEnabled:!0})}}catch(e){console.log("TrailerDetailsComposite:Error occured on handleSave",e)}},this.handleReset=()=>{try{var e=v().cloneDeep(this.state.trailer);if(this.setState({modTrailer:e,modAttributeMetaDataList:[]},(()=>{this.props.userDetails.EntityResult.IsEnterpriseNode?(this.terminalSelectionChange(e.TerminalCodes),this.handleResetAttributeValidationError()):(this.localNodeAttribute(),this.handleResetAttributeValidationError())})),""===this.state.trailer.Code){let e=[];this.setState({terminalOptions:e})}let t={...this.state.validationErrors};Object.keys(t).forEach((e=>{t[e]=""})),this.setState({validationErrors:t})}catch(t){console.log("TrailerDetailsComposite:Error occured on handleReset",t)}},this.handleDateTextChange=(e,t,a)=>{try{var r={...this.state.validationErrors},i=v().cloneDeep(this.state.modTrailer);r[e]=a,i[e]=t,this.setState({validationErrors:r,modTrailer:i})}catch(a){console.log("TrailerDetailsComposite:Error occured on handleDateTextChange",a)}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})}}componentDidMount(){try{i.pJ(this.props.userDetails.EntityResult.IsArchived),this.getHazardousLookup(),this.getCarrierList(this.props.selectedShareholder),this.getUOMList(),this.getProductTypes(),this.getLoadingTypes();let e=!1;void 0===this.props.selectedRow.Common_Code&&(e=!0),this.getAttributes(e)}catch(e){console.log("TrailerDetailsComposite:Error occured on componentDidMount",e)}}getHazardousLookup(){try{m()(d.xAA+"?LookUpTypeCode=HazardousMaterial",i.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess&&t.EntityResult.RoadEnabled&&"true"===t.EntityResult.RoadEnabled.toLowerCase()&&(this.setState({hazardousEnabled:!0}),this.getHazardousCategories())})),m()(d.xAA+"?LookUpTypeCode=VirtualPreset",i.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess&&(isNaN(parseInt(t.EntityResult.RoadMaximumNumberOfCompartments))||this.setState({maxNumberOfCompartments:parseInt(t.EntityResult.RoadMaximumNumberOfCompartments)}))}))}catch(e){console.log("TrailerDetailsComposite:Error occured on getHazardousLookup",e)}}getHazardousCategories(){m()(d.H20,i.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=i.Zj(t.EntityResult);this.setState({hazardousTankerCategoryOptions:e})}}else console.log("Error in getHazardousCategories:",t.ErrorList)}))}catch(e){console.log("TrailerDetailsComposite:Error occured on getHazardousCategories",e)}terminalSelectionChange(e){try{if(Array.isArray(e)){let s=[];var t=[],a=[];t=v().cloneDeep(this.state.attributeMetaDataList),a=v().cloneDeep(this.state.modAttributeMetaDataList);const o=v().cloneDeep(this.state.attributeValidationErrors);var r=v().cloneDeep(this.state.modTrailer);e.forEach((e=>{var i=a.find((t=>t.TerminalCode===e));void 0===i?t.forEach((function(t){if(t.TerminalCode===e){var a=r.Attributes.find((t=>t.TerminalCode===e));void 0!==a&&t.attributeMetaDataList.forEach((function(e){var t=a.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),s.push(t)}})):s.push(i)})),a=[],a=s,a=i.nQ(a),o.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.formCompartmentAttributes(e),this.setState({modAttributeMetaDataList:a,attributeValidationErrors:o})}}catch(s){console.log("TrailerDetailsComposite:Error occured on terminalSelectionChange",s)}}localNodeAttribute(){try{var e=v().cloneDeep(this.state.attributeMetaDataList);if(Array.isArray(e)&&e.length>0)this.terminalSelectionChange([e[0].TerminalCode]);else{var t=v().cloneDeep(this.state.compartmentAttributeMetaDataList);Array.isArray(t)&&t.length>0&&this.formCompartmentAttributes([t[0].TerminalCode])}}catch(a){console.log("TrailerDetailsComposite:Error occured on localNodeAttribute",a)}}componentWillReceiveProps(e){try{if(""!==this.state.trailer.Code&&void 0===e.selectedRow.Common_Code&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo){this.getTrailer(!0);let e={...this.state.validationErrors};Object.keys(e).forEach((t=>{e[t]=""})),this.setState({validationErrors:e})}}catch(t){console.log("TrailerDetailsComposite:Error occured on componentWillReceiveProps",t)}}getAttributes(e){try{m()(d.fKH,i.tW([c.dv,c.gG],this.props.tokenDetails.tokenInfo)).then((t=>{var a=t.data;!0===a.IsSuccess?this.setState({attributeMetaDataList:v().cloneDeep(a.EntityResult.TRAILER),attributeValidationErrors:i.Fl(a.EntityResult.TRAILER),compartmentAttributeMetaDataList:v().cloneDeep(a.EntityResult.TRAILERCOMPARTMENT)},(()=>this.getTrailer(e))):console.log("Failed to get Attributes")}))}catch(t){console.log("Error while getting Attributes:",t)}}formCompartmentAttributes(e){try{let t=v().cloneDeep(this.state.compartmentAttributeMetaDataList);t=t.filter((function(t){return e.some((function(e){return t.TerminalCode===e}))}));let a=v().cloneDeep(this.state.modTrailer);a.Compartments.forEach((a=>{let r=[];t.forEach((e=>{e.attributeMetaDataList.forEach((e=>{r.push({AttributeCode:e.Code,AttributeName:e.DisplayName,AttributeValue:e.DefaultValue,TerminalCode:e.TerminalCode,IsMandatory:e.IsMandatory,DataType:e.DataType,IsReadonly:e.IsReadonly,MinValue:e.MinValue,MaxValue:e.MaxValue,ValidationFormat:e.ValidationFormat,compSequenceNo:""})}))}));let s=v().cloneDeep(r);if(null!==a.Code||null!==a.AttributesforUI&&void 0!==a.AttributesforUI){null!==a.AttributesforUI&&void 0!==a.AttributesforUI?(a.AttributesforUI=a.AttributesforUI.filter((function(t){return e.some((function(e){return t.TerminalCode===e}))})),r=r.filter((function(e){return!a.AttributesforUI.some((function(t){return e.TerminalCode===t.TerminalCode}))}))):a.AttributesforUI=[];let t=v().cloneDeep(r);if(Array.isArray(a.Attributes)&&null!==a.Attributes&&void 0!==a.Attributes&&a.Attributes.length>0){a.Attributes.filter((function(t){return e.some((function(e){return t.TerminalCode===e}))})).forEach((e=>{e.ListOfAttributeData.forEach((a=>{let r=t.findIndex((t=>t.TerminalCode===e.TerminalCode&&t.AttributeCode===a.AttributeCode));r>=0&&(t[r].AttributeValue=a.AttributeValue)}))})),t.forEach((e=>{e.compSequenceNo=a.CompartmentSeqNoInTrailer,a.AttributesforUI.push(e)}))}else r.forEach((e=>{e.compSequenceNo=a.CompartmentSeqNoInTrailer,a.AttributesforUI.push(e)}))}else a.AttributesforUI=[],s.forEach((e=>{e.compSequenceNo=a.CompartmentSeqNoInTrailer,a.AttributesforUI.push(e)}));this.toggleExpand(a,!0,!0),void 0!==a.AttributesforUI&&null!=a.AttributesforUI&&(a.AttributesforUI=i.vt(a.AttributesforUI)),a.AttributesforUI=i.Q3(a.AttributesforUI)})),this.setState({modTrailer:a})}catch(t){console.log("TrailerDetailsComposite:Error in forming Compartment Attributes",t)}}fillAttributeDetails(e,t){try{return t=i.SC(t),e.Attributes=i.Gh(t),e.Compartments.forEach((t=>{void 0!==t.AttributesforUI&&null!=t.AttributesforUI&&(t.AttributesforUI=i.mr(t.AttributesforUI));let a=[];if(this.props.userDetails.EntityResult.IsEnterpriseNode)a=v().cloneDeep(e.TerminalCodes);else{var r=v().cloneDeep(this.state.compartmentAttributeMetaDataList);r.length>0&&(a=[r[0].TerminalCode])}let s=[];t.Attributes=[],null!==a&&void 0!==a&&a.length>0&&a.forEach((e=>{null!==t.AttributesforUI&&void 0!==t.AttributesforUI&&(s=t.AttributesforUI.filter((function(t){return t.TerminalCode===e})));let a={ListOfAttributeData:[]};a.TerminalCode=e,s.forEach((e=>{""===e.AttributeValue&&!0!==e.IsMandatory||a.ListOfAttributeData.push({AttributeCode:e.AttributeCode,AttributeValue:e.AttributeValue})})),null!==a.ListOfAttributeData&&void 0!==a.ListOfAttributeData&&a.ListOfAttributeData.length>0&&t.Attributes.push(a)}))})),this.setState({modTrailer:e}),e}catch(a){console.log("TrailerDetailsComposite:Error occured on fillAttributeDetails",a)}}getProductTypes(){m()(d.YG_,i.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=i.Zj(t.EntityResult);this.setState({productTypeOptions:e})}}else console.log("Error in getProductTypes:",t.ErrorList)})).catch((e=>{console.log("Error while getting getProductTypes:",e)}))}getLoadingTypes(){m()(d.zVP,i.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=i.Zj(t.EntityResult);this.setState({loadingTypeOptions:e})}}else console.log("Error in getLoadingTypes:",t.ErrorList)})).catch((e=>{console.log("Error while getting getLoadingTypes:",e)}))}getUOMList(){m()(d.WFM,i.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult){let e=t.EntityResult.MASS,a=[];e.forEach((e=>{a.push({text:e,value:e})}));let r=t.EntityResult.VOLUME,i=[];r.forEach((e=>{i.push({text:e,value:e})}));let s=t.EntityResult.LENGTH,o=[];s.forEach((e=>{o.push({text:e,value:e})})),this.setState({volumeUOMOptions:i,weightUOMOptions:a,lengthUOMOptions:o})}}else console.log("Error in getUOM:",t.ErrorList)})).catch((e=>{console.log("Error while getting getUOM:",e)}))}getCarrierList(e){m()(d.Xj6+"?ShareholderCode="+e+"&Transportationtype="+n.LY.ROAD,i.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=i.Zj(t.EntityResult),a=v().cloneDeep(e);a.length>n.bM&&(a=a.slice(0,n.bM)),this.setState({carrierOptions:e,carrierSearchOptions:a})}}else console.log("Error in GetCarrierListForRole:",t.ErrorList)})).catch((e=>{console.log("Error while getting Carrier List:",e)}))}getCarrierSearchOptions(){let e=v().cloneDeep(this.state.carrierSearchOptions),t=this.state.modTrailer.CarrierCompanyCode;if(null!==t&&""!==t&&void 0!==t){void 0===e.find((e=>e.value.toLowerCase()===t.toLowerCase()))&&e.push({text:t,value:t})}return e}getTrailer(e){if(e){let e=[];return C.Bc.WeightUOM=this.props.userDetails.EntityResult.PageAttibutes.DefaultUOMS.MassUOM,this.handleResetAttributeValidationError(),void this.setState({trailer:v().cloneDeep(C.Bc),modTrailer:v().cloneDeep(C.Bc),isReadyToRender:!0,terminalOptions:e,modAttributeMetaDataList:[],trailerKPIList:[],saveEnabled:i.ab(this.props.userDetails.EntityResult.FunctionsList,p.i.add,p.eQ)},(()=>{!1===this.props.userDetails.EntityResult.IsEnterpriseNode&&this.localNodeAttribute()}))}let t=[{key:l.UT,value:void 0===this.props.selectedRow.Common_Code?this.state.modTrailer.Code:this.props.selectedRow.Common_Code}],a={ShareHolderCode:this.props.selectedShareholder,keyDataCode:l.UT,KeyCodes:t};m()(d.g6x,i.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;!0===t.IsSuccess?(null!==t.EntityResult&&(t.EntityResult.MaxLoadableWeight_UI=t.EntityResult.MaxLoadableWeight+t.EntityResult.TareWeight,null!==t.EntityResult.Compartments&&t.EntityResult.Compartments.length>0&&(t.EntityResult.Compartments=t.EntityResult.Compartments.sort(((e,t)=>e.CompartmentSeqNoInTrailer-t.CompartmentSeqNoInTrailer)))),this.setState({isReadyToRender:!0,trailer:v().cloneDeep(t.EntityResult),modTrailer:v().cloneDeep(t.EntityResult),saveEnabled:i.ab(this.props.userDetails.EntityResult.FunctionsList,p.i.modify,p.eQ)},(()=>{this.getTerminalsForCarrier(t.EntityResult.CarrierCompanyCode),this.getKPIList(t.EntityResult.ShareholderCode,t.EntityResult.TrailerCode),this.props.userDetails.EntityResult.IsEnterpriseNode?this.terminalSelectionChange(t.EntityResult.TerminalCodes):this.localNodeAttribute()}))):(C.Bc.ShareholderCode=this.props.selectedShareholder,C.Bc.TrailerType=n.YH.NON_RIGID_TRAILER,this.setState({modTrailer:v().cloneDeep(C.Bc),trailer:v().cloneDeep(C.Bc),isReadyToRender:!0}),console.log("Error in GetTrailer:",t.ErrorList))})).catch((e=>{console.log("Error while getting Trailer:",e)}))}getTerminalsForCarrier(e){if(this.props.userDetails.EntityResult.IsEnterpriseNode){const a=v().cloneDeep(this.state.modTrailer);let r=[...this.state.terminalOptions];a.CarrierCompanyCode=e;try{if(void 0===e)return r=[],a.TerminalCodes=[],void this.setState({terminalOptions:r,modTrailer:a},(()=>this.formCompartmentAttributes([])));let t=[{key:l._n,value:e},{key:l.v6,value:n.LY.ROAD}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:l._n,KeyCodes:t};m()(d.pm$,i.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;!0===t.IsSuccess&&null!==t.EntityResult&&null!==t.EntityResult.TerminalCodes?(r=[...t.EntityResult.TerminalCodes],this.setState({terminalOptions:r})):(r=[],this.setState({terminalOptions:r}));let i={...this.state.trailer};void 0!==i.Code&&""!==i.Code&&null!==i.Code||(1===r.length?a.TerminalCodes=[...r]:a.TerminalCodes=[]),Array.isArray(a.TerminalCodes)&&(a.TerminalCodes=r.filter((e=>a.TerminalCodes.includes(e)))),this.setState({modTrailer:a},(()=>this.terminalSelectionChange(a.TerminalCodes)))})).catch((t=>{r=[],a.TerminalCodes=[],this.setState({terminalOptions:r,modTrailer:a},(()=>this.formCompartmentAttributes([]))),console.log("Error while getting Carrier:",t,e)}))}catch(t){r=[],a.TerminalCodes=[],this.setState({terminalOptions:r,modTrailer:a},(()=>this.formCompartmentAttributes([]))),console.log("TrailerDetailsComposite:Error occured on handleCarrierChange",t)}}else this.formCompartmentAttributes([])}fillDetails(){try{let e=v().cloneDeep(this.state.modTrailer);return e.ShareholderCode=this.props.selectedShareholder,e.TrailerType=n.YH.NON_RIGID_TRAILER,e.TransportationType=n.LY.ROAD,e.Compartments.forEach((t=>{t.TrailerCode=e.Code,t.ShareholderCode=e.ShareholderCode,t.CarrierCompanyCode=e.CarrierCompanyCode,null!==t.Capacity&&""!==t.Capacity&&(t.Capacity=t.Capacity.toLocaleString()),null!==t.Code&&""!==t.Code||(t.Code=i.d1(e.Compartments).toString()),void 0!==t.AttributesforUI&&null!=t.AttributesforUI&&(t.AttributesforUI=i.BZ(t.AttributesforUI))})),""===e.Height&&(e.Height=null),""===e.Length&&(e.Length=null),""===e.Width&&(e.Width=null),null!==e.TareWeight&&""!==e.TareWeight&&(e.TareWeight=e.TareWeight.toLocaleString()),null!==e.MaxLoadableWeight_UI&&""!==e.MaxLoadableWeight_UI&&(e.MaxLoadableWeight=e.MaxLoadableWeight_UI.toLocaleString()),null!==e.Height&&""!==e.Height&&(e.Height=e.Height.toLocaleString()),null!==e.Length&&""!==e.Length&&(e.Length=e.Length.toLocaleString()),null!==e.Width&&""!==e.Width&&(e.Width=e.Width.toLocaleString()),e}catch(e){console.log("TrailerDetailsComposite:Error occured on fillDetails",e)}}convertStringtoDecimal(e,t){try{return e.TareWeight=i.bo(e.TareWeight),null!==e.Height&&""!==e.Height&&(e.Height=i.bo(e.Height)),null!==e.Length&&""!==e.Length&&(e.Length=i.bo(e.Length)),null!==e.Width&&""!==e.Width&&(e.Width=i.bo(e.Width)),e.MaxLoadableWeight=parseFloat(i.bo(e.MaxLoadableWeight_UI)-e.TareWeight),e.Compartments.forEach((e=>{e.Capacity=i.bo(e.Capacity)})),e=this.fillAttributeDetails(e,t)}catch(a){console.log("convertStringtoDecimal on trailer details",a)}}validateSave(e,t){const a={...this.state.validationErrors};Object.keys(s.kI).forEach((function(t){void 0!==e[t]&&(a[t]=i.jr(s.kI[t],e[t]))})),e.Active!==this.state.trailer.Active&&""===e.Remarks&&(a.Remarks="Trailer_RemarksRequired");let r={messageType:"critical",message:"TrailerDetails_SavedStatus",messageResultDetails:[]};null===e.Height&&null==e.Width&&null===e.Length||null!==e.LWHUOM||r.messageResultDetails.push({keyFields:["Trailer_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:"Trailer_UOMDimensionRequired"});var o=v().cloneDeep(this.state.attributeValidationErrors);t.forEach((e=>{o.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=i.I5(e,e.DefaultValue)}))}))})),this.setState({validationErrors:a,attributeValidationErrors:o});let l=!0;return o.forEach((e=>{if(!l)return l;l=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),l?(l=Object.values(a).every((function(e){return""===e})),e.Compartments.length>0?e.Compartments.length<=this.state.maxNumberOfCompartments?e.Compartments.forEach((e=>{N.Ig.forEach((t=>{let a="";void 0!==t.validator&&(a=i.jr(t.validator,e[t.field])),""!==a&&r.messageResultDetails.push({keyFields:["Trailer_CompCode",t.displayName],keyValues:[e.Code,e[t.field]],isSuccess:!1,errorMessage:a})})),null!==e.AttributesforUI&&void 0!==e.AttributesforUI&&e.AttributesforUI.forEach((t=>{let a=i.I5(t,t.AttributeValue);""!==a&&(this.props.userDetails.EntityResult.IsEnterpriseNode?r.messageResultDetails.push({keyFields:["CompAttributeComp","CompAttributeTerminal",t.AttributeName],keyValues:[e.Code,t.TerminalCode,t.AttributeValue],isSuccess:!1,errorMessage:a}):r.messageResultDetails.push({keyFields:["CompAttributeComp",t.AttributeName],keyValues:[e.Code,t.AttributeValue],isSuccess:!1,errorMessage:a}))})),this.toggleExpand(e,!0,!0)})):r.messageResultDetails.push({keyFields:["Trailer_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:"Compartment_limit_Exceeded"}):r.messageResultDetails.push({keyFields:["Trailer_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:"TrailerInfo_CompartmentRequired"}),r.messageResultDetails.length>0?(this.props.onSaved(this.state.modTrailer,"update",r),!1):l):l}handleResetAttributeValidationError(){try{var e=v().cloneDeep(this.state.attributeMetaDataList);this.setState({attributeValidationErrors:i.Fl(e)})}catch(t){console.log("TrailerDetailsComposite:Error occured on handleResetAttributeValidationError",t)}}createTrailer(e){let t=[{key:l.UT,value:e.Code}],a={ShareHolderCode:this.props.selectedShareholder,keyDataCode:l.UT,KeyCodes:t,Entity:e},r={messageType:"critical",message:"TrailerDetails_SavedStatus",messageResultDetails:[{keyFields:["Trailer_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:""}]};m()(d.oxf,i.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;r.messageType=t.IsSuccess?"success":"critical",r.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?(this.setState({saveEnabled:i.ab(this.props.userDetails.EntityResult.FunctionsList,p.i.modify,p.eQ),showAuthenticationLayout:!1}),this.getTrailer(!1)):(r.messageResultDetails[0].errorMessage=t.ErrorList[0],this.setState({saveEnabled:i.ab(this.props.userDetails.EntityResult.FunctionsList,p.i.add,p.eQ),showAuthenticationLayout:!1}),console.log("Error in CreateTrailer:",t.ErrorList)),this.props.onSaved(this.state.modTrailer,"add",r)})).catch((e=>{this.setState({saveEnabled:i.ab(this.props.userDetails.EntityResult.FunctionsList,p.i.add,p.eQ),showAuthenticationLayout:!1}),r.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modTrailer,"add",r)}))}updateTrailer(e){let t=[{key:l.UT,value:e.Code}],a={ShareHolderCode:this.props.selectedShareholder,keyDataCode:l.UT,KeyCodes:t,Entity:e},r={messageType:"critical",message:"TrailerDetails_SavedStatus",messageResultDetails:[{keyFields:["Trailer_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:""}]};m()(d.Tyb,i.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;r.messageType=t.IsSuccess?"success":"critical",r.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?(this.setState({saveEnabled:i.ab(this.props.userDetails.EntityResult.FunctionsList,p.i.modify,p.eQ),showAuthenticationLayout:!1}),this.getTrailer(!1)):(this.setState({saveEnabled:i.ab(this.props.userDetails.EntityResult.FunctionsList,p.i.modify,p.eQ),showAuthenticationLayout:!1}),r.messageResultDetails[0].errorMessage=t.ErrorList[0],console.log("Error in UpdateTrailer:",t.ErrorList)),this.props.onSaved(this.state.modTrailer,"update",r)})).catch((e=>{r.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modTrailer,"modify",r),this.setState({saveEnabled:i.ab(this.props.userDetails.EntityResult.FunctionsList,p.i.modify,p.eQ),showAuthenticationLayout:!1})}))}getKPIList(e,t){if(!0===i.ab(this.props.userDetails.EntityResult.FunctionsList,p.i.view,p.bL)){let a={PageName:O.gF,InputParameters:[{key:"ShareholderCode",value:e},{key:"TrailerCode",value:t}]};m()(d.dxq,i.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({trailerKPIList:t.EntityResult.ListKPIDetails}):(this.setState({trailerKPIList:[]}),console.log("Error in Trailer KPIList:",t.ErrorList))})).catch((e=>{console.log("Error while getting trailer KPIList:",e)}))}}render(){const e={carriers:this.getCarrierSearchOptions(),productType:this.state.productTypeOptions,loadingType:this.state.loadingTypeOptions,unitOfWeight:this.state.weightUOMOptions,unitOfVolume:this.state.volumeUOMOptions,unitOfDimension:this.state.lengthUOMOptions,terminalCodes:this.state.terminalOptions,hazardousTankerCategoryOptions:this.state.hazardousTankerCategoryOptions},t=[{fieldName:"Trailer_LastUpdated",fieldValue:new Date(this.state.modTrailer.LastUpdateTime).toLocaleDateString()+" "+new Date(this.state.modTrailer.LastUpdateTime).toLocaleTimeString()},{fieldName:"Trailer_LastActiveTime",fieldValue:void 0!==this.state.modTrailer.LastActiveTime&&null!==this.state.modTrailer.LastActiveTime?new Date(this.state.modTrailer.LastActiveTime).toLocaleDateString()+" "+new Date(this.state.modTrailer.LastActiveTime).toLocaleTimeString():""},{fieldName:"Trailer_CreateTime",fieldValue:new Date(this.state.modTrailer.CreatedTime).toLocaleDateString()+" "+new Date(this.state.modTrailer.CreatedTime).toLocaleTimeString()}];return this.state.isReadyToRender?(0,y.jsxs)("div",{children:[(0,y.jsx)(T.A,{children:(0,y.jsx)(g.A,{entityCode:this.state.trailer.Code,newEntityName:"Trailer_NewTrailer",popUpContents:t})}),(0,y.jsx)(x.A,{KPIList:this.state.trailerKPIList,children:" "}),(0,y.jsx)(T.A,{children:(0,y.jsx)(L,{trailer:this.state.trailer,modTrailer:this.state.modTrailer,validationErrors:this.state.validationErrors,attributeValidationErrors:this.state.attributeValidationErrors,listOptions:e,onFieldChange:this.handleChange,onAllTerminalsChange:this.handleAllTerminalsChange,selectedCompRow:this.state.selectedCompRow,handleRowSelectionChange:this.handleRowSelectionChange,onCarrierSearchChange:this.handleCarrierSearchChange,handleCellDataEdit:this.handleCellDataEdit,onAttributeDataChange:this.handleAttributeDataChange,handleCompAttributeCellDataEdit:this.handleCompAttributeCellDataEdit,modAttributeMetaDataList:this.state.modAttributeMetaDataList,handleAddCompartment:this.handleAddCompartment,handleDeleteCompartment:this.handleDeleteCompartment,toggleExpand:this.toggleExpand,expandedRows:this.state.expandedRows,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,compartmentDetailsPageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,onDateTextChange:this.handleDateTextChange,hazardousEnabled:this.state.hazardousEnabled})}),(0,y.jsx)(T.A,{children:(0,y.jsx)(o.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.showAuthenticationLayout?(0,y.jsx)(w.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.trailer.Code?p.i.add:p.i.modify,functionGroup:p.eQ,handleOperation:this.saveTrailer,handleClose:this.handleAuthenticationClose}):null]}):(0,y.jsx)(R.A,{message:"Loading"})}}const P=(0,u.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(j)},24904:(e,t,a)=>{a.d(t,{y:()=>l});a(65043);var r=a(67907),i=a(72711),s=a(69062),o=a(70579);function l(e){let{terminalList:t,selectedTerminal:a,validationError:l,onFieldChange:n,onCheckChange:d}=e;return null===a&&(a=[]),(0,o.jsx)(r.TranslationConsumer,{children:e=>(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,o.jsx)("div",{style:{width:"80%"},children:(0,o.jsx)(i.Select,{fluid:!0,placeholder:e("Common_Select"),label:e("TerminalCodes"),value:a,multiple:!0,options:s.Zj(t),onChange:e=>n("TerminalCodes",e),error:e(l),disabled:0===t.length,reserveSpace:!1})}),(0,o.jsx)("div",{className:"ddlSelectAll",children:(0,o.jsx)(i.Checkbox,{label:e("Common_All"),checked:Array.isArray(a)&&a.length===t.length,onChange:e=>d(e)})})]})})}l.defaultProps={terminalList:[],selectedTerminal:[],validationError:""}},43503:(e,t,a)=>{a.d(t,{A:()=>l});a(65043);var r=a(67907),i=a(72711),s=a(70579);function o(e){let{entityCode:t,newEntityName:a,popUpContents:o}=e;return(0,s.jsx)(r.TranslationConsumer,{children:e=>(0,s.jsx)("div",{className:"headerContainer",children:(0,s.jsxs)("div",{className:"row headerSpacing",children:[(0,s.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,s.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(a):t})}),""!==t&&void 0!==t&&o.length>0?(0,s.jsx)("div",{className:"headerItemRight",children:(0,s.jsx)(i.Popup,{element:(0,s.jsxs)("div",{children:[e(o[0].fieldName)+" ",":"," "+o[0].fieldValue,(0,s.jsx)(i.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,s.jsx)(i.List,{className:"detailsHeaderPopUp",children:o.map((t=>(0,s.jsxs)(i.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}o.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const l=o},9256:(e,t,a)=>{a.d(t,{q:()=>o});a(65043);var r=a(72711),i=a(67907),s=a(70579);function o(e){let{handleBack:t,handleSave:a,handleReset:o,saveEnabled:l}=e;return(0,s.jsx)(i.TranslationConsumer,{children:e=>(0,s.jsxs)("div",{className:"row userActionPosition",children:[(0,s.jsx)("div",{className:"col-12 col-md-3 col-lg-4",children:(0,s.jsx)(r.Button,{className:"backButton",onClick:t,content:e("Back")})}),(0,s.jsx)("div",{className:"col-12 col-md-9 col-lg-8",children:(0,s.jsxs)("div",{style:{float:"right"},children:[(0,s.jsx)(r.Button,{content:e("LookUpData_btnReset"),className:"cancelButton",onClick:o}),(0,s.jsx)(r.Button,{content:e("Save"),disabled:!l,onClick:a})]})})]})})}o.defaultProps={saveEnabled:!1}},85800:(e,t,a)=>{a.d(t,{n:()=>n});a(65043);var r=a(72711),i=a(67907),s=a(7523),o=a(35861),l=a(70579);function n(e){let{selectedAttributeList:t,handleCellDataEdit:a,attributeValidationErrors:n}=e;const d=e=>{if("0000-00-00"===e.DefaultValue)return c(e,new Date),new Date;var t=e.DefaultValue.split("-");return new Date(t[0],t[1]-1,t[2])},c=(e,t)=>{var r=new Date(t);t=r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2),a(e,t)};return(0,l.jsx)(i.TranslationConsumer,{children:e=>(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-md-12 attributeDetails-wrap",children:(0,l.jsx)("div",{className:"row",children:t.map((t=>t.DataType.toLowerCase()===s.pe.STRING.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(r.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>a(t,e),error:e(n[t.Code]),reserveSpace:!1})}):t.DataType.toLowerCase()!==s.pe.INT.toLowerCase()&&t.DataType.toLowerCase()!==s.pe.LONG.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()!==s.pe.FLOAT.toLowerCase()&&t.DataType.toLowerCase()!==s.pe.DOUBLE.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()===s.pe.BOOL.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(r.Checkbox,{className:"deviceCheckBox customDeviceCheckBox",label:e(t.DisplayName),checked:null===t.DefaultValue?"":"true"===t.DefaultValue.toString().toLowerCase(),disabled:!0===t.IsReadonly,onChange:e=>a(t,e)})}):t.DataType.toLowerCase()===s.pe.DATETIME.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(r.DatePicker,{fluid:!0,value:null===t.DefaultValue||""===t.DefaultValue?"":d(t),label:e(t.DisplayName),displayFormat:(0,o.F1)(),showYearSelector:"true",indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>c(t,e),onTextChange:e=>{c(t,e)},error:e(n[t.Code]),reserveSpace:!1})}):null:(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(r.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue||""===t.DefaultValue?"":t.DefaultValue.toLocaleString(),indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>a(t,e),error:e(n[t.Code]),reserveSpace:!1})}):(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(r.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>a(t,e),error:e(n[t.Code]),reserveSpace:!1})})))})})})})}},15417:(e,t,a)=>{a.d(t,{$7:()=>x,AN:()=>ae,AU:()=>v,Ak:()=>Ge,Ao:()=>r,B6:()=>K,C4:()=>ke,CG:()=>Z,Ct:()=>B,Cw:()=>P,EY:()=>L,G$:()=>Ke,G6:()=>$e,GF:()=>me,GJ:()=>j,Gj:()=>ue,Gl:()=>se,H9:()=>Qe,HB:()=>fe,HP:()=>y,Hr:()=>Le,II:()=>it,IQ:()=>A,Jr:()=>F,Jx:()=>Ie,Ki:()=>te,LP:()=>ie,Lv:()=>s,MK:()=>g,MX:()=>ee,Mx:()=>z,N4:()=>we,NH:()=>Ee,OF:()=>Je,Ps:()=>H,Q7:()=>Be,QY:()=>k,SF:()=>o,Sq:()=>be,Sw:()=>le,TQ:()=>X,U7:()=>f,UH:()=>T,UO:()=>oe,V_:()=>Re,Vy:()=>Ve,W9:()=>de,WN:()=>I,Wr:()=>i,Ww:()=>$,XP:()=>Ne,Xk:()=>Q,Yb:()=>Se,Yy:()=>p,Z2:()=>je,ZN:()=>O,ZO:()=>De,Zu:()=>Fe,_G:()=>q,_N:()=>u,_u:()=>ce,ad:()=>ne,al:()=>Ae,ao:()=>V,bK:()=>G,bN:()=>E,cf:()=>M,dO:()=>xe,dU:()=>m,dv:()=>l,eE:()=>Y,g:()=>b,gG:()=>n,gS:()=>ve,gT:()=>at,gW:()=>J,gZ:()=>Xe,go:()=>N,gp:()=>_,hq:()=>Me,i6:()=>et,ip:()=>he,k9:()=>C,kI:()=>D,l4:()=>Pe,l5:()=>S,lA:()=>w,lU:()=>Ze,mD:()=>_e,mY:()=>U,mq:()=>d,n$:()=>rt,n7:()=>h,nZ:()=>Oe,rA:()=>Ue,s$:()=>He,s8:()=>We,se:()=>ge,tA:()=>ye,vK:()=>tt,vs:()=>Te,w2:()=>Ye,w4:()=>Ce,wT:()=>c,wY:()=>R,wf:()=>pe,wk:()=>re,xW:()=>W,yM:()=>qe,yO:()=>ze});const r="driver",i="carriercompany",s="shareholder",o="baseProduct",l="TRAILER",n="TRAILERCOMPARTMENT",d="terminal",c="customer",u="destination",h="finishedproduct",m="tank",p="marine_vessel",C="marine_trailercompartment",T="supplier",g="vehicle",E="vehicletrailer",I="originterminal",A="bay",D="loadingArm",S="cardreader",b="vehicleprimemover",y="meter",L="SHIPMENT",f="SHIPMENTCOMPARTMENT",v="SHIPMENTDESTINATIONCOMPARTMENT",N="SHIPMENTDETAILS",R="SHIPMENTTRAILERWEIGHBRIDGE",x="SHIPMENTTRAILER",O="SHIPMENTSTATUSTIME",M="MARINEDISPATCH",w="MARINEDISPATCHCOMPARTMENTDETAIL",j="railwagon",P="primemover",U="bcu",k="RAILRECEIPTPLAN",H="RAILRECEIPTWAGONDETAILPLAN",V="RAILUNLOADINGDETAILSFP",_="RAILUNLOADINGDETAILSBP",W="RAILUNLOADINGDETAILSADDITIVE",F="RAILDISPATCHPLAN",G="RAILDISPATCHITEM",q="RAILDISPATCHSTATUSCHANGE",z="RAILDISPATCHWAGON",B="RAILDISPATCHWAGONDETAILPLAN",Q="RAILDISPATCHWAGONWEIGHBRIDGE",K="RAILDISPATCHWAGONCOMPARTMENT",Y="RAILLOADINGDETAILSFP",Z="RAILLOADINGDETAILSBP",J="RAILLOADINGDETAILSADDITIVE",$="marineReceipt",X="UNACCOUNTEDMETERTRANSACTION",ee="UNACCOUNTEDTANKTRANSACTION",te="marineLoadingDetailsFP",ae="marineLoadingDetailsAdditive",re="marineLoadingDetailsBP",ie="marineReceiptCompartmentDetail",se="marineUnloadingDetailsFP",oe="marineUnloadingDetailsBP",le="accessCard",ne="LOADINGDETAILSFP",de="LOADINGDETAILSBP",ce="LOADINGDETAILSADDITIVE",ue="MARINERECEIPTSTATUSTIME",he="MARINEDISPATCHSTATUSTIME",me="RECEIPT",pe="UNLOADINGTRANSACTIONS",Ce="ORDER",Te="ORDERITEM",ge="CONTRACT",Ee="CONTRACT_ITEM",Ie="RECEIPTORIGINTERMINALCOMPARTMENT",Ae="GeneralTMUser_CAPTAIN",De="weighbridge",Se="deu",be="GeneralTMUser_STAFF",ye="GeneralTMUser_VISITOR",Le="PIPELINEHEADER",fe="SEALMASTER",ve="PIPELINERECEIPT",Ne="ROADSHIPMENTSLOTINFO",Re="ROADRECEIPTSLOTINFO",xe="MARINESHIPMENTSLOTINFO",Oe="MARINERECEIPTSLOTINFO",Me="PIPELINEDISPATCH",we="PIPELINETRANSACTIONS",je="PIPELINEDISPATCHSTATUSTIME",Pe="PIPELINERECEIPTSTATUSTIME",Ue="PROCESSCONFIG",ke="PRODUCTALLOCATIONITEM",He="HSEINSPECTIONSHIPMENTRIGIDTRUCK",Ve="HSEINSPECTIONSHIPMENTTRAILER",_e="HSEINSPECTIONSHIPMENTPRIMEMOVER",We="HSEINSPECTIONSHIPMENTNONFILLINGVEHICLE",Fe="HSEINSPECTIONMARINESHIPMENTBARGE",Ge="HSEINSPECTIONMARINESHIPMENTSHIP",qe="HSEINSPECTIONSHIPMENTRAILWAGON",ze="HSEINSPECTIONSHIPMENTPIPELINE",Be="HSEINSPECTIONRECEIPTRIGIDTRUCK",Qe="HSEINSPECTIONRECEIPTTRAILER",Ke="HSEINSPECTIONRECEIPTPRIMEMOVER",Ye="HSEINSPECTIONRECEIPTNONFILLINGVEHICLE",Ze="HSEINSPECTIONMARINERECEIPTBARGE",Je="HSEINSPECTIONMARINERECEIPTSHIP",$e="HSEINSPECTIONRECEIPTRAILWAGON",Xe="HSEINSPECTIONRECEIPTPIPELINE",et="SHAREHOLDERAGREEMENT",tt="COATEMPLATE",at="COAMANAGEMENT",rt="COACUSTOMER",it="COAASSIGNMENT"},97105:(e,t,a)=>{a.d(t,{S:()=>r});const r={Driver:["License1ExpiryDate","License1IssueDate","License2IssueDate","License2ExpiryDate","License3IssueDate","License3ExpiryDate","HazardousLicenseExpiry"],CarrierCompany:["PermitExpiryDate"],PrimeMover:["RoadTaxNoIssueDate","RoadTaxNoExpiryDate","licenseExpiryDate"],Wagon:["LicenseExpiryDate"],Vehicle:["LicenseNoIssueDate","LicenseNoExpiryDate","RoadTaxNoIssueDate","RoadTaxNoExpiryDate","Bondexpirydate","HazardousLicenseExpiry"],Contract:["StartDate","EndDate"],ContractItem:["StartDate","EndDate"],Order:["OrderStartDate","OrderEndDate","OrderDate","DeliveryDate"],AccessCard:["ExpiryDate","IssueDate","PasswordExpiryDate"],Trailer:["HazardousLicenseExpiry"]}},35861:(e,t,a)=>{a.d(t,{F1:()=>l,i7:()=>n,r4:()=>o});var r=a(86178),i=a.n(r),s=(a(15660),a(65043),a(70579));function o(e,t){if(Array.isArray(e)){0===e.filter((e=>e.text===t)).length&&e.unshift({value:null,text:t})}return e}function l(){let e=window.navigator.userLanguage||window.navigator.language;return i().locale(e),i().localeData().longDateFormat("L")}function n(e){return(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{children:e}),(0,s.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]})}}}]);
//# sourceMappingURL=8754.f27bd195.chunk.js.map