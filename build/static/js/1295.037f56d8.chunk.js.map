{"version":3,"file":"static/js/1295.037f56d8.chunk.js","mappings":"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","sources":["Components/Composite/Common/TransactionSourceSummaryOperations.jsx","Components/UIBase/Details/ContractDetails.jsx","Components/Composite/Details/ContractDetailsComposite.jsx","Components/UIBase/Details/OrderDetails.jsx","Components/Composite/Details/OrderDetailsComposite.jsx","Components/Composite/Summary/ContractSummaryComposite.jsx","Components/Composite/Entity/ContractComposite.jsx","Components/Composite/Summary/OrderSummaryComposite.jsx","Components/Composite/Entity/OrderComposite.jsx","Components/Composite/Summary/RailDispatchSummaryComposite.jsx","Components/Composite/Entity/RailDispatchComposite.jsx","Components/Composite/Summary/TruckShipmentSummaryComposite.jsx","Components/Composite/Entity/TruckShipmentComposite.jsx","Components/UIBase/Common/TMTransactionFilters.jsx","Components/UIBase/Common/TMReportViewer.jsx","Components/UIBase/Details/ReportDetails.jsx","JS/DateFieldsInEntities.js"],"sourcesContent":["import PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport { useTranslation } from \"@scuf/localization\";\r\nimport { Divider, Button } from '@scuf/common';\r\n\r\nTransactionSourceSummaryOperations.propTypes = {\r\n    transportationType: PropTypes.string.isRequired,\r\n    handleShipmentByCompartmentPageClick: PropTypes.func.isRequired,\r\n    handleShipmentByProductPageClick: PropTypes.func.isRequired,\r\n    handleDispatchPageClick: PropTypes.func.isRequired,\r\n    isSBCEnable: PropTypes.bool.isRequired,\r\n    isSBPEnable: PropTypes.bool.isRequired,\r\n    isRailDispatchEnable: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default function TransactionSourceSummaryOperations({\r\n    transportationType,\r\n    handleShipmentByCompartmentPageClick,\r\n    handleShipmentByProductPageClick,\r\n    handleDispatchPageClick,\r\n    isSBCEnable,\r\n    isSBPEnable,\r\n    isRailDispatchEnable\r\n}) {\r\n    const [t] = useTranslation();\r\n    return (\r\n        <div className={\"ViewShipmentStatusDetails \"}>\r\n            <div className=\"ViewShipmentStatusHeader\">\r\n                <h4>{transportationType === \"ROAD\" ? t(\"ShipmentContract_CreateShipment\") : t(\"ContractInfo_CreateDispatch\")}</h4>\r\n            </div>\r\n            <Divider />\r\n            {\r\n                transportationType === \"ROAD\" ? (\r\n                    <div>\r\n                        <div style={{ marginLeft: \"10%\" }}>\r\n                            <Button\r\n                                type=\"secondary\"\r\n                                className=\"ViewShipmentButton\"\r\n                                disabled={!isSBCEnable}\r\n                                //className=\"ViewShipmentDetailsButton\"\r\n                                onClick={() => handleShipmentByCompartmentPageClick()}\r\n                            >{t(\"ContractInfo_ShipByComp\")}</Button>\r\n                        </div>\r\n                        <div style={{ marginLeft: \"10%\" }}>\r\n                            <Button\r\n                                type=\"secondary\"\r\n                                className=\"ViewShipmentButton\"\r\n                                disabled={!isSBPEnable}\r\n                                // className=\"ViewShipmentDetailsButton\"\r\n                                onClick={() => handleShipmentByProductPageClick()}\r\n                            >{t(\"ContractInfo_ShipByProduct\")}</Button>\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    <div style={{ marginLeft: \"10%\" }}>\r\n                        <Button\r\n                            type=\"secondary\"\r\n                            className=\"ViewShipmentButton\"\r\n                            disabled={!isRailDispatchEnable}\r\n                            // className=\"ViewShipmentDetailsButton\"\r\n                            onClick={() => handleDispatchPageClick()}\r\n                        >{t(\"ContractInfo_CreateDispatch\")}</Button>\r\n                    </div>\r\n                )\r\n            }\r\n\r\n        </div>\r\n    )\r\n}","import React from \"react\";\r\nimport { useTranslation } from \"@scuf/localization\";\r\nimport {\r\n  Select,\r\n  Icon,\r\n  Input,\r\n  Checkbox,\r\n  DatePicker,\r\n  Accordion,\r\n  Button,\r\n} from \"@scuf/common\";\r\nimport { AssociatedTerminals } from \"../Common/AssociatedTerminals\";\r\nimport * as Constants from \"../../../JS/Constants\";\r\nimport { getKeyByValue } from \"../../../JS/Utilities\";\r\nimport { AttributeDetails } from \"../Details/AttributeDetails\";\r\nimport { DataTable } from \"@scuf/datatable\";\r\nimport { getCurrentDateFormat } from \"../../../JS/functionalUtilities\";\r\nimport * as Utilities from \"../../../JS/Utilities\";\r\nimport PropTypes from \"prop-types\";\r\nimport {\r\n  getOptionsWithSelect,\r\n  handleIsRequiredCompartmentCell,\r\n} from \"../../../JS/functionalUtilities\";\r\nimport ErrorBoundary from \"../../ErrorBoundary\";\r\n\r\nContractDetails.propTypes = {\r\n  contract: PropTypes.object.isRequired,\r\n  modContract: PropTypes.object.isRequired,\r\n  validationErrors: PropTypes.object.isRequired,\r\n  listOptions: PropTypes.shape({\r\n    contractTypeOptions: PropTypes.array,\r\n    unitOfWeight: PropTypes.array,\r\n    unitOfVolume: PropTypes.array,\r\n    terminalCodes: PropTypes.array,\r\n    carrierOptions: PropTypes.array,\r\n    finishedProductOptions: PropTypes.array,\r\n    customerDestinationOptions: PropTypes.object,\r\n  }).isRequired,\r\n  onDateTextChange: PropTypes.func.isRequired,\r\n  onFieldChange: PropTypes.func.isRequired,\r\n  onAllTerminalsChange: PropTypes.func.isRequired,\r\n  selectedPlanRow: PropTypes.array.isRequired,\r\n  modContractItems: PropTypes.array.isRequired,\r\n  handleRowSelectionChange: PropTypes.func.isRequired,\r\n  handleCellDataEdit: PropTypes.func.isRequired,\r\n  handleAddPlan: PropTypes.func.isRequired,\r\n  handleDeletePlan: PropTypes.func.isRequired,\r\n  isEnterpriseNode: PropTypes.bool.isRequired,\r\n  attributeValidationErrors: PropTypes.object.isRequired,\r\n  expandedRows: PropTypes.array.isRequired,\r\n  modAttributeMetaDataList: PropTypes.array.isRequired,\r\n  onAttributeDataChange: PropTypes.func.isRequired,\r\n  handleCompAttributeCellDataEdit: PropTypes.func.isRequired,\r\n  compartmentDetailsPageSize: PropTypes.number.isRequired,\r\n  isEnableForceClose: PropTypes.bool.isRequired,\r\n  handleForceClose: PropTypes.object.isRequired,\r\n  handleViewShipments: PropTypes.func.isRequired,\r\n  handleViewDispatch: PropTypes.func.isRequired,\r\n  isAutoGeneratedContractCode: PropTypes.bool.isRequired,\r\n};\r\n\r\nContractDetails.defaultProps = {\r\n  listOptions: {\r\n    terminalCodes: [],\r\n    contractTypeOptions: [],\r\n    carrierOptions: [],\r\n    unitOfVolume: [],\r\n    unitOfWeight: [],\r\n    finishedProductOptions: [],\r\n    customerDestinationOptions: {},\r\n  },\r\n  modContractItems: [],\r\n  isEnterpriseNode: false,\r\n};\r\nexport default function ContractDetails({\r\n  contract,\r\n  modContract,\r\n  onFieldChange,\r\n  validationErrors,\r\n  attributeValidationErrors,\r\n  onDateTextChange,\r\n  listOptions,\r\n  onAllTerminalsChange,\r\n  handleAddPlan,\r\n  handleDeletePlan,\r\n  selectedPlanRow,\r\n  handleRowSelectionChange,\r\n  handleCellDataEdit,\r\n  modContractItems,\r\n  selectedShareholder,\r\n  isEnterpriseNode,\r\n  onAttributeDataChange,\r\n  handleCompAttributeCellDataEdit,\r\n  modAttributeMetaDataList,\r\n  expandedRows,\r\n  toggleExpand,\r\n  compartmentDetailsPageSize,\r\n  isEnableForceClose,\r\n  handleForceClose,\r\n  handleViewShipments,\r\n  handleViewDispatch,\r\n  isAutoGeneratedContractCode,\r\n}) {\r\n  const [t] = useTranslation();\r\n\r\n  let customerOptions = [];\r\n  if (listOptions.customerDestinationOptions !== null && Object.keys(listOptions.customerDestinationOptions).length > 0) {\r\n     customerOptions = Utilities.transferListtoOptions(Object.keys(listOptions.customerDestinationOptions)\r\n  );\r\n  }\r\n  \r\n\r\n  // const [showShipments, setShowShipments] = useState(false);\r\n\r\n  const handleValidationErrorFilter = (attributeValidationErrors, terminal) => {\r\n    let attributeValidation = [];\r\n    attributeValidation = attributeValidationErrors.find(\r\n      (selectedAttribute) => {\r\n        return selectedAttribute.TerminalCode === terminal;\r\n      }\r\n    );\r\n    return attributeValidation.attributeValidationErrors;\r\n  };\r\n\r\n  const handleAttributeType = (data) => {\r\n    //debugger;\r\n    const attribute = data.rowData;\r\n    const handleAttributeDateValue = (dateval) => {\r\n      var chars = dateval.split(\"-\");\r\n      return new Date(chars[0], chars[1] - 1, chars[2]);\r\n    };\r\n    const convertAttributeDatetoString = (attribute, value) => {\r\n      var Dateval = new Date(value);\r\n      value =\r\n        Dateval.getFullYear() +\r\n        \"-\" +\r\n        (\"0\" + (Dateval.getMonth() + 1)).slice(-2) +\r\n        \"-\" +\r\n        (\"0\" + Dateval.getDate()).slice(-2);\r\n      handleCompAttributeCellDataEdit(attribute, value);\r\n    };\r\n    try {\r\n      return attribute.DataType.toLowerCase() ===\r\n        Constants.DataType.STRING.toLowerCase() ? (\r\n        <Input\r\n          fluid\r\n          value={attribute.AttributeValue}\r\n          disabled={attribute.IsReadonly}\r\n          onChange={(value) => handleCompAttributeCellDataEdit(data, value)}\r\n          reserveSpace={false}\r\n        />\r\n      ) : attribute.DataType.toLowerCase() ===\r\n        Constants.DataType.INT.toLowerCase() ? (\r\n        <Input\r\n          fluid\r\n          value={attribute.AttributeValue}\r\n          disabled={attribute.IsReadonly}\r\n          onChange={(value) => handleCompAttributeCellDataEdit(data, value)}\r\n          reserveSpace={false}\r\n        />\r\n      ) : attribute.DataType.toLowerCase() ===\r\n          Constants.DataType.FLOAT.toLowerCase() ||\r\n        attribute.DataType.toLowerCase() ===\r\n          Constants.DataType.LONG.toLowerCase() ||\r\n        attribute.DataType.toLowerCase() ===\r\n          Constants.DataType.DOUBLE.toLowerCase() ? (\r\n        <Input\r\n          fluid\r\n          value={\r\n            attribute.AttributeValue === null ||\r\n            attribute.AttributeValue === undefined ||\r\n            attribute.AttributeValue === \"\"\r\n              ? \"\"\r\n              : attribute.AttributeValue.toLocaleString()\r\n          }\r\n          disabled={attribute.IsReadonly}\r\n          onChange={(value) => handleCompAttributeCellDataEdit(data, value)}\r\n          reserveSpace={false}\r\n        />\r\n      ) : attribute.DataType.toLowerCase() ===\r\n        Constants.DataType.BOOL.toLowerCase() ? (\r\n        <Checkbox\r\n          checked={\r\n            attribute.AttributeValue.toString().toLowerCase() === \"true\"\r\n              ? true\r\n              : false\r\n          }\r\n          disabled={attribute.IsReadonly}\r\n          onChange={(value) => handleCompAttributeCellDataEdit(data, value)}\r\n        ></Checkbox>\r\n      ) : attribute.DataType.toLowerCase() ===\r\n        Constants.DataType.DATETIME.toLowerCase() ? (\r\n        <DatePicker\r\n          fluid\r\n          value={\r\n            attribute.AttributeValue === null ||\r\n            attribute.AttributeValue === undefined ||\r\n            attribute.AttributeValue === \"\"\r\n              ? \"\"\r\n              : handleAttributeDateValue(attribute.AttributeValue)\r\n          }\r\n          disabled={attribute.IsReadonly}\r\n          showYearSelector=\"true\"\r\n          onChange={(value) => convertAttributeDatetoString(data, value)}\r\n          onTextChange={(value) => {\r\n            convertAttributeDatetoString(data, value);\r\n          }}\r\n          reserveSpace={false}\r\n        />\r\n      ) : null;\r\n    } catch (error) {\r\n      console.log(\"OrderDetails:Error occured on handleAttributeType\", error);\r\n    }\r\n  };\r\n\r\n  const handleIsRequiredCompAttributes = (data) => {\r\n    return data.rowData.IsMandatory ? (\r\n      <div>\r\n        <span>{data.rowData.AttributeName}</span>\r\n        <div class=\"ui red circular empty label badge  circle-padding\" />\r\n      </div>\r\n    ) : (\r\n      <div>\r\n        <span>{data.rowData.AttributeName}</span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const expanderTemplate = (data) => {\r\n    //const open = expandedRows.includes(data.rowData);\r\n    const open =\r\n      expandedRows.findIndex((x) => x.SeqNumber === data.rowData.SeqNumber) >= 0\r\n        ? true\r\n        : false;\r\n    return (\r\n      <div\r\n        onClick={() => toggleExpand(data.rowData, open)}\r\n        className=\"compartmentIcon gridButtonFontColor\"\r\n      >\r\n        <span>{open ? t(\"Hide_Attributes\") : t(\"View_Attributes\")}</span>\r\n        <Icon\r\n          root=\"common\"\r\n          name={open ? \"caret-up\" : \"caret-down\"}\r\n          className=\"margin_l10\"\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  function rowExpansionTemplate(data) {\r\n    return Array.isArray(data.AttributesforUI) &&\r\n      data.AttributesforUI.length > 0 ? (\r\n      <div className=\"childTable ChildGridViewAllShipmentLoadingDetails\">\r\n        <DataTable\r\n          data={data.AttributesforUI}\r\n          rows={compartmentDetailsPageSize}\r\n        >\r\n          {isEnterpriseNode ? (\r\n            <DataTable.Column\r\n              className=\"compColHeight\"\r\n              key=\"TerminalCode\"\r\n              field=\"TerminalCode\"\r\n              header={t(\"CompartmentTerminal\")}\r\n              editable={false}\r\n            ></DataTable.Column>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <DataTable.Column\r\n            className=\"compColHeight\"\r\n            key=\"AttributeName\"\r\n            header={t(\"CompartmentAttributeName\")}\r\n            renderer={handleIsRequiredCompAttributes}\r\n            editable={false}\r\n          ></DataTable.Column>\r\n          <DataTable.Column\r\n            className=\"compColHeight\"\r\n            header={t(\"CompartmentAttributeValue\")}\r\n            renderer={handleAttributeType}\r\n          />\r\n          {Array.isArray(data.AttributesforUI) &&\r\n          data.AttributesforUI.length > compartmentDetailsPageSize ? (\r\n            <DataTable.Pagination />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </DataTable>\r\n      </div>\r\n    ) : (\r\n      <div className=\"compartmentIcon\">\r\n        <div className=\"gridButtonAlignLeft\">\r\n          {t(\"CustomerInventory_NoRecordsFound\")}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const handleTextEdit = (cellData) => {\r\n    let val = modContractItems[cellData.rowIndex][cellData.field];\r\n    if (cellData.field === \"Quantity\" && val !== null && val !== \"\")\r\n      val = val.toLocaleString();\r\n    return (\r\n      // <TranslationConsumer>\r\n      //   {(t) => (\r\n      <Input\r\n        fluid\r\n        value={val}\r\n        onChange={(value) => handleCellDataEdit(value, cellData)}\r\n        reserveSpace={false}\r\n        // error={t(validationErrors.Description)}\r\n        // disabled={cellData.field === \"Code\" ? true : false}\r\n      />\r\n      //   )}\r\n      // </TranslationConsumer>\r\n    );\r\n  };\r\n\r\n  const handleDateEdit = (cellData) => {\r\n    let val = modContractItems[cellData.rowIndex][cellData.field];\r\n    return (\r\n      // <TranslationConsumer>\r\n      //   {(t) => (\r\n      <DatePicker\r\n        fluid\r\n        value={val === null ? \"\" : new Date(val)}\r\n        //label={t(`ContractInfo_StartDate`)}\r\n        showYearSelector=\"true\"\r\n        // indicator=\"required\"\r\n        // disablePast={true}\r\n        //type=\"datetime\"\r\n        displayFormat={getCurrentDateFormat()}\r\n        onChange={(value) => handleCellDataEdit(value, cellData)}\r\n        onTextChange={(value, error) => {\r\n          handleCellDataEdit(value, cellData);\r\n        }}\r\n        // error={t(validationErrors.StartDate)}\r\n        reserveSpace={false}\r\n      />\r\n      //   )}\r\n      // </TranslationConsumer>\r\n    );\r\n  };\r\n\r\n  const handleDropdownEdit = (cellData) => {\r\n    let dropDownOptions = [];\r\n    if (cellData.field === \"QuantityUOM\") {\r\n      dropDownOptions = [\r\n        ...listOptions.unitOfVolume,\r\n        ...listOptions.unitOfWeight,\r\n      ];\r\n    }\r\n    if (cellData.field === \"FinishedProductCode\")\r\n      dropDownOptions = listOptions.finishedProductOptions;\r\n\r\n    if (cellData.field === \"DestinationCode\") {\r\n      let destOptions =\r\n        listOptions.customerDestinationOptions[modContract.CustomerCode];\r\n      if (destOptions !== undefined && Array.isArray(destOptions)) {\r\n        dropDownOptions = Utilities.transferListtoOptions(destOptions);\r\n        dropDownOptions = getOptionsWithSelect(\r\n          dropDownOptions,\r\n          t(\"Common_Select\")\r\n        );\r\n      }\r\n    }\r\n    return (\r\n      <Select\r\n        className=\"selectDropwdown\"\r\n        placeholder={t(\"Common_Select\")}\r\n        value={modContractItems[cellData.rowIndex][cellData.field]}\r\n        fluid\r\n        options={dropDownOptions}\r\n        onChange={(value) => handleCellDataEdit(value, cellData)}\r\n        // indicator=\"required\"\r\n        reserveSpace={false}\r\n        search={true}\r\n        noResultsMessage={t(\"noResultsMessage\")}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"detailsContainer\">\r\n      <div className=\"row\">\r\n        <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <Input\r\n            fluid\r\n            value={modContract.ContractCode}\r\n            label={t(\"ContractInfo_ContractCode\")}\r\n            indicator=\"required\"\r\n            disabled={\r\n              isAutoGeneratedContractCode ? true : contract.ContractCode !== \"\"\r\n            }\r\n            onChange={(data) => onFieldChange(\"ContractCode\", data)}\r\n            error={t(validationErrors.ContractCode)}\r\n            reserveSpace={false}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <Select\r\n            fluid\r\n            placeholder={t(\"Common_Select\")}\r\n            label={t(\"Customer_Code\")}\r\n            indicator=\"required\"\r\n            value={modContract.CustomerCode}\r\n            options={customerOptions}\r\n            onChange={(data) => onFieldChange(\"CustomerCode\", data)}\r\n            error={t(validationErrors.CustomerCode)}\r\n            reserveSpace={false}\r\n            search={true}\r\n            noResultsMessage={t(\"noResultsMessage\")}\r\n          />\r\n        </div>\r\n        <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <Input\r\n            fluid\r\n            value={\r\n              modContract.Description === null ? \"\" : modContract.Description\r\n            }\r\n            label={t(\"ContractInfo_Description\")}\r\n            onChange={(data) => onFieldChange(\"Description\", data)}\r\n            error={t(validationErrors.Description)}\r\n            reserveSpace={false}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <DatePicker\r\n            fluid\r\n            value={\r\n              modContract.StartDate === null\r\n                ? \"\"\r\n                : Utilities.convertStringToCommonDateFormat(\r\n                    modContract.StartDate\r\n                  )\r\n            }\r\n            displayFormat={getCurrentDateFormat()}\r\n            label={t(`ContractInfo_StartDate`)}\r\n            showYearSelector=\"true\"\r\n            indicator=\"required\"\r\n            //type=\"datetime\"\r\n            disablePast={true}\r\n            onChange={(data) => onFieldChange(\"StartDate\", data)}\r\n            onTextChange={(value, error) => {\r\n              onDateTextChange(\"StartDate\", value, error);\r\n            }}\r\n            error={t(validationErrors.StartDate)}\r\n            reserveSpace={false}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <DatePicker\r\n            fluid\r\n            value={\r\n              modContract.EndDate === null\r\n                ? \"\"\r\n                : Utilities.convertStringToCommonDateFormat(modContract.EndDate)\r\n            }\r\n            displayFormat={getCurrentDateFormat()}\r\n            label={t(`ContractInfo_EndDate`)}\r\n            showYearSelector=\"true\"\r\n            indicator=\"required\"\r\n            //type=\"datetime\"\r\n            disablePast={true}\r\n            onChange={(data) => onFieldChange(\"EndDate\", data)}\r\n            onTextChange={(value, error) => {\r\n              onDateTextChange(\"EndDate\", value, error);\r\n            }}\r\n            error={t(validationErrors.EndDate)}\r\n            reserveSpace={false}\r\n          />\r\n        </div>\r\n\r\n        {/* <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <Select\r\n            fluid\r\n            placeholder={t(\"Common_Select\")}\r\n            label={t(\"ContractInfo_ContractType\")}\r\n            value={getKeyByValue(\r\n              Constants.contractType,\r\n              modContract.ContractType\r\n            )}\r\n            options={listOptions.contractTypeOptions}\r\n            disabled={true}\r\n          // onChange={(data) => onFieldChange(\"Active\", data)}\r\n          />\r\n        </div> */}\r\n\r\n        <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <Input\r\n            fluid\r\n            value={\r\n              getKeyByValue(Constants.contractStatus, modContract.Status) ===\r\n              undefined\r\n                ? \"\"\r\n                : getKeyByValue(Constants.contractStatus, modContract.Status)\r\n            }\r\n            label={t(\"ContractInfo_Status\")}\r\n            disabled={true}\r\n            //onChange={(data) => onFieldChange(\"Description\", data)}\r\n            //error={t(validationErrors.Description)}\r\n            reserveSpace={false}\r\n          />\r\n        </div>\r\n        {/* <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <Select\r\n            fluid\r\n            placeholder={t(\"Common_All\")}\r\n            //className=\"maxHeight\"\r\n            // style={{ maxHeight: \"20px!important\" }}\r\n            label={t(\"ContractInfo_AssociatedCarrier\")}\r\n            value={modContract.CarrierCollection}\r\n            options={listOptions.carrierOptions}\r\n            multiple={true}\r\n            onChange={(data) => onFieldChange(\"CarrierCollection\", data)}\r\n            error={t(validationErrors.CarrierCollection)}\r\n            reserveSpace={false}\r\n            search={true}\r\n            noResultsMessage={t(\"noResultsMessage\")}\r\n            // onChange={(data) => onFieldChange(\"Active\", data)}\r\n          />\r\n        </div> */}\r\n\r\n        {isEnterpriseNode ? (\r\n          <div className=\"col-12 col-md-6 col-lg-4\">\r\n            <AssociatedTerminals\r\n              terminalList={listOptions.terminalCodes}\r\n              selectedTerminal={modContract.TerminalCodes}\r\n              error={t(validationErrors.TerminalCodes)}\r\n              onFieldChange={onFieldChange}\r\n              onCheckChange={onAllTerminalsChange}\r\n            ></AssociatedTerminals>\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <Select\r\n            fluid\r\n            placeholder={t(\"Common_Select\")}\r\n            label={t(\"ShipmentContract_Status\")}\r\n            value={modContract.Active}\r\n            options={[\r\n              { text: t(\"ViewShipment_Ok\"), value: true },\r\n              { text: t(\"ViewShipmentStatus_Inactive\"), value: false },\r\n            ]}\r\n            onChange={(data) => onFieldChange(\"Active\", data)}\r\n            disabled={contract.ContractCode === \"\" ? true : false}\r\n          />\r\n        </div>\r\n        <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <Input\r\n            fluid\r\n            value={modContract.Remarks === null ? \"\" : modContract.Remarks}\r\n            label={t(\"ShipmentOrder_Remarks\")}\r\n            onChange={(data) => onFieldChange(\"Remarks\", data)}\r\n            indicator={modContract.Active !== contract.Active ? \"required\" : \"\"}\r\n            error={t(validationErrors.Remarks)}\r\n            reserveSpace={false}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"col-12 col-md-12 col-lg-12\">\r\n          <Select\r\n            fluid\r\n            placeholder={t(\"Common_All\")}\r\n            //className=\"maxHeight\"\r\n            // style={{ maxHeight: \"20px!important\" }}\r\n            label={t(\"ContractInfo_AssociatedCarrier\")}\r\n            value={modContract.CarrierCollection}\r\n            options={listOptions.carrierOptions}\r\n            multiple={true}\r\n            onChange={(data) => onFieldChange(\"CarrierCollection\", data)}\r\n            error={t(validationErrors.CarrierCollection)}\r\n            reserveSpace={false}\r\n            search={true}\r\n            noResultsMessage={t(\"noResultsMessage\")}\r\n            // onChange={(data) => onFieldChange(\"Active\", data)}\r\n          />\r\n        </div>\r\n      </div>\r\n      {modAttributeMetaDataList.length > 0\r\n        ? modAttributeMetaDataList.map((attire) => (\r\n            <ErrorBoundary>\r\n              <Accordion>\r\n                <Accordion.Content\r\n                  className=\"attributeAccordian\"\r\n                  title={\r\n                    isEnterpriseNode\r\n                      ? attire.TerminalCode + \" - \" + t(\"Attributes_Header\")\r\n                      : t(\"Attributes_Header\")\r\n                  }\r\n                >\r\n                  <AttributeDetails\r\n                    selectedAttributeList={attire.attributeMetaDataList}\r\n                    handleCellDataEdit={onAttributeDataChange}\r\n                    attributeValidationErrors={handleValidationErrorFilter(\r\n                      attributeValidationErrors,\r\n                      attire.TerminalCode\r\n                    )}\r\n                  ></AttributeDetails>\r\n                </Accordion.Content>\r\n              </Accordion>\r\n            </ErrorBoundary>\r\n          ))\r\n        : null}\r\n      <div className=\"row compartmentRow\">\r\n        <div className=\"col col-md-8 col-lg-9 col col-xl-9\">\r\n          <h4>{t(\"ContractInfo_Details\")}</h4>\r\n        </div>\r\n        <div className=\"col col-md-4 col-lg-3 col-xl-3\">\r\n          <div className=\"compartmentIconContainer\">\r\n            <div onClick={handleAddPlan} className=\"compartmentIcon\">\r\n              <div>\r\n                <Icon root=\"common\" name=\"badge-plus\" size=\"medium\" />\r\n              </div>\r\n              <div className=\"margin_l10\">\r\n                <h5 className=\"font14\">{t(\"TrailerInfo_Add\")}</h5>\r\n              </div>\r\n            </div>\r\n\r\n            <div\r\n              onClick={handleDeletePlan}\r\n              className=\"compartmentIcon margin_l30\"\r\n            >\r\n              <div>\r\n                <Icon root=\"common\" name=\"delete\" size=\"medium\" />\r\n              </div>\r\n              <div className=\"margin_l10\">\r\n                <h5 className=\"font14\">{t(\"TrailerInfo_Delete\")}</h5>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"row marginRightZero tableScroll\">\r\n        <div className=\"col-12 detailsTable\">\r\n          <DataTable\r\n            data={modContractItems}\r\n            rowExpansionTemplate={rowExpansionTemplate}\r\n            expandedRows={expandedRows}\r\n            selectionMode=\"multiple\"\r\n            selection={selectedPlanRow}\r\n            onSelectionChange={handleRowSelectionChange}\r\n            scrollable={true}\r\n            scrollHeight=\"320px\"\r\n          >\r\n            <DataTable.Column\r\n              className=\"compColHeight colminWidth\"\r\n              key=\"FinishedProductCode\"\r\n              field=\"FinishedProductCode\"\r\n              header={handleIsRequiredCompartmentCell(\r\n                t(\"ContractInfo_Product\")\r\n              )}\r\n              // rowHeader={true}\r\n              editable={true}\r\n              editFieldType=\"text\"\r\n              customEditRenderer={handleDropdownEdit}\r\n            ></DataTable.Column>\r\n            <DataTable.Column\r\n              className=\"compColHeight colminWidth\"\r\n              key=\"DestinationCode\"\r\n              field=\"DestinationCode\"\r\n              header={t(\"ContractInfo_Destination\")}\r\n              // rowHeader={true}\r\n              editable={true}\r\n              editFieldType=\"text\"\r\n              customEditRenderer={handleDropdownEdit}\r\n            ></DataTable.Column>\r\n            <DataTable.Column\r\n              className=\"compColHeight colminWidth\"\r\n              key=\"StartDate\"\r\n              field=\"StartDate\"\r\n              header={t(\"ContractInfo_StartDate\")}\r\n              // rowHeader={true}\r\n              editable={true}\r\n              editFieldType=\"text\"\r\n              renderer={(cellData) =>\r\n                cellData.value === null\r\n                  ? \"\"\r\n                  : new Date(cellData.value).toLocaleDateString()\r\n              }\r\n              customEditRenderer={handleDateEdit}\r\n            ></DataTable.Column>\r\n\r\n            <DataTable.Column\r\n              className=\"compColHeight colminWidth\"\r\n              key=\"EndDate\"\r\n              field=\"EndDate\"\r\n              header={t(\"ContractInfo_EndDate\")}\r\n              // rowHeader={true}\r\n              editable={true}\r\n              editFieldType=\"text\"\r\n              renderer={(cellData) =>\r\n                cellData.value === null\r\n                  ? \"\"\r\n                  : new Date(cellData.value).toLocaleDateString()\r\n              }\r\n              // renderer={(cellData) =>\r\n              //   cellData.value === null\r\n              //     ? \"\"\r\n              //     : new Date(cellData.value).toLocaleDateString() +\r\n              //       \" \" +\r\n              //       new Date(cellData.value).toLocaleTimeString()\r\n              // }\r\n              customEditRenderer={handleDateEdit}\r\n            ></DataTable.Column>\r\n\r\n            <DataTable.Column\r\n              className=\"compColHeight colminWidth\"\r\n              key=\"Quantity\"\r\n              field=\"Quantity\"\r\n              header={handleIsRequiredCompartmentCell(\r\n                t(\"ContractInfo_Quantity\")\r\n              )}\r\n              // rowHeader={true}\r\n              editable={true}\r\n              editFieldType=\"text\"\r\n              renderer={(cellData) =>\r\n                cellData.value === null ? \"\" : cellData.value.toLocaleString()\r\n              }\r\n              customEditRenderer={handleTextEdit}\r\n            ></DataTable.Column>\r\n\r\n            <DataTable.Column\r\n              className=\"compColHeight colminWidth\"\r\n              key=\"QuantityUOM\"\r\n              field=\"QuantityUOM\"\r\n              header={handleIsRequiredCompartmentCell(t(\"ShipmentOrder_UOM\"))}\r\n              //rowHeader={true}\r\n              editable={true}\r\n              editFieldType=\"text\"\r\n              customEditRenderer={handleDropdownEdit}\r\n            ></DataTable.Column>\r\n\r\n            <DataTable.Column\r\n              className=\"compColHeight disabledColumn colminWidth\"\r\n              key=\"BlockedQuantity\"\r\n              field=\"BlockedQuantity\"\r\n              header={t(\"ContractInfo_BlockedQuantity\")}\r\n              // rowHeader={true}\r\n              renderer={(cellData) =>\r\n                cellData.value === null ? \"0\" : cellData.value.toLocaleString()\r\n              }\r\n              editFieldType=\"text\"\r\n            ></DataTable.Column>\r\n\r\n            <DataTable.Column\r\n              className=\"compColHeight disabledColumn colminWidth\"\r\n              key=\"LoadedQuantity\"\r\n              field=\"LoadedQuantity\"\r\n              header={t(\"ContractInfo_LoadedQty\")}\r\n              // rowHeader={true}\r\n              renderer={(cellData) =>\r\n                cellData.value === null ? \"0\" : cellData.value.toLocaleString()\r\n              }\r\n              editFieldType=\"text\"\r\n            ></DataTable.Column>\r\n\r\n            <DataTable.Column\r\n              className=\"compColHeight disabledColumn colminWidth\"\r\n              key=\"ReaminingQuantity\"\r\n              field=\"RemainingQuantity\"\r\n              header={t(\"ContractInfo_RemQuantity\")}\r\n              // rowHeader={true}\r\n              renderer={(cellData) =>\r\n                cellData.value === null ? \"0\" : cellData.value.toLocaleString()\r\n              }\r\n              editFieldType=\"text\"\r\n            ></DataTable.Column>\r\n            <DataTable.Column\r\n              className=\"expandedColumn\"\r\n              initialWidth=\"175px\"\r\n              renderer={expanderTemplate}\r\n            />\r\n          </DataTable>\r\n        </div>\r\n      </div>\r\n\r\n      {/* {contract.ContractCode !== \"\" &&\r\n        contract.TransportationType === Constants.TransportationType.ROAD ? (\r\n        <div className=\"row\">\r\n          <div className=\"col-12\">\r\n            <Accordion>\r\n              <Accordion.Content\r\n                title={t(\"ShipmentOrder_ViewShipments\")}\r\n                active={showShipments}\r\n                onClick={() => setShowShipments(!showShipments)}\r\n              >\r\n                <div className=\"borderTable\">\r\n                  <TruckShipmentProject\r\n                    shipmentSource={Constants.shipmentFrom.Contract}\r\n                    shipmentSourceCode={modContract.ContractCode}\r\n                      selectedShareholder={selectedShareholder}\r\n                      shipmentSourceCompartmentItems={modContractItems}\r\n                      shipmentSourceDetails={modContract}\r\n                  />\r\n                </div>\r\n              </Accordion.Content>\r\n            </Accordion>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n      {contract.ContractCode !== \"\" &&\r\n        contract.TransportationType === Constants.TransportationType.RAIL ? (\r\n        <div className=\"row\">\r\n          <div className=\"col-12\">\r\n            <Accordion>\r\n              <Accordion.Content\r\n                title={t(\"ViewRailDispatchList_RailShipments\")}\r\n                active={showShipments}\r\n                onClick={() => setShowShipments(!showShipments)}\r\n              >\r\n                <div className=\"borderTable\">\r\n                  <RailDispatchProject\r\n                    shipmentSource={2}\r\n                    shipmentSourceCode={modContract.ContractCode}\r\n                      selectedShareholder={selectedShareholder}\r\n                      shipmentSourceCompartmentItems={modContractItems}\r\n                      shipmentSourceDetails={modContract}\r\n                  />\r\n                </div>\r\n              </Accordion.Content>\r\n            </Accordion>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )} */}\r\n\r\n      <div className=\"row\">\r\n        <div\r\n          className=\"col col-md-8 col-lg-9 col col-xl-12\"\r\n          style={{ textAlign: \"right\" }}\r\n        >\r\n          <Button\r\n            type=\"primary\"\r\n            onClick={handleForceClose}\r\n            disabled={!isEnableForceClose}\r\n            content={t(\"ShipmentOrder_BtnForceClose\")}\r\n          ></Button>\r\n          {contract.ContractCode !== \"\" &&\r\n          contract.TransportationType === Constants.TransportationType.ROAD ? (\r\n            <Button\r\n              content={t(\"ShipmentOrder_ViewShipments\")}\r\n              onClick={handleViewShipments}\r\n            ></Button>\r\n          ) : null}\r\n          {contract.ContractCode !== \"\" &&\r\n          contract.TransportationType === Constants.TransportationType.RAIL ? (\r\n            <Button\r\n              content={t(\"DispatchContract_ViewDispatch\")}\r\n              onClick={handleViewDispatch}\r\n            ></Button>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport * as Utilities from \"../../../JS/Utilities\";\r\nimport * as KeyCodes from \"../../../JS/KeyCodes\";\r\nimport * as Constants from \"../../../JS/Constants\";\r\nimport * as RestAPIs from \"../../../JS/RestApis\";\r\nimport {\r\n  contractAttributeEntity,\r\n  contractItemAttributeEntity,\r\n} from \"../../../JS/AttributeEntity\";\r\nimport { connect } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport lodash from \"lodash\";\r\nimport ErrorBoundary from \"../../ErrorBoundary\";\r\nimport { emptyContract } from \"../../../JS/DefaultEntities\";\r\nimport TMDetailsHeader from \"../../UIBase/Common/TMDetailsHeader\";\r\nimport {\r\n  functionGroups,\r\n  fnContract,\r\n  fnContractForceClose,\r\n  fnKPIInformation,\r\n} from \"../../../JS/FunctionGroups\";\r\nimport { LoadingPage } from \"../../UIBase/Common/LoadingPage\";\r\nimport { TMDetailsUserActions } from \"../../UIBase/Common/TMDetailsUserActions\";\r\nimport { contractValidationDef } from \"../../../JS/ValidationDef\";\r\nimport ContractDetails from \"../../UIBase/Details/ContractDetails\";\r\nimport { contractPlanValidationDef } from \"../../../JS/DetailsTableValidationDef\";\r\nimport NotifyEvent from \"../../../JS/NotifyEvent\";\r\nimport { toast } from \"react-toastify\";\r\nimport TruckShipmentProject from \"../../Composite/Entity/TruckShipmentComposite\";\r\nimport { TranslationConsumer } from \"@scuf/localization\";\r\nimport { Button, Modal } from \"@scuf/common\";\r\nimport RailDispatchProject from \"../../Composite/Entity/RailDispatchComposite\";\r\nimport * as DateFieldsInEntities from \"../../../JS/DateFieldsInEntities\";\r\nimport TMDetailsKPILayout from \"../Common/TMDetailsKPILayout\";\r\nimport { kpiContractDetail } from \"../../../JS/KPIPageName\";\r\nimport UserAuthenticationLayout from \"../Common/UserAuthentication\";\r\nclass ContractDetailsComposite extends Component {\r\n  state = {\r\n    contract: {},\r\n    modContract: {},\r\n    validationErrors: Utilities.getInitialValidationErrors(\r\n      contractValidationDef\r\n    ),\r\n    modContractItems: [],\r\n    terminalOptions: [],\r\n    volumeUOMOptions: [],\r\n    weightUOMOptions: [],\r\n    carrierOptions: [],\r\n    isReadyToRender: false,\r\n    saveEnabled: false,\r\n    selectedPlanRow: [],\r\n    finishedProductOptions: [],\r\n    customerDestinationOptions: {},\r\n    attributeMetaDataList: [],\r\n    compartmentAttributeMetaDataList: [],\r\n    modAttributeMetaDataList: [],\r\n    attributeValidationErrors: [],\r\n    expandedRows: [],\r\n    isEnableForceClose: false,\r\n    isShowTruckShipment: false,\r\n    isShowBackButton: false,\r\n    isShowRailDispatch: false,\r\n    isAutoGeneratedContractCode: false,\r\n    isAllowtoUpdate: false,\r\n    updatedContractStatus: \"\",\r\n    contractKPIList: [],\r\n\r\n    scheduledContractUpdate: false,\r\n    showAuthenticationLayout: false,\r\n    showForceCloseAuthenticationLayout: false,\r\n    tempContract: {},\r\n    tempContactStatusObj: {},\r\n  };\r\n\r\n  componentDidMount() {\r\n    Utilities.setArchive(this.props.userDetails.EntityResult.IsArchived);\r\n    let isNewContract = false;\r\n    if (this.props.selectedRow.Common_Code === undefined) isNewContract = true;\r\n    //this.getContract(isNewContract);\r\n    this.getAttributes(isNewContract);\r\n    this.getTerminalList();\r\n    this.getUOMList();\r\n    this.getCarrierList();\r\n    this.getFinishedProductList();\r\n    this.getCustomerDestinationList();\r\n  }\r\n\r\n  getAttributes(isNewContract) {\r\n    try {\r\n      axios(\r\n        RestAPIs.GetAttributesMetaData,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          [contractAttributeEntity, contractItemAttributeEntity],\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      ).then((response) => {\r\n        var result = response.data;\r\n        if (result.IsSuccess === true) {\r\n          this.setState(\r\n            {\r\n              attributeMetaDataList: lodash.cloneDeep(\r\n                result.EntityResult.CONTRACT\r\n              ),\r\n              attributeValidationErrors:\r\n                Utilities.getAttributeInitialValidationErrors(\r\n                  result.EntityResult.CONTRACT\r\n                ),\r\n              compartmentAttributeMetaDataList: lodash.cloneDeep(\r\n                result.EntityResult.CONTRACT_ITEM\r\n              ),\r\n            },\r\n            () => this.getContract(isNewContract)\r\n          );\r\n        } else {\r\n          console.log(\"Failed to get Attributes\");\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.log(\"Error while getting Attributes:\", error);\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    try {\r\n      if (\r\n        this.state.contract.ContractCode !== \"\" &&\r\n        nextProps.selectedRow.Common_Code === undefined &&\r\n        this.props.tokenDetails.tokenInfo === nextProps.tokenDetails.tokenInfo\r\n      ) {\r\n        this.getContract(true);\r\n        let validationErrors = { ...this.state.validationErrors };\r\n        Object.keys(validationErrors).forEach((key) => {\r\n          validationErrors[key] = \"\";\r\n        });\r\n        this.setState({ validationErrors });\r\n      }\r\n    } catch (error) {\r\n      console.log(\r\n        \"ContractDetailsComposite:Error occured on componentWillReceiveProps\",\r\n        error\r\n      );\r\n    }\r\n  }\r\n\r\n  getCustomerDestinationList() {\r\n    axios(\r\n      RestAPIs.GetCustomerDestinations +\r\n      \"?ShareholderCode=\" +\r\n      this.props.selectedShareholder +\r\n      \"&TransportationType=\" +\r\n      this.props.transportationType,\r\n      Utilities.getAuthenticationObjectforGet(this.props.tokenDetails.tokenInfo)\r\n    )\r\n      .then((response) => {\r\n        var result = response.data;\r\n        // console.log(response);\r\n\r\n        if (result.IsSuccess === true) {\r\n          if (Array.isArray(result.EntityResult)) {\r\n            let shareholderCustomers = result.EntityResult.filter(\r\n              (shareholderCust) =>\r\n                shareholderCust.ShareholderCode ===\r\n                this.props.selectedShareholder\r\n            );\r\n            if (shareholderCustomers.length > 0) {\r\n              let customerDestinationOptions =\r\n                shareholderCustomers[0].CustomerDestinationsList;\r\n              this.setState({ customerDestinationOptions });\r\n            } else {\r\n              console.log(\"no customers identified for shareholder\");\r\n            }\r\n          } else {\r\n            console.log(\"customerdestinations not identified for shareholder\");\r\n          }\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while getting Customer List:\", error);\r\n      });\r\n  }\r\n\r\n  getFinishedProductList() {\r\n    axios(\r\n      RestAPIs.GetFinishedProductCodes +\r\n      \"?ShareholderCode=\" +\r\n      this.props.selectedShareholder,\r\n      Utilities.getAuthenticationObjectforGet(this.props.tokenDetails.tokenInfo)\r\n    ).then((response) => {\r\n      var result = response.data;\r\n      if (result.IsSuccess === true) {\r\n        if (\r\n          Array.isArray(result.EntityResult) &&\r\n          result.EntityResult.length > 0\r\n        ) {\r\n          let finishedProductOptions = Utilities.transferListtoOptions(\r\n            result.EntityResult\r\n          );\r\n          this.setState({ finishedProductOptions });\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  getUOMList() {\r\n    axios(\r\n      RestAPIs.GetUOMList,\r\n      Utilities.getAuthenticationObjectforGet(this.props.tokenDetails.tokenInfo)\r\n    )\r\n      .then((response) => {\r\n        // console.log(response);\r\n        var result = response.data;\r\n        if (result.IsSuccess === true) {\r\n          if (result.EntityResult !== null) {\r\n            let weightUOMs = result.EntityResult.MASS;\r\n            let weightUOMOptions = [];\r\n            weightUOMs.forEach((weightOption) => {\r\n              weightUOMOptions.push({\r\n                text: weightOption,\r\n                value: weightOption,\r\n              });\r\n            });\r\n\r\n            let volumeUOMs = result.EntityResult.VOLUME;\r\n            let volumeUOMOptions = [];\r\n            volumeUOMs.forEach((volumeOption) => {\r\n              volumeUOMOptions.push({\r\n                text: volumeOption,\r\n                value: volumeOption,\r\n              });\r\n            });\r\n\r\n            // let lengthUOMs = result.EntityResult.LENGTH;\r\n            // let lengthUOMOptions = [];\r\n            // lengthUOMs.forEach((lengthOption) => {\r\n            //   lengthUOMOptions.push({\r\n            //     text: lengthOption,\r\n            //     value: lengthOption,\r\n            //   });\r\n            // });\r\n\r\n            this.setState({\r\n              volumeUOMOptions,\r\n              weightUOMOptions,\r\n            });\r\n          }\r\n        } else {\r\n          console.log(\"Error in getUOM:\", result.ErrorList);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while getting getUOM:\", error);\r\n      });\r\n  }\r\n\r\n  getTerminalList() {\r\n    try {\r\n      axios(\r\n        RestAPIs.GetTerminals,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          [this.props.selectedShareholder],\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      ).then((response) => {\r\n        let result = response.data;\r\n        if (result.IsSuccess === true) {\r\n          if (\r\n            Array.isArray(result.EntityResult) &&\r\n            result.EntityResult.length > 0\r\n          )\r\n            this.setState({ terminalOptions: result.EntityResult });\r\n        }\r\n      });\r\n    } catch (err) {\r\n      console.log(\"Contract Composite:Error occured on getTerminalsList\", err);\r\n    }\r\n  }\r\n  getContract(isNewContract) {\r\n    if (isNewContract) {\r\n      //this.terminalOptions = [];\r\n      emptyContract.StartDate = new Date();\r\n      //emptyContract.EndDate = new Date();\r\n      emptyContract.TerminalCodes =\r\n        this.state.terminalOptions.length === 1\r\n          ? [...this.state.terminalOptions]\r\n          : [];\r\n      this.handleResetAttributeValidationError();\r\n      this.setState(\r\n        {\r\n          contract: lodash.cloneDeep(emptyContract),\r\n          modContract: this.GetAutoGeneratedContractCode(\r\n            lodash.cloneDeep(emptyContract)\r\n          ),\r\n          modContractItems: [],\r\n          isReadyToRender: true,\r\n          modAttributeMetaDataList: [],\r\n          contractKPIList: [],\r\n          saveEnabled: Utilities.isInFunction(\r\n            this.props.userDetails.EntityResult.FunctionsList,\r\n            functionGroups.add,\r\n            fnContract\r\n          ),\r\n          isEnableForceClose: false,\r\n        },\r\n        () => {\r\n          if (this.props.userDetails.EntityResult.IsEnterpriseNode === false)\r\n            this.localNodeAttribute();\r\n        }\r\n      );\r\n\r\n      return;\r\n    }\r\n\r\n    let keyCode = [\r\n      {\r\n        key: KeyCodes.contractCode,\r\n        value:\r\n          this.props.selectedRow.Common_Code === undefined\r\n            ? this.state.modContract.ContractCode\r\n            : this.props.selectedRow.Common_Code,\r\n      },\r\n    ];\r\n    let obj = {\r\n      ShareHolderCode: this.props.selectedShareholder,\r\n      keyDataCode: KeyCodes.contractCode,\r\n      KeyCodes: keyCode,\r\n    };\r\n    axios(\r\n      RestAPIs.GetContract,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        let result = response.data;\r\n\r\n        if (result.IsSuccess === true) {\r\n          let modContractItems = [];\r\n          if (\r\n            result.EntityResult !== null &&\r\n            result.EntityResult.ContractItems !== null &&\r\n            result.EntityResult.ContractItems.length > 0\r\n          ) {\r\n            modContractItems = Utilities.addSeqNumberToListObject(\r\n              lodash.cloneDeep(result.EntityResult.ContractItems)\r\n            );\r\n          }\r\n          var foceCloseStatus =\r\n            Utilities.isInFunction(\r\n              this.props.userDetails.EntityResult.FunctionsList,\r\n              functionGroups.modify,\r\n              fnContractForceClose\r\n            ) && result.EntityResult.Status !== Constants.contractStatus.CLOSED;\r\n          this.setState(\r\n            {\r\n              isReadyToRender: true,\r\n              contract: lodash.cloneDeep(result.EntityResult),\r\n              modContract: lodash.cloneDeep(result.EntityResult),\r\n              modContractItems: lodash.cloneDeep(modContractItems),\r\n              isEnableForceClose: foceCloseStatus,\r\n              updatedContractStatus: result.EntityResult.Status,\r\n              saveEnabled: Utilities.isInFunction(\r\n                this.props.userDetails.EntityResult.FunctionsList,\r\n                functionGroups.modify,\r\n                fnContract\r\n              ) && result.EntityResult.Status!== Constants.contractStatus.CLOSED,\r\n            },\r\n            () => {\r\n              this.getKPIList(this.props.selectedShareholder, result.EntityResult.ContractCode)\r\n              if (this.props.userDetails.EntityResult.IsEnterpriseNode) {\r\n                this.terminalSelectionChange(result.EntityResult.TerminalCodes);\r\n              } else {\r\n                this.localNodeAttribute();\r\n              }\r\n            }\r\n          );\r\n        } else {\r\n          this.setState({\r\n            modContract: lodash.cloneDeep(emptyContract),\r\n            contract: lodash.cloneDeep(emptyContract),\r\n            isReadyToRender: true,\r\n          });\r\n          console.log(\"Error in GetContract:\", result.ErrorList);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while getting Contract:\", error);\r\n      });\r\n  }\r\n\r\n  GetAutoGeneratedContractCode(contract) {\r\n    let modContract = contract;\r\n    axios(\r\n      RestAPIs.GetAutoGeneratedContractCode,\r\n      Utilities.getAuthenticationObjectforGet(this.props.tokenDetails.tokenInfo)\r\n    )\r\n      .then((response) => {\r\n        var result = response.data;\r\n        if (result.IsSuccess === true) {\r\n          if (\r\n            result.EntityResult !== null &&\r\n            result.EntityResult !== undefined &&\r\n            result.EntityResult !== \"\"\r\n          ) {\r\n            modContract.ContractCode = result.EntityResult;\r\n            this.setState({ isAutoGeneratedContractCode: true });\r\n          } else {\r\n            this.setState({ isAutoGeneratedContractCode: false });\r\n          }\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while getting AutoGeneratedShipmentCode:\", error);\r\n      });\r\n    return modContract;\r\n  }\r\n\r\n  handleResetAttributeValidationError() {\r\n    try {\r\n      var attributeMetaDataList = lodash.cloneDeep(\r\n        this.state.attributeMetaDataList\r\n      );\r\n      this.setState({\r\n        attributeValidationErrors:\r\n          Utilities.getAttributeInitialValidationErrors(attributeMetaDataList),\r\n      });\r\n    } catch (error) {\r\n      console.log(\r\n        \"ContractDetailsComposite:Error occured on handleResetAttributeValidationError\",\r\n        error\r\n      );\r\n    }\r\n  }\r\n\r\n  terminalSelectionChange(selectedTerminals) {\r\n    try {\r\n      let attributesTerminalsList = [];\r\n      var attributeMetaDataList = [];\r\n      var modAttributeMetaDataList = [];\r\n\r\n      attributeMetaDataList = lodash.cloneDeep(\r\n        this.state.attributeMetaDataList\r\n      );\r\n      modAttributeMetaDataList = lodash.cloneDeep(\r\n        this.state.modAttributeMetaDataList\r\n      );\r\n\r\n      const attributeValidationErrors = lodash.cloneDeep(\r\n        this.state.attributeValidationErrors\r\n      );\r\n\r\n      var modContract = lodash.cloneDeep(this.state.modContract);\r\n\r\n      selectedTerminals.forEach((terminal) => {\r\n        var existitem = modAttributeMetaDataList.find((selectedAttribute) => {\r\n          return selectedAttribute.TerminalCode === terminal;\r\n        });\r\n\r\n        if (existitem === undefined) {\r\n          attributeMetaDataList.forEach(function (attributeMetaData) {\r\n            if (attributeMetaData.TerminalCode === terminal) {\r\n              if (\r\n                modContract.Attributes !== undefined &&\r\n                modContract.Attributes !== null &&\r\n                Array.isArray(modContract.Attributes)\r\n              ) {\r\n                var Attributevalue = modContract.Attributes.find(\r\n                  (contractAttribute) => {\r\n                    return contractAttribute.TerminalCode === terminal;\r\n                  }\r\n                );\r\n              }\r\n\r\n              if (Attributevalue !== undefined) {\r\n                attributeMetaData.attributeMetaDataList.forEach(function (\r\n                  attributeMetaData\r\n                ) {\r\n                  var valueAttribute = Attributevalue.ListOfAttributeData.find(\r\n                    (x) => {\r\n                      return x.AttributeCode === attributeMetaData.Code;\r\n                    }\r\n                  );\r\n                  if (valueAttribute !== undefined)\r\n                    attributeMetaData.DefaultValue =\r\n                      valueAttribute.AttributeValue;\r\n                });\r\n              }\r\n              attributesTerminalsList.push(attributeMetaData);\r\n            }\r\n          });\r\n        } else {\r\n          attributesTerminalsList.push(existitem);\r\n        }\r\n      });\r\n\r\n      modAttributeMetaDataList = [];\r\n      modAttributeMetaDataList = attributesTerminalsList;\r\n      modAttributeMetaDataList = Utilities.attributesConvertoDecimal(\r\n        modAttributeMetaDataList\r\n      );\r\n      attributeValidationErrors.forEach((attributeValidation) => {\r\n        var existTerminal = selectedTerminals.find((selectedTerminals) => {\r\n          return attributeValidation.TerminalCode === selectedTerminals;\r\n        });\r\n        if (existTerminal === undefined) {\r\n          Object.keys(attributeValidation.attributeValidationErrors).forEach(\r\n            (key) => (attributeValidation.attributeValidationErrors[key] = \"\")\r\n          );\r\n        }\r\n      });\r\n\r\n      this.formCompartmentAttributes(selectedTerminals);\r\n\r\n      this.setState({ modAttributeMetaDataList, attributeValidationErrors });\r\n    } catch (error) {\r\n      console.log(\r\n        \"ContractDetailsComposite:Error occured on terminalSelectionChange\",\r\n        error\r\n      );\r\n    }\r\n  }\r\n\r\n  formCompartmentAttributes(selectedTerminals) {\r\n    try {\r\n      let attributes = lodash.cloneDeep(\r\n        this.state.compartmentAttributeMetaDataList\r\n      );\r\n\r\n      attributes = attributes.filter(function (attTerminal) {\r\n        return selectedTerminals.some(function (selTerminal) {\r\n          return attTerminal.TerminalCode === selTerminal;\r\n        });\r\n      });\r\n      let modContractItems = lodash.cloneDeep(this.state.modContractItems);\r\n\r\n      modContractItems.forEach((comp) => {\r\n        let compAttributes = [];\r\n        attributes.forEach((att) => {\r\n          att.attributeMetaDataList.forEach((attribute) => {\r\n            compAttributes.push({\r\n              AttributeCode: attribute.Code,\r\n              AttributeName: attribute.DisplayName,\r\n              AttributeValue: attribute.DefaultValue,\r\n              TerminalCode: attribute.TerminalCode,\r\n              IsMandatory: attribute.IsMandatory,\r\n              DataType: attribute.DataType,\r\n              IsReadonly: attribute.IsReadonly,\r\n              MinValue: attribute.MinValue,\r\n              MaxValue: attribute.MaxValue,\r\n              ValidationFormat: attribute.ValidationFormat,\r\n              compSequenceNo: \"\",\r\n            });\r\n          });\r\n        });\r\n        let attributesforNewComp = lodash.cloneDeep(compAttributes);\r\n\r\n        if (\r\n          comp.Code === null &&\r\n          (comp.AttributesforUI === null || comp.AttributesforUI === undefined)\r\n        ) {\r\n          comp.AttributesforUI = [];\r\n          attributesforNewComp.forEach((assignedAttributes) => {\r\n            assignedAttributes.compSequenceNo = comp.SeqNumber;\r\n            comp.AttributesforUI.push(assignedAttributes);\r\n          });\r\n        } else {\r\n          if (\r\n            comp.AttributesforUI !== null &&\r\n            comp.AttributesforUI !== undefined\r\n          ) {\r\n            comp.AttributesforUI = comp.AttributesforUI.filter(function (\r\n              attTerminal\r\n            ) {\r\n              return selectedTerminals.some(function (selTerminal) {\r\n                return attTerminal.TerminalCode === selTerminal;\r\n              });\r\n            });\r\n\r\n            compAttributes = compAttributes.filter(function (attTerminal) {\r\n              return !comp.AttributesforUI.some(function (selTerminal) {\r\n                return attTerminal.TerminalCode === selTerminal.TerminalCode;\r\n              });\r\n            });\r\n          } else comp.AttributesforUI = [];\r\n\r\n          let tempCompAttributes = lodash.cloneDeep(compAttributes);\r\n          if (\r\n            Array.isArray(comp.Attributes) &&\r\n            comp.Attributes !== null &&\r\n            comp.Attributes !== undefined &&\r\n            comp.Attributes.length > 0\r\n          ) {\r\n            let selectedTerminalAttributes = comp.Attributes.filter(function (\r\n              attTerminal\r\n            ) {\r\n              return selectedTerminals.some(function (selTerminal) {\r\n                return attTerminal.TerminalCode === selTerminal;\r\n              });\r\n            });\r\n            selectedTerminalAttributes.forEach((att) => {\r\n              att.ListOfAttributeData.forEach((attData) => {\r\n                let tempAttIndex = tempCompAttributes.findIndex(\r\n                  (item) =>\r\n                    item.TerminalCode === att.TerminalCode &&\r\n                    item.AttributeCode === attData.AttributeCode\r\n                );\r\n                if (tempAttIndex >= 0)\r\n                  tempCompAttributes[tempAttIndex].AttributeValue =\r\n                    attData.AttributeValue;\r\n              });\r\n            });\r\n            tempCompAttributes.forEach((assignedAttributes) => {\r\n              assignedAttributes.compSequenceNo = comp.SeqNumber;\r\n              comp.AttributesforUI.push(assignedAttributes);\r\n            });\r\n          } else {\r\n            compAttributes.forEach((assignedAttributes) => {\r\n              assignedAttributes.compSequenceNo = comp.SeqNumber;\r\n              comp.AttributesforUI.push(assignedAttributes);\r\n            });\r\n          }\r\n        }\r\n        this.toggleExpand(comp, true, true);\r\n        if (comp.AttributesforUI !== undefined && comp.AttributesforUI != null)\r\n          comp.AttributesforUI = Utilities.compartmentAttributesConvertoDecimal(\r\n            comp.AttributesforUI\r\n          );\r\n        comp.AttributesforUI = Utilities.addSeqNumberToListObject(\r\n          comp.AttributesforUI\r\n        );\r\n      });\r\n      this.setState({ modContractItems });\r\n    } catch (error) {\r\n      console.log(\r\n        \"ContractDetailsComposite:Error in forming Compartment Attributes\",\r\n        error\r\n      );\r\n    }\r\n  }\r\n\r\n  fillAttributeDetails(modContract, attributeList) {\r\n    try {\r\n      attributeList = Utilities.attributesDatatypeConversion(attributeList);\r\n      modContract.Attributes = Utilities.fillAttributeDetails(attributeList);\r\n\r\n      // For Compartment Attributes\r\n      modContract.ContractItems.forEach((comp) => {\r\n        if (comp.AttributesforUI !== undefined && comp.AttributesforUI != null)\r\n          comp.AttributesforUI =\r\n            Utilities.compartmentAttributesDatatypeConversion(\r\n              comp.AttributesforUI\r\n            );\r\n        let selectedTerminals = [];\r\n        if (this.props.userDetails.EntityResult.IsEnterpriseNode)\r\n          selectedTerminals = lodash.cloneDeep(modContract.TerminalCodes);\r\n        else {\r\n          var compAttributeMetaDataList = lodash.cloneDeep(\r\n            this.state.compartmentAttributeMetaDataList\r\n          );\r\n          if (compAttributeMetaDataList.length > 0)\r\n            selectedTerminals = [compAttributeMetaDataList[0].TerminalCode];\r\n        }\r\n        let terminalAttributes = [];\r\n        comp.Attributes = [];\r\n        selectedTerminals.forEach((terminal) => {\r\n          if (\r\n            comp.AttributesforUI !== null &&\r\n            comp.AttributesforUI !== undefined\r\n          )\r\n            terminalAttributes = comp.AttributesforUI.filter(function (\r\n              attTerminal\r\n            ) {\r\n              return attTerminal.TerminalCode === terminal;\r\n            });\r\n\r\n          let attribute = {\r\n            ListOfAttributeData: [],\r\n          };\r\n\r\n          attribute.TerminalCode = terminal;\r\n          terminalAttributes.forEach((termAtt) => {\r\n            if (termAtt.AttributeValue !== \"\" || termAtt.IsMandatory === true)\r\n              attribute.ListOfAttributeData.push({\r\n                AttributeCode: termAtt.AttributeCode,\r\n                AttributeValue: termAtt.AttributeValue,\r\n              });\r\n            //})\r\n            //comp.Attributes.push(attribute);\r\n          });\r\n          if (\r\n            attribute.ListOfAttributeData !== null &&\r\n            attribute.ListOfAttributeData !== undefined &&\r\n            attribute.ListOfAttributeData.length > 0\r\n          )\r\n            comp.Attributes.push(attribute);\r\n        });\r\n      });\r\n      return modContract;\r\n    } catch (error) {\r\n      console.log(\r\n        \"ContractDetailsComposite:Error occured on fillAttributeDetails\",\r\n        error\r\n      );\r\n    }\r\n  }\r\n\r\n  localNodeAttribute() {\r\n    try {\r\n      var attributeMetaDataList = lodash.cloneDeep(\r\n        this.state.attributeMetaDataList\r\n      );\r\n      if (\r\n        Array.isArray(attributeMetaDataList) &&\r\n        attributeMetaDataList.length > 0\r\n      )\r\n        this.terminalSelectionChange([attributeMetaDataList[0].TerminalCode]);\r\n      else {\r\n        var compAttributeMetaDataList = lodash.cloneDeep(\r\n          this.state.compartmentAttributeMetaDataList\r\n        );\r\n        if (\r\n          Array.isArray(compAttributeMetaDataList) &&\r\n          compAttributeMetaDataList.length > 0\r\n        )\r\n          this.formCompartmentAttributes([\r\n            compAttributeMetaDataList[0].TerminalCode,\r\n          ]);\r\n      }\r\n    } catch (error) {\r\n      console.log(\r\n        \"ContractDetailsComposite:Error occured on localNodeAttribute\",\r\n        error\r\n      );\r\n    }\r\n  }\r\n\r\n  handleAttributeDataChange = (attribute, value) => {\r\n    try {\r\n      let matchedAttributes = [];\r\n      let modAttributeMetaDataList = lodash.cloneDeep(\r\n        this.state.modAttributeMetaDataList\r\n      );\r\n      let matchedAttributesList = modAttributeMetaDataList.filter(\r\n        (modattribute) => modattribute.TerminalCode === attribute.TerminalCode\r\n      );\r\n      if (\r\n        matchedAttributesList.length > 0 &&\r\n        Array.isArray(matchedAttributesList[0].attributeMetaDataList)\r\n      ) {\r\n        matchedAttributes =\r\n          matchedAttributesList[0].attributeMetaDataList.filter(\r\n            (modattribute) => modattribute.Code === attribute.Code\r\n          );\r\n      }\r\n      if (matchedAttributes.length > 0) {\r\n        matchedAttributes[0].DefaultValue = value;\r\n      }\r\n      const attributeValidationErrors = lodash.cloneDeep(\r\n        this.state.attributeValidationErrors\r\n      );\r\n\r\n      attributeValidationErrors.forEach((attributeValidation) => {\r\n        if (attributeValidation.TerminalCode === attribute.TerminalCode) {\r\n          attributeValidation.attributeValidationErrors[attribute.Code] =\r\n            Utilities.valiateAttributeField(attribute, value);\r\n        }\r\n      });\r\n      this.setState({ attributeValidationErrors, modAttributeMetaDataList });\r\n    } catch (error) {\r\n      console.log(\r\n        \"ContractDetailsComposite:Error occured on handleAttributeDataChange\",\r\n        error\r\n      );\r\n    }\r\n  };\r\n\r\n  handleCompAttributeCellDataEdit = (compAttribute, value) => {\r\n    let modContractItems = lodash.cloneDeep(this.state.modContractItems);\r\n    let compIndex = modContractItems.findIndex(\r\n      (item) => item.SeqNumber === compAttribute.rowData.compSequenceNo\r\n    );\r\n    if (compIndex >= 0)\r\n      modContractItems[compIndex].AttributesforUI[\r\n        // compAttribute.rowIndex\r\n        compAttribute.rowData.SeqNumber - 1\r\n      ].AttributeValue = value;\r\n    this.setState({ modContractItems });\r\n    if (compIndex >= 0)\r\n      this.toggleExpand(modContractItems[compIndex], true, true);\r\n  };\r\n\r\n  handleChange = (propertyName, data) => {\r\n    try {\r\n      let modContract = lodash.cloneDeep(this.state.modContract);\r\n      modContract[propertyName] = data;\r\n      //this.setState({ modContract });\r\n\r\n      if (propertyName === \"CustomerCode\") {\r\n        let destOptions = this.state.customerDestinationOptions[data];\r\n        const modContractItems = lodash.cloneDeep(this.state.modContractItems);\r\n        if (modContractItems.length > 0) {\r\n          if (destOptions !== undefined && Array.isArray(destOptions)) {\r\n            if (destOptions.length === 1) {\r\n              modContractItems.forEach((plan) => {\r\n                plan.DestinationCode = destOptions[0];\r\n              });\r\n            }\r\n            if (destOptions.length === 0 || destOptions.length > 1)\r\n              modContractItems.forEach((plan) => {\r\n                plan.DestinationCode = null;\r\n              });\r\n\r\n            this.setState({ modContractItems });\r\n          }\r\n        }\r\n      }\r\n      const validationErrors = { ...this.state.validationErrors };\r\n      if (modContract.Active === this.state.contract.Active) {\r\n        if (\r\n          this.state.contract.Remarks === modContract.Remarks ||\r\n          modContract.Remarks === \"\"\r\n        ) {\r\n          validationErrors.Remarks = \"\";\r\n        }\r\n        // if (modContract.Remarks === \"\")\r\n        //   modContract.Remarks = this.state.contract.Remarks;\r\n      }\r\n      if (propertyName === \"Active\") {\r\n        if (modContract.Active !== this.state.contract.Active) {\r\n          modContract.Remarks = \"\";\r\n        }\r\n      }\r\n      if (contractValidationDef[propertyName] !== undefined) {\r\n        validationErrors[propertyName] = Utilities.validateField(\r\n          contractValidationDef[propertyName],\r\n          data\r\n        );\r\n      }\r\n      this.setState({ validationErrors, modContract }, () => {\r\n        if (propertyName === \"TerminalCodes\") {\r\n          this.terminalSelectionChange(data);\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.log(\r\n        \"ContractDetailsComposite:Error occured on handleChange\",\r\n        error\r\n      );\r\n    }\r\n  };\r\n\r\n  handleRowSelectionChange = (planRow) => {\r\n    this.setState({ selectedPlanRow: planRow });\r\n  };\r\n  handleCellDataEdit = (newVal, cellData) => {\r\n    let modContractItems = lodash.cloneDeep(this.state.modContractItems);\r\n\r\n    modContractItems[cellData.rowIndex][cellData.field] = newVal;\r\n\r\n    this.setState({ modContractItems });\r\n  };\r\n\r\n  handleAddPlan = () => {\r\n    if (!this.props.userDetails.EntityResult.IsArchived) {\r\n      try {\r\n        let newPlan = {\r\n          // primaryKey: null,\r\n          Attributes: null,\r\n          BlockedQuantity: null,\r\n          ContractCode: null,\r\n          CustomerCode: null,\r\n          DestinationCode: null,\r\n          EndDate: null,\r\n          FinishedProductCode: null,\r\n          FinishdedProductType: null,\r\n          ItemCode: null,\r\n          LoadedQuantity: null,\r\n          Quantity: null,\r\n          QuantityUOM: null,\r\n          RemainingQuantity: null,\r\n          ShareholderCode: null,\r\n          StartDate: null,\r\n        };\r\n        // const { modTrailer } = { ...this.state };\r\n        let modContractItems = lodash.cloneDeep(this.state.modContractItems);\r\n        let destOptions =\r\n          this.state.customerDestinationOptions[\r\n          this.state.modContract.CustomerCode\r\n          ];\r\n        if (\r\n          destOptions !== undefined &&\r\n          Array.isArray(destOptions) &&\r\n          destOptions.length === 1\r\n        ) {\r\n          newPlan.DestinationCode = destOptions[0];\r\n        }\r\n        // newComp.Code = Utilities.generateCompartmentCode(\r\n        //   modTrailer.Compartments\r\n        // ).toString();\r\n        newPlan.SeqNumber =\r\n          Utilities.getMaxSeqNumberfromListObject(modContractItems);\r\n\r\n        modContractItems.push(newPlan);\r\n\r\n        this.setState(\r\n          {\r\n            modContractItems,\r\n            selectedPlanRow: [],\r\n          },\r\n          () => {\r\n            if (\r\n              this.props.userDetails.EntityResult.IsEnterpriseNode === false\r\n            ) {\r\n              var attributeMetaDataList = lodash.cloneDeep(\r\n                this.state.compartmentAttributeMetaDataList\r\n              );\r\n              if (attributeMetaDataList.length > 0)\r\n                this.formCompartmentAttributes([\r\n                  attributeMetaDataList[0].TerminalCode,\r\n                ]);\r\n            } else\r\n              this.formCompartmentAttributes(\r\n                this.state.modContract.TerminalCodes\r\n              );\r\n          }\r\n        );\r\n      } catch (error) {\r\n        console.log(\r\n          \"ContractDetailsComposite:Error occured on handleAddCompartment\",\r\n          error\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  handleDeletePlan = () => {\r\n    if (!this.props.userDetails.EntityResult.IsArchived) {\r\n      try {\r\n        if (\r\n          this.state.selectedPlanRow != null &&\r\n          this.state.selectedPlanRow.length > 0\r\n        ) {\r\n          if (this.state.modContractItems.length > 0) {\r\n            let modContractItems = lodash.cloneDeep(\r\n              this.state.modContractItems\r\n            );\r\n\r\n            this.state.selectedPlanRow.forEach((obj, index) => {\r\n              modContractItems = modContractItems.filter((plan, cindex) => {\r\n                return plan.SeqNumber !== obj.SeqNumber;\r\n              });\r\n            });\r\n\r\n            this.setState({ modContractItems });\r\n          }\r\n        }\r\n\r\n        this.setState({ selectedPlanRow: [] });\r\n      } catch (error) {\r\n        console.log(\r\n          \"ContractDetailsComposite:Error occured on handleDeleteCompartment\",\r\n          error\r\n        );\r\n      }\r\n    }\r\n  };\r\n  handleDateTextChange = (propertyName, value, error) => {\r\n    try {\r\n      let validationErrors = { ...this.state.validationErrors };\r\n      let modContract = { ...this.state.modContract };\r\n      validationErrors[propertyName] = error;\r\n      modContract[propertyName] = value;\r\n      this.setState({ validationErrors, modContract });\r\n    } catch (error) {\r\n      console.log(\r\n        \"ContractDetailsComposite:Error occured on handleDateTextChange\",\r\n        error\r\n      );\r\n    }\r\n  };\r\n\r\n  handleAllTerminalsChange = (checked) => {\r\n    try {\r\n      const modContract = lodash.cloneDeep(this.state.modContract);\r\n      if (checked) modContract.TerminalCodes = [...this.state.terminalOptions];\r\n      else modContract.TerminalCodes = [];\r\n      this.setState({ modContract });\r\n      this.terminalSelectionChange(modContract.TerminalCodes);\r\n    } catch (error) {\r\n      console.log(\r\n        \"ContractComposite:Error occured on handleAllTerminasChange\",\r\n        error\r\n      );\r\n    }\r\n  };\r\n\r\n  fillDetails() {\r\n    try {\r\n      let modContract = lodash.cloneDeep(this.state.modContract);\r\n\r\n      modContract.ShareholderCode = this.props.selectedShareholder;\r\n\r\n      modContract.TransportationType = this.props.transportationType;\r\n      if (modContract.ContractType !== null && modContract.ContractType !== \"\")\r\n        modContract.ContractType = Constants.contractType.DEFAULT_CONTRACT_TYPE;\r\n\r\n      if (modContract.Status !== null && modContract.Status !== \"\")\r\n        modContract.Status = Constants.contractStatus.CREATED;\r\n\r\n      modContract.ContractItems = lodash.cloneDeep(this.state.modContractItems);\r\n      if (\r\n        modContract.ContractItems !== null &&\r\n        modContract.ContractItems.length > 0\r\n      ) {\r\n        modContract.ContractItems.forEach((plan) => {\r\n          plan.ContractCode = modContract.ContractCode;\r\n          plan.ShareholderCode = modContract.ShareholderCode;\r\n          plan.CustomerCode = modContract.CustomerCode;\r\n          if (plan.Quantity !== null && plan.Quantity !== \"\")\r\n            plan.Quantity = plan.Quantity.toLocaleString();\r\n\r\n          delete plan.SeqNumber;\r\n          if (\r\n            plan.AttributesforUI !== undefined &&\r\n            plan.AttributesforUI != null\r\n          )\r\n            plan.AttributesforUI =\r\n              Utilities.compartmentAttributesConverttoLocaleString(\r\n                plan.AttributesforUI\r\n              );\r\n        });\r\n      }\r\n\r\n      return modContract;\r\n    } catch (err) {\r\n      console.log(\"ContractDetailsComposite:Error occured on filldetails\", err);\r\n    }\r\n  }\r\n\r\n  convertStringtoDecimal(modContract, attributeList) {\r\n    try {\r\n      modContract.ContractItems.forEach((plan) => {\r\n        plan.Quantity = Utilities.convertStringtoDecimal(plan.Quantity);\r\n      });\r\n      modContract = this.fillAttributeDetails(modContract, attributeList);\r\n      return modContract;\r\n    } catch (err) {\r\n      console.log(\"convertStringtoDecimal error contract details\", err);\r\n    }\r\n  }\r\n\r\n\r\n  addUpdateContract = () => {\r\n    try {\r\n      this.setState({ saveEnabled: false });\r\n      let tempContract = lodash.cloneDeep(this.state.tempContract);\r\n\r\n      this.state.contract.ContractCode === \"\"\r\n      ? this.createContract(tempContract)\r\n      : this.updateContract(tempContract);\r\n\r\n    } catch (error) {\r\n      console.log(\"Contract Composite : Error in addUpdateContract\");\r\n    }\r\n  };\r\n\r\n  handleSave = () => {\r\n    try {\r\n      if (this.state.updatedContractStatus === Constants.contractStatus.SCHEDULED && this.state.scheduledContractUpdate === false) {\r\n        this.setState({ isAllowtoUpdate: true });\r\n      }\r\n      else {\r\n        let returnValue = Object.values(this.state.validationErrors).every(\r\n          function (value) {\r\n            return value === \"\";\r\n          }\r\n        );\r\n        if (returnValue) {\r\n       //   this.setState({ saveEnabled: false });\r\n          let modContract = this.fillDetails();\r\n          let attributeList = Utilities.attributesConverttoLocaleString(\r\n            this.state.modAttributeMetaDataList\r\n          );\r\n\r\n          if (this.validateSave(modContract, attributeList)) {\r\n            modContract = this.convertStringtoDecimal(modContract, attributeList);\r\n            modContract = Utilities.convertDatesToString(\r\n              DateFieldsInEntities.DatesInEntity.Contract,\r\n              modContract\r\n            );\r\n            modContract.ContractItems.forEach(\r\n              (ci) =>\r\n              (ci = Utilities.convertDatesToString(\r\n                DateFieldsInEntities.DatesInEntity.ContractItem,\r\n                ci\r\n              ))\r\n            );\r\n            \r\n            let showAuthenticationLayout =\r\n            this.props.userDetails.EntityResult.IsWebPortalUser !== true\r\n              ? true\r\n              : false;\r\n          let tempContract = lodash.cloneDeep(modContract);\r\n          this.setState({ showAuthenticationLayout, tempContract }, () => {\r\n            if (showAuthenticationLayout === false) {\r\n              this.addUpdateContract();\r\n            }\r\n        });\r\n\r\n            modContract = Utilities.convertStringToDates(\r\n              DateFieldsInEntities.DatesInEntity.Contract,\r\n              modContract\r\n            );\r\n            modContract.ContractItems.forEach(\r\n              (ci) =>\r\n              (ci = Utilities.convertStringToDates(\r\n                DateFieldsInEntities.DatesInEntity.ContractItem,\r\n                ci\r\n              ))\r\n            );\r\n          } else {\r\n            this.setState({ saveEnabled: true });\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(\r\n        \"ContractDetailsComposite:Error occured on handleSave\",\r\n        error\r\n      );\r\n    }\r\n  };\r\n\r\n  validateSave(modContract, attributeList) {\r\n    const validationErrors = { ...this.state.validationErrors };\r\n    Object.keys(contractValidationDef).forEach(function (key) {\r\n      if (modContract[key] !== undefined)\r\n        validationErrors[key] = Utilities.validateField(\r\n          contractValidationDef[key],\r\n          modContract[key]\r\n        );\r\n    });\r\n\r\n    if (modContract.Active !== this.state.contract.Active) {\r\n      if (modContract.Remarks === \"\") {\r\n        validationErrors[\"Remarks\"] = \"ShipmentOrder_RemarksRequired\";\r\n      }\r\n    }\r\n\r\n    let notification = {\r\n      messageType: \"critical\",\r\n      message: \"ContractInfo_SavedStatus\",\r\n      messageResultDetails: [],\r\n    };\r\n\r\n    var attributeValidationErrors = lodash.cloneDeep(\r\n      this.state.attributeValidationErrors\r\n    );\r\n\r\n    attributeList.forEach((attribute) => {\r\n      attributeValidationErrors.forEach((attributeValidation) => {\r\n        if (attributeValidation.TerminalCode === attribute.TerminalCode) {\r\n          attribute.attributeMetaDataList.forEach((attributeMetaData) => {\r\n            attributeValidation.attributeValidationErrors[\r\n              attributeMetaData.Code\r\n            ] = Utilities.valiateAttributeField(\r\n              attributeMetaData,\r\n              attributeMetaData.DefaultValue\r\n            );\r\n          });\r\n        }\r\n      });\r\n    });\r\n\r\n    this.setState({ validationErrors, attributeValidationErrors });\r\n\r\n    let returnValue = true;\r\n    attributeValidationErrors.forEach((x) => {\r\n      if (returnValue) {\r\n        returnValue = Object.values(x.attributeValidationErrors).every(\r\n          function (value) {\r\n            return value === \"\";\r\n          }\r\n        );\r\n      } else {\r\n        return returnValue;\r\n      }\r\n    });\r\n\r\n    if (returnValue)\r\n      returnValue = Object.values(validationErrors).every(function (value) {\r\n        return value === \"\";\r\n      });\r\n    else return returnValue;\r\n\r\n    if (modContract.ContractItems.length > 0) {\r\n      modContract.ContractItems.forEach((com) => {\r\n        contractPlanValidationDef.forEach((col) => {\r\n          let err = \"\";\r\n\r\n          if (col.validator !== undefined) {\r\n            err = Utilities.validateField(col.validator, com[col.field]);\r\n          }\r\n\r\n          // if (col.field === \"Quantity\" && err === \"\") {\r\n          //   let quantity = Utilities.convertStringtoDecimal(\r\n          //     com.Quantity\r\n          //   ).toString();\r\n          //   if (quantity.length > 15) err = \"Common_MaxLengthExceeded\";\r\n          // }\r\n\r\n          if (err !== \"\") {\r\n            notification.messageResultDetails.push({\r\n              keyFields: [col.displayName],\r\n              keyValues: [com[col.field]],\r\n              isSuccess: false,\r\n              errorMessage: err,\r\n            });\r\n          }\r\n        });\r\n\r\n        if (com.AttributesforUI !== null && com.AttributesforUI !== undefined) {\r\n          com.AttributesforUI.forEach((item) => {\r\n            let errMsg = Utilities.valiateAttributeField(\r\n              item,\r\n              item.AttributeValue\r\n            );\r\n            if (errMsg !== \"\") {\r\n              if (this.props.userDetails.EntityResult.IsEnterpriseNode) {\r\n                notification.messageResultDetails.push({\r\n                  keyFields: [\"CompAttributeTerminal\", item.AttributeName],\r\n                  keyValues: [item.TerminalCode, item.AttributeValue],\r\n                  isSuccess: false,\r\n                  errorMessage: errMsg,\r\n                });\r\n              } else {\r\n                notification.messageResultDetails.push({\r\n                  keyFields: [item.AttributeName],\r\n                  keyValues: [item.AttributeValue],\r\n                  isSuccess: false,\r\n                  errorMessage: errMsg,\r\n                });\r\n              }\r\n            }\r\n          });\r\n        }\r\n        this.toggleExpand(com, true, true);\r\n      });\r\n    } else {\r\n      notification.messageResultDetails.push({\r\n        keyFields: [\"ContractInfo_ContractCode\"],\r\n        keyValues: [modContract.ContractCode],\r\n        isSuccess: false,\r\n        errorMessage: \"ErrMsg_Contract_NoItems\",\r\n      });\r\n    }\r\n\r\n    this.setState({ validationErrors });\r\n    returnValue = Object.values(validationErrors).every(function (value) {\r\n      return value === \"\";\r\n    });\r\n    if (notification.messageResultDetails.length > 0) {\r\n      this.props.onSaved(this.state.modContract, \"update\", notification);\r\n      return false;\r\n    }\r\n    return returnValue;\r\n  }\r\n\r\n  toggleExpand = (data, open, isTerminalAdded = false) => {\r\n    //console.log(\"Data in Toggle\", data)\r\n    let expandedRows = this.state.expandedRows;\r\n    let expandedRowIndex = expandedRows.findIndex(\r\n      (item) => item.SeqNumber === data.SeqNumber\r\n    );\r\n    if (open) {\r\n      if (isTerminalAdded && expandedRowIndex >= 0) {\r\n        expandedRows.splice(expandedRowIndex, 1);\r\n        expandedRows.push(data);\r\n      } else if (expandedRowIndex >= 0) {\r\n        expandedRows.splice(expandedRowIndex, 1);\r\n      }\r\n    } else {\r\n      if (expandedRowIndex >= 0) {\r\n        expandedRows = expandedRows.filter(\r\n          (x) => x.Code !== data.Code && x.SeqNumber !== data.SeqNumber\r\n        );\r\n      } else expandedRows.push(data);\r\n    }\r\n    this.setState({ expandedRows });\r\n  };\r\n\r\n  createContract(modContract) {\r\n    this.handleAuthenticationClose();\r\n    let keyCode = [\r\n      {\r\n        key: KeyCodes.contractCode,\r\n        value: modContract.ContractCode,\r\n      },\r\n    ];\r\n\r\n    let obj = {\r\n      ShareHolderCode: this.props.selectedShareholder,\r\n      keyDataCode: KeyCodes.contractCode,\r\n      KeyCodes: keyCode,\r\n      Entity: modContract,\r\n    };\r\n\r\n    let notification = {\r\n      messageType: \"critical\",\r\n      message: \"ContractInfo_SavedStatus\",\r\n      messageResultDetails: [\r\n        {\r\n          keyFields: [\"ContractInfo_ContractCode\"],\r\n          keyValues: [modContract.ContractCode],\r\n          isSuccess: false,\r\n          errorMessage: \"\",\r\n        },\r\n      ],\r\n    };\r\n    axios(\r\n      RestAPIs.CreateContract,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        let result = response.data;\r\n        notification.messageType = result.IsSuccess ? \"success\" : \"critical\";\r\n        notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n        if (result.IsSuccess === true) {\r\n          this.setState({\r\n            // trailer: lodash.cloneDeep(modTrailer),\r\n            // modTrailer: lodash.cloneDeep(modTrailer),\r\n            saveEnabled: Utilities.isInFunction(\r\n              this.props.userDetails.EntityResult.FunctionsList,\r\n              functionGroups.modify,\r\n              fnContract\r\n            ),\r\n          });\r\n\r\n          this.getContract(false);\r\n        } else {\r\n          notification.messageResultDetails[0].errorMessage =\r\n            result.ErrorList[0];\r\n          this.setState({\r\n            saveEnabled: Utilities.isInFunction(\r\n              this.props.userDetails.EntityResult.FunctionsList,\r\n              functionGroups.add,\r\n              fnContract\r\n            ),\r\n          });\r\n          console.log(\"Error in CreateContract:\", result.ErrorList);\r\n        }\r\n\r\n        this.props.onSaved(this.state.modContract, \"add\", notification);\r\n      })\r\n      .catch((error) => {\r\n        this.setState({\r\n          saveEnabled: Utilities.isInFunction(\r\n            this.props.userDetails.EntityResult.FunctionsList,\r\n            functionGroups.add,\r\n            fnContract\r\n          ),\r\n        });\r\n        notification.messageResultDetails[0].errorMessage = error;\r\n        this.props.onSaved(this.state.modContract, \"add\", notification);\r\n      });\r\n  }\r\n\r\n  updateContract(modContract) {\r\n    this.handleAuthenticationClose();\r\n    let keyCode = [\r\n      {\r\n        key: KeyCodes.contractCode,\r\n        value: modContract.ContractCode,\r\n      },\r\n    ];\r\n\r\n    let obj = {\r\n      ShareHolderCode: this.props.selectedShareholder,\r\n      keyDataCode: KeyCodes.contractCode,\r\n      KeyCodes: keyCode,\r\n      Entity: modContract,\r\n    };\r\n\r\n    let notification = {\r\n      messageType: \"critical\",\r\n      message: \"ContractInfo_SavedStatus\",\r\n      messageResultDetails: [\r\n        {\r\n          keyFields: [\"ContractInfo_ContractCode\"],\r\n          keyValues: [modContract.ContractCode],\r\n          isSuccess: false,\r\n          errorMessage: \"\",\r\n        },\r\n      ],\r\n    };\r\n    axios(\r\n      RestAPIs.UpdateContract,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        let result = response.data;\r\n        notification.messageType = result.IsSuccess ? \"success\" : \"critical\";\r\n        notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n        if (result.IsSuccess === true) {\r\n          this.setState({\r\n            // trailer: lodash.cloneDeep(modTrailer),\r\n            // modTrailer: lodash.cloneDeep(modTrailer),\r\n            saveEnabled: Utilities.isInFunction(\r\n              this.props.userDetails.EntityResult.FunctionsList,\r\n              functionGroups.modify,\r\n              fnContract\r\n            ),\r\n          });\r\n          this.getContract(false);\r\n        } else {\r\n          this.setState({\r\n            saveEnabled: Utilities.isInFunction(\r\n              this.props.userDetails.EntityResult.FunctionsList,\r\n              functionGroups.modify,\r\n              fnContract\r\n            ),\r\n          });\r\n          notification.messageResultDetails[0].errorMessage =\r\n            result.ErrorList[0];\r\n          console.log(\"Error in UpdateContract:\", result.ErrorList);\r\n        }\r\n\r\n        this.props.onSaved(this.state.modContract, \"update\", notification);\r\n      })\r\n      .catch((error) => {\r\n        notification.messageResultDetails[0].errorMessage = error;\r\n        this.props.onSaved(this.state.modContract, \"modify\", notification);\r\n        this.setState({\r\n          saveEnabled: Utilities.isInFunction(\r\n            this.props.userDetails.EntityResult.FunctionsList,\r\n            functionGroups.modify,\r\n            fnContract\r\n          ),\r\n        });\r\n      });\r\n  }\r\n\r\n  handleReset = () => {\r\n    try {\r\n      let modContractItems = Utilities.addSeqNumberToListObject(\r\n        lodash.cloneDeep(this.state.contract.ContractItems)\r\n      );\r\n      this.setState(\r\n        {\r\n          modContract: lodash.cloneDeep(this.state.contract),\r\n          modContractItems: modContractItems,\r\n          modAttributeMetaDataList: [],\r\n        },\r\n        () => {\r\n          if (this.props.userDetails.EntityResult.IsEnterpriseNode) {\r\n            this.terminalSelectionChange(this.state.contract.TerminalCodes);\r\n            this.handleResetAttributeValidationError();\r\n          } else {\r\n            this.localNodeAttribute();\r\n            this.handleResetAttributeValidationError();\r\n          }\r\n        }\r\n      );\r\n      let validationErrors = { ...this.state.validationErrors };\r\n      Object.keys(validationErrors).forEach((key) => {\r\n        validationErrors[key] = \"\";\r\n      });\r\n      this.setState({ validationErrors });\r\n    } catch (error) {\r\n      console.log(\r\n        \"ContractDetailsComposite:Error occured on handleReset\",\r\n        error\r\n      );\r\n    }\r\n  };\r\n  getCarrierList() {\r\n    axios(\r\n      RestAPIs.GetCarrierCodes +\r\n      \"?ShareholderCode=\" +\r\n      this.props.selectedShareholder +\r\n      \"&Transportationtype=\" +\r\n      this.props.transportationType,\r\n      Utilities.getAuthenticationObjectforGet(this.props.tokenDetails.tokenInfo)\r\n    )\r\n      .then((response) => {\r\n        let result = response.data;\r\n\r\n        if (result.IsSuccess === true) {\r\n          if (\r\n            result.EntityResult !== null &&\r\n            Array.isArray(result.EntityResult)\r\n          ) {\r\n            // const carrierOptions = [];\r\n            // result.EntityResult.Table.forEach((carrier) => {\r\n            //   carrierOptions.push({\r\n            //     text: carrier.Common_Code,\r\n            //     value: carrier.Common_Name,\r\n            //   });\r\n            // });\r\n\r\n            let carrierOptions = Utilities.transferListtoOptions(\r\n              result.EntityResult\r\n            );\r\n            this.setState({ carrierOptions });\r\n          }\r\n        } else {\r\n          console.log(\"Error in GetCarrierListForRole:\", result.ErrorList);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while getting Carrier List:\", error);\r\n      });\r\n  }\r\n\r\n  handleForceClose = () => {\r\n    try {\r\n      let modContract = lodash.cloneDeep(this.state.modContract);\r\n      const validationErrors = { ...this.state.validationErrors };\r\n\r\n      if (modContract.Remarks === null || modContract.Remarks === \"\") {\r\n        validationErrors[\"Remarks\"] = \"ShipmentOrder_RemarksRequired\";\r\n      }\r\n      this.setState({ validationErrors });\r\n\r\n      let returnValue = Object.values(validationErrors).every(function (value) {\r\n        return value === \"\";\r\n      });\r\n\r\n      let contactStatusObj = {\r\n        Shareholder: this.props.selectedShareholder,\r\n        ContractCode: modContract.ContractCode,\r\n        ForceClose: true,\r\n        ForceCloseReason: modContract.Remarks,\r\n        NewContractStatus: null,\r\n      };\r\n      \r\n      if (returnValue === true)\r\n      {\r\n\r\n        let showForceCloseAuthenticationLayout =\r\n        this.props.userDetails.EntityResult.IsWebPortalUser !== true\r\n          ? true\r\n          : false;\r\n      let tempContactStatusObj = lodash.cloneDeep(contactStatusObj);\r\n      this.setState({ showForceCloseAuthenticationLayout, tempContactStatusObj }, () => {\r\n        if (showForceCloseAuthenticationLayout === false) {\r\n          this.updateContractStatus();\r\n        }\r\n    });\r\n\r\n\r\n      } \r\n      \r\n    } catch (error) {\r\n      console.log(\r\n        \"ContractDetailsComposite:Error occured on handleForceClose\",\r\n        error\r\n      );\r\n    }\r\n  };\r\n\r\n  updateContractStatus = () => {\r\n\r\n    let contactStatusObj= lodash.cloneDeep(this.state.tempContactStatusObj);\r\n    \r\n    let obj = {\r\n      ShareHolderCode: this.props.selectedShareholder,\r\n      keyDataCode: KeyCodes.contractCode,\r\n      //KeyCodes: keyCode,\r\n      Entity: contactStatusObj,\r\n    };\r\n    let notification = {\r\n      messageType: \"critical\",\r\n      message: \"ContractInfo_SavedStatus\",\r\n      messageResultDetails: [\r\n        {\r\n          keyFields: [\"ContractInfo_ContractCode\"],\r\n          keyValues: [contactStatusObj.ContractCode],\r\n          isSuccess: false,\r\n          errorMessage: \"\",\r\n        },\r\n      ],\r\n    };\r\n    axios(\r\n      RestAPIs.UpdateContractStatus,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    ).then((response) => {\r\n      let result = response.data;\r\n      notification.messageType = result.IsSuccess ? \"success\" : \"critical\";\r\n      notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n      if (result.IsSuccess === true) {\r\n        this.getContract(false);\r\n      } else {\r\n        notification.messageResultDetails[0].errorMessage = result.ErrorList[0];\r\n      }\r\n      toast(\r\n        <ErrorBoundary>\r\n          <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n        </ErrorBoundary>,\r\n        {\r\n          autoClose: notification.messageType === \"success\" ? 10000 : false,\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  handleViewShipments = () => {\r\n    this.setState(\r\n      {\r\n        isShowTruckShipment: true,\r\n        isShowBackButton: true,\r\n      },\r\n      () => this.props.handleOperationVisibility(false)\r\n    );\r\n  };\r\n\r\n  handleViewDispatch = () => {\r\n    this.setState(\r\n      {\r\n        isShowRailDispatch: true,\r\n        isShowBackButton: true,\r\n      },\r\n      () => this.props.handleOperationVisibility(false)\r\n    );\r\n  };\r\n\r\n  handleBack = () => {\r\n    this.setState(\r\n      {\r\n        isShowTruckShipment: false,\r\n        isShowRailDispatch: false,\r\n        isShowBackButton: false,\r\n      },\r\n      () => {\r\n        this.props.handleOperationVisibility(true);\r\n        this.getContract(false);\r\n      }\r\n    );\r\n  };\r\n\r\n  handleShowBackButton = (status) => {\r\n    this.setState({\r\n      isShowBackButton: status,\r\n    });\r\n  };\r\n\r\n  confirmAllowToUpdate = () => {\r\n    return (\r\n      <TranslationConsumer>\r\n        {(t) => (\r\n          <Modal open={this.state.isAllowtoUpdate} size=\"small\">\r\n            <Modal.Content>\r\n              <div className=\"col col-lg-12\">\r\n                <h5>{t(\"Contract_ConfirmAllowToUpdate\")}</h5>\r\n              </div>\r\n            </Modal.Content>\r\n            <Modal.Footer>\r\n              <Button\r\n                type=\"primary\"\r\n                content={t(\"AccessCardInfo_Ok\")}\r\n                onClick={() => {\r\n                  this.setState({ isAllowtoUpdate: false, scheduledContractUpdate: true }, () => {\r\n                    this.handleSave();\r\n                  });\r\n                }}\r\n              />\r\n              <Button\r\n                type=\"primary\"\r\n                content={t(\"Cancel\")}\r\n                onClick={() => {\r\n                  this.setState({ isAllowtoUpdate: false, saveEnabled: true });\r\n                }}\r\n              />\r\n            </Modal.Footer>\r\n          </Modal>\r\n        )}\r\n      </TranslationConsumer>\r\n    );\r\n  };\r\n  //Get KPI for contract\r\n  getKPIList(shareholder, contractCode) {\r\n    let KPIView = Utilities.isInFunction(\r\n      this.props.userDetails.EntityResult.FunctionsList,\r\n      functionGroups.view,\r\n      fnKPIInformation\r\n    );\r\n    if (KPIView === true) {\r\n\r\n      var transportationType = this.props.transportationType;\r\n      let Parameters = transportationType === Constants.TransportationType.ROAD ? [{ key: \"ShareholderCode\", value: shareholder }, {\r\n        key: \"ContractCode\", value: contractCode\r\n      }] : [{\r\n        key: \"ContractCode\", value: contractCode\r\n      }];\r\n      let objKPIRequestData = {\r\n        PageName: kpiContractDetail,\r\n        TransportationType: transportationType,\r\n        InputParameters: Parameters\r\n      };\r\n      axios(\r\n        RestAPIs.GetKPI,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          objKPIRequestData,\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          var result = response.data;\r\n          if (result.IsSuccess === true) {\r\n            this.setState({\r\n              contractKPIList: result.EntityResult.ListKPIDetails,\r\n            });\r\n          } else {\r\n            this.setState({ contractKPIList: [] });\r\n            console.log(\"Error in contract KPIList:\", result.ErrorList);\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error while getting Contract KPIList:\", error);\r\n        });\r\n    }\r\n  }\r\n\r\n  handleOperation() {\r\n    if (this.state.showAuthenticationLayout)\r\n      return this.addUpdateContract;\r\n    else if (this.state.showForceCloseAuthenticationLayout)\r\n      return this.updateContractStatus;\r\n    \r\n  }\r\n\r\n  getFunctionGroupName() {\r\n     if (this.state.showForceCloseAuthenticationLayout)\r\n      return fnContractForceClose;\r\n    else if (this.state.showAuthenticationLayout)\r\n      return fnContract;\r\n  }\r\n\r\n  handleAuthenticationClose = () => {\r\n    this.setState({\r\n      showAuthenticationLayout: false,\r\n      showForceCloseAuthenticationLayout: false,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    let listOptions = {\r\n      terminalCodes: this.state.terminalOptions,\r\n      contractTypeOptions: Utilities.transferListtoOptions(\r\n        Object.keys(Constants.contractType)\r\n      ),\r\n      carrierOptions: this.state.carrierOptions,\r\n      unitOfVolume: this.state.volumeUOMOptions,\r\n      unitOfWeight: this.state.weightUOMOptions,\r\n      finishedProductOptions: this.state.finishedProductOptions,\r\n      customerDestinationOptions: this.state.customerDestinationOptions,\r\n    };\r\n    const popUpContents = [\r\n      {\r\n        fieldName: \"ShipmentOrder_LastUpdated\",\r\n        fieldValue:\r\n          new Date(\r\n            this.state.modContract.LastUpdatedTime\r\n          ).toLocaleDateString() +\r\n          \" \" +\r\n          new Date(this.state.modContract.LastUpdatedTime).toLocaleTimeString(),\r\n      },\r\n      {\r\n        fieldName: \"ShipmentOrder_LastActiveTime\",\r\n        fieldValue:\r\n          this.state.modContract.LastActiveTime !== undefined &&\r\n            this.state.modContract.LastActiveTime !== null\r\n            ? new Date(\r\n              this.state.modContract.LastActiveTime\r\n            ).toLocaleDateString() +\r\n            \" \" +\r\n            new Date(\r\n              this.state.modContract.LastActiveTime\r\n            ).toLocaleTimeString()\r\n            : \"\",\r\n      },\r\n      {\r\n        fieldName: \"ShipmentOrder_CreatedTime\",\r\n        fieldValue:\r\n          new Date(this.state.modContract.CreatedTime).toLocaleDateString() +\r\n          \" \" +\r\n          new Date(this.state.modContract.CreatedTime).toLocaleTimeString(),\r\n      },\r\n    ];\r\n\r\n    return this.state.isReadyToRender ? (\r\n      <div>\r\n        {this.state.isShowTruckShipment ||\r\n          this.state.isShowRailDispatch ? null : (\r\n          <ErrorBoundary>\r\n            <TMDetailsHeader\r\n              entityCode={this.state.contract.ContractCode}\r\n              newEntityName=\"ContractInfo_Title\"\r\n              popUpContents={popUpContents}\r\n            ></TMDetailsHeader>\r\n          </ErrorBoundary>\r\n        )}\r\n        {this.state.isShowTruckShipment ? (\r\n          <ErrorBoundary>\r\n            <TruckShipmentProject\r\n              shipmentSource={Constants.shipmentFrom.Contract}\r\n              shipmentSourceCode={this.state.modContract.ContractCode}\r\n              selectedShareholder={this.props.selectedShareholder}\r\n              shipmentSourceCompartmentItems={this.state.modContractItems}\r\n              shipmentSourceDetails={this.state.modContract}\r\n              isShowBackButton={this.handleShowBackButton}\r\n            />\r\n          </ErrorBoundary>\r\n        ) : this.state.isShowRailDispatch ? (\r\n          <ErrorBoundary>\r\n            <RailDispatchProject\r\n              shipmentSource={Constants.shipmentFrom.Contract}\r\n              shipmentSourceCode={this.state.modContract.ContractCode}\r\n              selectedShareholder={this.props.selectedShareholder}\r\n              shipmentSourceCompartmentItems={this.state.modContractItems}\r\n              shipmentSourceDetails={this.state.modContract}\r\n              isShowBackButton={this.handleShowBackButton}\r\n            />\r\n          </ErrorBoundary>\r\n        ) : (\r\n          <> <TMDetailsKPILayout KPIList={this.state.contractKPIList}> </TMDetailsKPILayout>\r\n            <ErrorBoundary>\r\n              <ContractDetails\r\n                contract={this.state.contract}\r\n                modContract={this.state.modContract}\r\n                modContractItems={this.state.modContractItems}\r\n                validationErrors={this.state.validationErrors}\r\n                listOptions={listOptions}\r\n                onFieldChange={this.handleChange}\r\n                onDateTextChange={this.handleDateTextChange}\r\n                onAllTerminalsChange={this.handleAllTerminalsChange}\r\n                handleAddPlan={this.handleAddPlan}\r\n                handleDeletePlan={this.handleDeletePlan}\r\n                selectedPlanRow={this.state.selectedPlanRow}\r\n                handleRowSelectionChange={this.handleRowSelectionChange}\r\n                handleCellDataEdit={this.handleCellDataEdit}\r\n                isEnterpriseNode={\r\n                  this.props.userDetails.EntityResult.IsEnterpriseNode\r\n                }\r\n                attributeValidationErrors={this.state.attributeValidationErrors}\r\n                onAttributeDataChange={this.handleAttributeDataChange}\r\n                handleCompAttributeCellDataEdit={\r\n                  this.handleCompAttributeCellDataEdit\r\n                }\r\n                modAttributeMetaDataList={this.state.modAttributeMetaDataList}\r\n                toggleExpand={this.toggleExpand}\r\n                expandedRows={this.state.expandedRows}\r\n                compartmentDetailsPageSize={\r\n                  this.props.userDetails.EntityResult.PageAttibutes\r\n                    .WebPortalListPageSize\r\n                }\r\n                handleForceClose={this.handleForceClose}\r\n                isEnableForceClose={this.state.isEnableForceClose}\r\n                handleViewShipments={this.handleViewShipments}\r\n                handleViewDispatch={this.handleViewDispatch}\r\n                isAutoGeneratedContractCode={\r\n                  this.state.isAutoGeneratedContractCode\r\n                }\r\n              ></ContractDetails>\r\n            </ErrorBoundary></>\r\n        )}\r\n        {this.state.isShowTruckShipment || this.state.isShowRailDispatch ? (\r\n          this.state.isShowBackButton ? (\r\n            <div className=\"row\">\r\n              <div className=\"col col-lg-8\" style={{ marginTop: \"1%\" }}>\r\n                <TranslationConsumer>\r\n                  {(t) => (\r\n                    <Button\r\n                      className=\"backButton\"\r\n                      onClick={this.handleBack}\r\n                      content={t(\"Back\")}\r\n                    ></Button>\r\n                  )}\r\n                </TranslationConsumer>\r\n              </div>\r\n            </div>\r\n          ) : null\r\n        ) : (\r\n          <ErrorBoundary>\r\n            <TMDetailsUserActions\r\n              handleBack={this.props.onBack}\r\n              handleSave={this.handleSave}\r\n              handleReset={this.handleReset}\r\n              saveEnabled={this.state.saveEnabled}\r\n            ></TMDetailsUserActions>\r\n          </ErrorBoundary>\r\n        )}\r\n        {this.state.isAllowtoUpdate ? this.confirmAllowToUpdate() : null}\r\n\r\n        {this.state.showAuthenticationLayout || this.state.showForceCloseAuthenticationLayout ? (\r\n          <UserAuthenticationLayout\r\n            Username={this.props.userDetails.EntityResult.UserName}\r\n            functionName={\r\n              this.state.contract.ContractCode   === \"\"\r\n                ? functionGroups.add\r\n                : functionGroups.modify\r\n            }\r\n            functionGroup={this.getFunctionGroupName()}\r\n            handleOperation={this.handleOperation()}\r\n            handleClose={this.handleAuthenticationClose}\r\n          ></UserAuthenticationLayout>\r\n        ) : null}\r\n\r\n      </div>\r\n    ) : (\r\n      <LoadingPage message=\"Loading\"></LoadingPage>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    userDetails: state.getUserDetails.userDetails,\r\n    tokenDetails: state.getUserDetails.TokenAuth,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(ContractDetailsComposite);\r\n","import React from \"react\";\r\nimport { useTranslation } from \"@scuf/localization\";\r\nimport {\r\n  Select,\r\n  Icon,\r\n  Input,\r\n  Checkbox,\r\n  DatePicker,\r\n  Accordion,\r\n  Button,\r\n} from \"@scuf/common\";\r\nimport { AssociatedTerminals } from \"../Common/AssociatedTerminals\";\r\nimport * as Constants from \"../../../JS/Constants\";\r\nimport { getKeyByValue } from \"../../../JS/Utilities\";\r\nimport { AttributeDetails } from \"../Details/AttributeDetails\";\r\nimport { DataTable } from \"@scuf/datatable\";\r\nimport { getCurrentDateFormat } from \"../../../JS/functionalUtilities\";\r\nimport PropTypes from \"prop-types\";\r\nimport ErrorBoundary from \"../../ErrorBoundary\";\r\nimport { handleIsRequiredCompartmentCell } from \"../../../JS/functionalUtilities\";\r\nimport * as Utilities from \"../../../JS/Utilities\";\r\n\r\nOrderDetails.propTypes = {\r\n  order: PropTypes.object.isRequired,\r\n  modOrder: PropTypes.object.isRequired,\r\n  validationErrors: PropTypes.object.isRequired,\r\n  attributeValidationErrors: PropTypes.object.isRequired,\r\n  listOptions: PropTypes.shape({\r\n    //orderTypeOptions: PropTypes.array,\r\n    unitOfWeight: PropTypes.array,\r\n    unitOfVolume: PropTypes.array,\r\n    terminalCodes: PropTypes.array,\r\n    finishedProductOptions: PropTypes.array,\r\n    customerOptions: PropTypes.array,\r\n  }).isRequired,\r\n  onDateTextChange: PropTypes.func.isRequired,\r\n  onFieldChange: PropTypes.func.isRequired,\r\n  onAllTerminalsChange: PropTypes.func.isRequired,\r\n  selectedPlanRow: PropTypes.array.isRequired,\r\n  modOrderItems: PropTypes.array.isRequired,\r\n  handleRowSelectionChange: PropTypes.func.isRequired,\r\n  handleCellDataEdit: PropTypes.func.isRequired,\r\n  handleAddPlan: PropTypes.func.isRequired,\r\n  handleDeletePlan: PropTypes.func.isRequired,\r\n  isEnterpriseNode: PropTypes.bool.isRequired,\r\n  expandedRows: PropTypes.array.isRequired,\r\n  modAttributeMetaDataList: PropTypes.array.isRequired,\r\n  onAttributeDataChange: PropTypes.func.isRequired,\r\n  handleCompAttributeCellDataEdit: PropTypes.func.isRequired,\r\n  compartmentDetailsPageSize: PropTypes.number.isRequired,\r\n  handleForceClose: PropTypes.func.isRequired,\r\n  handleViewShipments: PropTypes.func.isRequired,\r\n  enableForceClose: PropTypes.bool.isRequired,\r\n};\r\n\r\nOrderDetails.defaultProps = {\r\n  listOptions: {\r\n    terminalCodes: [],\r\n    //orderTypeOptions: [],\r\n    unitOfVolume: [],\r\n    unitOfWeight: [],\r\n    finishedProductOptions: [],\r\n    customerOptions: [],\r\n  },\r\n  modOrderItems: [],\r\n  isEnterpriseNode: false,\r\n};\r\n\r\nexport default function OrderDetails({\r\n  order,\r\n  modOrder,\r\n  onFieldChange,\r\n  validationErrors,\r\n  attributeValidationErrors,\r\n  onDateTextChange,\r\n  listOptions,\r\n  onAllTerminalsChange,\r\n  onAttributeDataChange,\r\n  handleCompAttributeCellDataEdit,\r\n  handleAddPlan,\r\n  handleDeletePlan,\r\n  selectedPlanRow,\r\n  modAttributeMetaDataList,\r\n  expandedRows,\r\n  handleRowSelectionChange,\r\n  handleCellDataEdit,\r\n  selectedShareholder,\r\n  modOrderItems,\r\n  toggleExpand,\r\n  compartmentDetailsPageSize,\r\n  isEnterpriseNode,\r\n  handleForceClose,\r\n  handleViewShipments,\r\n  enableForceClose\r\n}) {\r\n  const [t] = useTranslation();\r\n\r\n  const handleValidationErrorFilter = (attributeValidationErrors, terminal) => {\r\n    let attributeValidation = [];\r\n    attributeValidation = attributeValidationErrors.find(\r\n      (selectedAttribute) => {\r\n        return selectedAttribute.TerminalCode === terminal;\r\n      }\r\n    );\r\n    return attributeValidation.attributeValidationErrors;\r\n  };\r\n\r\n  const handleAttributeType = (data) => {\r\n    //debugger;\r\n    const attribute = data.rowData;\r\n    const handleAttributeDateValue = (dateval) => {\r\n      var chars = dateval.split(\"-\");\r\n      return new Date(chars[0], chars[1] - 1, chars[2]);\r\n    };\r\n    const convertAttributeDatetoString = (attribute, value) => {\r\n      var Dateval = new Date(value);\r\n      value =\r\n        Dateval.getFullYear() +\r\n        \"-\" +\r\n        (\"0\" + (Dateval.getMonth() + 1)).slice(-2) +\r\n        \"-\" +\r\n        (\"0\" + Dateval.getDate()).slice(-2);\r\n      handleCompAttributeCellDataEdit(attribute, value);\r\n    };\r\n    try {\r\n      return attribute.DataType.toLowerCase() ===\r\n        Constants.DataType.STRING.toLowerCase() ? (\r\n        <Input\r\n          fluid\r\n          value={attribute.AttributeValue}\r\n          disabled={attribute.IsReadonly}\r\n          onChange={(value) => handleCompAttributeCellDataEdit(data, value)}\r\n          reserveSpace={false}\r\n        />\r\n      ) : attribute.DataType.toLowerCase() ===\r\n        Constants.DataType.INT.toLowerCase() ? (\r\n        <Input\r\n          fluid\r\n          value={attribute.AttributeValue}\r\n          disabled={attribute.IsReadonly}\r\n          onChange={(value) => handleCompAttributeCellDataEdit(data, value)}\r\n          reserveSpace={false}\r\n        />\r\n      ) : attribute.DataType.toLowerCase() ===\r\n          Constants.DataType.FLOAT.toLowerCase() ||\r\n        attribute.DataType.toLowerCase() ===\r\n          Constants.DataType.LONG.toLowerCase() ||\r\n        attribute.DataType.toLowerCase() ===\r\n          Constants.DataType.DOUBLE.toLowerCase() ? (\r\n        <Input\r\n          fluid\r\n          value={\r\n            attribute.AttributeValue === null ||\r\n            attribute.AttributeValue === undefined ||\r\n            attribute.AttributeValue === \"\"\r\n              ? \"\"\r\n              : attribute.AttributeValue.toLocaleString()\r\n          }\r\n          disabled={attribute.IsReadonly}\r\n          onChange={(value) => handleCompAttributeCellDataEdit(data, value)}\r\n          reserveSpace={false}\r\n        />\r\n      ) : attribute.DataType.toLowerCase() ===\r\n        Constants.DataType.BOOL.toLowerCase() ? (\r\n        <Checkbox\r\n          checked={\r\n            attribute.AttributeValue.toString().toLowerCase() === \"true\"\r\n              ? true\r\n              : false\r\n          }\r\n          disabled={attribute.IsReadonly}\r\n          onChange={(value) => handleCompAttributeCellDataEdit(data, value)}\r\n        ></Checkbox>\r\n      ) : attribute.DataType.toLowerCase() ===\r\n        Constants.DataType.DATETIME.toLowerCase() ? (\r\n        <DatePicker\r\n          fluid\r\n          value={\r\n            attribute.AttributeValue === null ||\r\n            attribute.AttributeValue === undefined ||\r\n            attribute.AttributeValue === \"\"\r\n              ? \"\"\r\n              : handleAttributeDateValue(attribute.AttributeValue)\r\n          }\r\n          disabled={attribute.IsReadonly}\r\n          showYearSelector=\"true\"\r\n          onChange={(value) => convertAttributeDatetoString(data, value)}\r\n          onTextChange={(value) => {\r\n            convertAttributeDatetoString(data, value);\r\n          }}\r\n          reserveSpace={false}\r\n        />\r\n      ) : null;\r\n    } catch (error) {\r\n      console.log(\"OrderDetails:Error occured on handleAttributeType\", error);\r\n    }\r\n  };\r\n\r\n  const handleIsRequiredCompAttributes = (data) => {\r\n    return data.rowData.IsMandatory ? (\r\n      <div>\r\n        <span>{data.rowData.AttributeName}</span>\r\n        <div class=\"ui red circular empty label badge  circle-padding\" />\r\n      </div>\r\n    ) : (\r\n      <div>\r\n        <span>{data.rowData.AttributeName}</span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const expanderTemplate = (data) => {\r\n    //const open = expandedRows.includes(data.rowData);\r\n    //debugger\r\n    const open =\r\n      expandedRows.findIndex((x) => x.SeqNumber === data.rowData.SeqNumber) >= 0\r\n        ? true\r\n        : false;\r\n    return (\r\n      <div\r\n        onClick={() => toggleExpand(data.rowData, open)}\r\n        className=\"compartmentIcon gridButtonFontColor\"\r\n      >\r\n        <span>{open ? t(\"Hide_Attributes\") : t(\"View_Attributes\")}</span>\r\n        <Icon\r\n          root=\"common\"\r\n          name={open ? \"caret-up\" : \"caret-down\"}\r\n          className=\"margin_l10\"\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  function rowExpansionTemplate(data) {\r\n    return Array.isArray(data.AttributesforUI) &&\r\n      data.AttributesforUI.length > 0 ? (\r\n      <div className=\"childTable ChildGridViewAllShipmentLoadingDetails\">\r\n        <DataTable\r\n          data={data.AttributesforUI}\r\n          rows={compartmentDetailsPageSize}\r\n        >\r\n          {isEnterpriseNode ? (\r\n            <DataTable.Column\r\n              className=\"compColHeight\"\r\n              key=\"TerminalCode\"\r\n              field=\"TerminalCode\"\r\n              header={t(\"CompartmentTerminal\")}\r\n              editable={false}\r\n            ></DataTable.Column>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <DataTable.Column\r\n            className=\"compColHeight\"\r\n            key=\"AttributeName\"\r\n            header={t(\"CompartmentAttributeName\")}\r\n            renderer={handleIsRequiredCompAttributes}\r\n            editable={false}\r\n          ></DataTable.Column>\r\n          <DataTable.Column\r\n            className=\"compColHeight\"\r\n            header={t(\"CompartmentAttributeValue\")}\r\n            renderer={handleAttributeType}\r\n          />\r\n          {Array.isArray(data.AttributesforUI) &&\r\n          data.AttributesforUI.length > compartmentDetailsPageSize ? (\r\n            <DataTable.Pagination />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </DataTable>\r\n      </div>\r\n    ) : (\r\n      <div className=\"compartmentIcon\">\r\n        <div className=\"gridButtonAlignLeft\">\r\n          {t(\"CustomerInventory_NoRecordsFound\")}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const handleTextEdit = (cellData) => {\r\n    let val = modOrderItems[cellData.rowIndex][cellData.field];\r\n    if (cellData.field === \"Quantity\" && val !== null && val !== \"\")\r\n      val = val.toLocaleString();\r\n    return (\r\n      // <TranslationConsumer>\r\n      //   {(t) => (\r\n      <Input\r\n        fluid\r\n        value={val}\r\n        onChange={(value) => handleCellDataEdit(value, cellData)}\r\n        reserveSpace={false}\r\n        // error={t(validationErrors.Description)}\r\n        // disabled={cellData.field === \"Code\" ? true : false}\r\n      />\r\n      //   )}\r\n      // </TranslationConsumer>\r\n    );\r\n  };\r\n\r\n  const handleDropdownEdit = (cellData) => {\r\n    let dropDownOptions = [];\r\n    if (cellData.field === \"QuantityUOM\") {\r\n      dropDownOptions = [\r\n        ...listOptions.unitOfVolume,\r\n        ...listOptions.unitOfWeight,\r\n      ];\r\n    }\r\n    if (cellData.field === \"FinishedProductCode\")\r\n      dropDownOptions = listOptions.finishedProductOptions;\r\n    return (\r\n      <Select\r\n        className=\"selectDropwdown\"\r\n        placeholder={t(\"Common_Select\")}\r\n        value={modOrderItems[cellData.rowIndex][cellData.field]}\r\n        fluid\r\n        options={dropDownOptions}\r\n        onChange={(value) => handleCellDataEdit(value, cellData)}\r\n        // indicator=\"required\"\r\n        reserveSpace={false}\r\n        search={true}\r\n        noResultsMessage={t(\"noResultsMessage\")}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    // <TranslationConsumer>\r\n    //   {(t) => (\r\n    <div className=\"detailsContainer\">\r\n      <div className=\"row\">\r\n        <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <Input\r\n            fluid\r\n            value={modOrder.OrderCode}\r\n            label={t(\"ShipmentOrder_OrderCode\")}\r\n            indicator=\"required\"\r\n            disabled={order.OrderCode !== \"\"}\r\n            onChange={(data) => onFieldChange(\"OrderCode\", data)}\r\n            error={t(validationErrors.OrderCode)}\r\n            reserveSpace={false}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <Select\r\n            fluid\r\n            placeholder={t(\"Common_Select\")}\r\n            label={t(\"Customer_Code\")}\r\n            indicator=\"required\"\r\n            value={modOrder.CustomerCode}\r\n            options={listOptions.customerOptions}\r\n            onChange={(data) => onFieldChange(\"CustomerCode\", data)}\r\n            error={t(validationErrors.CustomerCode)}\r\n            reserveSpace={false}\r\n            search={true}\r\n            noResultsMessage={t(\"noResultsMessage\")}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <Input\r\n            fluid\r\n            value={modOrder.Description}\r\n            label={t(\"ShipmentOrder_Desc\")}\r\n            onChange={(data) => onFieldChange(\"Description\", data)}\r\n            error={t(validationErrors.Description)}\r\n            reserveSpace={false}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <DatePicker\r\n            fluid\r\n            value={\r\n              modOrder.OrderStartDate === null\r\n                ? \"\"\r\n                : Utilities.convertStringToCommonDateFormat(\r\n                    modOrder.OrderStartDate\r\n                  )\r\n            }\r\n            displayFormat={getCurrentDateFormat()}\r\n            //type=\"datetime\"\r\n            label={t(`ShipmentOrder_StartDate`)}\r\n            showYearSelector=\"true\"\r\n            indicator=\"required\"\r\n            // disablePast={true}\r\n            onChange={(data) => onFieldChange(\"OrderStartDate\", data)}\r\n            onTextChange={(value, error) => {\r\n              onDateTextChange(\"OrderStartDate\", value, error);\r\n            }}\r\n            error={t(validationErrors.OrderStartDate)}\r\n            reserveSpace={false}\r\n          />\r\n        </div>\r\n        <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <DatePicker\r\n            fluid\r\n            value={\r\n              modOrder.OrderEndDate === null\r\n                ? \"\"\r\n                : Utilities.convertStringToCommonDateFormat(\r\n                    modOrder.OrderEndDate\r\n                  )\r\n            }\r\n            displayFormat={getCurrentDateFormat()}\r\n            label={t(`ShipmentOrder_EndDate`)}\r\n            showYearSelector=\"true\"\r\n            indicator=\"required\"\r\n            //type=\"datetime\"\r\n            disablePast={true}\r\n            onChange={(data) => onFieldChange(\"OrderEndDate\", data)}\r\n            onTextChange={(value, error) => {\r\n              onDateTextChange(\"OrderEndDate\", value, error);\r\n            }}\r\n            error={t(validationErrors.OrderEndDate)}\r\n            reserveSpace={false}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <Input\r\n            fluid\r\n            value={\r\n              getKeyByValue(Constants.orderStatus, modOrder.OrderStatus) ===\r\n              undefined\r\n                ? \"\"\r\n                : getKeyByValue(Constants.orderStatus, modOrder.OrderStatus)\r\n            }\r\n            label={t(\"ShipmentOrder_OrderStatus\")}\r\n            disabled={true}\r\n            //onChange={(data) => onFieldChange(\"Description\", data)}\r\n            //error={t(validationErrors.Description)}\r\n            reserveSpace={false}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <DatePicker\r\n            fluid\r\n            value={\r\n              modOrder.OrderDate === null\r\n                ? \"\"\r\n                : Utilities.convertStringToCommonDateFormat(modOrder.OrderDate)\r\n            }\r\n            displayFormat={getCurrentDateFormat()}\r\n            label={t(`ShipmentOrder_OrderDate`)}\r\n            showYearSelector=\"true\"\r\n            indicator=\"required\"\r\n            // disablePast={true}\r\n            disabled={true}\r\n            //type=\"datetime\"\r\n            //onChange={(data) => onFieldChange(\"OrderEndDate\", data)}\r\n            // onTextChange={(value, error) => {\r\n            //  onDateTextChange(\"OrderEndDate\", value, error);\r\n            // }}\r\n            // error={t(validationErrors.OrderEndDate)}\r\n            reserveSpace={false}\r\n          />\r\n        </div>\r\n\r\n        {/* <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <Select\r\n            fluid\r\n            placeholder={t(\"Common_Select\")}\r\n            label={t(\"ShipmentOrder_OrderType\")}\r\n            value={getKeyByValue(Constants.orderType, modOrder.OrderType)}\r\n            options={listOptions.orderTypeOptions}\r\n            disabled={true}\r\n          // onChange={(data) => onFieldChange(\"Active\", data)}\r\n          />\r\n        </div> */}\r\n\r\n        {isEnterpriseNode ? (\r\n          <div className=\"col-12 col-md-6 col-lg-4\">\r\n            <AssociatedTerminals\r\n              terminalList={listOptions.terminalCodes}\r\n              selectedTerminal={modOrder.TerminalCodes}\r\n              error={t(validationErrors.TerminalCodes)}\r\n              onFieldChange={onFieldChange}\r\n              onCheckChange={onAllTerminalsChange}\r\n            ></AssociatedTerminals>\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n\r\n        <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <Select\r\n            fluid\r\n            placeholder={t(\"Common_Select\")}\r\n            label={t(\"ShipmentOrder_Status\")}\r\n            value={modOrder.Active}\r\n            options={[\r\n              { text: t(\"ViewShipment_Ok\"), value: true },\r\n              { text: t(\"ViewShipmentStatus_Inactive\"), value: false },\r\n            ]}\r\n            onChange={(data) => onFieldChange(\"Active\", data)}\r\n            disabled={order.OrderCode === \"\" ? true : false}\r\n          />\r\n        </div>\r\n        <div className=\"col-12 col-md-6 col-lg-4\">\r\n          <Input\r\n            fluid\r\n            value={modOrder.Remarks === null ? \"\" : modOrder.Remarks}\r\n            label={t(\"ShipmentOrder_Remarks\")}\r\n            onChange={(data) => onFieldChange(\"Remarks\", data)}\r\n            indicator={modOrder.Active !== order.Active ? \"required\" : \"\"}\r\n            error={t(validationErrors.Remarks)}\r\n            reserveSpace={false}\r\n          />\r\n        </div>\r\n      </div>\r\n      {modAttributeMetaDataList.length > 0\r\n        ? modAttributeMetaDataList.map((attire) => (\r\n            <ErrorBoundary>\r\n              <Accordion>\r\n                <Accordion.Content\r\n                  className=\"attributeAccordian\"\r\n                  title={\r\n                    isEnterpriseNode\r\n                      ? attire.TerminalCode + \" - \" + t(\"Attributes_Header\")\r\n                      : t(\"Attributes_Header\")\r\n                  }\r\n                >\r\n                  <AttributeDetails\r\n                    selectedAttributeList={attire.attributeMetaDataList}\r\n                    handleCellDataEdit={onAttributeDataChange}\r\n                    attributeValidationErrors={handleValidationErrorFilter(\r\n                      attributeValidationErrors,\r\n                      attire.TerminalCode\r\n                    )}\r\n                  ></AttributeDetails>\r\n                </Accordion.Content>\r\n              </Accordion>\r\n            </ErrorBoundary>\r\n          ))\r\n        : null}\r\n      <div className=\"row compartmentRow\">\r\n        <div className=\"col col-md-8 col-lg-9 col col-xl-9\">\r\n          <h4>{t(\"ShipmentOrder_PlanHeader\")}</h4>\r\n        </div>\r\n        <div className=\"col col-md-4 col-lg-3 col-xl-3\">\r\n          <div className=\"compartmentIconContainer\">\r\n            <div onClick={handleAddPlan} className=\"compartmentIcon\">\r\n              <div>\r\n                <Icon root=\"common\" name=\"badge-plus\" size=\"medium\" />\r\n              </div>\r\n              <div className=\"margin_l10\">\r\n                <h5 className=\"font14\">{t(\"TrailerInfo_Add\")}</h5>\r\n              </div>\r\n            </div>\r\n\r\n            <div\r\n              onClick={handleDeletePlan}\r\n              className=\"compartmentIcon margin_l30\"\r\n            >\r\n              <div>\r\n                <Icon root=\"common\" name=\"delete\" size=\"medium\" />\r\n              </div>\r\n              <div className=\"margin_l10\">\r\n                <h5 className=\"font14\">{t(\"TrailerInfo_Delete\")}</h5>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"row marginRightZero tableScroll\">\r\n        <div className=\"col-12 detailsTable\">\r\n          <DataTable\r\n            data={modOrderItems}\r\n            rowExpansionTemplate={rowExpansionTemplate}\r\n            expandedRows={expandedRows}\r\n            selectionMode=\"multiple\"\r\n            selection={selectedPlanRow}\r\n            onSelectionChange={handleRowSelectionChange}\r\n            scrollable={true}\r\n            scrollHeight=\"320px\"\r\n          >\r\n            <DataTable.Column\r\n              className=\"compColHeight colminWidth\"\r\n              key=\"FinishedProductCode\"\r\n              field=\"FinishedProductCode\"\r\n              header={handleIsRequiredCompartmentCell(\r\n                t(\"ShipmentOrder_ProductCode\")\r\n              )}\r\n              // rowHeader={true}\r\n              editable={true}\r\n              editFieldType=\"text\"\r\n              customEditRenderer={handleDropdownEdit}\r\n            ></DataTable.Column>\r\n\r\n            <DataTable.Column\r\n              className=\"compColHeight colminWidth\"\r\n              key=\"Quantity\"\r\n              field=\"Quantity\"\r\n              header={handleIsRequiredCompartmentCell(\r\n                t(\"ShipmentOrder_Quantity\")\r\n              )}\r\n              // rowHeader={true}\r\n              editable={true}\r\n              editFieldType=\"text\"\r\n              renderer={(cellData) =>\r\n                cellData.value === null ? \"\" : cellData.value.toLocaleString()\r\n              }\r\n              customEditRenderer={handleTextEdit}\r\n            ></DataTable.Column>\r\n\r\n            <DataTable.Column\r\n              className=\"compColHeight colminWidth\"\r\n              key=\"QuantityUOM\"\r\n              field=\"QuantityUOM\"\r\n              header={handleIsRequiredCompartmentCell(t(\"ShipmentOrder_UOM\"))}\r\n              // rowHeader={true}\r\n              editable={true}\r\n              editFieldType=\"text\"\r\n              customEditRenderer={handleDropdownEdit}\r\n            ></DataTable.Column>\r\n\r\n            <DataTable.Column\r\n              className=\"compColHeight disabledColumn colminWidth\"\r\n              key=\"BlockedQuantity\"\r\n              field=\"BlockedQuantity\"\r\n              header={t(\"ShipmentOrder_ScheduledQuantity\")}\r\n              // rowHeader={true}\r\n              renderer={(cellData) =>\r\n                cellData.value === null ? \"\" : cellData.value.toLocaleString()\r\n              }\r\n              editFieldType=\"text\"\r\n            ></DataTable.Column>\r\n\r\n            <DataTable.Column\r\n              className=\"compColHeight disabledColumn colminWidth\"\r\n              key=\"LoadedQuantity\"\r\n              field=\"LoadedQuantity\"\r\n              header={t(\"ShipmentOrder_LoadedQuantity\")}\r\n              // rowHeader={true}\r\n              renderer={(cellData) =>\r\n                cellData.value === null ? \"\" : cellData.value.toLocaleString()\r\n              }\r\n              editFieldType=\"text\"\r\n            ></DataTable.Column>\r\n\r\n            <DataTable.Column\r\n              className=\"compColHeight disabledColumn colminWidth\"\r\n              key=\"ReaminingQuantity\"\r\n              field=\"RemainingQuantity\"\r\n              header={t(\"ShipmentOrder_RemainingQuantity\")}\r\n              // rowHeader={true}\r\n              renderer={(cellData) =>\r\n                cellData.value === null ? \"\" : cellData.value.toLocaleString()\r\n              }\r\n              editFieldType=\"text\"\r\n            ></DataTable.Column>\r\n            <DataTable.Column\r\n              className=\"expandedColumn\"\r\n              initialWidth=\"200px\"\r\n              renderer={expanderTemplate}\r\n            />\r\n          </DataTable>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        <div\r\n          className=\"col col-md-8 col-lg-9 col col-xl-12\"\r\n          style={{ textAlign: \"right\" }}\r\n        >\r\n          <Button\r\n            content={t(\"ShipmentOrder_BtnForceClose\")}\r\n            disabled={\r\n              order.OrderCode === \"\" ||\r\n              modOrder.OrderStatus === Constants.orderStatus.CLOSED ||\r\n              modOrder.OrderStatus === Constants.orderStatus.FULLY_DELIVERED||!enableForceClose\r\n                ? true\r\n                : false\r\n            }\r\n            onClick={handleForceClose}\r\n          ></Button>\r\n          {order.OrderCode !== \"\" ? (\r\n            <Button\r\n              content={t(\"ShipmentOrder_ViewShipments\")}\r\n              // disabled={order.OrderCode === \"\" || modOrder.OrderStatus === Constants.orderStatus.CLOSED\r\n              //   || modOrder.OrderStatus === Constants.orderStatus.FULLY_DELIVERED ? true : false}\r\n              onClick={handleViewShipments}\r\n            ></Button>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    //   )}\r\n    // </TranslationConsumer>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport * as Utilities from \"../../../JS/Utilities\";\r\nimport * as KeyCodes from \"../../../JS/KeyCodes\";\r\nimport * as Constants from \"../../../JS/Constants\";\r\nimport * as RestAPIs from \"../../../JS/RestApis\";\r\nimport { connect } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport ErrorBoundary from \"../../ErrorBoundary\";\r\nimport TMDetailsHeader from \"../../UIBase/Common/TMDetailsHeader\";\r\nimport { emptyOrder } from \"../../../JS/DefaultEntities\";\r\nimport lodash from \"lodash\";\r\nimport { functionGroups, fnOrder, fnKPIInformation, fnOrderForceClose } from \"../../../JS/FunctionGroups\";\r\nimport { LoadingPage } from \"../../UIBase/Common/LoadingPage\";\r\nimport { TMDetailsUserActions } from \"../../UIBase/Common/TMDetailsUserActions\";\r\nimport OrderDetails from \"../../UIBase/Details/OrderDetails\";\r\nimport { orderValidationDef } from \"../../../JS/ValidationDef\";\r\nimport { orderPlanValidationDef } from \"../../../JS/DetailsTableValidationDef\";\r\nimport {\r\n  orderAttributeEntity,\r\n  orderItemAttributeEntity,\r\n} from \"../../../JS/AttributeEntity\";\r\nimport TruckShipmentProject from \"../../Composite/Entity/TruckShipmentComposite\";\r\nimport { TranslationConsumer } from \"@scuf/localization\";\r\nimport { Button } from \"@scuf/common\";\r\nimport * as DateFieldsInEntities from \"../../../JS/DateFieldsInEntities\";\r\nimport TMDetailsKPILayout from \"../Common/TMDetailsKPILayout\";\r\nimport { kpiOrderDetail } from \"../../../JS/KPIPageName\";\r\nimport UserAuthenticationLayout from \"../Common/UserAuthentication\";\r\nclass OrderDetailsComposite extends Component {\r\n  state = {\r\n    order: {},\r\n    modOrder: {},\r\n    modOrderItems: [],\r\n    validationErrors: Utilities.getInitialValidationErrors(orderValidationDef),\r\n    isReadyToRender: false,\r\n    saveEnabled: false,\r\n    terminalOptions: [],\r\n    volumeUOMOptions: [],\r\n    weightUOMOptions: [],\r\n    selectedPlanRow: [],\r\n    finishedProductOptions: [],\r\n    customerOptions: [],\r\n    attributeMetaDataList: [],\r\n    compartmentAttributeMetaDataList: [],\r\n    modAttributeMetaDataList: [],\r\n    attributeValidationErrors: [],\r\n    expandedRows: [],\r\n    isShowTruckShipment: false,\r\n    isShowBackButton: false,\r\n    orderKPIList: [],\r\n    enableForceClose:false,\r\n    showAuthenticationLayout: false,\r\n    showForceCloseAuthenticationLayout: false,\r\n    tempOrder: {},\r\n  };\r\n\r\n  // terminalOptions = [];\r\n\r\n  componentDidMount() {\r\n    Utilities.setArchive(this.props.userDetails.EntityResult.IsArchived);\r\n    let isNewOrder = false;\r\n    if (this.props.selectedRow.Common_Code === undefined) isNewOrder = true;\r\n    //this.getOrder(isNewOrder);\r\n    this.getAttributes(isNewOrder);\r\n    this.getTerminalList();\r\n    this.getUOMList();\r\n    this.getFinishedProductList();\r\n    this.getCustomerList();\r\n  }\r\n\r\n  getAttributes(isNewOrder) {\r\n    try {\r\n      axios(\r\n        RestAPIs.GetAttributesMetaData,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          [orderAttributeEntity, orderItemAttributeEntity],\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      ).then((response) => {\r\n        var result = response.data;\r\n        if (result.IsSuccess === true) {\r\n          this.setState(\r\n            {\r\n              attributeMetaDataList: lodash.cloneDeep(\r\n                result.EntityResult.ORDER\r\n              ),\r\n              attributeValidationErrors:\r\n                Utilities.getAttributeInitialValidationErrors(\r\n                  result.EntityResult.ORDER\r\n                ),\r\n              compartmentAttributeMetaDataList: lodash.cloneDeep(\r\n                result.EntityResult.ORDERITEM\r\n              ),\r\n            },\r\n            () => this.getOrder(isNewOrder)\r\n          );\r\n        } else {\r\n          console.log(\"Failed to get Attributes\");\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.log(\"Error while getting Attributes:\", error);\r\n    }\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    try {\r\n      if (\r\n        this.state.order.OrderCode !== \"\" &&\r\n        nextProps.selectedRow.Common_Code === undefined &&\r\n        this.props.tokenDetails.tokenInfo === nextProps.tokenDetails.tokenInfo\r\n      ) {\r\n        this.getOrder(true);\r\n        let validationErrors = { ...this.state.validationErrors };\r\n        Object.keys(validationErrors).forEach((key) => {\r\n          validationErrors[key] = \"\";\r\n        });\r\n        this.setState({ validationErrors });\r\n      }\r\n    } catch (error) {\r\n      console.log(\r\n        \"OrderDetailsComposite:Error occured on componentWillReceiveProps\",\r\n        error\r\n      );\r\n    }\r\n  }\r\n\r\n  getCustomerList() {\r\n    axios(\r\n      RestAPIs.GetCustomerDestinations +\r\n      \"?TransportationType=\" +\r\n      Constants.TransportationType.ROAD +\r\n      \"&ShareholderCode=\" +\r\n      this.props.selectedShareholder,\r\n      Utilities.getAuthenticationObjectforGet(this.props.tokenDetails.tokenInfo)\r\n    ).then((response) => {\r\n      var result = response.data;\r\n      if (result.IsSuccess === true) {\r\n        if (Array.isArray(result.EntityResult)) {\r\n          let shareholderCustomers = result.EntityResult.filter(\r\n            (shareholderCust) =>\r\n              shareholderCust.ShareholderCode === this.props.selectedShareholder\r\n          );\r\n          if (shareholderCustomers.length > 0) {\r\n            let customerDestinationOptions =\r\n              shareholderCustomers[0].CustomerDestinationsList;\r\n            let customerOptions = Object.keys(customerDestinationOptions);\r\n            customerOptions = Utilities.transferListtoOptions(customerOptions);\r\n            this.setState({ customerOptions });\r\n          } else {\r\n            console.log(\"no customers identified for shareholder\");\r\n          }\r\n\r\n          // let finishedProductOptions = Utilities.transferListtoOptions(\r\n          //   result.EntityResult\r\n          // );\r\n          // this.setState({ finishedProductOptions });\r\n        } else {\r\n          console.log(\"customerdestinations not identified for shareholder\");\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  getFinishedProductList() {\r\n    axios(\r\n      RestAPIs.GetFinishedProductCodes +\r\n      \"?ShareholderCode=\" +\r\n      this.props.selectedShareholder,\r\n      Utilities.getAuthenticationObjectforGet(this.props.tokenDetails.tokenInfo)\r\n    ).then((response) => {\r\n      var result = response.data;\r\n      if (result.IsSuccess === true) {\r\n        if (\r\n          Array.isArray(result.EntityResult) &&\r\n          result.EntityResult.length > 0\r\n        ) {\r\n          let finishedProductOptions = Utilities.transferListtoOptions(\r\n            result.EntityResult\r\n          );\r\n          this.setState({ finishedProductOptions });\r\n        }\r\n      }\r\n    });\r\n  }\r\n  getUOMList() {\r\n    axios(\r\n      RestAPIs.GetUOMList,\r\n      Utilities.getAuthenticationObjectforGet(this.props.tokenDetails.tokenInfo)\r\n    )\r\n      .then((response) => {\r\n        // console.log(response);\r\n        var result = response.data;\r\n        if (result.IsSuccess === true) {\r\n          if (result.EntityResult !== null) {\r\n            let weightUOMs = result.EntityResult.MASS;\r\n            let weightUOMOptions = [];\r\n            weightUOMs.forEach((weightOption) => {\r\n              weightUOMOptions.push({\r\n                text: weightOption,\r\n                value: weightOption,\r\n              });\r\n            });\r\n\r\n            let volumeUOMs = result.EntityResult.VOLUME;\r\n            let volumeUOMOptions = [];\r\n            volumeUOMs.forEach((volumeOption) => {\r\n              volumeUOMOptions.push({\r\n                text: volumeOption,\r\n                value: volumeOption,\r\n              });\r\n            });\r\n\r\n            // let lengthUOMs = result.EntityResult.LENGTH;\r\n            // let lengthUOMOptions = [];\r\n            // lengthUOMs.forEach((lengthOption) => {\r\n            //   lengthUOMOptions.push({\r\n            //     text: lengthOption,\r\n            //     value: lengthOption,\r\n            //   });\r\n            // });\r\n\r\n            this.setState({\r\n              volumeUOMOptions,\r\n              weightUOMOptions,\r\n            });\r\n          }\r\n        } else {\r\n          console.log(\"Error in getUOM:\", result.ErrorList);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while getting getUOM:\", error);\r\n      });\r\n  }\r\n\r\n  getTerminalList() {\r\n    try {\r\n      axios(\r\n        RestAPIs.GetTerminals,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          [this.props.selectedShareholder],\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      ).then((response) => {\r\n        let result = response.data;\r\n        if (result.IsSuccess === true) {\r\n          if (\r\n            Array.isArray(result.EntityResult) &&\r\n            result.EntityResult.length > 0\r\n          )\r\n            this.setState({ terminalOptions: result.EntityResult });\r\n        }\r\n      });\r\n    } catch (err) {\r\n      console.log(\"OrderComposite:Error occured on getTerminalsList\", err);\r\n    }\r\n  }\r\n\r\n  handleChange = (propertyName, data) => {\r\n    try {\r\n      let modOrder = lodash.cloneDeep(this.state.modOrder);\r\n      modOrder[propertyName] = data;\r\n      //this.setState({ modOrder });\r\n\r\n      const validationErrors = { ...this.state.validationErrors };\r\n      if (modOrder.Active === this.state.order.Active) {\r\n        if (\r\n          this.state.order.Remarks === modOrder.Remarks ||\r\n          modOrder.Remarks === \"\"\r\n        ) {\r\n          validationErrors.Remarks = \"\";\r\n        }\r\n        // if (modOrder.Remarks === \"\")\r\n        //   modOrder.Remarks = this.state.order.Remarks;\r\n      }\r\n      if (propertyName === \"Active\") {\r\n        if (modOrder.Active !== this.state.order.Active) {\r\n          modOrder.Remarks = \"\";\r\n        }\r\n      }\r\n      if (orderValidationDef[propertyName] !== undefined) {\r\n        validationErrors[propertyName] = Utilities.validateField(\r\n          orderValidationDef[propertyName],\r\n          data\r\n        );\r\n      }\r\n      this.setState({ validationErrors, modOrder }, () => {\r\n        if (propertyName === \"TerminalCodes\") {\r\n          this.terminalSelectionChange(data);\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.log(\"OrderDetailsComposite:Error occured on handleChange\", error);\r\n    }\r\n  };\r\n\r\n  handleRowSelectionChange = (planRow) => {\r\n    this.setState({ selectedPlanRow: planRow });\r\n  };\r\n\r\n  handleCellDataEdit = (newVal, cellData) => {\r\n    let modOrderItems = lodash.cloneDeep(this.state.modOrderItems);\r\n\r\n    modOrderItems[cellData.rowIndex][cellData.field] = newVal;\r\n\r\n    this.setState({ modOrderItems });\r\n  };\r\n\r\n  handleAddPlan = () => {\r\n    if (!this.props.userDetails.EntityResult.IsArchived) {\r\n      try {\r\n        let newPlan = {\r\n          // primaryKey: null,\r\n          Attributes: [],\r\n          BlockedQuantity: null,\r\n          FinishedProductCode: null,\r\n          FinishdedProductType: null,\r\n          ItemCode: null,\r\n          LoadedQuantity: null,\r\n          LotNumber: null,\r\n          OrderCode: null,\r\n          Quantity: null,\r\n          QuantityUOM:\r\n            this.props.userDetails.EntityResult.PageAttibutes\r\n              .DefaultQtyUOMForTransactionUI.ROAD,\r\n          RemainingQuantity: null,\r\n          ShareholderCode: null,\r\n        };\r\n        let modOrderItems = lodash.cloneDeep(this.state.modOrderItems);\r\n\r\n        newPlan.SeqNumber =\r\n          Utilities.getMaxSeqNumberfromListObject(modOrderItems);\r\n\r\n        modOrderItems.push(newPlan);\r\n\r\n        this.setState(\r\n          {\r\n            modOrderItems,\r\n            selectedPlanRow: [],\r\n          },\r\n          () => {\r\n            if (\r\n              this.props.userDetails.EntityResult.IsEnterpriseNode === false\r\n            ) {\r\n              var attributeMetaDataList = lodash.cloneDeep(\r\n                this.state.compartmentAttributeMetaDataList\r\n              );\r\n              if (attributeMetaDataList.length > 0)\r\n                this.formCompartmentAttributes([\r\n                  attributeMetaDataList[0].TerminalCode,\r\n                ]);\r\n            } else\r\n              this.formCompartmentAttributes(this.state.modOrder.TerminalCodes);\r\n          }\r\n        );\r\n      } catch (error) {\r\n        console.log(\r\n          \"OrderDetailsComposite:Error occured on handleAddCompartment\",\r\n          error\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  handleDeletePlan = () => {\r\n    if (!this.props.userDetails.EntityResult.IsArchived) {\r\n      try {\r\n        if (\r\n          this.state.selectedPlanRow != null &&\r\n          this.state.selectedPlanRow.length > 0\r\n        ) {\r\n          if (this.state.modOrderItems.length > 0) {\r\n            let modOrderItems = lodash.cloneDeep(this.state.modOrderItems);\r\n\r\n            this.state.selectedPlanRow.forEach((obj, index) => {\r\n              modOrderItems = modOrderItems.filter((plan, cindex) => {\r\n                return plan.SeqNumber !== obj.SeqNumber;\r\n              });\r\n            });\r\n\r\n            // let start = 1;\r\n            // modOrder.OrderItems.forEach((plan) => {\r\n            //   plan.primaryKey = start;\r\n            //   ++start;\r\n            // });\r\n\r\n            this.setState({ modOrderItems });\r\n          }\r\n        }\r\n\r\n        this.setState({ selectedPlanRow: [] });\r\n      } catch (error) {\r\n        console.log(\r\n          \"OrderDetailsComposite:Error occured on handleDeleteCompartment\",\r\n          error\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  getOrder(isNewOrder) {\r\n    if (isNewOrder) {\r\n      //this.terminalOptions = [];\r\n      emptyOrder.OrderStartDate = new Date();\r\n      // emptyOrder.OrderEndDate = new Date();\r\n      emptyOrder.TerminalCodes =\r\n        this.state.terminalOptions.length === 1\r\n          ? [...this.state.terminalOptions]\r\n          : [];\r\n      emptyOrder.OrderDate = new Date();\r\n      this.handleResetAttributeValidationError();\r\n      this.setState(\r\n        {\r\n          order: lodash.cloneDeep(emptyOrder),\r\n          modOrder: lodash.cloneDeep(emptyOrder),\r\n          modOrderItems: [],\r\n          isReadyToRender: true,\r\n          modAttributeMetaDataList: [],\r\n          orderKPIList: [],\r\n          saveEnabled: Utilities.isInFunction(\r\n            this.props.userDetails.EntityResult.FunctionsList,\r\n            functionGroups.add,\r\n            fnOrder\r\n          ),\r\n        },\r\n        () => {\r\n          if (this.props.userDetails.EntityResult.IsEnterpriseNode === false)\r\n            this.localNodeAttribute();\r\n        }\r\n      );\r\n\r\n      return;\r\n    }\r\n\r\n    let keyCode = [\r\n      {\r\n        key: KeyCodes.orderCode,\r\n        value:\r\n          this.props.selectedRow.Common_Code === undefined\r\n            ? this.state.modOrder.OrderCode\r\n            : this.props.selectedRow.Common_Code,\r\n      },\r\n    ];\r\n    let obj = {\r\n      ShareHolderCode: this.props.selectedShareholder,\r\n      keyDataCode: KeyCodes.orderCode,\r\n      KeyCodes: keyCode,\r\n    };\r\n    axios(\r\n      RestAPIs.GetOrder,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        let result = response.data;\r\n\r\n        if (result.IsSuccess === true) {\r\n          let modOrderItems = [];\r\n          if (\r\n            result.EntityResult !== null &&\r\n            result.EntityResult.OrderItems !== null &&\r\n            result.EntityResult.OrderItems.length > 0\r\n          ) {\r\n            modOrderItems = Utilities.addSeqNumberToListObject(\r\n              lodash.cloneDeep(result.EntityResult.OrderItems)\r\n            );\r\n          }\r\n          this.setState(\r\n            {\r\n              isReadyToRender: true,\r\n              order: lodash.cloneDeep(result.EntityResult),\r\n              modOrder: lodash.cloneDeep(result.EntityResult),\r\n              modOrderItems: lodash.cloneDeep(modOrderItems),\r\n              saveEnabled:\r\n                Utilities.isInFunction(\r\n                  this.props.userDetails.EntityResult.FunctionsList,\r\n                  functionGroups.modify,\r\n                  fnOrder\r\n                ) &&\r\n                result.EntityResult.OrderStatus !==\r\n                Constants.orderStatus.CLOSED &&\r\n                result.EntityResult.OrderStatus !==\r\n                Constants.orderStatus.FULLY_DELIVERED,\r\n              enableForceClose: Utilities.isInFunction(\r\n                this.props.userDetails.EntityResult.FunctionsList,\r\n                functionGroups.modify,\r\n                fnOrder\r\n              ),\r\n            },\r\n           \r\n            () => {\r\n              this.getKPIList(this.props.selectedShareholder, result.EntityResult.OrderCode)\r\n              if (this.props.userDetails.EntityResult.IsEnterpriseNode) {\r\n                this.terminalSelectionChange(result.EntityResult.TerminalCodes);\r\n              } else {\r\n                this.localNodeAttribute();\r\n              }\r\n            }\r\n          );\r\n        } else {\r\n          this.setState({\r\n            modOrder: lodash.cloneDeep(emptyOrder),\r\n            order: lodash.cloneDeep(emptyOrder),\r\n            isReadyToRender: true,\r\n          });\r\n          console.log(\"Error in GetOrder:\", result.ErrorList);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while getting Order:\", error);\r\n      });\r\n  }\r\n\r\n  handleResetAttributeValidationError() {\r\n    try {\r\n      var attributeMetaDataList = lodash.cloneDeep(\r\n        this.state.attributeMetaDataList\r\n      );\r\n      this.setState({\r\n        attributeValidationErrors:\r\n          Utilities.getAttributeInitialValidationErrors(attributeMetaDataList),\r\n      });\r\n    } catch (error) {\r\n      console.log(\r\n        \"OrderDetailsComposite:Error occured on handleResetAttributeValidationError\",\r\n        error\r\n      );\r\n    }\r\n  }\r\n\r\n  terminalSelectionChange(selectedTerminals) {\r\n    try {\r\n      let attributesTerminalsList = [];\r\n      var attributeMetaDataList = [];\r\n      var modAttributeMetaDataList = [];\r\n\r\n      attributeMetaDataList = lodash.cloneDeep(\r\n        this.state.attributeMetaDataList\r\n      );\r\n      modAttributeMetaDataList = lodash.cloneDeep(\r\n        this.state.modAttributeMetaDataList\r\n      );\r\n\r\n      const attributeValidationErrors = lodash.cloneDeep(\r\n        this.state.attributeValidationErrors\r\n      );\r\n\r\n      var modOrder = lodash.cloneDeep(this.state.modOrder);\r\n\r\n      selectedTerminals.forEach((terminal) => {\r\n        var existitem = modAttributeMetaDataList.find((selectedAttribute) => {\r\n          return selectedAttribute.TerminalCode === terminal;\r\n        });\r\n\r\n        if (existitem === undefined) {\r\n          attributeMetaDataList.forEach(function (attributeMetaData) {\r\n            if (attributeMetaData.TerminalCode === terminal) {\r\n              var Attributevalue = modOrder.Attributes.find(\r\n                (orderAttribute) => {\r\n                  return orderAttribute.TerminalCode === terminal;\r\n                }\r\n              );\r\n              if (Attributevalue !== undefined) {\r\n                attributeMetaData.attributeMetaDataList.forEach(function (\r\n                  attributeMetaData\r\n                ) {\r\n                  var valueAttribute = Attributevalue.ListOfAttributeData.find(\r\n                    (x) => {\r\n                      return x.AttributeCode === attributeMetaData.Code;\r\n                    }\r\n                  );\r\n                  if (valueAttribute !== undefined)\r\n                    attributeMetaData.DefaultValue =\r\n                      valueAttribute.AttributeValue;\r\n                });\r\n              }\r\n              attributesTerminalsList.push(attributeMetaData);\r\n            }\r\n          });\r\n        } else {\r\n          attributesTerminalsList.push(existitem);\r\n        }\r\n      });\r\n\r\n      modAttributeMetaDataList = [];\r\n      modAttributeMetaDataList = attributesTerminalsList;\r\n      modAttributeMetaDataList = Utilities.attributesConvertoDecimal(\r\n        modAttributeMetaDataList\r\n      );\r\n      attributeValidationErrors.forEach((attributeValidation) => {\r\n        var existTerminal = selectedTerminals.find((selectedTerminals) => {\r\n          return attributeValidation.TerminalCode === selectedTerminals;\r\n        });\r\n        if (existTerminal === undefined) {\r\n          Object.keys(attributeValidation.attributeValidationErrors).forEach(\r\n            (key) => (attributeValidation.attributeValidationErrors[key] = \"\")\r\n          );\r\n        }\r\n      });\r\n\r\n      this.formCompartmentAttributes(selectedTerminals);\r\n\r\n      this.setState({ modAttributeMetaDataList, attributeValidationErrors });\r\n    } catch (error) {\r\n      console.log(\r\n        \"OrderDetailsComposite:Error occured on terminalSelectionChange\",\r\n        error\r\n      );\r\n    }\r\n  }\r\n\r\n  formCompartmentAttributes(selectedTerminals) {\r\n    try {\r\n      let attributes = lodash.cloneDeep(\r\n        this.state.compartmentAttributeMetaDataList\r\n      );\r\n\r\n      attributes = attributes.filter(function (attTerminal) {\r\n        return selectedTerminals.some(function (selTerminal) {\r\n          return attTerminal.TerminalCode === selTerminal;\r\n        });\r\n      });\r\n      let modOrderItems = lodash.cloneDeep(this.state.modOrderItems);\r\n\r\n      modOrderItems.forEach((comp) => {\r\n        let compAttributes = [];\r\n        attributes.forEach((att) => {\r\n          att.attributeMetaDataList.forEach((attribute) => {\r\n            compAttributes.push({\r\n              AttributeCode: attribute.Code,\r\n              AttributeName: attribute.DisplayName,\r\n              AttributeValue: attribute.DefaultValue,\r\n              TerminalCode: attribute.TerminalCode,\r\n              IsMandatory: attribute.IsMandatory,\r\n              DataType: attribute.DataType,\r\n              IsReadonly: attribute.IsReadonly,\r\n              MinValue: attribute.MinValue,\r\n              MaxValue: attribute.MaxValue,\r\n              ValidationFormat: attribute.ValidationFormat,\r\n              compSequenceNo: \"\",\r\n            });\r\n          });\r\n        });\r\n        let attributesforNewComp = lodash.cloneDeep(compAttributes);\r\n\r\n        if (\r\n          comp.Code === null &&\r\n          (comp.AttributesforUI === null || comp.AttributesforUI === undefined)\r\n        ) {\r\n          comp.AttributesforUI = [];\r\n          attributesforNewComp.forEach((assignedAttributes) => {\r\n            assignedAttributes.compSequenceNo = comp.SeqNumber;\r\n            comp.AttributesforUI.push(assignedAttributes);\r\n          });\r\n        } else {\r\n          if (\r\n            comp.AttributesforUI !== null &&\r\n            comp.AttributesforUI !== undefined\r\n          ) {\r\n            comp.AttributesforUI = comp.AttributesforUI.filter(function (\r\n              attTerminal\r\n            ) {\r\n              return selectedTerminals.some(function (selTerminal) {\r\n                return attTerminal.TerminalCode === selTerminal;\r\n              });\r\n            });\r\n\r\n            compAttributes = compAttributes.filter(function (attTerminal) {\r\n              return !comp.AttributesforUI.some(function (selTerminal) {\r\n                return attTerminal.TerminalCode === selTerminal.TerminalCode;\r\n              });\r\n            });\r\n          } else comp.AttributesforUI = [];\r\n\r\n          let tempCompAttributes = lodash.cloneDeep(compAttributes);\r\n          if (\r\n            Array.isArray(comp.Attributes) &&\r\n            comp.Attributes !== null &&\r\n            comp.Attributes !== undefined &&\r\n            comp.Attributes.length > 0\r\n          ) {\r\n            let selectedTerminalAttributes = comp.Attributes.filter(function (\r\n              attTerminal\r\n            ) {\r\n              return selectedTerminals.some(function (selTerminal) {\r\n                return attTerminal.TerminalCode === selTerminal;\r\n              });\r\n            });\r\n            selectedTerminalAttributes.forEach((att) => {\r\n              att.ListOfAttributeData.forEach((attData) => {\r\n                let tempAttIndex = tempCompAttributes.findIndex(\r\n                  (item) =>\r\n                    item.TerminalCode === att.TerminalCode &&\r\n                    item.AttributeCode === attData.AttributeCode\r\n                );\r\n                if (tempAttIndex >= 0)\r\n                  tempCompAttributes[tempAttIndex].AttributeValue =\r\n                    attData.AttributeValue;\r\n              });\r\n            });\r\n            tempCompAttributes.forEach((assignedAttributes) => {\r\n              assignedAttributes.compSequenceNo = comp.SeqNumber;\r\n              comp.AttributesforUI.push(assignedAttributes);\r\n            });\r\n          } else {\r\n            compAttributes.forEach((assignedAttributes) => {\r\n              assignedAttributes.compSequenceNo = comp.SeqNumber;\r\n              comp.AttributesforUI.push(assignedAttributes);\r\n            });\r\n          }\r\n        }\r\n        this.toggleExpand(comp, true, true);\r\n        if (comp.AttributesforUI !== undefined && comp.AttributesforUI != null)\r\n          comp.AttributesforUI = Utilities.compartmentAttributesConvertoDecimal(\r\n            comp.AttributesforUI\r\n          );\r\n        comp.AttributesforUI = Utilities.addSeqNumberToListObject(\r\n          comp.AttributesforUI\r\n        );\r\n      });\r\n      this.setState({ modOrderItems });\r\n    } catch (error) {\r\n      console.log(\r\n        \"OrderDetailsComposite:Error in forming Compartment Attributes\",\r\n        error\r\n      );\r\n    }\r\n  }\r\n\r\n  fillAttributeDetails(modOrder, attributeList) {\r\n    try {\r\n      attributeList = Utilities.attributesDatatypeConversion(attributeList);\r\n      modOrder.Attributes = Utilities.fillAttributeDetails(attributeList);\r\n\r\n      // For Compartment Attributes\r\n      modOrder.OrderItems.forEach((comp) => {\r\n        if (comp.AttributesforUI !== undefined && comp.AttributesforUI != null)\r\n          comp.AttributesforUI =\r\n            Utilities.compartmentAttributesDatatypeConversion(\r\n              comp.AttributesforUI\r\n            );\r\n        let selectedTerminals = [];\r\n        if (this.props.userDetails.EntityResult.IsEnterpriseNode)\r\n          selectedTerminals = lodash.cloneDeep(modOrder.TerminalCodes);\r\n        else {\r\n          var compAttributeMetaDataList = lodash.cloneDeep(\r\n            this.state.compartmentAttributeMetaDataList\r\n          );\r\n          if (compAttributeMetaDataList.length > 0)\r\n            selectedTerminals = [compAttributeMetaDataList[0].TerminalCode];\r\n        }\r\n        let terminalAttributes = [];\r\n        comp.Attributes = [];\r\n        selectedTerminals.forEach((terminal) => {\r\n          if (\r\n            comp.AttributesforUI !== null &&\r\n            comp.AttributesforUI !== undefined\r\n          )\r\n            terminalAttributes = comp.AttributesforUI.filter(function (\r\n              attTerminal\r\n            ) {\r\n              return attTerminal.TerminalCode === terminal;\r\n            });\r\n\r\n          let attribute = {\r\n            ListOfAttributeData: [],\r\n          };\r\n\r\n          attribute.TerminalCode = terminal;\r\n          terminalAttributes.forEach((termAtt) => {\r\n            if (termAtt.AttributeValue !== \"\" || termAtt.IsMandatory === true)\r\n              attribute.ListOfAttributeData.push({\r\n                AttributeCode: termAtt.AttributeCode,\r\n                AttributeValue: termAtt.AttributeValue,\r\n              });\r\n            //})\r\n            //comp.Attributes.push(attribute);\r\n          });\r\n          if (\r\n            attribute.ListOfAttributeData !== null &&\r\n            attribute.ListOfAttributeData !== undefined &&\r\n            attribute.ListOfAttributeData.length > 0\r\n          )\r\n            comp.Attributes.push(attribute);\r\n        });\r\n      });\r\n      return modOrder;\r\n    } catch (error) {\r\n      console.log(\r\n        \"OrderDetailsComposite:Error occured on fillAttributeDetails\",\r\n        error\r\n      );\r\n    }\r\n  }\r\n\r\n  localNodeAttribute() {\r\n    try {\r\n      var attributeMetaDataList = lodash.cloneDeep(\r\n        this.state.attributeMetaDataList\r\n      );\r\n      if (\r\n        Array.isArray(attributeMetaDataList) &&\r\n        attributeMetaDataList.length > 0\r\n      )\r\n        this.terminalSelectionChange([attributeMetaDataList[0].TerminalCode]);\r\n      else {\r\n        var compAttributeMetaDataList = lodash.cloneDeep(\r\n          this.state.compartmentAttributeMetaDataList\r\n        );\r\n        if (\r\n          Array.isArray(compAttributeMetaDataList) &&\r\n          compAttributeMetaDataList.length > 0\r\n        )\r\n          this.formCompartmentAttributes([\r\n            compAttributeMetaDataList[0].TerminalCode,\r\n          ]);\r\n      }\r\n    } catch (error) {\r\n      console.log(\r\n        \"OrderDetailsComposite:Error occured on localNodeAttribute\",\r\n        error\r\n      );\r\n    }\r\n  }\r\n\r\n  handleDateTextChange = (propertyName, value, error) => {\r\n    try {\r\n      let validationErrors = { ...this.state.validationErrors };\r\n      let modOrder = { ...this.state.modOrder };\r\n      validationErrors[propertyName] = error;\r\n      modOrder[propertyName] = value;\r\n      this.setState({ validationErrors, modOrder });\r\n    } catch (error) {\r\n      console.log(\r\n        \"OrderDetailsComposite:Error occured on handleDateTextChange\",\r\n        error\r\n      );\r\n    }\r\n  };\r\n\r\n  handleAttributeDataChange = (attribute, value) => {\r\n    try {\r\n      let matchedAttributes = [];\r\n      let modAttributeMetaDataList = lodash.cloneDeep(\r\n        this.state.modAttributeMetaDataList\r\n      );\r\n      let matchedAttributesList = modAttributeMetaDataList.filter(\r\n        (modattribute) => modattribute.TerminalCode === attribute.TerminalCode\r\n      );\r\n      if (\r\n        matchedAttributesList.length > 0 &&\r\n        Array.isArray(matchedAttributesList[0].attributeMetaDataList)\r\n      ) {\r\n        matchedAttributes =\r\n          matchedAttributesList[0].attributeMetaDataList.filter(\r\n            (modattribute) => modattribute.Code === attribute.Code\r\n          );\r\n      }\r\n      if (matchedAttributes.length > 0) {\r\n        matchedAttributes[0].DefaultValue = value;\r\n      }\r\n      const attributeValidationErrors = lodash.cloneDeep(\r\n        this.state.attributeValidationErrors\r\n      );\r\n\r\n      attributeValidationErrors.forEach((attributeValidation) => {\r\n        if (attributeValidation.TerminalCode === attribute.TerminalCode) {\r\n          attributeValidation.attributeValidationErrors[attribute.Code] =\r\n            Utilities.valiateAttributeField(attribute, value);\r\n        }\r\n      });\r\n      this.setState({ attributeValidationErrors, modAttributeMetaDataList });\r\n    } catch (error) {\r\n      console.log(\r\n        \"OrderDetailsComposite:Error occured on handleAttributeDataChange\",\r\n        error\r\n      );\r\n    }\r\n  };\r\n\r\n  handleCompAttributeCellDataEdit = (compAttribute, value) => {\r\n    let modOrderItems = lodash.cloneDeep(this.state.modOrderItems);\r\n    let compIndex = modOrderItems.findIndex(\r\n      (item) => item.SeqNumber === compAttribute.rowData.compSequenceNo\r\n    );\r\n    if (compIndex >= 0)\r\n      modOrderItems[compIndex].AttributesforUI[\r\n        //compAttribute.rowIndex\r\n        compAttribute.rowData.SeqNumber - 1\r\n      ].AttributeValue = value;\r\n    this.setState({ modOrderItems });\r\n    if (compIndex >= 0) this.toggleExpand(modOrderItems[compIndex], true, true);\r\n  };\r\n\r\n  handleAllTerminalsChange = (checked) => {\r\n    try {\r\n      const modOrder = lodash.cloneDeep(this.state.modOrder);\r\n      if (checked) modOrder.TerminalCodes = [...this.state.terminalOptions];\r\n      else modOrder.TerminalCodes = [];\r\n      this.setState({ modOrder });\r\n      this.terminalSelectionChange(modOrder.TerminalCodes);\r\n    } catch (error) {\r\n      console.log(\r\n        \"OrderComposite:Error occured on handleAllTerminasChange\",\r\n        error\r\n      );\r\n    }\r\n  };\r\n\r\n  fillDetails() {\r\n    try {\r\n      let modOrder = lodash.cloneDeep(this.state.modOrder);\r\n\r\n      modOrder.ShareholderCode = this.props.selectedShareholder;\r\n\r\n      if (this.state.order.OrderCode === \"\") modOrder.OrderDate = new Date();\r\n\r\n      modOrder.OrderItems = lodash.cloneDeep(this.state.modOrderItems);\r\n\r\n      if (modOrder.OrderItems !== null && modOrder.OrderItems.length > 0) {\r\n        modOrder.OrderItems.forEach((plan) => {\r\n          plan.OrderCode = modOrder.OrderCode;\r\n          plan.ShareholderCode = modOrder.ShareholderCode;\r\n          if (plan.Quantity !== null && plan.Quantity !== \"\")\r\n            plan.Quantity = plan.Quantity.toLocaleString();\r\n          delete plan.SeqNumber;\r\n          if (\r\n            plan.AttributesforUI !== undefined &&\r\n            plan.AttributesforUI != null\r\n          )\r\n            plan.AttributesforUI =\r\n              Utilities.compartmentAttributesConverttoLocaleString(\r\n                plan.AttributesforUI\r\n              );\r\n        });\r\n      }\r\n      return modOrder;\r\n    } catch (err) {\r\n      console.log(\"OrderDetailsComposite:Error occured on filldetails\", err);\r\n    }\r\n  }\r\n  convertStringtoDecimal(modOrder, attributeList) {\r\n    try {\r\n      modOrder.OrderItems.forEach((plan) => {\r\n        plan.Quantity = Utilities.convertStringtoDecimal(plan.Quantity);\r\n      });\r\n      modOrder = this.fillAttributeDetails(modOrder, attributeList);\r\n      return modOrder;\r\n    } catch (err) {\r\n      console.log(\"convertStringtoDecimal error order details\", err);\r\n    }\r\n  }\r\n\r\n\r\n  addUpdateOrder = () => {\r\n    try {\r\n      this.setState({ saveEnabled: false });\r\n      let tempOrder = lodash.cloneDeep(this.state.tempOrder);\r\n\r\n      this.state.order.OrderCode === \"\"\r\n      ? this.createOrder(tempOrder)\r\n      : this.updateOrder(tempOrder);\r\n    } catch (error) {\r\n      console.log(\"Order Composite : Error in addUpdateOrder\");\r\n    }\r\n  };\r\n\r\n  \r\n\r\n  handleSave = () => {\r\n    try {\r\n      let returnValue = Object.values(this.state.validationErrors).every(\r\n        function (value) {\r\n          return value === \"\";\r\n        }\r\n      );\r\n      if (returnValue) {\r\n       // this.setState({ saveEnabled: false });\r\n        let modOrder = this.fillDetails();\r\n        let attributeList = Utilities.attributesConverttoLocaleString(\r\n          this.state.modAttributeMetaDataList\r\n        );\r\n\r\n        if (this.validateSave(modOrder, attributeList)) {\r\n          modOrder = this.convertStringtoDecimal(modOrder, attributeList);\r\n          //if (modOrder !== null)\r\n          modOrder = Utilities.convertDatesToString(\r\n            DateFieldsInEntities.DatesInEntity.Order,\r\n            modOrder\r\n          );\r\n          \r\n\r\n            let showAuthenticationLayout =\r\n            this.props.userDetails.EntityResult.IsWebPortalUser !== true\r\n              ? true\r\n              : false;\r\n          let tempOrder = lodash.cloneDeep(modOrder);\r\n          this.setState({ showAuthenticationLayout, tempOrder }, () => {\r\n            if (showAuthenticationLayout === false) {\r\n              this.addUpdateOrder();\r\n            }\r\n        });\r\n\r\n\r\n          modOrder = Utilities.convertStringToDates(\r\n            DateFieldsInEntities.DatesInEntity.Order,\r\n            modOrder\r\n          );\r\n          // else this.setState({ saveEnabled: true });\r\n        } else {\r\n          this.setState({ saveEnabled: true });\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(\"OrderDetailsComposite:Error occured on handleSave\", error);\r\n    }\r\n  };\r\n\r\n  validateSave(modOrder, attributeList) {\r\n    const validationErrors = { ...this.state.validationErrors };\r\n    Object.keys(orderValidationDef).forEach(function (key) {\r\n      if (modOrder[key] !== undefined)\r\n        validationErrors[key] = Utilities.validateField(\r\n          orderValidationDef[key],\r\n          modOrder[key]\r\n        );\r\n    });\r\n\r\n    if (modOrder.Active !== this.state.order.Active) {\r\n      if (modOrder.Remarks === \"\") {\r\n        validationErrors[\"Remarks\"] = \"ShipmentOrder_RemarksRequired\";\r\n      }\r\n    }\r\n\r\n    let notification = {\r\n      messageType: \"critical\",\r\n      message: \"OrderInfo_SavedStatus\",\r\n      messageResultDetails: [],\r\n    };\r\n\r\n    var attributeValidationErrors = lodash.cloneDeep(\r\n      this.state.attributeValidationErrors\r\n    );\r\n\r\n    attributeList.forEach((attribute) => {\r\n      attributeValidationErrors.forEach((attributeValidation) => {\r\n        if (attributeValidation.TerminalCode === attribute.TerminalCode) {\r\n          attribute.attributeMetaDataList.forEach((attributeMetaData) => {\r\n            attributeValidation.attributeValidationErrors[\r\n              attributeMetaData.Code\r\n            ] = Utilities.valiateAttributeField(\r\n              attributeMetaData,\r\n              attributeMetaData.DefaultValue\r\n            );\r\n          });\r\n        }\r\n      });\r\n    });\r\n\r\n    this.setState({ validationErrors, attributeValidationErrors });\r\n\r\n    let returnValue = true;\r\n    attributeValidationErrors.forEach((x) => {\r\n      if (returnValue) {\r\n        returnValue = Object.values(x.attributeValidationErrors).every(\r\n          function (value) {\r\n            return value === \"\";\r\n          }\r\n        );\r\n      } else {\r\n        return returnValue;\r\n      }\r\n    });\r\n\r\n    if (returnValue)\r\n      returnValue = Object.values(validationErrors).every(function (value) {\r\n        return value === \"\";\r\n      });\r\n    else return returnValue;\r\n\r\n    if (modOrder.OrderItems.length > 0) {\r\n      modOrder.OrderItems.forEach((com) => {\r\n        orderPlanValidationDef.forEach((col) => {\r\n          let err = \"\";\r\n\r\n          if (col.validator !== undefined) {\r\n            err = Utilities.validateField(col.validator, com[col.field]);\r\n          }\r\n\r\n          // if (col.field === \"Quantity\" && err === \"\") {\r\n          //   let quantity = Utilities.convertStringtoDecimal(\r\n          //     com.Quantity\r\n          //   ).toString();\r\n          //   if (quantity.length > 15) err = \"Common_MaxLengthExceeded\";\r\n          // }\r\n          if (err !== \"\") {\r\n            notification.messageResultDetails.push({\r\n              keyFields: [col.displayName],\r\n              keyValues: [com[col.field]],\r\n              isSuccess: false,\r\n              errorMessage: err,\r\n            });\r\n          }\r\n        });\r\n        if (com.AttributesforUI !== null && com.AttributesforUI !== undefined) {\r\n          com.AttributesforUI.forEach((item) => {\r\n            let errMsg = Utilities.valiateAttributeField(\r\n              item,\r\n              item.AttributeValue\r\n            );\r\n            if (errMsg !== \"\") {\r\n              if (this.props.userDetails.EntityResult.IsEnterpriseNode) {\r\n                notification.messageResultDetails.push({\r\n                  keyFields: [\"CompAttributeTerminal\", item.AttributeName],\r\n                  keyValues: [item.TerminalCode, item.AttributeValue],\r\n                  isSuccess: false,\r\n                  errorMessage: errMsg,\r\n                });\r\n              } else {\r\n                notification.messageResultDetails.push({\r\n                  keyFields: [item.AttributeName],\r\n                  keyValues: [item.AttributeValue],\r\n                  isSuccess: false,\r\n                  errorMessage: errMsg,\r\n                });\r\n              }\r\n            }\r\n          });\r\n        }\r\n        this.toggleExpand(com, true, true);\r\n      });\r\n    } else {\r\n      notification.messageResultDetails.push({\r\n        keyFields: [\"ShipmentOrder_OrderCode\"],\r\n        keyValues: [modOrder.OrderCode],\r\n        isSuccess: false,\r\n        errorMessage: \"ShipmentOrder_MandatoryOrderPlan\",\r\n      });\r\n    }\r\n\r\n    this.setState({ validationErrors });\r\n    returnValue = Object.values(validationErrors).every(function (value) {\r\n      return value === \"\";\r\n    });\r\n    if (notification.messageResultDetails.length > 0) {\r\n      this.props.onSaved(this.state.modOrder, \"update\", notification);\r\n      return false;\r\n    }\r\n    return returnValue;\r\n  }\r\n\r\n  toggleExpand = (data, open, isTerminalAdded = false) => {\r\n    //console.log(\"Data in Toggle\", data)\r\n    let expandedRows = this.state.expandedRows;\r\n    let expandedRowIndex = expandedRows.findIndex(\r\n      (item) => item.SeqNumber === data.SeqNumber\r\n    );\r\n    if (open) {\r\n      if (isTerminalAdded && expandedRowIndex >= 0) {\r\n        expandedRows.splice(expandedRowIndex, 1);\r\n        expandedRows.push(data);\r\n      } else if (expandedRowIndex >= 0) {\r\n        expandedRows.splice(expandedRowIndex, 1);\r\n      }\r\n    } else {\r\n      if (expandedRowIndex >= 0) {\r\n        expandedRows = expandedRows.filter(\r\n          (x) => x.Code !== data.Code && x.SeqNumber !== data.SeqNumber\r\n        );\r\n      } else expandedRows.push(data);\r\n    }\r\n    this.setState({ expandedRows });\r\n  };\r\n\r\n  handleViewShipments = () => {\r\n    this.setState(\r\n      {\r\n        isShowTruckShipment: true,\r\n        isShowBackButton: true,\r\n      },\r\n      () => this.props.handleOperationVisibility(false)\r\n    );\r\n  };\r\n\r\n  handleBack = () => {\r\n    this.setState(\r\n      {\r\n        isShowTruckShipment: false,\r\n        isShowBackButton: false,\r\n      },\r\n      () => {\r\n        this.props.handleOperationVisibility(true);\r\n        this.getOrder(false);\r\n      }\r\n    );\r\n  };\r\n\r\n  handleShowBackButton = (status) => {\r\n    this.setState({\r\n      isShowBackButton: status,\r\n    });\r\n  };\r\n\r\n  forceCloseOperation = () => {\r\n\r\n    let modOrder = lodash.cloneDeep(this.state.tempOrder);\r\n    \r\n    let keyCode = [\r\n      {\r\n        key: KeyCodes.orderCode,\r\n        value: modOrder.OrderCode,\r\n      },\r\n    ];\r\n\r\n    let entity = {\r\n      OrderCode: modOrder.OrderCode,\r\n      ShareholderCode: this.props.selectedShareholder,\r\n      ForceCloseReason: modOrder.Remarks,\r\n      ForceClose: true,\r\n    };\r\n\r\n    let obj = {\r\n      ShareHolderCode: this.props.selectedShareholder,\r\n      keyDataCode: KeyCodes.orderCode,\r\n      KeyCodes: keyCode,\r\n      Entity: entity,\r\n    };\r\n\r\n    let notification = {\r\n      messageType: \"critical\",\r\n      message: \"OrderInfo_SavedStatus\",\r\n      messageResultDetails: [\r\n        {\r\n          keyFields: [\"ShipmentOrder_OrderCode\"],\r\n          keyValues: [modOrder.OrderCode],\r\n          isSuccess: false,\r\n          errorMessage: \"\",\r\n        },\r\n      ],\r\n    };\r\n    axios(\r\n      RestAPIs.UpdateOrderStatus,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        let result = response.data;\r\n        notification.messageType = result.IsSuccess ? \"success\" : \"critical\";\r\n        notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n        if (result.IsSuccess === true) {\r\n          this.getOrder(false);\r\n        } else {\r\n          notification.messageResultDetails[0].errorMessage =\r\n            result.ErrorList[0];\r\n          console.log(\"Error in UpdateOrderStatus:\", result.ErrorList);\r\n        }\r\n        this.props.onSaved(modOrder, \"add\", notification);\r\n      })\r\n      .catch((error) => {\r\n        notification.messageResultDetails[0].errorMessage = error;\r\n        this.props.onSaved(modOrder, \"add\", notification);\r\n      });\r\n  };\r\n\r\n\r\n  handleForceClose = () => {\r\n    let modOrder = lodash.cloneDeep(this.state.modOrder);\r\n\r\n    if (modOrder.Remarks === \"\") {\r\n      let validationErrors = this.state.validationErrors;\r\n      validationErrors[\"Remarks\"] = \"ShipmentOrder_RemarksRequired\";\r\n      this.setState({ validationErrors });\r\n    } else {\r\n\r\n      let showForceCloseAuthenticationLayout =\r\n      this.props.userDetails.EntityResult.IsWebPortalUser !== true\r\n        ? true\r\n        : false;\r\n    let tempOrder = lodash.cloneDeep(modOrder);\r\n    this.setState({ showForceCloseAuthenticationLayout, tempOrder }, () => {\r\n      if (showForceCloseAuthenticationLayout === false) {\r\n        this.forceCloseOperation();\r\n      }\r\n  });\r\n    }\r\n  };\r\n\r\n  createOrder(modOrder) {\r\n    this.handleAuthenticationClose();\r\n    let keyCode = [\r\n      {\r\n        key: KeyCodes.orderCode,\r\n        value: modOrder.OrderCode,\r\n      },\r\n    ];\r\n\r\n    let obj = {\r\n      ShareHolderCode: this.props.selectedShareholder,\r\n      keyDataCode: KeyCodes.orderCode,\r\n      KeyCodes: keyCode,\r\n      Entity: modOrder,\r\n    };\r\n\r\n    let notification = {\r\n      messageType: \"critical\",\r\n      message: \"OrderInfo_SavedStatus\",\r\n      messageResultDetails: [\r\n        {\r\n          keyFields: [\"ShipmentOrder_OrderCode\"],\r\n          keyValues: [modOrder.OrderCode],\r\n          isSuccess: false,\r\n          errorMessage: \"\",\r\n        },\r\n      ],\r\n    };\r\n    axios(\r\n      RestAPIs.CreateOrder,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        let result = response.data;\r\n        notification.messageType = result.IsSuccess ? \"success\" : \"critical\";\r\n        notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n        if (result.IsSuccess === true) {\r\n          this.setState({\r\n            saveEnabled: Utilities.isInFunction(\r\n              this.props.userDetails.EntityResult.FunctionsList,\r\n              functionGroups.modify,\r\n              fnOrder\r\n            ),\r\n          });\r\n\r\n          this.getOrder(false);\r\n        } else {\r\n          notification.messageResultDetails[0].errorMessage =\r\n            result.ErrorList[0];\r\n          this.setState({\r\n            saveEnabled: Utilities.isInFunction(\r\n              this.props.userDetails.EntityResult.FunctionsList,\r\n              functionGroups.add,\r\n              fnOrder\r\n            ),\r\n          });\r\n          console.log(\"Error in CreateOrder:\", result.ErrorList);\r\n        }\r\n\r\n        this.props.onSaved(this.state.modOrder, \"add\", notification);\r\n      })\r\n      .catch((error) => {\r\n        this.setState({\r\n          saveEnabled: Utilities.isInFunction(\r\n            this.props.userDetails.EntityResult.FunctionsList,\r\n            functionGroups.add,\r\n            fnOrder\r\n          ),\r\n        });\r\n        notification.messageResultDetails[0].errorMessage = error;\r\n        this.props.onSaved(this.state.modOrder, \"add\", notification);\r\n      });\r\n  }\r\n\r\n  updateOrder(modOrder) {\r\n    this.handleAuthenticationClose();\r\n    let keyCode = [\r\n      {\r\n        key: KeyCodes.orderCode,\r\n        value: modOrder.OrderCode,\r\n      },\r\n    ];\r\n\r\n    let obj = {\r\n      ShareHolderCode: this.props.selectedShareholder,\r\n      keyDataCode: KeyCodes.orderCode,\r\n      KeyCodes: keyCode,\r\n      Entity: modOrder,\r\n    };\r\n\r\n    let notification = {\r\n      messageType: \"critical\",\r\n      message: \"OrderInfo_SavedStatus\",\r\n      messageResultDetails: [\r\n        {\r\n          keyFields: [\"ShipmentOrder_OrderCode\"],\r\n          keyValues: [modOrder.OrderCode],\r\n          isSuccess: false,\r\n          errorMessage: \"\",\r\n        },\r\n      ],\r\n    };\r\n    axios(\r\n      RestAPIs.UpdateOrder,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        let result = response.data;\r\n        notification.messageType = result.IsSuccess ? \"success\" : \"critical\";\r\n        notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n        if (result.IsSuccess === true) {\r\n          this.setState({\r\n            saveEnabled: Utilities.isInFunction(\r\n              this.props.userDetails.EntityResult.FunctionsList,\r\n              functionGroups.modify,\r\n              fnOrder\r\n            ),\r\n          });\r\n          this.getOrder(false);\r\n        } else {\r\n          this.setState({\r\n            saveEnabled: Utilities.isInFunction(\r\n              this.props.userDetails.EntityResult.FunctionsList,\r\n              functionGroups.modify,\r\n              fnOrder\r\n            ),\r\n          });\r\n          notification.messageResultDetails[0].errorMessage =\r\n            result.ErrorList[0];\r\n          console.log(\"Error in UpdateOrder:\", result.ErrorList);\r\n        }\r\n\r\n        this.props.onSaved(this.state.modOrder, \"update\", notification);\r\n      })\r\n      .catch((error) => {\r\n        notification.messageResultDetails[0].errorMessage = error;\r\n        this.props.onSaved(this.state.modOrder, \"modify\", notification);\r\n        this.setState({\r\n          saveEnabled: Utilities.isInFunction(\r\n            this.props.userDetails.EntityResult.FunctionsList,\r\n            functionGroups.modify,\r\n            fnOrder\r\n          ),\r\n        });\r\n      });\r\n  }\r\n\r\n  handleReset = () => {\r\n    try {\r\n      let modOrderItems = Utilities.addSeqNumberToListObject(\r\n        lodash.cloneDeep(this.state.order.OrderItems)\r\n      );\r\n      this.setState(\r\n        {\r\n          modOrder: lodash.cloneDeep(this.state.order),\r\n          modOrderItems: modOrderItems,\r\n          modAttributeMetaDataList: [],\r\n        },\r\n        () => {\r\n          if (this.props.userDetails.EntityResult.IsEnterpriseNode) {\r\n            this.terminalSelectionChange(this.state.order.TerminalCodes);\r\n            this.handleResetAttributeValidationError();\r\n          } else {\r\n            this.localNodeAttribute();\r\n            this.handleResetAttributeValidationError();\r\n          }\r\n        }\r\n      );\r\n      // if (this.state.order.Code === \"\") {\r\n      //   //let terminalOptions = { ...this.state.terminalOptions };\r\n      //   let terminalOptions = [];\r\n      //   this.setState({ terminalOptions });\r\n      // }\r\n      let validationErrors = { ...this.state.validationErrors };\r\n      Object.keys(validationErrors).forEach((key) => {\r\n        validationErrors[key] = \"\";\r\n      });\r\n      this.setState({ validationErrors });\r\n    } catch (error) {\r\n      console.log(\"OrderDetailsComposite:Error occured on handleReset\", error);\r\n    }\r\n  };\r\n  //Get KPI for order\r\n  getKPIList(shareholder, orderCode) {\r\n    let KPIView = Utilities.isInFunction(\r\n      this.props.userDetails.EntityResult.FunctionsList,\r\n      functionGroups.view,\r\n      fnKPIInformation\r\n    );\r\n    if (KPIView === true) {\r\n      let objKPIRequestData = {\r\n        PageName: kpiOrderDetail,\r\n        TransportationType: Constants.TransportationType.ROAD,\r\n        InputParameters: [{ key: \"ShareholderCode\", value: shareholder }, { key: \"OrderCode\", value: orderCode }],\r\n      };\r\n      axios(\r\n        RestAPIs.GetKPI,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          objKPIRequestData,\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          var result = response.data;\r\n          if (result.IsSuccess === true) {\r\n            this.setState({ orderKPIList: result.EntityResult.ListKPIDetails });\r\n          } else {\r\n            this.setState({ orderKPIList: [] });\r\n            console.log(\"Error in order KPIList:\", result.ErrorList);\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error while getting Order KPIList:\", error);\r\n        });\r\n    }\r\n  }\r\n\r\n  handleOperation() {\r\n    if (this.state.showAuthenticationLayout)\r\n      return this.addUpdateOrder;\r\n    else if (this.state.showForceCloseAuthenticationLayout)\r\n      return this.forceCloseOperation;\r\n    \r\n  }\r\n\r\n  getFunctionGroupName() {\r\n     if (this.state.showForceCloseAuthenticationLayout)\r\n      return fnOrderForceClose;\r\n    else if (this.state.showAuthenticationLayout)\r\n      return fnOrder;\r\n  }\r\n\r\n  handleAuthenticationClose = () => {\r\n    this.setState({\r\n      showAuthenticationLayout: false,\r\n      showForceCloseAuthenticationLayout: false,\r\n    });\r\n  };\r\n  \r\n  render() {\r\n    let listOptions = {\r\n      terminalCodes: this.state.terminalOptions,\r\n      // orderTypeOptions: Utilities.transferListtoOptions(\r\n      //   Object.keys(Constants.orderType)\r\n      // ),\r\n      unitOfVolume: this.state.volumeUOMOptions,\r\n      unitOfWeight: this.state.weightUOMOptions,\r\n      finishedProductOptions: this.state.finishedProductOptions,\r\n      customerOptions: this.state.customerOptions,\r\n    };\r\n\r\n    const popUpContents = [\r\n      {\r\n        fieldName: \"ShipmentOrder_LastUpdated\",\r\n        fieldValue:\r\n          new Date(this.state.modOrder.LastUpdatedTime).toLocaleDateString() +\r\n          \" \" +\r\n          new Date(this.state.modOrder.LastUpdatedTime).toLocaleTimeString(),\r\n      },\r\n      {\r\n        fieldName: \"ShipmentOrder_LastActiveTime\",\r\n        fieldValue:\r\n          this.state.modOrder.LastActiveTime !== undefined &&\r\n            this.state.modOrder.LastActiveTime !== null\r\n            ? new Date(\r\n              this.state.modOrder.LastActiveTime\r\n            ).toLocaleDateString() +\r\n            \" \" +\r\n            new Date(this.state.modOrder.LastActiveTime).toLocaleTimeString()\r\n            : \"\",\r\n      },\r\n      {\r\n        fieldName: \"ShipmentOrder_CreatedTime\",\r\n        fieldValue:\r\n          new Date(this.state.modOrder.CreatedTime).toLocaleDateString() +\r\n          \" \" +\r\n          new Date(this.state.modOrder.CreatedTime).toLocaleTimeString(),\r\n      },\r\n    ];\r\n    return this.state.isReadyToRender ? (\r\n      <div>\r\n        {this.state.isShowTruckShipment ? null : (\r\n          <ErrorBoundary>\r\n            <TMDetailsHeader\r\n              // entityCode={this.state.isShowTruckShipment ? this.state.order.OrderCode + \" - \" + t(\"Shipment_OtherSource\") : this.state.order.OrderCode}\r\n              entityCode={this.state.order.OrderCode}\r\n              newEntityName=\"ShipmentOrder_NewOrder\"\r\n              popUpContents={\r\n                this.state.isShowTruckShipment ? \"\" : popUpContents\r\n              }\r\n            ></TMDetailsHeader>\r\n          </ErrorBoundary>\r\n        )}\r\n        {this.state.isShowTruckShipment ? (\r\n          <ErrorBoundary>\r\n            <TruckShipmentProject\r\n              shipmentSource={Constants.shipmentFrom.Order}\r\n              shipmentSourceCode={this.state.modOrder.OrderCode}\r\n              selectedShareholder={this.props.selectedShareholder}\r\n              shipmentSourceCompartmentItems={this.state.modOrderItems}\r\n              shipmentSourceDetails={this.state.modOrder}\r\n              isShowBackButton={this.handleShowBackButton}\r\n            />\r\n          </ErrorBoundary>\r\n        ) : (\r\n          <><TMDetailsKPILayout KPIList={this.state.orderKPIList}> </TMDetailsKPILayout>\r\n            <ErrorBoundary>\r\n              <OrderDetails\r\n                order={this.state.order}\r\n                modOrder={this.state.modOrder}\r\n                modOrderItems={this.state.modOrderItems}\r\n                validationErrors={this.state.validationErrors}\r\n                listOptions={listOptions}\r\n                onFieldChange={this.handleChange}\r\n                onDateTextChange={this.handleDateTextChange}\r\n                onAllTerminalsChange={this.handleAllTerminalsChange}\r\n                handleAddPlan={this.handleAddPlan}\r\n                handleDeletePlan={this.handleDeletePlan}\r\n                selectedPlanRow={this.state.selectedPlanRow}\r\n                handleRowSelectionChange={this.handleRowSelectionChange}\r\n                handleCellDataEdit={this.handleCellDataEdit}\r\n                selectedShareholder={this.props.selectedShareholder}\r\n                isEnterpriseNode={\r\n                  this.props.userDetails.EntityResult.IsEnterpriseNode\r\n                }\r\n                attributeValidationErrors={this.state.attributeValidationErrors}\r\n                onAttributeDataChange={this.handleAttributeDataChange}\r\n                handleCompAttributeCellDataEdit={\r\n                  this.handleCompAttributeCellDataEdit\r\n                }\r\n                modAttributeMetaDataList={this.state.modAttributeMetaDataList}\r\n                toggleExpand={this.toggleExpand}\r\n                expandedRows={this.state.expandedRows}\r\n                compartmentDetailsPageSize={\r\n                  this.props.userDetails.EntityResult.PageAttibutes\r\n                    .WebPortalListPageSize\r\n                }\r\n                handleForceClose={this.handleForceClose}\r\n                  handleViewShipments={this.handleViewShipments}\r\n                  enableForceClose={this.state.enableForceClose}\r\n              ></OrderDetails>\r\n            </ErrorBoundary></>\r\n        )}\r\n        {this.state.isShowTruckShipment ? (\r\n          this.state.isShowBackButton ? (\r\n            <div className=\"row\">\r\n              <div className=\"col col-lg-8\" style={{ marginTop: \"1%\" }}>\r\n                <TranslationConsumer>\r\n                  {(t) => (\r\n                    <Button\r\n                      className=\"backButton\"\r\n                      onClick={this.handleBack}\r\n                      content={t(\"Back\")}\r\n                    ></Button>\r\n                  )}\r\n                </TranslationConsumer>\r\n              </div>\r\n            </div>\r\n          ) : null\r\n        ) : (\r\n          <ErrorBoundary>\r\n            <TMDetailsUserActions\r\n              handleBack={this.props.onBack}\r\n              handleSave={this.handleSave}\r\n              handleReset={this.handleReset}\r\n              saveEnabled={this.state.saveEnabled}\r\n            ></TMDetailsUserActions>\r\n          </ErrorBoundary>\r\n        )}\r\n\r\n      {this.state.showAuthenticationLayout || this.state.showForceCloseAuthenticationLayout ? (\r\n          <UserAuthenticationLayout\r\n            Username={this.props.userDetails.EntityResult.UserName}\r\n            functionName={\r\n              this.state.order.OrderCode   === \"\"\r\n                ? functionGroups.add\r\n                : functionGroups.modify\r\n            }\r\n            functionGroup={this.getFunctionGroupName()}\r\n            handleOperation={this.handleOperation()}\r\n            handleClose={this.handleAuthenticationClose}\r\n          ></UserAuthenticationLayout>\r\n        ) : null}\r\n      </div>\r\n    ) : (\r\n      <LoadingPage message=\"Loading\"></LoadingPage>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    userDetails: state.getUserDetails.userDetails,\r\n    tokenDetails: state.getUserDetails.TokenAuth,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(OrderDetailsComposite);\r\n","import React from \"react\";\r\nimport WijmoGridComposite from \"../Common/WijmoGridComposite\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nContractSummaryPageComposite.propTypes = {\r\n  tableData: PropTypes.array.isRequired,\r\n  columnDetails: PropTypes.array.isRequired,\r\n  pageSize: PropTypes.number,\r\n  exportRequired:PropTypes.bool,\r\n  exportFileName:PropTypes.string,\r\n  columnPickerRequired:PropTypes.bool,\r\n  columnGroupingRequired:PropTypes.bool,\r\n  selectionRequired:PropTypes.bool,\r\n  terminalsToShow: PropTypes.number,\r\n  //selectedItems: PropTypes.array,\r\n  onSelectionChange: PropTypes.func,\r\n  onRowClick: PropTypes.func.isRequired,\r\n  parentComponent:PropTypes.string,\r\n};\r\n\r\nContractSummaryPageComposite.defaultProps = {\r\n  pageSize: 10,\r\n  terminalsToShow: 2,\r\n  tableData: [],\r\n  columnDetails: [],\r\n  //selectedItems: [],\r\n};\r\n\r\nexport function ContractSummaryPageComposite({\r\n  tableData,\r\n  columnDetails,\r\n  pageSize,\r\n  exportRequired,\r\n  exportFileName,\r\n  columnPickerRequired,\r\n  columnGroupingRequired,\r\n  selectionRequired,\r\n  terminalsToShow,\r\n  //selectedItems,\r\n  onSelectionChange,\r\n  onRowClick,\r\n  parentComponent,\r\n}) {\r\n  return (\r\n    <WijmoGridComposite\r\n    data={tableData}\r\n    columns={columnDetails}\r\n    rowsPerPage={pageSize}\r\n    exportRequired={exportRequired}\r\n    exportFileName={exportFileName}\r\n    columnPickerRequired={columnPickerRequired}\r\n    columnGroupingRequired={columnGroupingRequired}\r\n    selectionRequired={selectionRequired}\r\n   // selectedItems={selectedItems}\r\n    onSelectionHandle={onSelectionChange}\r\n    onRowClick={onRowClick}\r\n    parentComponent={parentComponent}\r\n    terminalsToShow={terminalsToShow}\r\n  ></WijmoGridComposite>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport {\r\n  functionGroups,\r\n  fnContract,\r\n  fnKPIInformation,\r\n  fnSBC,\r\n  fnSBP,\r\n  fnRailDispatch,\r\n} from \"../../../JS/FunctionGroups\";\r\nimport * as Constants from \"../../../JS/Constants\";\r\nimport * as RestAPIs from \"../../../JS/RestApis\";\r\nimport axios from \"axios\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport NotifyEvent from \"../../../JS/NotifyEvent\";\r\nimport { TMUserActionsComposite } from \"../Common/TMUserActionsComposite\";\r\nimport * as Utilities from \"../../../JS/Utilities\";\r\nimport ErrorBoundary from \"../../ErrorBoundary\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { ContractSummaryPageComposite } from \"../Summary/ContractSummaryComposite\";\r\nimport ContractDetailsComposite from \"../Details/ContractDetailsComposite\";\r\nimport { TMTransactionFilters } from \"../../UIBase/Common/TMTransactionFilters\";\r\nimport { LoadingPage } from \"../../UIBase/Common/LoadingPage\";\r\nimport KPIDashboardLayout from \"../Common/KPIDashboard/KPIDashboardLayout\";\r\nimport { kpiContractList } from \"../../../JS/KPIPageName\";\r\nimport * as KeyCodes from \"../../../JS/KeyCodes\";\r\nimport TransactionSourceSummaryOperations from \"../Common/TransactionSourceSummaryOperations\";\r\nimport TruckShipmentComposite from \"./TruckShipmentComposite\";\r\nimport RailDispatchComposite from \"./RailDispatchComposite\";\r\nimport UserAuthenticationLayout from \"../Common/UserAuthentication\";\r\n\r\nclass ContractComposite extends Component {\r\n  state = {\r\n    isDetails: false,\r\n    isReadyToRender: false,\r\n    toDate: \"\",\r\n    fromDate: \"\",\r\n    isDetailsModified: false,\r\n    operationsVisibilty: { add: false, delete: false, shareholder: true },\r\n    selectedRow: {},\r\n    selectedItems: [],\r\n    data: {},\r\n    dateError: \"\",\r\n    contractKPIList: [],\r\n    isLoadShipment: false,\r\n    shipmentType: \"\",\r\n    terminalCodes: [],\r\n    isLoadRailDispatch: false,\r\n    selectedContractCode: [],\r\n    isShowRightPane: false,\r\n    isSBCEnable: false,\r\n    isSBPEnable: false,\r\n    isRailDispatchEnable: false,\r\n    showDeleteAuthenticationLayout: false,\r\n  };\r\n\r\n  componentName = \"ContractComponent\";\r\n\r\n  componentDidMount() {\r\n    try {\r\n      Utilities.setArchive(this.props.userDetails.EntityResult.IsArchived);\r\n      const operationsVisibilty = { ...this.state.operationsVisibilty };\r\n      operationsVisibilty.add = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.add,\r\n        fnContract\r\n      );\r\n      let toDate = new Date();\r\n      toDate.setHours(23, 59, 59);\r\n      let fromDate = new Date();\r\n      fromDate.setHours(0, 0, 0);\r\n      this.setState({ fromDate: fromDate, toDate: toDate });\r\n      toDate = toDate.toISOString();\r\n      fromDate = fromDate.toISOString();\r\n\r\n      this.setState({\r\n        operationsVisibilty,\r\n        selectedShareholder:\r\n          this.props.userDetails.EntityResult.PrimaryShareholder,\r\n      });\r\n      this.getContractList(\r\n        this.props.userDetails.EntityResult.PrimaryShareholder,\r\n        fromDate,\r\n        toDate\r\n      );\r\n      this.getKPIList(this.props.userDetails.EntityResult.PrimaryShareholder);\r\n      this.getTerminalsList(\r\n        this.props.userDetails.EntityResult.PrimaryShareholder\r\n      );\r\n      this.getlookupValues();\r\n    } catch (error) {\r\n      console.log(\r\n        \"ContractComposite:Error occured on ComponentDidMount\",\r\n        error\r\n      );\r\n    }\r\n    // clear session storage on window refresh event\r\n    window.addEventListener(\"beforeunload\", this.clearStorage)\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    // clear session storage\r\n    this.clearStorage();\r\n\r\n    // remove event listener\r\n    window.removeEventListener(\"beforeunload\", this.clearStorage)\r\n  }\r\n\r\n  clearStorage = () => {\r\n    sessionStorage.removeItem(this.componentName + \"GridState\");\r\n  }\r\n\r\n  handleDelete = () => {\r\n   this.handleAuthenticationClose();\r\n    try {\r\n      var { operationsVisibilty } = { ...this.state };\r\n      operationsVisibilty.delete = false;\r\n      this.setState({ operationsVisibilty });\r\n      var deleteContractKeys = [];\r\n      for (var i = 0; i < this.state.selectedItems.length; i++) {\r\n        var shCode = this.state.selectedShareholder;\r\n        var ContractCode = this.state.selectedItems[i][\"Common_Code\"];\r\n        var keyData = {\r\n          keyDataCode: 0,\r\n          ShareHolderCode: shCode,\r\n          KeyCodes: [{ Key: KeyCodes.contractCode, Value: ContractCode }],\r\n        };\r\n        deleteContractKeys.push(keyData);\r\n      }\r\n      axios(\r\n        RestAPIs.DeleteContract,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          deleteContractKeys,\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          var result = response.data;\r\n          var isRefreshDataRequire = result.isSuccess;\r\n\r\n          if (\r\n            result.ResultDataList !== null &&\r\n            result.ResultDataList !== undefined\r\n          ) {\r\n            var failedResultsCount = result.ResultDataList.filter(function (\r\n              res\r\n            ) {\r\n              return !res.IsSuccess;\r\n            }).length;\r\n\r\n            if (failedResultsCount === result.ResultDataList.length) {\r\n              isRefreshDataRequire = false;\r\n            } else isRefreshDataRequire = true;\r\n          }\r\n          var notification = Utilities.convertResultsDatatoNotification(\r\n            result,\r\n            \"ContractList_ContractDelSuccess\",\r\n            [\"ContractCode\"]\r\n          );\r\n\r\n          if (isRefreshDataRequire) {\r\n            this.setState({ isReadyToRender: false });\r\n            this.getContractList(\r\n              this.state.selectedShareholder,\r\n              this.state.fromDate.toISOString(),\r\n              this.state.toDate.toISOString()\r\n            );\r\n            this.getKPIList(this.state.selectedShareholder);\r\n            operationsVisibilty.delete = false;\r\n            this.setState({\r\n              selectedItems: [],\r\n              operationsVisibilty,\r\n              selectedRow: {},\r\n            });\r\n          } else {\r\n            operationsVisibilty.delete = true;\r\n            this.setState({ operationsVisibilty });\r\n          }\r\n\r\n          notification.messageResultDetails.forEach((messageResult) => {\r\n            if (messageResult.keyFields.length > 0)\r\n              messageResult.keyFields[0] = \"ContractInfo_ContractCode\";\r\n          });\r\n\r\n          toast(\r\n            <ErrorBoundary>\r\n              <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n            </ErrorBoundary>,\r\n            {\r\n              autoClose: notification.messageType === \"success\" ? 10000 : false,\r\n            }\r\n          );\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error occured while deleting:\" + error);\r\n          var { operationsVisibilty } = { ...this.state };\r\n          operationsVisibilty.delete = true;\r\n          this.setState({ operationsVisibilty });\r\n        });\r\n    } catch (error) {\r\n      console.log(\"ContractComposite:Error occured on handleDelete\", error);\r\n    }\r\n  };\r\n\r\n  getTransportationType() {\r\n    let transportationType = Constants.TransportationType.ROAD;\r\n    if (\r\n      this.props.activeItem !== undefined &&\r\n      this.props.activeItem.itemProps !== undefined &&\r\n      this.props.activeItem.itemProps.transportationType !== undefined\r\n    )\r\n      transportationType = this.props.activeItem.itemProps.transportationType;\r\n\r\n    return transportationType;\r\n  }\r\n  getContractList(shareholder, startRange, endRange) {\r\n    this.setState({ isReadyToRender: false });\r\n    let transportationType = this.getTransportationType();\r\n    let fromDate = new Date(startRange);\r\n    let toDate = new Date(endRange);\r\n    fromDate.setHours(0, 0, 0);\r\n    toDate.setHours(23, 59, 59);\r\n\r\n    let obj = {\r\n      ShareholderCode: shareholder,\r\n      TransportationType: transportationType,\r\n      startRange: fromDate,\r\n      endRange: toDate,\r\n    };\r\n    // let url =\r\n    //   RestAPIs.GetContractListForRole +\r\n    //   \"?ShareholderCode=\" +\r\n    //   shareholder +\r\n    //   \"&TransportationType=\" +\r\n    //   transportationType +\r\n    //   \"&startRange=\" +\r\n    //   startRange +\r\n    //   \"&endRange=\" +\r\n    //   endRange;\r\n\r\n    axios(\r\n      RestAPIs.GetContractListForRole,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        let result = response.data;\r\n        if (result.IsSuccess === true) {\r\n          this.setState({ data: result.EntityResult, isReadyToRender: true });\r\n        } else {\r\n          this.setState({ data: {}, isReadyToRender: true });\r\n          console.log(\"Error in ContractListForRole:\", result.ErrorList);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        this.setState({ data: {}, isReadyToRender: true });\r\n        console.log(\"Error while getting Contract List:\", error);\r\n      });\r\n  }\r\n\r\n  handleShareholderSelectionChange = (shareholder) => {\r\n    try {\r\n      // let { operationsVisibilty } = { ...this.state };\r\n      //operationsVisibilty.delete = false;\r\n      this.setState({\r\n        selectedShareholder: shareholder,\r\n        isReadyToRender: false,\r\n        selectedItems: [],\r\n        // operationsVisibilty,\r\n      });\r\n      this.getContractList(\r\n        shareholder,\r\n        this.state.fromDate.toISOString(),\r\n        this.state.toDate.toISOString()\r\n      );\r\n      this.getKPIList(shareholder);\r\n      this.getTerminalsList(shareholder);\r\n    } catch (error) {\r\n      console.log(\r\n        \"ContractComposite:Error occured on handleShareholderSelectionChange\",\r\n        error\r\n      );\r\n    }\r\n  };\r\n\r\n  handleAdd = () => {\r\n    try {\r\n      let operationsVisibilty = { ...this.state.operationsVisibilty };\r\n      operationsVisibilty.delete = false;\r\n      operationsVisibilty.add = false;\r\n      operationsVisibilty.shareholder = false;\r\n\r\n      this.setState({\r\n        isDetails: true,\r\n        selectedRow: {},\r\n        operationsVisibilty,\r\n        isLoadShipment: false,\r\n        isLoadRailDispatch: false,\r\n      });\r\n    } catch (error) {\r\n      console.log(\"ContractComposite:Error occured on handleAdd\", error);\r\n    }\r\n  };\r\n\r\n  handleRowClick = (item) => {\r\n    try {\r\n      let operationsVisibilty = { ...this.state.operationsVisibilty };\r\n      operationsVisibilty.add = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.add,\r\n        fnContract\r\n      );\r\n      operationsVisibilty.delete = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.remove,\r\n        fnContract\r\n      );\r\n      //operationsVisibilty.delete = false;\r\n      operationsVisibilty.shareholder = false;\r\n      this.setState({\r\n        isDetails: true,\r\n        selectedRow: item,\r\n        selectedItems: [item],\r\n        operationsVisibilty,\r\n        isLoadShipment: false,\r\n        isLoadRailDispatch: false,\r\n      });\r\n    } catch (error) {\r\n      console.log(\"ContractComposite:Error occured on Row click\", error);\r\n    }\r\n  };\r\n\r\n  savedEvent = (data, saveType, notification) => {\r\n    try {\r\n      let operationsVisibilty = { ...this.state.operationsVisibilty };\r\n      if (notification.messageType === \"success\") {\r\n        operationsVisibilty.add = Utilities.isInFunction(\r\n          this.props.userDetails.EntityResult.FunctionsList,\r\n          functionGroups.add,\r\n          fnContract\r\n        );\r\n        operationsVisibilty.delete = Utilities.isInFunction(\r\n          this.props.userDetails.EntityResult.FunctionsList,\r\n          functionGroups.remove,\r\n          fnContract\r\n        );\r\n        this.setState({ isDetailsModified: true, operationsVisibilty });\r\n      }\r\n      if (notification.messageType === \"success\" && saveType === \"add\") {\r\n        let selectedItems = [\r\n          {\r\n            Common_Code: data.ContractCode,\r\n          },\r\n        ];\r\n        this.setState({ selectedItems });\r\n      }\r\n      toast(\r\n        <ErrorBoundary>\r\n          <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n        </ErrorBoundary>,\r\n        {\r\n          autoClose: notification.messageType === \"success\" ? 10000 : false,\r\n        }\r\n      );\r\n    } catch (error) {\r\n      console.log(\"ContractComposite:Error occured on savedEvent\", error);\r\n    }\r\n  };\r\n\r\n  //Get KPI for contract\r\n  getKPIList(shareholder) {\r\n    let KPIView = Utilities.isInFunction(\r\n      this.props.userDetails.EntityResult.FunctionsList,\r\n      functionGroups.view,\r\n      fnKPIInformation\r\n    );\r\n    if (KPIView === true) {\r\n      var notification = {\r\n        message: \"\",\r\n        messageType: \"critical\",\r\n        messageResultDetails: [],\r\n      };\r\n      let objKPIRequestData = {\r\n        PageName: kpiContractList,\r\n        TransportationType: this.props.activeItem.itemProps.transportationType,\r\n        InputParameters: [{ key: \"ShareholderCode\", value: shareholder }],\r\n      };\r\n      axios(\r\n        RestAPIs.GetKPI,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          objKPIRequestData,\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          var result = response.data;\r\n          if (result.IsSuccess === true) {\r\n            this.setState({\r\n              contractKPIList: result.EntityResult.ListKPIDetails,\r\n            });\r\n          } else {\r\n            this.setState({ contractKPIList: [] });\r\n            console.log(\"Error in contract KPIList:\", result.ErrorList);\r\n            notification.messageResultDetails.push({\r\n              keyFields: [],\r\n              keyValues: [],\r\n              isSuccess: false,\r\n              errorMessage: result.ErrorList[0],\r\n            });\r\n          }\r\n          if (notification.messageResultDetails.length > 0) {\r\n            toast(\r\n              <ErrorBoundary>\r\n                <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n              </ErrorBoundary>,\r\n              {\r\n                autoClose:\r\n                  notification.messageType === \"success\" ? 10000 : false,\r\n              }\r\n            );\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error while getting Contract KPIList:\", error);\r\n        });\r\n    }\r\n  }\r\n  handleBack = () => {\r\n    try {\r\n      let operationsVisibilty = { ...this.state.operationsVisibilty };\r\n      operationsVisibilty.add = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.add,\r\n        fnContract\r\n      );\r\n      operationsVisibilty.delete = false;\r\n      operationsVisibilty.shareholder = true;\r\n      this.setState({\r\n        isDetails: false,\r\n        selectedRow: {},\r\n        selectedItems: [],\r\n        operationsVisibilty,\r\n        isLoadShipment: false,\r\n        isLoadRailDispatch: false,\r\n        isReadyToRender: false,\r\n      });\r\n      this.getContractList(\r\n        this.state.selectedShareholder,\r\n        this.state.fromDate.toISOString(),\r\n        this.state.toDate.toISOString()\r\n      );\r\n      this.getKPIList(this.state.selectedShareholder);\r\n    } catch (error) {\r\n      console.log(\"ContractComposite:Error occured on Back click\", error);\r\n    }\r\n  };\r\n\r\n  handleRangeSelect = ({ to, from }) => {\r\n    if (to !== undefined) this.setState({ toDate: to });\r\n    if (from !== undefined) this.setState({ fromDate: from });\r\n  };\r\n\r\n  handleDateTextChange = (value, error) => {\r\n    if (value === \"\")\r\n      this.setState({ dateError: \"\", toDate: \"\", fromDate: \"\" });\r\n    if (error !== null && error !== \"\")\r\n      this.setState({\r\n        dateError: \"Common_InvalidDate\",\r\n        toDate: \"\",\r\n        fromDate: \"\",\r\n      });\r\n    else {\r\n      this.setState({\r\n        dateError: \"\",\r\n        toDate: value.to,\r\n        fromDate: value.from,\r\n      });\r\n    }\r\n  };\r\n  handleSelection = (items) => {\r\n    try {\r\n      let operationsVisibilty = { ...this.state.operationsVisibilty };\r\n      let isCreated =\r\n        items.findIndex(\r\n          (x) =>\r\n            Constants.contractStatus[x.ShipmentGridContract_Status] ===\r\n            Constants.contractStatus.CREATED\r\n        ) >= 0\r\n          ? true\r\n          : false;\r\n      operationsVisibilty.delete =\r\n        items.length > 0 &&\r\n        isCreated &&\r\n        Utilities.isInFunction(\r\n          this.props.userDetails.EntityResult.FunctionsList,\r\n          functionGroups.remove,\r\n          fnContract\r\n        );\r\n      let isReady = true;\r\n      isReady = Object.values(items).every(function (x) {\r\n        if (\r\n          x.ShipmentGridContract_Status.toUpperCase() === \"CLOSED\" ||\r\n          x.ShipmentGridContract_Status.toUpperCase() === \"EXPIRED\"\r\n        )\r\n          return false;\r\n        else return true;\r\n      });\r\n      if (isReady) this.setState({ isShowRightPane: true });\r\n      else this.setState({ isShowRightPane: false });\r\n\r\n      this.setState({ selectedItems: items, operationsVisibilty });\r\n    } catch (error) {\r\n      console.log(\"ContractComposite:Error occured on handleSelection\", error);\r\n    }\r\n  };\r\n\r\n  handleLoadContracts = () => {\r\n    let error = Utilities.validateDateRange(\r\n      this.state.toDate,\r\n      this.state.fromDate\r\n    );\r\n\r\n    if (error !== \"\") {\r\n      this.setState({ dateError: error });\r\n    } else {\r\n      this.setState({ dateError: \"\" });\r\n      this.getContractList(\r\n        this.state.selectedShareholder,\r\n        this.state.fromDate.toISOString(),\r\n        this.state.toDate.toISOString()\r\n      );\r\n    }\r\n  };\r\n\r\n  getTerminalsList(shareholder) {\r\n    try {\r\n      if (shareholder !== null && shareholder !== \"\") {\r\n        axios(\r\n          RestAPIs.GetTerminals,\r\n          Utilities.getAuthenticationObjectforPost(\r\n            [shareholder],\r\n            this.props.tokenDetails.tokenInfo\r\n          )\r\n        ).then((response) => {\r\n          if (response.data.IsSuccess) {\r\n            this.setState({ terminalCodes: response.data.EntityResult });\r\n          }\r\n        });\r\n      } else {\r\n        this.setState({ terminalCodes: [] });\r\n      }\r\n    } catch (error) {\r\n      console.log(\r\n        \"DestinationComposite:Error occured on getTerminalsList\",\r\n        error\r\n      );\r\n    }\r\n  }\r\n\r\n  handleDispatchPageClick = () => {\r\n    let contractCodes = [];\r\n    var { operationsVisibilty } = { ...this.state };\r\n    operationsVisibilty.delete = false;\r\n    for (var i = 0; i < this.state.selectedItems.length; i++) {\r\n      var ContractCode = this.state.selectedItems[i][\"Common_Code\"];\r\n      contractCodes.push(ContractCode);\r\n    }\r\n    this.setState({\r\n      isLoadRailDispatch: true,\r\n      selectedContractCode: contractCodes,\r\n      operationsVisibilty,\r\n    });\r\n  };\r\n\r\n  handleShipmentByProductPageClick = () => {\r\n    let contractCodes = [];\r\n    var { operationsVisibilty } = { ...this.state };\r\n    operationsVisibilty.delete = false;\r\n    for (var i = 0; i < this.state.selectedItems.length; i++) {\r\n      var ContractCode = this.state.selectedItems[i][\"Common_Code\"];\r\n      contractCodes.push(ContractCode);\r\n    }\r\n    this.setState({\r\n      isLoadShipment: true,\r\n      shipmentType: \"ShipmentByProduct\",\r\n      selectedContractCode: contractCodes,\r\n      operationsVisibilty,\r\n    });\r\n  };\r\n\r\n  handleShipmentByCompartmentPageClick = () => {\r\n    let contractCodes = [];\r\n    var { operationsVisibilty } = { ...this.state };\r\n    operationsVisibilty.delete = false;\r\n    for (var i = 0; i < this.state.selectedItems.length; i++) {\r\n      var ContractCode = this.state.selectedItems[i][\"Common_Code\"];\r\n      contractCodes.push(ContractCode);\r\n    }\r\n    this.setState({\r\n      isLoadShipment: true,\r\n      shipmentType: \"ShipmentByCompartment\",\r\n      selectedContractCode: contractCodes,\r\n      operationsVisibilty,\r\n    });\r\n  };\r\n\r\n  handleOperationVisibility = (status) => {\r\n    let operationsVisibilty = { ...this.state.operationsVisibilty };\r\n    if (status === true) {\r\n      operationsVisibilty.add = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.add,\r\n        fnContract\r\n      );\r\n      operationsVisibilty.delete = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.remove,\r\n        fnContract\r\n      );\r\n      operationsVisibilty.shareholder = false;\r\n    } else {\r\n      operationsVisibilty.add = status;\r\n      operationsVisibilty.delete = status;\r\n      operationsVisibilty.shareholder = status;\r\n    }\r\n\r\n    this.setState({ operationsVisibilty });\r\n  };\r\n\r\n  getlookupValues() {\r\n    try {\r\n      let sbcAdd = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.add,\r\n        fnSBC\r\n      );\r\n      let sbpAdd = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.add,\r\n        fnSBP\r\n      );\r\n      let railDispatchAdd = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.add,\r\n        fnRailDispatch\r\n      );\r\n      axios(\r\n        RestAPIs.GetLookUpData + \"?LookUpTypeCode=Contract\",\r\n        Utilities.getAuthenticationObjectforGet(\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      ).then((response) => {\r\n        var result = response.data;\r\n        if (result.IsSuccess === true) {\r\n          let isContractEnable =\r\n            result.EntityResult[\"EnableContract\"] === \"0\" ? false : true;\r\n\r\n          if (isContractEnable) {\r\n            if (sbcAdd) this.setState({ isSBCEnable: true });\r\n            if (sbpAdd) this.setState({ isSBPEnable: true });\r\n            if (railDispatchAdd) this.setState({ isRailDispatchEnable: true });\r\n          }\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.log(\"ContractComposite:Error occured on getLookUpData\", error);\r\n    }\r\n  }\r\n\r\n  \r\n  authenticateDelete = () => {\r\n    try {\r\n      let showDeleteAuthenticationLayout =\r\n        this.props.userDetails.EntityResult.IsWebPortalUser !== true\r\n          ? true\r\n          : false;\r\n      this.setState({ showDeleteAuthenticationLayout });\r\n      if (showDeleteAuthenticationLayout === false) {\r\n        this.handleDelete();\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Order Composite : Error in authenticateDelete\");\r\n    }\r\n  };\r\n\r\n \r\n\r\n  handleAuthenticationClose = () => {\r\n    this.setState({\r\n      showDeleteAuthenticationLayout: false,\r\n    });\r\n  };\r\n\r\n  \r\n  getFunctionGroupName() {\r\n    if(this.state.showDeleteAuthenticationLayout )\r\n      return fnContract\r\n   };\r\n\r\n   getDeleteorEditMode() {\r\n    if(this.state.showDeleteAuthenticationLayout)\r\n      return functionGroups.remove;\r\n    else\r\n      return functionGroups.modify;\r\n   };\r\n\r\n   handleOperation()  {\r\n  \r\n    if(this.state.showDeleteAuthenticationLayout)\r\n      return this.handleDelete\r\n    \r\n };\r\n\r\n  \r\n\r\n  render() {\r\n    let contractSelected =\r\n      this.state.selectedItems.length > 0 && this.state.isShowRightPane;\r\n    return (\r\n      <div>\r\n        {this.props.shipmentSource === undefined ||\r\n          this.props.shipmentSource === \"\" ||\r\n          this.props.shipmentSource === null ? (\r\n          <ErrorBoundary>\r\n            <TMUserActionsComposite\r\n              operationsVisibilty={this.state.operationsVisibilty}\r\n              breadcrumbItem={this.props.activeItem}\r\n              shareholders={this.props.userDetails.EntityResult.ShareholderList}\r\n              selectedShareholder={this.state.selectedShareholder}\r\n              onShareholderChange={this.handleShareholderSelectionChange}\r\n              onDelete={this.authenticateDelete}\r\n              onAdd={this.handleAdd}\r\n              handleBreadCrumbClick={this.props.handleBreadCrumbClick}\r\n            ></TMUserActionsComposite>\r\n          </ErrorBoundary>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n\r\n        {this.state.isDetails ? (\r\n          <ErrorBoundary>\r\n            <ContractDetailsComposite\r\n              key=\"ContractDetails\"\r\n              selectedRow={this.state.selectedRow}\r\n              onBack={this.handleBack}\r\n              onSaved={this.savedEvent}\r\n              transportationType={this.getTransportationType()}\r\n              selectedShareholder={this.state.selectedShareholder}\r\n              handleOperationVisibility={this.handleOperationVisibility}\r\n            ></ContractDetailsComposite>\r\n          </ErrorBoundary>\r\n        ) : this.state.isLoadShipment && this.state.shipmentType ? (\r\n          <ErrorBoundary>\r\n            <TruckShipmentComposite\r\n              shipmentSource={Constants.shipmentFrom.Contract}\r\n              selectedSourceCode={this.state.selectedContractCode}\r\n              shipmentType={this.state.shipmentType}\r\n              shipmentSourceFromSummary={true}\r\n              selectedShareholder={this.state.selectedShareholder}\r\n              activeItem={this.props.activeItem}\r\n            ></TruckShipmentComposite>\r\n          </ErrorBoundary>\r\n        ) : this.state.isLoadRailDispatch ? (\r\n          <RailDispatchComposite\r\n            selectedShareholder={this.state.selectedShareholder}\r\n            shipmentSource={Constants.shipmentFrom.Contract}\r\n            selectedSourceCode={this.state.selectedContractCode}\r\n            shipmentType={this.state.shipmentType}\r\n            shipmentSourceFromSummary={true}\r\n            userDetails={this.props.userDetails}\r\n            activeItem={this.props.activeItem}\r\n          ></RailDispatchComposite>\r\n        ) : (\r\n          <>\r\n            <ErrorBoundary>\r\n              <div className=\"kpiSummaryContainer\">\r\n                <KPIDashboardLayout\r\n                  kpiList={this.state.contractKPIList}\r\n                  pageName=\"Contract\"\r\n                ></KPIDashboardLayout>\r\n              </div>\r\n            </ErrorBoundary>\r\n            {this.state.isReadyToRender ? (\r\n              <div\r\n                className={\r\n                  contractSelected ? \"showShipmentStatusRightPane\" : \"\"\r\n                }\r\n              >\r\n                <ErrorBoundary>\r\n                  <TMTransactionFilters\r\n                    dateRange={{\r\n                      from: this.state.fromDate,\r\n                      to: this.state.toDate,\r\n                    }}\r\n                    dateError={this.state.dateError}\r\n                    handleDateTextChange={this.handleDateTextChange}\r\n                    handleRangeSelect={this.handleRangeSelect}\r\n                    handleLoadOrders={this.handleLoadContracts}\r\n                    filterText=\"LoadContracts\"\r\n                  ></TMTransactionFilters>\r\n                </ErrorBoundary>\r\n                <ErrorBoundary>\r\n                  <div className=\"compositeTransactionList\">\r\n                    <ContractSummaryPageComposite\r\n                      tableData={this.state.data.Table}\r\n                      columnDetails={this.state.data.Column}\r\n                      pageSize={\r\n                        this.props.userDetails.EntityResult.PageAttibutes\r\n                          .WebPortalListPageSize\r\n                      }\r\n                      exportRequired={true}\r\n                      exportFileName=\"ContractList\"\r\n                      columnPickerRequired={true}\r\n\r\n                      terminalsToShow={\r\n                        this.props.userDetails.EntityResult.PageAttibutes\r\n                          .NoOfTerminalsToShow\r\n                      }\r\n                      selectionRequired={true}\r\n                      columnGroupingRequired={true}\r\n                      onSelectionChange={this.handleSelection}\r\n                      onRowClick={this.handleRowClick}\r\n                      parentComponent={this.componentName}\r\n                    ></ContractSummaryPageComposite>\r\n                  </div>\r\n                </ErrorBoundary>\r\n              </div>\r\n            ) : (\r\n              <LoadingPage message=\"Loading\"></LoadingPage>\r\n            )}\r\n            {contractSelected ? (\r\n              <div>\r\n                <TransactionSourceSummaryOperations\r\n                  transportationType={\r\n                    this.props.activeItem.itemProps.transportationType\r\n                  }\r\n                  handleShipmentByCompartmentPageClick={\r\n                    this.handleShipmentByCompartmentPageClick\r\n                  }\r\n                  handleShipmentByProductPageClick={\r\n                    this.handleShipmentByProductPageClick\r\n                  }\r\n                  handleDispatchPageClick={this.handleDispatchPageClick}\r\n                  isSBCEnable={this.state.isSBCEnable}\r\n                  isSBPEnable={this.state.isSBPEnable}\r\n                  isRailDispatchEnable={this.state.isRailDispatchEnable}\r\n                ></TransactionSourceSummaryOperations>\r\n              </div>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </>\r\n        )}\r\n        <ErrorBoundary>\r\n          <ToastContainer\r\n            hideProgressBar={true}\r\n            closeOnClick={false}\r\n            closeButton={true}\r\n            newestOnTop={true}\r\n            position=\"bottom-right\"\r\n            toastClassName=\"toast-notification-wrap\"\r\n          />\r\n        </ErrorBoundary>\r\n\r\n        {this.state.showDeleteAuthenticationLayout  \r\n          ? (\r\n          <UserAuthenticationLayout\r\n            Username={this.props.userDetails.EntityResult.UserName}\r\n            functionName={this.getDeleteorEditMode()}\r\n            functionGroup={this.getFunctionGroupName()}\r\n            handleClose={this.handleAuthenticationClose}\r\n            handleOperation={this.handleOperation()}\r\n          ></UserAuthenticationLayout>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    userDetails: state.getUserDetails.userDetails,\r\n    tokenDetails: state.getUserDetails.TokenAuth,\r\n  };\r\n};\r\n\r\nContractComposite.propTypes = {\r\n  activeItem: PropTypes.object,\r\n  shipmentSource: PropTypes.number,\r\n};\r\n\r\nexport default connect(mapStateToProps)(ContractComposite);\r\n","import React from \"react\";\r\nimport WijmoGridComposite from \"../Common/WijmoGridComposite\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nOrderSummaryPageComposite.propTypes = {\r\n  tableData: PropTypes.array.isRequired,\r\n  columnDetails: PropTypes.array.isRequired,\r\n  pageSize: PropTypes.number,\r\n  exportRequired:PropTypes.bool,\r\n  exportFileName:PropTypes.string,\r\n  columnPickerRequired:PropTypes.bool,\r\n  columnGroupingRequired:PropTypes.bool,\r\n  selectionRequired:PropTypes.bool,\r\n  terminalsToShow: PropTypes.number,\r\n // selectedItems: PropTypes.array,\r\n onSelectionChange: PropTypes.func,\r\n onRowClick: PropTypes.func.isRequired,\r\n parentComponent:PropTypes.string,\r\n};\r\n\r\nOrderSummaryPageComposite.defaultProps = {\r\n  pageSize: 10,\r\n  terminalsToShow: 2,\r\n  tableData: [],\r\n  columnDetails: [],\r\n //selectedItems: [],\r\n};\r\n\r\nexport function OrderSummaryPageComposite({\r\n  tableData,\r\n  columnDetails,\r\n  pageSize,\r\n  exportRequired,\r\n  exportFileName,\r\n  columnPickerRequired,\r\n  columnGroupingRequired,\r\n  selectionRequired,\r\n  terminalsToShow,\r\n  //selectedItems,\r\n  onSelectionChange,\r\n  onRowClick,\r\n  parentComponent,\r\n}) {\r\n  return (\r\n    <WijmoGridComposite\r\n    data={tableData}\r\n    columns={columnDetails}\r\n    rowsPerPage={pageSize}\r\n    exportRequired={exportRequired}\r\n    exportFileName={exportFileName}\r\n    columnPickerRequired={columnPickerRequired}\r\n    columnGroupingRequired={columnGroupingRequired}\r\n    selectionRequired={selectionRequired}\r\n   // selectedItems={selectedItems}\r\n    onSelectionHandle={onSelectionChange}\r\n    onRowClick={onRowClick}\r\n    parentComponent={parentComponent}\r\n    terminalsToShow={terminalsToShow}\r\n  ></WijmoGridComposite>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport {\r\n  functionGroups,\r\n  fnOrder,\r\n  fnKPIInformation,\r\n  fnSBC,\r\n  fnSBP,\r\n} from \"../../../JS/FunctionGroups\";\r\nimport * as RestAPIs from \"../../../JS/RestApis\";\r\nimport axios from \"axios\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport NotifyEvent from \"../../../JS/NotifyEvent\";\r\nimport { TMUserActionsComposite } from \"../Common/TMUserActionsComposite\";\r\nimport * as Utilities from \"../../../JS/Utilities\";\r\nimport ErrorBoundary from \"../../ErrorBoundary\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as KeyCodes from \"../../../JS/KeyCodes\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { OrderSummaryPageComposite } from \"../Summary/OrderSummaryComposite\";\r\nimport OrderDetailsComposite from \"../Details/OrderDetailsComposite\";\r\nimport { TMTransactionFilters } from \"../../UIBase/Common/TMTransactionFilters\";\r\nimport { LoadingPage } from \"../../UIBase/Common/LoadingPage\";\r\nimport KPIDashboardLayout from \"../Common/KPIDashboard/KPIDashboardLayout\";\r\nimport { kpiOrderList } from \"../../../JS/KPIPageName\";\r\nimport * as Constants from \"../../../JS/Constants\";\r\nimport TruckShipmentComposite from \"./TruckShipmentComposite\";\r\nimport TransactionSourceSummaryOperations from \"../Common/TransactionSourceSummaryOperations\";\r\nimport UserAuthenticationLayout from \"../Common/UserAuthentication\";\r\n\r\nclass OrderComposite extends Component {\r\n  state = {\r\n    isDetails: false,\r\n    isReadyToRender: false,\r\n    toDate: \"\",\r\n    fromDate: \"\",\r\n    isDetailsModified: false,\r\n    operationsVisibilty: { add: false, delete: false, shareholder: true },\r\n    selectedRow: {},\r\n    selectedItems: [],\r\n    data: {},\r\n    dateError: \"\",\r\n    orderKPIList: [],\r\n    None: [],\r\n    isLoadShipment: false,\r\n    shipmentType: \"\",\r\n    selectedCodes: [],\r\n    isSBCEnable: false,\r\n    isSBPEnable: false,\r\n    showDeleteAuthenticationLayout: false,\r\n  };\r\n\r\n  componentName = \"OrderComponent\";\r\n\r\n  componentDidMount() {\r\n    try {\r\n      Utilities.setArchive(this.props.userDetails.EntityResult.IsArchived);\r\n      const operationsVisibilty = { ...this.state.operationsVisibilty };\r\n      operationsVisibilty.add = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.add,\r\n        fnOrder\r\n      );\r\n      let toDate = new Date();\r\n      toDate.setHours(23, 59, 59);\r\n      let fromDate = new Date();\r\n      fromDate.setHours(0, 0, 0);\r\n      this.setState({ fromDate: fromDate, toDate: toDate });\r\n      toDate = toDate.toISOString();\r\n      fromDate = fromDate.toISOString();\r\n\r\n      this.setState({\r\n        operationsVisibilty,\r\n        selectedShareholder:\r\n          this.props.userDetails.EntityResult.PrimaryShareholder,\r\n      });\r\n      this.getOrderList(\r\n        this.props.userDetails.EntityResult.PrimaryShareholder,\r\n        fromDate,\r\n        toDate\r\n      );\r\n      this.getKPIList(this.props.userDetails.EntityResult.PrimaryShareholder);\r\n      this.getlookupValues();\r\n    } catch (error) {\r\n      console.log(\"OrderComposite:Error occured on ComponentDidMount\", error);\r\n    }\r\n    // clear session storage on window refresh event\r\n    window.addEventListener(\"beforeunload\", this.clearStorage)\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    // clear session storage\r\n    this.clearStorage();\r\n\r\n    // remove event listener\r\n    window.removeEventListener(\"beforeunload\", this.clearStorage)\r\n  }\r\n\r\n  clearStorage = () => {\r\n    sessionStorage.removeItem(this.componentName + \"GridState\");\r\n  }\r\n\r\n  //Get KPI for order\r\n  getKPIList(shareholder) {\r\n    let KPIView = Utilities.isInFunction(\r\n      this.props.userDetails.EntityResult.FunctionsList,\r\n      functionGroups.view,\r\n      fnKPIInformation\r\n    );\r\n    if (KPIView === true) {\r\n      var notification = {\r\n        message: \"\",\r\n        messageType: \"critical\",\r\n        messageResultDetails: [],\r\n      };\r\n      let objKPIRequestData = {\r\n        PageName: kpiOrderList,\r\n        TransportationType: Constants.TransportationType.ROAD,\r\n        InputParameters: [{ key: \"ShareholderCode\", value: shareholder }],\r\n      };\r\n      axios(\r\n        RestAPIs.GetKPI,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          objKPIRequestData,\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          var result = response.data;\r\n          if (result.IsSuccess === true) {\r\n            this.setState({ orderKPIList: result.EntityResult.ListKPIDetails });\r\n          } else {\r\n            this.setState({ orderKPIList: [] });\r\n            console.log(\"Error in order KPIList:\", result.ErrorList);\r\n            notification.messageResultDetails.push({\r\n              keyFields: [],\r\n              keyValues: [],\r\n              isSuccess: false,\r\n              errorMessage: result.ErrorList[0],\r\n            });\r\n          }\r\n          if (notification.messageResultDetails.length > 0) {\r\n            toast(\r\n              <ErrorBoundary>\r\n                <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n              </ErrorBoundary>,\r\n              {\r\n                autoClose:\r\n                  notification.messageType === \"success\" ? 10000 : false,\r\n              }\r\n            );\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error while getting Order KPIList:\", error);\r\n        });\r\n    }\r\n  }\r\n  handleDelete = () => {\r\n    this.handleAuthenticationClose();\r\n    //console.log(\"Clicked Delete\", this.state.selectedItems);\r\n    try {\r\n      let operationsVisibilty = { ...this.state.operationsVisibilty };\r\n      operationsVisibilty.delete = false;\r\n      this.setState({ operationsVisibilty });\r\n\r\n      let deleteOrderKeys = [];\r\n      for (var i = 0; i < this.state.selectedItems.length; i++) {\r\n        let shCode = this.state.selectedShareholder;\r\n        let OrderCode = this.state.selectedItems[i][\"Common_Code\"];\r\n        let keyData = {\r\n          keyDataCode: 0,\r\n          ShareHolderCode: shCode,\r\n          KeyCodes: [{ Key: KeyCodes.orderCode, Value: OrderCode }],\r\n        };\r\n        deleteOrderKeys.push(keyData);\r\n      }\r\n\r\n      axios(\r\n        RestAPIs.DeleteOrder,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          deleteOrderKeys,\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          let result = response.data;\r\n          let isRefreshDataRequire = result.isSuccess;\r\n\r\n          if (\r\n            result.ResultDataList !== null &&\r\n            result.ResultDataList !== undefined\r\n          ) {\r\n            var failedResultsCount = result.ResultDataList.filter(function (\r\n              res\r\n            ) {\r\n              return !res.IsSuccess;\r\n            }).length;\r\n\r\n            if (failedResultsCount === result.ResultDataList.length) {\r\n              isRefreshDataRequire = false;\r\n            } else isRefreshDataRequire = true;\r\n          }\r\n\r\n          let notification = Utilities.convertResultsDatatoNotification(\r\n            result,\r\n            \"OrderInfo_DeletionStatus\",\r\n            [\"OrderCode\"]\r\n          );\r\n\r\n          if (isRefreshDataRequire) {\r\n            this.setState({ isReadyToRender: false });\r\n            this.getOrderList(\r\n              this.state.selectedShareholder,\r\n              this.state.fromDate.toISOString(),\r\n              this.state.toDate.toISOString()\r\n            );\r\n            operationsVisibilty.delete = false;\r\n            this.setState({\r\n              selectedItems: [],\r\n              operationsVisibilty,\r\n              selectedRow: {},\r\n            });\r\n          } else {\r\n            operationsVisibilty.delete = true;\r\n            this.setState({ operationsVisibilty });\r\n          }\r\n\r\n          notification.messageResultDetails.forEach((messageResult) => {\r\n            if (messageResult.keyFields.length > 0)\r\n              messageResult.keyFields[0] = \"ShipmentOrdertList_OrderCode\";\r\n          });\r\n\r\n          toast(\r\n            <ErrorBoundary>\r\n              <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n            </ErrorBoundary>,\r\n            {\r\n              autoClose: notification.messageType === \"success\" ? 10000 : false,\r\n            }\r\n          );\r\n        })\r\n        .catch((error) => {\r\n          throw error;\r\n        });\r\n    } catch (error) {\r\n      console.log(\"OrderComposite:Error occured on handleDelet\", error);\r\n    }\r\n  };\r\n\r\n  getOrderList(shareholder, startRange, endRange) {\r\n    this.setState({ isReadyToRender: false });\r\n    let fromDate = new Date(startRange);\r\n    let toDate = new Date(endRange);\r\n    fromDate.setHours(0, 0, 0);\r\n    toDate.setHours(23, 59, 59);\r\n\r\n    let obj = {\r\n      ShareholderCode: shareholder,\r\n      startRange: fromDate,\r\n      endRange: toDate,\r\n    };\r\n\r\n    axios(\r\n      RestAPIs.GetOrderListForRole,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        let result = response.data;\r\n        if (result.IsSuccess === true) {\r\n          this.setState({ data: result.EntityResult, isReadyToRender: true });\r\n        } else {\r\n          this.setState({ data: {}, isReadyToRender: true });\r\n          console.log(\"Error in OrderListForRole:\", result.ErrorList);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        this.setState({ data: {}, isReadyToRender: true });\r\n        console.log(\"Error while getting Order List:\", error);\r\n      });\r\n  }\r\n\r\n  handleShareholderSelectionChange = (shareholder) => {\r\n    try {\r\n      let { operationsVisibilty } = { ...this.state };\r\n      operationsVisibilty.delete = false;\r\n      this.setState({\r\n        selectedShareholder: shareholder,\r\n        isReadyToRender: false,\r\n        selectedItems: [],\r\n        operationsVisibilty,\r\n      });\r\n      this.getOrderList(\r\n        shareholder,\r\n        this.state.fromDate.toISOString(),\r\n        this.state.toDate.toISOString()\r\n      );\r\n      this.getKPIList(shareholder);\r\n    } catch (error) {\r\n      console.log(\r\n        \"OrderComposite:Error occured on handleShareholderSelectionChange\",\r\n        error\r\n      );\r\n    }\r\n  };\r\n\r\n  handleAdd = () => {\r\n    try {\r\n      let operationsVisibilty = { ...this.state.operationsVisibilty };\r\n      operationsVisibilty.delete = false;\r\n      operationsVisibilty.add = false;\r\n      operationsVisibilty.shareholder = false;\r\n\r\n      this.setState({\r\n        isDetails: true,\r\n        selectedRow: {},\r\n        operationsVisibilty,\r\n      });\r\n    } catch (error) {\r\n      console.log(\"OrderComposite:Error occured on handleAdd\", error);\r\n    }\r\n  };\r\n\r\n  handleRowClick = (item) => {\r\n    try {\r\n      let operationsVisibilty = { ...this.state.operationsVisibilty };\r\n      operationsVisibilty.add = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.add,\r\n        fnOrder\r\n      );\r\n      operationsVisibilty.delete = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.remove,\r\n        fnOrder\r\n      );\r\n      operationsVisibilty.shareholder = false;\r\n      this.setState({\r\n        isDetails: true,\r\n        selectedRow: item,\r\n        selectedItems: [item],\r\n        operationsVisibilty,\r\n      });\r\n    } catch (error) {\r\n      console.log(\"OrderComposite:Error occured on Row click\", error);\r\n    }\r\n  };\r\n\r\n  handleSelection = (items) => {\r\n    try {\r\n      let operationsVisibilty = { ...this.state.operationsVisibilty };\r\n\r\n      let isReady =\r\n        items.findIndex(\r\n          (x) =>\r\n            Constants.orderStatus[x.ShipmentGridOrder_Status] !==\r\n            Constants.orderStatus.NOT_SCHEDULED\r\n        ) >= 0\r\n          ? false\r\n          : true;\r\n\r\n      operationsVisibilty.delete =\r\n        items.length > 0 &&\r\n        isReady &&\r\n        Utilities.isInFunction(\r\n          this.props.userDetails.EntityResult.FunctionsList,\r\n          functionGroups.remove,\r\n          fnOrder\r\n        );\r\n\r\n      this.setState({ selectedItems: items, operationsVisibilty });\r\n    } catch (error) {\r\n      console.log(\"OrderComposite:Error occured on handleSelection\", error);\r\n    }\r\n  };\r\n\r\n  savedEvent = (data, saveType, notification) => {\r\n    try {\r\n      let operationsVisibilty = { ...this.state.operationsVisibilty };\r\n      if (notification.messageType === \"success\") {\r\n        operationsVisibilty.add = Utilities.isInFunction(\r\n          this.props.userDetails.EntityResult.FunctionsList,\r\n          functionGroups.add,\r\n          fnOrder\r\n        );\r\n        operationsVisibilty.delete = Utilities.isInFunction(\r\n          this.props.userDetails.EntityResult.FunctionsList,\r\n          functionGroups.remove,\r\n          fnOrder\r\n        );\r\n        this.setState({ isDetailsModified: true, operationsVisibilty });\r\n      }\r\n      if (notification.messageType === \"success\" && saveType === \"add\") {\r\n        let selectedItems = [\r\n          {\r\n            Common_Code: data.OrderCode,\r\n            Common_Status: data.Active,\r\n            Common_Shareholder: data.ShareholderCode,\r\n          },\r\n        ];\r\n        this.setState({ selectedItems });\r\n      }\r\n      toast(\r\n        <ErrorBoundary>\r\n          <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n        </ErrorBoundary>,\r\n        {\r\n          autoClose: notification.messageType === \"success\" ? 10000 : false,\r\n        }\r\n      );\r\n    } catch (error) {\r\n      console.log(\"OrderComposite:Error occured on savedEvent\", error);\r\n    }\r\n  };\r\n\r\n  handleOperationVisibility = (status) => {\r\n    let operationsVisibilty = { ...this.state.operationsVisibilty };\r\n    if (status === true) {\r\n      operationsVisibilty.add = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.add,\r\n        fnOrder\r\n      );\r\n      operationsVisibilty.delete = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.remove,\r\n        fnOrder\r\n      );\r\n      operationsVisibilty.shareholder = false;\r\n    } else {\r\n      operationsVisibilty.add = status;\r\n      operationsVisibilty.delete = status;\r\n      operationsVisibilty.shareholder = status;\r\n    }\r\n\r\n    this.setState({ operationsVisibilty });\r\n  };\r\n\r\n  handleBack = () => {\r\n    try {\r\n      let operationsVisibilty = { ...this.state.operationsVisibilty };\r\n      operationsVisibilty.add = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.add,\r\n        fnOrder\r\n      );\r\n      operationsVisibilty.delete = false;\r\n      operationsVisibilty.shareholder = true;\r\n      this.setState({\r\n        isDetails: false,\r\n        selectedRow: {},\r\n        selectedItems: [],\r\n        operationsVisibilty,\r\n        isReadyToRender: false,\r\n      });\r\n      this.getOrderList(\r\n        this.state.selectedShareholder,\r\n        this.state.fromDate.toISOString(),\r\n        this.state.toDate.toISOString()\r\n      );\r\n      this.getKPIList(this.state.selectedShareholder);\r\n    } catch (error) {\r\n      console.log(\"OrderComposite:Error occured on Back click\", error);\r\n    }\r\n  };\r\n\r\n  handleRangeSelect = ({ to, from }) => {\r\n    if (to !== undefined) this.setState({ toDate: to });\r\n    if (from !== undefined) this.setState({ fromDate: from });\r\n  };\r\n\r\n  handleDateTextChange = (value, error) => {\r\n    if (value === \"\")\r\n      this.setState({ dateError: \"\", toDate: \"\", fromDate: \"\" });\r\n    if (error !== null && error !== \"\")\r\n      this.setState({\r\n        dateError: \"Common_InvalidDate\",\r\n        toDate: \"\",\r\n        fromDate: \"\",\r\n      });\r\n    else {\r\n      this.setState({\r\n        dateError: \"\",\r\n        toDate: value.to,\r\n        fromDate: value.from,\r\n      });\r\n    }\r\n  };\r\n\r\n  handleLoadOrders = () => {\r\n    //debugger;\r\n    let error = Utilities.validateDateRange(\r\n      this.state.toDate,\r\n      this.state.fromDate\r\n    );\r\n\r\n    if (error !== \"\") {\r\n      this.setState({ dateError: error });\r\n    } else {\r\n      this.setState({ dateError: \"\" });\r\n      this.getOrderList(\r\n        this.state.selectedShareholder,\r\n        this.state.fromDate.toISOString(),\r\n        this.state.toDate.toISOString()\r\n      );\r\n    }\r\n  };\r\n\r\n  handleShipmentByProductPageClick = () => {\r\n    let orderCodes = [];\r\n    for (var i = 0; i < this.state.selectedItems.length; i++) {\r\n      var OrderCode = this.state.selectedItems[i][\"Common_Code\"];\r\n      orderCodes.push(OrderCode);\r\n    }\r\n    this.setState({\r\n      isLoadShipment: true,\r\n      shipmentType: \"ShipmentByProduct\",\r\n      selectedCodes: orderCodes,\r\n    });\r\n  };\r\n\r\n  handleShipmentByCompartmentPageClick = () => {\r\n    let orderCodes = [];\r\n    for (var i = 0; i < this.state.selectedItems.length; i++) {\r\n      var OrderCode = this.state.selectedItems[i][\"Common_Code\"];\r\n      orderCodes.push(OrderCode);\r\n    }\r\n    this.setState({\r\n      isLoadShipment: true,\r\n      shipmentType: \"ShipmentByCompartment\",\r\n      selectedCodes: orderCodes,\r\n    });\r\n  };\r\n\r\n  getlookupValues() {\r\n    try {\r\n      let sbcAdd = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.add,\r\n        fnSBC\r\n      );\r\n      let sbpAdd = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.add,\r\n        fnSBP\r\n      );\r\n      axios(\r\n        RestAPIs.GetLookUpData + \"?LookUpTypeCode=Order\",\r\n        Utilities.getAuthenticationObjectforGet(\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      ).then((response) => {\r\n        var result = response.data;\r\n        if (result.IsSuccess === true) {\r\n          let isOrderEnable =\r\n            result.EntityResult[\"EnableOrder\"] === \"0\" ? false : true;\r\n          if (isOrderEnable) {\r\n            if (sbcAdd) this.setState({ isSBCEnable: true });\r\n            if (sbpAdd) this.setState({ isSBPEnable: true });\r\n          }\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.log(\"OrderComposite:Error occured on getLookUpData\", error);\r\n    }\r\n  }\r\n\r\n\r\n  authenticateDelete = () => {\r\n    try {\r\n      let showDeleteAuthenticationLayout =\r\n        this.props.userDetails.EntityResult.IsWebPortalUser !== true\r\n          ? true\r\n          : false;\r\n      this.setState({ showDeleteAuthenticationLayout });\r\n      if (showDeleteAuthenticationLayout === false) {\r\n        this.handleDelete();\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Order Composite : Error in authenticateDelete\");\r\n    }\r\n  };\r\n\r\n \r\n\r\n  handleAuthenticationClose = () => {\r\n    \r\n    this.setState({\r\n      showDeleteAuthenticationLayout: false,\r\n    });\r\n  };\r\n\r\n  \r\n  getFunctionGroupName() {\r\n    if(this.state.showDeleteAuthenticationLayout )\r\n      return fnOrder\r\n   };\r\n\r\n   getDeleteorEditMode() {\r\n    if(this.state.showDeleteAuthenticationLayout)\r\n      return functionGroups.remove;\r\n    else\r\n      return functionGroups.modify;\r\n   };\r\n\r\n   handleOperation()  {\r\n  \r\n    if(this.state.showDeleteAuthenticationLayout)\r\n      return this.handleDelete\r\n    \r\n };\r\n\r\n  render() {\r\n    let isOrdersSelected = this.state.selectedItems.length > 0;\r\n    return (\r\n      <div>\r\n        {this.props.shipmentSource === undefined ||\r\n          this.props.shipmentSource === \"\" ||\r\n          this.props.shipmentSource === null ? (\r\n          <ErrorBoundary>\r\n            <TMUserActionsComposite\r\n              operationsVisibilty={this.state.operationsVisibilty}\r\n              breadcrumbItem={this.props.activeItem}\r\n              shareholders={this.props.userDetails.EntityResult.ShareholderList}\r\n              selectedShareholder={this.state.selectedShareholder}\r\n              onShareholderChange={this.handleShareholderSelectionChange}\r\n              onDelete={this.authenticateDelete}\r\n              onAdd={this.handleAdd}\r\n              handleBreadCrumbClick={this.props.handleBreadCrumbClick}\r\n            ></TMUserActionsComposite>\r\n          </ErrorBoundary>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n\r\n        {this.state.isDetails ? (\r\n          <ErrorBoundary>\r\n            <OrderDetailsComposite\r\n              key=\"OrderDetails\"\r\n              selectedRow={this.state.selectedRow}\r\n              onBack={this.handleBack}\r\n              onSaved={this.savedEvent}\r\n              selectedShareholder={this.state.selectedShareholder}\r\n              handleOperationVisibility={this.handleOperationVisibility}\r\n            ></OrderDetailsComposite>\r\n          </ErrorBoundary>\r\n        ) : this.state.isLoadShipment && this.state.shipmentType ? (\r\n          <ErrorBoundary>\r\n            <TruckShipmentComposite\r\n              shipmentSource={Constants.shipmentFrom.Order}\r\n              selectedSourceCode={this.state.selectedCodes}\r\n              shipmentType={this.state.shipmentType}\r\n              shipmentSourceFromSummary={true}\r\n              selectedShareholder={this.state.selectedShareholder}\r\n            ></TruckShipmentComposite>\r\n          </ErrorBoundary>\r\n        ) : (\r\n          <>\r\n            <ErrorBoundary>\r\n              <div className=\"kpiSummaryContainer\">\r\n                <KPIDashboardLayout\r\n                  kpiList={this.state.orderKPIList}\r\n                  pageName=\"Orders\"\r\n                ></KPIDashboardLayout>\r\n              </div>\r\n            </ErrorBoundary>\r\n            {this.state.isReadyToRender ? (\r\n              <div\r\n                className={\r\n                  isOrdersSelected ? \"showShipmentStatusRightPane\" : \"\"\r\n                }\r\n              >\r\n                <ErrorBoundary>\r\n                  <TMTransactionFilters\r\n                    dateRange={{\r\n                      from: this.state.fromDate,\r\n                      to: this.state.toDate,\r\n                    }}\r\n                    dateError={this.state.dateError}\r\n                    handleDateTextChange={this.handleDateTextChange}\r\n                    handleRangeSelect={this.handleRangeSelect}\r\n                    handleLoadOrders={this.handleLoadOrders}\r\n                    filterText=\"LoadOrders\"\r\n                  ></TMTransactionFilters>\r\n                </ErrorBoundary>\r\n                <ErrorBoundary>\r\n                  <div className=\"compositeTransactionList\">\r\n                    <OrderSummaryPageComposite\r\n                      tableData={this.state.data.Table}\r\n                      columnDetails={this.state.data.Column}\r\n                      pageSize={\r\n                        this.props.userDetails.EntityResult.PageAttibutes\r\n                          .WebPortalListPageSize\r\n                      }\r\n                      exportRequired={true}\r\n                      exportFileName=\"OrderList\"\r\n                      columnPickerRequired={true}\r\n\r\n                      terminalsToShow={\r\n                        this.props.userDetails.EntityResult.PageAttibutes\r\n                          .NoOfTerminalsToShow\r\n                      }\r\n                      selectionRequired={true}\r\n                      columnGroupingRequired={true}\r\n                      onSelectionChange={this.handleSelection}\r\n                      onRowClick={this.handleRowClick}\r\n                      parentComponent={this.componentName}\r\n                    ></OrderSummaryPageComposite>\r\n                  </div>\r\n                </ErrorBoundary>\r\n              </div>\r\n            ) : (\r\n              <LoadingPage message=\"Loading\"></LoadingPage>\r\n            )}\r\n            {isOrdersSelected ? (\r\n              <div>\r\n                <TransactionSourceSummaryOperations\r\n                  transportationType={Constants.TransportationType.ROAD}\r\n                  handleShipmentByCompartmentPageClick={\r\n                    this.handleShipmentByCompartmentPageClick\r\n                  }\r\n                  handleShipmentByProductPageClick={\r\n                    this.handleShipmentByProductPageClick\r\n                  }\r\n                  isSBCEnable={this.state.isSBCEnable}\r\n                  isSBPEnable={this.state.isSBPEnable}\r\n                ></TransactionSourceSummaryOperations>\r\n              </div>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        {this.state.showDeleteAuthenticationLayout  \r\n          ? (\r\n          <UserAuthenticationLayout\r\n            Username={this.props.userDetails.EntityResult.UserName}\r\n            functionName={this.getDeleteorEditMode()}\r\n            functionGroup={this.getFunctionGroupName()}\r\n            handleClose={this.handleAuthenticationClose}\r\n            handleOperation={this.handleOperation()}\r\n          ></UserAuthenticationLayout>\r\n        ) : null}\r\n\r\n        <ErrorBoundary>\r\n          <ToastContainer\r\n            hideProgressBar={true}\r\n            closeOnClick={false}\r\n            closeButton={true}\r\n            newestOnTop={true}\r\n            position=\"bottom-right\"\r\n            toastClassName=\"toast-notification-wrap\"\r\n          />\r\n        </ErrorBoundary>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    userDetails: state.getUserDetails.userDetails,\r\n    tokenDetails: state.getUserDetails.TokenAuth,\r\n  };\r\n};\r\n\r\nOrderComposite.propTypes = {\r\n  activeItem: PropTypes.object,\r\n};\r\n\r\nexport default connect(mapStateToProps)(OrderComposite);\r\n","import React from \"react\";\r\nimport WijmoGridComposite from \"../Common/WijmoGridComposite\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nRailDispatchSummaryPageComposite.propTypes = {\r\n  tableData: PropTypes.array.isRequired,\r\n  columnDetails: PropTypes.array.isRequired,\r\n  pageSize: PropTypes.number,\r\n  exportRequired:PropTypes.bool,\r\n  exportFileName:PropTypes.string,\r\n  columnPickerRequired:PropTypes.bool,\r\n  columnGroupingRequired:PropTypes.bool,\r\n  selectionRequired:PropTypes.bool,\r\n  terminalsToShow: PropTypes.number,\r\n  selectedItems: PropTypes.array.isRequired,\r\n  onSelectionChange: PropTypes.func.isRequired,\r\n  onRowClick: PropTypes.func.isRequired,\r\n  parentComponent:PropTypes.string,\r\n};\r\n\r\nRailDispatchSummaryPageComposite.defaultProps = {\r\n  pageSize: 10,\r\n  terminalsToShow: 2,\r\n  tableData: [],\r\n  columnDetails: [],\r\n  selectedItems: [],\r\n};\r\n\r\nexport function RailDispatchSummaryPageComposite({\r\n  tableData,\r\n  columnDetails,\r\n  pageSize,\r\n  exportRequired,\r\n  exportFileName,\r\n  columnPickerRequired,\r\n  columnGroupingRequired,\r\n  selectionRequired,\r\n  terminalsToShow,\r\n  selectedItems,\r\n  onSelectionChange,\r\n  onRowClick,\r\n  parentComponent,\r\n}) {\r\n  return (\r\n    <WijmoGridComposite\r\n    data={tableData}\r\n    columns={columnDetails}\r\n    rowsPerPage={pageSize}\r\n    exportRequired={exportRequired}\r\n    exportFileName={exportFileName}\r\n    columnPickerRequired={columnPickerRequired}\r\n    columnGroupingRequired={columnGroupingRequired}\r\n    selectionRequired={selectionRequired}\r\n    selectedItems={selectedItems}\r\n    onSelectionHandle={onSelectionChange}\r\n    onRowClick={onRowClick}\r\n    parentComponent={parentComponent}\r\n    terminalsToShow={terminalsToShow}\r\n  ></WijmoGridComposite>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { TMUserActionsComposite } from \"../Common/TMUserActionsComposite\";\r\nimport { RailDispatchSummaryPageComposite } from \"../Summary/RailDispatchSummaryComposite\";\r\nimport RailDispatchDetailsComposite from \"../Details/RailDispatchDetailsComposite\";\r\nimport axios from \"axios\";\r\nimport * as Constants from \"./../../../JS/Constants\";\r\nimport * as RestAPIs from \"../../../JS/RestApis\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { connect } from \"react-redux\";\r\nimport \"../../../CSS/styles.css\";\r\nimport NotifyEvent from \"../../../JS/NotifyEvent\";\r\nimport * as Utilities from \"../../../JS/Utilities\";\r\nimport ErrorBoundary from \"../../ErrorBoundary\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as KeyCodes from \"../../../JS/KeyCodes\";\r\nimport {\r\n  functionGroups,\r\n  fnRailDispatch,\r\n  fnKPIInformation,\r\n  fnCloseRailDispatch,\r\n  fnPrintRailBOL,\r\n  fnPrintRailFAN,\r\n  fnViewRailDispatch,\r\n\r\n} from \"../../../JS/FunctionGroups\";\r\nimport { LoadingPage } from \"../../UIBase/Common/LoadingPage\";\r\nimport { TMTransactionFilters } from \"../../UIBase/Common/TMTransactionFilters\";\r\n//import RailDispatchSummaryOperations from \"../Common/ViewAllShipmentFolder/RailDispatchSummaryOperations\";\r\nimport lodash from \"lodash\";\r\nimport { Button, Modal, Input } from \"@scuf/common\";\r\nimport ReportDetails from \"../../UIBase/Details/ReportDetails\";\r\nimport { TranslationConsumer } from \"@scuf/localization\";\r\nimport TransactionSummaryOperations from \"../Common/TransactionSummaryOperations\";\r\n//import TransactionSummaryOperationsMarine from \"../Common/TransactionSummaryOperationsMarine\";\r\nimport ContractComposite from \"./ContractComposite\";\r\nimport { kpiRailShipmentList } from \"../../../JS/KPIPageName\";\r\nimport KPIDashboardLayout from \"../Common/KPIDashboard/KPIDashboardLayout\";\r\nimport UserAuthenticationLayout from \"../Common/UserAuthentication\";\r\n\r\nclass RailDispatchComposite extends Component {\r\n  state = {\r\n    isDetails: false,\r\n    isReadyToRender: false,\r\n    isDetailsModified: false,\r\n    operationsVisibility: { add: false, delete: false, shareholder: false },\r\n    selectedRow: {},\r\n    selectedItems: [],\r\n    selectedShareholder: \"\",\r\n    data: {},\r\n    fromDate: new Date(),\r\n    toDate: new Date(),\r\n    dateError: \"\",\r\n    terminalCodes: [],\r\n    nextOperations: [],\r\n    currentStatuses: [],\r\n    currentAccess: {},\r\n    lastStatus: \"\",\r\n    modalData: {\r\n      closeDispatch: {\r\n        isOpen: false,\r\n        data: {\r\n          reason: \"\",\r\n          dispatchCode: \"\",\r\n          dispatchStatus: \"\",\r\n        },\r\n        validationErrors: {\r\n          reason: \"\",\r\n        },\r\n      },\r\n    },\r\n    subPageName: \"\",\r\n    isDirectOpenSubPage: false,\r\n    isDisplayDetails: false,\r\n    isReadyToShowOperation: false,\r\n    isDisplayRightPane: false,\r\n    enableHSEInspection: true,\r\n    railLookUpData: {},\r\n    showReport: false,\r\n    drawerStatus: false,\r\n    isGoBackToSource: false,\r\n    isContractDisable: false,\r\n    railDispatchKPIList: [],\r\n    railDispatchDeleteStates: [],\r\n    activityInfo: [],\r\n\r\n    showDeleteAuthenticationLayout: false,\r\n    showAuthorizeToLoadAuthenticationLayout: false,\r\n    showCloseShipmentAuthenticationLayout: false,\r\n    showViewBOLAuthenticationLayout: false,\r\n    showPrintBOLAuthenticationLayout:false,\r\n    showFANAuthenticationLayout: false,\r\n  };\r\n\r\n  componentName = \"RailDispatchComponent\";\r\n\r\n  componentDidMount() {\r\n    try {\r\n      Utilities.setArchive(this.props.userDetails.EntityResult.IsArchived);\r\n      if (this.props.shipmentSourceFromSummary) {\r\n        const operationsVisibility = lodash.cloneDeep(\r\n          this.state.operationsVisibility\r\n        );\r\n        operationsVisibility.add = false;\r\n        this.setState({\r\n          isDetails: true,\r\n          selectedItems: [],\r\n          selectedRow: {},\r\n          operationsVisibility,\r\n          isDirectOpenSubPage: false,\r\n          isReadyToShowOperation: false,\r\n        });\r\n        this.setRightPaneDisplay(true);\r\n      }\r\n      const operationsVisibility = lodash.cloneDeep(\r\n        this.state.operationsVisibility\r\n      );\r\n      operationsVisibility.add = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.add,\r\n        fnRailDispatch\r\n      );\r\n      this.setState({\r\n        operationsVisibility,\r\n        selectedShareholder:\r\n          this.props.userDetails.EntityResult.PrimaryShareholder,\r\n      });\r\n      this.CheckRailDispatchDeleteAllowed();\r\n      this.getLookUpData(\"HSEInspection\", (entityResult) => {\r\n        this.setState({\r\n          enableHSEInspection: entityResult.EnableRail === \"True\",\r\n        });\r\n      });\r\n      this.getLookUpData(\"Rail\", (entityResult) => {\r\n        this.setState({ railLookUpData: entityResult });\r\n      });\r\n\r\n      this.getTerminalsList(\r\n        this.props.userDetails.EntityResult.PrimaryShareholder\r\n      );\r\n      this.getRailDispatchList(\r\n        this.props.userDetails.EntityResult.PrimaryShareholder\r\n      );\r\n      this.getKPIList();\r\n      this.getContractLookupValues();\r\n      this.GetShipmentActivityInfo();\r\n    } catch (error) {\r\n      console.log(\r\n        \"RailDispatchComposite: Error occurred on componentDidMount\",\r\n        error\r\n      );\r\n    }\r\n    // clear session storage on window refresh event\r\n    window.addEventListener(\"beforeunload\", this.clearStorage)\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    // clear session storage\r\n    this.clearStorage();\r\n\r\n    // remove event listener\r\n    window.removeEventListener(\"beforeunload\", this.clearStorage)\r\n  }\r\n\r\n  clearStorage = () => {\r\n    sessionStorage.removeItem(this.componentName + \"GridState\");\r\n  }\r\n\r\n\r\n  GetShipmentActivityInfo() {\r\n    try {\r\n      axios(\r\n        RestAPIs.GetShipmentActivityInfo,\r\n        Utilities.getAuthenticationObjectforGet(\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          if (response.data.IsSuccess) {\r\n            this.setState({ activityInfo: response.data.EntityResult });\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error while getting shipment activityInfo:\", error);\r\n        });\r\n    } catch (error) {\r\n      console.log(\"Error in GetShipmentActivityInfo:\", error);\r\n    }\r\n  }\r\n\r\n  getLookUpData = (lookUpTypeCode, callback) => {\r\n    axios(\r\n      RestAPIs.GetLookUpData + \"?LookUpTypeCode=\" + lookUpTypeCode,\r\n      Utilities.getAuthenticationObjectforGet(this.props.tokenDetails.tokenInfo)\r\n    )\r\n      .then((response) => {\r\n        const result = response.data;\r\n        if (result.IsSuccess === true) {\r\n          callback(result.EntityResult);\r\n        } else {\r\n          console.log(\"Error in getLookUpData: \", result.ErrorList);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\r\n          \"RailDispatchComposite: Error occurred on getLookUpData\",\r\n          error\r\n        );\r\n      });\r\n  };\r\n\r\n  getTerminalsList(shareholder) {\r\n    try {\r\n      if (shareholder !== null && shareholder !== \"\") {\r\n        axios(\r\n          RestAPIs.GetTerminals,\r\n          Utilities.getAuthenticationObjectforPost(\r\n            [shareholder],\r\n            this.props.tokenDetails.tokenInfo\r\n          )\r\n        ).then((response) => {\r\n          if (response.data.IsSuccess) {\r\n            this.setState({ terminalCodes: response.data.EntityResult });\r\n          }\r\n        });\r\n      } else {\r\n        this.setState({ terminalCodes: [] });\r\n      }\r\n    } catch (error) {\r\n      console.log(\r\n        \"RailDispatchComposite: Error occurred on getTerminalsList\",\r\n        error\r\n      );\r\n    }\r\n  }\r\n\r\n  getRailDispatchList(shareholder) {\r\n    try {\r\n      this.setState({ isReadyToRender: false });\r\n      const obj = {\r\n        ShareHolderCode: shareholder,\r\n        TransportationType: Constants.TransportationType.RAIL,\r\n        ShipmentFrom: null,\r\n        ScheduledFrom: null,\r\n        ScheduledTo: null,\r\n        ShipmentTypeCode: null,\r\n      };\r\n      if (\r\n        !this.props.shipmentSourceFromSummary &&\r\n        this.props.shipmentSource !== undefined\r\n      ) {\r\n        obj.ShipmentFrom = this.props.shipmentSource;\r\n        obj.ShipmentType = Constants.shipmentTypeOptions.All;\r\n        obj.ShipmentTypeCode = this.props.shipmentSourceCode;\r\n      } else {\r\n        const fromDate = new Date(this.state.fromDate);\r\n        const toDate = new Date(this.state.toDate);\r\n        fromDate.setHours(0, 0, 0);\r\n        toDate.setHours(23, 59, 59);\r\n        obj.ScheduledFrom = fromDate;\r\n        obj.ScheduledTo = toDate;\r\n        obj.ShipmentType = Constants.shipmentTypeOptions.All;\r\n        obj.ShipmentFrom = Constants.shipmentFrom.All;\r\n      }\r\n\r\n      axios(\r\n        RestAPIs.GetRailDispatchListForRole,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          obj,\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          const result = response.data;\r\n          if (result.IsSuccess === true) {\r\n            this.setState(\r\n              { data: result.EntityResult, isReadyToRender: true },\r\n              () => {\r\n                if (this.state.selectedItems.length === 1) {\r\n                  const selectedItem = this.state.selectedItems[0];\r\n                  const updatedSelectedItem = result.EntityResult.Table.filter(\r\n                    (item) => {\r\n                      return item.Common_Code === selectedItem.Common_Code;\r\n                    }\r\n                  );\r\n\r\n                  let { operationsVisibility, activityInfo } = { ...this.state };\r\n\r\n                  let dispatchDeleteInfo = activityInfo.filter((item) => {\r\n                    return (\r\n                      item.ActivityCode ===\r\n                      Constants.ShipmentActivityInfo.RAILDISPATCH_ENABLE_DELETEPLAN &&\r\n                      item.ActionTypeCode === Constants.ActionTypeCode.CHECK\r\n                    );\r\n                  });\r\n\r\n                  var dispatchDeleteStates = [];\r\n\r\n                  if (\r\n                    dispatchDeleteInfo !== undefined &&\r\n                    dispatchDeleteInfo.length > 0\r\n                  )\r\n                    dispatchDeleteStates =\r\n                      dispatchDeleteInfo[0].ShipmentStates;\r\n\r\n                  operationsVisibility.delete = this.props.userDetails\r\n                    .EntityResult.IsWebPortalUser\r\n                    ? false\r\n                    : dispatchDeleteStates.indexOf(\r\n                      updatedSelectedItem[0].ViewRailDispatchDetails_ShipmentStatus.toUpperCase()\r\n                    ) > -1 &&\r\n                    Utilities.isInFunction(\r\n                      this.props.userDetails.EntityResult.FunctionsList,\r\n                      functionGroups.remove,\r\n                      fnRailDispatch\r\n                    );\r\n\r\n                  if (this.state.isDetails) {\r\n                    this.setState({\r\n                      selectedItems: updatedSelectedItem,\r\n                      selectedRow: updatedSelectedItem[0],\r\n                      operationsVisibility\r\n                    });\r\n                  } else {\r\n                    this.getRailDispatchStatusOperation(\r\n                      updatedSelectedItem[0].Common_Code,\r\n                      updatedSelectedItem[0]\r\n                        .ViewRailDispatchDetails_ShipmentStatus,\r\n                      updatedSelectedItem[0]\r\n                    );\r\n                    this.setState({\r\n                      selectedItems: updatedSelectedItem,\r\n                      operationsVisibility\r\n                    });\r\n                  }\r\n                }\r\n              }\r\n            );\r\n          } else {\r\n            this.setState({ data: [], isReadyToRender: true });\r\n            console.log(\r\n              \"Error in GetRailDispatchListForRole: \",\r\n              result.ErrorList\r\n            );\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          this.setState({ data: [], isReadyToRender: true });\r\n          console.log(\"Error while getting RailDispatch List: \", error);\r\n        });\r\n    } catch (error) {\r\n      this.setState({ isReadyToRender: true });\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  handleAdd = () => {\r\n    try {\r\n      const operationsVisibility = lodash.cloneDeep(\r\n        this.state.operationsVisibility\r\n      );\r\n      operationsVisibility.delete = false;\r\n      operationsVisibility.add = false;\r\n      this.setState({\r\n        isDetails: true,\r\n        selectedItems: [],\r\n        selectedRow: {},\r\n        operationsVisibility,\r\n        isDirectOpenSubPage: false,\r\n        isReadyToShowOperation: false,\r\n        isDisplayRightPane: false,\r\n        drawerStatus: false,\r\n      });\r\n      this.setRightPaneDisplay(true);\r\n      if (this.props.shipmentSource !== undefined)\r\n        this.props.isShowBackButton(false);\r\n    } catch (error) {\r\n      console.log(\"RailDispatchComposite: Error occurred on handleAdd\");\r\n    }\r\n  };\r\n\r\n  handleDelete = () => {\r\n    this.handleAuthenticationClose();\r\n    try {\r\n      const operationsVisibility = lodash.cloneDeep(\r\n        this.state.operationsVisibility\r\n      );\r\n      operationsVisibility.delete = false;\r\n      this.setState({ operationsVisibility });\r\n      const deleteRailDispatchKeys = [];\r\n      for (let item of this.state.selectedItems) {\r\n        deleteRailDispatchKeys.push({\r\n          ShareHolderCode: this.state.selectedShareholder,\r\n          KeyCodes: [\r\n            { Key: KeyCodes.railDispatchCode, Value: item.Common_Code },\r\n          ],\r\n        });\r\n      }\r\n\r\n      axios(\r\n        RestAPIs.DeleteRailDispatch,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          deleteRailDispatchKeys,\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          const result = response.data;\r\n          let isRefreshDataRequire = result.IsSuccess;\r\n          if (\r\n            result.ResultDataList !== undefined &&\r\n            result.ResultDataList !== null\r\n          ) {\r\n            const failedResultsCount = result.ResultDataList.filter((res) => {\r\n              return !res.IsSuccess;\r\n            }).length;\r\n            if (failedResultsCount === result.ResultDataList.length) {\r\n              isRefreshDataRequire = false;\r\n            } else {\r\n              isRefreshDataRequire = true;\r\n            }\r\n          }\r\n\r\n          const notification = Utilities.convertResultsDatatoNotification(\r\n            result,\r\n            \"Shipment_DeletionStatus\",\r\n            [\"RailDispatchCode\"]\r\n          );\r\n\r\n          if (\r\n            result.ErrorList !== null &&\r\n            result.ErrorList !== undefined &&\r\n            result.ErrorList.length > 0 &&\r\n            notification.messageResultDetails.length === 0\r\n          ) {\r\n            notification.message =\r\n              result.ErrorList[0] === \"ERRMSG_EXCEPTION_IN_WEBAPI\"\r\n                ? \"CannotDeleteRailTransaction\"\r\n                : result.ErrorList[0];\r\n            notification.messageType = result.IsSuccess\r\n              ? \"success\"\r\n              : \"critical\"; //TODO:Localize\r\n          }\r\n\r\n          if (isRefreshDataRequire) {\r\n            this.setState({ isReadyToRender: false });\r\n            this.getRailDispatchList(this.state.selectedShareholder);\r\n            this.getKPIList();\r\n            operationsVisibility.delete = false;\r\n            this.setState({\r\n              selectedItems: [],\r\n              operationsVisibility,\r\n              selectedRow: {},\r\n              isReadyToShowOperation: false,\r\n            });\r\n          }\r\n          console.log(notification);\r\n          notification.messageResultDetails.forEach((messageResult) => {\r\n            if (messageResult.keyFields.length > 0) {\r\n              messageResult.keyFields[0] =\r\n                \"RailDispatchPlanDetail_DispatchCode\";\r\n            }\r\n          });\r\n          this.handleNotify(notification);\r\n        })\r\n        .catch((error) => {\r\n          throw error;\r\n        });\r\n    } catch (error) {\r\n      console.log(\"RailDispatchComposite: Error occurred on handleDelete\");\r\n    }\r\n  };\r\n\r\n  handleRangeSelect = ({ to, from }) => {\r\n    if (to !== undefined) this.setState({ toDate: to });\r\n    if (from !== undefined) this.setState({ fromDate: from });\r\n  };\r\n\r\n  handleDateTextChange = (value, error) => {\r\n    if (value === \"\")\r\n      this.setState({ dateError: \"\", toDate: \"\", fromDate: \"\" });\r\n    if (error !== null && error !== \"\")\r\n      this.setState({\r\n        dateError: \"Common_InvalidDate\",\r\n        toDate: \"\",\r\n        fromDate: \"\",\r\n      });\r\n    else {\r\n      this.setState({ dateError: \"\", toDate: value.to, fromDate: value.from });\r\n    }\r\n  };\r\n\r\n  handleLoadOrders = () => {\r\n    const error = Utilities.validateDateRange(\r\n      this.state.toDate,\r\n      this.state.fromDate\r\n    );\r\n\r\n    if (error !== \"\") {\r\n      this.setState({ dateError: error });\r\n    } else {\r\n      this.setState({ dateError: \"\" });\r\n      this.getRailDispatchList(this.state.selectedShareholder);\r\n    }\r\n  };\r\n\r\n  handleBack = () => {\r\n    try {\r\n      if (\r\n        this.props.shipmentSource !== undefined &&\r\n        this.props.shipmentSourceFromSummary\r\n      ) {\r\n        let operationsVisibility = { ...this.state.operationsVisibility };\r\n        operationsVisibility.add = Utilities.isInFunction(\r\n          this.props.userDetails.EntityResult.FunctionsList,\r\n          functionGroups.add,\r\n          fnRailDispatch\r\n        );\r\n        operationsVisibility.shareholder = true;\r\n        this.setState({\r\n          isDetails: false,\r\n          selectedRow: {},\r\n          selectedItems: [],\r\n          operationsVisibility,\r\n          isReadyToShowOperation: false,\r\n          drawerStatus: false,\r\n          isGoBackToSource: true,\r\n          isReadyToRender: false,\r\n        });\r\n      }\r\n      const operationsVisibility = lodash.cloneDeep(\r\n        this.state.operationsVisibility\r\n      );\r\n      operationsVisibility.add = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.add,\r\n        fnRailDispatch\r\n      );\r\n      operationsVisibility.delete = false;\r\n      //operationsVisibility.shareholder = true;\r\n      this.setRightPaneDisplay(false);\r\n      this.setState({\r\n        isDetails: false,\r\n        selectedRow: {},\r\n        selectedItems: [],\r\n        operationsVisibility,\r\n        isReadyToShowOperation: false,\r\n        drawerStatus: false,\r\n        isReadyToRender: false,\r\n      });\r\n      this.getRailDispatchList(this.state.selectedShareholder);\r\n      this.getKPIList();\r\n      this.props.isShowBackButton(true);\r\n    } catch (error) {\r\n      console.log(\"RailDispatchComposite: Error occurred on Back click\", error);\r\n    }\r\n  };\r\n\r\n  handleSubPageBack = () => {\r\n    try {\r\n      this.setRightPaneDisplay(true);\r\n      if (this.state.isDirectOpenSubPage) {\r\n        const operationsVisibility = lodash.cloneDeep(\r\n          this.state.operationsVisibility\r\n        );\r\n        operationsVisibility.add = Utilities.isInFunction(\r\n          this.props.userDetails.EntityResult.FunctionsList,\r\n          functionGroups.add,\r\n          fnRailDispatch\r\n        );\r\n        //operationsVisibility.delete = false;\r\n        //operationsVisibility.shareholder = true;\r\n        this.setState({\r\n          isDetails: false,\r\n          selectedRow: {},\r\n          operationsVisibility,\r\n          subPageName: \"\",\r\n          isDirectOpenSubPage: false,\r\n          isReadyToRender: false,\r\n        });\r\n        this.getRailDispatchList(this.state.selectedShareholder);\r\n        if (this.props.shipmentSource !== undefined)\r\n          this.props.isShowBackButton(true);\r\n      } else {\r\n        this.setState({\r\n          subPageName: \"\",\r\n        });\r\n        this.handleRowClick(this.state.selectedItems[0]);\r\n      }\r\n    } catch (error) {\r\n      console.log(\"RailDispatchComposite: Error occurred on Back click\", error);\r\n    }\r\n  };\r\n\r\n  handleRowClick = (item, isLoadOperaton = true, isDisplayDetails = false) => {\r\n    try {\r\n      var { operationsVisibility, activityInfo } = { ... this.state };\r\n\r\n      operationsVisibility.add = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.add,\r\n        fnRailDispatch\r\n      );\r\n\r\n      let dispatchDeleteInfo = activityInfo.filter((item) => {\r\n        return (\r\n          item.ActivityCode ===\r\n          Constants.ShipmentActivityInfo.RAILDISPATCH_ENABLE_DELETEPLAN &&\r\n          item.ActionTypeCode === Constants.ActionTypeCode.CHECK\r\n        );\r\n      });\r\n\r\n      var dispatchDeleteStates = [];\r\n\r\n      if (\r\n        dispatchDeleteInfo !== undefined &&\r\n        dispatchDeleteInfo.length > 0\r\n      )\r\n        dispatchDeleteStates =\r\n          dispatchDeleteInfo[0].ShipmentStates;\r\n\r\n      operationsVisibility.delete = this.props.userDetails\r\n        .EntityResult.IsWebPortalUser\r\n        ? false\r\n        : dispatchDeleteStates.indexOf(\r\n          item.ViewRailDispatchDetails_ShipmentStatus.toUpperCase()\r\n        ) > -1 &&\r\n        Utilities.isInFunction(\r\n          this.props.userDetails.EntityResult.FunctionsList,\r\n          functionGroups.remove,\r\n          fnRailDispatch\r\n        );\r\n\r\n      // operationsVisibility.delete =\r\n      //   item.ViewRailDispatchDetails_ShipmentStatus ===\r\n      //     Constants.Shipment_Status.READY &&\r\n      //   Utilities.isInFunction(\r\n      //     this.props.userDetails.EntityResult.FunctionsList,\r\n      //     functionGroups.remove,\r\n      //     fnRailDispatch\r\n      //   );\r\n      if (isLoadOperaton) {\r\n        this.getRailDispatchStatusOperation(\r\n          item.Common_Code,\r\n          item.ViewRailDispatchDetails_ShipmentStatus,\r\n          item\r\n        );\r\n      }\r\n      // if (\r\n      //   this.state.selectedItems.length === 1 &&\r\n      //   this.state.selectedItems[0].Common_Code === item.Common_Code &&\r\n      //   this.state.selectedItems[0].ViewRailDispatchDetails_ShipmentStatus ===\r\n      //     item.ViewRailDispatchDetails_ShipmentStatus\r\n      // ) {\r\n      // } else {\r\n\r\n      // }\r\n      this.setRightPaneDisplay(true);\r\n      this.setState({\r\n        isDetails: true,\r\n        selectedRow: item,\r\n        selectedItems: [item],\r\n        operationsVisibility,\r\n        isDisplayDetails,\r\n        drawerStatus: false,\r\n      });\r\n      if (this.props.shipmentSource !== undefined)\r\n        this.props.isShowBackButton(false);\r\n    } catch (error) {\r\n      console.log(\r\n        \"RailDispatchComposite: Error occurred on handleRowClick\",\r\n        error\r\n      );\r\n    }\r\n  };\r\n\r\n  handleOperationClick = (operation) => {\r\n    let operationsVisibility = this.state.operationsVisibility;\r\n\r\n    switch (operation) {\r\n      case \"ViewRailDispatch_AuthorizeToLoad\":\r\n        this.authorizeToLoadClick();\r\n        break;\r\n      case \"ViewRailDispatch_CloseDispatch\":\r\n        this.handleConfirmCloseDispatch(\r\n          this.state.selectedItems[0].Common_Code,\r\n          this.state.selectedItems[0].ViewRailDispatchDetails_ShipmentStatus\r\n        );\r\n        break;\r\n      case \"ViewRailDispatch_ManualEntry\":\r\n        this.setState({\r\n          subPageName: \"RailDispatchCompartmentManualEntryDetails\",\r\n        });\r\n        if (!this.state.isDetails) {\r\n          this.handleRowClick(this.state.selectedItems[0], false);\r\n          this.setState({ isDirectOpenSubPage: true });\r\n        }\r\n        operationsVisibility.delete = false;\r\n        operationsVisibility.add = false;\r\n        break;\r\n      case \"ViewRailDispatch_PrintBOL\":\r\n        this.printBOLClick();\r\n        break;\r\n      case \"ViewRailDispatch_PrintFAN\":\r\n        this.printFANClick();\r\n        break;\r\n      case \"ViewRailDispatch_RecordWeight\":\r\n        this.setState({ subPageName: \"RailDispatchRecordWeightDetails\" });\r\n        if (!this.state.isDetails) {\r\n          this.handleRowClick(this.state.selectedItems[0], false);\r\n          this.setState({ isDirectOpenSubPage: true });\r\n        }\r\n        operationsVisibility.delete = false;\r\n        operationsVisibility.add = false;\r\n        break;\r\n      case \"ViewRailDispatch_ViewAuditTrail\":\r\n        this.setState({ subPageName: \"RailDispatchViewAuditTrailDetails\" });\r\n        if (!this.state.isDetails) {\r\n          this.handleRowClick(this.state.selectedItems[0], false);\r\n          this.setState({ isDirectOpenSubPage: true });\r\n        }\r\n        operationsVisibility.delete = false;\r\n        operationsVisibility.add = false;\r\n        break;\r\n      case \"ViewRailDispatch_ViewBOL\":\r\n        this.viewBOLClick();\r\n        break;\r\n      case \"ViewRailDispatch_ViewLoadingDetails\":\r\n        this.setState({ subPageName: \"RailDispatchViewLoadingDetailsDetails\" });\r\n        if (!this.state.isDetails) {\r\n          this.handleRowClick(this.state.selectedItems[0], false);\r\n          this.setState({ isDirectOpenSubPage: true });\r\n        }\r\n        operationsVisibility.delete = false;\r\n        operationsVisibility.add = false;\r\n        break;\r\n      case \"ViewRailDispatch_RailWagonAssignment\":\r\n        this.setState({\r\n          subPageName: \"RailDispatchRailWagonAssignmentDetails\",\r\n        });\r\n        if (!this.state.isDetails) {\r\n          this.handleRowClick(this.state.selectedItems[0], false);\r\n          this.setState({ isDirectOpenSubPage: true });\r\n        }\r\n        operationsVisibility.delete = false;\r\n        operationsVisibility.add = false;\r\n        break;\r\n      case \"ViewRailDispatch_ProductAssignment\":\r\n        this.setState({ subPageName: \"RailDispatchProductAssignmentDetails\" });\r\n        if (!this.state.isDetails) {\r\n          this.handleRowClick(this.state.selectedItems[0], false);\r\n          this.setState({ isDirectOpenSubPage: true });\r\n        }\r\n        operationsVisibility.delete = false;\r\n        operationsVisibility.add = false;\r\n        break;\r\n      case \"ViewRailDispatch_LoadSpotAssignment\":\r\n        this.setState({ subPageName: \"RailDispatchLoadSpotAssignmentDetails\" });\r\n        if (!this.state.isDetails) {\r\n          this.handleRowClick(this.state.selectedItems[0], false);\r\n          this.setState({ isDirectOpenSubPage: true });\r\n        }\r\n        operationsVisibility.delete = false;\r\n        operationsVisibility.add = false;\r\n        break;\r\n      case \"ViewRailDispatch_BSIOutbound\":\r\n        this.handleBSIOutbound(this.state.selectedItems[0].Common_Code);\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n    this.setState({ operationsVisibility });\r\n  };\r\n\r\n  handleSelection = (items) => {\r\n    try {\r\n      const operationsVisibility = lodash.cloneDeep(\r\n        this.state.operationsVisibility\r\n      );\r\n\r\n      var { drawerStatus, activityInfo } = { ...this.state };\r\n\r\n      // let railDispatchDeleteStates = lodash.cloneDeep(\r\n      //   this.state.railDispatchDeleteStates\r\n      // );\r\n\r\n      // const isReady =\r\n      //   items.findIndex(\r\n      //     (x) =>\r\n      //       railDispatchDeleteStates.indexOf(\r\n      //         x.ViewRailDispatchDetails_ShipmentStatus.toUpperCase()\r\n      //       ) < 0\r\n      //   ) >= 0\r\n      //     ? false\r\n      //     : true;\r\n\r\n      // operationsVisibility.delete =\r\n      //   isReady &&\r\n      //   items.length > 0 &&\r\n      //   Utilities.isInFunction(\r\n      //     this.props.userDetails.EntityResult.FunctionsList,\r\n      //     functionGroups.remove,\r\n      //     fnRailDispatch\r\n      //   );\r\n\r\n      let dispatchDeleteInfo = activityInfo.filter((item) => {\r\n        return (\r\n          item.ActivityCode ===\r\n          Constants.ShipmentActivityInfo.RAILDISPATCH_ENABLE_DELETEPLAN &&\r\n          item.ActionTypeCode === Constants.ActionTypeCode.CHECK\r\n        );\r\n      });\r\n\r\n      var dispatchDeleteStates = [];\r\n\r\n      if (\r\n        dispatchDeleteInfo !== undefined &&\r\n        dispatchDeleteInfo.length > 0\r\n      )\r\n        dispatchDeleteStates =\r\n          dispatchDeleteInfo[0].ShipmentStates;\r\n\r\n      let isReady =\r\n        items.findIndex(\r\n          (x) =>\r\n            dispatchDeleteStates.indexOf(\r\n              x.ViewRailDispatchDetails_ShipmentStatus.toUpperCase()\r\n            ) < 0\r\n        ) >= 0\r\n          ? false\r\n          : true;\r\n\r\n      operationsVisibility.delete = this.props.userDetails\r\n        .EntityResult.IsWebPortalUser\r\n        ? false\r\n        : isReady &&\r\n        items.length > 0 &&\r\n        Utilities.isInFunction(\r\n          this.props.userDetails.EntityResult.FunctionsList,\r\n          functionGroups.remove,\r\n          fnRailDispatch\r\n        );\r\n\r\n      if (items.length !== 1) {\r\n        drawerStatus = true;\r\n      } else {\r\n        drawerStatus = false;\r\n      }\r\n\r\n      this.setState({\r\n        selectedItems: items,\r\n        operationsVisibility,\r\n        drawerStatus,\r\n      });\r\n\r\n      if (\r\n        items.length === 1\r\n        // this.props.userDetails.EntityResult.IsEnterpriseNode === false\r\n      ) {\r\n        this.setRightPaneDisplay(true);\r\n        this.getRailDispatchStatusOperation(\r\n          items[0].Common_Code,\r\n          items[0].ViewRailDispatchDetails_ShipmentStatus,\r\n          items[0]\r\n        );\r\n      } else {\r\n        this.setRightPaneDisplay(false);\r\n        this.setState({ isReadyToShowOperation: false });\r\n      }\r\n    } catch (error) {\r\n      console.log(\r\n        \"RailDispatchComposite: Error occurred on handleSelection\",\r\n        error\r\n      );\r\n    }\r\n  };\r\n\r\n  CheckRailDispatchDeleteAllowed() {\r\n    try {\r\n      axios(\r\n        RestAPIs.CheckRailDispatchDeleteAllowed,\r\n        Utilities.getAuthenticationObjectforGet(\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          if (response.data.IsSuccess) {\r\n            this.setState({\r\n              railDispatchDeleteStates: response.data.EntityResult,\r\n            });\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error while fetching delete states in Rail:\", error);\r\n        });\r\n    } catch (error) {\r\n      console.log(\"Error while fetching delete states in Rail:\", error);\r\n    }\r\n  }\r\n\r\n  handleUpdateStatusOperation = (railDispatch) => {\r\n    const item = {\r\n      Common_Code: railDispatch.DispatchCode,\r\n      ViewRailDispatchDetails_ShipmentStatus: railDispatch.DispatchStatus,\r\n      RailRouteConfigurationDetails_RailRouteCode: railDispatch.RouteCode,\r\n      ScheduledDate: railDispatch.ScheduledDate,\r\n      ViewRailDispatchList_LoadedDate: railDispatch.LoadEndTime,\r\n      AssociatedTerminals: railDispatch.TerminalCodes,\r\n      AcutalTerminalCode: railDispatch.ActualTerminalCode,\r\n    };\r\n    this.setState({ selectedItems: [item], selectedRow: item }, () => {\r\n      this.getRailDispatchStatusOperation(\r\n        railDispatch.DispatchCode,\r\n        railDispatch.DispatchStatus,\r\n        item\r\n      );\r\n    });\r\n  };\r\n\r\n  getRailDispatchStatusOperation(dispatchCode, dispatchStatus, item) {\r\n    this.setState({ isReadyToShowOperation: false });\r\n    this.getRailDispatchOperations(dispatchCode, dispatchStatus, item, () => {\r\n      this.getRailDispatchAllChangeStatus(dispatchCode, () => {\r\n        this.setState({ isReadyToShowOperation: true });\r\n      });\r\n    });\r\n  }\r\n\r\n  savedEvent = (data, saveType, notification) => {\r\n    try {\r\n      var { operationsVisibility, activityInfo } = { ...this.state };\r\n\r\n      let dispatchDeleteInfo = activityInfo.filter((item) => {\r\n        return (\r\n          item.ActivityCode ===\r\n          Constants.ShipmentActivityInfo.RAILDISPATCH_ENABLE_DELETEPLAN &&\r\n          item.ActionTypeCode === Constants.ActionTypeCode.CHECK\r\n        );\r\n      });\r\n\r\n      var dispatchDeleteStates = [];\r\n\r\n      if (\r\n        dispatchDeleteInfo !== undefined &&\r\n        dispatchDeleteInfo.length > 0\r\n      )\r\n        dispatchDeleteStates =\r\n          dispatchDeleteInfo[0].ShipmentStates;\r\n\r\n      if (notification.messageType === \"success\") {\r\n        operationsVisibility.add = Utilities.isInFunction(\r\n          this.props.userDetails.EntityResult.FunctionsList,\r\n          functionGroups.add,\r\n          fnRailDispatch\r\n        );\r\n        operationsVisibility.delete = this.props.userDetails\r\n          .EntityResult.IsWebPortalUser\r\n          ? false\r\n          : dispatchDeleteStates.indexOf(\r\n            data.DispatchStatus.toUpperCase()\r\n          ) > -1 &&\r\n          Utilities.isInFunction(\r\n            this.props.userDetails.EntityResult.FunctionsList,\r\n            functionGroups.remove,\r\n            fnRailDispatch\r\n          );\r\n        this.setState({ isDetailsModified: true, operationsVisibility });\r\n      }\r\n      if (notification.messageType === \"success\" && saveType === \"add\") {\r\n        const selectedItems = [\r\n          {\r\n            RailDispatchCode: data.Code,\r\n            Common_Shareholder: data.ShareholderCode,\r\n          },\r\n        ];\r\n        this.setState({\r\n          selectedItems,\r\n        });\r\n      }\r\n      this.handleNotify(notification);\r\n    } catch (error) {\r\n      console.log(\"RailDispatchComposite: Error occurred on savedEvent\", error);\r\n    }\r\n  };\r\n\r\n  handleNotify(notification) {\r\n    try {\r\n      toast(\r\n        <ErrorBoundary>\r\n          <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n        </ErrorBoundary>,\r\n        {\r\n          autoClose: notification.messageType === \"success\" ? 10000 : false,\r\n        }\r\n      );\r\n    } catch (error) {\r\n      console.log(\r\n        \"RailDispatchComposite: Error occurred on handleNotify\",\r\n        error\r\n      );\r\n    }\r\n  }\r\n\r\n  handleShareholderSelectionChange = (shareholder) => {\r\n    try {\r\n      this.setState({ selectedShareholder: shareholder });\r\n      this.getRailDispatchList(shareholder);\r\n    } catch (error) {\r\n      console.log(\r\n        \"RailDispatchComposite: Error occurred on handleShareholderSelectionChange\",\r\n        error\r\n      );\r\n    }\r\n  };\r\n\r\n  getTransportationType() {\r\n    let transportationType = Constants.TransportationType.RAIL;\r\n    const { itemProps } = this.props.activeItem;\r\n    if (itemProps !== undefined && itemProps.transportationType !== undefined) {\r\n      transportationType = itemProps.transportationType;\r\n    }\r\n    return transportationType;\r\n  }\r\n\r\n  getRailDispatchOperations(dispatchCode, dispatchStatus, item, callBack) {\r\n    var localTerminalCode = item.AcutalTerminalCode;\r\n\r\n    if (localTerminalCode === null || localTerminalCode === undefined) {\r\n      if (this.state.selectedItems.length === 1) {\r\n        localTerminalCode = this.state.selectedItems[0].AcutalTerminalCode;\r\n      }\r\n    }\r\n    const obj = {\r\n      ShareHolderCode: this.props.userDetails.EntityResult.PrimaryShareholder,\r\n      KeyCodes: [\r\n        {\r\n          key: \"RailDispatchStatus\",\r\n          value: dispatchStatus,\r\n        },\r\n        {\r\n          key: \"DispatchCode\",\r\n          value: dispatchCode,\r\n        },\r\n      ],\r\n    };\r\n    axios(\r\n      RestAPIs.GetRailDispatchOperations,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        const result = response.data;\r\n        if (result.IsSuccess === true) {\r\n          const currentAccess = {\r\n            ViewRailDispatch_EditAccess: false,\r\n            ViewRailDispatch_DisableAdjustPlanQty: false,\r\n            ViewRailDispatch_DisableWagonForceClose: false,\r\n            ViewRailDispatch_Delete: false,\r\n            ViewRailDispatch_Update: false,\r\n          };\r\n          for (let key in currentAccess) {\r\n            if (result.EntityResult[key] !== undefined) {\r\n              currentAccess[key] = result.EntityResult[key];\r\n              if (\r\n                key !== \"ViewRailDispatch_Update\" &&\r\n                key !== \"ViewRailDispatch_Delete\"\r\n              )\r\n                delete result.EntityResult[key];\r\n            }\r\n          }\r\n\r\n          const operationOrder = [\r\n            \"ViewRailDispatch_Update\",\r\n            \"ViewRailDispatch_Delete\",\r\n            \"ViewRailDispatch_AuthorizeToLoad\",\r\n            \"ViewRailDispatch_PrintFAN\",\r\n            \"ViewRailDispatch_RecordWeight\",\r\n            \"ViewRailDispatch_RailWagonAssignment\",\r\n            \"ViewRailDispatch_ProductAssignment\",\r\n            \"ViewRailDispatch_LoadSpotAssignment\",\r\n            \"ViewRailDispatch_ManualEntry\",\r\n            \"ViewRailDispatch_ViewLoadingDetails\",\r\n            \"ViewRailDispatch_ViewAuditTrail\",\r\n            \"ViewRailDispatch_CloseDispatch\",\r\n            \"ViewRailDispatch_ViewBOL\",\r\n            \"ViewRailDispatch_PrintBOL\",\r\n          ];\r\n          const nextOperations = [];\r\n          for (let operation of operationOrder) {\r\n            if (\r\n              operation === \"ViewRailDispatch_Update\" ||\r\n              operation === \"ViewRailDispatch_Delete\"\r\n            ) {\r\n              let operationsVisibility = this.state.operationsVisibility;\r\n              if (operation === \"ViewRailDispatch_Update\") {\r\n                //operationsVisibility.modify=true;\r\n                currentAccess.ViewRailDispatch_Update =\r\n                  result.EntityResult[operation];\r\n              }\r\n              if (operation === \"ViewRailDispatch_Delete\") {\r\n                operationsVisibility.delete = result.EntityResult[operation];\r\n                currentAccess.ViewRailDispatch_Delete =\r\n                  result.EntityResult[operation];\r\n              }\r\n              this.setState({\r\n                operationsVisibility,\r\n              });\r\n              continue;\r\n            }\r\n            if (\r\n              dispatchStatus === Constants.Shipment_Status.CHECKED_IN &&\r\n              operation === \"ViewRailDispatch_ProductAssignment\"\r\n            ) {\r\n              continue;\r\n            } else if (\r\n              operation === \"ViewRailDispatch_RailWagonAssignment\" ||\r\n              operation === \"ViewRailDispatch_ProductAssignment\" ||\r\n              operation === \"ViewRailDispatch_LoadSpotAssignment\"\r\n            ) {\r\n              if (\r\n                !this.props.userDetails.EntityResult.IsEnterpriseNode &&\r\n                dispatchStatus !== \"READY\" &&\r\n                localTerminalCode === null\r\n              ) {\r\n                continue;\r\n              } else if (result.EntityResult[operation] === true) {\r\n                nextOperations.push(operation);\r\n              }\r\n            } else if (result.EntityResult[operation] === true) {\r\n              if (\r\n                operation === \"ViewRailDispatch_CloseDispatch\" ||\r\n                operation === \"ViewRailDispatch_RecordWeight\" ||\r\n                operation === \"ViewRailDispatch_ManualEntry\"\r\n              ) {\r\n                if (\r\n                  !this.props.userDetails.EntityResult.IsEnterpriseNode &&\r\n                  localTerminalCode !==\r\n                  this.props.userDetails.EntityResult.TerminalCode\r\n                ) {\r\n                  continue;\r\n                }\r\n              }\r\n\r\n              if (\r\n                operation === \"ViewRailDispatch_PrintFAN\" ||\r\n                operation === \"ViewRailDispatch_PrintBOL\"\r\n              ) {\r\n                if (this.props.userDetails.EntityResult.IsWebPortalUser) {\r\n                  continue;\r\n                }\r\n              }\r\n              nextOperations.push(operation);\r\n            }\r\n          }\r\n          if (\r\n            dispatchStatus === Constants.Shipment_Status.CLOSED &&\r\n            this.props.userDetails.EntityResult.IsBSIEnabledLicense &&\r\n            !this.props.userDetails.EntityResult.IsArchived &&\r\n            !this.props.userDetails.EntityResult.IsWebPortalUser\r\n          ) {\r\n            nextOperations.push(\"ViewRailDispatch_BSIOutbound\");\r\n          }\r\n\r\n          this.setState({ nextOperations, currentAccess });\r\n          callBack();\r\n        } else {\r\n          console.log(\"Error in getRailDispatchOperations: \", result.ErrorList);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while getRailDispatchOperations: \", error);\r\n      });\r\n  }\r\n\r\n  getRailDispatchAllChangeStatus(dispatchCode, callBack) {\r\n    const obj = {\r\n      ShareHolderCode: this.props.userDetails.EntityResult.PrimaryShareholder,\r\n      KeyCodes: [\r\n        {\r\n          key: \"DispatchCode\",\r\n          value: dispatchCode,\r\n        },\r\n      ],\r\n    };\r\n    axios(\r\n      RestAPIs.GetRailDispatchAllChangeStatus,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        const result = response.data;\r\n        if (result.IsSuccess === true) {\r\n          this.setState({\r\n            currentStatuses: result.EntityResult,\r\n            //lastStatus: result.EntityResult.pop(),\r\n          });\r\n          callBack();\r\n        } else {\r\n          console.log(\r\n            \"Error in getRailDispatchAllChangeStatus: \",\r\n            result.ErrorList\r\n          );\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while getRailDispatchAllChangeStatus: \", error);\r\n      });\r\n  }\r\n\r\n  authorizeToLoadClick = () => {\r\n    let showAuthorizeToLoadAuthenticationLayout =\r\n    this.props.userDetails.EntityResult.IsWebPortalUser !== true\r\n      ? true\r\n      : false;\r\n  \r\n    this.setState({ showAuthorizeToLoadAuthenticationLayout, }, () => {\r\n      if (showAuthorizeToLoadAuthenticationLayout === false) {\r\n        this.handleAuthorizeToLoad();\r\n      }})\r\n    }\r\n  \r\n\r\n    handleAuthorizeToLoad= () =>  {\r\n\r\n    this.handleAuthenticationClose();\r\n\r\n   let dispatchCode= this.state.selectedItems[0].Common_Code;\r\n   let dispatchStatus= this.state.selectedItems[0].ViewRailDispatchDetails_ShipmentStatus;\r\n   \r\n    const obj = {\r\n      DispatchCode: dispatchCode,\r\n      DispatchStatus: dispatchStatus,\r\n      TMWebApiRequest: {\r\n        ShareHolderCode: this.props.userDetails.EntityResult.PrimaryShareholder,\r\n        KeyCodes: [\r\n          {\r\n            key: \"RailDispatchCode\",\r\n            value: dispatchCode,\r\n          },\r\n        ],\r\n      },\r\n    };\r\n    const notification = {\r\n      messageType: \"critical\",\r\n      message: \"ViewRailDispatch_AuthorizeLoad_status\",\r\n      messageResultDetails: [\r\n        {\r\n          keyFields: [\"RailDispatchPlanDetail_DispatchCode\"],\r\n          keyValues: [dispatchCode],\r\n          isSuccess: false,\r\n          errorMessage: \"\",\r\n        },\r\n      ],\r\n    };\r\n    axios(\r\n      RestAPIs.RailDispatchAuthorizeToLoad,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        const result = response.data;\r\n        notification.messageType = result.IsSuccess ? \"success\" : \"critical\";\r\n        notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n        if (result.IsSuccess === true) {\r\n          const operationsVisibility = lodash.cloneDeep(\r\n            this.state.operationsVisibility\r\n          );\r\n          operationsVisibility.delete = false;\r\n          if (this.state.isDetails) {\r\n            const selectedRow = lodash.cloneDeep(this.state.selectedRow);\r\n            selectedRow.ViewRailDispatchDetails_ShipmentStatus =\r\n              Constants.Shipment_Status.CHECKED_IN;\r\n            this.setState({ selectedRow });\r\n          } else {\r\n            this.getRailDispatchList(this.state.selectedShareholder);\r\n          }\r\n          // setTimeout(() => {\r\n          //   this.getRailDispatchStatusOperation(\r\n          //     dispatchCode,\r\n          //     Constants.Shipment_Status.CHECKED_IN\r\n          //   );\r\n          // }, 700);\r\n          this.setState({ operationsVisibility });\r\n        } else {\r\n          notification.messageResultDetails[0].errorMessage =\r\n            result.ErrorList[0];\r\n          console.log(\"Error in handleAuthorizeToLoad: \", result.ErrorList);\r\n        }\r\n        this.handleNotify(notification);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while handleAuthorizeToLoad: \", error);\r\n      });\r\n  }\r\n\r\n  handleConfirmCloseDispatch = (dispatchCode, dispatchStatus) => {\r\n    const modalData = this.state.modalData;\r\n    modalData.closeDispatch.isOpen = true;\r\n    modalData.closeDispatch.data.dispatchCode = dispatchCode;\r\n    modalData.closeDispatch.data.dispatchStatus = dispatchStatus;\r\n    this.setState({ modalData });\r\n  };\r\n\r\n  handleCloseDispatchReasonChange = (reason) => {\r\n    const modalData = this.state.modalData;\r\n    modalData.closeDispatch.data.reason = reason;\r\n    this.setState({ modalData });\r\n  };\r\n\r\n  forceCloseRailDispatch = () => {\r\n    const modalData = lodash.cloneDeep(this.state.modalData);\r\n    if (modalData.closeDispatch.data.reason === \"\") {\r\n      modalData.closeDispatch.validationErrors.reason =\r\n        \"ViewShipment_MandatoryReason\";\r\n      this.setState({ modalData });\r\n      return;\r\n    } else {\r\n      modalData.closeDispatch.validationErrors.reason = \"\";\r\n    }\r\n    \r\n    let showCloseShipmentAuthenticationLayout =\r\n    this.props.userDetails.EntityResult.IsWebPortalUser !== true\r\n      ? true\r\n      : false;\r\n  \r\n    this.setState({ showCloseShipmentAuthenticationLayout, }, () => {\r\n      if (showCloseShipmentAuthenticationLayout === false) {\r\n        this.closeRailDispatch();\r\n      }})\r\n  };\r\n\r\n  closeRailDispatch= () =>\r\n  {\r\n    this.handleAuthenticationClose();\r\n     const modalData = lodash.cloneDeep(this.state.modalData);\r\n    const obj = {\r\n      ShareHolderCode: this.props.userDetails.EntityResult.PrimaryShareholder,\r\n      KeyCodes: [\r\n        {\r\n          key: \"RailDispatchCode\",\r\n          value: modalData.closeDispatch.data.dispatchCode,\r\n        },\r\n      ],\r\n      Entity: {\r\n        Reason: modalData.closeDispatch.data.reason,\r\n        DispatchCode: modalData.closeDispatch.data.dispatchCode,\r\n        DispatchStatus: modalData.closeDispatch.data.dispatchStatus,\r\n      },\r\n    };\r\n    const notification = {\r\n      messageType: \"critical\",\r\n      message: \"ViewRailDispatch_CloseDispatch_status\",\r\n      messageResultDetails: [\r\n        {\r\n          keyFields: [\"RailDispatchPlanDetail_DispatchCode\"],\r\n          keyValues: [modalData.closeDispatch.data.dispatchCode],\r\n          isSuccess: false,\r\n          errorMessage: \"\",\r\n        },\r\n      ],\r\n    };\r\n    axios(\r\n      RestAPIs.ForceCloseRailDispatch,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        const result = response.data;\r\n        modalData.closeDispatch.isOpen = false;\r\n        notification.messageType = result.IsSuccess ? \"success\" : \"critical\";\r\n        notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n        if (result.IsSuccess === true) {\r\n          if (this.state.isDetails) {\r\n            const selectedRow = lodash.cloneDeep(this.state.selectedRow);\r\n            selectedRow.ViewRailDispatchDetails_ShipmentStatus =\r\n              Constants.Shipment_Status.CLOSED;\r\n            this.setState({ selectedRow });\r\n          } else {\r\n            this.getRailDispatchList(this.state.selectedShareholder);\r\n          }\r\n          \r\n        } else {\r\n          notification.messageResultDetails[0].errorMessage =\r\n            result.ErrorList[0];\r\n          console.log(\"Error in forceCloseRailDispatch: \", result.ErrorList);\r\n        }\r\n        this.setState({ modalData });\r\n        this.handleNotify(notification);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while forceCloseRailDispatch: \", error);\r\n      });\r\n  }\r\n\r\n\r\n  printFANClick= () => {\r\n    let showFANAuthenticationLayout =\r\n    this.props.userDetails.EntityResult.IsWebPortalUser !== true\r\n      ? true\r\n      : false;\r\n  \r\n    this.setState({ showFANAuthenticationLayout, }, () => {\r\n      if (showFANAuthenticationLayout === false) {\r\n        this.handlePrintFAN();\r\n      }})\r\n     \r\n    }\r\n\r\n  handlePrintFAN= () =>{\r\n    this.handleAuthenticationClose();\r\n    let dispatchCode= this.state.selectedItems[0].Common_Code;\r\n    const obj = {\r\n      ShareHolderCode: this.props.userDetails.EntityResult.PrimaryShareholder,\r\n      KeyCodes: [\r\n        {\r\n          key: \"RailDispatchCode\",\r\n          value: dispatchCode,\r\n        },\r\n      ],\r\n    };\r\n    const notification = {\r\n      messageType: \"critical\",\r\n      message: \"ShipmentCompDetail_PrintStatus\",\r\n      messageResultDetails: [\r\n        {\r\n          keyFields: [\"RailDispatchPlanDetail_DispatchCode\"],\r\n          keyValues: [dispatchCode],\r\n          isSuccess: false,\r\n          errorMessage: \"\",\r\n        },\r\n      ],\r\n    };\r\n    axios(\r\n      RestAPIs.RailDispatchPrintFAN,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        const result = response.data;\r\n        notification.messageType = result.IsSuccess ? \"success\" : \"critical\";\r\n        notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n        if (result.IsSuccess !== true) {\r\n          notification.messageResultDetails[0].errorMessage =\r\n            result.ErrorList[0];\r\n          console.log(\"Error in handlePrintFAN: \", result.ErrorList);\r\n        }\r\n        this.handleNotify(notification);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while handlePrintFAN: \", error);\r\n      });\r\n  }\r\n\r\n  handleModalBack = () => {\r\n    this.setState({ showReport: false });\r\n  };\r\n  renderModal() {\r\n    let path = null;\r\n    if (this.props.userDetails.EntityResult.IsArchived) {\r\n      path = \"TM/\" + Constants.TMReportArchive + \"/RailBOL\";\r\n    } else {\r\n      path = \"TM/\" + Constants.TMReports + \"/RailBOL\";\r\n    }\r\n    let paramValues = {\r\n      Culture: this.props.userDetails.EntityResult.UICulture,\r\n      ShareholderCode: this.state.selectedShareholder,\r\n      RailDispatchCode:\r\n        this.state.selectedItems.length === 1\r\n          ? this.state.selectedItems[0].Common_Code\r\n          : this.state.selectedRow.Common_Code,\r\n    };\r\n\r\n    return (\r\n      <ReportDetails\r\n        showReport={this.state.showReport}\r\n        handleBack={this.handleModalBack}\r\n        handleModalClose={this.handleModalBack}\r\n        // proxyServerHost=\"http://epksr5115dit:3625/TMWebAPI/\"\r\n        proxyServerHost={RestAPIs.WebAPIURL}\r\n        reportServiceHost={this.reportServiceURI}\r\n        filePath={path}\r\n        parameters={paramValues}\r\n      />\r\n    );\r\n  }\r\n\r\n  viewBOLClick= () => {\r\n    let showViewBOLAuthenticationLayout =\r\n    this.props.userDetails.EntityResult.IsWebPortalUser !== true\r\n      ? true\r\n      : false;\r\n  \r\n    this.setState({ showViewBOLAuthenticationLayout, }, () => {\r\n      if (showViewBOLAuthenticationLayout === false) {\r\n        this.handleViewBOL();\r\n      }})\r\n     \r\n    }\r\n\r\n  handleViewBOL = () => {\r\n    this.handleAuthenticationClose();\r\n    if (this.reportServiceURI === undefined) {\r\n      axios(\r\n        RestAPIs.GetReportServiceURI,\r\n        Utilities.getAuthenticationObjectforGet(\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      ).then((response) => {\r\n        if (response.data.IsSuccess) {\r\n          this.reportServiceURI = response.data.EntityResult;\r\n          this.setState({ showReport: true });\r\n        }\r\n      });\r\n    } else {\r\n      this.setState({ showReport: true });\r\n    }\r\n  };\r\n\r\n\r\n  printBOLClick= () => {\r\n    let showPrintBOLAuthenticationLayout =\r\n    this.props.userDetails.EntityResult.IsWebPortalUser !== true\r\n      ? true\r\n      : false;\r\n  \r\n    this.setState({ showPrintBOLAuthenticationLayout, }, () => {\r\n      if (showPrintBOLAuthenticationLayout === false) {\r\n        this.handlePrintBOL();\r\n      }})\r\n     \r\n    }\r\n\r\n\r\n  handlePrintBOL= () => {\r\n    this.handleAuthenticationClose();\r\n    let dispatchCode=this.state.selectedItems[0].Common_Code;\r\n    const obj = {\r\n      ShareHolderCode: this.props.userDetails.EntityResult.PrimaryShareholder,\r\n      KeyCodes: [\r\n        {\r\n          key: \"RailDispatchCode\",\r\n          value: dispatchCode,\r\n        },\r\n      ],\r\n    };\r\n    const notification = {\r\n      messageType: \"critical\",\r\n      message: \"ShipmentCompDetail_PrintStatus\",\r\n      messageResultDetails: [\r\n        {\r\n          keyFields: [\"RailDispatchPlanDetail_DispatchCode\"],\r\n          keyValues: [dispatchCode],\r\n          isSuccess: false,\r\n          errorMessage: \"\",\r\n        },\r\n      ],\r\n    };\r\n    axios(\r\n      RestAPIs.RailDispatchPrintBOL,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        const result = response.data;\r\n        notification.messageType = result.IsSuccess ? \"success\" : \"critical\";\r\n        notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n        if (result.IsSuccess !== true) {\r\n          notification.messageResultDetails[0].errorMessage =\r\n            result.ErrorList[0];\r\n          console.log(\"Error in handlePrintBOL: \", result.ErrorList);\r\n        }\r\n        this.handleNotify(notification);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while handlePrintBOL: \", error);\r\n      });\r\n  }\r\n\r\n  handleBSIOutbound(dispatchCode) {\r\n    const obj = {\r\n      ShareHolderCode: this.props.userDetails.EntityResult.PrimaryShareholder,\r\n      KeyCodes: [\r\n        {\r\n          key: \"RailDispatchCode\",\r\n          value: dispatchCode,\r\n        },\r\n      ],\r\n    };\r\n    const notification = {\r\n      messageType: \"critical\",\r\n      message: \"ViewRailDispatch_BSIOutbound_status\",\r\n      messageResultDetails: [\r\n        {\r\n          keyFields: [\"RailDispatchPlanDetail_DispatchCode\"],\r\n          keyValues: [dispatchCode],\r\n          isSuccess: false,\r\n          errorMessage: \"\",\r\n        },\r\n      ],\r\n    };\r\n    axios(\r\n      RestAPIs.RailDispatchBSIOutbound,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        const result = response.data;\r\n        notification.messageType = result.IsSuccess ? \"success\" : \"critical\";\r\n        notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n        if (result.IsSuccess !== true) {\r\n          notification.messageResultDetails[0].errorMessage =\r\n            result.ErrorList[0];\r\n          console.log(\"Error in handleBSIOutbound: \", result.ErrorList);\r\n        }\r\n        this.handleNotify(notification);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while handleBSIOutbound: \", error);\r\n      });\r\n  }\r\n\r\n  setRightPaneDisplay = (isDisplayRightPane) => {\r\n    this.setState({ isDisplayRightPane });\r\n  };\r\n\r\n  handleDrawer = () => {\r\n    var drawerStatus = lodash.cloneDeep(this.state.drawerStatus);\r\n    this.setState({\r\n      drawerStatus: !drawerStatus,\r\n    });\r\n  };\r\n\r\n  //Get KPI for Rail Dispatch\r\n  getKPIList() {\r\n    let KPIView = Utilities.isInFunction(\r\n      this.props.userDetails.EntityResult.FunctionsList,\r\n      functionGroups.view,\r\n      fnKPIInformation\r\n    );\r\n    if (KPIView === true) {\r\n      var notification = {\r\n        message: \"\",\r\n        messageType: \"critical\",\r\n        messageResultDetails: [],\r\n      };\r\n      let objKPIRequestData = {\r\n        PageName: kpiRailShipmentList,\r\n        InputParameters: [],\r\n      };\r\n\r\n      axios(\r\n        RestAPIs.GetKPI,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          objKPIRequestData,\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          var result = response.data;\r\n          if (result.IsSuccess === true) {\r\n            this.setState({\r\n              railDispatchKPIList: result.EntityResult.ListKPIDetails,\r\n            });\r\n          } else {\r\n            this.setState({ railDispatchKPIList: [] });\r\n            console.log(\"Error in Rail Dispatch KPIList:\", result.ErrorList);\r\n            notification.messageResultDetails.push({\r\n              keyFields: [],\r\n              keyValues: [],\r\n              isSuccess: false,\r\n              errorMessage: result.ErrorList[0],\r\n            });\r\n          }\r\n          if (notification.messageResultDetails.length > 0) {\r\n            toast(\r\n              <ErrorBoundary>\r\n                <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n              </ErrorBoundary>,\r\n              {\r\n                autoClose:\r\n                  notification.messageType === \"success\" ? 10000 : false,\r\n              }\r\n            );\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error while getting Rail Dispatch KPIList:\", error);\r\n        });\r\n    }\r\n  }\r\n\r\n  getContractLookupValues() {\r\n    try {\r\n      let railDispatchAdd = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.add,\r\n        fnRailDispatch\r\n      );\r\n      if (railDispatchAdd) {\r\n        this.getLookUpData(\"Contract\", (entityResult) => {\r\n          this.setState({\r\n            isContractDisable:\r\n              entityResult[\"EnableContract\"] === \"0\" ? false : true,\r\n          });\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Error while getContractLookupValues: \", error);\r\n    }\r\n  }\r\n\r\n  authenticateDelete = () => {\r\n    try {\r\n      let showDeleteAuthenticationLayout =\r\n        this.props.userDetails.EntityResult.IsWebPortalUser !== true\r\n          ? true\r\n          : false;\r\n      this.setState({ showDeleteAuthenticationLayout });\r\n      if (showDeleteAuthenticationLayout === false) {\r\n        this.handleDelete();\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Marine Shipment Composite : Error in authenticateDelete\");\r\n    }\r\n  };\r\n\r\n \r\n\r\n  handleAuthenticationClose = () => {\r\n    \r\n    this.setState({\r\n      showDeleteAuthenticationLayout: false,\r\n      showAuthorizeToLoadAuthenticationLayout: false,\r\n      showCloseShipmentAuthenticationLayout: false,\r\n      showViewBOLAuthenticationLayout: false,\r\n      showPrintBOLAuthenticationLayout:false,\r\n      showFANAuthenticationLayout: false,\r\n    });\r\n  };\r\n\r\n  \r\n  getFunctionGroupName() {\r\n    if(this.state.showDeleteAuthenticationLayout )\r\n      return fnRailDispatch\r\n    else if(this.state.showCloseShipmentAuthenticationLayout)\r\n      return fnCloseRailDispatch\r\n    else if(this.state.showAuthorizeToLoadAuthenticationLayout)\r\n      return fnViewRailDispatch\r\n    else if(this.state.showViewBOLAuthenticationLayout || this.state.showPrintBOLAuthenticationLayout)\r\n      return fnPrintRailBOL\r\n      else if(this.state.showFANAuthenticationLayout)\r\n      return fnPrintRailFAN\r\n   };\r\n\r\n   getDeleteorEditMode() {\r\n    if(this.state.showDeleteAuthenticationLayout)\r\n      return functionGroups.remove;\r\n    else\r\n      return functionGroups.modify;\r\n   };\r\n\r\n   handleOperation()  {\r\n  \r\n    if(this.state.showDeleteAuthenticationLayout)\r\n      return this.handleDelete\r\n    else if(this.state.showAuthorizeToLoadAuthenticationLayout)\r\n      return this.handleAuthorizeToLoad\r\n    else if(this.state.showCloseShipmentAuthenticationLayout)\r\n      return this.closeRailDispatch\r\n    else if(this.state.showFANAuthenticationLayout)\r\n      return this.handlePrintFAN\r\n    else if(this.state.showViewBOLAuthenticationLayout)\r\n      return this.handleViewBOL;\r\n      else if(this.state.showPrintBOLAuthenticationLayout)\r\n      return this.handlePrintBOL;\r\n };\r\n\r\n  render() {\r\n    const modalData = this.state.modalData;\r\n    let fillPage = true;\r\n    const isDisplayRightPane =\r\n      this.state.selectedItems.length === 1 &&\r\n      // this.props.userDetails.EntityResult.IsEnterpriseNode === false &&\r\n      this.state.isDisplayRightPane;\r\n    let loadingClass = \"globalLoader\";\r\n\r\n    return (\r\n      <div>\r\n        {this.props.shipmentSource === undefined ||\r\n          this.props.shipmentSource === \"\" ||\r\n          this.props.shipmentSource === null ? (\r\n          <ErrorBoundary>\r\n            <TMUserActionsComposite\r\n              operationsVisibilty={this.state.operationsVisibility}\r\n              breadcrumbItem={this.props.activeItem}\r\n              onAdd={this.handleAdd}\r\n              onDelete={this.authenticateDelete}\r\n              shrVisible={false}\r\n              handleBreadCrumbClick={this.props.handleBreadCrumbClick}\r\n            />\r\n          </ErrorBoundary>\r\n        ) : (\r\n          <>\r\n            {this.state.isDetails ? (\r\n              \"\"\r\n            ) : (\r\n              <>\r\n                {!this.state.isGoBackToSource ? (\r\n                  <TranslationConsumer>\r\n                    {(t) => (\r\n                      <div className=\"headerContainer\">\r\n                        <div className=\"row headerSpacing\">\r\n                          <div className=\"col paddingHeaderItemLeft\">\r\n                            <span\r\n                              style={{ margin: \"auto\" }}\r\n                              className=\"headerLabel\"\r\n                            >\r\n                              {this.props.shipmentSourceCode +\r\n                                \" - \" +\r\n                                t(\"Dispatch_OtherSource\")}\r\n                            </span>\r\n                          </div>\r\n\r\n                          <div>\r\n                            <div className=\"headerItemRight\">\r\n                              <Button\r\n                                type=\"primary\"\r\n                                content={t(\"RailDispatchPlanList_AddNew\")}\r\n                                disabled={!this.state.isContractDisable}\r\n                                onClick={this.handleAdd}\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </TranslationConsumer>\r\n                ) : null}\r\n              </>\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        {this.state.isGoBackToSource ? (\r\n          <ErrorBoundary>\r\n            <ContractComposite\r\n              shipmentSource={this.props.shipmentSource}\r\n              activeItem={this.props.activeItem}\r\n            ></ContractComposite>\r\n          </ErrorBoundary>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n\r\n        {this.state.isDetails === true ? (\r\n          // <div\r\n          //   className={isDisplayRightPane ? \"showShipmentStatusRightPane\" : \"\"}\r\n          // >\r\n          <div\r\n            className={\r\n              isDisplayRightPane\r\n                ? !this.state.drawerStatus\r\n                  ? \"showShipmentStatusRightPane\"\r\n                  : \"drawerClose\"\r\n                : \"\"\r\n            }\r\n          >\r\n            <ErrorBoundary>\r\n              <RailDispatchDetailsComposite\r\n                Key=\"RailDispatchDetails\"\r\n                selectedRow={this.state.selectedRow}\r\n                onBack={this.handleBack}\r\n                onSubPageBack={this.handleSubPageBack}\r\n                onSaved={this.savedEvent}\r\n                terminalCodes={this.state.terminalCodes}\r\n                selectedShareholder={this.state.selectedShareholder}\r\n                getLookUpData={this.getLookUpData}\r\n                onNotify={this.handleNotify}\r\n                onUpdateStatusOperation={this.handleUpdateStatusOperation}\r\n                subPageName={this.state.subPageName}\r\n                isDirectOpenSubPage={this.state.isDirectOpenSubPage}\r\n                isDisplayDetails={this.state.isDisplayDetails}\r\n                currentAccess={this.state.currentAccess}\r\n                onSetRightPaneDisplay={this.setRightPaneDisplay}\r\n                enableHSEInspection={this.state.enableHSEInspection}\r\n                railLookUpData={this.state.railLookUpData}\r\n                shipmentSource={this.props.shipmentSource}\r\n                shipmentSourceCode={this.props.shipmentSourceCode}\r\n                shipmentSourceCompartmentItems={\r\n                  this.props.shipmentSourceCompartmentItems\r\n                }\r\n                shipmentSourceDetails={this.props.shipmentSourceDetails}\r\n                shipmentSourceFromSummary={this.props.shipmentSourceFromSummary}\r\n                selectedSourceCode={this.props.selectedSourceCode}\r\n              />\r\n            </ErrorBoundary>\r\n          </div>\r\n        ) : (\r\n          // {/* <div\r\n          //   className={\r\n          //     isDisplayRightPane ? \"showShipmentStatusRightPane\" : \"\"\r\n          //   }\r\n          // > */}\r\n          // <div className={isDisplayRightPane ? \"showShipmentStatusRightPane\" : \"\"}>\r\n          <div>\r\n            {this.props.shipmentSource === undefined ||\r\n              this.props.shipmentSource === \"\" ||\r\n              this.props.shipmentSource === null ? (\r\n              <ErrorBoundary>\r\n                <div className=\"kpiSummaryContainer\">\r\n                  <KPIDashboardLayout\r\n                    kpiList={this.state.railDispatchKPIList}\r\n                    pageName=\"RailDispatch\"\r\n                  ></KPIDashboardLayout>\r\n                </div>\r\n              </ErrorBoundary>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            <div\r\n              className={\r\n                isDisplayRightPane\r\n                  ? !this.state.drawerStatus\r\n                    ? \"showShipmentStatusRightPane\"\r\n                    : \"drawerClose\"\r\n                  : \"\"\r\n              }\r\n            >\r\n              {this.props.shipmentSourceFromSummary === undefined ||\r\n                this.props.shipmentSourceFromSummary === \"\" ||\r\n                this.props.shipmentSourceFromSummary === null ? (\r\n                <div>\r\n                  {this.props.shipmentSource === undefined ? (\r\n                    <ErrorBoundary>\r\n                      <TMTransactionFilters\r\n                        dateRange={{\r\n                          from: this.state.fromDate,\r\n                          to: this.state.toDate,\r\n                        }}\r\n                        dateError={this.state.dateError}\r\n                        handleDateTextChange={this.handleDateTextChange}\r\n                        handleRangeSelect={this.handleRangeSelect}\r\n                        handleLoadOrders={this.handleLoadOrders}\r\n                        filterText=\"LoadShipments\"\r\n                      />\r\n                    </ErrorBoundary>\r\n                  ) : null}\r\n\r\n                  {this.state.isReadyToRender ? (\r\n                    <ErrorBoundary>\r\n                      <div\r\n                        className={\r\n                          fillPage === true ? \"compositeTransactionList\" : \"\"\r\n                        }\r\n                      >\r\n                        <RailDispatchSummaryPageComposite\r\n                          tableData={this.state.data.Table}\r\n                          columnDetails={this.state.data.Column}\r\n                          pageSize={\r\n                            this.props.userDetails.EntityResult.PageAttibutes\r\n                              .WebPortalListPageSize\r\n                          }\r\n                          exportRequired={true}\r\n                          exportFileName=\"RailDispatchList\"\r\n                          columnPickerRequired={true}\r\n                          terminalsToShow={\r\n                            this.props.userDetails.EntityResult.PageAttibutes\r\n                              .NoOfTerminalsToShow\r\n                          }\r\n                          selectionRequired={true}\r\n                          columnGroupingRequired={true}\r\n                          onSelectionChange={this.handleSelection}\r\n                          onRowClick={this.handleRowClick}\r\n                          parentComponent={this.componentName}\r\n                        />\r\n                      </div>\r\n                    </ErrorBoundary>\r\n                  ) : (\r\n                    <LoadingPage\r\n                      loadingClass={loadingClass}\r\n                      message=\"\"\r\n                    ></LoadingPage>\r\n                  )}\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n          // {/* </div> */}\r\n        )}\r\n\r\n        {isDisplayRightPane ? (\r\n          // <div className=\"showShipmentStatusLeftPane\">\r\n          <div\r\n            className={this.state.drawerStatus ? \"marineStatusLeftPane\" : \"\"}\r\n          >\r\n            {/* <RailDispatchSummaryOperations\r\n              selectedItem={this.state.selectedItems}\r\n              nextOperations={this.state.nextOperations}\r\n              handleDetailsPageClick={this.handleRowClick}\r\n              handleOperationButtonClick={this.handleOperationClick}\r\n              currentStatuses={this.state.currentStatuses}\r\n              lastStatus={this.state.lastStatus}\r\n              isDetails={this.state.isDetails}\r\n              isReadyToRender={this.state.isReadyToShowOperation}\r\n            /> */}\r\n            <TransactionSummaryOperations\r\n              selectedItem={this.state.selectedItems}\r\n              shipmentNextOperations={this.state.nextOperations}\r\n              handleDetailsPageClick={this.handleRowClick}\r\n              handleOperationButtonClick={this.handleOperationClick}\r\n              currentStatuses={this.state.currentStatuses}\r\n              isDetails={this.state.isDetails}\r\n              handleDrawer={this.handleDrawer}\r\n              isWebPortalUser={\r\n                this.props.userDetails.EntityResult.IsWebPortalUser\r\n              }\r\n              title={\"ViewAllShipment_Details\"}\r\n              unAllowedOperations={[]}\r\n              webPortalAllowedOperations={[\r\n                \"ViewRailDispatch_ViewLoadingDetails\",\r\n                \"ViewRailDispatch_ViewAuditTrail\",\r\n                \"ViewRailDispatch_ViewBOL\",\r\n              ]}\r\n            />\r\n          </div>\r\n        ) : null}\r\n\r\n        {this.state.showDeleteAuthenticationLayout  ||\r\n           this.state.showAuthorizeToLoadAuthenticationLayout ||\r\n           this.state.showCloseShipmentAuthenticationLayout ||\r\n           this.state.showViewBOLAuthenticationLayout ||\r\n           this.state.showPrintBOLAuthenticationLayout ||\r\n           this.state.showFANAuthenticationLayout \r\n          ? (\r\n          <UserAuthenticationLayout\r\n            Username={this.props.userDetails.EntityResult.UserName}\r\n            functionName={this.getDeleteorEditMode()}\r\n            functionGroup={this.getFunctionGroupName()}\r\n            handleClose={this.handleAuthenticationClose}\r\n            handleOperation={this.handleOperation()}\r\n          ></UserAuthenticationLayout>\r\n        ) : null}\r\n\r\n        {this.props.shipmentSource === undefined ? (\r\n          <ErrorBoundary>\r\n            <ToastContainer\r\n              hideProgressBar={true}\r\n              closeOnClick={false}\r\n              closeButton={true}\r\n              newestOnTop={true}\r\n              position=\"bottom-right\"\r\n              toastClassName=\"toast-notification-wrap\"\r\n            />\r\n          </ErrorBoundary>\r\n        ) : null}\r\n        {Object.keys(this.state.selectedRow).length > 0 ||\r\n          this.state.selectedItems.length === 1\r\n          ? this.renderModal()\r\n          : \"\"}\r\n\r\n        <ErrorBoundary>\r\n          <TranslationConsumer>\r\n            {(t) => (\r\n              <>\r\n                <Modal\r\n                  size=\"mini\"\r\n                  open={this.state.modalData.closeDispatch.isOpen}\r\n                  closeOnDimmerClick={false}\r\n                >\r\n                  <Modal.Content>\r\n                    <Input\r\n                      fluid\r\n                      label={t(\"ViewRailDispatchList_ForceCloseHeader\")}\r\n                      onChange={this.handleCloseDispatchReasonChange}\r\n                      error={t(\r\n                        this.state.modalData.closeDispatch.validationErrors\r\n                          .reason\r\n                      )}\r\n                      reserveSpace={false}\r\n                    />\r\n                  </Modal.Content>\r\n                  <Modal.Footer>\r\n                    <Button\r\n                      content={t(\"AccessCardInfo_Ok\")}\r\n                      onClick={this.forceCloseRailDispatch}\r\n                    />\r\n                    <Button\r\n                      content={t(\"AccessCardInfo_Cancel\")}\r\n                      onClick={() => {\r\n                        modalData.closeDispatch.isOpen = false;\r\n                        modalData.closeDispatch.data.reason = \"\";\r\n                        modalData.closeDispatch.validationErrors.reason = \"\";\r\n                        this.setState({ modalData });\r\n                      }}\r\n                    />\r\n                  </Modal.Footer>\r\n                </Modal>\r\n              </>\r\n            )}\r\n          </TranslationConsumer>\r\n        </ErrorBoundary>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    userDetails: state.getUserDetails.userDetails,\r\n    tokenDetails: state.getUserDetails.TokenAuth,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(RailDispatchComposite);\r\n\r\nRailDispatchComposite.propTypes = {\r\n  activeItem: PropTypes.object,\r\n  shipmentSource: PropTypes.number,\r\n  shipmentSourceCode: PropTypes.string,\r\n  selectedShareholder: PropTypes.string,\r\n  shipmentSourceCompartmentItems: PropTypes.array,\r\n  shipmentSourceDetails: PropTypes.object,\r\n  shipmentSourceFromSummary: PropTypes.bool,\r\n  shipmentType: PropTypes.string,\r\n  selectedSourceCode: PropTypes.array,\r\n};\r\n","import React from \"react\";\r\nimport WijmoGridComposite from \"../Common/WijmoGridComposite\";\r\n\r\nimport PropTypes from \"prop-types\";\r\n\r\nTruckShipmentSummaryPageComposite.propTypes = {\r\n  tableData: PropTypes.array.isRequired,\r\n  columnDetails: PropTypes.array.isRequired,\r\n  pageSize: PropTypes.number,\r\n  exportRequired:PropTypes.bool,\r\n  exportFileName:PropTypes.string,\r\n  columnPickerRequired:PropTypes.bool,\r\n  columnGroupingRequired:PropTypes.bool,\r\n  selectionRequired:PropTypes.bool,\r\n  terminalsToShow: PropTypes.number,\r\n  selectedItems: PropTypes.array.isRequired,\r\n  onSelectionChange: PropTypes.func.isRequired,\r\n  onRowClick: PropTypes.func.isRequired,\r\n  parentComponent:PropTypes.string,\r\n};\r\n\r\nTruckShipmentSummaryPageComposite.defaultProps = {\r\n  pageSize: 10,\r\n  terminalsToShow: 2,\r\n  tableData: [],\r\n  columnDetails: [],\r\n  selectedItems: [],\r\n};\r\nexport function TruckShipmentSummaryPageComposite({\r\n  tableData,\r\n  columnDetails,\r\n  pageSize,\r\n  exportRequired,\r\n  exportFileName,\r\n  columnPickerRequired,\r\n  columnGroupingRequired,\r\n  selectionRequired,\r\n  terminalsToShow,\r\n  selectedItems,\r\n  onSelectionChange,\r\n  onRowClick,\r\n  parentComponent,\r\n}) {\r\n  return (\r\n    <div>\r\n      <WijmoGridComposite\r\n      data={tableData}\r\n      columns={columnDetails}\r\n      rowsPerPage={pageSize}\r\n      exportRequired={exportRequired}\r\n      exportFileName={exportFileName}\r\n      columnPickerRequired={columnPickerRequired}\r\n      columnGroupingRequired={columnGroupingRequired}\r\n      selectionRequired={selectionRequired}\r\n      selectedItems={selectedItems}\r\n      onSelectionHandle={onSelectionChange}\r\n      onRowClick={onRowClick}\r\n      parentComponent={parentComponent}\r\n      terminalsToShow={terminalsToShow}\r\n    ></WijmoGridComposite>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { TruckShipmentSummaryPageComposite } from \"../Summary/TruckShipmentSummaryComposite\";\r\nimport TruckShipmentManualEntryDetailsComposite from \"../Details/TruckShipmentManualEntryDetailsComposite\";\r\nimport { TMUserActionsComposite } from \"../Common/TMUserActionsComposite\";\r\nimport ErrorBoundary from \"../../ErrorBoundary\";\r\nimport { LoadingPage } from \"../../UIBase/Common/LoadingPage\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"../../../CSS/styles.css\";\r\nimport {\r\n  functionGroups,\r\n  fnSBC,\r\n  fnSBP,\r\n  fnKPIInformation,\r\n  fnCloseShipment,\r\n  fnShipmentStatus,\r\n  fnPrintBOL,\r\n  fnPrintFAN,\r\n} from \"../../../JS/FunctionGroups\";\r\nimport * as Utilities from \"../../../JS/Utilities\";\r\nimport * as RestAPIs from \"../../../JS/RestApis\";\r\nimport * as Constants from \"../../../JS/Constants\";\r\nimport axios from \"axios\";\r\nimport NotifyEvent from \"../../../JS/NotifyEvent\";\r\nimport ReportDetails from \"../../UIBase/Details/ReportDetails\";\r\nimport * as KeyCodes from \"../../../JS/KeyCodes\";\r\nimport TransactionSummaryOperations from \"../Common/TransactionSummaryOperations\";\r\nimport { TMTransactionFilters } from \"../../UIBase/Common/TMTransactionFilters\";\r\n//import { emptyShipment } from \"../../../JS/DefaultEntities\";\r\nimport TruckShipmentDetailsComposite from \"../Details/TruckShipmentDetailsComposite\";\r\nimport TMDetailsHeader from \"../../UIBase/Common/TMDetailsHeader\";\r\nimport lodash from \"lodash\";\r\nimport { TranslationConsumer } from \"@scuf/localization\";\r\nimport { TruckShipmentViewAuditTrailDetails } from \"../../UIBase/Details/TruckShipmentViewAuditTrailDetails\";\r\nimport { TruckShipmentViewLoadingDetails } from \"../../UIBase/Details/TruckShipmentViewLoadingDetails\";\r\nimport KPIDashboardLayout from \"../Common/KPIDashboard/KPIDashboardLayout\";\r\nimport { kpiTruckShipmentList } from \"../../../JS/KPIPageName\";\r\nimport { shipmentStatusTimeAttributeEntity } from \"../../../JS/AttributeEntity\";\r\nimport {\r\n  Modal,\r\n  Button,\r\n  Select,\r\n  Input,\r\n  Checkbox,\r\n  VerticalMenu,\r\n  Popup,\r\n} from \"@scuf/common\";\r\nimport OrderComposite from \"./OrderComposite\";\r\nimport ContractComposite from \"./ContractComposite\";\r\nimport TruckShipmentSealDetailsComposite from \"../Details/TruckShipmentSealDetailsComposite\";\r\nimport UserAuthenticationLayout from \"../Common/UserAuthentication\";\r\nimport { DataTable } from \"@scuf/datatable\";\r\n\r\nclass TruckShipmentComposite extends Component {\r\n  state = {\r\n    shipment: {},\r\n    isDetails: false,\r\n    isReadyToRender: false,\r\n    isDetailsModified: \"false\",\r\n    operationsVisibilty: { add: true, delete: false, shareholder: true },\r\n    selectedRow: {},\r\n    selectedItems: [],\r\n    selectedShareholder:\r\n      this.props.selectedShareholder === undefined ||\r\n        this.props.selectedShareholder === null ||\r\n        this.props.selectedShareholder === \"\"\r\n        ? this.props.userDetails.EntityResult.PrimaryShareholder\r\n        : this.props.selectedShareholder,\r\n    popUpContent: [],\r\n    data: {},\r\n    terminalCodes: [],\r\n    fromDate: new Date(),\r\n    toDate: new Date(),\r\n    dateError: \"\",\r\n    shipmentNextOperations: [],\r\n    currentShipmentStatuses: [],\r\n    //lastStatus: \"\",\r\n    shipmentType: \"\",\r\n    isOperation: false,\r\n    isManualEntry: false,\r\n    isViewAuditTrail: false,\r\n    auditTrailList: [],\r\n    modAuditTrailList: [],\r\n    truckShipmentKPIList: [],\r\n    attributeMetaDataList: [],\r\n    isViewLoadingDetails: false,\r\n    modViewLoadingDetails: [],\r\n    loadingExpandedRows: [],\r\n    nonConfigColumns: [],\r\n    isSealCompartments: false,\r\n    sealCompartments: [],\r\n    isRecordWeight: false,\r\n    recordWeightList: [],\r\n    weighBridgeCode: \"\",\r\n    scadaValue: \"\",\r\n    allowOutofRangeTW: false,\r\n    isNotRevised: false,\r\n    staticLoadingDetails: [],\r\n    showReport: false,\r\n    isCloseShipment: false,\r\n    isVehicleCrippled: false,\r\n    reasonForClosure: \"\",\r\n    modCustomValues: {},\r\n    drawerStatus: false,\r\n    popUpOpen: false,\r\n    isGoBackToSource: false,\r\n    isContractDisable: false,\r\n    isOrderDisable: false,\r\n    activityInfo: [],\r\n    isLadenWeightValid: false,\r\n    ladenWeightError: \"\",\r\n    vehicleForRecordWeight: {},\r\n    showDeleteAuthenticationLayout: false,\r\n    showAuthorizeToLoadAuthenticationLayout: false,\r\n    showAllowToLoadAuthenticationLayout: false,\r\n    showCloseShipmentAuthenticationLayout: false,\r\n    showViewBOLAuthenticationLayout: false,\r\n    showPrintBOLAuthenticationLayout: false,\r\n    showFANAuthenticationLayout: false,\r\n    isAllocateBay: false,\r\n    bayData: [],\r\n    selectBay: \"\",\r\n    isDeAllocateBay: false,\r\n    ShipmentBay: \"\",\r\n  };\r\n\r\n  componentName = \"TruckShipmentComponent\";\r\n\r\n  populatePopupContents() {\r\n    let popUpContent = [...this.state.popUpContent];\r\n    let sbcfnAdd = Utilities.isInFunction(\r\n      this.props.userDetails.EntityResult.FunctionsList,\r\n      functionGroups.add,\r\n      fnSBC\r\n    );\r\n    let sbpfnAdd = Utilities.isInFunction(\r\n      this.props.userDetails.EntityResult.FunctionsList,\r\n      functionGroups.add,\r\n      fnSBP\r\n    );\r\n    if (sbcfnAdd) {\r\n      popUpContent.push({\r\n        fieldName: \"ShipmentByCompartment\",\r\n        fieldValue: \"ContractInfo_ShipByComp\",\r\n      });\r\n    }\r\n    if (sbpfnAdd) {\r\n      popUpContent.push({\r\n        fieldName: \"ShipmentByProduct\",\r\n        fieldValue: \"ContractInfo_ShipByProduct\",\r\n      });\r\n    }\r\n    const operationsVisibilty = { ...this.state.operationsVisibilty };\r\n    operationsVisibilty.add = popUpContent.length > 0;\r\n    this.setState({\r\n      popUpContent,\r\n      operationsVisibilty,\r\n    });\r\n  }\r\n\r\n  handleAdd = (itemName) => {\r\n    try {\r\n      let shipmentType = \"\";\r\n      if (itemName !== null) {\r\n        shipmentType = itemName;\r\n      } else {\r\n        shipmentType = this.state.popUpContent[0].fieldName;\r\n      }\r\n      const operationsVisibilty = { ...this.state.operationsVisibilty };\r\n      operationsVisibilty.shareholder = false;\r\n      operationsVisibilty.add = false;\r\n      this.setState({\r\n        isDetails: true,\r\n        isManualEntry: false,\r\n        isViewAuditTrail: false,\r\n        isViewLoadingDetails: false,\r\n        selectedRow: {},\r\n        operationsVisibilty,\r\n        shipmentType: shipmentType,\r\n      });\r\n\r\n      if (this.props.shipmentSource !== undefined)\r\n        this.props.isShowBackButton(false);\r\n    } catch (error) {\r\n      console.log(\"TruckShipmentComposite:Error occured on handleAdd\", error);\r\n    }\r\n  };\r\n\r\n  getTerminalsList(shareholder) {\r\n    try {\r\n      if (shareholder !== null && shareholder !== \"\") {\r\n        axios(\r\n          RestAPIs.GetTerminals,\r\n          Utilities.getAuthenticationObjectforPost(\r\n            [shareholder],\r\n            this.props.tokenDetails.tokenInfo\r\n          )\r\n        ).then((response) => {\r\n          if (response.data.IsSuccess) {\r\n            this.setState({ terminalCodes: response.data.EntityResult });\r\n          }\r\n        });\r\n      } else {\r\n        this.setState({ terminalCodes: [] });\r\n      }\r\n    } catch (error) {\r\n      console.log(\r\n        \"DestinationComposite:Error occured on getTerminalsList\",\r\n        error\r\n      );\r\n    }\r\n  }\r\n\r\n  getVehicle(vehicleCode) {\r\n    let keyCode = [\r\n      {\r\n        key: KeyCodes.vehicleCode,\r\n        value: vehicleCode,\r\n      },\r\n    ];\r\n    let obj = {\r\n      ShareHolderCode: this.state.selectedShareholder,\r\n      keyDataCode: KeyCodes.vehicleCode,\r\n      KeyCodes: keyCode,\r\n    };\r\n\r\n    axios(\r\n      RestAPIs.GetVehicle,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        let result = response.data;\r\n        if (result.IsSuccess === true) {\r\n          if (result.EntityResult !== null) {\r\n            this.setState({\r\n              vehicleForRecordWeight: result.EntityResult,\r\n            });\r\n          }\r\n        } else {\r\n          this.setState({\r\n            vehicleForRecordWeight: {},\r\n          });\r\n          console.log(\"Error in GetVehicle:\", result.ErrorList);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        this.setState({ vehicleForRecordWeight: {} });\r\n        console.log(\"Error while getting Vehicle:\", error);\r\n      });\r\n  }\r\n\r\n  GetViewAllShipmentCustomData(shipmentRow) {\r\n    var keyCode = [\r\n      {\r\n        key: KeyCodes.shipmentCode,\r\n        value: shipmentRow.ShipmentCode,\r\n      },\r\n      {\r\n        key: KeyCodes.shipmentStatus,\r\n        value: shipmentRow.Status,\r\n      },\r\n      {\r\n        key: KeyCodes.vehicleCode,\r\n        value: shipmentRow.VehicleCode,\r\n      },\r\n    ];\r\n    var obj = {\r\n      ShareHolderCode: this.state.selectedShareholder,\r\n      keyDataCode: KeyCodes.shipmentCode,\r\n      KeyCodes: keyCode,\r\n    };\r\n    axios(\r\n      RestAPIs.GetViewAllShipmentCustomData,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        if (response.data.IsSuccess) {\r\n          this.setState({ modCustomValues: response.data.EntityResult });\r\n        } else this.setState({ modCustomValues: {} });\r\n        //this.setState({ modLoadingDetails: this.formLoadingCompartments(response.data.EntityResult) })\r\n      })\r\n      .catch((error) => {\r\n        console.log(\r\n          \"Error while getting shipment custom details:\",\r\n          error,\r\n          shipmentRow\r\n        );\r\n      });\r\n  }\r\n\r\n  handleShareholderSelectionChange = (shareholder) => {\r\n    try {\r\n      this.setState({\r\n        selectedShareholder: shareholder,\r\n        isReadyToRender: false,\r\n        selectedItems: [],\r\n      });\r\n      this.getShipmentList(shareholder);\r\n      this.getTerminalsList(shareholder);\r\n      this.getKPIList(shareholder);\r\n    } catch (error) {\r\n      console.log(\r\n        \"TruckShipmentComposite:Error occured on handleShareholderSelectionChange\",\r\n        error\r\n      );\r\n    }\r\n  };\r\n\r\n  //Get KPI for Truck Shipment\r\n  getKPIList(shareholder) {\r\n    let KPIView = Utilities.isInFunction(\r\n      this.props.userDetails.EntityResult.FunctionsList,\r\n      functionGroups.view,\r\n      fnKPIInformation\r\n    );\r\n    if (KPIView === true) {\r\n      var notification = {\r\n        message: \"\",\r\n        messageType: \"critical\",\r\n        messageResultDetails: [],\r\n      };\r\n      let objKPIRequestData = {\r\n        PageName: kpiTruckShipmentList,\r\n        InputParameters: [{ key: \"ShareholderCode\", value: shareholder }],\r\n      };\r\n      axios(\r\n        RestAPIs.GetKPI,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          objKPIRequestData,\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          var result = response.data;\r\n          if (result.IsSuccess === true) {\r\n            this.setState({\r\n              truckShipmentKPIList: result.EntityResult.ListKPIDetails,\r\n            });\r\n          } else {\r\n            this.setState({ truckShipmentKPIList: [] });\r\n            console.log(\"Error in truck shipment KPIList:\", result.ErrorList);\r\n            notification.messageResultDetails.push({\r\n              keyFields: [],\r\n              keyValues: [],\r\n              isSuccess: false,\r\n              errorMessage: result.ErrorList[0],\r\n            });\r\n          }\r\n          if (notification.messageResultDetails.length > 0) {\r\n            toast(\r\n              <ErrorBoundary>\r\n                <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n              </ErrorBoundary>,\r\n              {\r\n                autoClose:\r\n                  notification.messageType === \"success\" ? 10000 : false,\r\n              }\r\n            );\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error while getting truck shipment KPIList:\", error);\r\n        });\r\n    }\r\n  }\r\n\r\n  getShipment(shipmentRow) {\r\n    var keyCode = [\r\n      {\r\n        key: KeyCodes.shipmentCode,\r\n        value: shipmentRow.Common_Code,\r\n      },\r\n    ];\r\n    var obj = {\r\n      ShareHolderCode: this.state.selectedShareholder,\r\n      keyDataCode: KeyCodes.shipmentCode,\r\n      KeyCodes: keyCode,\r\n    };\r\n    axios(\r\n      RestAPIs.GetShipment,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        var result = response.data;\r\n        if (result.IsSuccess === true) {\r\n          this.setState(\r\n            {\r\n              shipment: result.EntityResult,\r\n            },\r\n            () => {\r\n              this.getAttributes();\r\n              this.getLoadingDetails(shipmentRow);\r\n              this.getShipmentStatusOperations(result.EntityResult);\r\n              this.getShipmentStatuses(shipmentRow);\r\n              this.getVehicle(result.EntityResult.VehicleCode);\r\n              this.GetBayByTrnsaction(\r\n                result.EntityResult.ShipmentCode,\r\n                \"SHIPMENT\",\r\n                result.EntityResult.ShareholderCode\r\n              );\r\n            }\r\n          );\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while getting Shipment:\", error, shipmentRow);\r\n      });\r\n  }\r\n\r\n  getLoadingDetails(shipmentRow) {\r\n    var keyCode = [\r\n      {\r\n        key: KeyCodes.shipmentCode,\r\n        value: shipmentRow.ShipmentCode,\r\n      },\r\n    ];\r\n    var obj = {\r\n      ShareHolderCode: this.state.selectedShareholder,\r\n      keyDataCode: KeyCodes.shipmentCode,\r\n      KeyCodes: keyCode,\r\n    };\r\n    axios(\r\n      RestAPIs.GetTruckShipmentLoadingDetails,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        response.data.IsSuccess\r\n          ? this.setState({ staticLoadingDetails: response.data.EntityResult })\r\n          : this.setState({ staticLoadingDetails: [] });\r\n      })\r\n      .catch((error) => {\r\n        console.log(\r\n          \"Error while getting Shipment Loading Details:\",\r\n          error,\r\n          shipmentRow\r\n        );\r\n      });\r\n  }\r\n\r\n  getAttributes() {\r\n    try {\r\n      axios(\r\n        RestAPIs.GetAttributesMetaData,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          [shipmentStatusTimeAttributeEntity],\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      ).then((response) => {\r\n        var result = response.data;\r\n        if (result.IsSuccess === true) {\r\n          this.setState({\r\n            attributeMetaDataList: lodash.cloneDeep(result.EntityResult),\r\n          });\r\n        } else {\r\n          console.log(\"Failed to get Attributes\");\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.log(\"Error while getting Attributes:\", error);\r\n    }\r\n  }\r\n\r\n  getShipmentStatusOperations(shipmentItem) {\r\n    try {\r\n      //var shipmentStatus = shipmentItem.Status;\r\n      //var isVolumneBased = shipmentItem.IsVolumeBased;\r\n\r\n      let obj = {\r\n        ShareHolderCode: this.state.selectedShareholder,\r\n        keyDataCode: 0,\r\n        KeyCodes: null,\r\n        Entity: shipmentItem,\r\n      };\r\n\r\n      axios(\r\n        RestAPIs.GetShipmentOperations,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          obj,\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          var result = response.data;\r\n          let nextOperations = [];\r\n          Object.keys(result.EntityResult).forEach((operation) => {\r\n            if (result.EntityResult[operation]) nextOperations.push(operation);\r\n          });\r\n\r\n          // const index = nextOperations.indexOf(Constants.ViewAllShipmentOperations.ViewShipment_CloseShipment);\r\n          // if (index > -1) {\r\n          //   nextOperations.splice(index, 1);\r\n          // }\r\n          this.setState({ shipmentNextOperations: nextOperations });\r\n        })\r\n        .catch((error) => {\r\n          console.log(\r\n            \"Error while getting getShipmentStatusOperations:\",\r\n            error\r\n          );\r\n        });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  getShipmentStatuses(shipmentRow) {\r\n    try {\r\n      axios(\r\n        RestAPIs.GetShipmentStatuses +\r\n        \"?shCode=\" +\r\n        this.state.selectedShareholder +\r\n        \"&shipmentCode=\" +\r\n        shipmentRow.Common_Code +\r\n        \"&shipmentType=\" +\r\n        shipmentRow.ViewShipmentStatus_ShipmentType,\r\n        Utilities.getAuthenticationObjectforGet(\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          var result = response.data;\r\n          //let lastStatus = result.EntityResult.pop();\r\n          this.setState({\r\n            currentShipmentStatuses: result.EntityResult,\r\n            //lastStatus: lastStatus,\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error while getting getShipmentStatuses:\", error);\r\n        });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  handleSelection = (items) => {\r\n    try {\r\n      var { operationsVisibilty, drawerStatus, activityInfo } = {\r\n        ...this.state,\r\n      };\r\n      let shipmentDeleteInfo = activityInfo.filter((item) => {\r\n        return (\r\n          item.ActivityCode ===\r\n          Constants.ShipmentActivityInfo.SHIPMENT_ENABLE_DELETE &&\r\n          item.ActionTypeCode === Constants.ActionTypeCode.CHECK\r\n        );\r\n      });\r\n      var shipmentDeleteStates = [];\r\n      if (shipmentDeleteInfo !== undefined && shipmentDeleteInfo.length > 0)\r\n        shipmentDeleteStates = shipmentDeleteInfo[0].ShipmentStates;\r\n\r\n      let isReady =\r\n        items.findIndex(\r\n          (x) =>\r\n            shipmentDeleteStates.indexOf(\r\n              x.ViewShipmentStatus_ShipmentStatus.toUpperCase()\r\n            ) < 0\r\n        ) >= 0\r\n          ? false\r\n          : true;\r\n\r\n      let productCount = items.filter(function (x) {\r\n        return (\r\n          x.ViewShipmentStatus_ShipmentType === Constants.shipmentType.PRODUCT\r\n        );\r\n      }).length;\r\n\r\n      let compCount = items.filter(function (x) {\r\n        return (\r\n          x.ViewShipmentStatus_ShipmentType ===\r\n          Constants.shipmentType.COMPARTMENT\r\n        );\r\n      }).length;\r\n\r\n      let productFunctionGroup = true;\r\n      if (productCount > 0)\r\n        productFunctionGroup = Utilities.isInFunction(\r\n          this.props.userDetails.EntityResult.FunctionsList,\r\n          functionGroups.remove,\r\n          fnSBP\r\n        );\r\n      let compartmentFunctionGroup = true;\r\n      if (compCount > 0)\r\n        compartmentFunctionGroup = Utilities.isInFunction(\r\n          this.props.userDetails.EntityResult.FunctionsList,\r\n          functionGroups.remove,\r\n          fnSBC\r\n        );\r\n\r\n      operationsVisibilty.delete = this.props.userDetails.EntityResult\r\n        .IsWebPortalUser\r\n        ? false\r\n        : isReady &&\r\n        items.length > 0 &&\r\n        compartmentFunctionGroup &&\r\n        productFunctionGroup;\r\n\r\n      if (items.length !== 1) {\r\n        drawerStatus = true;\r\n      } else {\r\n        drawerStatus = false;\r\n      }\r\n\r\n      this.setState({\r\n        selectedItems: items,\r\n        operationsVisibilty,\r\n        isOperation: false,\r\n        drawerStatus,\r\n        shipment: {}\r\n      }, () => {\r\n        if (items.length === 1) {\r\n          this.getShipment(items[0]);\r\n          this.setState({ isOperation: true, shipmentType:items[0].ViewShipmentStatus_ShipmentType, });\r\n        }\r\n      })\r\n    } catch (error) {\r\n      console.log(\r\n        \"TruckShipmentComposite:Error occured on handleSelection\",\r\n        error\r\n      );\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    try {\r\n      Utilities.setArchive(this.props.userDetails.EntityResult.IsArchived);\r\n      if (this.props.shipmentSourceFromSummary) {\r\n        const operationsVisibilty = { ...this.state.operationsVisibilty };\r\n        operationsVisibilty.shareholder = false;\r\n        operationsVisibilty.add = false;\r\n        this.setState({\r\n          isDetails: true,\r\n          isManualEntry: false,\r\n          isViewAuditTrail: false,\r\n          isViewLoadingDetails: false,\r\n          selectedRow: {},\r\n          operationsVisibilty,\r\n          shipmentType: this.props.shipmentType,\r\n          selectedShareholder: this.props.selectedShareholder,\r\n        });\r\n      }\r\n      this.populatePopupContents();\r\n      this.GetShipmentActivityInfo();\r\n      // this.CheckShipmentDeleteAllowed();\r\n      this.getTerminalsList(this.state.selectedShareholder);\r\n      this.getShipmentList(this.state.selectedShareholder);\r\n      this.getKPIList(this.state.selectedShareholder);\r\n      this.getlookupValues();\r\n    } catch (error) {\r\n      console.log(\r\n        \"TruckShipmentComposite:Error occured on ComponentDidMount\",\r\n        error\r\n      );\r\n    }\r\n\r\n    // clear session storage on window refresh event\r\n    window.addEventListener(\"beforeunload\", this.clearStorage);\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    // clear session storage\r\n    this.clearStorage();\r\n\r\n    // remove event listener\r\n    window.removeEventListener(\"beforeunload\", this.clearStorage);\r\n  };\r\n\r\n  clearStorage = () => {\r\n    sessionStorage.removeItem(this.componentName + \"GridState\");\r\n  };\r\n\r\n  GetShipmentActivityInfo() {\r\n    try {\r\n      axios(\r\n        RestAPIs.GetShipmentActivityInfo,\r\n        Utilities.getAuthenticationObjectforGet(\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          if (response.data.IsSuccess) {\r\n            this.setState({ activityInfo: response.data.EntityResult });\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error while getting shipment activityInfo:\", error);\r\n        });\r\n    } catch (error) {\r\n      console.log(\"Error in GetShipmentActivityInfo:\", error);\r\n    }\r\n  }\r\n\r\n  getShipmentList(shareholder) {\r\n    try {\r\n      this.setState({ isReadyToRender: false });\r\n      let obj = {\r\n        ShareholderCode: shareholder,\r\n        TransportationType: null,\r\n        ScheduledFrom: null,\r\n        ScheduledTo: null,\r\n        ShipmentType: null,\r\n        ShipmentFrom: null,\r\n        ShipmentTypeCode: null,\r\n      };\r\n      if (this.props.shipmentSource !== undefined) {\r\n        obj.ShipmentFrom = this.props.shipmentSource;\r\n        obj.ShipmentType = Constants.shipmentTypeOptions.All;\r\n        obj.ShipmentTypeCode = this.props.shipmentSourceCode;\r\n      } else {\r\n        let fromDate = new Date(this.state.fromDate);\r\n        let toDate = new Date(this.state.toDate);\r\n        fromDate.setHours(0, 0, 0);\r\n        toDate.setHours(23, 59, 59);\r\n        obj.ScheduledFrom = fromDate;\r\n        obj.ScheduledTo = toDate;\r\n        obj.ShipmentType = Constants.shipmentTypeOptions.All;\r\n        obj.ShipmentFrom = Constants.shipmentFrom.All;\r\n      }\r\n\r\n      axios(\r\n        RestAPIs.GetShipmentListForRole,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          obj,\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          var result = response.data;\r\n          if (result.IsSuccess === true) {\r\n            if (this.props.shipmentSource !== undefined) {\r\n            }\r\n            this.setState(\r\n              {\r\n                data: result.EntityResult,\r\n                isReadyToRender: true,\r\n              },\r\n              () => {\r\n                if (\r\n                  this.state.isOperation === true &&\r\n                  this.state.selectedItems.length === 1\r\n                ) {\r\n                  let selectedItem = this.state.selectedItems[0];\r\n                  var updatedselectedItem = result.EntityResult.Table.filter(\r\n                    function (item) {\r\n                      return item.Common_Code === selectedItem.Common_Code;\r\n                    }\r\n                  );\r\n\r\n                  if (updatedselectedItem.length > 0) {\r\n                    let { operationsVisibilty, activityInfo } = { ...this.state };\r\n                    let shipmentDeleteInfo = activityInfo.filter((item) => {\r\n                      return (\r\n                        item.ActivityCode ===\r\n                        Constants.ShipmentActivityInfo.SHIPMENT_ENABLE_DELETE &&\r\n                        item.ActionTypeCode === Constants.ActionTypeCode.CHECK\r\n                      );\r\n                    });\r\n\r\n                    var shipmentDeleteStates = [];\r\n                    if (\r\n                      shipmentDeleteInfo !== undefined &&\r\n                      shipmentDeleteInfo.length > 0\r\n                    )\r\n                      shipmentDeleteStates = shipmentDeleteInfo[0].ShipmentStates;\r\n\r\n                    operationsVisibilty.delete = this.props.userDetails\r\n                      .EntityResult.IsWebPortalUser\r\n                      ? false\r\n                      : shipmentDeleteStates.indexOf(\r\n                        updatedselectedItem[0].ViewShipmentStatus_ShipmentStatus.toUpperCase()\r\n                      ) > -1 &&\r\n                      Utilities.isInFunction(\r\n                        this.props.userDetails.EntityResult.FunctionsList,\r\n                        functionGroups.remove,\r\n                        updatedselectedItem[0]\r\n                          .ViewShipmentStatus_ShipmentType ===\r\n                          Constants.shipmentType.PRODUCT\r\n                          ? fnSBP\r\n                          : fnSBC\r\n                      );\r\n\r\n                    this.setState({\r\n                      selectedItems: updatedselectedItem,\r\n                      operationsVisibilty,\r\n                    });\r\n                    this.getShipment(updatedselectedItem[0]);\r\n                  }\r\n                }\r\n              }\r\n            );\r\n          } else {\r\n            this.setState({ data: [], isReadyToRender: true });\r\n            console.log(\"Error in GetShipmentListForRole:\", result.ErrorList);\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          this.setState({ data: [], isReadyToRender: true });\r\n          console.log(\"Error while getting Shipment List:\", error);\r\n        });\r\n    } catch (error) {\r\n      this.setState({ isReadyToRender: true });\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  handleAuthorizeToLoad(shipmentItem, shCode, token, callback) {\r\n    var keyCode = [\r\n      {\r\n        key: KeyCodes.shareholderCode,\r\n        value: shCode,\r\n      },\r\n      {\r\n        key: KeyCodes.shipmentStatus,\r\n        value: shipmentItem.Status,\r\n      },\r\n      {\r\n        key: KeyCodes.shipmentCode,\r\n        value: shipmentItem.ShipmentCode,\r\n      },\r\n      {\r\n        key: KeyCodes.driverCode,\r\n        value: shipmentItem.DriverCode,\r\n      },\r\n      {\r\n        key: KeyCodes.vehicleCode,\r\n        value: shipmentItem.VehicleCode,\r\n      },\r\n    ];\r\n    var obj = {\r\n      ShareHolderCode: shCode,\r\n      keyDataCode: KeyCodes.shipmentCode,\r\n      KeyCodes: keyCode,\r\n    };\r\n    axios(\r\n      RestAPIs.AuthorizeToLoad,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        token\r\n        //this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        var result = response.data;\r\n        callback(result);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while AuthorizeToLoad:\", error);\r\n      });\r\n  }\r\n\r\n  getlookupValues() {\r\n    try {\r\n      let sbcAdd = Utilities.isInFunction(\r\n        this.props.userDetails.EntityResult.FunctionsList,\r\n        functionGroups.add,\r\n        fnSBC\r\n      );\r\n      if (sbcAdd) {\r\n        axios(\r\n          RestAPIs.GetLookUpData + \"?LookUpTypeCode=Contract\",\r\n          Utilities.getAuthenticationObjectforGet(\r\n            this.props.tokenDetails.tokenInfo\r\n          )\r\n        ).then((response) => {\r\n          var result = response.data;\r\n          if (result.IsSuccess === true) {\r\n            this.setState({\r\n              isContractDisable:\r\n                result.EntityResult[\"EnableContract\"] === \"0\" ? false : true,\r\n            });\r\n          }\r\n        });\r\n        axios(\r\n          RestAPIs.GetLookUpData + \"?LookUpTypeCode=Order\",\r\n          Utilities.getAuthenticationObjectforGet(\r\n            this.props.tokenDetails.tokenInfo\r\n          )\r\n        ).then((response) => {\r\n          var result = response.data;\r\n          if (result.IsSuccess === true) {\r\n            this.setState({\r\n              isOrderDisable:\r\n                result.EntityResult[\"EnableOrder\"] === \"0\" ? false : true,\r\n            });\r\n          }\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(\r\n        \"TruckShipmentComposite:Error occured on getLookUpData\",\r\n        error\r\n      );\r\n    }\r\n  }\r\n\r\n  handleAllowToLoad(shipmentItem, shCode, token, callback) {\r\n    var keyCode = [\r\n      {\r\n        key: KeyCodes.shareholderCode,\r\n        value: shCode,\r\n      },\r\n      {\r\n        key: KeyCodes.shipmentStatus,\r\n        value: shipmentItem.Status,\r\n      },\r\n      {\r\n        key: KeyCodes.shipmentCode,\r\n        value: shipmentItem.ShipmentCode,\r\n      },\r\n      {\r\n        key: KeyCodes.driverCode,\r\n        value: shipmentItem.DriverCode,\r\n      },\r\n    ];\r\n    var obj = {\r\n      ShareHolderCode: shCode,\r\n      keyDataCode: KeyCodes.shipmentCode,\r\n      KeyCodes: keyCode,\r\n    };\r\n    axios(\r\n      RestAPIs.AllowToLoad,\r\n      Utilities.getAuthenticationObjectforPost(obj, token)\r\n    )\r\n      .then((response) => {\r\n        var result = response.data;\r\n        callback(result);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while AllowToLoad:\", error);\r\n      });\r\n  }\r\n\r\n  closeShipment = () => {\r\n    let showCloseShipmentAuthenticationLayout =\r\n      this.props.userDetails.EntityResult.IsWebPortalUser !== true\r\n        ? true\r\n        : false;\r\n\r\n    this.setState({ showCloseShipmentAuthenticationLayout }, () => {\r\n      if (showCloseShipmentAuthenticationLayout === false) {\r\n        this.handleShipmentClose();\r\n      }\r\n    });\r\n  };\r\n\r\n  handleShipmentClose = () => {\r\n    this.handleAuthenticationClose();\r\n    try {\r\n      let notification = {\r\n        messageType: \"critical\",\r\n        message: \"ViewAllShipment_ShipmentClose\",\r\n        messageResultDetails: [\r\n          {\r\n            keyFields: [\"ShipmentCompDetail_ShipmentNumber\"],\r\n            keyValues: [this.state.shipment.ShipmentCode],\r\n            isSuccess: false,\r\n            errorMessage: \"\",\r\n          },\r\n        ],\r\n      };\r\n      let entity = this.formCloseShipmentRequest();\r\n      var keyCode = [\r\n        {\r\n          key: KeyCodes.shareholderCode,\r\n          value: this.state.selectedShareholder,\r\n        },\r\n        {\r\n          key: KeyCodes.shipmentCode,\r\n          value: this.state.shipment.ShipmentCode,\r\n        },\r\n      ];\r\n      var obj = {\r\n        ShareHolderCode: this.state.selectedShareholder,\r\n        keyDataCode: KeyCodes.shipmentCode,\r\n        KeyCodes: keyCode,\r\n        Entity: entity,\r\n      };\r\n      axios(\r\n        RestAPIs.CloseShipment,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          obj,\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          var result = response.data;\r\n          notification.messageType = result.IsSuccess ? \"success\" : \"critical\";\r\n          notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n          if (result.IsSuccess === true) {\r\n            this.getShipmentList(this.state.selectedShareholder);\r\n          } else {\r\n            notification.messageResultDetails[0].errorMessage =\r\n              result.ErrorList[0];\r\n          }\r\n          toast(\r\n            <ErrorBoundary>\r\n              <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n            </ErrorBoundary>,\r\n            {\r\n              autoClose: notification.messageType === \"success\" ? 10000 : false,\r\n            }\r\n          );\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error while shipment close:\", error);\r\n        });\r\n    } catch (error) {\r\n      console.log(\"Error while closing the shipment:\", error);\r\n    }\r\n  };\r\n\r\n  formCloseShipmentRequest() {\r\n    try {\r\n      //let loadingDetails = lodash.cloneDeep(this.state.staticLoadingDetails)\r\n      let ViewAllTruckShipmentLoadingDetails = {\r\n        topUpDecantApprovalStatus: \"\",\r\n        topUpDecantEnabled: \"\",\r\n        Remarks: \"\",\r\n        listShipmentCompartmentInfo: [],\r\n        listShipmentLoadingCompData: [],\r\n      };\r\n      ViewAllTruckShipmentLoadingDetails.topUpDecantApprovalStatus =\r\n        this.state.modCustomValues.TopUpDecantStatusText;\r\n      ViewAllTruckShipmentLoadingDetails.topUpDecantEnabled =\r\n        this.state.modCustomValues.EnableTopUpDecant;\r\n      ViewAllTruckShipmentLoadingDetails.Remarks = this.state.reasonForClosure;\r\n\r\n      return ViewAllTruckShipmentLoadingDetails;\r\n    } catch (error) {\r\n      console.log(\r\n        \"Error while forming request for closing the shipment:\",\r\n        error\r\n      );\r\n    }\r\n  }\r\n\r\n  handleCloseShipmentModal = () => {\r\n    return (\r\n      <TranslationConsumer>\r\n        {(t) => (\r\n          <Modal open={this.state.isCloseShipment} size=\"mini\">\r\n            <Modal.Content>\r\n              <div className=\"col col-lg-12\">\r\n                <h3>\r\n                  {t(\"ViewShipment_CloseHeader\") +\r\n                    \" : \" +\r\n                    this.state.shipment.ShipmentCode}\r\n                </h3>\r\n              </div>\r\n              <div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\r\n                <div className=\"col col-lg-9\">\r\n                  <label>{t(\"CloseShipment_VehicleCrippled\")}</label>\r\n                </div>\r\n                <div>\r\n                  <Checkbox\r\n                    checked={this.state.isVehicleCrippled}\r\n                    onChange={(cellData) => {\r\n                      this.setState({ isVehicleCrippled: cellData }, () => {\r\n                        if (cellData)\r\n                          this.setState({ reasonForClosure: \"Crippled\" });\r\n                        else this.setState({ reasonForClosure: \"\" });\r\n                      });\r\n                    }}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\r\n                <div className=\"col col-lg-12\">\r\n                  <Input\r\n                    fluid\r\n                    value={this.state.reasonForClosure}\r\n                    label={t(\"ViewShipment_Reason\")}\r\n                    disbaled={this.state.isVehicleCrippled ? true : false}\r\n                    reserveSpace={false}\r\n                    onChange={(value) => {\r\n                      this.setState({ reasonForClosure: value });\r\n                    }}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </Modal.Content>\r\n            <Modal.Footer>\r\n              <Button\r\n                type=\"primary\"\r\n                content={t(\"AccessCardInfo_Ok\")}\r\n                onClick={() => {\r\n                  if (this.state.reasonForClosure === \"\") {\r\n                    let notification = {\r\n                      messageType: \"critical\",\r\n                      message: \"ViewAllShipment_ShipmentClose\",\r\n                      messageResultDetails: [\r\n                        {\r\n                          keyFields: [\"ShipmentCompDetail_ShipmentNumber\"],\r\n                          keyValues: [this.state.shipment.ShipmentCode],\r\n                          isSuccess: false,\r\n                          errorMessage: \"Enter_ReasonForCloseure\",\r\n                        },\r\n                      ],\r\n                    };\r\n\r\n                    toast(\r\n                      <ErrorBoundary>\r\n                        <NotifyEvent\r\n                          notificationMessage={notification}\r\n                        ></NotifyEvent>\r\n                      </ErrorBoundary>,\r\n                      {\r\n                        autoClose:\r\n                          notification.messageType === \"success\"\r\n                            ? 10000\r\n                            : false,\r\n                      }\r\n                    );\r\n                  } else\r\n                    this.setState({ isCloseShipment: false }, () => {\r\n                      this.closeShipment();\r\n                    });\r\n                }}\r\n              />\r\n              <Button\r\n                type=\"primary\"\r\n                content={t(\"Cancel\")}\r\n                onClick={() => {\r\n                  this.setState({\r\n                    isCloseShipment: false,\r\n                    isVehicleCrippled: false,\r\n                    reasonForClosure: \"\",\r\n                  });\r\n                }}\r\n              />\r\n            </Modal.Footer>\r\n          </Modal>\r\n        )}\r\n      </TranslationConsumer>\r\n    );\r\n  };\r\n\r\n  confirmRecordLadenWeight = () => {\r\n    return (\r\n      <TranslationConsumer>\r\n        {(t) => (\r\n          <Modal open={this.state.isLadenWeightValid} size=\"small\">\r\n            <Modal.Content>\r\n              <div className=\"col col-lg-12\">\r\n                <h5>\r\n                  {t(this.state.ladenWeightError) +\r\n                    t(\"ConfirmCaptureLadenWeight\")}\r\n                </h5>\r\n              </div>\r\n            </Modal.Content>\r\n            <Modal.Footer>\r\n              <Button\r\n                type=\"primary\"\r\n                content={t(\"AccessCardInfo_Ok\")}\r\n                onClick={() => {\r\n                  this.setState({ isLadenWeightValid: false }, () => {\r\n                    this.RecordLadenWeight();\r\n                  });\r\n                }}\r\n              />\r\n              <Button\r\n                type=\"primary\"\r\n                content={t(\"Cancel\")}\r\n                onClick={() => {\r\n                  this.setState({ isLadenWeightValid: false });\r\n                }}\r\n              />\r\n            </Modal.Footer>\r\n          </Modal>\r\n        )}\r\n      </TranslationConsumer>\r\n    );\r\n  };\r\n\r\n  confirmAllowToLoad = () => {\r\n    return (\r\n      <TranslationConsumer>\r\n        {(t) => (\r\n          <Modal open={this.state.isNotRevised} size=\"small\">\r\n            <Modal.Content>\r\n              <div className=\"col col-lg-12\">\r\n                <h5>{t(\"ViewShipment_ConfirmAllowToLoad\")}</h5>\r\n              </div>\r\n            </Modal.Content>\r\n            <Modal.Footer>\r\n              <Button\r\n                type=\"primary\"\r\n                content={t(\"AccessCardInfo_Ok\")}\r\n                onClick={() => {\r\n                  this.setState({ isNotRevised: false }, () => {\r\n                    this.allowToLoad();\r\n                  });\r\n                }}\r\n              />\r\n              <Button\r\n                type=\"primary\"\r\n                content={t(\"Cancel\")}\r\n                onClick={() => {\r\n                  this.setState({ isNotRevised: false });\r\n                }}\r\n              />\r\n            </Modal.Footer>\r\n          </Modal>\r\n        )}\r\n      </TranslationConsumer>\r\n    );\r\n  };\r\n\r\n  printBOLClick = () => {\r\n    let showPrintBOLAuthenticationLayout =\r\n      this.props.userDetails.EntityResult.IsWebPortalUser !== true\r\n        ? true\r\n        : false;\r\n\r\n    this.setState({ showPrintBOLAuthenticationLayout }, () => {\r\n      if (showPrintBOLAuthenticationLayout === false) {\r\n        this.printBOL();\r\n      }\r\n    });\r\n  };\r\n\r\n  printBOL = () => {\r\n    this.handleAuthenticationClose();\r\n    let shipment = lodash.cloneDeep(this.state.shipment);\r\n\r\n    let notification = {\r\n      messageType: \"critical\",\r\n      message: \"ViewShipmentStatus_PrintBOL_status\",\r\n      messageResultDetails: [\r\n        {\r\n          keyFields: [\"ShipmentCompDetail_ShipmentNumber\"],\r\n          keyValues: [shipment.ShipmentCode],\r\n          isSuccess: false,\r\n          errorMessage: \"\",\r\n        },\r\n      ],\r\n    };\r\n\r\n    this.handlePrintBOL(\r\n      shipment.ShipmentCode,\r\n      this.state.selectedShareholder,\r\n      this.props.tokenDetails.tokenInfo,\r\n      (result) => {\r\n        notification.messageType = result.IsSuccess ? \"success\" : \"critical\";\r\n        notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n        // if (result.IsSuccess === true) {\r\n        //   this.getShipmentList(this.state.selectedShareholder);\r\n        // }\r\n        // else {\r\n        notification.messageResultDetails[0].errorMessage = result.ErrorList[0];\r\n        //}\r\n        toast(\r\n          <ErrorBoundary>\r\n            <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n          </ErrorBoundary>,\r\n          {\r\n            autoClose: notification.messageType === \"success\" ? 10000 : false,\r\n          }\r\n        );\r\n      }\r\n    );\r\n  };\r\n\r\n  printFANClick = () => {\r\n    let showFANAuthenticationLayout =\r\n      this.props.userDetails.EntityResult.IsWebPortalUser !== true\r\n        ? true\r\n        : false;\r\n\r\n    this.setState({ showFANAuthenticationLayout }, () => {\r\n      if (showFANAuthenticationLayout === false) {\r\n        this.printFAN();\r\n      }\r\n    });\r\n  };\r\n\r\n  printFAN = () => {\r\n    this.handleAuthenticationClose();\r\n    let shipment = lodash.cloneDeep(this.state.shipment);\r\n\r\n    let notification = {\r\n      messageType: \"critical\",\r\n      message: \"ViewShipmentStatus_PrintFAN_status\",\r\n      messageResultDetails: [\r\n        {\r\n          keyFields: [\"ShipmentCompDetail_ShipmentNumber\"],\r\n          keyValues: [shipment.ShipmentCode],\r\n          isSuccess: false,\r\n          errorMessage: \"\",\r\n        },\r\n      ],\r\n    };\r\n\r\n    this.handlePrintFAN(\r\n      shipment.ShipmentCode,\r\n      this.state.selectedShareholder,\r\n      this.props.tokenDetails.tokenInfo,\r\n      (result) => {\r\n        notification.messageType = result.IsSuccess ? \"success\" : \"critical\";\r\n        notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n\r\n        notification.messageResultDetails[0].errorMessage = result.ErrorList[0];\r\n\r\n        toast(\r\n          <ErrorBoundary>\r\n            <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n          </ErrorBoundary>,\r\n          {\r\n            autoClose: notification.messageType === \"success\" ? 10000 : false,\r\n          }\r\n        );\r\n      }\r\n    );\r\n  };\r\n\r\n  allowToLoad = () => {\r\n    let showAllowToLoadAuthenticationLayout =\r\n      this.props.userDetails.EntityResult.IsWebPortalUser !== true\r\n        ? true\r\n        : false;\r\n\r\n    this.setState({ showAllowToLoadAuthenticationLayout }, () => {\r\n      if (showAllowToLoadAuthenticationLayout === false) {\r\n        this.ConfirmedAllowToLoad();\r\n      }\r\n    });\r\n  };\r\n\r\n  ConfirmedAllowToLoad = () => {\r\n    let shipment = lodash.cloneDeep(this.state.shipment);\r\n    let notification = {\r\n      messageType: \"critical\",\r\n      message: \"ViewShipment_AllowToLoad_status\",\r\n      messageResultDetails: [\r\n        {\r\n          keyFields: [\"ShipmentCompDetail_ShipmentNumber\"],\r\n          keyValues: [shipment.ShipmentCode],\r\n          isSuccess: false,\r\n          errorMessage: \"\",\r\n        },\r\n      ],\r\n    };\r\n    this.handleAllowToLoad(\r\n      lodash.cloneDeep(this.state.shipment),\r\n      this.state.selectedShareholder,\r\n      this.props.tokenDetails.tokenInfo,\r\n      (result) => {\r\n        notification.messageType = result.IsSuccess ? \"success\" : \"critical\";\r\n        notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n        if (result.IsSuccess === true) {\r\n          this.getShipmentList(this.state.selectedShareholder);\r\n        } else {\r\n          notification.messageResultDetails[0].errorMessage =\r\n            result.ErrorList[0];\r\n        }\r\n        toast(\r\n          <ErrorBoundary>\r\n            <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n          </ErrorBoundary>,\r\n          {\r\n            autoClose: notification.messageType === \"success\" ? 10000 : false,\r\n          }\r\n        );\r\n      }\r\n    );\r\n  };\r\n\r\n  handlePrintFAN(shipmentCode, shCode, token, callback) {\r\n    var keyCode = [\r\n      {\r\n        key: KeyCodes.shareholderCode,\r\n        value: shCode,\r\n      },\r\n      {\r\n        key: KeyCodes.shipmentCode,\r\n        value: shipmentCode,\r\n      },\r\n    ];\r\n    var obj = {\r\n      ShareHolderCode: shCode,\r\n      keyDataCode: KeyCodes.shipmentCode,\r\n      KeyCodes: keyCode,\r\n    };\r\n    axios(\r\n      RestAPIs.PrintFAN,\r\n      Utilities.getAuthenticationObjectforPost(obj, token)\r\n    )\r\n      .then((response) => {\r\n        var result = response.data;\r\n        callback(result);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while handlePrintFAN:\", error);\r\n      });\r\n  }\r\n\r\n  handleSendBOL(shipmentCode, shCode, token, callback) {\r\n    var keyCode = [\r\n      {\r\n        key: KeyCodes.shareholderCode,\r\n        value: shCode,\r\n      },\r\n      {\r\n        key: KeyCodes.shipmentCode,\r\n        value: shipmentCode,\r\n      },\r\n    ];\r\n    var obj = {\r\n      ShareHolderCode: shCode,\r\n      keyDataCode: KeyCodes.shipmentCode,\r\n      KeyCodes: keyCode,\r\n    };\r\n    axios(\r\n      RestAPIs.SendBOL,\r\n      Utilities.getAuthenticationObjectforPost(obj, token)\r\n    )\r\n      .then((response) => {\r\n        var result = response.data;\r\n        callback(result);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while handleSendBOL:\", error);\r\n      });\r\n  }\r\n\r\n  handlePrintBOL(shipmentCode, shCode, token, callback) {\r\n    var keyCode = [\r\n      {\r\n        key: KeyCodes.shareholderCode,\r\n        value: shCode,\r\n      },\r\n      {\r\n        key: KeyCodes.shipmentCode,\r\n        value: shipmentCode,\r\n      },\r\n    ];\r\n    var obj = {\r\n      ShareHolderCode: shCode,\r\n      keyDataCode: KeyCodes.shipmentCode,\r\n      KeyCodes: keyCode,\r\n    };\r\n    axios(\r\n      RestAPIs.PrintBOL,\r\n      Utilities.getAuthenticationObjectforPost(obj, token)\r\n    )\r\n      .then((response) => {\r\n        var result = response.data;\r\n        callback(result);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while handlePrintBOL:\", error);\r\n      });\r\n  }\r\n\r\n  handleBSIOutbound(shipmentCode, shCode, token, callback) {\r\n    var keyCode = [\r\n      {\r\n        key: KeyCodes.shareholderCode,\r\n        value: shCode,\r\n      },\r\n      {\r\n        key: KeyCodes.shipmentCode,\r\n        value: shipmentCode,\r\n      },\r\n    ];\r\n    var obj = {\r\n      ShareHolderCode: shCode,\r\n      keyDataCode: KeyCodes.shipmentCode,\r\n      KeyCodes: keyCode,\r\n    };\r\n    axios(\r\n      RestAPIs.BSIOutbound,\r\n      Utilities.getAuthenticationObjectforPost(obj, token)\r\n    )\r\n      .then((response) => {\r\n        var result = response.data;\r\n        callback(result);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while handleBSIOutbound:\", error);\r\n      });\r\n  }\r\n\r\n  handleSealCompartments(shipmentCode, shCode, token, callback) {\r\n    var keyCode = [\r\n      {\r\n        key: KeyCodes.shareholderCode,\r\n        value: shCode,\r\n      },\r\n      {\r\n        key: KeyCodes.shipmentCode,\r\n        value: shipmentCode,\r\n      },\r\n    ];\r\n    var obj = {\r\n      ShareHolderCode: shCode,\r\n      keyDataCode: KeyCodes.shipmentCode,\r\n      KeyCodes: keyCode,\r\n    };\r\n    axios(\r\n      RestAPIs.GetSealCompartmentsforShipment,\r\n      Utilities.getAuthenticationObjectforPost(obj, token)\r\n    )\r\n      .then((response) => {\r\n        var result = response.data;\r\n        callback(result);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while handleBSIOutbound:\", error);\r\n      });\r\n  }\r\n\r\n  handleSealClose = () => {\r\n    this.setState({\r\n      isSealCompartments: false,\r\n      sealCompartments: [],\r\n    });\r\n  };\r\n\r\n  handleViewAuditTrail(shCode, shipmentCode, shipmentType, token, callback) {\r\n    axios(\r\n      RestAPIs.GetTruckAuditTrailInfo +\r\n      \"?shCode=\" +\r\n      shCode +\r\n      \"&shipmentCode=\" +\r\n      shipmentCode +\r\n      \"&shipmentType=\" +\r\n      shipmentType,\r\n      //shipmentRow.ViewShipmentStatus_ShipmentType,\r\n      Utilities.getAuthenticationObjectforGet(token)\r\n    )\r\n      .then((response) => {\r\n        var result = response.data;\r\n        callback(result);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while getting handleViewAuditTrail:\", error);\r\n      });\r\n  }\r\n\r\n  handleViewLoadingDetails(shipmentCode, shCode, token, callback) {\r\n    axios(\r\n      RestAPIs.GetLoadingDetails +\r\n      \"?shipmentCode=\" +\r\n      shipmentCode +\r\n      \"&shCode=\" +\r\n      shCode,\r\n      Utilities.getAuthenticationObjectforGet(token)\r\n    )\r\n      .then((response) => {\r\n        var result = response.data;\r\n        callback(result);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while getting handleViewLoadingDetails:\", error);\r\n      });\r\n  }\r\n\r\n  formReadonlyCompAttributes(attributes, attributeMetaDataList) {\r\n    let compAttributes = [];\r\n    if (\r\n      attributeMetaDataList !== null &&\r\n      attributeMetaDataList !== undefined &&\r\n      attributeMetaDataList.length > 0\r\n    ) {\r\n      attributeMetaDataList.forEach((att) => {\r\n        att.attributeMetaDataList.forEach((attribute) => {\r\n          //if (attribute.TerminalCode)\r\n          compAttributes.push({\r\n            AttributeCode: attribute.Code,\r\n            AttributeName: attribute.DisplayName\r\n              ? attribute.DisplayName\r\n              : attribute.Code,\r\n            AttributeValue: attribute.DefaultValue,\r\n            TerminalCode: attribute.TerminalCode,\r\n            IsMandatory: attribute.IsMandatory,\r\n            DataType: attribute.DataType,\r\n            IsReadonly: attribute.IsReadonly,\r\n            MinValue: attribute.MinValue,\r\n            MaxValue: attribute.MaxValue,\r\n            ValidationFormat: attribute.ValidationFormat,\r\n            compSequenceNo: \"\",\r\n          });\r\n        });\r\n      });\r\n    }\r\n\r\n    if (\r\n      attributes !== null &&\r\n      attributes !== undefined &&\r\n      attributes.length > 0\r\n    ) {\r\n      attributes.forEach((att) => {\r\n        compAttributes.forEach((compAtt) => {\r\n          if (compAtt.TerminalCode === att.TerminalCode) {\r\n            att.ListOfAttributeData.forEach((selAtt) => {\r\n              if (compAtt.AttributeCode === selAtt.AttributeCode)\r\n                compAtt.AttributeValue = selAtt.AttributeValue;\r\n            });\r\n          }\r\n        });\r\n      });\r\n    }\r\n    return compAttributes;\r\n  }\r\n\r\n  getRecordWeightList() {\r\n    axios(\r\n      RestAPIs.GetWeighBridgeList,\r\n      Utilities.getAuthenticationObjectforGet(this.props.tokenDetails.tokenInfo)\r\n    )\r\n      .then((response) => {\r\n        let result = response.data;\r\n        this.setState({\r\n          isRecordWeight: true,\r\n          recordWeightList: result.EntityResult,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while getting RecordWeightList:\", error);\r\n      });\r\n  }\r\n\r\n  handleModalBack = () => {\r\n    this.setState({ showReport: false });\r\n  };\r\n\r\n  renderModal() {\r\n    let path = null;\r\n    if (this.props.userDetails.EntityResult.IsArchived) {\r\n      path = \"TM/\" + Constants.TMReportArchive + \"/TMBOL\";\r\n    } else {\r\n      path = \"TM/\" + Constants.TMReports + \"/TMBOL\";\r\n    }\r\n    let paramValues = {\r\n      Culture: this.props.userDetails.EntityResult.UICulture,\r\n      Shareholder: this.state.selectedShareholder,\r\n      ShipmentCode:\r\n        this.state.selectedItems.length === 1\r\n          ? this.state.selectedItems[0].Common_Code\r\n          : this.state.selectedRow.Common_Code,\r\n    };\r\n\r\n    return (\r\n      <ReportDetails\r\n        showReport={this.state.showReport}\r\n        handleBack={this.handleModalBack}\r\n        handleModalClose={this.handleModalBack}\r\n        // proxyServerHost=\"http://epksr5115dit:3625/TMWebAPI/\"\r\n        proxyServerHost={RestAPIs.WebAPIURL}\r\n        reportServiceHost={this.reportServiceURI}\r\n        filePath={path}\r\n        parameters={paramValues}\r\n      />\r\n    );\r\n  }\r\n\r\n  handleViewBOL = () => {\r\n    this.handleAuthenticationClose();\r\n    if (this.reportServiceURI === undefined) {\r\n      axios(\r\n        RestAPIs.GetReportServiceURI,\r\n        Utilities.getAuthenticationObjectforGet(\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      ).then((response) => {\r\n        if (response.data.IsSuccess) {\r\n          this.reportServiceURI = response.data.EntityResult;\r\n          this.setState({ showReport: true });\r\n        }\r\n      });\r\n    } else {\r\n      this.setState({ showReport: true });\r\n    }\r\n  };\r\n\r\n  authorizeToLoadOnClick = () => {\r\n    let showAuthorizeToLoadAuthenticationLayout =\r\n      this.props.userDetails.EntityResult.IsWebPortalUser !== true\r\n        ? true\r\n        : false;\r\n\r\n    this.setState({ showAuthorizeToLoadAuthenticationLayout }, () => {\r\n      if (showAuthorizeToLoadAuthenticationLayout === false) {\r\n        this.authorizeToLoad();\r\n      }\r\n    });\r\n  };\r\n\r\n  authorizeToLoad = () => {\r\n    this.handleAuthenticationClose();\r\n\r\n    let shipment = lodash.cloneDeep(this.state.shipment);\r\n\r\n    let notification = {\r\n      messageType: \"critical\",\r\n      message: \"ViewShipment_AuthorizeLoad_status\",\r\n      messageResultDetails: [\r\n        {\r\n          keyFields: [\"ShipmentCompDetail_ShipmentNumber\"],\r\n          keyValues: [shipment.ShipmentCode],\r\n          isSuccess: false,\r\n          errorMessage: \"\",\r\n        },\r\n      ],\r\n    };\r\n\r\n    this.handleAuthorizeToLoad(\r\n      lodash.cloneDeep(this.state.shipment),\r\n      this.state.selectedShareholder,\r\n      this.props.tokenDetails.tokenInfo,\r\n      (result) => {\r\n        notification.messageType = result.IsSuccess ? \"success\" : \"critical\";\r\n        notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n        if (result.IsSuccess === true) {\r\n          this.getShipmentList(this.state.selectedShareholder);\r\n        } else {\r\n          notification.messageResultDetails[0].errorMessage =\r\n            result.ErrorList[0];\r\n        }\r\n        toast(\r\n          <ErrorBoundary>\r\n            <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n          </ErrorBoundary>,\r\n          {\r\n            autoClose: notification.messageType === \"success\" ? 10000 : false,\r\n          }\r\n        );\r\n      }\r\n    );\r\n  };\r\n\r\n  handleOperationClick = (operation) => {\r\n    let shipment = lodash.cloneDeep(this.state.shipment);\r\n\r\n    let notification = {\r\n      messageType: \"critical\",\r\n      message: operation + \"_status\",\r\n      messageResultDetails: [\r\n        {\r\n          keyFields: [\"ShipmentCompDetail_ShipmentNumber\"],\r\n          keyValues: [shipment.ShipmentCode],\r\n          isSuccess: false,\r\n          errorMessage: \"\",\r\n        },\r\n      ],\r\n    };\r\n\r\n    switch (operation) {\r\n      case Constants.ViewAllShipmentOperations.ViewShipment_AuthorizeLoad:\r\n        this.authorizeToLoadOnClick();\r\n\r\n        break;\r\n      case Constants.ViewAllShipmentOperations.ViewShipment_AllowToLoad:\r\n        let staticLoadingDetails = lodash.cloneDeep(\r\n          this.state.staticLoadingDetails\r\n        );\r\n        let rows = staticLoadingDetails.filter((item) => {\r\n          return item.Planned_Quantity !== item.Revised_Planned_Quantity;\r\n        });\r\n        if (rows.length <= 0) this.setState({ isNotRevised: true });\r\n        else {\r\n          this.allowToLoad();\r\n        }\r\n        break;\r\n      case Constants.ViewAllShipmentOperations.ManualEntry:\r\n        this.setState({ isManualEntry: true, isDetails: false }, () => {\r\n          if (this.props.shipmentSource !== undefined)\r\n            this.props.isShowBackButton(false);\r\n        });\r\n        break;\r\n      case Constants.ViewAllShipmentOperations.ViewShipment_RecordWeight:\r\n        this.getRecordWeightList();\r\n        break;\r\n      case Constants.ViewAllShipmentOperations.ViewShipment_CloseShipment:\r\n        this.setState({ isCloseShipment: true });\r\n        break;\r\n      case Constants.ViewAllShipmentOperations.ViewShipmentStatus_PrintFAN:\r\n        this.printFANClick();\r\n        break;\r\n      case Constants.ViewAllShipmentOperations.ViewShipmentStatus_PrintBOL:\r\n        this.printBOLClick();\r\n        break;\r\n      case Constants.ViewAllShipmentOperations.ViewShipmentStatus_ViewBOL:\r\n        let showViewBOLAuthenticationLayout =\r\n          this.props.userDetails.EntityResult.IsWebPortalUser !== true\r\n            ? true\r\n            : false;\r\n\r\n        this.setState({ showViewBOLAuthenticationLayout }, () => {\r\n          if (showViewBOLAuthenticationLayout === false) {\r\n            this.handleViewBOL();\r\n          }\r\n        });\r\n\r\n        break;\r\n      case Constants.ViewAllShipmentOperations.ViewAllShipment_SendBOL:\r\n        this.handleSendBOL(\r\n          shipment.ShipmentCode,\r\n          this.state.selectedShareholder,\r\n          this.props.tokenDetails.tokenInfo,\r\n          (result) => {\r\n            notification.messageType = result.IsSuccess\r\n              ? \"success\"\r\n              : \"critical\";\r\n            notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n            // if (result.IsSuccess === true) {\r\n            //   this.getShipmentList(this.state.selectedShareholder);\r\n            // }\r\n            // else {\r\n            notification.messageResultDetails[0].errorMessage =\r\n              result.ErrorList[0];\r\n            //}\r\n            toast(\r\n              <ErrorBoundary>\r\n                <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n              </ErrorBoundary>,\r\n              {\r\n                autoClose:\r\n                  notification.messageType === \"success\" ? 10000 : false,\r\n              }\r\n            );\r\n          }\r\n        );\r\n        break;\r\n      case Constants.ViewAllShipmentOperations.ViewAllShipment_BSIOutbound:\r\n        this.handleBSIOutbound(\r\n          shipment.ShipmentCode,\r\n          this.state.selectedShareholder,\r\n          this.props.tokenDetails.tokenInfo,\r\n          (result) => {\r\n            notification.messageType = result.IsSuccess\r\n              ? \"success\"\r\n              : \"critical\";\r\n            notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n            // if (result.IsSuccess === true) {\r\n            //   this.getShipmentList(this.state.selectedShareholder);\r\n            // }\r\n            // else {\r\n            notification.messageResultDetails[0].errorMessage =\r\n              result.ErrorList[0];\r\n            //}\r\n            toast(\r\n              <ErrorBoundary>\r\n                <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n              </ErrorBoundary>,\r\n              {\r\n                autoClose:\r\n                  notification.messageType === \"success\" ? 10000 : false,\r\n              }\r\n            );\r\n          }\r\n        );\r\n        break;\r\n      case Constants.ViewAllShipmentOperations.ViewShipment_ViewAuditTrail:\r\n        this.handleViewAuditTrail(\r\n          this.state.selectedShareholder,\r\n          shipment.ShipmentCode,\r\n          this.state.selectedItems[0].ViewShipmentStatus_ShipmentType,\r\n          this.props.tokenDetails.tokenInfo,\r\n          (result) => {\r\n            if (result.IsSuccess === true) {\r\n              let modAuditTrailList = result.EntityResult;\r\n              let attributeMetaDataList = lodash.cloneDeep(\r\n                this.state.attributeMetaDataList.SHIPMENTSTATUSTIME\r\n              );\r\n\r\n              for (let i = 0; i < modAuditTrailList.length; i++) {\r\n                modAuditTrailList[i].UpdatedTime =\r\n                  new Date(\r\n                    modAuditTrailList[i].UpdatedTime\r\n                  ).toLocaleDateString() +\r\n                  \" \" +\r\n                  new Date(\r\n                    modAuditTrailList[i].UpdatedTime\r\n                  ).toLocaleTimeString();\r\n              }\r\n              let auditTrailList = result.EntityResult;\r\n              for (let i = 0; i < auditTrailList.length; i++) {\r\n                auditTrailList[i].AttributesforUI =\r\n                  this.formReadonlyCompAttributes(\r\n                    auditTrailList[i].Attributes,\r\n                    attributeMetaDataList\r\n                  );\r\n              }\r\n\r\n              var { operationsVisibilty } = { ...this.state };\r\n              operationsVisibilty.add = false;\r\n              operationsVisibilty.delete = false;\r\n              this.setState({\r\n                operationsVisibilty,\r\n                auditTrailList: auditTrailList,\r\n                modAuditTrailList: modAuditTrailList,\r\n                isViewAuditTrail: true,\r\n              });\r\n              if (this.props.shipmentSource !== undefined)\r\n                this.props.isShowBackButton(false);\r\n            } else {\r\n              notification.messageType = result.IsSuccess\r\n                ? \"success\"\r\n                : \"critical\";\r\n              notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n              notification.messageResultDetails[0].errorMessage =\r\n                result.ErrorList[0];\r\n              toast(\r\n                <ErrorBoundary>\r\n                  <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n                </ErrorBoundary>,\r\n                {\r\n                  autoClose:\r\n                    notification.messageType === \"success\" ? 10000 : false,\r\n                }\r\n              );\r\n            }\r\n          }\r\n        );\r\n        break;\r\n      case Constants.ViewAllShipmentOperations.ViewShipment_ViewLoadingDetails:\r\n        this.handleViewLoadingDetails(\r\n          shipment.ShipmentCode,\r\n          this.state.selectedShareholder,\r\n          this.props.tokenDetails.tokenInfo,\r\n          (result) => {\r\n            if (result.IsSuccess === true) {\r\n              let modViewLoadingDetails = result.EntityResult;\r\n              let nonConfigColumns = [];\r\n              if (\r\n                modViewLoadingDetails !== null &&\r\n                modViewLoadingDetails.Table !== null &&\r\n                modViewLoadingDetails.Table.length > 0\r\n              ) {\r\n                let count = 0;\r\n                modViewLoadingDetails.Table.forEach((item) => {\r\n                  item.seqNo = count;\r\n                  item.endtime =\r\n                    new Date(item.endtime).toLocaleDateString() +\r\n                    \" \" +\r\n                    new Date(item.endtime).toLocaleTimeString();\r\n                  item.starttime =\r\n                    new Date(item.starttime).toLocaleDateString() +\r\n                    \" \" +\r\n                    new Date(item.starttime).toLocaleTimeString();\r\n                  count++;\r\n                  item.productcode = item.productcode.split(\"&nbsp;\").join(\" \");\r\n                });\r\n              }\r\n\r\n              if (\r\n                modViewLoadingDetails !== null &&\r\n                modViewLoadingDetails.Table1 !== null &&\r\n                modViewLoadingDetails.Table1.length > 0\r\n              ) {\r\n                nonConfigColumns =\r\n                  modViewLoadingDetails.Table1[0].NonConfiguredColumns.split(\r\n                    \",\"\r\n                  );\r\n              }\r\n\r\n              var { operationsVisibilty } = { ...this.state };\r\n              operationsVisibilty.add = false;\r\n              operationsVisibilty.delete = false;\r\n              this.setState({\r\n                operationsVisibilty,\r\n                modViewLoadingDetails: modViewLoadingDetails,\r\n                isViewLoadingDetails: true,\r\n                nonConfigColumns: nonConfigColumns,\r\n              });\r\n\r\n              if (this.props.shipmentSource !== undefined)\r\n                this.props.isShowBackButton(false);\r\n            } else {\r\n              notification.messageType = result.IsSuccess\r\n                ? \"success\"\r\n                : \"critical\";\r\n              notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n              notification.messageResultDetails[0].errorMessage =\r\n                result.ErrorList[0];\r\n              toast(\r\n                <ErrorBoundary>\r\n                  <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n                </ErrorBoundary>,\r\n                {\r\n                  autoClose:\r\n                    notification.messageType === \"success\" ? 10000 : false,\r\n                }\r\n              );\r\n            }\r\n          }\r\n        );\r\n        break;\r\n      case Constants.ViewAllShipmentOperations.ViewAllShipment_SealCompartments:\r\n        this.handleSealCompartments(\r\n          shipment.ShipmentCode,\r\n          this.state.selectedShareholder,\r\n          this.props.tokenDetails.tokenInfo,\r\n          (result) => {\r\n            notification.messageType = result.IsSuccess\r\n              ? \"success\"\r\n              : \"critical\";\r\n            notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n            if (result.IsSuccess === true) {\r\n              //let sealCompartments = []\r\n              this.setState({\r\n                isSealCompartments: true,\r\n                sealCompartments: result.EntityResult,\r\n              });\r\n            } else {\r\n              notification.messageResultDetails[0].errorMessage =\r\n                result.ErrorList[0];\r\n              toast(\r\n                <ErrorBoundary>\r\n                  <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n                </ErrorBoundary>,\r\n                {\r\n                  autoClose:\r\n                    notification.messageType === \"success\" ? 10000 : false,\r\n                }\r\n              );\r\n            }\r\n          }\r\n        );\r\n        break;\r\n      case \"ViewAllocateBay_AllocateBay\":\r\n        this.getBays();\r\n        break;\r\n      case \"ViewAllocateBay_DeallocateBay\":\r\n        this.setState({\r\n          isDeAllocateBay: true,\r\n        });\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n  };\r\n\r\n  getBays = () => {\r\n    let shipment = lodash.cloneDeep(this.state.shipment);\r\n    let products = [];\r\n    shipment.ShipmentCompartments.forEach((element) => {\r\n      products.push(element.FinishedProductCode);\r\n    });\r\n\r\n    const obj = {\r\n      ShareHolderCode: this.state.selectedShareholder,\r\n      KeyCodes: [\r\n        {\r\n          key: \"TransactionType\",\r\n          value: \"SHIPMENT\",\r\n        },\r\n        {\r\n          key: \"TransportationType\",\r\n          value: \"ROAD\",\r\n        },\r\n        {\r\n          key: \"TerminalCode\",\r\n          value: this.state.shipment.ActualTerminalCode,\r\n        },\r\n        {\r\n          key: \"FinishedProductCode\",\r\n          value: products.toString(),\r\n        },\r\n      ],\r\n    };\r\n\r\n    axios(\r\n      RestAPIs.GetAllValidBays,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        var result = response.data;\r\n        if (result.IsSuccess === true) {\r\n          let bayAllocation = result.EntityResult;\r\n          bayAllocation.forEach((element) => {\r\n            element.SupportedProducts.forEach((ele) => {\r\n              if (\r\n                element.AssociatedProduct === \"\" ||\r\n                element.AssociatedProduct === undefined\r\n              ) {\r\n                element.AssociatedProduct = ele.Code;\r\n              } else {\r\n                element.AssociatedProduct += \",\" + ele.Code;\r\n              }\r\n            });\r\n          });\r\n\r\n          this.setState({\r\n            bayData: bayAllocation,\r\n            isAllocateBay: true,\r\n          });\r\n        } else {\r\n          this.setState({\r\n            bayData: [],\r\n            isAllocateBay: true,\r\n          });\r\n          console.log(\"Error in getBays:\", result.ErrorList);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        this.setState({ bayData: [], isReadyToRender: true });\r\n        console.log(\"Error while getBays:\", error);\r\n      });\r\n  };\r\n\r\n  handleRowClick = (item) => {\r\n    try {\r\n      let { operationsVisibilty, activityInfo } = { ...this.state };\r\n      let shipmentDeleteInfo = activityInfo.filter((item) => {\r\n        return (\r\n          item.ActivityCode ===\r\n          Constants.ShipmentActivityInfo.SHIPMENT_ENABLE_DELETE &&\r\n          item.ActionTypeCode === Constants.ActionTypeCode.CHECK\r\n        );\r\n      });\r\n\r\n      var shipmentDeleteStates = [];\r\n      if (shipmentDeleteInfo !== undefined && shipmentDeleteInfo.length > 0)\r\n        shipmentDeleteStates = shipmentDeleteInfo[0].ShipmentStates;\r\n\r\n      operationsVisibilty.add = this.state.popUpContent.length > 0;\r\n      let shipmentType = \"\";\r\n\r\n      if (\r\n        item.ViewShipmentStatus_ShipmentType ===\r\n        Constants.shipmentType.COMPARTMENT\r\n      ) {\r\n        shipmentType = fnSBC;\r\n        operationsVisibilty.delete = this.props.userDetails.EntityResult\r\n          .IsWebPortalUser\r\n          ? false\r\n          : shipmentDeleteStates.indexOf(\r\n            item.ViewShipmentStatus_ShipmentStatus.toUpperCase()\r\n          ) > -1 &&\r\n          Utilities.isInFunction(\r\n            this.props.userDetails.EntityResult.FunctionsList,\r\n            functionGroups.remove,\r\n            fnSBC\r\n          );\r\n      }\r\n\r\n      if (\r\n        item.ViewShipmentStatus_ShipmentType === Constants.shipmentType.PRODUCT\r\n      ) {\r\n        shipmentType = fnSBP;\r\n        operationsVisibilty.delete = this.props.userDetails.EntityResult\r\n          .IsWebPortalUser\r\n          ? false\r\n          : shipmentDeleteStates.indexOf(\r\n            item.ViewShipmentStatus_ShipmentStatus.toUpperCase()\r\n          ) > -1 &&\r\n          Utilities.isInFunction(\r\n            this.props.userDetails.EntityResult.FunctionsList,\r\n            functionGroups.remove,\r\n            fnSBP\r\n          );\r\n      }\r\n      operationsVisibilty.shareholder = false;\r\n\r\n      if (this.props.shipmentSource !== undefined)\r\n        this.props.isShowBackButton(false);\r\n      this.setState({\r\n        isDetails: true,\r\n        selectedRow: item,\r\n        selectedItems: [item],\r\n        operationsVisibilty,\r\n        shipmentType: shipmentType,\r\n      });\r\n    } catch (error) {\r\n      console.log(\"TruckShipmentComposite:Error occured on Row click\", error);\r\n    }\r\n  };\r\n\r\n  handleDelete = () => {\r\n    // console.log(\"Clicked Delete\", this.state.selectedItems);\r\n    try {\r\n      var { operationsVisibilty } = { ...this.state };\r\n      operationsVisibilty.delete = false;\r\n      this.setState({ operationsVisibilty });\r\n      var deleteShipmentsKeys = [];\r\n      for (var i = 0; i < this.state.selectedItems.length; i++) {\r\n        var shCode = this.state.selectedShareholder;\r\n        var shipmentCode = this.state.selectedItems[i][\"Common_Code\"];\r\n        var shipmentType =\r\n          this.state.selectedItems[i][\"ViewShipmentStatus_ShipmentType\"];\r\n        var keyData = {\r\n          keyDataCode: 0,\r\n          ShareHolderCode: shCode,\r\n          KeyCodes: [\r\n            { Key: KeyCodes.shipmentCode, Value: shipmentCode },\r\n            { Key: KeyCodes.shipmentType, Value: shipmentType },\r\n          ],\r\n        };\r\n        deleteShipmentsKeys.push(keyData);\r\n      }\r\n      axios(\r\n        RestAPIs.DeleteShipment,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          deleteShipmentsKeys,\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          var result = response.data;\r\n          var isRefreshDataRequire = result.IsSuccess;\r\n          if (\r\n            result.ResultDataList !== null &&\r\n            result.ResultDataList !== undefined\r\n          ) {\r\n            var failedResultsCount = result.ResultDataList.filter(function (\r\n              res\r\n            ) {\r\n              return !res.IsSuccess;\r\n            }).length;\r\n            if (failedResultsCount === result.ResultDataList.length) {\r\n              isRefreshDataRequire = false;\r\n            } else isRefreshDataRequire = true;\r\n          }\r\n          var notification = Utilities.convertResultsDatatoNotification(\r\n            result,\r\n            \"Shipment_DeletionStatus\",\r\n            [\"ShipmentCode\"]\r\n          );\r\n          if (isRefreshDataRequire) {\r\n            this.setState({ isReadyToRender: false });\r\n            this.handleAuthenticationClose();\r\n            this.getShipmentList(this.state.selectedShareholder);\r\n            this.getKPIList(this.state.selectedShareholder);\r\n            operationsVisibilty.delete = false;\r\n            this.setState({\r\n              selectedItems: [],\r\n              operationsVisibilty,\r\n              selectedRow: {},\r\n            });\r\n            this.handleAuthenticationClose();\r\n          } else {\r\n            operationsVisibilty.delete = true;\r\n            this.setState({ operationsVisibilty });\r\n            this.handleAuthenticationClose();\r\n          }\r\n          notification.messageResultDetails.forEach((messageResult) => {\r\n            if (messageResult.keyFields.length > 0)\r\n              messageResult.keyFields[0] =\r\n                \"ShipmentByCompartmentList_ShipmentCode\";\r\n          });\r\n          toast(\r\n            <ErrorBoundary>\r\n              <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n            </ErrorBoundary>,\r\n            {\r\n              autoClose: notification.messageType === \"success\" ? 10000 : false,\r\n            }\r\n          );\r\n        })\r\n        .catch((error) => {\r\n          console.log(\r\n            \"TruckShipmentComposite:Error occured on handleDelete\",\r\n            error\r\n          );\r\n          var { operationsVisibilty } = { ...this.state };\r\n          operationsVisibilty.delete = true;\r\n          this.setState({ operationsVisibilty });\r\n          this.handleAuthenticationClose();\r\n        });\r\n    } catch (error) {\r\n      console.log(\r\n        \"TruckShipmentComposite:Error occured on handleDelete\",\r\n        error\r\n      );\r\n    }\r\n  };\r\n\r\n  savedEvent = (data, saveType, notification) => {\r\n    try {\r\n      let { operationsVisibilty, activityInfo } = { ...this.state };\r\n      let shipmentDeleteInfo = activityInfo.filter((item) => {\r\n        return (\r\n          item.ActivityCode ===\r\n          Constants.ShipmentActivityInfo.SHIPMENT_ENABLE_DELETE &&\r\n          item.ActionTypeCode === Constants.ActionTypeCode.CHECK\r\n        );\r\n      });\r\n\r\n      var shipmentDeleteStates = [];\r\n      if (shipmentDeleteInfo !== undefined && shipmentDeleteInfo.length > 0)\r\n        shipmentDeleteStates = shipmentDeleteInfo[0].ShipmentStates;\r\n\r\n      if (notification.messageType === \"success\") {\r\n        operationsVisibilty.add = this.state.popUpContent.length > 0;\r\n        operationsVisibilty.delete = this.props.userDetails.EntityResult\r\n          .IsWebPortalUser\r\n          ? false\r\n          : shipmentDeleteStates.indexOf(data.Status.toUpperCase()) > -1 &&\r\n          Utilities.isInFunction(\r\n            this.props.userDetails.EntityResult.FunctionsList,\r\n            functionGroups.remove,\r\n            data.ShipmentType === 0 ? fnSBC : fnSBP\r\n          );\r\n        this.setState({ isDetailsModified: true, operationsVisibilty });\r\n      }\r\n      if (notification.messageType === \"success\" && saveType === \"add\") {\r\n        var selectedItems = [\r\n          {\r\n            Common_Code: data.ShipmentCode,\r\n            Common_Shareholder: this.state.selectedShareholder,\r\n            ViewShipmentStatus_ShipmentType:\r\n              data.ShipmentType === 0\r\n                ? Constants.shipmentType.COMPARTMENT\r\n                : Constants.shipmentType.PRODUCT,\r\n          },\r\n        ];\r\n        this.setState({ selectedItems });\r\n      }\r\n      toast(\r\n        <ErrorBoundary>\r\n          <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n        </ErrorBoundary>,\r\n        {\r\n          autoClose: notification.messageType === \"success\" ? 10000 : false,\r\n        }\r\n      );\r\n    } catch (error) {\r\n      console.log(\"TruckShipmentComposite:Error occured on savedEvent\", error);\r\n    }\r\n  };\r\n\r\n  handleBack = () => {\r\n    try {\r\n      if (\r\n        this.props.shipmentSource !== undefined &&\r\n        this.props.shipmentSourceFromSummary\r\n      ) {\r\n        let operationsVisibilty = { ...this.state.operationsVisibilty };\r\n        operationsVisibilty.add = this.state.popUpContent.length > 0;\r\n        operationsVisibilty.delete = false;\r\n        operationsVisibilty.shareholder = true;\r\n        this.setState({\r\n          isManualEntry: false,\r\n          isViewAuditTrail: false,\r\n          isDetails: false,\r\n          selectedRow: {},\r\n          selectedItems: [],\r\n          operationsVisibilty,\r\n          isViewLoadingDetails: false,\r\n          isSealCompartments: false,\r\n          drawerStatus: false,\r\n          isGoBackToSource: true,\r\n          isReadyToRender: false,\r\n        });\r\n      } else {\r\n        let operationsVisibilty = { ...this.state.operationsVisibilty };\r\n        operationsVisibilty.add = this.state.popUpContent.length > 0;\r\n        operationsVisibilty.delete = false;\r\n        operationsVisibilty.shareholder = true;\r\n        this.setState({\r\n          isManualEntry: false,\r\n          isViewAuditTrail: false,\r\n          isDetails: false,\r\n          selectedRow: {},\r\n          selectedItems: [],\r\n          operationsVisibilty,\r\n          isViewLoadingDetails: false,\r\n          isSealCompartments: false,\r\n          drawerStatus: false,\r\n          isReadyToRender: false,\r\n        });\r\n        this.getShipmentList(this.state.selectedShareholder);\r\n        this.getKPIList(this.state.selectedShareholder);\r\n        this.props.isShowBackButton(true);\r\n      }\r\n    } catch (error) {\r\n      console.log(\"TruckShipmentComposite:Error occured on Back click\", error);\r\n    }\r\n  };\r\n\r\n  handleRangeSelect = ({ to, from }) => {\r\n    if (to !== undefined) this.setState({ toDate: to });\r\n    if (from !== undefined) this.setState({ fromDate: from });\r\n  };\r\n\r\n  RecordLadenWeight() {\r\n    try {\r\n      var keyCode = [\r\n        {\r\n          key: KeyCodes.weighBridgeCode,\r\n          value: this.state.weighBridgeCode,\r\n        },\r\n        {\r\n          key: KeyCodes.weight,\r\n          value: this.state.scadaValue,\r\n        },\r\n        {\r\n          key: KeyCodes.vehicleCode,\r\n          value: this.state.shipment.VehicleCode,\r\n        },\r\n        {\r\n          key: KeyCodes.shipmentCode,\r\n          value: this.state.shipment.ShipmentCode,\r\n        },\r\n        {\r\n          key: KeyCodes.outOfToleranceAllowed,\r\n          value: this.state.allowOutofRangeTW,\r\n        },\r\n      ];\r\n\r\n      let notification = {\r\n        messageType: \"critical\",\r\n        message: \"ViewAllShipment_Record_Weight\",\r\n        messageResultDetails: [\r\n          {\r\n            keyFields: [\"ShipmentCompDetail_ShipmentNumber\"],\r\n            keyValues: [this.state.shipment.ShipmentCode],\r\n            isSuccess: false,\r\n            errorMessage: \"\",\r\n          },\r\n        ],\r\n      };\r\n\r\n      var obj = {\r\n        ShareHolderCode: this.state.selectedShareholder,\r\n        keyDataCode: KeyCodes.weighBridgeCode,\r\n        KeyCodes: keyCode,\r\n      };\r\n      axios(\r\n        RestAPIs.RecordShipmentLadenWeight,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          obj,\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          notification.messageType = response.data.IsSuccess\r\n            ? \"success\"\r\n            : \"critical\";\r\n          notification.messageResultDetails[0].isSuccess =\r\n            response.data.IsSuccess;\r\n          if (response.data.IsSuccess) {\r\n            this.setState({ isRecordWeight: false }, () => {\r\n              this.getShipmentList(this.state.selectedShareholder);\r\n            });\r\n          }\r\n          notification.messageResultDetails[0].errorMessage =\r\n            response.data.ErrorList[0];\r\n          toast(\r\n            <ErrorBoundary>\r\n              <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n            </ErrorBoundary>,\r\n            {\r\n              autoClose: notification.messageType === \"success\" ? 10000 : false,\r\n            }\r\n          );\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error while recording laden weight:\", error);\r\n        });\r\n    } catch (error) {\r\n      console.log(\"Error in GetScadaValue\");\r\n    }\r\n  }\r\n\r\n  RecordTareWeight = () => {\r\n    try {\r\n      var keyCode = [\r\n        {\r\n          key: KeyCodes.weighBridgeCode,\r\n          value: this.state.weighBridgeCode,\r\n        },\r\n        {\r\n          key: KeyCodes.weight,\r\n          value: this.state.scadaValue,\r\n        },\r\n        {\r\n          key: KeyCodes.vehicleCode,\r\n          value: this.state.shipment.VehicleCode,\r\n        },\r\n        {\r\n          key: KeyCodes.shipmentCode,\r\n          value: this.state.shipment.ShipmentCode,\r\n        },\r\n        {\r\n          key: KeyCodes.outOfToleranceAllowed,\r\n          value: this.state.allowOutofRangeTW,\r\n        },\r\n      ];\r\n\r\n      let notification = {\r\n        messageType: \"critical\",\r\n        message: \"ViewAllShipment_Record_Weight\",\r\n        messageResultDetails: [\r\n          {\r\n            keyFields: [\"ShipmentCompDetail_ShipmentNumber\"],\r\n            keyValues: [this.state.shipment.ShipmentCode],\r\n            isSuccess: false,\r\n            errorMessage: \"\",\r\n          },\r\n        ],\r\n      };\r\n\r\n      var obj = {\r\n        ShareHolderCode: this.state.selectedShareholder,\r\n        keyDataCode: KeyCodes.weighBridgeCode,\r\n        KeyCodes: keyCode,\r\n      };\r\n      axios(\r\n        RestAPIs.RecordShipmentTareWeight,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          obj,\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          notification.messageType = response.data.IsSuccess\r\n            ? \"success\"\r\n            : \"critical\";\r\n          notification.messageResultDetails[0].isSuccess =\r\n            response.data.IsSuccess;\r\n          if (response.data.IsSuccess) {\r\n            this.setState({ isRecordWeight: false }, () => {\r\n              this.getShipmentList(this.state.selectedShareholder);\r\n            });\r\n          }\r\n          notification.messageResultDetails[0].errorMessage =\r\n            response.data.ErrorList[0];\r\n\r\n          toast(\r\n            <ErrorBoundary>\r\n              <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n            </ErrorBoundary>,\r\n            {\r\n              autoClose: notification.messageType === \"success\" ? 10000 : false,\r\n            }\r\n          );\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error while recording tare weight:\", error);\r\n        });\r\n    } catch (error) {\r\n      console.log(\"Error in GetScadaValue\");\r\n    }\r\n  };\r\n\r\n  getScadaValue = () => {\r\n    try {\r\n      var keyCode = [\r\n        {\r\n          key: KeyCodes.weighBridgeCode,\r\n          value: this.state.weighBridgeCode,\r\n        },\r\n      ];\r\n      var obj = {\r\n        ShareHolderCode: this.state.selectedShareholder,\r\n        keyDataCode: KeyCodes.weighBridgeCode,\r\n        KeyCodes: keyCode,\r\n      };\r\n      axios(\r\n        RestAPIs.ReadWBScadaValue,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          obj,\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          let notification = {\r\n            messageType: \"critical\",\r\n            message: \"ViewAllShipment_Record_Weight\",\r\n            messageResultDetails: [\r\n              {\r\n                keyFields: [\"ShipmentCompDetail_ShipmentNumber\"],\r\n                keyValues: [this.state.shipment.ShipmentCode],\r\n                isSuccess: false,\r\n                errorMessage: \"\",\r\n              },\r\n            ],\r\n          };\r\n\r\n          notification.messageType = response.data.IsSuccess\r\n            ? \"success\"\r\n            : \"critical\";\r\n          notification.messageResultDetails[0].isSuccess =\r\n            response.data.IsSuccess;\r\n\r\n          if (response.data.IsSuccess) {\r\n            this.setState({ scadaValue: response.data.EntityResult });\r\n          } else {\r\n            notification.messageResultDetails[0].errorMessage =\r\n              response.data.ErrorList[0];\r\n\r\n            toast(\r\n              <ErrorBoundary>\r\n                <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n              </ErrorBoundary>,\r\n              {\r\n                autoClose:\r\n                  notification.messageType === \"success\" ? 10000 : false,\r\n              }\r\n            );\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error while getting weigh brdige Scada value:\", error);\r\n        });\r\n    } catch (error) {\r\n      console.log(\"Error in GetScadaValue\");\r\n    }\r\n  };\r\n\r\n  handleStatus = (e) => {\r\n    if (e === Constants.ShipmentCompartmentStatus.EMPTY) {\r\n      return \"EMPTY\";\r\n    } else if (e === Constants.ShipmentCompartmentStatus.LOADING) {\r\n      return \"LOADING\";\r\n    } else if (e === Constants.ShipmentCompartmentStatus.PART_FILLED) {\r\n      return \"PART_FILLED\";\r\n    } else if (e === Constants.ShipmentCompartmentStatus.OVER_FILLED) {\r\n      return \"OVER_FILLED\";\r\n    } else if (e === Constants.ShipmentCompartmentStatus.FORCE_COMPLETED) {\r\n      return \"FORCE_COMPLETED\";\r\n    } else if (e === Constants.ShipmentCompartmentStatus.COMPLETED) {\r\n      return \"COMPLETED\";\r\n    } else if (e === Constants.ShipmentCompartmentStatus.INTERRUPTED) {\r\n      return \"INTERRUPTED\";\r\n    } else {\r\n      return \"\";\r\n    }\r\n  };\r\n\r\n  getSiteConfigurationLookUP = () => {\r\n    try {\r\n      axios(\r\n        RestAPIs.GetLookUpData + \"?LookUpTypeCode=SiteConfiguration\",\r\n        Utilities.getAuthenticationObjectforGet(\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          const result = response.data;\r\n          if (result.IsSuccess === true) {\r\n            let siteConfiguration = result.EntityResult;\r\n            this.getWeighBridge(siteConfiguration);\r\n          } else {\r\n            console.log(\r\n              \"Error in getSiteConfigurationLookUP: \",\r\n              result.ErrorList\r\n            );\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\r\n            \"TruckShipmentComposite: Error occurred on getSiteConfigurationLookUP\",\r\n            error\r\n          );\r\n        });\r\n    } catch (error) {\r\n      console.log(\r\n        \"TruckShipmentComposite: Error occurred on getSiteConfigurationLookUP\",\r\n        error\r\n      );\r\n    }\r\n  };\r\n\r\n  getWeighBridge(siteConfiguration) {\r\n    try {\r\n      var keyCode = [\r\n        {\r\n          key: KeyCodes.weighBridgeCode,\r\n          value: this.state.weighBridgeCode,\r\n        },\r\n      ];\r\n      var obj = {\r\n        keyDataCode: KeyCodes.weighBridgeCode,\r\n        KeyCodes: keyCode,\r\n      };\r\n      axios(\r\n        RestAPIs.GetWeighBridge,\r\n        Utilities.getAuthenticationObjectforPost(\r\n          obj,\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          var result = response.data;\r\n          if (result.IsSuccess === true) {\r\n            let weighBridge = result.EntityResult;\r\n\r\n            this.getLadenWeightData(\r\n              this.state.vehicleForRecordWeight.TareWeight, //RegisteredTareWeight\r\n              this.state.vehicleForRecordWeight.WeightUOM, //VehicleWeightUOM\r\n              weighBridge.WeightUOM,\r\n              this.state.vehicleForRecordWeight.MaxLoadableWeight, // MaxLoadableWeight\r\n              this.state.scadaValue, //Weight\r\n              siteConfiguration\r\n            );\r\n          } else {\r\n            console.log(\"Error in GetWeighBridge:\", result.ErrorList);\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error while GetWeighBridge:\", error);\r\n        });\r\n    } catch (error) {\r\n      console.log(\"Error in get GetWeighBridge\", error);\r\n    }\r\n  }\r\n\r\n  ValidateLadenWeight(ladenWeighData, siteConfiguration) {\r\n    let notification = {\r\n      messageType: \"critical\",\r\n      message: \"ViewAllShipment_Record_Weight\",\r\n      messageResultDetails: [],\r\n    };\r\n\r\n    var returnValue = true;\r\n\r\n    try {\r\n      let minLadenWeightTolerance =\r\n        siteConfiguration.MinLadenweightQuantityTolerance;\r\n      let maxLadenWeightTolerance =\r\n        siteConfiguration.MaxLadenweightQuantityTolerance;\r\n\r\n      var error = \"\";\r\n      var minLadenWeightTol = 0;\r\n      var maxLadenWeightTol = 0;\r\n\r\n      if (isNaN(parseFloat(this.state.scadaValue))) {\r\n        error = \"MesuredWeight_Improper\";\r\n        returnValue = false;\r\n      } else if (\r\n        isNaN(parseFloat(ladenWeighData[\"ConvertedRegisteredTareWeight\"]))\r\n      ) {\r\n        error = \"Improper_Tare_Weight\";\r\n        returnValue = false;\r\n      } else if (\r\n        isNaN(parseFloat(ladenWeighData[\"ConvertedMaxLoadableWeight\"]))\r\n      ) {\r\n        error = \"Improper_Max_Weight\";\r\n        returnValue = false;\r\n      } else if (\r\n        isNaN(parseFloat(ladenWeighData[\"ConvertedMeasuredTareWeight\"]))\r\n      ) {\r\n        error = \"TareWeight_Not_Captured\";\r\n        returnValue = false;\r\n      }\r\n      if (returnValue === true) {\r\n        minLadenWeightTol =\r\n          ((parseFloat(ladenWeighData[\"ConvertedMeasuredTareWeight\"]) +\r\n            parseFloat(ladenWeighData[\"ConvertedLoadedQty\"])) *\r\n            parseFloat(minLadenWeightTolerance)) /\r\n          100;\r\n\r\n        maxLadenWeightTol =\r\n          ((parseFloat(ladenWeighData[\"ConvertedMeasuredTareWeight\"]) +\r\n            parseFloat(ladenWeighData[\"ConvertedLoadedQty\"])) *\r\n            parseFloat(maxLadenWeightTolerance)) /\r\n          100;\r\n\r\n        if (\r\n          (parseFloat(ladenWeighData[\"ConvertedLoadedQty\"]) >\r\n            parseFloat(ladenWeighData[\"ConvertedMaxLoadableWeight\"])) |\r\n          (parseFloat(this.state.scadaValue) >\r\n            parseFloat(ladenWeighData[\"ConvertedMaxLoadableWeight\"]) +\r\n            parseFloat(ladenWeighData[\"ConvertedRegisteredTareWeight\"]))\r\n        ) {\r\n          error = \"ShipmentWeight_GreaterThan_MaxLoadableWeight\";\r\n        } else if (\r\n          parseFloat(this.state.scadaValue) <\r\n          parseFloat(ladenWeighData[\"ConvertedMeasuredTareWeight\"]) +\r\n          parseFloat(ladenWeighData[\"ConvertedLoadedQty\"]) -\r\n          minLadenWeightTol\r\n        ) {\r\n          error = \"MeasuredWeight_LessThan_ExpectedLoadedWeight\";\r\n        } else if (\r\n          parseFloat(this.state.scadaValue) >\r\n          parseFloat(ladenWeighData[\"ConvertedMeasuredTareWeight\"]) +\r\n          parseFloat(ladenWeighData[\"ConvertedLoadedQty\"]) +\r\n          maxLadenWeightTol\r\n        ) {\r\n          error = \"MeasuredWeight_MoreThan_ExpectedLoadedWeight\";\r\n        }\r\n      } else {\r\n        if (error !== \"\") {\r\n          notification.messageResultDetails.push({\r\n            keyFields: [\"ShipmentCompDetail_ShipmentNumber\"],\r\n            keyValues: [this.state.shipment.ShipmentCode],\r\n            isSuccess: false,\r\n            errorMessage: error,\r\n          });\r\n          this.setState({\r\n            isLadenWeightValid: false,\r\n          });\r\n        }\r\n        if (notification.messageResultDetails.length > 0) {\r\n          toast(\r\n            <ErrorBoundary>\r\n              <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n            </ErrorBoundary>,\r\n            {\r\n              autoClose: notification.messageType === \"success\" ? 10000 : false,\r\n            }\r\n          );\r\n          return false;\r\n        }\r\n      }\r\n\r\n      if (error !== \"\") {\r\n        this.setState({\r\n          isLadenWeightValid: true,\r\n          ladenWeightError: error,\r\n        });\r\n      } else this.RecordLadenWeight();\r\n    } catch (error) {\r\n      console.log(\"Error while validating laden weight : \", error);\r\n    }\r\n    return returnValue;\r\n  }\r\n\r\n  getLadenWeightData(\r\n    RegisteredTareWeight,\r\n    VehicleWeightUOM,\r\n    WeightUOM,\r\n    MaxLoadableWeight,\r\n    Weight,\r\n    siteConfiguration\r\n  ) {\r\n    let trailerWeighData = {};\r\n    try {\r\n      axios(\r\n        RestAPIs.GetLadenWeightData +\r\n        \"?shipmentCode=\" +\r\n        this.state.shipment.ShipmentCode +\r\n        \"&shCode=\" +\r\n        this.state.selectedShareholder +\r\n        \"&vehicleTareWeight=\" +\r\n        RegisteredTareWeight +\r\n        \"&vehicleWeightUOM=\" +\r\n        VehicleWeightUOM +\r\n        \"&weightUOM=\" +\r\n        WeightUOM +\r\n        \"&maxLoadableWeight=\" +\r\n        MaxLoadableWeight +\r\n        \"&weight=\" +\r\n        Weight,\r\n        Utilities.getAuthenticationObjectforGet(\r\n          this.props.tokenDetails.tokenInfo\r\n        )\r\n      )\r\n        .then((response) => {\r\n          if (response.data.IsSuccess) {\r\n            trailerWeighData = response.data.EntityResult;\r\n            this.ValidateLadenWeight(trailerWeighData, siteConfiguration);\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\r\n            \"Error while getting Shipment trailer weigh data Details:\",\r\n            error,\r\n            this.state.shipment\r\n          );\r\n        });\r\n    } catch (error) {\r\n      console.log(\"Error in getLadenWeightData:\", error);\r\n    }\r\n  }\r\n\r\n  handleRecordWeight = () => {\r\n    return (\r\n      <TranslationConsumer>\r\n        {(t) => (\r\n          <Modal open={this.state.isRecordWeight} size=\"small\">\r\n            <Modal.Content>\r\n              <div className=\"col col-lg-12\">\r\n                <h3>\r\n                  {t(\"ViewAllShipment_RecordWeightShipment\") +\r\n                    \" : \" +\r\n                    this.state.shipment.ShipmentCode}\r\n                </h3>\r\n              </div>\r\n              <div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\r\n                <div className=\"col col-lg-9\">\r\n                  <Select\r\n                    fluid\r\n                    placeholder={t(\"Select_WB\")}\r\n                    label={t(\"ViewShipment_WeighBridgeCode\")}\r\n                    value={this.state.weighBridgeCode}\r\n                    options={Utilities.transferListtoOptions(\r\n                      this.state.recordWeightList\r\n                    )}\r\n                    onChange={(cellData) => {\r\n                      this.setState({ weighBridgeCode: cellData }, () =>\r\n                        this.getScadaValue()\r\n                      );\r\n                    }}\r\n                  />\r\n                </div>\r\n                <div className=\"shipmentRecordWeightButtonDiv\">\r\n                  <Button\r\n                    type=\"primary\"\r\n                    size=\"small\"\r\n                    className=\"shipmentRecordWeightButton\"\r\n                    content={t(\"ViewShipment_ReadWeight\")}\r\n                    onClick={() => this.getScadaValue()}\r\n                    disabled={\r\n                      this.state.weighBridgeCode === null ||\r\n                        this.state.weighBridgeCode === \"\" ||\r\n                        this.state.weighBridgeCode === undefined\r\n                        ? true\r\n                        : false\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\r\n                <div className=\"col col-lg-12\">\r\n                  <Input\r\n                    fluid\r\n                    value={this.state.scadaValue}\r\n                    label={t(\"ViewShipment_Weight\")}\r\n                    reserveSpace={false}\r\n                    disabled={true}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\r\n                <div className=\"col col-lg-12\">\r\n                  <Checkbox\r\n                    className=\"LabelEnabled\"\r\n                    label={t(\"Allow_Out_of_Tolerance_for_TW\")}\r\n                    checked={this.state.allowOutofRangeTW}\r\n                    onChange={(cellData) => {\r\n                      this.setState({ allowOutofRangeTW: cellData });\r\n                    }}\r\n                    disabled={false}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </Modal.Content>\r\n            <Modal.Footer>\r\n              <Button\r\n                type=\"primary\"\r\n                className=\"shipmentRecordWeightOtherbuttons\"\r\n                content={t(\"ViewShipment_RecordTareWeight\")}\r\n                onClick={() => this.RecordTareWeight()}\r\n                disabled={\r\n                  this.state.scadaValue === null ||\r\n                    this.state.scadaValue === \"\" ||\r\n                    this.state.scadaValue === undefined\r\n                    ? true\r\n                    : false\r\n                }\r\n              />\r\n              <Button\r\n                type=\"primary\"\r\n                content={t(\"ViewShipment_RecordLadenWeight\")}\r\n                className=\"shipmentRecordWeightOtherbuttons\"\r\n                onClick={() => this.getSiteConfigurationLookUP()}\r\n                disabled={\r\n                  this.state.scadaValue === null ||\r\n                    this.state.scadaValue === \"\" ||\r\n                    this.state.scadaValue === undefined\r\n                    ? true\r\n                    : false\r\n                }\r\n              />\r\n              <Button\r\n                type=\"primary\"\r\n                content={t(\"Cancel\")}\r\n                className=\"shipmentRecordWeightOtherbuttons\"\r\n                onClick={() => {\r\n                  this.setState({\r\n                    isRecordWeight: false,\r\n                    weighBridgeCode: \"\",\r\n                    scadaValue: \"\",\r\n                  });\r\n                }}\r\n              />\r\n            </Modal.Footer>\r\n          </Modal>\r\n        )}\r\n      </TranslationConsumer>\r\n    );\r\n  };\r\n\r\n  handleDateTextChange = (value, error) => {\r\n    if (value === \"\")\r\n      this.setState({ dateError: \"\", toDate: \"\", fromDate: \"\" });\r\n    if (error !== null && error !== \"\")\r\n      this.setState({\r\n        dateError: \"Common_InvalidDate\",\r\n        toDate: \"\",\r\n        fromDate: \"\",\r\n      });\r\n    else {\r\n      this.setState({ dateError: \"\", toDate: value.to, fromDate: value.from });\r\n    }\r\n  };\r\n\r\n  handleLoadOrders = () => {\r\n    let error = Utilities.validateDateRange(\r\n      this.state.toDate,\r\n      this.state.fromDate\r\n    );\r\n\r\n    if (error !== \"\") {\r\n      this.setState({ dateError: error });\r\n    } else {\r\n      this.setState({ dateError: \"\" });\r\n      this.getShipmentList(this.state.selectedShareholder);\r\n    }\r\n  };\r\n\r\n  onBack = () => {\r\n    let operationsVisibilty = { ...this.state.operationsVisibilty };\r\n    operationsVisibilty.add = this.state.popUpContent.length > 0;\r\n    operationsVisibilty.shareholder = true;\r\n    this.setState({\r\n      isManualEntry: false,\r\n      isViewAuditTrail: false,\r\n      isDetails: false,\r\n      isViewLoadingDetails: false,\r\n      operationsVisibilty,\r\n      loadingExpandedRows: [],\r\n      isReadyToRender: false,\r\n    });\r\n    if (this.props.shipmentSource !== undefined)\r\n      this.props.isShowBackButton(true);\r\n    this.getShipmentList(this.state.selectedShareholder);\r\n  };\r\n\r\n  toggleExpand = (data, open) => {\r\n    let loadingExpandedRows = this.state.loadingExpandedRows;\r\n    let expandedRowIndex = loadingExpandedRows.findIndex(\r\n      (item) => item.seqNo === data.seqNo\r\n    );\r\n    if (open) {\r\n      loadingExpandedRows.splice(expandedRowIndex, 1);\r\n    } else {\r\n      loadingExpandedRows.push(data);\r\n    }\r\n    this.setState({ loadingExpandedRows });\r\n  };\r\n\r\n  handleDrawer = () => {\r\n    var drawerStatus = lodash.cloneDeep(this.state.drawerStatus);\r\n    this.setState({\r\n      drawerStatus: !drawerStatus,\r\n    });\r\n  };\r\n\r\n  isNodeEnterpriseOrWebortal() {\r\n    if (\r\n      this.props.userDetails.EntityResult.IsEnterpriseNode ||\r\n      this.props.userDetails.EntityResult.IsWebPortalUser\r\n    ) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  handlePopUpClick = () => {\r\n    if (this.state.operationsVisibilty.add) {\r\n      if (this.state.popUpContent.length > 0) {\r\n        if (this.state.popUpOpen === false) this.setState({ popUpOpen: true });\r\n        else this.setState({ popUpOpen: false });\r\n      }\r\n    }\r\n  };\r\n\r\n  popUpMenuClick = (menuItem) => {\r\n    this.setState({ popUpOpen: false });\r\n    this.handleAdd(menuItem);\r\n  };\r\n\r\n  authenticateDelete = () => {\r\n    try {\r\n      let showDeleteAuthenticationLayout =\r\n        this.props.userDetails.EntityResult.IsWebPortalUser !== true\r\n          ? true\r\n          : false;\r\n      this.setState({ showDeleteAuthenticationLayout });\r\n      if (showDeleteAuthenticationLayout === false) {\r\n        this.handleDelete();\r\n      }\r\n    } catch (error) {\r\n      console.log(\"Shipment Composite : Error in authenticateDelete\");\r\n    }\r\n  };\r\n\r\n  handleAuthenticationClose = () => {\r\n    this.setState({\r\n      showDeleteAuthenticationLayout: false,\r\n      showAuthorizeToLoadAuthenticationLayout: false,\r\n      showAllowToLoadAuthenticationLayout: false,\r\n      showCloseShipmentAuthenticationLayout: false,\r\n      showViewBOLAuthenticationLayout: false,\r\n      showPrintBOLAuthenticationLayout: false,\r\n      showFANAuthenticationLayout: false,\r\n    });\r\n  };\r\n\r\n  getFunctionGroupName() {\r\n    if (\r\n      this.state.showDeleteAuthenticationLayout &&\r\n      (this.state.shipmentType.toLowerCase() === fnSBP || this.state.shipmentType.toLowerCase() === Constants.shipmentType.PRODUCT.toLowerCase())\r\n    )\r\n      return fnSBP;\r\n\r\n    if (\r\n      this.state.showDeleteAuthenticationLayout &&\r\n      (this.state.shipmentType.toLowerCase() === fnSBC || this.state.shipmentType.toLowerCase() === Constants.shipmentType.COMPARTMENT.toLowerCase())\r\n    )\r\n      return fnSBC;\r\n\r\n    else if (this.state.showCloseShipmentAuthenticationLayout)\r\n      return fnCloseShipment;\r\n    else if (\r\n      this.state.showAllowToLoadAuthenticationLayout ||\r\n      this.state.showAuthorizeToLoadAuthenticationLayout\r\n    )\r\n      return fnShipmentStatus;\r\n    else if (\r\n      this.state.showViewBOLAuthenticationLayout ||\r\n      this.state.showPrintBOLAuthenticationLayout\r\n    )\r\n      return fnPrintBOL;\r\n    else if (this.state.showFANAuthenticationLayout) return fnPrintFAN;\r\n  }\r\n\r\n  getDeleteorEditMode() {\r\n    if (this.state.showDeleteAuthenticationLayout) return functionGroups.remove;\r\n    else return functionGroups.modify;\r\n  }\r\n\r\n  handleOperation() {\r\n    if (this.state.showDeleteAuthenticationLayout) return this.handleDelete;\r\n    else if (this.state.showAuthorizeToLoadAuthenticationLayout)\r\n      return this.authorizeToLoad;\r\n    else if (this.state.showAllowToLoadAuthenticationLayout)\r\n      return this.ConfirmedAllowToLoad;\r\n    else if (this.state.showCloseShipmentAuthenticationLayout)\r\n      return this.handleShipmentClose;\r\n    else if (this.state.showFANAuthenticationLayout) return this.printFAN;\r\n    else if (this.state.showViewBOLAuthenticationLayout)\r\n      return this.handleViewBOL;\r\n    else if (this.state.showPrintBOLAuthenticationLayout) return this.printBOL;\r\n  }\r\n\r\n  confirmAllocateBay = () => {\r\n    let bayData = lodash.cloneDeep(this.state.bayData);\r\n    return (\r\n      <TranslationConsumer>\r\n        {(t) => (\r\n          <Modal open={this.state.isAllocateBay} size=\"small\">\r\n            <Modal.Content>\r\n              <div className=\"col col-lg-12\">\r\n                <h3>\r\n                  {t(\"ViewAllocateBay_AllocateBay\")} -{\" \"}\r\n                  {this.state.shipment.ShipmentCode}\r\n                </h3>\r\n              </div>\r\n              <div className=\"col-12 detailsTable\">\r\n                <DataTable\r\n                  className=\"iconblock\"\r\n                  data={bayData}\r\n                  selection={this.state.selectBay}\r\n                  selectionMode=\"single\"\r\n                  showHeader={true}\r\n                  onSelectionChange={(e) => this.setState({ selectBay: e })}\r\n                  rows={\r\n                    this.props.userDetails.EntityResult.PageAttibutes\r\n                      .WebPortalListPageSize\r\n                  }\r\n                  resizableColumns={true}\r\n                >\r\n                  {/* <DataTable.ActionBar /> */}\r\n                  <DataTable.Column\r\n                    className=\"compColHeight compColmiddle\"\r\n                    field={\"BayCode\"}\r\n                    header={t(\"ViewAllocateBay_BayCode\")}\r\n                    editable={false}\r\n                  />\r\n                  <DataTable.Column\r\n                    className=\"compColHeight compColmiddle\"\r\n                    field={\"AssociatedProduct\"}\r\n                    header={t(\"ViewAllocateBay_FinishProduct\")}\r\n                    editable={false}\r\n                  />\r\n                  <DataTable.Column\r\n                    className=\"compColHeight compColmiddle\"\r\n                    field=\"CurrentQueue\"\r\n                    header={t(\"ViewAllocateBay_CurrentQueue\")}\r\n                    editable={false}\r\n                  />\r\n                  <DataTable.Column\r\n                    className=\"compColHeight compColmiddle\"\r\n                    field=\"MaximumQueue\"\r\n                    header={t(\"ViewAllocateBay_MaximumQueue\")}\r\n                    editable={false}\r\n                  />\r\n                  {Array.isArray(bayData) &&\r\n                    bayData.length >\r\n                    this.props.userDetails.EntityResult.PageAttibutes\r\n                      .WebPortalListPageSize ? (\r\n                    <DataTable.Pagination />\r\n                  ) : (\r\n                    \"\"\r\n                  )}\r\n                </DataTable>\r\n              </div>\r\n            </Modal.Content>\r\n            <Modal.Footer>\r\n              <Button\r\n                type=\"primary\"\r\n                content={t(\"MarineEOD_Close\")}\r\n                className=\"cancelButton\"\r\n                onClick={() => this.setState({ isAllocateBay: false })}\r\n              />\r\n              <Button\r\n                type=\"primary\"\r\n                content={t(\"ViewAllocateBay_Allocate\")}\r\n                onClick={() => {\r\n                  if (\r\n                    this.state.selectBay === null ||\r\n                    this.state.selectBay === undefined ||\r\n                    this.state.selectBay.length === 0\r\n                  ) {\r\n                    let notification = {\r\n                      messageType: \"critical\",\r\n                      message: \"ViewAllocateBay_Allocate\",\r\n                      messageResultDetails: [\r\n                        {\r\n                          keyFields: [\"BayCode\"],\r\n                          keyValues: [],\r\n                          isSuccess: false,\r\n                          errorMessage: \"ViewAllocateBay_bayrequired\",\r\n                        },\r\n                      ],\r\n                    };\r\n\r\n                    toast(\r\n                      <ErrorBoundary>\r\n                        <NotifyEvent\r\n                          notificationMessage={notification}\r\n                        ></NotifyEvent>\r\n                      </ErrorBoundary>,\r\n                      {\r\n                        autoClose:\r\n                          notification.messageType === \"success\"\r\n                            ? 10000\r\n                            : false,\r\n                      }\r\n                    );\r\n                  } else {\r\n                    this.AllocateBay(\r\n                      this.state.shipment.ShipmentCode,\r\n                      this.state.selectBay[0].BayCode,\r\n                      \"SHIPMENT\"\r\n                    );\r\n                  }\r\n                }}\r\n              />\r\n            </Modal.Footer>\r\n          </Modal>\r\n        )}\r\n      </TranslationConsumer>\r\n    );\r\n  };\r\n\r\n  confirmDeAllocateBay = () => {\r\n    return (\r\n      <TranslationConsumer>\r\n        {(t) => (\r\n          <Modal open={this.state.isDeAllocateBay} size=\"small\">\r\n            <Modal.Content>\r\n              <div className=\"col col-lg-12\">\r\n                <h5>\r\n                  {t(\"ViewAllocateBay_ConfirmDeallocateBay\", [\r\n                    this.state.ShipmentBay,\r\n                    \"Shipment\",\r\n                  ])}\r\n                </h5>\r\n              </div>\r\n            </Modal.Content>\r\n            <Modal.Footer>\r\n              <Button\r\n                type=\"primary\"\r\n                className=\"cancelButton\"\r\n                content={t(\"Cancel\")}\r\n                onClick={() => {\r\n                  this.setState({ isDeAllocateBay: false });\r\n                }}\r\n              />\r\n              <Button\r\n                type=\"primary\"\r\n                content={t(\"ViewAllocateBay_Deallocate\")}\r\n                onClick={() => {\r\n                  this.setState({ isDeAllocateBay: false }, () => {\r\n                    this.DeAllocateBay(\r\n                      this.state.shipment.ShipmentCode,\r\n                      \"SHIPMENT\",\r\n                      this.state.ShipmentBay\r\n                    );\r\n                  });\r\n                }}\r\n              />\r\n            </Modal.Footer>\r\n          </Modal>\r\n        )}\r\n      </TranslationConsumer>\r\n    );\r\n  };\r\n\r\n  GetBayByTrnsaction(TrnsactionCode, TrnsactionType, shareholder) {\r\n    var keyCode = [\r\n      {\r\n        key: KeyCodes.shipmentCode,\r\n        value: TrnsactionCode,\r\n      },\r\n      {\r\n        key: KeyCodes.TransactionType,\r\n        value: TrnsactionType,\r\n      },\r\n    ];\r\n    var obj = {\r\n      ShareHolderCode: shareholder,\r\n      KeyCodes: keyCode,\r\n    };\r\n    axios(\r\n      RestAPIs.GetBayAllocatedInfoByTransaction,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      ),\r\n      Utilities.getAuthenticationObjectforGet(this.props.tokenDetails.tokenInfo)\r\n    )\r\n      .then((response) => {\r\n        var result = response.data;\r\n        if (result.IsSuccess) {\r\n          this.setState({\r\n            ShipmentBay: result.EntityResult.BayCode,\r\n          });\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while GetBayByTrnsaction:\", error);\r\n      });\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {*} shipmentCode\r\n   * @param {*} bayCode\r\n   * @param {*} entityType shipment or receipt\r\n   */\r\n  AllocateBay(shipmentCode, bayCode, entityType) {\r\n    var keyCode = [\r\n      {\r\n        key: KeyCodes.shipmentCode,\r\n        value: shipmentCode,\r\n      },\r\n      {\r\n        key: KeyCodes.bayCode,\r\n        value: bayCode,\r\n      },\r\n      {\r\n        key: KeyCodes.entityType,\r\n        value: entityType,\r\n      },\r\n    ];\r\n    var obj = {\r\n      ShareHolderCode: this.state.selectedShareholder,\r\n      keyDataCode: KeyCodes.shipmentCode,\r\n      KeyCodes: keyCode,\r\n    };\r\n    let notification = {\r\n      messageType: \"critical\",\r\n      message: \"BayAllocation_SaveStatus\",\r\n      messageResultDetails: [\r\n        {\r\n          keyFields: [\"BayCode\"],\r\n          keyValues: [bayCode],\r\n          isSuccess: false,\r\n          errorMessage: \"\",\r\n        },\r\n      ],\r\n    };\r\n    axios(\r\n      RestAPIs.AllocateBay,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        var result = response.data;\r\n        notification.messageType = result.IsSuccess ? \"success\" : \"critical\";\r\n        notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n        if (result.IsSuccess === true) {\r\n          this.getShipmentList(this.state.selectedShareholder);\r\n          this.setState({ isAllocateBay: false });\r\n        } else {\r\n          notification.messageResultDetails[0].errorMessage =\r\n            result.ResultDataList[0].ErrorList[0];\r\n        }\r\n        toast(\r\n          <ErrorBoundary>\r\n            <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n          </ErrorBoundary>,\r\n          {\r\n            autoClose: notification.messageType === \"success\" ? 10000 : false,\r\n          }\r\n        );\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while AllocateBay:\", error);\r\n      });\r\n  }\r\n\r\n  DeAllocateBay(shipmentCode, entityType, bayCode) {\r\n    var keyCode = [\r\n      {\r\n        key: KeyCodes.shipmentCode,\r\n        value: shipmentCode,\r\n      },\r\n      {\r\n        key: KeyCodes.entityType,\r\n        value: entityType,\r\n      },\r\n    ];\r\n    var obj = {\r\n      ShareHolderCode: this.state.selectedShareholder,\r\n      KeyCodes: keyCode,\r\n    };\r\n    let notification = {\r\n      messageType: \"critical\",\r\n      message: \"BayDeAllocation_SavedStatus\",\r\n      messageResultDetails: [\r\n        {\r\n          keyFields: [\"BayCode\"],\r\n          keyValues: [bayCode],\r\n          isSuccess: false,\r\n          errorMessage: \"\",\r\n        },\r\n      ],\r\n    };\r\n    axios(\r\n      RestAPIs.DeallocateShipment,\r\n      Utilities.getAuthenticationObjectforPost(\r\n        obj,\r\n        this.props.tokenDetails.tokenInfo\r\n      )\r\n    )\r\n      .then((response) => {\r\n        var result = response.data;\r\n        notification.messageType = result.IsSuccess ? \"success\" : \"critical\";\r\n        notification.messageResultDetails[0].isSuccess = result.IsSuccess;\r\n        if (result.IsSuccess === true) {\r\n          this.getShipmentList(this.state.selectedShareholder);\r\n        } else {\r\n          notification.messageResultDetails[0].errorMessage =\r\n            result.ErrorList[0];\r\n        }\r\n        toast(\r\n          <ErrorBoundary>\r\n            <NotifyEvent notificationMessage={notification}></NotifyEvent>\r\n          </ErrorBoundary>,\r\n          {\r\n            autoClose: notification.messageType === \"success\" ? 10000 : false,\r\n          }\r\n        );\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error while DeAllocateBay:\", error);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const popUpContents = [\r\n      {\r\n        fieldName: \"DriverInfo_LastUpdated\",\r\n        fieldValue:\r\n          new Date(this.state.shipment.LastUpdatedTime).toLocaleDateString() +\r\n          \" \" +\r\n          new Date(this.state.shipment.LastUpdatedTime).toLocaleTimeString(),\r\n      },\r\n      {\r\n        fieldName: \"DriverInfo_LastActive\",\r\n        fieldValue:\r\n          this.state.shipment.LastActiveTime !== undefined &&\r\n            this.state.shipment.LastActiveTime !== null\r\n            ? new Date(\r\n              this.state.shipment.LastActiveTime\r\n            ).toLocaleDateString() +\r\n            \" \" +\r\n            new Date(this.state.shipment.LastActiveTime).toLocaleTimeString()\r\n            : \"\",\r\n      },\r\n      {\r\n        fieldName: \"DriverInfo_CreatedTime\",\r\n        fieldValue:\r\n          new Date(this.state.shipment.CreatedTime).toLocaleDateString() +\r\n          \" \" +\r\n          new Date(this.state.shipment.CreatedTime).toLocaleTimeString(),\r\n      },\r\n    ];\r\n    let fillPage = true;\r\n    let shipmentSelected = this.state.selectedItems.length === 1;\r\n    // && this.props.userDetails.EntityResult.IsEnterpriseNode === false;\r\n    let loadingClass = \"globalLoader\";\r\n    if (\r\n      this.props.shipmentSource !== undefined &&\r\n      this.props.shipmentSource !== \"\" &&\r\n      this.props.shipmentSource !== null\r\n    ) {\r\n      fillPage = false;\r\n      loadingClass = \"nestedList\";\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        {this.props.shipmentSource === undefined ||\r\n          this.props.shipmentSource === \"\" ||\r\n          this.props.shipmentSource === null ? (\r\n          <ErrorBoundary>\r\n            <TMUserActionsComposite\r\n              operationsVisibilty={this.state.operationsVisibilty}\r\n              breadcrumbItem={this.props.activeItem}\r\n              shareholders={this.props.userDetails.EntityResult.ShareholderList}\r\n              selectedShareholder={this.state.selectedShareholder}\r\n              onShareholderChange={this.handleShareholderSelectionChange}\r\n              //onDelete={() => { }}\r\n              onDelete={this.authenticateDelete}\r\n              onAdd={this.handleAdd}\r\n              popUpContent={\r\n                this.state.popUpContent.length > 0\r\n                  ? this.state.popUpContent\r\n                  : []\r\n              }\r\n              handleBreadCrumbClick={this.props.handleBreadCrumbClick}\r\n            ></TMUserActionsComposite>\r\n          </ErrorBoundary>\r\n        ) : (\r\n          <>\r\n            {this.state.isDetails ? (\r\n              \"\"\r\n            ) : (\r\n              <>\r\n                {!this.state.isGoBackToSource ? (\r\n                  <TranslationConsumer>\r\n                    {(t) => (\r\n                      <div className=\"headerContainer\">\r\n                        <div className=\"row headerSpacing\">\r\n                          <div className=\"col paddingHeaderItemLeft\">\r\n                            <span\r\n                              style={{ margin: \"auto\" }}\r\n                              className=\"headerLabel\"\r\n                            >\r\n                              {this.props.shipmentSourceCode +\r\n                                \" - \" +\r\n                                t(\"Shipment_OtherSource\")}\r\n                            </span>\r\n                          </div>\r\n                          <div className=\"headerItemRight\">\r\n                            {/* <div> */}\r\n                            {/* <div className=\"col col-md-8 col-lg-9 col col-xl-12\" style={{ textAlign: \"right\" }}> */}\r\n                            <Popup\r\n                              element={\r\n                                <div>\r\n                                  <Button\r\n                                    type=\"primary\"\r\n                                    content={t(\"Add_Shipment\")}\r\n                                    disabled={\r\n                                      this.props.shipmentSource ===\r\n                                        Constants.shipmentFrom.Contract\r\n                                        ? !this.state.isContractDisable\r\n                                        : this.props.shipmentSource ===\r\n                                          Constants.shipmentFrom.Order\r\n                                          ? !this.state.isOrderDisable\r\n                                          : false\r\n                                    }\r\n                                    onClick={this.handlePopUpClick}\r\n                                  />\r\n                                </div>\r\n                              }\r\n                              on=\"click\"\r\n                              open={this.state.popUpOpen}\r\n                            >\r\n                              <div\r\n                                onMouseLeave={() =>\r\n                                  this.setState({ popUpOpen: false })\r\n                                }\r\n                              >\r\n                                <VerticalMenu style={{ textAlign: \"right\" }}>\r\n                                  <VerticalMenu>\r\n                                    <VerticalMenu.Header>\r\n                                      {t(\"Common_Create\")}\r\n                                    </VerticalMenu.Header>\r\n                                    {this.state.popUpContent.map((item) => {\r\n                                      return (\r\n                                        <VerticalMenu.Item\r\n                                          onClick={() =>\r\n                                            this.popUpMenuClick(item.fieldName)\r\n                                          }\r\n                                        >\r\n                                          {t(item.fieldValue)}\r\n                                        </VerticalMenu.Item>\r\n                                      );\r\n                                    })}\r\n                                  </VerticalMenu>\r\n                                </VerticalMenu>\r\n                              </div>\r\n                            </Popup>\r\n                          </div>\r\n                          {/* </div> */}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </TranslationConsumer>\r\n                ) : null}\r\n              </>\r\n            )}\r\n          </>\r\n        )}\r\n        {this.state.isGoBackToSource ? (\r\n          <ErrorBoundary>\r\n            {this.props.shipmentSource === Constants.shipmentFrom.Order ? (\r\n              <OrderComposite\r\n                shipmentSource={this.props.shipmentSource}\r\n              ></OrderComposite>\r\n            ) : this.props.shipmentSource ===\r\n              Constants.shipmentFrom.Contract ? (\r\n              <ContractComposite\r\n                shipmentSource={this.props.shipmentSource}\r\n                activeItem={this.props.activeItem}\r\n              ></ContractComposite>\r\n            ) : null}\r\n          </ErrorBoundary>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n\r\n        {this.state.isDetails && this.state.shipmentType ? (\r\n          <ErrorBoundary>\r\n            <TruckShipmentDetailsComposite\r\n              key=\"ShipmentDetails\"\r\n              selectedRow={this.state.selectedRow}\r\n              onBack={this.handleBack}\r\n              onSaved={this.savedEvent}\r\n              terminalCodes={this.state.terminalCodes}\r\n              selectedShareholder={this.state.selectedShareholder}\r\n              ShipmentType={this.state.shipmentType}\r\n              handleAuthorizeToLoad={this.handleAuthorizeToLoad}\r\n              handleAllowToLoad={this.handleAllowToLoad}\r\n              handleViewAuditTrail={this.handleViewAuditTrail}\r\n              handleViewLoadingDetails={this.handleViewLoadingDetails}\r\n              handlePrintFAN={this.handlePrintFAN}\r\n              handlePrintBOL={this.handlePrintBOL}\r\n              handleSendBOL={this.handleSendBOL}\r\n              handleBSIOutbound={this.handleBSIOutbound}\r\n              handleSealCompartments={this.handleSealCompartments}\r\n              handleViewBOL={this.handleViewBOL}\r\n              shipmentSource={this.props.shipmentSource}\r\n              shipmentSourceCode={this.props.shipmentSourceCode}\r\n              shipmentSourceCompartmentItems={\r\n                this.props.shipmentSourceCompartmentItems\r\n              }\r\n              shipmentSourceDetails={this.props.shipmentSourceDetails}\r\n              shipmentSourceFromSummary={this.props.shipmentSourceFromSummary}\r\n              selectedSourceCode={this.props.selectedSourceCode}\r\n            ></TruckShipmentDetailsComposite>\r\n          </ErrorBoundary>\r\n        ) : (\r\n          <div>\r\n            {this.state.isViewAuditTrail ? (\r\n              <ErrorBoundary>\r\n                <TruckShipmentViewAuditTrailDetails\r\n                  ShipmentCode={this.state.selectedItems[0].Common_Code}\r\n                  auditTrailList={this.state.auditTrailList}\r\n                  modAuditTrailList={this.state.modAuditTrailList}\r\n                  Attributes={\r\n                    this.state.auditTrailList !== undefined &&\r\n                      this.state.auditTrailList.length > 0\r\n                      ? this.state.auditTrailList[0].AttributesforUI\r\n                      : []\r\n                  }\r\n                  handleBack={this.onBack}\r\n                ></TruckShipmentViewAuditTrailDetails>\r\n              </ErrorBoundary>\r\n            ) : this.state.isViewLoadingDetails ? (\r\n              <ErrorBoundary>\r\n                <TruckShipmentViewLoadingDetails\r\n                  ShipmentCode={this.state.selectedItems[0].Common_Code}\r\n                  modLoadingDetails={this.state.modViewLoadingDetails}\r\n                  handleBack={this.onBack}\r\n                  expandedRows={this.state.loadingExpandedRows}\r\n                  toggleExpand={this.toggleExpand}\r\n                  nonConfigColumns={this.state.nonConfigColumns}\r\n                ></TruckShipmentViewLoadingDetails>\r\n              </ErrorBoundary>\r\n            ) : this.state.isManualEntry ? (\r\n              <ErrorBoundary>\r\n                <TranslationConsumer>\r\n                  {(t) => (\r\n                    <TMDetailsHeader\r\n                      entityCode={\r\n                        this.state.shipment.ShipmentCode +\r\n                        \" - \" +\r\n                        t(\"LoadingDetailsEntry_Title\")\r\n                      }\r\n                      popUpContents={popUpContents}\r\n                    ></TMDetailsHeader>\r\n                  )}\r\n                </TranslationConsumer>\r\n                <TruckShipmentManualEntryDetailsComposite\r\n                  shipment={this.state.shipment}\r\n                  handleBack={this.onBack}\r\n                  selectedShareholder={this.state.selectedShareholder}\r\n                ></TruckShipmentManualEntryDetailsComposite>\r\n              </ErrorBoundary>\r\n            ) : (\r\n              <div>\r\n                {this.props.shipmentSource === undefined ||\r\n                  this.props.shipmentSource === \"\" ||\r\n                  this.props.shipmentSource === null ? (\r\n                  <ErrorBoundary>\r\n                    <div className=\"kpiSummaryContainer\">\r\n                      <KPIDashboardLayout\r\n                        kpiList={this.state.truckShipmentKPIList}\r\n                        pageName=\"TruckShipment\"\r\n                      ></KPIDashboardLayout>\r\n                    </div>\r\n                  </ErrorBoundary>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n                <div\r\n                  // className={\r\n                  //   shipmentSelected ? \"showShipmentStatusRightPane\" : \"\"\r\n                  // }\r\n                  className={\r\n                    (shipmentSelected &&\r\n                      Array.isArray(this.state.shipment.ShipmentCompartments) &&\r\n                      this.state.shipment.ShipmentCompartments.length > 0) //&& this.props.shipmentSource === undefined\r\n                      ? !this.state.drawerStatus\r\n                        ? \"showShipmentStatusRightPane\"\r\n                        : \"drawerClose\"\r\n                      : \"\"\r\n                  }\r\n                >\r\n                  {this.props.shipmentSourceFromSummary === undefined ||\r\n                    this.props.shipmentSourceFromSummary === \"\" ||\r\n                    this.props.shipmentSourceFromSummary === null ? (\r\n                    <div>\r\n                      <ErrorBoundary>\r\n                        {this.props.shipmentSource === undefined ? (\r\n                          <div>\r\n                            <TMTransactionFilters\r\n                              dateRange={{\r\n                                from: this.state.fromDate,\r\n                                to: this.state.toDate,\r\n                              }}\r\n                              dateError={this.state.dateError}\r\n                              handleDateTextChange={this.handleDateTextChange}\r\n                              handleRangeSelect={this.handleRangeSelect}\r\n                              handleLoadOrders={this.handleLoadOrders}\r\n                              filterText=\"LoadShipments\"\r\n                            ></TMTransactionFilters>\r\n                          </div>\r\n                        ) : null}\r\n                      </ErrorBoundary>\r\n                      {this.state.isReadyToRender ? (\r\n                        <ErrorBoundary>\r\n                          <div\r\n                            className={\r\n                              fillPage === true\r\n                                ? \"compositeTransactionList\"\r\n                                : \"\"\r\n                            }\r\n                          >\r\n                            <TruckShipmentSummaryPageComposite\r\n                              tableData={this.state.data.Table}\r\n                              columnDetails={this.state.data.Column}\r\n                              pageSize={\r\n                                this.props.userDetails.EntityResult\r\n                                  .PageAttibutes.WebPortalListPageSize\r\n                              }\r\n                              exportRequired={true}\r\n                              exportFileName=\"TruckShipmentList\"\r\n                              columnPickerRequired={true}\r\n                              terminalsToShow={\r\n                                this.props.userDetails.EntityResult\r\n                                  .PageAttibutes.NoOfTerminalsToShow\r\n                              }\r\n                              selectionRequired={true}\r\n                              columnGroupingRequired={true}\r\n                              onSelectionChange={this.handleSelection}\r\n                              onRowClick={this.handleRowClick}\r\n                              fillPage={fillPage}\r\n                              parentComponent={this.componentName}\r\n                              selectedItems={this.state.selectedItems}\r\n                            ></TruckShipmentSummaryPageComposite>\r\n                          </div>\r\n                        </ErrorBoundary>\r\n                      ) : (\r\n                        <LoadingPage\r\n                          loadingClass={loadingClass}\r\n                          message=\"\"\r\n                        ></LoadingPage>\r\n                      )}\r\n                    </div>\r\n                  ) : (\r\n                    \"\"\r\n                  )}\r\n                </div>\r\n                {\r\n                  (shipmentSelected &&\r\n                    Array.isArray(this.state.shipment.ShipmentCompartments) &&\r\n                    this.state.shipment.ShipmentCompartments.length > 0) ? ( //&& this.props.shipmentSource === undefined\r\n                    <div\r\n                      // className=\"showShipmentStatusLeftPane\"\r\n                      className={\r\n                        this.state.drawerStatus ? \"marineStatusLeftPane\" : \"\"\r\n                      }\r\n                    >\r\n                      <TransactionSummaryOperations\r\n                        selectedItem={this.state.selectedItems}\r\n                        shipmentNextOperations={this.state.shipmentNextOperations}\r\n                        handleDetailsPageClick={this.handleRowClick}\r\n                        handleOperationButtonClick={this.handleOperationClick}\r\n                        currentStatuses={this.state.currentShipmentStatuses}\r\n                        unAllowedOperations={[\r\n                          \"ManualEntry\",\r\n                          \"ViewShipment_AuthorizeLoad\",\r\n                          \"ViewShipment_AllowToLoad\",\r\n                          \"ViewShipment_RecordWeight\",\r\n                          \"ViewAllocateBay_AllocateBay\",\r\n                          \"ViewAllocateBay_DeallocateBay\",\r\n                          \"ViewShipment_CloseShipment\",\r\n                          \"ViewShipmentStatus_PrintFAN\",\r\n                        ]}\r\n                        webPortalAllowedOperations={[\r\n                          \"ViewShipment_ViewLoadingDetails\",\r\n                          \"ViewShipmentStatus_ViewBOL\",\r\n                          \"ViewShipment_ViewAuditTrail\",\r\n                        ]}\r\n                        isWebPortalUser={\r\n                          this.props.userDetails.EntityResult.IsWebPortalUser\r\n                        }\r\n                        isDetails={false}\r\n                        isEnterpriseNode={\r\n                          this.props.userDetails.EntityResult.IsEnterpriseNode\r\n                        }\r\n                        handleDrawer={this.handleDrawer}\r\n                        title={\"ViewAllShipment_Details\"}\r\n                      />\r\n                    </div>\r\n                  ) : (\r\n                    \"\"\r\n                  )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n        {Object.keys(this.state.selectedRow).length > 0 ||\r\n          this.state.selectedItems.length === 1\r\n          ? this.renderModal()\r\n          : \"\"}\r\n        {this.state.showDeleteAuthenticationLayout ||\r\n          this.state.showAllowToLoadAuthenticationLayout ||\r\n          this.state.showAuthorizeToLoadAuthenticationLayout ||\r\n          this.state.showCloseShipmentAuthenticationLayout ||\r\n          this.state.showViewBOLAuthenticationLayout ||\r\n          this.state.showPrintBOLAuthenticationLayout ||\r\n          this.state.showFANAuthenticationLayout ? (\r\n          <UserAuthenticationLayout\r\n            Username={this.props.userDetails.EntityResult.UserName}\r\n            functionName={this.getDeleteorEditMode()}\r\n            functionGroup={this.getFunctionGroupName()}\r\n            handleClose={this.handleAuthenticationClose}\r\n            handleOperation={this.handleOperation()}\r\n          ></UserAuthenticationLayout>\r\n        ) : null}\r\n\r\n        {this.props.shipmentSource === undefined ? (\r\n          <ErrorBoundary>\r\n            <ToastContainer\r\n              hideProgressBar={true}\r\n              closeOnClick={false}\r\n              closeButton={true}\r\n              newestOnTop={true}\r\n              position=\"bottom-right\"\r\n              toastClassName=\"toast-notification-wrap\"\r\n            />\r\n          </ErrorBoundary>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        {this.state.isRecordWeight ? this.handleRecordWeight() : null}\r\n        {this.state.isSealCompartments ? (\r\n          <ErrorBoundary>\r\n            <TruckShipmentSealDetailsComposite\r\n              transactionCode={this.state.shipment.ShipmentCode}\r\n              selectedShareholder={this.state.selectedShareholder}\r\n              sealCompartments={this.state.sealCompartments}\r\n              handleSealClose={this.handleSealClose}\r\n            ></TruckShipmentSealDetailsComposite>\r\n          </ErrorBoundary>\r\n        ) : null}\r\n        {this.state.isNotRevised ? this.confirmAllowToLoad() : null}\r\n        {this.state.isCloseShipment ? this.handleCloseShipmentModal() : null}\r\n        {this.state.isLadenWeightValid ? this.confirmRecordLadenWeight() : null}\r\n        {this.state.isAllocateBay ? this.confirmAllocateBay() : null}\r\n        {this.state.isDeAllocateBay ? this.confirmDeAllocateBay() : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    userDetails: state.getUserDetails.userDetails,\r\n    tokenDetails: state.getUserDetails.TokenAuth,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(TruckShipmentComposite);\r\n\r\nTruckShipmentComposite.propTypes = {\r\n  activeItem: PropTypes.object,\r\n  shipmentSource: PropTypes.number,\r\n  shipmentSourceCode: PropTypes.string,\r\n  selectedShareholder: PropTypes.string,\r\n  shipmentSourceCompartmentItems: PropTypes.array,\r\n  shipmentSourceDetails: PropTypes.object,\r\n  shipmentSourceFromSummary: PropTypes.bool,\r\n  shipmentType: PropTypes.string,\r\n  selectedSourceCode: PropTypes.array,\r\n};\r\n","import React from \"react\";\r\nimport { TranslationConsumer } from \"@scuf/localization\";\r\nimport { DatePicker, Button } from \"@scuf/common\";\r\nimport { getCurrentDateFormat } from \"../../../JS/functionalUtilities\";\r\n\r\nexport function TMTransactionFilters({\r\n  handleDateTextChange,\r\n  handleRangeSelect,\r\n  handleLoadOrders,\r\n  dateError,\r\n  dateRange,\r\n  filterText,\r\n}) {\r\n  //console.log(dateError);\r\n\r\n  return (\r\n    <TranslationConsumer>\r\n      {(t) => (\r\n        <div className=\"dateRangeContainer\">\r\n          <div className=\"dateRangeMargin\">\r\n            <DatePicker\r\n              type=\"daterange\"\r\n              closeOnSelection={true}\r\n              error={t(dateError)}\r\n              displayFormat={getCurrentDateFormat()}\r\n              //value={dateRange}\r\n              rangeValue={dateRange}\r\n              onTextChange={handleDateTextChange}\r\n              onRangeSelect={handleRangeSelect}\r\n              reserveSpace={false}\r\n            />\r\n          </div>\r\n          <div className=\"dateSearch\">\r\n            <Button content={t(filterText)} onClick={handleLoadOrders} />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </TranslationConsumer>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport * as WjCore from \"@grapecity/wijmo\";\r\nimport { ReportViewer } from \"@grapecity/wijmo.react.viewer\";\r\nimport * as wjViewer from \"@grapecity/wijmo.viewer\";\r\nimport \"@grapecity/wijmo.styles/wijmo.css\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as Constants from \"./../../../JS/Constants\";\r\nimport { connect } from \"react-redux\";\r\n\r\nTMReportViewer.propTypes = {\r\n  proxyServerHost: PropTypes.string.isRequired,\r\n  reportServiceHost: PropTypes.string.isRequired,\r\n  parameters: PropTypes.object.isRequired,\r\n};\r\n\r\nTMReportViewer.defaultProps = {\r\n  parameters: {},\r\n};\r\n\r\nWjCore.setLicenseKey(Constants.wizmoKey);\r\n\r\nfunction TMReportViewer({\r\n  proxyServerHost,\r\n  reportServiceHost,\r\n  parameters,\r\n  filePath,\r\n  ...props\r\n}) {\r\n  //   const [proxyHost, setProxyHost] = useState(\r\n  //     \"http://localhost:8888/TMWebProxyAPI/\"\r\n  //   );\r\n  //   const [reportServiceHost, setReportServiceHost] = useState(\r\n  //     \"http://localhost:5632/\"\r\n  //   );\r\n  //   const [reportUrl, setReportUrl] = useState(proxyHost + \"api/report\");\r\n  //   const [filePath, setFilePath] = useState(\r\n  //     \"TM/\" + \"TMReports/\" + \"CarrierCompanyReport\"\r\n  //   );\r\n  const reportUrl = proxyServerHost + \"api/report\";\r\n  //const filePath = \"TM/\" + \"TMReports/\" + reportName;\r\n\r\n  const beforeXhrRequestSend = (s, event) => {\r\n    // use this event for Authorization purpose\r\n    const prevBeforeSend = event.settings.beforeSend;\r\n    event.settings.beforeSend = function (xhr) {\r\n      prevBeforeSend && prevBeforeSend(xhr);\r\n      //here you may add the params for XMLHttpRequest as required\r\n      if (!props.userDetails.EntityResult.IsWebPortalUser)\r\n        xhr.withCredentials = true;\r\n      if (xhr.URL_DEBUG.indexOf(\"parameters\") > -1) {\r\n        xhr.onreadystatechange = function () {\r\n          if (this.readyState === 4 && this.status === 200) {\r\n            var host = s.hostElement;\r\n            setTimeout(() => {\r\n              var splitter = host.querySelector(\".wj-viewer-splitter\");\r\n              var param = host\r\n                .querySelector(\".wj-viewer-tabsleft\")\r\n                .querySelectorAll(\"li\")[2];\r\n              if (!param.disabled) {\r\n                param.className = \"hidden\";\r\n                splitter.click();\r\n              }\r\n            }, 1000);\r\n          }\r\n        };\r\n      }\r\n    };\r\n  };\r\n  let header = {\r\n    Authorization: \"Bearer \" + props.tokenDetails.tokenInfo,\r\n  };\r\n\r\n  // let header = {\r\n  //   Authorization: \"Bearer \" + \"fiewjfjewifi\",\r\n  // };\r\n\r\n  const initViewer = (s, event) => {\r\n    wjViewer._ReportService.prototype.load = function (data) {\r\n      var _this = this;\r\n      var promise = new wjViewer._Promise();\r\n      if (!this._checkReportController(promise)) {\r\n        return promise;\r\n      }\r\n      this.httpRequest(this._getReportInstancesUrl(), {\r\n        method: \"POST\",\r\n        data: data,\r\n      }).then(\r\n        function (xhr) {\r\n          var v = wjViewer._parseReportExecutionInfo(xhr.responseText);\r\n          _this._instanceId = v.id;\r\n          _this._status = wjViewer._ExecutionStatus.loaded;\r\n          _this._outlinesLocation = v.outlinesLocation;\r\n          _this._statusLocation = v.statusLocation.replace(\r\n            reportServiceHost,\r\n            proxyServerHost\r\n          );\r\n          _this._pageSettingsLocation = v.pageSettingsLocation;\r\n          _this._featuresLocation = v.featuresLocation;\r\n          _this._parametersLocation = v.parametersLocation;\r\n          promise.resolve(v);\r\n        },\r\n        function (xhr) {\r\n          promise.reject(_this._getError(xhr));\r\n        }\r\n      );\r\n      return promise;\r\n    };\r\n  };\r\n\r\n  //console.log(props.userDetails.EntityResult.IsWebPortalUser, header);\r\n  return (\r\n    <div>\r\n      {props.userDetails.EntityResult.IsWebPortalUser ? (\r\n        <div>\r\n          <ReportViewer\r\n            requestHeaders={header}\r\n            style={{ height: \"80vh\" }}\r\n            parameters={parameters}\r\n            serviceUrl={reportUrl}\r\n            filePath={filePath}\r\n            initialized={initViewer}\r\n            beforeSendRequest={beforeXhrRequestSend}\r\n          />\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          <ReportViewer\r\n            //requestHeaders={header}\r\n            style={{ height: \"80vh\" }}\r\n            parameters={parameters}\r\n            serviceUrl={reportUrl}\r\n            filePath={filePath}\r\n            initialized={initViewer}\r\n            beforeSendRequest={beforeXhrRequestSend}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    userDetails: state.getUserDetails.userDetails,\r\n    tokenDetails: state.getUserDetails.TokenAuth,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(TMReportViewer);\r\n","import React from \"react\";\r\nimport { Modal, Button, Header } from \"@scuf/common\";\r\nimport TMReportViewer from \"../Common/TMReportViewer\";\r\nimport { useTranslation } from \"@scuf/localization\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nReportDetails.propTypes = {\r\n  proxyServerHost: PropTypes.string.isRequired,\r\n  reportServiceHost: PropTypes.string.isRequired,\r\n  filePath: PropTypes.string.isRequired,\r\n  handleBack: PropTypes.func.isRequired,\r\n  showReport: PropTypes.bool.isRequired,\r\n  handleModalClose: PropTypes.func.isRequired,\r\n  parameters: PropTypes.object.isRequired,\r\n};\r\nReportDetails.defaultProps = {\r\n  parameters: {},\r\n};\r\nexport default function ReportDetails({\r\n  proxyServerHost,\r\n  reportServiceHost,\r\n  filePath,\r\n  handleBack,\r\n  showReport,\r\n  handleModalClose,\r\n  parameters,\r\n}) {\r\n  const [t] = useTranslation();\r\n\r\n  return (\r\n    <Modal\r\n      style={{ padding: \"0px\" }}\r\n      size=\"fullscreen\"\r\n      open={showReport}\r\n      // onClose={handleModalClose}\r\n    >\r\n      <div>\r\n        <Header title={t(\"Header_TerminalManager\")} menu={false} />\r\n        <TMReportViewer\r\n          proxyServerHost={proxyServerHost}\r\n          reportServiceHost={reportServiceHost}\r\n          filePath={filePath}\r\n          parameters={parameters}\r\n        />\r\n        <div style={{ marginTop: \"10px\", marginLeft: \"20px\" }}>\r\n          <Button\r\n            className=\"backButton\"\r\n            onClick={handleBack}\r\n            content={t(\"Report_Back\")}\r\n          ></Button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n","export const DatesInEntity={\r\n    Driver : [\r\n    \"License1ExpiryDate\",\r\n    \"License1IssueDate\",\r\n    \"License2IssueDate\",\r\n    \"License2ExpiryDate\",\r\n    \"License3IssueDate\",\r\n    \"License3ExpiryDate\",\r\n    \"HazardousLicenseExpiry\"\r\n  ],\r\n  CarrierCompany:[\"PermitExpiryDate\"],\r\n  PrimeMover:[\"RoadTaxNoIssueDate\",\"RoadTaxNoExpiryDate\",\"licenseExpiryDate\"],\r\n  Wagon:[\"LicenseExpiryDate\"],\r\n  Vehicle:[\"LicenseNoIssueDate\",\"LicenseNoExpiryDate\",\r\n  \"RoadTaxNoIssueDate\",\"RoadTaxNoExpiryDate\",\"Bondexpirydate\",\"HazardousLicenseExpiry\"],\r\n  Contract:[\"StartDate\",\"EndDate\"],\r\n  ContractItem:[\"StartDate\",\"EndDate\"],\r\n  Order:[\"OrderStartDate\",\"OrderEndDate\",\"OrderDate\",\"DeliveryDate\"],\r\n  AccessCard:[\"ExpiryDate\",\"IssueDate\",\"PasswordExpiryDate\"],\r\n  Trailer:[\"HazardousLicenseExpiry\"],\r\n  };"],"names":["TransactionSourceSummaryOperations","_ref","transportationType","handleShipmentByCompartmentPageClick","handleShipmentByProductPageClick","handleDispatchPageClick","isSBCEnable","isSBPEnable","isRailDispatchEnable","t","useTranslation","_jsxs","className","children","_jsx","Divider","style","marginLeft","Button","type","disabled","onClick","ContractDetails","contract","modContract","onFieldChange","validationErrors","attributeValidationErrors","onDateTextChange","listOptions","onAllTerminalsChange","handleAddPlan","handleDeletePlan","selectedPlanRow","handleRowSelectionChange","handleCellDataEdit","modContractItems","selectedShareholder","isEnterpriseNode","onAttributeDataChange","handleCompAttributeCellDataEdit","modAttributeMetaDataList","expandedRows","toggleExpand","compartmentDetailsPageSize","isEnableForceClose","handleForceClose","handleViewShipments","handleViewDispatch","isAutoGeneratedContractCode","customerOptions","customerDestinationOptions","Object","keys","length","Utilities","handleValidationErrorFilter","terminal","attributeValidation","find","selectedAttribute","TerminalCode","handleAttributeType","data","attribute","rowData","handleAttributeDateValue","dateval","chars","split","Date","convertAttributeDatetoString","value","Dateval","getFullYear","getMonth","slice","getDate","DataType","toLowerCase","Constants","STRING","INT","Input","fluid","AttributeValue","IsReadonly","onChange","reserveSpace","FLOAT","LONG","DOUBLE","undefined","toLocaleString","BOOL","Checkbox","checked","toString","DATETIME","DatePicker","showYearSelector","onTextChange","error","console","log","handleIsRequiredCompAttributes","IsMandatory","AttributeName","class","handleDateEdit","cellData","val","rowIndex","field","displayFormat","getCurrentDateFormat","handleDropdownEdit","dropDownOptions","unitOfVolume","unitOfWeight","finishedProductOptions","destOptions","CustomerCode","Array","isArray","getOptionsWithSelect","Select","placeholder","options","search","noResultsMessage","ContractCode","label","indicator","Description","StartDate","disablePast","EndDate","getKeyByValue","Status","AssociatedTerminals","terminalList","terminalCodes","selectedTerminal","TerminalCodes","onCheckChange","Active","text","Remarks","CarrierCollection","carrierOptions","multiple","map","attire","ErrorBoundary","Accordion","Content","title","AttributeDetails","selectedAttributeList","attributeMetaDataList","Icon","root","name","size","DataTable","rowExpansionTemplate","AttributesforUI","rows","Column","header","editable","renderer","Pagination","selectionMode","selection","onSelectionChange","scrollable","scrollHeight","handleIsRequiredCompartmentCell","editFieldType","customEditRenderer","toLocaleDateString","initialWidth","open","findIndex","x","SeqNumber","textAlign","content","TransportationType","ROAD","RAIL","defaultProps","contractTypeOptions","ContractDetailsComposite","Component","constructor","_this","arguments","this","state","contractValidationDef","terminalOptions","volumeUOMOptions","weightUOMOptions","isReadyToRender","saveEnabled","compartmentAttributeMetaDataList","isShowTruckShipment","isShowBackButton","isShowRailDispatch","isAllowtoUpdate","updatedContractStatus","contractKPIList","scheduledContractUpdate","showAuthenticationLayout","showForceCloseAuthenticationLayout","tempContract","tempContactStatusObj","handleAttributeDataChange","matchedAttributes","lodash","matchedAttributesList","filter","modattribute","Code","DefaultValue","forEach","setState","compAttribute","compIndex","item","compSequenceNo","handleChange","propertyName","plan","DestinationCode","terminalSelectionChange","planRow","newVal","props","userDetails","EntityResult","IsArchived","newPlan","Attributes","BlockedQuantity","FinishedProductCode","FinishdedProductType","ItemCode","LoadedQuantity","Quantity","QuantityUOM","RemainingQuantity","ShareholderCode","push","IsEnterpriseNode","formCompartmentAttributes","obj","index","cindex","handleDateTextChange","handleAllTerminalsChange","addUpdateContract","createContract","updateContract","handleSave","SCHEDULED","values","every","fillDetails","attributeList","validateSave","convertStringtoDecimal","DateFieldsInEntities","Contract","ContractItems","ci","ContractItem","IsWebPortalUser","isTerminalAdded","expandedRowIndex","splice","handleReset","handleResetAttributeValidationError","localNodeAttribute","key","returnValue","contactStatusObj","Shareholder","ForceClose","ForceCloseReason","NewContractStatus","updateContractStatus","ShareHolderCode","keyDataCode","KeyCodes","Entity","notification","messageType","message","messageResultDetails","keyFields","keyValues","isSuccess","errorMessage","axios","RestAPIs","tokenDetails","tokenInfo","then","response","result","IsSuccess","getContract","ErrorList","toast","NotifyEvent","notificationMessage","autoClose","handleOperationVisibility","handleBack","handleShowBackButton","status","confirmAllowToUpdate","TranslationConsumer","Modal","Footer","handleAuthenticationClose","componentDidMount","isNewContract","selectedRow","Common_Code","getAttributes","getTerminalList","getUOMList","getCarrierList","getFinishedProductList","getCustomerDestinationList","contractAttributeEntity","contractItemAttributeEntity","CONTRACT","CONTRACT_ITEM","componentWillReceiveProps","nextProps","shareholderCustomers","shareholderCust","CustomerDestinationsList","catch","weightUOMs","MASS","weightOption","volumeUOMs","VOLUME","volumeOption","err","emptyContract","GetAutoGeneratedContractCode","FunctionsList","functionGroups","add","fnContract","keyCode","foceCloseStatus","modify","fnContractForceClose","CLOSED","getKPIList","selectedTerminals","attributesTerminalsList","existitem","attributeMetaData","Attributevalue","contractAttribute","valueAttribute","ListOfAttributeData","AttributeCode","attributes","attTerminal","some","selTerminal","comp","compAttributes","att","DisplayName","MinValue","MaxValue","ValidationFormat","attributesforNewComp","tempCompAttributes","attData","tempAttIndex","assignedAttributes","fillAttributeDetails","compAttributeMetaDataList","terminalAttributes","termAtt","ContractType","DEFAULT_CONTRACT_TYPE","CREATED","com","contractPlanValidationDef","col","validator","displayName","errMsg","onSaved","shareholder","contractCode","view","fnKPIInformation","Parameters","objKPIRequestData","PageName","kpiContractDetail","InputParameters","ListKPIDetails","handleOperation","getFunctionGroupName","render","popUpContents","fieldName","fieldValue","LastUpdatedTime","toLocaleTimeString","LastActiveTime","CreatedTime","TMDetailsHeader","entityCode","newEntityName","TruckShipmentProject","shipmentSource","shipmentSourceCode","shipmentSourceCompartmentItems","shipmentSourceDetails","RailDispatchProject","_Fragment","TMDetailsKPILayout","KPIList","PageAttibutes","WebPortalListPageSize","marginTop","TMDetailsUserActions","onBack","UserAuthenticationLayout","Username","UserName","functionName","functionGroup","handleClose","LoadingPage","connect","getUserDetails","TokenAuth","OrderDetails","order","modOrder","modOrderItems","enableForceClose","OrderCode","OrderStartDate","OrderEndDate","OrderStatus","OrderDate","FULLY_DELIVERED","OrderDetailsComposite","orderValidationDef","orderKPIList","tempOrder","LotNumber","DefaultQtyUOMForTransactionUI","addUpdateOrder","createOrder","updateOrder","Order","getOrder","forceCloseOperation","entity","OrderItems","isNewOrder","getCustomerList","orderAttributeEntity","orderItemAttributeEntity","ORDER","ORDERITEM","emptyOrder","fnOrder","orderAttribute","orderPlanValidationDef","orderCode","kpiOrderDetail","fnOrderForceClose","ContractSummaryPageComposite","tableData","columnDetails","pageSize","exportRequired","exportFileName","columnPickerRequired","columnGroupingRequired","selectionRequired","terminalsToShow","onRowClick","parentComponent","WijmoGridComposite","columns","rowsPerPage","onSelectionHandle","ContractComposite","isDetails","toDate","fromDate","isDetailsModified","operationsVisibilty","delete","selectedItems","dateError","isLoadShipment","shipmentType","isLoadRailDispatch","selectedContractCode","isShowRightPane","showDeleteAuthenticationLayout","componentName","componentWillUnmount","clearStorage","window","removeEventListener","sessionStorage","removeItem","handleDelete","deleteContractKeys","i","shCode","keyData","Key","Value","isRefreshDataRequire","ResultDataList","res","getContractList","toISOString","messageResult","handleShareholderSelectionChange","getTerminalsList","handleAdd","handleRowClick","remove","savedEvent","saveType","handleRangeSelect","to","from","handleSelection","items","isCreated","ShipmentGridContract_Status","isReady","toUpperCase","handleLoadContracts","contractCodes","authenticateDelete","setHours","PrimaryShareholder","getlookupValues","addEventListener","getTransportationType","activeItem","itemProps","startRange","endRange","kpiContractList","sbcAdd","fnSBC","sbpAdd","fnSBP","railDispatchAdd","fnRailDispatch","getDeleteorEditMode","contractSelected","TMUserActionsComposite","breadcrumbItem","shareholders","ShareholderList","onShareholderChange","onDelete","onAdd","handleBreadCrumbClick","TruckShipmentComposite","selectedSourceCode","shipmentSourceFromSummary","RailDispatchComposite","KPIDashboardLayout","kpiList","pageName","TMTransactionFilters","dateRange","handleLoadOrders","filterText","Table","NoOfTerminalsToShow","ToastContainer","hideProgressBar","closeOnClick","closeButton","newestOnTop","position","toastClassName","OrderSummaryPageComposite","OrderComposite","None","selectedCodes","deleteOrderKeys","getOrderList","ShipmentGridOrder_Status","NOT_SCHEDULED","Common_Status","Common_Shareholder","orderCodes","kpiOrderList","isOrdersSelected","RailDispatchSummaryPageComposite","operationsVisibility","nextOperations","currentStatuses","currentAccess","lastStatus","modalData","closeDispatch","isOpen","reason","dispatchCode","dispatchStatus","subPageName","isDirectOpenSubPage","isDisplayDetails","isReadyToShowOperation","isDisplayRightPane","enableHSEInspection","railLookUpData","showReport","drawerStatus","isGoBackToSource","isContractDisable","railDispatchKPIList","railDispatchDeleteStates","activityInfo","showAuthorizeToLoadAuthenticationLayout","showCloseShipmentAuthenticationLayout","showViewBOLAuthenticationLayout","showPrintBOLAuthenticationLayout","showFANAuthenticationLayout","getLookUpData","lookUpTypeCode","callback","setRightPaneDisplay","deleteRailDispatchKeys","getRailDispatchList","handleNotify","handleSubPageBack","isLoadOperaton","dispatchDeleteInfo","ActivityCode","RAILDISPATCH_ENABLE_DELETEPLAN","ActionTypeCode","CHECK","dispatchDeleteStates","ShipmentStates","indexOf","ViewRailDispatchDetails_ShipmentStatus","getRailDispatchStatusOperation","handleOperationClick","operation","authorizeToLoadClick","handleConfirmCloseDispatch","printBOLClick","printFANClick","viewBOLClick","handleBSIOutbound","handleUpdateStatusOperation","railDispatch","DispatchCode","DispatchStatus","RailRouteConfigurationDetails_RailRouteCode","RouteCode","ScheduledDate","ViewRailDispatchList_LoadedDate","LoadEndTime","AcutalTerminalCode","ActualTerminalCode","RailDispatchCode","handleAuthorizeToLoad","TMWebApiRequest","CHECKED_IN","handleCloseDispatchReasonChange","forceCloseRailDispatch","closeRailDispatch","Reason","handlePrintFAN","handleModalBack","handleViewBOL","reportServiceURI","handlePrintBOL","handleDrawer","CheckRailDispatchDeleteAllowed","entityResult","EnableRail","getContractLookupValues","GetShipmentActivityInfo","ShipmentFrom","ScheduledFrom","ScheduledTo","ShipmentTypeCode","ShipmentType","All","selectedItem","updatedSelectedItem","getRailDispatchOperations","getRailDispatchAllChangeStatus","callBack","localTerminalCode","ViewRailDispatch_EditAccess","ViewRailDispatch_DisableAdjustPlanQty","ViewRailDispatch_DisableWagonForceClose","ViewRailDispatch_Delete","ViewRailDispatch_Update","operationOrder","IsBSIEnabledLicense","renderModal","path","paramValues","Culture","UICulture","ReportDetails","handleModalClose","proxyServerHost","reportServiceHost","filePath","parameters","kpiRailShipmentList","fnCloseRailDispatch","fnViewRailDispatch","fnPrintRailBOL","fnPrintRailFAN","shrVisible","margin","RailDispatchDetailsComposite","onSubPageBack","onNotify","onUpdateStatusOperation","onSetRightPaneDisplay","loadingClass","TransactionSummaryOperations","shipmentNextOperations","handleDetailsPageClick","handleOperationButtonClick","isWebPortalUser","unAllowedOperations","webPortalAllowedOperations","closeOnDimmerClick","TruckShipmentSummaryPageComposite","shipment","popUpContent","currentShipmentStatuses","isOperation","isManualEntry","isViewAuditTrail","auditTrailList","modAuditTrailList","truckShipmentKPIList","isViewLoadingDetails","modViewLoadingDetails","loadingExpandedRows","nonConfigColumns","isSealCompartments","sealCompartments","isRecordWeight","recordWeightList","weighBridgeCode","scadaValue","allowOutofRangeTW","isNotRevised","staticLoadingDetails","isCloseShipment","isVehicleCrippled","reasonForClosure","modCustomValues","popUpOpen","isOrderDisable","isLadenWeightValid","ladenWeightError","vehicleForRecordWeight","showAllowToLoadAuthenticationLayout","isAllocateBay","bayData","selectBay","isDeAllocateBay","ShipmentBay","itemName","getShipmentList","shipmentDeleteInfo","SHIPMENT_ENABLE_DELETE","shipmentDeleteStates","ViewShipmentStatus_ShipmentStatus","productCount","ViewShipmentStatus_ShipmentType","PRODUCT","compCount","COMPARTMENT","productFunctionGroup","compartmentFunctionGroup","getShipment","closeShipment","handleShipmentClose","ShipmentCode","formCloseShipmentRequest","handleCloseShipmentModal","display","flexWrap","disbaled","confirmRecordLadenWeight","RecordLadenWeight","confirmAllowToLoad","allowToLoad","printBOL","printFAN","ConfirmedAllowToLoad","handleAllowToLoad","handleSealClose","authorizeToLoadOnClick","authorizeToLoad","ViewShipment_AuthorizeLoad","ViewShipment_AllowToLoad","Planned_Quantity","Revised_Planned_Quantity","ManualEntry","ViewShipment_RecordWeight","getRecordWeightList","ViewShipment_CloseShipment","ViewShipmentStatus_PrintFAN","ViewShipmentStatus_PrintBOL","ViewShipmentStatus_ViewBOL","ViewAllShipment_SendBOL","handleSendBOL","ViewAllShipment_BSIOutbound","ViewShipment_ViewAuditTrail","handleViewAuditTrail","SHIPMENTSTATUSTIME","UpdatedTime","formReadonlyCompAttributes","ViewShipment_ViewLoadingDetails","handleViewLoadingDetails","count","seqNo","endtime","starttime","productcode","join","Table1","NonConfiguredColumns","ViewAllShipment_SealCompartments","handleSealCompartments","getBays","products","ShipmentCompartments","element","bayAllocation","SupportedProducts","ele","AssociatedProduct","deleteShipmentsKeys","shipmentCode","RecordTareWeight","VehicleCode","getScadaValue","handleStatus","e","EMPTY","LOADING","PART_FILLED","OVER_FILLED","FORCE_COMPLETED","COMPLETED","INTERRUPTED","getSiteConfigurationLookUP","siteConfiguration","getWeighBridge","handleRecordWeight","handlePopUpClick","popUpMenuClick","menuItem","confirmAllocateBay","showHeader","resizableColumns","AllocateBay","BayCode","confirmDeAllocateBay","DeAllocateBay","populatePopupContents","sbcfnAdd","sbpfnAdd","getVehicle","vehicleCode","GetViewAllShipmentCustomData","shipmentRow","kpiTruckShipmentList","getLoadingDetails","getShipmentStatusOperations","getShipmentStatuses","GetBayByTrnsaction","shipmentStatusTimeAttributeEntity","shipmentItem","updatedselectedItem","token","DriverCode","ViewAllTruckShipmentLoadingDetails","topUpDecantApprovalStatus","topUpDecantEnabled","listShipmentCompartmentInfo","listShipmentLoadingCompData","TopUpDecantStatusText","EnableTopUpDecant","compAtt","selAtt","weighBridge","getLadenWeightData","TareWeight","WeightUOM","MaxLoadableWeight","ValidateLadenWeight","ladenWeighData","minLadenWeightTolerance","MinLadenweightQuantityTolerance","maxLadenWeightTolerance","MaxLadenweightQuantityTolerance","minLadenWeightTol","maxLadenWeightTol","isNaN","parseFloat","RegisteredTareWeight","VehicleWeightUOM","Weight","trailerWeighData","isNodeEnterpriseOrWebortal","fnCloseShipment","fnShipmentStatus","fnPrintBOL","fnPrintFAN","TrnsactionCode","TrnsactionType","bayCode","entityType","fillPage","shipmentSelected","Popup","on","onMouseLeave","VerticalMenu","Header","Item","TruckShipmentDetailsComposite","TruckShipmentViewAuditTrailDetails","TruckShipmentViewLoadingDetails","modLoadingDetails","TruckShipmentManualEntryDetailsComposite","TruckShipmentSealDetailsComposite","transactionCode","closeOnSelection","rangeValue","onRangeSelect","TMReportViewer","reportUrl","beforeXhrRequestSend","s","event","prevBeforeSend","settings","beforeSend","xhr","withCredentials","URL_DEBUG","onreadystatechange","readyState","host","hostElement","setTimeout","splitter","querySelector","param","querySelectorAll","click","Authorization","initViewer","wjViewer","prototype","load","promise","_checkReportController","httpRequest","_getReportInstancesUrl","method","v","responseText","_instanceId","id","_status","loaded","_outlinesLocation","outlinesLocation","_statusLocation","statusLocation","replace","_pageSettingsLocation","pageSettingsLocation","_featuresLocation","featuresLocation","_parametersLocation","parametersLocation","resolve","reject","_getError","ReportViewer","requestHeaders","height","serviceUrl","initialized","beforeSendRequest","WjCore","padding","menu","DatesInEntity","Driver","CarrierCompany","PrimeMover","Wagon","Vehicle","AccessCard","Trailer"],"sourceRoot":""}