"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[4684,5841,8222,3235,8226],{66554:(e,t,i)=>{i.d(t,{$:()=>c});var a=i(65043),o=i(72711),n=i(67907),l=i(65187),s=i(69062),r=i(70579);function d(e){let{operationsVisibilty:t,breadcrumbItem:i,shareholders:d,selectedShareholder:c,onShareholderChange:m,onDelete:p,onAdd:h,popUpContent:u,shrVisible:g,handleBreadCrumbClick:C,addVisible:x,deleteVisible:S}=e;const[R,y]=(0,a.useState)(!1),[T,j]=(0,a.useState)(!1);function b(){t.add&&(u.length>0?j(!1===T):h())}return(0,r.jsxs)("div",{className:"row",style:{alignItems:"flex-start",padding:"0px"},children:[(0,r.jsx)("div",{className:"col-9 col-sm-9 col-md-9 col-lg-10 col-xl-10",style:{padding:"0px"},children:(0,r.jsxs)("div",{className:"row",style:{marginTop:"10px",alignItems:""},children:[(0,r.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-8",children:(0,r.jsxs)(l.A,{children:[" ",(0,r.jsx)(n.TranslationConsumer,{children:e=>(0,r.jsxs)(o.Breadcrumb,{children:[i.parents.map((t=>(0,r.jsx)(o.Breadcrumb.Item,{onClick:()=>{void 0!==C&&null!==C&&C(t.itemCode,i.parents)},children:e(t.localizedKey)},t.itemCode))),(0,r.jsx)(o.Breadcrumb.Item,{children:e(i.localizedKey)},i.itemCode)]})})]})}),(0,r.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-4",children:(0,r.jsx)(n.TranslationConsumer,{children:e=>(0,r.jsx)("div",{className:"compartmentIcon",style:{justifyContent:"flex-start"},children:!1===g?"":(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsxs)("h4",{className:"shrText",children:[e("Common_Shareholder"),":"]})}),(0,r.jsx)("div",{className:"opSelect",children:(0,r.jsx)(o.Select,{placeholder:e("Common_Shareholder"),value:c,disabled:!t.shareholder,options:s.Zj(d),onChange:e=>m(e)})})]})})})}),(0,r.jsx)(n.TranslationConsumer,{children:e=>(0,r.jsxs)(o.Modal,{open:R,size:"small",children:[(0,r.jsx)(o.Modal.Content,{children:(0,r.jsx)("div",{children:(0,r.jsx)("b",{children:e("Confirm_Delete")})})}),(0,r.jsxs)(o.Modal.Footer,{children:[(0,r.jsx)(o.Button,{type:"secondary",content:e("Cancel"),onClick:()=>y(!1)}),(0,r.jsx)(o.Button,{type:"primary",content:e("PipelineDispatch_BtnSubmit"),onClick:()=>{y(!1),p()}})]})]})})]})}),(0,r.jsx)("div",{className:"col-3 col-sm-3 col-md-3 col-lg-2 col-xl-2",children:(0,r.jsxs)("div",{style:{float:"right",display:"inline-block",marginTop:"10px"},children:[x?(0,r.jsx)(o.Popup,{position:"bottom right",className:"popup-theme-wrap",element:(0,r.jsx)("div",{className:(t.add?"iconCircle ":"iconCircleDisable ")+"iconblock",onClick:b,children:(0,r.jsx)(o.Icon,{root:"common",name:"badge-plus",size:"small",color:"white"})}),on:"click",open:T,children:(0,r.jsx)("div",{onMouseLeave:()=>j(!1),children:(0,r.jsx)(n.TranslationConsumer,{children:e=>(0,r.jsx)(o.VerticalMenu,{children:(0,r.jsxs)(o.VerticalMenu,{children:[(0,r.jsx)(o.VerticalMenu.Header,{children:e("Common_Create")}),u.map((t=>(0,r.jsx)(o.VerticalMenu.Item,{onClick:()=>{return e=t.fieldName,j(!1),void h(e);var e},children:e(t.fieldValue)})))]})})})})}):"",S?(0,r.jsx)("div",{style:{marginLeft:"10px"},onClick:()=>{t.delete&&y(!0)},className:(t.delete?"iconCircle ":"iconCircleDisable ")+"iconblock",children:(0,r.jsx)(o.Icon,{root:"common",name:"delete",size:"small",color:"white"})}):""]})})]})}d.defaultProps={operationsVisibilty:{add:!1,delete:!1,shareholder:!1},breadcrumbItem:{itemName:"",itemCode:"",localizedKey:"",itemProps:{},parents:[],isComponent:!1},shareholders:[],selectedShareholder:"",popUpContent:[],shrVisible:!0,addVisible:!0,deleteVisible:!0};i(38726);function c(e){let{operationsVisibilty:t,breadcrumbItem:i,shareholders:a,selectedShareholder:o,onShareholderChange:n,onDelete:l,onAdd:s,popUpContent:c,shrVisible:m,handleBreadCrumbClick:p,addVisible:h,deleteVisible:u}=e;return(0,r.jsx)(d,{operationsVisibilty:t,breadcrumbItem:i,shareholders:a,selectedShareholder:o,onShareholderChange:n,onDelete:l,onAdd:s,popUpContent:c,shrVisible:m,handleBreadCrumbClick:p,addVisible:h,deleteVisible:u})}},19380:(e,t,i)=>{i.d(t,{A:()=>T});var a=i(65043),o=i(728),n=i(62672),l=i(27976),s=i(44063),r=i(39078),d=i(48546),c=i(82967),m=i(11201),p=i(43439),h=(i(60663),i(48385)),u=i(72711),g=i(67907),C=i(65187),x=i(53536),S=(i(90837),i(70579));const R=e=>{const[t,i]=(0,a.useState)(null),[R]=(0,g.useTranslation)(),y=t=>new o.CollectionView(e.sourceData,{pageSize:t}),[T,j]=(0,a.useState)(y(e.rowsPerPage)),b=a.createRef(),D=a.createRef(),f=a.createRef(),v=a.createRef(),w=a.useRef(),N=a.useRef(e.selectionRequired?[]:null);let P=null;const E=t=>{try{if(M(),e.onRowClick&&t.addEventListener(t.hostElement,"click",(i=>{let a=t.hitTest(i);if(a.target.closest(".wj-cell")&&![...a.target.closest(".wj-cell").classList].includes("wj-group")&&a.cellType===n.CellType.Cell){const i=t.rows[a.row].dataItem;e.onRowClick(i)}})),t.selectionMode=o.asEnum("None",n.SelectionMode),t.select(-1,-1),i(t),e.selectionRequired){P=new m.Selector(t,{itemChecked:(i,a)=>{e.singleSelection&&t.rows.filter((e=>e.isSelected&&1===N.current.filter((t=>x.isEqual(t,e.dataItem))).length)).forEach((e=>{e.isSelected=!1})),e.onSelectionHandle(t.rows.filter((e=>e.isSelected)).map((e=>e.dataItem)))},showCheckAll:!e.singleSelection});let i=P.column.grid;P.column=i.rowHeaders.columns[0],i.headersVisibility=n.HeadersVisibility.All,i.selectionMode=o.asEnum("None",n.SelectionMode)}}catch(a){console.log("Error in gridInitialized: "+a)}};(0,a.useEffect)((()=>{try{if(null!=b){let e=b.current.control;D.current.control.grid=e}j(y(e.rowsPerPage))}catch(t){console.log("Error in grid update:",t)}}),[e.sourceData]),(0,a.useEffect)((()=>{try{t&&e.selectionRequired&&(N.current.length=0,N.current.push(...e.selectedItems),t.rows.forEach((t=>{1===e.selectedItems.filter((e=>x.isEqual(e,t.dataItem))).length?t.isSelected=!0:t.isSelected=!1})),t.refresh())}catch(i){console.log("Error in pre-selecting rows:",i)}}),[e.selectedItems]),(0,a.useEffect)((()=>{try{if(localStorage.getItem(e.parentComponent+"GridState")&&"null"!==localStorage.getItem(e.parentComponent+"GridState")&&t){let a=JSON.parse(localStorage.getItem(e.parentComponent+"GridState")),n=t;n.columns.forEach((e=>{let t=a.columns.filter((t=>t.binding===e.binding));e.visible=t.length>0?t[0].visible:e.visible})),f.current.control.filterDefinition=a.filterDefinition,n.collectionView.deferUpdate((()=>{n.collectionView.sortDescriptions.clear();for(let e=0;e<a.sortDescriptions.length;e++){let t=a.sortDescriptions[e];n.collectionView.sortDescriptions.push(new o.SortDescription(t.property,t.ascending))}}));for(let e=0;e<a.groupDescriptions.length;e++)n.collectionView.groupDescriptions.push(new o.PropertyGroupDescription(a.groupDescriptions[e])),n.columns.filter((t=>t.binding===a.groupDescriptions[e]))[0].visible=!1;if(sessionStorage.getItem(e.parentComponent+"GridState")&&"null"!==sessionStorage.getItem(e.parentComponent+"GridState")){let t=JSON.parse(sessionStorage.getItem(e.parentComponent+"GridState"));n.collectionView.moveToPage(n.collectionView.pageCount-1>=t.pageIndex?t.pageIndex:n.collectionView.pageCount-1),D&&(D.current.control.text=t.searchText)}i(n),t.refresh()}}catch(a){console.log("Error in restoring local storage settings: ",a)}}),[T]),(0,a.useEffect)((()=>{try{t&&w.current&&e.columnPickerRequired&&(w.current.itemsSource=t.columns,w.current.checkedMemberPath="visible",w.current.displayMemberPath="header",w.current.lostFocus.addHandler((()=>{(0,o.hidePopup)(w.current.hostElement)})))}catch(i){console.log("Error in initializing column picker properties:",i)}}),[w.current]),(0,a.useEffect)((()=>()=>{e.columnPickerRequired&&w.current&&(0,o.hidePopup)(w.current.hostElement)}),[]);const L=()=>{try{let a=t;a.itemsSource.pageSize=e.sourceData.length,i(a),p.FlexGridXlsxConverter.saveAsync(t,{includeColumnHeaders:!0,includeCellStyles:!1,formatItem:null},e.exportFileName),a.itemsSource.pageSize=e.rowsPerPage,i(a)}catch(a){console.log("Error in export grid to excel:",a)}},k=(t,i)=>{if(void 0!==i&&null!==i){if("boolean"===typeof t||"Active"===i.Name)return t?(0,S.jsx)(u.Icon,{name:"check",size:"small",color:"green"}):(0,S.jsx)(u.Icon,{name:"close",size:"small",color:"red"});if(""===t||null===t||void 0===t)return t;if(("TerminalCodes"===i.Name||"1"===i.PopOver)&&null!==t)return(a=t).split(",").length>e.terminalsToShow?(0,S.jsx)(u.Popup,{className:"popup-theme-wrap",on:"hover",element:a.split(",").length,children:(0,S.jsx)(u.Card,{children:(0,S.jsx)(u.Card.Content,{children:a})})}):a;if(void 0!==i.DataType&&"DateTime"===i.DataType)return new Date(t).toLocaleDateString()+" "+new Date(t).toLocaleTimeString();if(void 0!==i.DataType&&"Date"===i.DataType)return new Date(t).toLocaleDateString();if(void 0!==i.DataType&&"Time"===i.DataType)return new Date(t).toLocaleTimeString()}var a;return t},A=()=>{try{if(t&&f.current){let i={columns:t.columns.map((e=>({binding:e.binding,visible:e.visible}))),filterDefinition:f.current.control.filterDefinition,sortDescriptions:t.collectionView.sortDescriptions.map((e=>({property:e.property,ascending:e.ascending}))),groupDescriptions:t.collectionView.groupDescriptions.map((e=>e.propertyName?e.propertyName:null))};if(t.collectionView.groupDescriptions&&t.collectionView.groupDescriptions.length>0){[...document.getElementsByClassName("wj-column-selector-group")].forEach((e=>{e.parentNode.parentNode.classList.add("wj-grouped-checkbox")}))}let a={pageIndex:t.collectionView.pageIndex,searchText:D.current.control.text};localStorage.setItem(e.parentComponent+"GridState",JSON.stringify(i)),sessionStorage.setItem(e.parentComponent+"GridState",JSON.stringify(a))}}catch(i){console.log("Error in saving grid state")}},M=()=>{let e=o.culture.FlexGridFilter,t=r.Operator;o.culture.FlexGridFilter.header=R("WijmoGridFilterHeader"),o.culture.FlexGridFilter.ascending="\u2191 "+R("WijmoGridFilterAscending"),o.culture.FlexGridFilter.descending="\u2193 "+R("WijmoGridFilterDescending"),o.culture.FlexGridFilter.apply=R("RoleAdminEdit_Apply"),o.culture.FlexGridFilter.clear=R("OrderCreate_btnClear"),o.culture.FlexGridFilter.conditions=R("WijmoGridFilterCondition"),o.culture.FlexGridFilter.values=R("WijmoGridFilterValue"),o.culture.FlexGridFilter.search=R("LoadingDetailsView_SearchGrid"),o.culture.FlexGridFilter.selectAll=R("WijmoGridFilterSelectAll"),o.culture.FlexGridFilter.and=R("WijmoGridFilterAnd"),o.culture.FlexGridFilter.or=R("WijmoGridFilterOr"),o.culture.FlexGridFilter.cancel=R("AccessCardInfo_Cancel"),e.stringOperators=[{name:R("WijmoGridFilterUnset"),op:null},{name:R("WijmoGridFilterEqual"),op:t.EQ},{name:R("WijmoGridFilterNotEqual"),op:t.NE},{name:R("WijmoGridFilterBeginsWith"),op:t.BW},{name:R("WijmoGridFilterEndsWith"),op:t.EW},{name:R("WijmoGridFilterContains"),op:t.CT},{name:R("WijmoGridFilterDoesNotContain"),op:t.NC}],e.numberOperators=[{name:R("WijmoGridFilterUnset"),op:null},{name:R("WijmoGridFilterEqual"),op:t.EQ},{name:R("WijmoGridFilterNotEqual"),op:t.NE},{name:R("WijmoGridFilterGreaterThan"),op:t.GT},{name:R("WijmoGridFilterLessThan"),op:t.LT},{name:R("WijmoGridFilterGreaterThanOrEqual"),op:t.GE},{name:R("WijmoGridFilterLessThanOrEqual"),op:t.LE}],e.dateOperators=[{name:R("WijmoGridFilterUnset"),op:null},{name:R("WijmoGridFilterEqual"),op:t.EQ},{name:R("WijmoGridFilterDateEarlierThan"),op:t.LT},{name:R("WijmoGridFilterDateLaterThan"),op:t.GT}],e.booleanOperators=[{name:R("WijmoGridFilterUnset"),op:null},{name:R("WijmoGridFilterEqual"),op:t.EQ},{name:R("WijmoGridFilterNotEqual"),op:t.NE}]},I=e=>{try{if(window.screen.width<1024&&e.WidthPx&&""!==e.WidthPx)return parseInt(e.WidthPx)}catch(t){console.log("Error in width:",t)}return e.WidthPercentage.includes("*")?e.WidthPercentage:parseInt(e.WidthPercentage)};return(0,S.jsx)("div",{className:"pl-1",children:(0,S.jsx)(C.A,{children:(0,S.jsx)(g.TranslationConsumer,{children:i=>(0,S.jsxs)(a.Fragment,{children:[(0,S.jsxs)("div",{className:"row pl-0",children:[(0,S.jsx)("div",{className:"col-10 col-sm-12 col-md-5 col-lg-6",children:(0,S.jsx)(d.q,{class:"ui single-input",ref:D,placeholder:i("LoadingDetailsView_SearchGrid")})}),(0,S.jsx)("div",{className:"col-10 col-sm-12 col-md-7 col-lg-6",children:(0,S.jsxs)("div",{style:{float:"right"},children:[e.columnPickerRequired?(0,S.jsxs)(u.Button,{id:"colPicker",actionType:"button",type:"primary",onClick:e=>(e=>{try{let i=w.current.hostElement;i.offsetHeight?((0,o.hidePopup)(i,!0,!0),t.focus()):((0,o.showPopup)(i,e.target,o.PopupPosition.Below,!0,!1),w.current.focus()),w.current.focus(),e.preventDefault()}catch(i){console.log("Error in Column Picker click event:",i)}})(e),children:[(0,S.jsx)("div",{style:{display:"inline-block"},children:i("WijmoGridColumnPicker")}),(0,S.jsx)("div",{style:{display:"inline-block"},children:(0,S.jsx)(u.Icon,{name:"caret-down",className:"btnIcon",size:"small"})})]}):null,e.exportRequired?(0,S.jsxs)(u.Button,{actionType:"button",type:"primary",className:"mt-3 mt-md-0",onClick:L,children:[(0,S.jsx)("div",{style:{display:"inline-block"},children:i("WijmoGridExport")}),(0,S.jsx)("div",{style:{display:"inline-block",marginLeft:"0.2rem"},children:(0,S.jsx)("span",{className:"icon-Xls",style:{fontSize:"17px",position:"absolute",top:"3px"}})})]}):null]})})]}),(0,S.jsxs)("div",{className:"tableScroll",children:[e.columnGroupingRequired?(0,S.jsx)(h.u,{className:"group-panel",grid:t,placeholder:i("WijmoGridGroupPanelPlaceholder")}):null,(0,S.jsx)(C.A,{children:(0,S.jsxs)(l.MC,{ref:b,autoGenerateColumns:!1,alternatingRowStep:0,autoRowHeights:!0,headersVisibility:"Column",itemsSource:T,selectionMode:o.asEnum("None",n.SelectionMode),initialized:E,virtualizationThreshold:[0,1e4],onUpdatedView:A,children:[(0,S.jsx)(s.M,{ref:f}),e.columns.map((t=>(0,S.jsx)(l.aK,{header:i(t.Name),binding:t.Name,width:I(t),minWidth:100,isReadOnly:!0,wordWrap:!0,align:"left",children:(0,S.jsx)(l.Gw,{cellType:"Cell",template:i=>(0,S.jsx)("span",{style:null!=e.conditionalRowStyleCheck&&e.conditionalRowStyleCheck(i.item)?{...e.conditionalRowStyles}:null,children:k(i.item[t.Name],t)})})},t.Name)))]})}),e.columnPickerRequired?(0,S.jsx)("div",{className:"column-picker-div",children:(0,S.jsx)(c.qF,{className:"column-picker",initialized:t=>(t=>{e.columnPickerRequired&&(w.current=t)})(t)})}):null]}),(0,S.jsx)("div",{className:"row",children:(0,S.jsx)(c.Ne,{ref:v,className:"ml-auto mr-auto mt-3",headerFormat:i("WijmoGridPagingTemplate"),byPage:!0,cv:T})})]})})})})};R.defaultProps={sourceData:[],columns:[],exportRequired:!0,exportFileName:"Grid.xlsx",selectionRequired:!1,columnPickerRequired:!1,columnGroupingRequired:!1,rowsPerPage:10,terminalsToShow:2,singleSelection:!1,selectedItems:[]};const y=R,T=e=>(0,S.jsx)(y,{sourceData:e.data,columns:e.columns,exportRequired:e.exportRequired,exportFileName:e.exportFileName,columnPickerRequired:e.columnPickerRequired,selectionRequired:e.selectionRequired,columnGroupingRequired:e.columnGroupingRequired,conditionalRowStyleCheck:e.conditionalRowStyleCheck,conditionalRowStyles:e.conditionalRowStyles,rowsPerPage:e.rowsPerPage,onSelectionHandle:e.onSelectionHandle,onRowClick:e.onRowClick,parentComponent:e.parentComponent,terminalsToShow:e.terminalsToShow,singleSelection:e.singleSelection,selectedItems:e.selectedItems})},68226:(e,t,i)=>{i.r(t),i.d(t,{default:()=>v});var a=i(65043),o=i(67907),n=i(78374),l=i(72711),s=i(70579);function r(e){let{railTransloading:t,railReceipt:i,dsCompartmentsBaseProduct:a,dsTransloadingShipments:r,dsTransloadingShipmentLoadingDetails:d,railTransloadingAssociatedShipmentsColumns:c,railTransloadingDetailsColumns:m,handleRowSelectionChange:p,selectedCompRow:h,setCurrentList:u,isSelect:g,onRowClick:C,expandedRows:x,toggleExpand:S}=e;const[R]=(0,o.useTranslation)(),y=e=>{const t=x.findIndex((t=>t.compSeqNo===e.rowData.compSeqNo))>=0;return(0,s.jsx)("div",{onClick:()=>S(e.rowData,t),className:"compartmentIcon gridButtonFontColor",children:(0,s.jsx)(l.Icon,{root:"common",name:t?"slidercontrols-minus":"ellipsis-horizontal",className:"margin_l10"})})},T=e=>{let t=[];return t.push(e),(0,s.jsx)("div",{className:"childTable ChildGridViewAllShipmentLoadingDetails",children:(0,s.jsxs)(n.bQ,{data:t,children:[(0,s.jsx)(n.bQ.Column,{className:"starttotalizer",field:"starttotalizer",header:R("StartTotalizer"),editable:!1},"starttotalizer"),(0,s.jsx)(n.bQ.Column,{className:"endtotalizer",field:"endtotalizer",header:R("EndTotalizer"),editable:!1},"endtotalizer"),(0,s.jsx)(n.bQ.Column,{className:"productdensity",field:"productdensity",header:R("Density"),editable:!1,renderer:e=>j(e.value)},"productdensity"),(0,s.jsx)(n.bQ.Column,{className:"temperature",field:"temperature",header:R("Temperature"),editable:!1},"temperature"),(0,s.jsx)(n.bQ.Column,{className:"pressure",field:"pressure",header:R("Pressure"),editable:!1},"pressure")]})})},j=e=>{if(null===e||void 0===e)return"";const t=e.split(" ",2);return 2!==t.length||""===t[0]?"":parseFloat(t[0]).toLocaleString()+" "+t[1]};return(0,s.jsx)(o.TranslationConsumer,{children:e=>(0,s.jsxs)("div",{className:"detailsContainer",children:[(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-12 col-md-6 col-lg-3",children:[(0,s.jsx)("label",{className:"TransloadingheaderLabel",children:e("BayAllocationReceiptSearch_ReceiptCode")}),(0,s.jsx)("label",{children:":"}),(0,s.jsx)("label",{children:" "}),(0,s.jsx)("label",{children:i.ReceiptCode})]}),(0,s.jsxs)("div",{className:"col-12 col-md-6 col-lg-3",children:[(0,s.jsx)("label",{className:"TransloadingheaderLabel",children:e("BayAllocationReceiptSearch_ReceiptStatus")}),(0,s.jsx)("label",{children:":"}),(0,s.jsx)("label",{children:" "}),(0,s.jsx)("label",{children:i.ReceiptStatus})]}),(0,s.jsxs)("div",{className:"col-12 col-md-6 col-lg-2",children:[(0,s.jsx)("label",{className:"TransloadingheaderLabel",children:e("viewTransloading_NoOfComps")}),(0,s.jsx)("label",{children:":"}),(0,s.jsx)("label",{children:" "}),(0,s.jsx)("label",{children:t.totalNoOfTransWagons})]}),(0,s.jsxs)("div",{className:"col-12 col-md-6 col-lg-2",children:[(0,s.jsx)("label",{className:"TransloadingheaderLabel",children:e("viewTransloading_NoOfBps")}),(0,s.jsx)("label",{children:":"}),(0,s.jsx)("label",{children:" "}),(0,s.jsx)("label",{children:t.NoOfProducts})]}),(0,s.jsxs)("div",{className:"col-12 col-md-6 col-lg-3",children:[(0,s.jsx)("label",{className:"TransloadingheaderLabel",children:e("viewTransloading_TotalReceiptQty")}),(0,s.jsx)("label",{children:":"}),(0,s.jsx)("label",{children:" "}),(0,s.jsx)("label",{children:t.receiptPlannedQty.toLocaleString()+" "+t.PlanQuantityUOM})]}),(0,s.jsxs)("div",{className:"col-12 col-md-6 col-lg-3",children:[(0,s.jsx)("label",{className:"TransloadingheaderLabel",children:e("viewTransloading_ReceiptPlannedQty")}),(0,s.jsx)("label",{children:":"}),(0,s.jsx)("label",{children:" "}),(0,s.jsx)("label",{children:t.totalPlannedQtyForTransloadingWagons.toLocaleString()+" "+t.PlanQuantityUOM})]}),(0,s.jsxs)("div",{className:"col-12 col-md-6 col-lg-3",children:[(0,s.jsx)("label",{className:"TransloadingheaderLabel",children:e("viewTransloading_ReceiptUnloadedQty")}),(0,s.jsx)("label",{children:":"}),(0,s.jsx)("label",{children:" "}),(0,s.jsx)("label",{children:t.totalUnloadedQtyForTransloadingWagons.toLocaleString()+" "+t.UnloadedQuantityUOM})]})]}),(0,s.jsxs)("div",{className:"row",style:{alignItems:"stretch"},children:[(0,s.jsxs)("div",{className:"col-12 col-md-6 col-lg-2",style:{border:"1px solid #c8c8c8",minHeight:"400px"},children:[(0,s.jsx)("div",{children:(0,s.jsx)("label",{className:"headerLabel",children:e("viewTransloading_Compartments")})}),(0,s.jsx)("ul",{children:t.lstCompartmentList.map(((e,t)=>(0,s.jsx)("li",{index:t,className:g===t?"activeted":"",onClick:t=>u(t,e.CompartmentCode),children:e.compartBP},e.CompartmentCode)))})]}),(0,s.jsxs)("div",{className:"col-12 col-md-6 col-lg-10",children:[(0,s.jsx)("div",{className:"row",children:(0,s.jsxs)("div",{className:"col-12 col-md-6 col-lg-10",children:[(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("label",{className:"TransloadingheaderLabel",children:e("ViewShipment_Compartment")}),(0,s.jsx)("label",{children:":"}),(0,s.jsx)("label",{children:" "}),(0,s.jsx)("label",{className:"TransloadingheaderLabel",children:t.selectCompartment.CompartmentCode})]})}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-12 col-md-6 col-lg-3",children:[(0,s.jsx)("b",{children:(0,s.jsx)("label",{children:e("viewTransloading_BPCode")})}),(0,s.jsx)("label",{children:":"}),(0,s.jsx)("label",{children:" "}),(0,s.jsx)("label",{children:t.selectCompartment.CompartmentProduct})]}),(0,s.jsxs)("div",{className:"col-12 col-md-6 col-lg-3",children:[(0,s.jsx)("b",{children:(0,s.jsx)("label",{children:e("LocalTransactionsMapping_PlannedQuantity")})}),(0,s.jsx)("label",{children:":"}),(0,s.jsx)("label",{children:" "}),(0,s.jsx)("label",{children:t.selectCompartment.PlannedQuantity.toLocaleString()+" "+t.selectCompartment.PlanQuantityUOM})]}),(0,s.jsxs)("div",{className:"col-12 col-md-6 col-lg-3",children:[(0,s.jsx)("b",{children:(0,s.jsx)("label",{children:e("UnLoadingInfo_UnloadQuantity")})}),(0,s.jsx)("label",{children:":"}),(0,s.jsx)("label",{children:" "}),(0,s.jsx)("label",{children:t.selectCompartment.UnloadedQuantity.toLocaleString()+" "+t.selectCompartment.UnloadedQuantityUOM})]}),(0,s.jsxs)("div",{className:"col-12 col-md-6 col-lg-3",children:[(0,s.jsx)("b",{children:(0,s.jsx)("label",{children:e("UserAdmin_Status")})}),(0,s.jsx)("label",{children:":"}),(0,s.jsx)("label",{children:" "}),(0,s.jsx)("label",{children:t.selectCompartment.ReceiptCompartmentStatus})]})]}),(0,s.jsx)("br",{}),(0,s.jsxs)("div",{className:"row",style:{display:t.showShipment?"block":"none"},children:[(0,s.jsx)("label",{className:"TransloadingheaderLabel",children:e("viewTransloading_AssocShips")}),(0,s.jsx)("label",{children:":"}),(0,s.jsx)("label",{children:" "})]}),(0,s.jsx)("div",{className:"row",style:{display:t.showShipment?"block":"none"},children:(0,s.jsx)(n.bQ,{data:r,selectionMode:"multiple",onCellClick:e=>void 0!==C?C(e.rowData):{},onSelectionChange:p,children:null!==r&&r.length>0?c.map((function(t){return(0,s.jsx)(n.bQ.Column,{className:"compColHeight",field:t.field,header:e(t.displayName),editable:!1,rowHeader:!1,editFieldType:"text"},t.displayName)})):""})}),(0,s.jsx)("br",{}),(0,s.jsxs)("div",{className:"row",style:{display:t.showLoadingDetails?"block":"none"},children:[(0,s.jsx)("label",{className:"TransloadingheaderLabel",children:e("viewTransloading_ShipLoadingDetails")}),(0,s.jsx)("label",{children:":"}),(0,s.jsx)("label",{children:""})]}),(0,s.jsx)("div",{className:"row",style:{display:t.showLoadingDetails?"block":"none"},children:(0,s.jsxs)(n.bQ,{data:d,selectionMode:"multiple",rowExpansionTemplate:T,expandedRows:x,children:[(0,s.jsx)(n.bQ.Column,{className:"compColHeight",field:"trailercode",header:e("Trailer"),editable:!1},"trailercode"),(0,s.jsx)(n.bQ.Column,{className:"compColHeight",field:"compSeqNo",header:e("ViewMarineLoadingDetails_CompartmentSeqNo"),editable:!1},"compSeqNo"),(0,s.jsx)(n.bQ.Column,{className:"compColHeight",field:"compartmentcode",header:e("ViewShipment_CompartmentCode"),editable:!1},"compartmentcode"),(0,s.jsx)(n.bQ.Column,{className:"compColHeight",field:"productcode",header:e("UnloadingDetails_BaseProductCode"),editable:!1},"productcode"),(0,s.jsx)(n.bQ.Column,{className:"compColHeight",field:"bcuCode",header:e("BCU_BCU"),editable:!1},"bcuCode"),(0,s.jsx)(n.bQ.Column,{className:"compColHeight",field:"meterCode",header:e("Meter_Meter"),editable:!1},"meterCode"),(0,s.jsx)(n.bQ.Column,{className:"compColHeight",field:"grossquantity",header:e("GrossQuantity"),editable:!1,renderer:e=>j(e.value)},"grossquantity"),(0,s.jsx)(n.bQ.Column,{className:"compColHeight",field:"netquantity",header:e("NetQuantity"),editable:!1,renderer:e=>j(e.value)},"netquantity"),(0,s.jsx)(n.bQ.Column,{className:"compColHeight",field:"starttime",header:e("StartTime"),editable:!1,renderer:e=>new Date(e.value).toLocaleString()},"starttime"),(0,s.jsx)(n.bQ.Column,{className:"compColHeight",field:"endtime",header:e("EndTime"),editable:!1,renderer:e=>new Date(e.value).toLocaleString()},"endtime"),(0,s.jsx)(n.bQ.Column,{className:"compColHeight",renderer:y})]})})]})]})]})})}var d=i(69062),c=i(46100),m=i(40854),p=i.n(m),h=i(72067),u=i(7523),g=i(9966),C=i(50805),x=i(97508),S=(i(38726),i(65187)),R=i(43503),y=i(93779),T=i(28882),j=i(53536),b=i.n(j),D=i(40252);class f extends a.Component{constructor(){super(...arguments),this.state={railReceipt:b().cloneDeep(c.cE),railTransloading:b().cloneDeep(c.tj),modMarineReceipt:{},railTransloadingAssociatedShipmentsColumns:b().cloneDeep(T.$$),railTransloadingDetailsColumns:b().cloneDeep(T.A7),isReadyToRender:!1,listOptions:{shareholders:this.getShareholders(),terminalCodes:this.props.terminalCodes},dsCompartmentsBaseProduct:[],dsTransloadingShipments:[],dsTransloadingShipmentLoadingDetails:[],saveEnabled:!1,selectedCompRow:[],selectedAll:!1,isSelect:-1,expandedRows:[],selectCompartmentCode:""},this.handleRowSelectionChange=e=>{this.setState({selectedCompRow:e})},this.setCurrentList=(e,t)=>{try{var i=b().cloneDeep(this.state.selectCompartmentCode),a=b().cloneDeep(this.state.railTransloading),o=b().cloneDeep(this.state.railReceipt);i!==t&&(a.showLoadingDetails=!1,o.RailMarineReceiptCompartmentPlanList.forEach((i=>{t===i.TrailerCode&&(a.selectCompartment.CompartmentCode=i.TrailerCode,a.selectCompartment.CompartmentProduct=this.GetBaseProductForCompartment(i.SequenceNo),a.selectCompartment.PlanQuantityUOM=i.PlanQuantityUOM,a.selectCompartment.PlannedQuantity=i.PlannedQuantity.toLocaleString(),void 0!==i.UnloadedQuantityUOM&&null!==i.UnloadedQuantityUOM?a.selectCompartment.UnloadedQuantityUOM=i.UnloadedQuantityUOM:a.selectCompartment.UnloadedQuantityUOM="",void 0!==i.UnloadedQuantity&&null!==i.UnloadedQuantity?a.selectCompartment.UnloadedQuantity=i.UnloadedQuantity.toLocaleString():a.selectCompartment.UnloadedQuantity="0",a.selectCompartment.ReceiptCompartmentStatus=(0,d.cd)(u.vy,i.ReceiptCompartmentStatus),this.setState({isSelect:Number(e.currentTarget.getAttribute("index")),railTransloading:a,selectCompartmentCode:t}),this.getReceiptShipments(i.TrailerCode,i.ReceiptCode,i.CompartmentCode,a))})))}catch(n){console.log("RailTransloadingDetailsComposite:Error occured on setCurrentList",n)}},this.getReceiptShipments=(e,t,i,a)=>{try{var o=[];this.setState({dsTransloadingShipments:o,railTransloading:a});let n={trailerCode:e,receiptCode:t,compartmentCode:i,transportationType:this.getTransportationType()};p()(h.MdU,d.tW(n,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=t.EntityResult.Table;null!=e&&e.length>0&&(a.showShipment=!0,e.forEach((e=>{var t,i;null!==e.LoadedQty&&void 0!==e.LoadedQty&&(t=e.LoadedQty.toLocaleString()+" "+e.LoadedQuantityUOM),null!==e.quantity&&void 0!==e.quantity&&(i=e.quantity.toLocaleString()+" "+e.QuantityUOM),o.push({driver:e.driver,id:e.id,id1:e.id1,LoadedQty:t,LoadedQuantityUOM:e.LoadedQuantityUOM,quantity:i,QuantityUOM:e.QuantityUOM,shipmentCode:e.shipmentCode,shipmentStatus:e.shipmentStatus,vehicle:e.vehicle})})),this.setState({dsTransloadingShipments:o,railTransloading:a,isReadyToRender:!0}))}else a.showShipment=!1,this.setState({dsTransloadingShipments:o,railTransloading:a,isReadyToRender:!0}),console.log("Error in GetTransloadingShipments:",t.ErrorList)})).catch((e=>{this.setState({data:[],isReadyToRender:!0}),console.log("Error while geting GetTransloadingShipments List:",e)}))}catch(n){console.log("RailTransloadingDetailsComposite:Error occured on getReceiptShipments",n)}},this.handleReset=()=>{},this.handleRowClick=e=>{try{var t=b().cloneDeep(this.state.dsCompartmentsBaseProduct);let i=b().cloneDeep(this.state.selectCompartmentCode);(null!=e.shipmentCode||e.shipmentCode.length>0)&&t.forEach((t=>{i===t.TrailerCode&&this.getShipmentLoadingDetails(e.shipmentCode,t.ReceiptCode,t.TrailerCode,t.CompartmentCode)})),this.setState({dsCompartmentsBaseProduct:t})}catch(i){console.log("CarrierCompanyComposite:Error occured on Row click",i)}},this.toggleExpand=(e,t)=>{let i=this.state.expandedRows,a=i.findIndex((t=>t.compSeqNo===e.compSeqNo));t?i.splice(a,1):i.push(e),this.setState({expandedRows:i})}}getShipmentLoadingDetails(e,t,i,a){try{var o=b().cloneDeep(this.state.railTransloading),n=b().cloneDeep(this.state.dsTransloadingShipmentLoadingDetails),l=b().cloneDeep(this.state.dsTransloadingShipments);this.setState({dsTransloadingShipmentLoadingDetails:n,railTransloading:o,dsTransloadingShipments:l});let s={shipmentCode:e,trailerCode:i,receiptCode:t,compartmentCode:a,transportationType:this.getTransportationType()};p()(h.ll,d.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?null!=(n=b().cloneDeep(t.EntityResult.Table))&&n.length>0&&(o.showLoadingDetails=!0,this.setState({dsTransloadingShipmentLoadingDetails:n,marineTransloading:o,isReadyToRender:!0})):(o.showLoadingDetails=!1,this.setState({dsTransloadingShipmentLoadingDetails:n,marineTransloading:o,isReadyToRender:!0}),console.log("Error in GetShipmentLoadingDetails:",t.ErrorList))})).catch((e=>{this.setState({data:[],isReadyToRender:!0}),console.log("Error while geting GetShipmentLoadingDetails List:",e)}))}catch(s){console.log("RailTransloadingDetailsComposite:Error occured on getShipmentLoadingDetails",s)}}componentWillReceiveProps(e){try{""!==this.state.railReceipt.ReceiptCode&&void 0===e.selectedRow.Common_Code&&this.GetTransloadingReceiptCompartments(e.selectedRow)}catch(t){console.log("RailTransloadingDetailsComposite:Error occured on componentWillReceiveProps",t)}}componentDidMount(){try{d.pJ(this.props.userDetails.EntityResult.IsArchived),this.GetCompartmentsBaseProducts(this.props.selectedRow.ReceiptCode)}catch(e){console.log("RailTransloadingDetailsComposite:Error occured on componentDidMount",e)}}getShareholders(){return d.Zj(this.props.userDetails.EntityResult.ShareholderList)}GetCompartmentsBaseProducts(e){var t=this.getTransportationType();c.tj.TransportationType=t;var i=b().cloneDeep(this.state.listOptions);c.tj.QuantityUOM=this.props.userDetails.EntityResult.PageAttibutes.DefaultUOMS.QuantityUOM,c.tj.TerminalCodes=1===this.props.terminalCodes.length?[...this.props.terminalCodes]:[],void 0!==e?p()(h.bi3+"?ReceiptCode="+e+"&TransportationType=RAIL",d.Jm(this.props.tokenDetails.tokenInfo)).then((t=>{var i=t.data;if(!0===i.IsSuccess){var a=b().cloneDeep(this.state.railTransloading),o=b().cloneDeep(i.EntityResult.Table);if(Array.isArray(o)&&o.length>0){o.forEach((e=>{e.IsTransloading&&(0===a.lstCompartmentBPs.length&&a.lstCompartmentBPs.push(e.BaseProductCode),0===a.lstCompartmentBPs.filter((t=>t.BaseProductCode!==e.BaseProductCode)).length&&a.lstCompartmentBPs.push(e.BaseProductCode))})),a.PlanQuantityUOM=o[0].PlanQuantityUOM,void 0!==o[0].UnloadedQuantityUOM&&null!==o[0].UnloadedQuantityUOM?a.UnloadedQuantityUOM=o[0].UnloadedQuantityUOM:a.UnloadedQuantityUOM=o[0].PlanQuantityUOM;let e=[];o.forEach((t=>{if(t.IsTransloading){e.findIndex((e=>e===t.BaseProductCode))<0&&e.push(t.BaseProductCode)}})),a.NoOfProducts=e.length}this.setState({isReadyToRender:!0,railTransloading:b().cloneDeep(a),dsCompartmentsBaseProduct:b().cloneDeep(o)}),this.getRailReceipt(e)}else this.setState({railTransloading:b().cloneDeep(c.tj),modrailTransloading:b().cloneDeep(c.tj),isReadyToRender:!0}),console.log("Error in GetCompartmentsBaseProducts:",i.ErrorList)})).catch((e=>{console.log("Error while getting GetCompartmentsBaseProducts:",e)})):this.setState({railTransloading:{...c.tj},modrailTransloading:{...c.tj},listOptions:i,isReadyToRender:!0})}getRailReceipt(e){var t=this.getTransportationType();c.tj.TransportationType=t,c.tj.Active=!0,c.tj.QuantityUOM=this.props.userDetails.EntityResult.PageAttibutes.DefaultUOMS.QuantityUOM,c.tj.TerminalCodes=1===this.props.terminalCodes.length?[...this.props.terminalCodes]:[];var i=[{key:y.eT,value:e},{key:y.v6,value:t}],a={ShareHolderCode:this.props.selectedShareholder,keyDataCode:y.eT,KeyCodes:i};p()(h.ffd,d.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var i=b().cloneDeep(this.state.railTransloading);let e=t.EntityResult;null!=this.props.selectedRow&&void 0!=this.props.selectedRow&&(e.ReceiptStatus=this.props.selectedRow.ReceiptStatus),null!==e&&null!==e.RailMarineReceiptCompartmentPlanList&&e.RailMarineReceiptCompartmentPlanList.forEach((e=>{if(null!==e.IsTransloading&&""!==e.IsTransloading&&e.IsTransloading){var t=e.TrailerCode+"("+this.GetBaseProductForCompartment(e.SequenceNo)+")";i.lstCompartmentList.push({compartBP:t,CompartmentCode:e.TrailerCode}),i.totalNoOfTransWagons+=1,i.totalPlannedQtyForTransloadingWagons+=e.PlannedQuantity,void 0!==e.UnloadedQuantity&&null!==e.UnloadedQuantity&&(i.totalUnloadedQtyForTransloadingWagons+=e.UnloadedQuantity)}i.receiptPlannedQty+=e.PlannedQuantity})),this.setState({isReadyToRender:!0,railReceipt:b().cloneDeep(t.EntityResult),railTransloading:b().cloneDeep(i)})}else this.setState({railReceipt:b().cloneDeep(c.tj),modMarineReceipt:b().cloneDeep(c.tj),isReadyToRender:!0}),console.log("Error in getRailReceipt:",t.ErrorList)})).catch((e=>{console.log("Error while getting railReceipt:",e)}))}GetBaseProductForCompartment(e){let t="";var i=b().cloneDeep(this.state.dsCompartmentsBaseProduct);if(Array.isArray(i)&&i.length>0){var a=i.filter(((t,i)=>t.SequenceNo===e));void 0!==a&&a.length>0&&(t=a[0].BaseProductCode)}return t}getTransportationType(){var e=u.LY.RAIL;const{genericProps:t}=this.props;return void 0!==t&&void 0!==t.transportationType&&(e=t.transportationType),e}render(){return this.state.isReadyToRender?(0,s.jsxs)("div",{children:[(0,s.jsx)(S.A,{children:(0,s.jsx)(R.A,{newEntityName:"viewTransloading_PageTitle"})}),(0,s.jsx)(S.A,{children:(0,s.jsx)(r,{railReceipt:this.state.railReceipt,railTransloading:this.state.railTransloading,selectedCompRow:this.state.selectedCompRow,dsCompartmentsBaseProduct:this.state.dsCompartmentsBaseProduct,dsTransloadingShipmentLoadingDetails:this.state.dsTransloadingShipmentLoadingDetails,dsTransloadingShipments:this.state.dsTransloadingShipments,railTransloadingAssociatedShipmentsColumns:this.state.railTransloadingAssociatedShipmentsColumns,railTransloadingDetailsColumns:this.state.railTransloadingDetailsColumns,handleRowSelectionChange:this.handleRowSelectionChange,setCurrentList:this.setCurrentList,onRowClick:this.handleRowClick,isSelect:this.state.isSelect,expandedRows:this.state.expandedRows,toggleExpand:this.toggleExpand})}),(0,s.jsx)(S.A,{children:(0,s.jsx)(S.A,{children:(0,s.jsx)(o.TranslationConsumer,{children:e=>(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col col-2",children:(0,s.jsx)(l.Button,{className:"backButton",onClick:this.props.onBack,content:e("Back")})})})})})})]}):(0,s.jsx)(D.A,{message:"Loading"})}}const v=(0,x.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})),(e=>({userActions:(0,C.zH)(g,e)})))(f)},54684:(e,t,i)=>{i.r(t),i.d(t,{default:()=>b});var a=i(65043),o=i(66554),n=i(19380),l=i(70579);function s(e){let{tableData:t,columnDetails:i,pageSize:a,exportRequired:o,exportFileName:s,columnPickerRequired:r,columnGroupingRequired:d,terminalsToShow:c,selectionRequired:m,onSelectionChange:p,onRowClick:h,parentComponent:u}=e;return(0,l.jsx)(n.A,{data:t,columns:i,rowsPerPage:a,exportRequired:o,exportFileName:s,columnPickerRequired:r,columnGroupingRequired:d,terminalsToShow:c,selectionRequired:m,onSelectionHandle:p,onRowClick:h,parentComponent:u})}var r=i(40854),d=i.n(r),c=i(7523),m=i(72067),p=i(14159),h=(i(92342),i(97508)),u=(i(63973),i(11981)),g=i(69062),C=i(65187),x=i(80312),S=i(40252),R=i(15441),y=i(68226),T=i(15821);class j extends a.Component{constructor(){super(...arguments),this.state={isDetails:"false",isReadyToRender:!1,isDetailsModified:"false",operationsVisibilty:{add:!1,delete:!1,shareholder:!1},selectedRow:{},selectedItems:[],selectedShareholder:"",data:{},terminalCodes:[],fromDate:new Date,toDate:new Date,dateError:"",isEnable:!0},this.componentName="RailTransloadingComponent",this.handleRangeSelect=e=>{let{to:t,from:i}=e;void 0!==t&&this.setState({toDate:t}),void 0!==i&&this.setState({fromDate:i})},this.handleDateTextChange=(e,t)=>{""===e&&this.setState({dateError:"",toDate:"",fromDate:""}),null!==t&&""!==t?this.setState({dateError:"Common_InvalidDate",toDate:"",fromDate:""}):this.setState({dateError:"",toDate:e.to,fromDate:e.from})},this.handleLoadOrders=()=>{var{operationsVisibilty:e}={...this.state};e.delete=!1,e.shareholder=!1;let t=g.wb(this.state.toDate,this.state.fromDate);""!==t?this.setState({dateError:t}):(this.setState({dateError:"",isDetails:"false",selectedRow:{},selectedItems:[],operationsVisibilty:e}),this.getRailReceipTransloadingtList(this.state.selectedShareholder))},this.handleBack=()=>{try{var{operationsVisibilty:e}={...this.state};e.delete=!1,e.shareholder=!1,this.setState({isDetails:"false",selectedRow:{},selectedItems:[],operationsVisibilty:e,isReadyToRender:!1}),this.getMarineReceipTransloadingtList(this.state.selectedShareholder)}catch(t){console.log("RailTransloadingComposite:Error occured on Back click",t)}},this.handleRowClick=e=>{try{var{operationsVisibilty:t}={...this.state};this.setState({isDetails:"true",selectedRow:e,selectedItems:[e],operationsVisibilty:t})}catch(i){console.log("RailTransloadingComposite:Error occured on handleRowClick",i)}},this.handleSelection=e=>{try{var{operationsVisibilty:t}={...this.state};t.delete=e.length>0&&g.ab(this.props.userDetails.EntityResult.FunctionsList,x.i.remove,x.fr),t.delete=!1,this.setState({selectedItems:e,operationsVisibilty:t})}catch(i){console.log("RailTransloadingComposite:Error occured on handleSelection",i)}},this.savedEvent=(e,t,i)=>{try{var{operationsVisibilty:a}={...this.state};if("success"===i.messageType&&(a.add=!1,a.delete=!1,this.setState({isDetailsModified:"true",operationsVisibilty:a})),"success"===i.messageType&&"add"===t){var o=[{MarineReceiptCode:e.Code,Common_Shareholder:e.ShareholderCode}];this.setState({selectedItems:o})}(0,p.toast)((0,l.jsx)(C.A,{children:(0,l.jsx)(u.A,{notificationMessage:i})}),{autoClose:"success"===i.messageType&&1e4})}catch(n){console.log("RailTransloadingComposite:Error occured on savedEvent",n)}},this.componentWillUnmount=()=>{g.D6(this.componentName+"GridState"),window.removeEventListener("beforeunload",(()=>g.D6(this.componentName+"GridState")))},this.handleShareholderSelectionChange=e=>{try{this.setState({selectedShareholder:e}),this.getRailReceipTransloadingtList(e),this.getTerminalsList(e)}catch(t){console.log("RailTransloadingComposite:Error occured on handleShareholderSelectionChange",t)}}}getRailReceipTransloadingtList(e){let t=new Date(this.state.fromDate),i=new Date(this.state.toDate);t.setHours(0,0,0),i.setHours(23,59,59);let a={ShareholderCode:e,startRange:t,endRange:i,TransportationType:c.LY.RAIL};d()(m.odd,g.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!=t.EntityResult&&null!=t.EntityResult.Table)for(let e=0;e<t.EntityResult.Table.length;e++){const i=t.EntityResult.Table[e];parseInt(i.NoOfUnloadingWagons.toString())>0&&(i.ReceiptStatus="UNLOADING")}this.setState({data:t.EntityResult,isReadyToRender:!0})}else this.setState({data:[],isReadyToRender:!0}),console.log("Error in getRailReceipTransloadingtListForRole:",t.ErrorList)})).catch((e=>{this.setState({data:[],isReadyToRender:!0}),console.log("Error while getRailReceipTransloadingtList:",e)}))}getTerminalsList(e){try{null!==e&&""!==e?d()(m.Oqv,g.tW([e],this.props.tokenDetails.tokenInfo)).then((e=>{e.data.IsSuccess&&this.setState({terminalCodes:e.data.EntityResult})})):this.setState({terminalCodes:[]})}catch(t){console.log("RailDispatchComposite:Error occured on getTerminalsList",t)}}componentDidMount(){try{g.pJ(this.props.userDetails.EntityResult.IsArchived);var{operationsVisibilty:e}={...this.state};this.setState({operationsVisibilty:e,selectedShareholder:this.props.userDetails.EntityResult.PrimaryShareholder}),this.getTransloading()}catch(t){console.log("RailTransloadingComposite:Error occured on componentDidMount",t)}window.addEventListener("beforeunload",(()=>g.D6(this.componentName+"GridState")))}getTransloading(){d()(m.xAA+"?LookUpTypeCode=Transloading",g.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;let i=!1;!0===t.IsSuccess?("True"===t.EntityResult.RAILEnable&&(i=!0),this.setState({isEnable:i}),i&&(this.getTerminalsList(this.props.userDetails.EntityResult.PrimaryShareholder),this.getRailReceipTransloadingtList(this.props.userDetails.EntityResult.PrimaryShareholder))):console.log("Error in getLookUpData: ",t.ErrorList)})).catch((e=>{console.log("MarineReceiptDetailsComposite: Error occurred on getLookUpData",e)}))}render(){return(0,l.jsxs)("div",{children:[(0,l.jsx)(C.A,{children:(0,l.jsx)(o.$,{operationsVisibilty:this.state.operationsVisibilty,breadcrumbItem:this.props.activeItem,shareholders:this.props.userDetails.EntityResult.ShareholderList,selectedShareholder:this.state.selectedShareholder,onShareholderChange:this.handleShareholderSelectionChange,handleBreadCrumbClick:this.props.handleBreadCrumbClick,addVisible:!1,deleteVisible:!1})}),"true"===this.state.isDetails?(0,l.jsx)(C.A,{children:(0,l.jsx)(y.default,{Key:"RailTransloadingDetails",selectedRow:this.state.selectedRow,selectedShareholder:this.state.selectedShareholder,terminalCodes:this.state.terminalCodes,onBack:this.handleBack,onSaved:this.savedEvent,genericProps:this.props.activeItem.itemProps})}):this.state.isReadyToRender?(0,l.jsxs)("div",{children:[(0,l.jsx)(C.A,{children:(0,l.jsx)(R.L,{dateRange:{from:this.state.fromDate,to:this.state.toDate},dateError:this.state.dateError,handleDateTextChange:this.handleDateTextChange,handleRangeSelect:this.handleRangeSelect,handleLoadOrders:this.handleLoadOrders,filterText:"LoadTransloading"})}),(0,l.jsx)(C.A,{children:(0,l.jsx)(s,{tableData:this.state.data.Table,columnDetails:this.state.data.Column,pageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,exportRequired:!0,exportFileName:"RailTransloadingList",columnPickerRequired:!0,terminalsToShow:this.props.userDetails.EntityResult.PageAttibutes.NoOfTerminalsToShow,selectionRequired:!0,columnGroupingRequired:!0,onSelectionChange:this.handleSelection,onRowClick:this.handleRowClick,parentComponent:this.componentName})})]}):(0,l.jsx)(l.Fragment,{children:this.state.isEnable?(0,l.jsx)(S.A,{loadingClass:"globalLoader",message:"Loading"}):(0,l.jsx)(T.default,{errorMessage:"RailTransloadingDisabled"})}),(0,l.jsx)(C.A,{children:(0,l.jsx)(p.ToastContainer,{hideProgressBar:!0,closeOnClick:!1,closeButton:!0,newestOnTop:!0,position:"bottom-right",toastClassName:"toast-notification-wrap"})})]})}}const b=(0,h.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(j)},43503:(e,t,i)=>{i.d(t,{A:()=>s});i(65043);var a=i(67907),o=i(72711),n=i(70579);function l(e){let{entityCode:t,newEntityName:i,popUpContents:l}=e;return(0,n.jsx)(a.TranslationConsumer,{children:e=>(0,n.jsx)("div",{className:"headerContainer",children:(0,n.jsxs)("div",{className:"row headerSpacing",children:[(0,n.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,n.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(i):t})}),""!==t&&void 0!==t&&l.length>0?(0,n.jsx)("div",{className:"headerItemRight",children:(0,n.jsx)(o.Popup,{element:(0,n.jsxs)("div",{children:[e(l[0].fieldName)+" ",":"," "+l[0].fieldValue,(0,n.jsx)(o.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,n.jsx)(o.List,{className:"detailsHeaderPopUp",children:l.map((t=>(0,n.jsxs)(o.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}l.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const s=l},15441:(e,t,i)=>{i.d(t,{L:()=>s});i(65043);var a=i(67907),o=i(72711),n=i(35861),l=i(70579);function s(e){let{handleDateTextChange:t,handleRangeSelect:i,handleLoadOrders:s,dateError:r,dateRange:d,filterText:c}=e;return(0,l.jsx)(a.TranslationConsumer,{children:e=>(0,l.jsxs)("div",{className:"dateRangeContainer",children:[(0,l.jsx)("div",{className:"dateRangeMargin",children:(0,l.jsx)(o.DatePicker,{type:"daterange",closeOnSelection:!0,error:e(r),displayFormat:(0,n.F1)(),rangeValue:d,onTextChange:t,onRangeSelect:i,reserveSpace:!1})}),(0,l.jsx)("div",{className:"dateSearch",children:(0,l.jsx)(o.Button,{content:e(c),onClick:s})})]})})}},80312:(e,t,i)=>{i.d(t,{$3:()=>H,$H:()=>ae,$J:()=>he,$K:()=>ge,$V:()=>wt,$b:()=>yt,$p:()=>Q,AE:()=>D,Al:()=>U,B2:()=>at,By:()=>Dt,CW:()=>gt,DA:()=>r,Ee:()=>Ve,FO:()=>E,Fy:()=>Ie,G9:()=>it,H8:()=>ee,Hq:()=>st,Ig:()=>M,Iu:()=>x,JI:()=>dt,JJ:()=>te,JU:()=>z,Jz:()=>ze,KQ:()=>le,Kk:()=>Ze,Kw:()=>et,LP:()=>Pt,LR:()=>c,Lg:()=>$,Mg:()=>ye,Mm:()=>I,N1:()=>Y,Nm:()=>u,No:()=>de,Ow:()=>B,P2:()=>n,P8:()=>Se,PD:()=>Le,PE:()=>m,PG:()=>K,PP:()=>ht,Pb:()=>Ae,QB:()=>T,QC:()=>Z,RE:()=>nt,RO:()=>$e,Rc:()=>xt,Rl:()=>Tt,Rx:()=>Ct,TI:()=>S,Tm:()=>ue,Ug:()=>X,Ur:()=>qe,V9:()=>d,VK:()=>q,VL:()=>pe,VQ:()=>se,WD:()=>Oe,Wf:()=>w,YO:()=>k,YY:()=>Ee,Yb:()=>Ce,Yg:()=>He,Z9:()=>pt,ZE:()=>ct,ZU:()=>y,_N:()=>St,_S:()=>Nt,_d:()=>Et,aS:()=>V,aZ:()=>mt,au:()=>be,b0:()=>vt,bL:()=>Ue,c2:()=>Ge,d4:()=>Me,dB:()=>C,dD:()=>Qe,dK:()=>W,dY:()=>L,de:()=>p,dv:()=>Ne,eQ:()=>s,f3:()=>Te,fF:()=>O,fL:()=>Rt,fN:()=>bt,fk:()=>N,fl:()=>xe,fr:()=>j,go:()=>o,h:()=>me,hD:()=>v,hE:()=>P,hh:()=>Xe,hk:()=>ne,hz:()=>ut,i:()=>a,j2:()=>lt,jN:()=>_,je:()=>g,jx:()=>G,kL:()=>Ye,ke:()=>Be,km:()=>re,l0:()=>oe,l6:()=>We,lz:()=>A,m0:()=>R,nS:()=>fe,nk:()=>rt,nn:()=>b,np:()=>J,oh:()=>ot,op:()=>Ke,pt:()=>Fe,qk:()=>ce,qp:()=>Re,r6:()=>ve,rQ:()=>we,rj:()=>F,rp:()=>l,t3:()=>jt,tM:()=>ke,to:()=>kt,ts:()=>tt,uH:()=>je,uy:()=>Je,w1:()=>Pe,x5:()=>ie,xz:()=>f,y_:()=>_e,yu:()=>h,yx:()=>ft,z8:()=>De,z_:()=>Lt});const a={view:"view",add:"add",modify:"modify",remove:"remove"},o="carriercompany",n="driver",l="customer",s="trailer",r="originterminal",d="destination",c="primemover",m="vehicle",p="shipmentbycompartment",h="shipmentbyproduct",u="ViewShipmentStatus",g="vessel",C="order",x="OrderForceClose",S="contract",R="receiptplanbycompartment",y="ViewMarineShipment",T="MarineShipmentByCompartment",j="ViewMarineReceipt",b="supplier",D="finishedproduct",f="RailDispatch",v="RailReceipt",w="RailRoute",N="RailWagon",P="CloseRailDispatch",E="PrintRailBOL",L="PrintRailFAN",k="RailDispatchLoadSpotAssignment",A="RailDispatchProductAssignment",M="ViewRailDispatch",I="ViewRailLoadingDetails",O="CloseRailReceipt",F="PrintRailBOD",G="PrintRailRAN",U="ViewRailReceipt",Q="ViewRailUnLoadingDetails",V="SMS",B="UnAccountedTransactionTank",q="UnAccountedTransactionMeter",W="PipelineDispatch",H="PipelineReceipt",_="PipelineDispatchManualEntry",z="PipelineReceiptManualEntry",K="LookUpData",J="HSEInspection",$="HSEInspectionConfig",Y="Email",Z="Shareholder",X="LocationConfig",ee="DeviceConfig",te="baseproduct",ie="SiteView",ae="LeakageManualEntry",oe="Terminal",ne="SlotInformation",le="TankGroup",se="Tank",re="SealMaster",de="TankEODEntry",ce="UnmatchedLocalTransactions",me="AccessCard",pe="ResetPin",he="SlotConfiguration",ue="PrintMarineFAN",ge="PrintMarineBOL",Ce="ViewMarineLoadingDetails",xe="ViewMarineShipmentAuditTrail",Se="CloseMarineShipment",Re="IssueCard",ye="ActivateCard",Te="RevokeCard",je="AutoIDAssociation",be="MarineReceiptByCompartment",De="PrintMarineRAN",fe="PrintMarineBOD",ve="ViewMarineUnloadingDetails",we="ViewMarineReceiptAuditTrail",Ne="CloseMarineReceipt",Pe="WeekendConfig",Ee="EODAdmin",Le="PrintBOL",ke="PrintFAN",Ae="PrintBOD",Me="CloseShipment",Ie="CloseReceipt",Oe="CONTRACTFORCECLOSE",Fe="Captain",Ge="OverrideShipmentSequence",Ue="KPIInformation",Qe="Language",Ve="WebPortalUserMap",Be="BayGroup",qe="PipelineHeaderSiteView",We="TankMonitor",He="PersonAdmin",_e="ProductReconciliationReports",ze="ReportConfiguration",Ke="EXECONFIGURATION",Je="ShareholderAllocation",$e="NotificationGroup",Ye="NotificationRestriction",Ze="NotificationConfig",Xe="AllowWeighBridgeManualEntry",et="ProductAllocation",tt="MasterDeviceConfiguration",it="ShareholderAgreement",at="TANKSHAREHOLDERPRIMEFUNCTION",ot="ROLEADMIN",nt="ShiftConfig",lt="PrinterConfiguration",st="CustomerAgreement",rt="BaySCADAConfiguration",dt="RailReceiptUnloadSpotAssignment",ct="STAFF_VISITOR",mt="PipelineMeterSiteView",pt="RailSiteView",ht="MarineSiteView",ut="LoadingDetails",gt="UnloadingDetails",Ct="RoadHSEInspection",xt="RoadHSEInspectionConfig",St="MarineHSEInspection",Rt="MarineHSEInspectionConfig",yt="RailHSEInspection",Tt="RailHSEInspectionConfig",jt="PipelineHSEInspection",bt="PipelineHSEInspectionConfig",Dt="PrintRAN",ft="ViewReceiptStatus",vt="customerrecipe",wt="COAParameter",Nt="COATemplate",Pt="COAManagement",Et="COACustomer",Lt="COAAssignment",kt="ProductForecastConfiguration"},93779:(e,t,i)=>{i.d(t,{$A:()=>L,$L:()=>rt,$Q:()=>Qe,Ae:()=>Pe,BX:()=>ne,Bl:()=>ue,Bv:()=>xe,Bw:()=>Z,Cb:()=>P,Cg:()=>w,DN:()=>nt,D_:()=>lt,Dm:()=>k,E7:()=>J,EW:()=>M,FN:()=>oe,FR:()=>n,FY:()=>ut,GA:()=>Ve,GT:()=>y,Ge:()=>Ae,HB:()=>le,JQ:()=>K,KJ:()=>ee,Kz:()=>W,Ln:()=>q,M$:()=>qe,O5:()=>tt,Of:()=>Te,Oo:()=>it,Pk:()=>Ce,Pm:()=>Y,Q5:()=>dt,QK:()=>We,QV:()=>Ze,QZ:()=>ct,Qu:()=>ie,RX:()=>we,Rb:()=>V,Rp:()=>b,SP:()=>g,T5:()=>Oe,UB:()=>S,UT:()=>r,Ui:()=>_,VA:()=>Q,Vk:()=>be,Wb:()=>De,Wv:()=>je,X3:()=>Ke,Y4:()=>B,Yl:()=>at,Zx:()=>$,_B:()=>Se,_C:()=>N,_R:()=>ge,_j:()=>ce,_n:()=>a,aM:()=>O,aW:()=>Ue,bW:()=>U,c4:()=>ot,cD:()=>s,c_:()=>f,cx:()=>G,dL:()=>mt,eE:()=>re,eS:()=>_e,eT:()=>j,f:()=>A,f7:()=>he,fR:()=>me,g1:()=>de,gN:()=>Je,gO:()=>H,iH:()=>st,ij:()=>et,j1:()=>v,jC:()=>Re,je:()=>pe,jz:()=>se,ll:()=>Xe,mM:()=>R,mO:()=>ht,mW:()=>Ie,ml:()=>C,mm:()=>Ye,nB:()=>te,nT:()=>Me,np:()=>ke,oA:()=>D,oG:()=>ze,oV:()=>X,ok:()=>m,oy:()=>d,pL:()=>Ee,pe:()=>Be,pw:()=>He,qF:()=>l,qQ:()=>pt,qp:()=>p,s0:()=>T,sA:()=>Ne,st:()=>ae,tY:()=>I,uw:()=>z,v6:()=>o,vL:()=>Fe,vf:()=>Le,wH:()=>$e,wO:()=>ye,wX:()=>F,x4:()=>fe,xf:()=>h,xy:()=>c,yI:()=>x,yV:()=>E,yz:()=>u,zL:()=>ve,zf:()=>Ge});const a="CarrierCode",o="TransportationType",n="ShareHolderCode",l="DriverCode",s="CustomerCode",r="TrailerCode",d="OriginTerminalCode",c="PrimeMoverCode",m="VehicleCode",p="DestinationCode",h="FinishedProductCode",u="ShipmentCode",g="OrderCode",C="ReceiptCode",x="MarineDispatchCode",S="MarineReceiptCode",R="SupplierCode",y="ContractCode",T="RailDispatchCode",j="RailReceiptCode",b="RailRouteCode",D="WagonCode",f="CompartmentCode",v="SMSConfigurationCode",w="PipelineDispatchCode",N="PipelineReceiptCode",P="EmailConfigurationCode",E="BaseProductCode",L="LocationCode",k="SiteViewType",A="EntityCode",M="EntityType",I="CardReaderCode",O="AccessCardCode",F="BcuCode",G="DeuCode",U="WeighBridgeCode",Q="Weight",V="OutOfToleranceAllowed",B="LoadingArmCode",q="TransportationType",W="BayCode",H="TransactionNumber",_="BatchNumber",z="TerminalCode",K="TankGroupCode",J="TankCode",$="MeterCode",Y="ShipmentType",Z="ShipmentStatus",X="MeterLineType",ee="DispatchCode",te="ReceiptStatus",ie="FPTransactionID",ae="ProductCategoryType",oe="Reason",ne="SealMasterCode",le="Reason",se="OperationName",re="FPTransactionID",de="ProductCategoryType",ce="CompartmentSeqNoInVehicle",me="AdjustedPlanQuantity",pe="ForceComplete",he="DispatchStatus",ue="HolidayDate",ge="ActionID",Ce="EODTimePrev",xe="TerminalAction",Se="EODTime",Re="MonthStartDay",ye="CaptainCode",Te="GeneralTMUserType",je="GeneralTMUserCode",be="IsPriority",De="ActualTerminalCode",fe="ShipmentBondNo",ve="ReceiptBondNo",we="DeviceType",Ne="DeviceCode",Pe="BayGroup",Ee="PipelineHeaderCode",Le="ExchangePartner",ke="PersonID",Ae="UserName",Me="PipelinePlanCode",Ie="PipelinePlanType",Oe="ChannelCode",Fe="ProcessName",Ge="ReconciliationCode",Ue="NotificationGroupCode",Qe="NotificationGroupStatus",Ve="NotificationGroupDesc",Be="NotificationResSource",qe="NotificationResMsgCode",We="NotificationOrigResSource",He="NotificationOrigResMsgCode",_e="NotificationMessageCode",ze="PositionType",Ke="ExchangeAgreementCode",Je="ProductTransferAgreementCode",$e="ShareholderAgreementStatus",Ye="RequestorShareholder",Ze="LenderShareholder",Xe="RequestCode",et="TransferReferenceCode",tt="ShiftID",it="ShiftName",at="PrinterName",ot="LocationType",nt="ForceClosureReason",lt="TransactionType",st="CustomerRecipeCode",rt="COATemplateCode",dt="COAManagementCode",ct="COAParameterCode",mt="COAManagementFinishedProductCode",pt="COASeqNumber",ht="ForecastDate",ut="ForecastTanks"},35861:(e,t,i)=>{i.d(t,{F1:()=>s,i7:()=>r,r4:()=>l});var a=i(86178),o=i.n(a),n=(i(15660),i(65043),i(70579));function l(e,t){if(Array.isArray(e)){0===e.filter((e=>e.text===t)).length&&e.unshift({value:null,text:t})}return e}function s(){let e=window.navigator.userLanguage||window.navigator.language;return o().locale(e),o().localeData().longDateFormat("L")}function r(e){return(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{children:e}),(0,n.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]})}},92342:()=>{}}]);
//# sourceMappingURL=4684.7617e54f.chunk.js.map