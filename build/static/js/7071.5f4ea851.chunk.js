"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[7071,6001,8382,735,3116,3235,5973,8354],{47071:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var a=s(65043),o=s(67907),r=s(78374),i=s(72711),l=s(85800),d=s(65187),n=s(35861),c=s(70579);function u(e){let{coaCustomer:t,modCOACustomer:s,validationErrors:a,listOptions:u,onFieldChange:C,onFinishedProductCodeChange:m,onBaseProductCodeChange:h,onTemplateProductCodeChange:A,onAvailableCustomerParameterSelection:E,pageSize:p,onCustomerParameterAssociation:P,onAssociatedCustomerParameterSelection:S,onCustomerParameterDisassociation:D,handleCellDataEdit:I,modAttributeMetaDataList:T,attributeValidationErrors:N,onAttributeDataChange:g}=e;const v=(e,t)=>{let s=[];return s=e.find((e=>e.TerminalCode===t)),s.attributeValidationErrors},R=e=>(0,c.jsx)(i.Input,{fluid:!0,value:e.rowData[e.field],onChange:t=>I(t,e),reserveSpace:!1});return(0,c.jsx)(o.TranslationConsumer,{children:e=>(0,c.jsxs)("div",{className:"detailsContainer",children:[(0,c.jsxs)("div",{className:"row",style:{"align-items":"initial"},children:[(0,c.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,c.jsx)(i.Select,{fluid:!0,placeholder:"Select",value:s.CustomerCode,label:e("COACustomerCode"),indicator:"required",options:u.customerCodes,onChange:e=>C("CustomerCode",e),error:e(a.CustomerCode),disabled:""!==t.CustomerCode,multiple:!1,reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage")})}),(0,c.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,c.jsx)(i.Select,{fluid:!0,placeholder:"Select",value:s.FinishedProductCode,label:e("COACustomerFPCode"),indicator:"required",options:u.finishedProductCodes,onChange:e=>m(e),error:e(a.FinishedProductCode),disabled:""!==t.FinishedProductCode,multiple:!1,reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage")})}),(0,c.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,c.jsx)(i.Select,{fluid:!0,placeholder:"Select",value:s.BaseProductCode,label:e("COACustomerBPCode"),options:(0,n.r4)(u.baseProductCodes,e("Common_Select")),onChange:e=>h(e),error:e(a.BaseProductCode),disabled:!1,multiple:!1,reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage"),text:s.BaseProductCode})}),(0,c.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,c.jsx)(i.Select,{fluid:!0,placeholder:"Select",value:s.TemplateCode,label:e("COACustomerTemplateCode"),options:(0,n.r4)(u.templateCodes,e("Common_Select")),onChange:e=>A(e),error:e(a.TemplateCode),disabled:!1,multiple:!1,reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage"),text:s.TemplateCode})})]}),T.length>0?T.map((t=>(0,c.jsx)(d.A,{children:(0,c.jsx)(i.Accordion,{children:(0,c.jsx)(i.Accordion.Content,{className:"attributeAccordian",title:e("Attributes_Header"),children:(0,c.jsx)(l.n,{selectedAttributeList:t.attributeMetaDataList,handleCellDataEdit:g,attributeValidationErrors:v(N,t.TerminalCode)})})})}))):null,(0,c.jsxs)("div",{className:"row",style:{"align-items":"initial"},children:[(0,c.jsxs)("div",{className:"col-12 col-md-5 col-lg-7",children:[(0,c.jsx)("h4",{children:e("COACustomer_Configuration")}),(0,c.jsx)("div",{className:"detailsTable",children:(0,c.jsxs)(r.bQ,{data:u.availableCustomerParameters,search:!0,selectionMode:"multiple",selection:u.selectedAvailableCustomerParameters,onSelectionChange:E,rows:p,searchPlaceholder:e("LoadingDetailsView_SearchGrid"),children:[(0,c.jsx)(r.bQ.Column,{className:"compColHeight",field:"ParameterName",header:e("COACustomerDetail_ParameterName")},"ParameterName"),(0,c.jsx)(r.bQ.Column,{className:"compColHeight",field:"Specification",header:e("COACustomerDetail_Specification"),editFieldType:"text",editable:!0,customEditRenderer:e=>R(e)},"Specification"),(0,c.jsx)(r.bQ.Column,{className:"compColHeight",field:"Method",header:e("COACustomerDetail_Method"),editFieldType:"text",editable:!0,customEditRenderer:e=>R(e)},"Method"),(0,c.jsx)(r.bQ.Column,{className:"compColHeight",field:"SortIndex",header:e("COACustomerDetail_SortIndex"),editFieldType:"text",editable:!0,customEditRenderer:e=>R(e)},"SortIndex"),Array.isArray(u.availableCustomerParameters)&&u.availableCustomerParameters.length>p?(0,c.jsx)(r.bQ.Pagination,{}):""]})})]}),(0,c.jsxs)("div",{className:"col-12 col-md-2 col-lg-2",children:[(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),(0,c.jsxs)("div",{style:{textAlign:"center"},children:[(0,c.jsx)(i.Button,{type:"primary",icon:(0,c.jsx)(i.Icon,{name:"caret-right",root:"common"}),content:"",iconPosition:"right",onClick:P,disabled:!(u.availableCustomerParameters.length>0)}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),(0,c.jsx)(i.Button,{type:"primary",icon:(0,c.jsx)(i.Icon,{name:"caret-left",root:"common"}),content:"",iconPosition:"right",onClick:D,disabled:!(u.associatedCustomerParameters.length>0)})]})]}),(0,c.jsxs)("div",{className:"col-12 col-md-5 col-lg-3",children:[(0,c.jsx)("h4",{children:e("COACustomer_Configuration_AvailableParameter")}),(0,c.jsx)("div",{className:"detailsTable",children:(0,c.jsxs)(r.bQ,{data:u.associatedCustomerParameters,search:!0,selectionMode:"multiple",selection:u.selectedAssociatedCustomerParameters,onSelectionChange:S,rows:p,searchPlaceholder:e("LoadingDetailsView_SearchGrid"),children:[(0,c.jsx)(r.bQ.Column,{className:"compColHeight",field:"ParameterName",header:e("COACustomerDetail_DisableParameterName"),editFieldType:"text"},"ParameterName"),Array.isArray(u.associatedCustomerParameters)&&u.associatedCustomerParameters.length>p?(0,c.jsx)(r.bQ.Pagination,{}):""]})})]}),(0,c.jsx)("div",{})]})]})})}var C=s(9256),m=s(44192),h=s(69062),A=s(46100),E=s(40854),p=s.n(E),P=s(72067),S=s(97508),D=(s(38726),s(43503)),I=s(93779),T=s(80312),N=s(53536),g=s.n(N),v=s(40252),R=s(62900),b=s(15417);class O extends a.Component{constructor(){super(...arguments),this.state={coaCustomer:g().cloneDeep(A.z_),modCOACustomer:{},validationErrors:h.Th(m.cr),isReadyToRender:!1,saveEnabled:!1,showAuthenticationLayout:!1,tempCOACustomer:{},initavailableCustomerParameters:[],availableCustomerParameters:[],selectedAvailableCustomerParameters:[],associatedCustomerParameters:[],selectedAssociatedCustomerParameters:[],customerCodes:[],finishedProductCodes:[],baseProductCodes:[],templateCodes:[],attributeMetaDataList:[],modAttributeMetaDataList:[],attributeValidationErrors:[],allCustomerParameters:[],allFinishedProducts:[]},this.handleAttributeDataChange=(e,t)=>{try{let s=[],a=g().cloneDeep(this.state.modAttributeMetaDataList),o=a.filter((t=>t.TerminalCode===e.TerminalCode));o.length>0&&Array.isArray(o[0].attributeMetaDataList)&&(s=o[0].attributeMetaDataList.filter((t=>t.Code===e.Code))),s.length>0&&(s[0].DefaultValue=t);const r=g().cloneDeep(this.state.attributeValidationErrors);r.forEach((s=>{s.TerminalCode===e.TerminalCode&&(s.attributeValidationErrors[e.Code]=h.I5(e,t))})),this.setState({attributeValidationErrors:r,modAttributeMetaDataList:a})}catch(s){console.log("TerminalDetailsComposite:Error occured on handleAttributeDataChange",s)}},this.getAllParameters=()=>{try{var e=[{key:I.$L,value:""}],t={ShareHolderCode:this.props.selectedShareholder,keyDataCode:I.$L,KeyCodes:e};p()(P._dq,h.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=t.EntityResult;var s=[];e.forEach((e=>{var t={ParameterName:e.ParameterName,Specification:e.Specification,Method:e.Method,SortIndex:e.SortIndex};s.push(t)})),this.setState({allCustomerParameters:s},(()=>{this.getAttributes(this.props.selectedRow)}))}else this.setState({allCustomerParameters:[]},(()=>{})),console.log("Error in getAllParameters:",t.ErrorList)})).catch((e=>{console.log("Error while getAllParameters:",e)}))}catch(s){console.log("Error while getAllParameters:",s)}},this.handleFinishedProductCodeChange=e=>{try{const t=g().cloneDeep(this.state.modCOACustomer),s=g().cloneDeep(this.state.validationErrors);if(t.FinishedProductCode=e,t.BaseProductCode="",t.TemplateCode="",this.setState({modCOACustomer:t,templateCodes:[],availableCustomerParameters:[],selectedAvailableCustomerParameters:[],associatedCustomerParameters:g().cloneDeep(this.state.allCustomerParameters),isReadyToRender:!1},(()=>{this.setState({isReadyToRender:!0})})),void 0!==m.cr.FinishedProductCode&&(s.FinishedProductCode=h.jr(m.cr.FinishedProductCode,e),this.setState({validationErrors:s})),""!==s.FinishedProductCode)return;let a=this.state.allFinishedProducts;void 0!==a&&null!==a&&void 0!==a[e]&&null!==a[e]&&this.setState({baseProductCodes:h.Zj(a[e])})}catch(t){console.log("Error in handleFinishedProductCodeChange:",t)}},this.handleBaseProductCodeChange=e=>{try{const t=g().cloneDeep(this.state.modCOACustomer);t.BaseProductCode=e,this.setState({modCOACustomer:t,isReadyToRender:!1},(()=>{if(null==e)return t.TemplateCode="",void this.setState({templateCodes:[],availableCustomerParameters:[],associatedCustomerParameters:g().cloneDeep(this.state.allCustomerParameters),isReadyToRender:!0});this.GetTemplateofBaseProduct(e)}))}catch(t){console.log("Error in handleBaseProductCodeChange:",t)}},this.handleTemplateProductCodeChange=e=>{try{const t=g().cloneDeep(this.state.modCOACustomer);t.TemplateCode=e,this.setState({modCOACustomer:t,isReadyToRender:!1},(()=>{if(null!=e){var t=[{key:I.$L,value:e}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:I.$L,KeyCodes:t};p()(P.HHy,h.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=t.EntityResult.COATemplateDetailsList;var s=[];e.forEach((e=>{var t={ParameterName:e.ParameterName,Specification:e.Specification,Method:e.Method,SortIndex:e.SortIndex};s.push(t)}));let a=g().cloneDeep(this.state.allCustomerParameters).filter((e=>!s.some((t=>t.ParameterName===e.ParameterName))));this.setState({availableCustomerParameters:s,associatedCustomerParameters:a,isReadyToRender:!0})}else this.setState({availableCustomerParameters:[],isReadyToRender:!0}),console.log("Error in GetCOATemplateForCustomer:",t.ErrorList)})).catch((t=>{console.log("Error while GetCOATemplateForCustomer:",t,e)}))}else this.setState({availableCustomerParameters:[],associatedCustomerParameters:g().cloneDeep(this.state.allCustomerParameters),isReadyToRender:!0})}))}catch(t){console.log("Error in handleBaseProductCodeChange:",t)}},this.handleChange=(e,t)=>{try{const s=g().cloneDeep(this.state.modCOACustomer),a=g().cloneDeep(this.state.validationErrors);s[e]=t,this.setState({modCOACustomer:s}),void 0!==m.cr[e]&&(a[e]=h.jr(m.cr[e],t),this.setState({validationErrors:a}))}catch(s){console.log("COACustomerDetailsComposite:Error occured on handleChange",s)}},this.handleAvailableCustomerSelection=e=>{this.setState({selectedAvailableCustomerParameters:e})},this.handleAssociatedCustomerSelection=e=>{this.setState({selectedAssociatedCustomerParameters:e})},this.handleCustomerAssociation=()=>{try{const e=g().cloneDeep(this.state.selectedAvailableCustomerParameters);let t=g().cloneDeep(this.state.availableCustomerParameters),s=g().cloneDeep(this.state.associatedCustomerParameters);e.forEach((e=>{s.push(e),t=t.filter((t=>t.ParameterName!==e.ParameterName))})),this.setState({associatedCustomerParameters:s,selectedAvailableCustomerParameters:[],availableCustomerParameters:t,isReadyToRender:!1},(()=>{this.setState({isReadyToRender:!0})}))}catch(e){console.log("ProcessConfigDetailsComposite:Error occured on handleCustomerAssociation",e)}},this.handleCustomerDisassociation=()=>{try{const e=g().cloneDeep(this.state.selectedAssociatedCustomerParameters);let t=g().cloneDeep(this.state.availableCustomerParameters),s=g().cloneDeep(this.state.associatedCustomerParameters);e.forEach((e=>{t.push(e),s=s.filter((t=>t.ParameterName!==e.ParameterName))})),this.setState({associatedCustomerParameters:s,selectedAssociatedCustomerParameters:[],availableCustomerParameters:t,isReadyToRender:!1},(()=>{this.setState({isReadyToRender:!0})}))}catch(e){console.log("ProcessConfigDetailsComposite:Error occured on handleCustomerDisassociation",e)}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})},this.saveCOACustomer=()=>{try{this.setState({saveEnabled:!1});let e=g().cloneDeep(this.state.tempCOACustomer),t=g().cloneDeep(this.state.availableCustomerParameters);e.COACustomerDetailsList=[],t.forEach((t=>{let s={ParameterName:t.ParameterName,AnalysisParameterName:t.ParameterName,Specification:t.Specification,Method:t.Method,SortIndex:t.SortIndex,IsEnabled:!0,CreatedTime:new Date,LastUpdatedTime:new Date};e.COACustomerDetailsList.push(s)}));let s=h.pI(this.state.modAttributeMetaDataList);s=h.SC(s),e.Attributes=h.Gh(s),e.BaseProductCode=null===e.BaseProductCode?"":e.BaseProductCode,e.TemplateCode=null===e.TemplateCode?"":e.TemplateCode,""===this.state.coaCustomer.CustomerCode?this.createCOACustomer(e):this.updateCOACustomer(e)}catch(e){console.log("COACustomerDetailsComposite : Error in saveCOACustomer")}},this.handleSave=()=>{try{let e=g().cloneDeep(this.state.modCOACustomer),t=h.pI(this.state.modAttributeMetaDataList);if(this.validateSave(t)){e=this.fillAttributeDetails(e,t);let s=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,a=g().cloneDeep(e);this.setState({showAuthenticationLayout:s,tempCOACustomer:a},(()=>{!1===s&&this.saveCOACustomer()}))}else this.setState({saveEnabled:!0})}catch(e){console.log("COACustomerDetailsComposite:Error occured on handleSave",e)}},this.handleReset=()=>{try{const e={...this.state.validationErrors},t=g().cloneDeep(this.state.coaCustomer);Object.keys(e).forEach((function(t){e[t]=""})),null===t.CustomerCode||""===t.CustomerCode?this.setState({availableCustomerParameters:[],associatedCustomerParameters:g().cloneDeep(this.state.allCustomerParameters),selectedAvailableCustomerParameters:[],selectedAssociatedCustomerParameters:[],modCOACustomer:{...t},validationErrors:e,modAttributeMetaDataList:[],isReadyToRender:!1},(()=>{this.localNodeAttribute(),this.handleResetAttributeValidationError(),this.setState({isReadyToRender:!0})})):this.setState({availableCustomerParameters:g().cloneDeep(this.state.initavailableCustomerParameters),associatedCustomerParameters:g().cloneDeep(this.state.allCustomerParameters),selectedAvailableCustomerParameters:[],selectedAssociatedCustomerParameters:[],modCOACustomer:{...t},validationErrors:e,modAttributeMetaDataList:[],isReadyToRender:!1},(()=>{this.localNodeAttribute(),this.handleResetAttributeValidationError(),this.setState({isReadyToRender:!0})}))}catch(e){console.log("COACustomerDetailsComposite:Error occured on handleReset",e)}},this.handleCellDataEdit=(e,t)=>{try{let s=g().cloneDeep(this.state.availableCustomerParameters);s.find((e=>e.ParameterName===t.rowData.ParameterName))[t.field]=e,this.setState({availableCustomerParameters:s})}catch(s){console.log(":Error occured on handleCellDataEdit",s)}}}terminalSelectionChange(e){try{let o=[];var t=[],s=[];t=g().cloneDeep(this.state.attributeMetaDataList),s=g().cloneDeep(this.state.modAttributeMetaDataList);const r=g().cloneDeep(this.state.attributeValidationErrors);var a=g().cloneDeep(this.state.modCOACustomer);e.forEach((e=>{var r=s.find((t=>t.TerminalCode===e));void 0===r?t.COACUSTOMER.forEach((function(t){if(t.TerminalCode===e){var s=a.Attributes.find((t=>t.TerminalCode===e));void 0!==s&&t.attributeMetaDataList.forEach((function(e){var t=s.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),o.push(t)}})):o.push(r)})),s=[],s=o,s=h.nQ(s),r.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.setState({modAttributeMetaDataList:s,attributeValidationErrors:r})}catch(o){console.log("coaCustomerDetailsComposite:Error occured on terminalSelectionChange",o)}}localNodeAttribute(){try{var e=g().cloneDeep(this.state.attributeMetaDataList);Array.isArray(e.COACUSTOMER)&&e.COACUSTOMER.length>0&&this.terminalSelectionChange([e.COACUSTOMER[0].TerminalCode])}catch(t){console.log("COACustomerDetailsComposite:Error occured on localNodeAttribute",t)}}handleResetAttributeValidationError(){try{var e=g().cloneDeep(this.state.attributeMetaDataList);this.setState({attributeValidationErrors:h.Fl(e.COACUSTOMER)})}catch(t){console.log("handleAttributeValidationError:Error occured on handleReset",t)}}getAllFinishedProducts(){try{p()(P.KoQ+"?ShareholderCode="+this.props.selectedShareholder,h.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess)if(Array.isArray(t.EntityResult)){let e=t.EntityResult.filter((e=>e.ShareholderCode===this.props.selectedShareholder));if(e.length>0){let t=e[0].FinishedProductBaseProductsList,s=Object.keys(t);s=h.Zj(s),this.setState({allFinishedProducts:t,finishedProductCodes:s},(()=>this.getAllParameters()))}else console.log("no finishedProduct identified for shareholder")}else console.log("finishedProduct not identified for shareholder");else this.setState({customerCodes:[]}),console.log("Error in getAllFinishedProducts:",t.ErrorList)})).catch((e=>{this.setState({customerCodes:[]}),console.log("Error while getAllFinishedProducts List:",e)}))}catch(e){console.log("Error while getCOACustomerCode List:",e)}}GetTemplateofBaseProduct(e){try{p()(P.lMI+"?BaseProductCode="+e,h.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var s=t.EntityResult,a=[];s.forEach((e=>{a.push(e.Code)})),this.setState({templateCodes:h.Zj(a),isReadyToRender:!0})}else this.setState({templateCodes:[],isReadyToRender:!0}),console.log("Error in GetTemplateofBaseProduct:",t.ErrorList)})).catch((e=>{this.setState({templateCodes:[],isReadyToRender:!0}),console.log("Error while GetTemplateofBaseProduct:",e)}))}catch(t){console.log("Error while GetTemplateofBaseProduct:",t)}}componentWillReceiveProps(e){try{""!==this.state.coaCustomer.Name&&void 0===e.selectedRow.Common_Name&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo&&this.getCOACustomer(e.selectedRow)}catch(t){console.log("COACustomerDetailsComposite:Error occured on componentWillReceiveProps",t)}}componentDidMount(){try{h.pJ(this.props.userDetails.EntityResult.IsArchived),this.getAllFinishedProducts(),this.getCOACustomerCode()}catch(e){console.log("COACustomerDetailsComposite:Error occured on componentDidMount",e)}}getAttributes(e){try{p()(P.fKH,h.tW([b.n$],this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data;!0===s.IsSuccess?this.setState({attributeMetaDataList:g().cloneDeep(s.EntityResult),attributeValidationErrors:h.Fl(s.EntityResult.COACUSTOMER)},(()=>this.getCOACustomer(e))):console.log("Error in getAttributes:")}))}catch(t){console.log("Error while getAttributes:",t)}}getCOACustomerCode(){try{p()(P.E6k+"?TransportationType=ROAD&ShareholderCode="+this.props.selectedShareholder,h.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess)if(Array.isArray(t.EntityResult)){let e=t.EntityResult.filter((e=>e.ShareholderCode===this.props.selectedShareholder));if(e.length>0){let t=e[0].CustomerDestinationsList,s=[];null!==t&&(s=Object.keys(t),s=h.Zj(s)),this.setState({customerCodes:s})}else this.setState({customerCodes:[]}),console.log("COACustomerDetailComposite:no customers identified for shareholder")}else this.setState({customerCodes:[]}),console.log("COACustomerDetailComposite:customerdestinations not identified for shareholder");else this.setState({customerCodes:[]}),console.log("Error in getCOACustomerCode:",t.ErrorList)})).catch((e=>{this.setState({customerCodes:[]}),console.log("Error while getCOACustomerCode List:",e)}))}catch(e){console.log("Error while getCOACustomerCode List:",e)}}getCOACustomer(e){if(A.z_.ShareholderCode=this.props.selectedShareholder,void 0!==e.CustomerCode&&""!==e.CustomerCode){var t=[{key:I.cD,value:e.CustomerCode}];t.push({key:I.xf,value:e.FinishedProductCode});var s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:I.cD,KeyCodes:t};p()(P.cDt,h.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=t.EntityResult.COACustomerDetailsList;var s=[];e.forEach((e=>{var t={ParameterName:e.AnalysisParameterName,Specification:e.Specification,Method:e.Method,SortIndex:e.SortIndex};s.push(t)}));let a=g().cloneDeep(this.state.allCustomerParameters).filter((e=>!s.some((t=>t.ParameterName===e.ParameterName))));this.setState({isReadyToRender:!0,coaCustomer:g().cloneDeep(t.EntityResult),modCOACustomer:g().cloneDeep(t.EntityResult),availableCustomerParameters:s,initavailableCustomerParameters:s,associatedCustomerParameters:a,saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,T.i.modify,T._d)},(()=>{this.localNodeAttribute()}));let o=this.state.coaCustomer.FinishedProductCode,r=this.state.allFinishedProducts;void 0!==r&&null!==r&&void 0!==r[o]&&null!==r[o]&&this.setState({baseProductCodes:h.Zj(r[o])}),this.GetTemplateofBaseProduct(this.state.coaCustomer.BaseProductCode)}else this.setState({coaCustomer:g().cloneDeep(A.z_),modCOACustomer:g().cloneDeep(A.z_),isReadyToRender:!0},(()=>{})),console.log("Error in getCOACustomer:",t.ErrorList)})).catch((t=>{console.log("Error while getting coaCustomer:",t,e)}))}else this.setState({coaCustomer:g().cloneDeep(A.z_),modCOACustomer:g().cloneDeep(A.z_),isReadyToRender:!1,saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,T.i.add,T._d),availableCustomerParameters:[],modAttributeMetaDataList:[],associatedCustomerParameters:g().cloneDeep(this.state.allCustomerParameters)},(()=>{this.localNodeAttribute(),this.setState({isReadyToRender:!0})}))}validateSave(e){const{modCOACustomer:t}=this.state;var s=g().cloneDeep(this.state.validationErrors);Object.keys(m.cr).forEach((function(e){s[e]=h.jr(m.cr[e],t[e])})),this.setState({validationErrors:s});var a=g().cloneDeep(this.state.attributeValidationErrors);e.forEach((e=>{a.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=h.I5(e,e.DefaultValue)}))}))})),this.setState({validationErrors:s,attributeValidationErrors:a});var o=!0;return a.forEach((e=>{if(!o)return o;o=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),o&&(o=Object.values(s).every((function(e){return""===e}))),o}fillAttributeDetails(e,t){try{return t=h.SC(t),e.Attributes=h.Gh(t),e}catch(s){console.log("COACustomerDetailsComposite:Error occured on fillAttributeDetails",s)}}createCOACustomer(e){var t=[{key:I.cD,value:e.COACustomerCode}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:I.cD,KeyCodes:t,Entity:e},a={messageType:"critical",message:"COACustomerDetails_SavedStatus",messageResultDetails:[{keyFields:["COACustomerCode"],keyValues:[e.CustomerCode],isSuccess:!1,errorMessage:""}]};p()(P.csX,h.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data;a.messageType=s.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,T.i.modify,T._d),showAuthenticationLayout:!1},(()=>this.getCOACustomer({CustomerCode:e.CustomerCode,FinishedProductCode:e.FinishedProductCode}))):(a.messageResultDetails[0].errorMessage=s.ErrorList[0],this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,T.i.add,T._d),showAuthenticationLayout:!1}),console.log("Error in createCOACustomer:",s.ErrorList)),this.props.onSaved(e,"add",a)})).catch((t=>{this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,T.i.add,T._d),showAuthenticationLayout:!1}),a.messageResultDetails[0].errorMessage=t,this.props.onSaved(e,"add",a)}))}updateCOACustomer(e){let t=[{key:I.cD,value:e.COACustomerCode}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:I.cD,KeyCodes:t,Entity:e},a={messageType:"critical",message:"COACustomerDetails_SavedStatus",messageResultDetails:[{keyFields:["COACustomerCode"],keyValues:[e.CustomerCode],isSuccess:!1,errorMessage:""}]};p()(P.DbA,h.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data;a.messageType=s.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,T.i.modify,T._d),showAuthenticationLayout:!1},(()=>this.getCOACustomer({CustomerCode:e.CustomerCode,FinishedProductCode:e.FinishedProductCode}))):(a.messageResultDetails[0].errorMessage=s.ErrorList[0],this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,T.i.modify,T._d),showAuthenticationLayout:!1}),console.log("Error in updateCOACustomer:",s.ErrorList)),this.props.onSaved(e,"update",a)})).catch((t=>{a.messageResultDetails[0].errorMessage=t,this.props.onSaved(e,"modify",a),this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,T.i.modify,T._d),showAuthenticationLayout:!1})}))}render(){const e={availableCustomerParameters:this.state.availableCustomerParameters,selectedAvailableCustomerParameters:this.state.selectedAvailableCustomerParameters,associatedCustomerParameters:this.state.associatedCustomerParameters,selectedAssociatedCustomerParameters:this.state.selectedAssociatedCustomerParameters,customerCodes:this.state.customerCodes,finishedProductCodes:this.state.finishedProductCodes,baseProductCodes:this.state.baseProductCodes,templateCodes:this.state.templateCodes},t=[{fieldName:"COACustomer_LastUpDt",fieldValue:new Date(this.state.modCOACustomer.LastUpdatedTime).toLocaleDateString()+" "+new Date(this.state.modCOACustomer.LastUpdatedTime).toLocaleTimeString()},{fieldName:"COACustomer_LastUpdatedBy",fieldValue:this.state.modCOACustomer.LastUpdatedBy}];return this.state.isReadyToRender?(0,c.jsxs)("div",{children:[(0,c.jsx)(o.TranslationConsumer,{children:e=>(0,c.jsx)(d.A,{children:(0,c.jsx)(D.A,{entityCode:""===this.state.coaCustomer.CustomerCode?"":e("COACustomer_Headline"),newEntityName:"COACustomer_Title",popUpContents:t})})}),(0,c.jsx)(d.A,{children:(0,c.jsx)(u,{coaCustomer:this.state.coaCustomer,modCOACustomer:this.state.modCOACustomer,genericProps:this.props.genericProps,validationErrors:this.state.validationErrors,listOptions:e,onFieldChange:this.handleChange,onFinishedProductCodeChange:this.handleFinishedProductCodeChange,onBaseProductCodeChange:this.handleBaseProductCodeChange,onTemplateProductCodeChange:this.handleTemplateProductCodeChange,onAvailableCustomerParameterSelection:this.handleAvailableCustomerSelection,pageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,onCustomerParameterAssociation:this.handleCustomerAssociation,onAssociatedCustomerParameterSelection:this.handleAssociatedCustomerSelection,onCustomerParameterDisassociation:this.handleCustomerDisassociation,handleCellDataEdit:this.handleCellDataEdit,attributeValidationErrors:this.state.attributeValidationErrors,modAttributeMetaDataList:this.state.modAttributeMetaDataList,onAttributeDataChange:this.handleAttributeDataChange})}),(0,c.jsx)(d.A,{children:(0,c.jsx)(C.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.showAuthenticationLayout?(0,c.jsx)(R.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.coaCustomer.COACustomerCode?T.i.add:T.i.modify,functionGroup:T._d,handleOperation:this.saveCOACustomer,handleClose:this.handleAuthenticationClose}):null]}):(0,c.jsx)(v.A,{message:"Loading"})}}const y=(0,S.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(O)},43503:(e,t,s)=>{s.d(t,{A:()=>l});s(65043);var a=s(67907),o=s(72711),r=s(70579);function i(e){let{entityCode:t,newEntityName:s,popUpContents:i}=e;return(0,r.jsx)(a.TranslationConsumer,{children:e=>(0,r.jsx)("div",{className:"headerContainer",children:(0,r.jsxs)("div",{className:"row headerSpacing",children:[(0,r.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,r.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(s):t})}),""!==t&&void 0!==t&&i.length>0?(0,r.jsx)("div",{className:"headerItemRight",children:(0,r.jsx)(o.Popup,{element:(0,r.jsxs)("div",{children:[e(i[0].fieldName)+" ",":"," "+i[0].fieldValue,(0,r.jsx)(o.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,r.jsx)(o.List,{className:"detailsHeaderPopUp",children:i.map((t=>(0,r.jsxs)(o.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}i.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const l=i},9256:(e,t,s)=>{s.d(t,{q:()=>i});s(65043);var a=s(72711),o=s(67907),r=s(70579);function i(e){let{handleBack:t,handleSave:s,handleReset:i,saveEnabled:l}=e;return(0,r.jsx)(o.TranslationConsumer,{children:e=>(0,r.jsxs)("div",{className:"row userActionPosition",children:[(0,r.jsx)("div",{className:"col-12 col-md-3 col-lg-4",children:(0,r.jsx)(a.Button,{className:"backButton",onClick:t,content:e("Back")})}),(0,r.jsx)("div",{className:"col-12 col-md-9 col-lg-8",children:(0,r.jsxs)("div",{style:{float:"right"},children:[(0,r.jsx)(a.Button,{content:e("LookUpData_btnReset"),className:"cancelButton",onClick:i}),(0,r.jsx)(a.Button,{content:e("Save"),disabled:!l,onClick:s})]})})]})})}i.defaultProps={saveEnabled:!1}},85800:(e,t,s)=>{s.d(t,{n:()=>d});s(65043);var a=s(72711),o=s(67907),r=s(7523),i=s(35861),l=s(70579);function d(e){let{selectedAttributeList:t,handleCellDataEdit:s,attributeValidationErrors:d}=e;const n=e=>{if("0000-00-00"===e.DefaultValue)return c(e,new Date),new Date;var t=e.DefaultValue.split("-");return new Date(t[0],t[1]-1,t[2])},c=(e,t)=>{var a=new Date(t);t=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2),s(e,t)};return(0,l.jsx)(o.TranslationConsumer,{children:e=>(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-md-12 attributeDetails-wrap",children:(0,l.jsx)("div",{className:"row",children:t.map((t=>t.DataType.toLowerCase()===r.pe.STRING.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(d[t.Code]),reserveSpace:!1})}):t.DataType.toLowerCase()!==r.pe.INT.toLowerCase()&&t.DataType.toLowerCase()!==r.pe.LONG.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()!==r.pe.FLOAT.toLowerCase()&&t.DataType.toLowerCase()!==r.pe.DOUBLE.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()===r.pe.BOOL.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.Checkbox,{className:"deviceCheckBox customDeviceCheckBox",label:e(t.DisplayName),checked:null===t.DefaultValue?"":"true"===t.DefaultValue.toString().toLowerCase(),disabled:!0===t.IsReadonly,onChange:e=>s(t,e)})}):t.DataType.toLowerCase()===r.pe.DATETIME.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.DatePicker,{fluid:!0,value:null===t.DefaultValue||""===t.DefaultValue?"":n(t),label:e(t.DisplayName),displayFormat:(0,i.F1)(),showYearSelector:"true",indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>c(t,e),onTextChange:e=>{c(t,e)},error:e(d[t.Code]),reserveSpace:!1})}):null:(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue||""===t.DefaultValue?"":t.DefaultValue.toLocaleString(),indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(d[t.Code]),reserveSpace:!1})}):(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(d[t.Code]),reserveSpace:!1})})))})})})})}},15417:(e,t,s)=>{s.d(t,{$7:()=>L,AN:()=>se,AU:()=>b,Ak:()=>_e,Ao:()=>a,B6:()=>Z,C4:()=>Fe,CG:()=>$,Ct:()=>K,Cw:()=>w,EY:()=>v,G$:()=>Ze,G6:()=>Je,GF:()=>me,GJ:()=>j,Gj:()=>ue,Gl:()=>re,H9:()=>qe,HB:()=>Re,HP:()=>g,Hr:()=>ve,II:()=>ot,IQ:()=>D,Jr:()=>B,Jx:()=>Se,Ki:()=>te,LP:()=>oe,Lv:()=>r,MK:()=>p,MX:()=>ee,Mx:()=>Q,N4:()=>xe,NH:()=>Pe,OF:()=>Ye,Ps:()=>k,Q7:()=>Ke,QY:()=>F,SF:()=>i,Sq:()=>Ne,Sw:()=>le,TQ:()=>X,U7:()=>R,UH:()=>E,UO:()=>ie,V_:()=>ye,Vy:()=>Ve,W9:()=>ne,WN:()=>S,Wr:()=>o,Ww:()=>J,XP:()=>Oe,Xk:()=>q,Yb:()=>Te,Yy:()=>h,Z2:()=>je,ZN:()=>f,ZO:()=>Ie,Zu:()=>Be,_G:()=>W,_N:()=>u,_u:()=>ce,ad:()=>de,al:()=>De,ao:()=>V,bK:()=>_,bN:()=>P,cf:()=>M,dO:()=>Le,dU:()=>m,dv:()=>l,eE:()=>z,g:()=>N,gG:()=>d,gS:()=>be,gT:()=>st,gW:()=>Y,gZ:()=>Xe,go:()=>O,gp:()=>G,hq:()=>Me,i6:()=>et,ip:()=>Ce,k9:()=>A,kI:()=>I,l4:()=>we,l5:()=>T,lA:()=>x,lU:()=>$e,mD:()=>Ge,mY:()=>H,mq:()=>n,n$:()=>at,n7:()=>C,nZ:()=>fe,rA:()=>He,s$:()=>ke,s8:()=>Ue,se:()=>pe,tA:()=>ge,vK:()=>tt,vs:()=>Ee,w2:()=>ze,w4:()=>Ae,wT:()=>c,wY:()=>y,wf:()=>he,wk:()=>ae,xW:()=>U,yM:()=>We,yO:()=>Qe});const a="driver",o="carriercompany",r="shareholder",i="baseProduct",l="TRAILER",d="TRAILERCOMPARTMENT",n="terminal",c="customer",u="destination",C="finishedproduct",m="tank",h="marine_vessel",A="marine_trailercompartment",E="supplier",p="vehicle",P="vehicletrailer",S="originterminal",D="bay",I="loadingArm",T="cardreader",N="vehicleprimemover",g="meter",v="SHIPMENT",R="SHIPMENTCOMPARTMENT",b="SHIPMENTDESTINATIONCOMPARTMENT",O="SHIPMENTDETAILS",y="SHIPMENTTRAILERWEIGHBRIDGE",L="SHIPMENTTRAILER",f="SHIPMENTSTATUSTIME",M="MARINEDISPATCH",x="MARINEDISPATCHCOMPARTMENTDETAIL",j="railwagon",w="primemover",H="bcu",F="RAILRECEIPTPLAN",k="RAILRECEIPTWAGONDETAILPLAN",V="RAILUNLOADINGDETAILSFP",G="RAILUNLOADINGDETAILSBP",U="RAILUNLOADINGDETAILSADDITIVE",B="RAILDISPATCHPLAN",_="RAILDISPATCHITEM",W="RAILDISPATCHSTATUSCHANGE",Q="RAILDISPATCHWAGON",K="RAILDISPATCHWAGONDETAILPLAN",q="RAILDISPATCHWAGONWEIGHBRIDGE",Z="RAILDISPATCHWAGONCOMPARTMENT",z="RAILLOADINGDETAILSFP",$="RAILLOADINGDETAILSBP",Y="RAILLOADINGDETAILSADDITIVE",J="marineReceipt",X="UNACCOUNTEDMETERTRANSACTION",ee="UNACCOUNTEDTANKTRANSACTION",te="marineLoadingDetailsFP",se="marineLoadingDetailsAdditive",ae="marineLoadingDetailsBP",oe="marineReceiptCompartmentDetail",re="marineUnloadingDetailsFP",ie="marineUnloadingDetailsBP",le="accessCard",de="LOADINGDETAILSFP",ne="LOADINGDETAILSBP",ce="LOADINGDETAILSADDITIVE",ue="MARINERECEIPTSTATUSTIME",Ce="MARINEDISPATCHSTATUSTIME",me="RECEIPT",he="UNLOADINGTRANSACTIONS",Ae="ORDER",Ee="ORDERITEM",pe="CONTRACT",Pe="CONTRACT_ITEM",Se="RECEIPTORIGINTERMINALCOMPARTMENT",De="GeneralTMUser_CAPTAIN",Ie="weighbridge",Te="deu",Ne="GeneralTMUser_STAFF",ge="GeneralTMUser_VISITOR",ve="PIPELINEHEADER",Re="SEALMASTER",be="PIPELINERECEIPT",Oe="ROADSHIPMENTSLOTINFO",ye="ROADRECEIPTSLOTINFO",Le="MARINESHIPMENTSLOTINFO",fe="MARINERECEIPTSLOTINFO",Me="PIPELINEDISPATCH",xe="PIPELINETRANSACTIONS",je="PIPELINEDISPATCHSTATUSTIME",we="PIPELINERECEIPTSTATUSTIME",He="PROCESSCONFIG",Fe="PRODUCTALLOCATIONITEM",ke="HSEINSPECTIONSHIPMENTRIGIDTRUCK",Ve="HSEINSPECTIONSHIPMENTTRAILER",Ge="HSEINSPECTIONSHIPMENTPRIMEMOVER",Ue="HSEINSPECTIONSHIPMENTNONFILLINGVEHICLE",Be="HSEINSPECTIONMARINESHIPMENTBARGE",_e="HSEINSPECTIONMARINESHIPMENTSHIP",We="HSEINSPECTIONSHIPMENTRAILWAGON",Qe="HSEINSPECTIONSHIPMENTPIPELINE",Ke="HSEINSPECTIONRECEIPTRIGIDTRUCK",qe="HSEINSPECTIONRECEIPTTRAILER",Ze="HSEINSPECTIONRECEIPTPRIMEMOVER",ze="HSEINSPECTIONRECEIPTNONFILLINGVEHICLE",$e="HSEINSPECTIONMARINERECEIPTBARGE",Ye="HSEINSPECTIONMARINERECEIPTSHIP",Je="HSEINSPECTIONRECEIPTRAILWAGON",Xe="HSEINSPECTIONRECEIPTPIPELINE",et="SHAREHOLDERAGREEMENT",tt="COATEMPLATE",st="COAMANAGEMENT",at="COACUSTOMER",ot="COAASSIGNMENT"},35861:(e,t,s)=>{s.d(t,{F1:()=>l,i7:()=>d,r4:()=>i});var a=s(86178),o=s.n(a),r=(s(15660),s(65043),s(70579));function i(e,t){if(Array.isArray(e)){0===e.filter((e=>e.text===t)).length&&e.unshift({value:null,text:t})}return e}function l(){let e=window.navigator.userLanguage||window.navigator.language;return o().locale(e),o().localeData().longDateFormat("L")}function d(e){return(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{children:e}),(0,r.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]})}}}]);
//# sourceMappingURL=7071.5f4ea851.chunk.js.map