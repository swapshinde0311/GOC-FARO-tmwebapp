"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[6813,9158,6001,6777,8382,735,3116,3920,3235,5973,8354],{40510:(e,t,s)=>{s.d(t,{A:()=>r});var i=s(65043),a=s(80297),o=s(65187),n=s(67907),l=s(70579);function r(e){let{KPIList:t,pageName:s,rowHeight:r,widgetHeight:d,isDraggable:c,isResizable:h,kpiDisplayTopBreakpoint:u}=e;const[m,p]=(0,i.useState)(1),C=i.useRef(null),E=()=>{let e=window.pageYOffset,t=m;if(C.current&&C.current.getBoundingClientRect().top<u)t=0;else{if(0!==e)return;t=1}p(t)};return(0,i.useEffect)((()=>{"undefined"!==typeof window&&window.addEventListener("scroll",E)})),(0,i.useEffect)((()=>()=>{window.removeEventListener("scroll",E)}),[]),(0,l.jsx)("div",{ref:C,children:1===m?(0,l.jsx)(n.TranslationConsumer,{children:e=>(0,l.jsx)("div",{style:{marginTop:"6px"},children:(0,l.jsx)(o.A,{children:(0,l.jsx)(a.A,{kpiList:t,isDraggable:c,isResizable:h,rowHeight:r,widgetHeight:d,pageName:s})})})}):""})}r.defaultProps={kpiDisplayTopBreakpoint:100}},6813:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var i=s(65043),a=s(43503),o=s(65187),n=s(72711),l=s(67907),r=s(78374),d=s(24904),c=s(85800),h=s(70579);function u(e){let{destination:t,modDestination:s,modAssociations:i,validationErrors:a,listOptions:u,onFieldChange:m,onAllTerminalsChange:p,selectedAssociations:C,handleRowSelectionChange:E,handleCellDataEdit:D,handleAddAssociation:I,handleDeleteAssociation:A,onActiveStatusChange:S,isEnterpriseNode:T,isDCHEnabled:g,isValidShareholderSysExtCode:N,modAttributeMetaDataList:v,attributeValidationErrors:y,onAttributeDataChange:R}=e;const L=(e,t)=>{let s=[];return s=e.find((e=>e.TerminalCode===t)),s.attributeValidationErrors},[b]=(0,l.useTranslation)(),f=e=>(0,h.jsx)(n.Input,{fluid:!0,value:i[e.rowIndex][e.field],onChange:t=>D(t,e),reserveSpace:!1});return(0,h.jsxs)("div",{className:"detailsContainer",children:[(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(n.Input,{fluid:!0,value:s.Code,label:b("Dest_Code1"),indicator:"required",disabled:""!==t.Code,onChange:e=>m("Code",e),error:b(a.Code),reserveSpace:!1})}),(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(n.Input,{fluid:!0,value:s.Name,label:b("Dest_Name1"),indicator:"required",onChange:e=>m("Name",e),error:b(a.Name),reserveSpace:!1})}),(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(n.Select,{fluid:!0,placeholder:b("Common_Select"),multiple:!0,label:b("Vehicle_Transport"),value:s.TransportationTypes,options:u.transportationTypes,onChange:e=>{m("TransportationTypes",e)},indicator:"required",error:b(a.TransportationTypes),reserveSpace:!1,search:!0,noResultsMessage:b("noResultsMessage")})}),(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(n.Input,{fluid:!0,value:null===s.Address?"":s.Address,label:b("Dest_Address"),onChange:e=>m("Address",e),indicator:"required",error:b(a.Address),reserveSpace:!1})}),(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(n.Input,{fluid:!0,value:null===s.City?"":s.City,label:b("Terminal_City"),onChange:e=>m("City",e),error:b(a.City),reserveSpace:!1})}),(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(n.Input,{fluid:!0,value:null===s.State?"":s.State,label:b("Terminal_State"),onChange:e=>m("State",e),indicator:g&&N?"required":"",error:b(a.State),reserveSpace:!1})}),(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(n.Input,{fluid:!0,value:null===s.Country?"":s.Country,label:b("Terminal_Country"),onChange:e=>m("Country",e),error:b(a.Country),reserveSpace:!1})}),(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(n.Input,{fluid:!0,value:null===s.ZipCode?"":s.ZipCode,label:b("Terminal_ZipCode"),onChange:e=>m("ZipCode",e),error:b(a.ZipCode),indicator:g&&N?"required":"",reserveSpace:!1})}),(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(n.Select,{fluid:!0,placeholder:b("FinishedProductInfo_Select"),label:b("Cust_Status"),value:s.Status,options:[{text:b("ViewShipment_Ok"),value:!0},{text:b("ViewShipmentStatus_Inactive"),value:!1}],onChange:e=>S(e)})}),(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(n.Input,{fluid:!0,value:null===s.Remarks?"":s.Remarks,label:b("Cust_Remarks"),onChange:e=>m("Remarks",e),indicator:s.Status!==t.Status?"required":"",error:b(a.Remarks),reserveSpace:!1})}),T?(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(d.y,{terminalList:u.terminalCodes,selectedTerminal:s.TerminalCodes,error:b(a.TerminalCodes),onFieldChange:m,onCheckChange:p})}):""]}),v.length>0?v.map((e=>(0,h.jsx)(o.A,{children:(0,h.jsx)(n.Accordion,{children:(0,h.jsx)(n.Accordion.Content,{className:"attributeAccordian",title:T?e.TerminalCode+" - "+b("Attributes_Header"):b("Attributes_Header"),children:(0,h.jsx)(c.n,{selectedAttributeList:e.attributeMetaDataList,handleCellDataEdit:R,attributeValidationErrors:L(y,e.TerminalCode)})})})}))):null,(0,h.jsxs)("div",{className:"row compartmentRow",children:[(0,h.jsx)("div",{className:"col col-md-8 col-lg-9 col col-xl-9",children:(0,h.jsx)("h4",{children:b("Destination_AssociatedCusts")})}),(0,h.jsx)("div",{className:"col col-md-4 col-lg-3 col-xl-3",children:(0,h.jsxs)("div",{className:"compartmentIconContainer",children:[(0,h.jsxs)("div",{onClick:I,className:"compartmentIcon",children:[(0,h.jsx)("div",{children:(0,h.jsx)(n.Icon,{root:"common",name:"badge-plus",size:"medium"})}),(0,h.jsx)("div",{className:"margin_l10",children:(0,h.jsx)("h5",{className:"font14",children:b("FinishedProductInfo_Add")})})]}),(0,h.jsxs)("div",{onClick:A,className:"compartmentIcon margin_l30",children:[(0,h.jsx)("div",{children:(0,h.jsx)(n.Icon,{root:"common",name:"delete",size:"medium"})}),(0,h.jsx)("div",{className:"margin_l10",children:(0,h.jsx)("h5",{className:"font14",children:b("DestAdd_Delete")})})]})]})})]}),(0,h.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,h.jsx)("div",{className:"col-12 detailsTable",children:(0,h.jsxs)(r.bQ,{data:i,selectionMode:"multiple",selection:C,onSelectionChange:E,scrollable:!0,scrollHeight:"320px",children:[(0,h.jsx)(r.bQ.Column,{className:"compColHeight colminWidth",field:"CustomerCode",header:b("Cust_Code"),editable:!0,editFieldType:"text",customEditRenderer:e=>{return t=e,s=u.customerOptions,(0,h.jsx)(n.Select,{className:"selectDropwdown",value:i[t.rowIndex][t.field],fluid:!0,options:s,onChange:e=>D(e,t),indicator:"required",reserveSpace:!1,search:!0,noResultsMessage:b("noResultsMessage")});var t,s}},"CustomerCode"),(0,h.jsx)(r.bQ.Column,{className:"compColHeight colminWidth",field:"ContactPerson",header:b("Cust_ContactPerson"),editable:!0,editFieldType:"text",customEditRenderer:f},"ContactPerson"),(0,h.jsx)(r.bQ.Column,{className:"compColHeight colminWidth",field:"Email",header:b("Cust_Email"),editable:!0,editFieldType:"text",customEditRenderer:f},"Email"),(0,h.jsx)(r.bQ.Column,{className:"compColHeight colminWidth",field:"Mobile",header:b("DriverInfo_Mobile"),editable:!0,editFieldType:"text",customEditRenderer:f},"Mobile"),(0,h.jsx)(r.bQ.Column,{className:"compColHeight colminWidth",field:"Phone",header:b("Dest_PhNum"),editable:!0,editFieldType:"text",customEditRenderer:f},"Phone")]})})})]})}u.defaultProps={listOptions:{transportationTypes:[],terminalCodes:[]},isEnterpriseNode:!1,isDCHEnabled:!1,isValidShareholderSysExtCode:!1};var m=s(9256),p=s(97508),C=s(44192),E=s(53536),D=s.n(E),I=s(80312),A=s(46100),S=s(93779),T=s(69062),g=s(40854),N=s.n(g),v=s(72067),y=s(28882),R=s(40252),L=s(15417),b=s(40510),f=s(39424),P=s(62900);class x extends i.Component{constructor(){super(...arguments),this.state={destination:{},modDestination:{},modAssociations:[],validationErrors:T.Th(C.TK),isReadyToRender:!1,saveEnabled:!1,selectedAssociations:[],customerOptions:[],isValidShareholderSysExtCode:!1,attributeMetaDataList:[],modAttributeMetaDataList:[],attributeValidationErrors:[],destinationKPIList:[],showAuthenticationLayout:!1,tempDestination:{}},this.handleChange=(e,t)=>{try{const i=D().cloneDeep(this.state.modDestination);if(i[e]=t,this.setState({modDestination:i}),void 0!==C.TK[e]){var s={...this.state.validationErrors};s[e]=T.jr(C.TK[e],t),this.setState({validationErrors:s})}"TerminalCodes"===e&&this.terminalSelectionChange(t)}catch(i){console.log("DestinationDetailsComposite:Error occured on handleChange",i)}},this.handleCellDataEdit=(e,t)=>{let s=D().cloneDeep(this.state.modAssociations);s[t.rowIndex][t.field]=e,this.setState({modAssociations:s})},this.handleAttributeDataChange=(e,t)=>{try{let s=[],i=D().cloneDeep(this.state.modAttributeMetaDataList),a=i.filter((t=>t.TerminalCode===e.TerminalCode));a.length>0&&Array.isArray(a[0].attributeMetaDataList)&&(s=a[0].attributeMetaDataList.filter((t=>t.Code===e.Code))),s.length>0&&(s[0].DefaultValue=t);const o=D().cloneDeep(this.state.attributeValidationErrors);o.forEach((s=>{s.TerminalCode===e.TerminalCode&&(s.attributeValidationErrors[e.Code]=T.I5(e,t))})),this.setState({attributeValidationErrors:o,modAttributeMetaDataList:i})}catch(s){console.log("TerminalDetailsComposite:Error occured on handleAttributeDataChange",s)}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})},this.saveDestination=()=>{try{this.setState({saveEnabled:!1});let e=D().cloneDeep(this.state.tempDestination),t=T.pI(this.state.modAttributeMetaDataList);t=T.SC(t),e.Attributes=T.Gh(t),""===this.state.destination.Code?this.createDestination(e):this.updateDestination(e)}catch(e){console.log("BaseProductDetailsComposite : Error in saveBaseProduct")}},this.handleSave=()=>{try{let e=D().cloneDeep(this.state.modDestination),t=D().cloneDeep(this.state.modAssociations);t.forEach((t=>t.DestinationCode=e.Code)),e.ListCustomerDestinationInfo=T.su(t);let s=T.pI(this.state.modAttributeMetaDataList);if(this.validateSave(e,s)){let t=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,s=D().cloneDeep(e);this.setState({showAuthenticationLayout:t,tempDestination:s},(()=>{!1===t&&this.saveDestination()}))}else this.setState({saveEnabled:!0})}catch(e){console.log("DestinationDetailsComposite:Error occured on handleSave",e)}},this.handleReset=()=>{var e=D().cloneDeep(this.state.destination);try{if(this.setState({modDestination:e,validationErrors:[],modAttributeMetaDataList:[],modAssociations:Array.isArray(this.state.destination.ListCustomerDestinationInfo)?T.Q3(D().cloneDeep(this.state.destination.ListCustomerDestinationInfo)):[]},(()=>{this.props.userDetails.EntityResult.IsEnterpriseNode?(this.terminalSelectionChange(e.TerminalCodes),this.handleResetAttributeValidationError()):(this.localNodeAttribute(),this.handleResetAttributeValidationError())})),""===this.state.destination.Code){var t=this.state.terminalCodes;t=[],this.setState({terminalCodes:t})}}catch(s){console.log("DestinationDetailsComposite:Error occured on handleReset",s)}},this.handleAllTerminalsChange=e=>{try{var t=[...this.props.terminalCodes],s=D().cloneDeep(this.state.modDestination);s.TerminalCodes=e?[...t]:[],this.setState({modDestination:s}),this.terminalSelectionChange(s.TerminalCodes)}catch(i){console.log("DestinationDetailsComposite:Error occured on handleAllTerminasChange",i)}},this.handleAddAssociation=()=>{if(!this.props.userDetails.EntityResult.IsArchived)try{if(this.state.modAssociations.length<this.state.customerOptions.length){let e=D().cloneDeep(this.state.modAssociations),t={SeqNumber:null,CustomerCode:null,DestinationCode:null,ContactPerson:null,Email:null,Mobile:null,Phone:null,ShareholderCode:this.props.selectedShareholder};t.SeqNumber=T.Mz(e),1===this.state.customerOptions.length&&(t.CustomerCode=this.state.customerOptions[0].value),e.push(t),this.setState({modAssociations:e,selectedAssociations:[]})}}catch(e){console.log("DestinationDetailsComposite:Error occured on handleAddAssociation",e)}},this.handleDeleteAssociation=()=>{if(!this.props.userDetails.EntityResult.IsArchived)try{if(null!=this.state.selectedAssociations&&this.state.selectedAssociations.length>0&&this.state.modAssociations.length>0){let e=D().cloneDeep(this.state.modAssociations);this.state.selectedAssociations.forEach(((t,s)=>{e=e.filter(((e,s)=>e.SeqNumber!==t.SeqNumber))})),this.setState({modAssociations:e,selectedAssociations:[]})}}catch(e){console.log("DestinationDetailsComposite:Error occured on handleDeleteAssociation",e)}},this.handleAssociationSelectionChange=e=>{this.setState({selectedAssociations:e})},this.handleActiveStatusChange=e=>{try{let t=D().cloneDeep(this.state.modDestination);t.Status=e,t.Status!==this.state.destination.Status&&(t.Remarks=""),this.setState({modDestination:t})}catch(t){console.log(t)}}}terminalSelectionChange(e){try{let a=[];var t=[],s=[];t=D().cloneDeep(this.state.attributeMetaDataList),s=D().cloneDeep(this.state.modAttributeMetaDataList);const o=D().cloneDeep(this.state.attributeValidationErrors);var i=D().cloneDeep(this.state.modDestination);e.forEach((e=>{var o=s.find((t=>t.TerminalCode===e));void 0===o?t.destination.forEach((function(t){if(t.TerminalCode===e){var s=i.Attributes.find((t=>t.TerminalCode===e));void 0!==s&&t.attributeMetaDataList.forEach((function(e){var t=s.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),a.push(t)}})):a.push(o)})),s=[],s=a,s=T.nQ(s),o.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.setState({modAttributeMetaDataList:s,attributeValidationErrors:o})}catch(a){console.log("DestinationDetailsComposite:Error occured on terminalSelectionChange",a)}}localNodeAttribute(){try{var e=D().cloneDeep(this.state.attributeMetaDataList);Array.isArray(e.destination)&&e.destination.length>0&&this.terminalSelectionChange([e.destination[0].TerminalCode])}catch(t){console.log("DestinationDetailsComposite:Error occured on localNodeAttribute",t)}}componentWillReceiveProps(e){try{""!==this.state.destination.Code&&void 0===e.selectedRow.Common_Code&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo&&this.getDestination(e.selectedRow)}catch(t){console.log("DestinationDetailsComposite:Error occured on componentWillReceiveProps",t)}}handleResetAttributeValidationError(){try{var e=D().cloneDeep(this.state.attributeMetaDataList);this.setState({attributeValidationErrors:T.Fl(e.destination)})}catch(t){console.log("handleAttributeValidationError:Error occured on handleReset",t)}}validateSave(e,t){const s={...this.state.validationErrors};Object.keys(C.TK).forEach((function(t){void 0!==e[t]&&(s[t]=T.jr(C.TK[t],e[t]))})),e.Status!==this.state.destination.Status&&(null!==e.Remarks&&""!==e.Remarks||(s.Remarks="OriginTerminal_RemarksRequired")),null!==e.TransportationTypes&&0!==e.TransportationTypes.length||(s.TransportationTypes="Vehicle_MandatoryTrasType"),this.state.isValidShareholderSysExtCode&&this.props.userDetails.EntityResult.IsDCHEnabled&&(null!==e.State&&0!==e.State.length||(s.State="Terminal_State_required"),null!==e.ZipCode&&0!==e.ZipCode.length||(s.ZipCode="Terminal_ZipCode_required"));let i={messageType:"critical",message:"DestInfo_SavedStatus",messageResultDetails:[]};if([...new Set(e.ListCustomerDestinationInfo.map((e=>e.CustomerCode)))].length!==e.ListCustomerDestinationInfo.length)return i.messageResultDetails.push({keyFields:[],keyValues:[],isSuccess:!1,errorMessage:"Duplicate_Associated_Customers"}),this.props.onSaved(this.state.modDestination,"update",i),!1;Array.isArray(e.ListCustomerDestinationInfo)&&e.ListCustomerDestinationInfo.length>0?e.ListCustomerDestinationInfo.forEach((e=>{y.dD.forEach((t=>{let s="";void 0!==t.validator&&(s=T.jr(t.validator,e[t.field])),""!==s&&i.messageResultDetails.push({keyFields:["Cust_Code",t.displayName],keyValues:[e.CustomerCode,e[t.field]],isSuccess:!1,errorMessage:s})}))})):i.messageResultDetails.push({keyFields:[],keyValues:[],isSuccess:!1,errorMessage:"Destination_Customer_Association_Require"});var a=D().cloneDeep(this.state.attributeValidationErrors);t.forEach((e=>{a.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=T.I5(e,e.DefaultValue)}))}))})),this.setState({validationErrors:s,attributeValidationErrors:a});var o=!0;return a.forEach((e=>{if(!o)return o;o=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),o&&(o=Object.values(s).every((function(e){return""===e}))),i.messageResultDetails.length>0?(this.props.onSaved(this.state.modDestination,"update",i),!1):o}updateDestination(e){let t=[{key:S.qp,value:e.Code}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:S.qp,KeyCodes:t,Entity:e},i={messageType:"critical",message:"DestInfo_SavedStatus",messageResultDetails:[{keyFields:["Dest_Code1"],keyValues:[e.Code],isSuccess:!1,errorMessage:""}]};N()(v.AtU,T.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{let s=t.data;i.messageType=s.IsSuccess?"success":"critical",i.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.setState({saveEnabled:T.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.modify,I.V9),showAuthenticationLayout:!1},(()=>this.getDestination({Common_Code:e.Code}))):(i.messageResultDetails[0].errorMessage=s.ErrorList[0],this.setState({saveEnabled:T.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.add,I.V9),showAuthenticationLayout:!1}),console.log("Error in UpdateDestination:",s.ErrorList)),this.props.onSaved(e,"add",i)})).catch((t=>{this.setState({saveEnabled:T.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.add,I.V9),showAuthenticationLayout:!1}),i.messageResultDetails[0].errorMessage=t,this.props.onSaved(e,"add",i)}))}createDestination(e){let t=[{key:S.qp,value:e.Code}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:S.qp,KeyCodes:t,Entity:e},i={messageType:"critical",message:"DestInfo_SavedStatus",messageResultDetails:[{keyFields:["Dest_Code1"],keyValues:[e.Code],isSuccess:!1,errorMessage:""}]};N()(v.T00,T.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{let s=t.data;i.messageType=s.IsSuccess?"success":"critical",i.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.setState({saveEnabled:T.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.modify,I.V9),showAuthenticationLayout:!1},(()=>this.getDestination({Common_Code:e.Code}))):(i.messageResultDetails[0].errorMessage=s.ErrorList[0],this.setState({saveEnabled:T.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.add,I.V9),showAuthenticationLayout:!1}),console.log("Error in CreateDestination:",s.ErrorList)),this.props.onSaved(e,"add",i)})).catch((t=>{this.setState({saveEnabled:T.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.add,I.V9),showAuthenticationLayout:!1}),i.messageResultDetails[0].errorMessage=t,this.props.onSaved(e,"add",i)}))}componentDidMount(){try{T.pJ(this.props.userDetails.EntityResult.IsArchived),this.props.userDetails.EntityResult.IsDCHEnabled&&this.getShareholderDetail(this.props.selectedShareholder),this.getAttributes(this.props.selectedRow),this.getcustomerList(this.props.selectedShareholder)}catch(e){console.log("DriverDetailsComposite:Error occured on componentDidMount",e)}}getAttributes(e){try{N()(v.fKH,T.tW([L._N],this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data;!0===s.IsSuccess?this.setState({attributeMetaDataList:D().cloneDeep(s.EntityResult),attributeValidationErrors:T.Fl(s.EntityResult.destination)},(()=>this.getDestination(e))):console.log("Error in getAttributes:")}))}catch(t){console.log("Error while getAttributes:",t)}}getShareholderDetail(e){var t=[{key:S.FR,value:e}],s={ShareHolderCode:e,keyDataCode:S.FR,KeyCodes:t};N()(v.a6J,T.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({isValidShareholderSysExtCode:t.EntityResult.ExternalSystemCode>1}):(this.setState({isValidShareholderSysExtCode:!1}),console.log("Error in GetDestination:",t.ErrorList))})).catch((t=>{console.log("Error while getting Shareholder detail:",t,e)}))}getDestination(e){if(A.gq.ShareholderCode=this.props.selectedShareholder,A.gq.TransportationTypes=this.props.userDetails.EntityResult.TransportationTypes,A.gq.TerminalCodes=1===this.props.terminalCodes.length?[...this.props.terminalCodes]:[],void 0!==e.Common_Code){var t=[{key:S.qp,value:e.Common_Code}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:S.qp,KeyCodes:t};N()(v.xi7,T.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({isReadyToRender:!0,destination:t.EntityResult,modDestination:D().cloneDeep(t.EntityResult),modAssociations:Array.isArray(t.EntityResult.ListCustomerDestinationInfo)?T.Q3(D().cloneDeep(t.EntityResult.ListCustomerDestinationInfo)):[],saveEnabled:T.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.modify,I.V9)},(()=>{this.getKPIList(this.props.selectedShareholder,t.EntityResult.Code),this.props.userDetails.EntityResult.IsEnterpriseNode?this.terminalSelectionChange(t.EntityResult.TerminalCodes):this.localNodeAttribute()})):(this.setState({modDestination:D().cloneDeep(A.gq),destination:D().cloneDeep(A.gq),modAssociations:[],isReadyToRender:!0}),console.log("Error in GetDestination:",t.ErrorList))})).catch((t=>{console.log("Error while getting Destination:",t,e)}))}else this.setState({destination:D().cloneDeep(A.gq),modDestination:D().cloneDeep(A.gq),modAttributeMetaDataList:[],isReadyToRender:!0,modAssociations:[],destinationKPIList:[],saveEnabled:T.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.add,I.V9)},(()=>{!1===this.props.userDetails.EntityResult.IsEnterpriseNode&&this.localNodeAttribute()}))}getcustomerList(e){N()(v.E6k+"?ShareholderCode="+e+"&TransportationType=",T.Jm(this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data;if(!0===s.IsSuccess)if(Array.isArray(s.EntityResult)){let t=s.EntityResult.filter((t=>t.ShareholderCode===e));if(t.length>0){let e=Object.keys(t[0].CustomerDestinationsList),s=T.Zj(e);this.setState({customerOptions:s})}else console.log("no customers identified for shareholder")}else console.log("customerdestinations not identified for shareholder")})).catch((e=>{console.log("Error while getting Customer List:",e)}))}getKPIList(e,t){if(!0===T.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.view,I.bL)){var s="";void 0!==this.props.genericProps&&void 0!==this.props.genericProps.transportationType&&(s=this.props.genericProps.transportationType);let i={PageName:f.Ot,TransportationType:s,InputParameters:[{key:"ShareholderCode",value:e},{key:"DestinationCode",value:t}]};N()(v.dxq,T.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({destinationKPIList:t.EntityResult.ListKPIDetails}):(this.setState({destinationKPIList:[]}),console.log("Error in destination KPIList:",t.ErrorList))})).catch((e=>{console.log("Error while getting Destination KPIList:",e)}))}}render(){const e=[{fieldName:"DriverInfo_LastUpdated",fieldValue:new Date(this.state.modDestination.LastUpdatedTime).toLocaleDateString()+" "+new Date(this.state.modDestination.LastUpdatedTime).toLocaleTimeString()},{fieldName:"DriverInfo_LastActive",fieldValue:void 0!==this.state.modDestination.LastActiveTime&&null!==this.state.modDestination.LastActiveTime?new Date(this.state.modDestination.LastActiveTime).toLocaleDateString()+" "+new Date(this.state.modDestination.LastActiveTime).toLocaleTimeString():""},{fieldName:"DriverInfo_CreatedTime",fieldValue:new Date(this.state.modDestination.CreatedTime).toLocaleDateString()+" "+new Date(this.state.modDestination.CreatedTime).toLocaleTimeString()}];return this.state.isReadyToRender?(0,h.jsxs)("div",{children:[(0,h.jsx)(o.A,{children:(0,h.jsx)(a.A,{entityCode:this.state.destination.Code,newEntityName:"DestAdd_Title",popUpContents:e})}),(0,h.jsx)(b.A,{KPIList:this.state.destinationKPIList,children:" "}),(0,h.jsx)(o.A,{children:(0,h.jsx)(u,{destination:this.state.destination,modDestination:this.state.modDestination,modAssociations:this.state.modAssociations,validationErrors:this.state.validationErrors,listOptions:{transportationTypes:T.Zj(this.props.userDetails.EntityResult.TransportationTypes),terminalCodes:this.props.terminalCodes,customerOptions:this.state.customerOptions},attributeValidationErrors:this.state.attributeValidationErrors,modAttributeMetaDataList:this.state.modAttributeMetaDataList,attributeMetaDataList:this.state.attributeMetaDataList,selectedAssociations:this.state.selectedAssociations,handleRowSelectionChange:this.handleAssociationSelectionChange,onFieldChange:this.handleChange,onAllTerminalsChange:this.handleAllTerminalsChange,handleAddAssociation:this.handleAddAssociation,handleDeleteAssociation:this.handleDeleteAssociation,handleCellDataEdit:this.handleCellDataEdit,onAttributeDataChange:this.handleAttributeDataChange,onActiveStatusChange:this.handleActiveStatusChange,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,isDCHEnabled:this.props.userDetails.EntityResult.IsDCHEnabled,isValidShareholderSysExtCode:this.state.isValidShareholderSysExtCode})}),(0,h.jsx)(o.A,{children:(0,h.jsx)(m.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.showAuthenticationLayout?(0,h.jsx)(P.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.destination.Code?I.i.add:I.i.modify,functionGroup:I.V9,handleOperation:this.saveDestination,handleClose:this.handleAuthenticationClose}):null]}):(0,h.jsx)(R.A,{message:"Loading"})}}const j=(0,p.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(x)},24904:(e,t,s)=>{s.d(t,{y:()=>l});s(65043);var i=s(67907),a=s(72711),o=s(69062),n=s(70579);function l(e){let{terminalList:t,selectedTerminal:s,validationError:l,onFieldChange:r,onCheckChange:d}=e;return null===s&&(s=[]),(0,n.jsx)(i.TranslationConsumer,{children:e=>(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,n.jsx)("div",{style:{width:"80%"},children:(0,n.jsx)(a.Select,{fluid:!0,placeholder:e("Common_Select"),label:e("TerminalCodes"),value:s,multiple:!0,options:o.Zj(t),onChange:e=>r("TerminalCodes",e),error:e(l),disabled:0===t.length,reserveSpace:!1})}),(0,n.jsx)("div",{className:"ddlSelectAll",children:(0,n.jsx)(a.Checkbox,{label:e("Common_All"),checked:Array.isArray(s)&&s.length===t.length,onChange:e=>d(e)})})]})})}l.defaultProps={terminalList:[],selectedTerminal:[],validationError:""}},43503:(e,t,s)=>{s.d(t,{A:()=>l});s(65043);var i=s(67907),a=s(72711),o=s(70579);function n(e){let{entityCode:t,newEntityName:s,popUpContents:n}=e;return(0,o.jsx)(i.TranslationConsumer,{children:e=>(0,o.jsx)("div",{className:"headerContainer",children:(0,o.jsxs)("div",{className:"row headerSpacing",children:[(0,o.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,o.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(s):t})}),""!==t&&void 0!==t&&n.length>0?(0,o.jsx)("div",{className:"headerItemRight",children:(0,o.jsx)(a.Popup,{element:(0,o.jsxs)("div",{children:[e(n[0].fieldName)+" ",":"," "+n[0].fieldValue,(0,o.jsx)(a.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,o.jsx)(a.List,{className:"detailsHeaderPopUp",children:n.map((t=>(0,o.jsxs)(a.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}n.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const l=n},9256:(e,t,s)=>{s.d(t,{q:()=>n});s(65043);var i=s(72711),a=s(67907),o=s(70579);function n(e){let{handleBack:t,handleSave:s,handleReset:n,saveEnabled:l}=e;return(0,o.jsx)(a.TranslationConsumer,{children:e=>(0,o.jsxs)("div",{className:"row userActionPosition",children:[(0,o.jsx)("div",{className:"col-12 col-md-3 col-lg-4",children:(0,o.jsx)(i.Button,{className:"backButton",onClick:t,content:e("Back")})}),(0,o.jsx)("div",{className:"col-12 col-md-9 col-lg-8",children:(0,o.jsxs)("div",{style:{float:"right"},children:[(0,o.jsx)(i.Button,{content:e("LookUpData_btnReset"),className:"cancelButton",onClick:n}),(0,o.jsx)(i.Button,{content:e("Save"),disabled:!l,onClick:s})]})})]})})}n.defaultProps={saveEnabled:!1}},85800:(e,t,s)=>{s.d(t,{n:()=>r});s(65043);var i=s(72711),a=s(67907),o=s(7523),n=s(35861),l=s(70579);function r(e){let{selectedAttributeList:t,handleCellDataEdit:s,attributeValidationErrors:r}=e;const d=e=>{if("0000-00-00"===e.DefaultValue)return c(e,new Date),new Date;var t=e.DefaultValue.split("-");return new Date(t[0],t[1]-1,t[2])},c=(e,t)=>{var i=new Date(t);t=i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2),s(e,t)};return(0,l.jsx)(a.TranslationConsumer,{children:e=>(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-md-12 attributeDetails-wrap",children:(0,l.jsx)("div",{className:"row",children:t.map((t=>t.DataType.toLowerCase()===o.pe.STRING.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(i.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(r[t.Code]),reserveSpace:!1})}):t.DataType.toLowerCase()!==o.pe.INT.toLowerCase()&&t.DataType.toLowerCase()!==o.pe.LONG.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()!==o.pe.FLOAT.toLowerCase()&&t.DataType.toLowerCase()!==o.pe.DOUBLE.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()===o.pe.BOOL.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(i.Checkbox,{className:"deviceCheckBox customDeviceCheckBox",label:e(t.DisplayName),checked:null===t.DefaultValue?"":"true"===t.DefaultValue.toString().toLowerCase(),disabled:!0===t.IsReadonly,onChange:e=>s(t,e)})}):t.DataType.toLowerCase()===o.pe.DATETIME.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(i.DatePicker,{fluid:!0,value:null===t.DefaultValue||""===t.DefaultValue?"":d(t),label:e(t.DisplayName),displayFormat:(0,n.F1)(),showYearSelector:"true",indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>c(t,e),onTextChange:e=>{c(t,e)},error:e(r[t.Code]),reserveSpace:!1})}):null:(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(i.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue||""===t.DefaultValue?"":t.DefaultValue.toLocaleString(),indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(r[t.Code]),reserveSpace:!1})}):(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(i.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(r[t.Code]),reserveSpace:!1})})))})})})})}},15417:(e,t,s)=>{s.d(t,{$7:()=>P,AN:()=>se,AU:()=>L,Ak:()=>qe,Ao:()=>i,B6:()=>Q,C4:()=>He,CG:()=>z,Ct:()=>W,Cw:()=>w,EY:()=>y,G$:()=>Qe,G6:()=>$e,GF:()=>me,GJ:()=>O,Gj:()=>he,Gl:()=>oe,H9:()=>Ze,HB:()=>Re,HP:()=>v,Hr:()=>ye,II:()=>at,IQ:()=>S,Jr:()=>U,Jx:()=>Ae,Ki:()=>te,LP:()=>ae,Lv:()=>o,MK:()=>D,MX:()=>ee,Mx:()=>K,N4:()=>Me,NH:()=>Ie,OF:()=>Je,Ps:()=>V,Q7:()=>We,QY:()=>H,SF:()=>n,Sq:()=>Ne,Sw:()=>le,TQ:()=>X,U7:()=>R,UH:()=>E,UO:()=>ne,V_:()=>fe,Vy:()=>_e,W9:()=>de,WN:()=>A,Wr:()=>a,Ww:()=>$,XP:()=>be,Xk:()=>Z,Yb:()=>ge,Yy:()=>p,Z2:()=>Oe,ZN:()=>x,ZO:()=>Te,Zu:()=>Ue,_G:()=>B,_N:()=>h,_u:()=>ce,ad:()=>re,al:()=>Se,ao:()=>_,bK:()=>q,bN:()=>I,cf:()=>j,dO:()=>Pe,dU:()=>m,dv:()=>l,eE:()=>Y,g:()=>N,gG:()=>r,gS:()=>Le,gT:()=>st,gW:()=>J,gZ:()=>Xe,go:()=>b,gp:()=>F,hq:()=>je,i6:()=>et,ip:()=>ue,k9:()=>C,kI:()=>T,l4:()=>we,l5:()=>g,lA:()=>M,lU:()=>ze,mD:()=>Fe,mY:()=>k,mq:()=>d,n$:()=>it,n7:()=>u,nZ:()=>xe,rA:()=>ke,s$:()=>Ve,s8:()=>Ge,se:()=>De,tA:()=>ve,vK:()=>tt,vs:()=>Ee,w2:()=>Ye,w4:()=>Ce,wT:()=>c,wY:()=>f,wf:()=>pe,wk:()=>ie,xW:()=>G,yM:()=>Be,yO:()=>Ke});const i="driver",a="carriercompany",o="shareholder",n="baseProduct",l="TRAILER",r="TRAILERCOMPARTMENT",d="terminal",c="customer",h="destination",u="finishedproduct",m="tank",p="marine_vessel",C="marine_trailercompartment",E="supplier",D="vehicle",I="vehicletrailer",A="originterminal",S="bay",T="loadingArm",g="cardreader",N="vehicleprimemover",v="meter",y="SHIPMENT",R="SHIPMENTCOMPARTMENT",L="SHIPMENTDESTINATIONCOMPARTMENT",b="SHIPMENTDETAILS",f="SHIPMENTTRAILERWEIGHBRIDGE",P="SHIPMENTTRAILER",x="SHIPMENTSTATUSTIME",j="MARINEDISPATCH",M="MARINEDISPATCHCOMPARTMENTDETAIL",O="railwagon",w="primemover",k="bcu",H="RAILRECEIPTPLAN",V="RAILRECEIPTWAGONDETAILPLAN",_="RAILUNLOADINGDETAILSFP",F="RAILUNLOADINGDETAILSBP",G="RAILUNLOADINGDETAILSADDITIVE",U="RAILDISPATCHPLAN",q="RAILDISPATCHITEM",B="RAILDISPATCHSTATUSCHANGE",K="RAILDISPATCHWAGON",W="RAILDISPATCHWAGONDETAILPLAN",Z="RAILDISPATCHWAGONWEIGHBRIDGE",Q="RAILDISPATCHWAGONCOMPARTMENT",Y="RAILLOADINGDETAILSFP",z="RAILLOADINGDETAILSBP",J="RAILLOADINGDETAILSADDITIVE",$="marineReceipt",X="UNACCOUNTEDMETERTRANSACTION",ee="UNACCOUNTEDTANKTRANSACTION",te="marineLoadingDetailsFP",se="marineLoadingDetailsAdditive",ie="marineLoadingDetailsBP",ae="marineReceiptCompartmentDetail",oe="marineUnloadingDetailsFP",ne="marineUnloadingDetailsBP",le="accessCard",re="LOADINGDETAILSFP",de="LOADINGDETAILSBP",ce="LOADINGDETAILSADDITIVE",he="MARINERECEIPTSTATUSTIME",ue="MARINEDISPATCHSTATUSTIME",me="RECEIPT",pe="UNLOADINGTRANSACTIONS",Ce="ORDER",Ee="ORDERITEM",De="CONTRACT",Ie="CONTRACT_ITEM",Ae="RECEIPTORIGINTERMINALCOMPARTMENT",Se="GeneralTMUser_CAPTAIN",Te="weighbridge",ge="deu",Ne="GeneralTMUser_STAFF",ve="GeneralTMUser_VISITOR",ye="PIPELINEHEADER",Re="SEALMASTER",Le="PIPELINERECEIPT",be="ROADSHIPMENTSLOTINFO",fe="ROADRECEIPTSLOTINFO",Pe="MARINESHIPMENTSLOTINFO",xe="MARINERECEIPTSLOTINFO",je="PIPELINEDISPATCH",Me="PIPELINETRANSACTIONS",Oe="PIPELINEDISPATCHSTATUSTIME",we="PIPELINERECEIPTSTATUSTIME",ke="PROCESSCONFIG",He="PRODUCTALLOCATIONITEM",Ve="HSEINSPECTIONSHIPMENTRIGIDTRUCK",_e="HSEINSPECTIONSHIPMENTTRAILER",Fe="HSEINSPECTIONSHIPMENTPRIMEMOVER",Ge="HSEINSPECTIONSHIPMENTNONFILLINGVEHICLE",Ue="HSEINSPECTIONMARINESHIPMENTBARGE",qe="HSEINSPECTIONMARINESHIPMENTSHIP",Be="HSEINSPECTIONSHIPMENTRAILWAGON",Ke="HSEINSPECTIONSHIPMENTPIPELINE",We="HSEINSPECTIONRECEIPTRIGIDTRUCK",Ze="HSEINSPECTIONRECEIPTTRAILER",Qe="HSEINSPECTIONRECEIPTPRIMEMOVER",Ye="HSEINSPECTIONRECEIPTNONFILLINGVEHICLE",ze="HSEINSPECTIONMARINERECEIPTBARGE",Je="HSEINSPECTIONMARINERECEIPTSHIP",$e="HSEINSPECTIONRECEIPTRAILWAGON",Xe="HSEINSPECTIONRECEIPTPIPELINE",et="SHAREHOLDERAGREEMENT",tt="COATEMPLATE",st="COAMANAGEMENT",it="COACUSTOMER",at="COAASSIGNMENT"},35861:(e,t,s)=>{s.d(t,{F1:()=>l,i7:()=>r,r4:()=>n});var i=s(86178),a=s.n(i),o=(s(15660),s(65043),s(70579));function n(e,t){if(Array.isArray(e)){0===e.filter((e=>e.text===t)).length&&e.unshift({value:null,text:t})}return e}function l(){let e=window.navigator.userLanguage||window.navigator.language;return a().locale(e),a().localeData().longDateFormat("L")}function r(e){return(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{children:e}),(0,o.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]})}}}]);
//# sourceMappingURL=6813.8625fb4f.chunk.js.map