"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[9108,6001,8382,735,3116,3235,5973,8354],{69108:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var i=s(65043),o=s(69062),a=s(40854),r=s.n(a),l=s(72067),n=s(65187),c=s(43503),d=s(9256),h=s(40252),u=s(72711),C=s(67907),D=s(78374),v=s(85800),p=s(70579);function E(e){let{processConfig:t,modProcessConfig:s,validationErrors:i,onFieldChange:o,onActiveStatusChange:a,listOptions:r,pageSize:l,onAvailableDeviceSelection:c,onAssociatedDeviceSelection:d,onDeviceAssociation:h,onDeviceDisassociation:E,modAttributeMetaDataList:g,attributeValidationErrors:m,onAttributeDataChange:T,isMultidrop:P}=e;const A=(e,t)=>{let s=[];return s=e.find((e=>e.TerminalCode===t)),s.attributeValidationErrors};return(0,p.jsx)(C.TranslationConsumer,{children:e=>(0,p.jsxs)("div",{className:"detailsContainer",children:[(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(u.Input,{fluid:!0,value:s.ProcessName,indicator:"required",disabled:""!==t.ProcessName,onChange:e=>o("ProcessName",e),label:e("ProcessConfig_ProcessName"),error:e(i.ProcessName),reserveSpace:!1})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(u.Select,{fluid:!0,placeholder:e("Common_Select"),value:s.WorkFlowType,label:e("ExeConfiguration_WorkFlow"),indicator:"required",options:r.workFlowTypeOptions,onChange:e=>{o("WorkFlowType",e)},error:e(i.WorkFlowType),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage")})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(u.Select,{fluid:!0,placeholder:e("Common_Select"),value:s.PrimaryDeviceType,label:e("ProcessConfig_DeviceType"),indicator:"required",options:r.deviceTypeOptions,onChange:e=>{o("PrimaryDeviceType",e)},error:e(i.PrimaryDeviceType),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage")})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(u.Select,{fluid:!0,placeholder:e("Common_Select"),value:s.PrimaryDeviceCode,label:e("ProcessConfig_PrimaryDeviceCode"),indicator:"required",options:r.deviceCodeOptions,onChange:e=>{o("PrimaryDeviceCode",e)},error:e(i.PrimaryDeviceCode),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage")})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(u.Select,{fluid:!0,placeholder:e("Common_Select"),label:e("ProcessConfig_Status"),value:s.Active,options:[{text:e("PipeLineHeaderInfo_Active"),value:!0},{text:e("PipeLineHeaderInfo_Inactive"),value:!1}],onChange:e=>a(e),error:e(i.Active),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage")})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(u.Input,{fluid:!0,value:s.Remarks,onChange:e=>o("Remarks",e),label:e("ProcessConfig_Remarks"),error:e(i.Remarks),indicator:s.Active!==t.Active?"required":"",reserveSpace:!1})})]}),(0,p.jsxs)("div",{className:"row",children:[(0,p.jsxs)("div",{className:"col-12 col-md-5 col-lg-5",children:[(0,p.jsx)("h4",{children:e("ProcessConfig_AvlDevices")}),(0,p.jsx)("div",{className:"detailsTable",children:(0,p.jsxs)(D.bQ,{data:r.availableDevices,search:!0,selectionMode:"multiple",selection:r.selectedAvailableDevices,onSelectionChange:c,rows:l,searchPlaceholder:e("LoadingDetailsView_SearchGrid"),children:[(0,p.jsx)(D.bQ.Column,{className:"compColHeight",field:"DeviceCode",header:e("ProcessConfig_BCU"),editFieldType:"text"},"DeviceCode"),(0,p.jsx)(D.bQ.Column,{className:"compColHeight",field:"ChannelCode",header:e("ProcessConfig_Channel"),editFieldType:"text"},"ChannelCode"),Array.isArray(r.availableDevices)&&r.availableDevices.length>l?(0,p.jsx)(D.bQ.Pagination,{}):""]})})]}),(0,p.jsxs)("div",{className:"col-12 col-md-2 col-lg-2",children:[(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsxs)("div",{style:{textAlign:"center"},children:[(0,p.jsx)(u.Button,{type:"primary",icon:(0,p.jsx)(u.Icon,{name:"caret-right",root:"common"}),content:"",iconPosition:"right",onClick:h,disabled:!(r.availableDevices.length>0)}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)(u.Button,{type:"primary",icon:(0,p.jsx)(u.Icon,{name:"caret-left",root:"common"}),content:"",iconPosition:"right",onClick:E,disabled:!(r.associatedDevices.length>0)})]})]}),(0,p.jsxs)("div",{className:"col-12 col-md-5 col-lg-5",children:[(0,p.jsx)("h4",{children:e("ProcessConfig_AssociatedDevices")}),(0,p.jsx)("div",{className:"detailsTable",children:(0,p.jsxs)(D.bQ,{data:r.associatedDevices,search:!0,selectionMode:"multiple",selection:r.selectedAssociatedDevices,onSelectionChange:d,rows:l,searchPlaceholder:e("LoadingDetailsView_SearchGrid"),children:[(0,p.jsx)(D.bQ.Column,{className:"compColHeight",field:"DeviceCode",header:e("ProcessConfig_BCU"),editFieldType:"text"},"DeviceCode"),(0,p.jsx)(D.bQ.Column,{className:"compColHeight",field:"ChannelCode",header:e("ProcessConfig_Channel"),editFieldType:"text"},"ChannelCode"),Array.isArray(r.associatedDevices)&&r.associatedDevices.length>l?(0,p.jsx)(D.bQ.Pagination,{}):""]})})]}),(0,p.jsx)("div",{})]}),g.length>0?g.map((t=>(0,p.jsx)(n.A,{children:(0,p.jsx)(u.Accordion,{children:(0,p.jsx)(u.Accordion.Content,{className:"attributeAccordian",title:e("Attributes_Header"),children:(0,p.jsx)(v.n,{selectedAttributeList:t.attributeMetaDataList,handleCellDataEdit:T,attributeValidationErrors:A(m,t.TerminalCode)})})})}))):null]})})}E.defaultProps={listOptions:{workFlowTypeOptions:[],deviceTypeOptions:[],deviceCodeOptions:[],availableDevices:[],associatedDevices:[],selectedAvailableDevices:[],selectedAssociatedDevices:[]}};var g=s(46100),m=s(44192),T=(s(38726),s(97508)),P=s(93779),A=s(53536),I=s.n(A),f=s(80312),y=s(7523),S=s(15417),N=s(62900);class R extends i.Component{constructor(){super(...arguments),this.state={processConfig:I().cloneDeep(g.bV),modProcessConfig:{},validationErrors:o.Th(m.Sr),isReadyToRender:!1,saveEnabled:!1,workFlowTypeOptions:[],deviceTypeOptions:[],deviceCodeOptions:[],availableDevices:[],associatedDevices:[],selectedAvailableDevices:[],selectedAssociatedDevices:[],attributeMetaDataList:[],modAttributeMetaDataList:[],attributeValidationErrors:[],isMultidrop:!1,tempProcessConfig:{}},this.handleChange=(e,t)=>{try{const s=I().cloneDeep(this.state.modProcessConfig);s[e]=t,this.setState({modProcessConfig:s},(()=>{"WorkFlowType"===e?this.handleWorkFlowTypeChange(t):"PrimaryDeviceType"===e?this.handePrimaryDeviceTypeChanges(s.WorkFlowType,t):"PrimaryDeviceCode"===e&&this.getMultiDropDevices(s.PrimaryDeviceType,t)}));const i=I().cloneDeep(this.state.validationErrors);void 0!==m.Sr[e]&&(i[e]=o.jr(m.Sr[e],t),this.setState({validationErrors:i}))}catch(s){console.log("ProcessConfigDetailsComposite:Error occured on handleChange",s)}},this.handleActiveStatusChange=e=>{try{let t=I().cloneDeep(this.state.modProcessConfig);t.Active=e,t.Active!==this.state.processConfig.Active&&(t.Remarks=""),this.setState({modProcessConfig:t})}catch(t){console.log("ProcessConfigDetailsComposite:Error occured on handleActiveStatusChange",t)}},this.handleReset=()=>{try{const{validationErrors:e}={...this.state},t=I().cloneDeep(this.state.processConfig);Object.keys(e).forEach((function(t){e[t]=""})),this.setState({modProcessConfig:{...t},selectedCompRow:[],validationErrors:e,availableDevices:[],associatedDevices:[],selectedAvailableDevices:[],selectedAssociatedDevices:[],modAttributeMetaDataList:[]},(()=>{this.localNodeAttribute(),this.handleResetAttributeValidationError()})),""===t.ProcessName?this.setState({deviceCodeOptions:[],deviceTypeOptions:[]}):(this.getProcessConfigDeviceType(t.WorkFlowType),this.getProcessConfigDeviceCodes(t.WorkFlowType,t.PrimaryDeviceType),this.getMultiDropDevices(t.PrimaryDeviceType,t.PrimaryDeviceCode))}catch(e){console.log("ProcessConfigDetailsComposite:Error occured on handleReset",e)}},this.saveProcessConfig=()=>{try{this.setState({saveEnabled:!1});let e=I().cloneDeep(this.state.tempProcessConfig);""===this.state.processConfig.ProcessName?this.createProcessConfig(e):this.updateProcessConfig(e)}catch(e){console.log("SaveProcessConfig Composite : Error in saveProcessConfig")}},this.handleSave=()=>{try{let e=this.fillDetails(),t=o.pI(this.state.modAttributeMetaDataList);if(this.validateSave(e,t)){t=o.SC(t),e.Attributes=o.Gh(t);let s=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,i=I().cloneDeep(e);this.setState({showAuthenticationLayout:s,tempProcessConfig:i},(()=>{!1===s&&this.saveProcessConfig()}))}else this.setState({saveEnabled:!0})}catch(e){console.log("ProcessConfigDetailsComposite:Error occured on handleSave",e)}},this.handleAvailableDeviceSelection=e=>{this.setState({selectedAvailableDevices:e})},this.handleAssociatedDeviceSelection=e=>{this.setState({selectedAssociatedDevices:e})},this.handleDeviceAssociation=()=>{try{this.setState({isReadyToRender:!1},(()=>{const e=I().cloneDeep(this.state.selectedAvailableDevices);let t=I().cloneDeep(this.state.availableDevices),s=I().cloneDeep(this.state.associatedDevices);e.forEach((e=>{s.push(e),t=t.filter((t=>t.DeviceCode!==e.DeviceCode))})),this.setState({associatedDevices:s,selectedAvailableDevices:[],availableDevices:t,isReadyToRender:!0})}))}catch(e){console.log("ProcessConfigDetailsComposite:Error occured on handleDeviceAssociation",e)}},this.handleDeviceDisassociation=()=>{try{this.setState({isReadyToRender:!1},(()=>{const e=I().cloneDeep(this.state.selectedAssociatedDevices);let t=I().cloneDeep(this.state.availableDevices),s=I().cloneDeep(this.state.associatedDevices);e.forEach((e=>{t.push(e),s=s.filter((t=>t.DeviceCode!==e.DeviceCode))})),this.setState({associatedDevices:s,selectedAssociatedDevices:[],availableDevices:t,isReadyToRender:!0})}))}catch(e){console.log("ProcessConfigDetailsComposite:Error occured on handleDeviceAssociation",e)}},this.handleAttributeDataChange=(e,t)=>{try{let s=[],i=I().cloneDeep(this.state.modAttributeMetaDataList),a=i.filter((t=>t.TerminalCode===e.TerminalCode));a.length>0&&Array.isArray(a[0].attributeMetaDataList)&&(s=a[0].attributeMetaDataList.filter((t=>t.Code===e.Code))),s.length>0&&(s[0].DefaultValue=t);const r=I().cloneDeep(this.state.attributeValidationErrors);r.forEach((s=>{s.TerminalCode===e.TerminalCode&&(s.attributeValidationErrors[e.Code]=o.I5(e,t))})),this.setState({attributeValidationErrors:r,modAttributeMetaDataList:i})}catch(s){console.log("ProcessConfigDetailsComposite:Error occured on handleAttributeDataChange",s)}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})}}componentDidMount(){try{o.pJ(this.props.userDetails.EntityResult.IsArchived),this.getAttributes(this.props.selectedRow),this.getWorkFlowType()}catch(e){console.log("ProcessConfigDetailsComposite:Error occured on componentDidMount",e)}}componentWillReceiveProps(e){try{if(""!==this.state.processConfig.ProcessName&&void 0===e.selectedRow.Common_Code&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo){this.getAttributes(e.selectedRow);let t={...this.state.validationErrors};Object.keys(t).forEach((e=>{t[e]=""})),this.setState({validationErrors:t})}}catch(t){console.log("ProcessConfigDetailsComposite:Error occured on componentWillReceiveProps",t)}}getProcessConfig(e){if(void 0!==e.ProcessConfig_ProcessName){var t=[{key:P.vL,value:e.ProcessConfig_ProcessName}],s={keyDataCode:P.vL,KeyCodes:t};r()(l.M_C,o.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?(t.EntityResult.PrimaryDeviceType=Object.keys(y.k6).find((e=>y.k6[e]===t.EntityResult.PrimaryDeviceType)),this.setState({isReadyToRender:!0,processConfig:I().cloneDeep(t.EntityResult),modProcessConfig:I().cloneDeep(t.EntityResult),saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,f.i.modify,f.op)},(()=>{this.getProcessConfigDeviceType(t.EntityResult.WorkFlowType),this.getProcessConfigDeviceCodes(t.EntityResult.WorkFlowType,t.EntityResult.PrimaryDeviceType),this.getMultiDropDevices(t.EntityResult.PrimaryDeviceType,t.EntityResult.PrimaryDeviceCode),this.localNodeAttribute()}))):(this.setState({processConfig:I().cloneDeep(g.bV),modProcessConfig:I().cloneDeep(g.bV),isReadyToRender:!0}),console.log("Error in getProcessConfig:",t.ErrorList))})).catch((t=>{console.log("Error while getProcessConfig:",t,e)}))}else this.setState({processConfig:I().cloneDeep(g.bV),modProcessConfig:I().cloneDeep(g.bV),isReadyToRender:!0,saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,f.i.add,f.op),availableDevices:[],associatedDevices:[],selectedAvailableDevices:[],selectedAssociatedDevices:[],modAttributeMetaDataList:[]},(()=>{this.localNodeAttribute()}))}getAttributes(e){try{r()(l.fKH,o.tW([S.rA],this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data;!0===s.IsSuccess?this.setState({attributeMetaDataList:I().cloneDeep(s.EntityResult),attributeValidationErrors:o.Fl(s.EntityResult.PROCESSCONFIG)},(()=>this.getProcessConfig(e))):console.log("Error in getAttributes:")}))}catch(t){console.log("Error while getAttributes:",t)}}localNodeAttribute(){try{var e=I().cloneDeep(this.state.attributeMetaDataList);Array.isArray(e.PROCESSCONFIG)&&e.PROCESSCONFIG.length>0&&this.terminalSelectionChange([e.PROCESSCONFIG[0].TerminalCode])}catch(t){console.log("ProcessConfigDetailsComposite:Error occured on localNodeAttribute",t)}}terminalSelectionChange(e){try{if(void 0!==e&&null!==e){let a=[];var t=[],s=[];t=I().cloneDeep(this.state.attributeMetaDataList),s=I().cloneDeep(this.state.modAttributeMetaDataList);const r=I().cloneDeep(this.state.attributeValidationErrors);var i=I().cloneDeep(this.state.modProcessConfig);e.forEach((e=>{var o=s.find((t=>t.TerminalCode===e));void 0===o?t.PROCESSCONFIG.forEach((function(t){if(t.TerminalCode===e){if(null!==i.Attributes)var s=i.Attributes.find((t=>t.TerminalCode===e));void 0!==s&&t.attributeMetaDataList.forEach((function(e){var t=s.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),a.push(t)}})):a.push(o)})),s=[],s=a,s=o.nQ(s),r.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.setState({modAttributeMetaDataList:s,attributeValidationErrors:r})}}catch(a){console.log("ProcessConfigDetailsComposite:Error occured on terminalSelectionChange",a)}}getWorkFlowType(){r()(l.JJt,o.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=[];null!==t.EntityResult&&null!==t.EntityResult.Table&&Array.isArray(t.EntityResult.Table)&&(t.EntityResult.Table.forEach((t=>{e.push({text:t.WorkflowCode,value:t.WorkflowCode})})),this.setState({workFlowTypeOptions:e}))}else console.log("Error in getWorkFlowType:",t.ErrorList)})).catch((e=>{console.log("Error while getWorkFlowType:",e)}))}getProcessConfigDeviceType(e){r()(l.Ax$+"?workflowTypeCode="+e,o.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=[];null!==t.EntityResult&&null!==t.EntityResult.Table&&Array.isArray(t.EntityResult.Table)&&(t.EntityResult.Table.forEach((t=>{e.push({text:t.Code,value:t.Code})})),this.setState({deviceTypeOptions:e}))}else console.log("Error in getProcessConfigDeviceType:",t.ErrorList)})).catch((e=>{console.log("Error while getProcessConfigDeviceType:",e)}))}getProcessConfigDeviceCodes(e,t){r()(l._L_+"?workflowType="+e+"&deviceType="+t,o.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=o.Zj(t.EntityResult);this.setState({deviceCodeOptions:e})}}else console.log("Error in getProcessConfigDeviceCodes:",t.ErrorList)})).catch((e=>{console.log("Error while getProcessConfigDeviceCodes:",e)}))}getMultiDropDevices(e,t){const s=I().cloneDeep(this.state.modProcessConfig),i=I().cloneDeep(this.state.processConfig);r()(l.cXP+"?deviceType="+e+"&deviceCode="+t,o.Jm(this.props.tokenDetails.tokenInfo)).then((t=>{var o=t.data;if(!0===o.IsSuccess){let t=[],r=[];var a=!1;if(null!==o.EntityResult){if("EntryGate"!==this.state.modProcessConfig.WorkFlowType&&"ExitGate"!==this.state.modProcessConfig.WorkFlowType||"CARD_READER"!==e)if(""!==i.ProcessName&&"1"===o.EntityResult.Table2[0].IsMultiDrop){o.EntityResult.Table.forEach((e=>{s.AssociatedDevices.filter((t=>t.DeviceCode===e.DeviceCode)).length>0?r.push(e):t.push(e)}))}else t=o.EntityResult.Table1,r=o.EntityResult.Table;else t=o.EntityResult.Table1,r=[];a="1"===o.EntityResult.Table2[0].IsMultiDrop,this.setState({availableDevices:t,associatedDevices:r,isMultidrop:a})}}else console.log("Error in getMultiDropDevices:",o.ErrorList)})).catch((e=>{console.log("Error while getMultiDropDevices:",e)}))}handleWorkFlowTypeChange(e){try{const t=I().cloneDeep(this.state.modProcessConfig);t.PrimaryDeviceType="",t.PrimaryDeviceCode="",this.setState({modProcessConfig:t,deviceCodeOptions:[],availableDevices:[],associatedDevices:[]}),this.getProcessConfigDeviceType(e)}catch(t){console.log("ProcessConfigDetailsComposite:Error occured on handleWorkFlowTypeChange",t)}}handePrimaryDeviceTypeChanges(e,t){try{const s=I().cloneDeep(this.state.modProcessConfig);s.PrimaryDeviceCode="",this.setState({modProcessConfig:s,availableDevices:[],associatedDevices:[]}),this.getProcessConfigDeviceCodes(e,t)}catch(s){console.log("ProcessConfigDetailsComposite:Error occured on handePrimaryDeviceTypeChanges",s)}}handleResetAttributeValidationError(){try{var e=I().cloneDeep(this.state.attributeMetaDataList);this.setState({attributeValidationErrors:o.Fl(e.PROCESSCONFIG)})}catch(t){console.log("ProcessConfigDetailsComposite:Error occured on handleResetAttributeValidationError",t)}}fillDetails(){try{let e=I().cloneDeep(this.state.modProcessConfig),t=I().cloneDeep(this.state.associatedDevices);return e.AssociatedDevices=[],t.forEach((t=>{var s={DeviceCode:t.DeviceCode,DeviceType:e.PrimaryDeviceType};e.AssociatedDevices.push(s)})),e}catch(e){console.log("ProcessConfigDetailsComposite:Error occured on fillDetails",e)}}validateSave(e,t){try{const a={...this.state.validationErrors};Object.keys(m.Sr).forEach((function(t){void 0!==e[t]&&(a[t]=o.jr(m.Sr[t],e[t]))})),e.Active!==this.state.processConfig.Active&&(null!==e.Remarks&&""!==e.Remarks||(a.Remarks="BaseProductInfo_EnterRemarks"));var s=I().cloneDeep(this.state.attributeValidationErrors);t.forEach((e=>{s.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=o.I5(e,e.DefaultValue)}))}))})),this.setState({validationErrors:a,attributeValidationErrors:s});var i=!0;return s.forEach((e=>{if(!i)return i;i=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),i&&(i=Object.values(a).every((function(e){return""===e}))),i}catch(a){console.log("ProcessConfigDetailsComposite:Error occured on validateSave",a)}}createProcessConfig(e){this.handleAuthenticationClose();let t=[{key:P.vL,value:e.ProcessName}],s={keyDataCode:P.vL,KeyCodes:t,Entity:e},i={messageType:"critical",message:"ExeConfiguration_AddUpdateStatus",messageResultDetails:[{keyFields:["ExeConfiguration_ExeName"],keyValues:[e.ProcessName],isSuccess:!1,errorMessage:""}]};r()(l.aGy,o.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{let s=t.data;i.messageType=s.IsSuccess?"success":"critical",i.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,f.i.modify,f.op)},(()=>this.getProcessConfig({ProcessConfig_ProcessName:e.ProcessName}))):(i.messageResultDetails[0].errorMessage=s.ErrorList[0],this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,f.i.add,f.op)}),console.log("Error in create ProcessConfig:",s.ErrorList)),this.props.onSaved(this.state.modProcessConfig,"add",i)})).catch((e=>{this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,f.i.add,f.op)}),i.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modProcessConfig,"add",i)}))}updateProcessConfig(e){this.handleAuthenticationClose();let t=[{key:P.vL,value:e.ProcessName}],s={keyDataCode:P.vL,KeyCodes:t,Entity:e},i={messageType:"critical",message:"ExeConfiguration_AddUpdateStatus",messageResultDetails:[{keyFields:["ExeConfiguration_ExeName"],keyValues:[e.ProcessName],isSuccess:!1,errorMessage:""}]};r()(l.b9U,o.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{let s=t.data;i.messageType=s.IsSuccess?"success":"critical",i.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,f.i.modify,f.op)},(()=>this.getProcessConfig({ProcessConfig_ProcessName:e.ProcessName}))):(i.messageResultDetails[0].errorMessage=s.ErrorList[0],this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,f.i.modify,f.op)}),console.log("Error in update ProcessConfig:",s.ErrorList)),this.props.onSaved(this.state.modProcessConfig,"update",i)})).catch((e=>{this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,f.i.modify,f.op)}),i.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modProcessConfig,"modify",i)}))}render(){const e={workFlowTypeOptions:this.state.workFlowTypeOptions,deviceTypeOptions:this.state.deviceTypeOptions,deviceCodeOptions:this.state.deviceCodeOptions,availableDevices:this.state.availableDevices,associatedDevices:this.state.associatedDevices,selectedAvailableDevices:this.state.selectedAvailableDevices,selectedAssociatedDevices:this.state.selectedAssociatedDevices},t=[{fieldName:"ProcessConfig_LastUpdatedTime",fieldValue:new Date(this.state.modProcessConfig.LastUpdatedTime).toLocaleDateString()+" "+new Date(this.state.modProcessConfig.LastUpdatedTime).toLocaleTimeString()},{fieldName:"ProcessConfig_CreatedTime",fieldValue:new Date(this.state.modProcessConfig.CreatedTime).toLocaleDateString()+" "+new Date(this.state.modProcessConfig.CreatedTime).toLocaleTimeString()},{fieldName:"ProcessConfig_LastActiveTime",fieldValue:void 0!==this.state.modProcessConfig.LastActiveTime&&null!==this.state.modProcessConfig.LastActiveTime?new Date(this.state.modProcessConfig.LastActiveTime).toLocaleDateString()+" "+new Date(this.state.modProcessConfig.LastActiveTime).toLocaleTimeString():""}];return this.state.isReadyToRender?(0,p.jsxs)("div",{children:[(0,p.jsx)(n.A,{children:(0,p.jsx)(c.A,{entityCode:this.state.processConfig.ProcessName,newEntityName:"ExeConfiguration_Title",popUpContents:t})}),(0,p.jsx)(n.A,{children:(0,p.jsx)(E,{processConfig:this.state.processConfig,modProcessConfig:this.state.modProcessConfig,listOptions:e,validationErrors:this.state.validationErrors,onFieldChange:this.handleChange,onActiveStatusChange:this.handleActiveStatusChange,pageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,onAvailableDeviceSelection:this.handleAvailableDeviceSelection,onAssociatedDeviceSelection:this.handleAssociatedDeviceSelection,onDeviceAssociation:this.handleDeviceAssociation,onDeviceDisassociation:this.handleDeviceDisassociation,attributeValidationErrors:this.state.attributeValidationErrors,modAttributeMetaDataList:this.state.modAttributeMetaDataList,onAttributeDataChange:this.handleAttributeDataChange,isMultidrop:this.state.isMultidrop})}),(0,p.jsx)(n.A,{children:(0,p.jsx)(d.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.showAuthenticationLayout?(0,p.jsx)(N.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.processConfig.ProcessName?f.i.add:f.i.modify,functionGroup:f.op,handleOperation:this.saveProcessConfig,handleClose:this.handleAuthenticationClose}):null]}):(0,p.jsx)(h.A,{message:"Loading"})}}const b=(0,T.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(R)},43503:(e,t,s)=>{s.d(t,{A:()=>l});s(65043);var i=s(67907),o=s(72711),a=s(70579);function r(e){let{entityCode:t,newEntityName:s,popUpContents:r}=e;return(0,a.jsx)(i.TranslationConsumer,{children:e=>(0,a.jsx)("div",{className:"headerContainer",children:(0,a.jsxs)("div",{className:"row headerSpacing",children:[(0,a.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,a.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(s):t})}),""!==t&&void 0!==t&&r.length>0?(0,a.jsx)("div",{className:"headerItemRight",children:(0,a.jsx)(o.Popup,{element:(0,a.jsxs)("div",{children:[e(r[0].fieldName)+" ",":"," "+r[0].fieldValue,(0,a.jsx)(o.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,a.jsx)(o.List,{className:"detailsHeaderPopUp",children:r.map((t=>(0,a.jsxs)(o.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}r.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const l=r},9256:(e,t,s)=>{s.d(t,{q:()=>r});s(65043);var i=s(72711),o=s(67907),a=s(70579);function r(e){let{handleBack:t,handleSave:s,handleReset:r,saveEnabled:l}=e;return(0,a.jsx)(o.TranslationConsumer,{children:e=>(0,a.jsxs)("div",{className:"row userActionPosition",children:[(0,a.jsx)("div",{className:"col-12 col-md-3 col-lg-4",children:(0,a.jsx)(i.Button,{className:"backButton",onClick:t,content:e("Back")})}),(0,a.jsx)("div",{className:"col-12 col-md-9 col-lg-8",children:(0,a.jsxs)("div",{style:{float:"right"},children:[(0,a.jsx)(i.Button,{content:e("LookUpData_btnReset"),className:"cancelButton",onClick:r}),(0,a.jsx)(i.Button,{content:e("Save"),disabled:!l,onClick:s})]})})]})})}r.defaultProps={saveEnabled:!1}},85800:(e,t,s)=>{s.d(t,{n:()=>n});s(65043);var i=s(72711),o=s(67907),a=s(7523),r=s(35861),l=s(70579);function n(e){let{selectedAttributeList:t,handleCellDataEdit:s,attributeValidationErrors:n}=e;const c=e=>{if("0000-00-00"===e.DefaultValue)return d(e,new Date),new Date;var t=e.DefaultValue.split("-");return new Date(t[0],t[1]-1,t[2])},d=(e,t)=>{var i=new Date(t);t=i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2),s(e,t)};return(0,l.jsx)(o.TranslationConsumer,{children:e=>(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-md-12 attributeDetails-wrap",children:(0,l.jsx)("div",{className:"row",children:t.map((t=>t.DataType.toLowerCase()===a.pe.STRING.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(i.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(n[t.Code]),reserveSpace:!1})}):t.DataType.toLowerCase()!==a.pe.INT.toLowerCase()&&t.DataType.toLowerCase()!==a.pe.LONG.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()!==a.pe.FLOAT.toLowerCase()&&t.DataType.toLowerCase()!==a.pe.DOUBLE.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()===a.pe.BOOL.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(i.Checkbox,{className:"deviceCheckBox customDeviceCheckBox",label:e(t.DisplayName),checked:null===t.DefaultValue?"":"true"===t.DefaultValue.toString().toLowerCase(),disabled:!0===t.IsReadonly,onChange:e=>s(t,e)})}):t.DataType.toLowerCase()===a.pe.DATETIME.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(i.DatePicker,{fluid:!0,value:null===t.DefaultValue||""===t.DefaultValue?"":c(t),label:e(t.DisplayName),displayFormat:(0,r.F1)(),showYearSelector:"true",indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>d(t,e),onTextChange:e=>{d(t,e)},error:e(n[t.Code]),reserveSpace:!1})}):null:(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(i.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue||""===t.DefaultValue?"":t.DefaultValue.toLocaleString(),indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(n[t.Code]),reserveSpace:!1})}):(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(i.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(n[t.Code]),reserveSpace:!1})})))})})})})}},15417:(e,t,s)=>{s.d(t,{$7:()=>L,AN:()=>se,AU:()=>N,Ak:()=>We,Ao:()=>i,B6:()=>J,C4:()=>Fe,CG:()=>Z,Ct:()=>Q,Cw:()=>k,EY:()=>y,G$:()=>Je,G6:()=>ze,GF:()=>Ce,GJ:()=>w,Gj:()=>he,Gl:()=>ae,H9:()=>Ke,HB:()=>Se,HP:()=>f,Hr:()=>ye,II:()=>ot,IQ:()=>T,Jr:()=>U,Jx:()=>me,Ki:()=>te,LP:()=>oe,Lv:()=>a,MK:()=>E,MX:()=>ee,Mx:()=>q,N4:()=>xe,NH:()=>ge,OF:()=>$e,Ps:()=>H,Q7:()=>Qe,QY:()=>F,SF:()=>r,Sq:()=>Ie,Sw:()=>le,TQ:()=>X,U7:()=>S,UH:()=>p,UO:()=>re,V_:()=>be,Vy:()=>Ve,W9:()=>ce,WN:()=>m,Wr:()=>o,Ww:()=>z,XP:()=>Re,Xk:()=>K,Yb:()=>Ae,Yy:()=>D,Z2:()=>we,ZN:()=>O,ZO:()=>Pe,Zu:()=>Ue,_G:()=>B,_N:()=>h,_u:()=>de,ad:()=>ne,al:()=>Te,ao:()=>V,bK:()=>W,bN:()=>g,cf:()=>M,dO:()=>Le,dU:()=>C,dv:()=>l,eE:()=>Y,g:()=>I,gG:()=>n,gS:()=>Ne,gT:()=>st,gW:()=>$,gZ:()=>Xe,go:()=>R,gp:()=>G,hq:()=>Me,i6:()=>et,ip:()=>ue,k9:()=>v,kI:()=>P,l4:()=>ke,l5:()=>A,lA:()=>x,lU:()=>Ze,mD:()=>Ge,mY:()=>j,mq:()=>c,n$:()=>it,n7:()=>u,nZ:()=>Oe,rA:()=>je,s$:()=>He,s8:()=>_e,se:()=>Ee,tA:()=>fe,vK:()=>tt,vs:()=>pe,w2:()=>Ye,w4:()=>ve,wT:()=>d,wY:()=>b,wf:()=>De,wk:()=>ie,xW:()=>_,yM:()=>Be,yO:()=>qe});const i="driver",o="carriercompany",a="shareholder",r="baseProduct",l="TRAILER",n="TRAILERCOMPARTMENT",c="terminal",d="customer",h="destination",u="finishedproduct",C="tank",D="marine_vessel",v="marine_trailercompartment",p="supplier",E="vehicle",g="vehicletrailer",m="originterminal",T="bay",P="loadingArm",A="cardreader",I="vehicleprimemover",f="meter",y="SHIPMENT",S="SHIPMENTCOMPARTMENT",N="SHIPMENTDESTINATIONCOMPARTMENT",R="SHIPMENTDETAILS",b="SHIPMENTTRAILERWEIGHBRIDGE",L="SHIPMENTTRAILER",O="SHIPMENTSTATUSTIME",M="MARINEDISPATCH",x="MARINEDISPATCHCOMPARTMENTDETAIL",w="railwagon",k="primemover",j="bcu",F="RAILRECEIPTPLAN",H="RAILRECEIPTWAGONDETAILPLAN",V="RAILUNLOADINGDETAILSFP",G="RAILUNLOADINGDETAILSBP",_="RAILUNLOADINGDETAILSADDITIVE",U="RAILDISPATCHPLAN",W="RAILDISPATCHITEM",B="RAILDISPATCHSTATUSCHANGE",q="RAILDISPATCHWAGON",Q="RAILDISPATCHWAGONDETAILPLAN",K="RAILDISPATCHWAGONWEIGHBRIDGE",J="RAILDISPATCHWAGONCOMPARTMENT",Y="RAILLOADINGDETAILSFP",Z="RAILLOADINGDETAILSBP",$="RAILLOADINGDETAILSADDITIVE",z="marineReceipt",X="UNACCOUNTEDMETERTRANSACTION",ee="UNACCOUNTEDTANKTRANSACTION",te="marineLoadingDetailsFP",se="marineLoadingDetailsAdditive",ie="marineLoadingDetailsBP",oe="marineReceiptCompartmentDetail",ae="marineUnloadingDetailsFP",re="marineUnloadingDetailsBP",le="accessCard",ne="LOADINGDETAILSFP",ce="LOADINGDETAILSBP",de="LOADINGDETAILSADDITIVE",he="MARINERECEIPTSTATUSTIME",ue="MARINEDISPATCHSTATUSTIME",Ce="RECEIPT",De="UNLOADINGTRANSACTIONS",ve="ORDER",pe="ORDERITEM",Ee="CONTRACT",ge="CONTRACT_ITEM",me="RECEIPTORIGINTERMINALCOMPARTMENT",Te="GeneralTMUser_CAPTAIN",Pe="weighbridge",Ae="deu",Ie="GeneralTMUser_STAFF",fe="GeneralTMUser_VISITOR",ye="PIPELINEHEADER",Se="SEALMASTER",Ne="PIPELINERECEIPT",Re="ROADSHIPMENTSLOTINFO",be="ROADRECEIPTSLOTINFO",Le="MARINESHIPMENTSLOTINFO",Oe="MARINERECEIPTSLOTINFO",Me="PIPELINEDISPATCH",xe="PIPELINETRANSACTIONS",we="PIPELINEDISPATCHSTATUSTIME",ke="PIPELINERECEIPTSTATUSTIME",je="PROCESSCONFIG",Fe="PRODUCTALLOCATIONITEM",He="HSEINSPECTIONSHIPMENTRIGIDTRUCK",Ve="HSEINSPECTIONSHIPMENTTRAILER",Ge="HSEINSPECTIONSHIPMENTPRIMEMOVER",_e="HSEINSPECTIONSHIPMENTNONFILLINGVEHICLE",Ue="HSEINSPECTIONMARINESHIPMENTBARGE",We="HSEINSPECTIONMARINESHIPMENTSHIP",Be="HSEINSPECTIONSHIPMENTRAILWAGON",qe="HSEINSPECTIONSHIPMENTPIPELINE",Qe="HSEINSPECTIONRECEIPTRIGIDTRUCK",Ke="HSEINSPECTIONRECEIPTTRAILER",Je="HSEINSPECTIONRECEIPTPRIMEMOVER",Ye="HSEINSPECTIONRECEIPTNONFILLINGVEHICLE",Ze="HSEINSPECTIONMARINERECEIPTBARGE",$e="HSEINSPECTIONMARINERECEIPTSHIP",ze="HSEINSPECTIONRECEIPTRAILWAGON",Xe="HSEINSPECTIONRECEIPTPIPELINE",et="SHAREHOLDERAGREEMENT",tt="COATEMPLATE",st="COAMANAGEMENT",it="COACUSTOMER",ot="COAASSIGNMENT"},35861:(e,t,s)=>{s.d(t,{F1:()=>l,i7:()=>n,r4:()=>r});var i=s(86178),o=s.n(i),a=(s(15660),s(65043),s(70579));function r(e,t){if(Array.isArray(e)){0===e.filter((e=>e.text===t)).length&&e.unshift({value:null,text:t})}return e}function l(){let e=window.navigator.userLanguage||window.navigator.language;return o().locale(e),o().localeData().longDateFormat("L")}function n(e){return(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:e}),(0,a.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]})}}}]);
//# sourceMappingURL=9108.1bbeb0ef.chunk.js.map