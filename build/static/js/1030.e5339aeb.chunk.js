"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[1030,9158,6001,6777,8382,735,3116,4629,3920,3235,5973,8354],{40510:(e,t,i)=>{i.d(t,{A:()=>n});var a=i(65043),r=i(80297),l=i(65187),s=i(67907),o=i(70579);function n(e){let{KPIList:t,pageName:i,rowHeight:n,widgetHeight:d,isDraggable:c,isResizable:h,kpiDisplayTopBreakpoint:u}=e;const[m,p]=(0,a.useState)(1),T=a.useRef(null),C=()=>{let e=window.pageYOffset,t=m;if(T.current&&T.current.getBoundingClientRect().top<u)t=0;else{if(0!==e)return;t=1}p(t)};return(0,a.useEffect)((()=>{"undefined"!==typeof window&&window.addEventListener("scroll",C)})),(0,a.useEffect)((()=>()=>{window.removeEventListener("scroll",C)}),[]),(0,o.jsx)("div",{ref:T,children:1===m?(0,o.jsx)(s.TranslationConsumer,{children:e=>(0,o.jsx)("div",{style:{marginTop:"6px"},children:(0,o.jsx)(l.A,{children:(0,o.jsx)(r.A,{kpiList:t,isDraggable:c,isResizable:h,rowHeight:n,widgetHeight:d,pageName:i})})})}):""})}n.defaultProps={kpiDisplayTopBreakpoint:100}},91030:(e,t,i)=>{i.r(t),i.d(t,{default:()=>M});var a=i(65043),r=i(69062),l=i(44192),s=i(97508),o=i(40854),n=i.n(o),d=i(65187),c=i(43503),h=i(80312),u=i(9256),m=i(93779),p=i(72067),T=i(7523),C=i(53536),g=i.n(C),E=i(72711),A=i(67907),D=i(96935),b=i(78374),R=i(85800),I=i(70579);function N(e){let{rigidTruck:t,modRigidTruck:i,validationErrors:a,onFieldChange:r,onDateTextChange:l,onAllTerminalsChange:s,onActiveStatusChange:o,onCarrierChange:n,selectedCompRow:c,listOptions:h,handleAddCompartment:u,handleCellDataEdit:m,handleDeleteCompartment:p,handleRowSelectionChange:C,isEnterpriseNode:g,modVehicleAttributeMetaDataList:N,vehicleAttributeValidationErrors:v,onVehicleAttributeDataChange:y,modVehicleTrailerAttributeMetaDataList:L,vehicleTrailerAttributeValidationErrors:f,onVehicleTrailerAttributeDataChange:x,handleCompAttributeCellDataEdit:S,toggleExpand:V,expandedRows:O,compartmentDetailsPageSize:k,modTrailerAttributeMetaDataList:M,trailerAttributeValidationErrors:j,onTrailerAttributeDataChange:P,isBonded:w,hazardousEnabled:H}=e;const U=(e,t)=>{let i=[];return i=e.find((e=>e.TerminalCode===t)),i.attributeValidationErrors},[_]=(0,A.useTranslation)(),F=e=>{let t=i.VehicleTrailers[0].Trailer.Compartments[e.rowIndex][e.field];return"Capacity"===e.field&&null!==t&&""!==t&&(t=t.toLocaleString()),(0,I.jsx)(E.Input,{fluid:!0,value:t,onChange:t=>m(t,e),reserveSpace:!1,disabled:"Code"===e.field})},W=e=>{const t=e.rowData,i=e=>{var t=e.split("-");return new Date(t[0],t[1]-1,t[2])},a=(e,t)=>{var i=new Date(t);t=i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2),S(e,t)};try{return t.DataType.toLowerCase()===T.pe.STRING.toLowerCase()||t.DataType.toLowerCase()===T.pe.INT.toLowerCase()?(0,I.jsx)(E.Input,{fluid:!0,value:t.AttributeValue,disabled:t.IsReadonly,onChange:t=>S(e,t),reserveSpace:!1}):t.DataType.toLowerCase()===T.pe.FLOAT.toLowerCase()||t.DataType.toLowerCase()===T.pe.LONG.toLowerCase()||t.DataType.toLowerCase()===T.pe.DOUBLE.toLowerCase()?(0,I.jsx)(E.Input,{fluid:!0,value:null===t.AttributeValue||void 0===t.AttributeValue||""===t.AttributeValue?"":t.AttributeValue.toLocaleString(),disabled:t.IsReadonly,onChange:t=>S(e,t),reserveSpace:!1}):t.DataType.toLowerCase()===T.pe.BOOL.toLowerCase()?(0,I.jsx)(E.Checkbox,{checked:"true"===t.AttributeValue.toString().toLowerCase(),disabled:t.IsReadonly,onChange:t=>S(e,t)}):t.DataType.toLowerCase()===T.pe.DATETIME.toLowerCase()?(0,I.jsx)(E.DatePicker,{fluid:!0,value:null===t.AttributeValue||void 0===t.AttributeValue||""===t.AttributeValue?"":i(t.AttributeValue),disabled:t.IsReadonly,showYearSelector:"true",onChange:t=>{a(e,t)},onTextChange:t=>{a(e,t)},reserveSpace:!1}):null}catch(r){console.log("TrailerDetails:Error occured on handleAttributeType",r)}},B=e=>e.rowData.IsMandatory?(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{children:e.rowData.AttributeName}),(0,I.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]}):(0,I.jsx)("div",{children:(0,I.jsx)("span",{children:e.rowData.AttributeName})});return(0,I.jsxs)("div",{className:"detailsContainer",children:[(0,I.jsxs)("div",{className:"row",children:[(0,I.jsx)(D.A,{data:t,modData:i,onFieldChange:r,onDateTextChange:l,listOptions:h,validationErrors:a,onAllTerminalsChange:s,onCarrierChange:n,onActiveStatusChange:o,isEnterpriseNode:g,attributeValidationErrors:v,modAttributeMetaDataList:N,onAttributeDataChange:y,isBonded:w,hazardousEnabled:H,children:(0,I.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,I.jsx)(E.Select,{fluid:!0,placeholder:_("Common_Select"),label:_("Vehicle_LoadingType"),value:i.VehicleTrailers[0].Trailer.LoadingType,options:h.loadingType,onChange:e=>{r("LoadingType",e)},indicator:"required",error:_(a.LoadingType),reserveSpace:!1,search:!0,noResultsMessage:_("noResultsMessage")})})}),M.length>0?(0,I.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,I.jsx)(E.Accordion,{children:(0,I.jsx)(E.Accordion.Content,{className:"attributeAccordian",title:_("TRAILER_Attributes"),children:M.length>0?M.map((e=>(0,I.jsx)(d.A,{children:(0,I.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,I.jsx)(E.Accordion,{children:(0,I.jsx)(E.Accordion.Content,{className:"attributeAccordian",title:g?e.TerminalCode+" - "+_("Attributes_Header"):_("Attributes_Header"),children:(0,I.jsx)(R.n,{selectedAttributeList:e.attributeMetaDataList,handleCellDataEdit:P,attributeValidationErrors:U(j,e.TerminalCode)})})})})}))):null})})}):null,L.length>0?(0,I.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,I.jsx)(E.Accordion,{children:(0,I.jsx)(E.Accordion.Content,{className:"attributeAccordian",title:_("VEHICLETRAILER_Attributes"),children:L.length>0?L.map((e=>(0,I.jsx)(d.A,{children:(0,I.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,I.jsx)(E.Accordion,{children:(0,I.jsx)(E.Accordion.Content,{className:"attributeAccordian",title:g?e.TerminalCode+" - "+_("Attributes_Header"):_("Attributes_Header"),children:(0,I.jsx)(R.n,{selectedAttributeList:e.attributeMetaDataList,handleCellDataEdit:x,attributeValidationErrors:U(f,e.TerminalCode)})})})})}))):null})})}):null]}),(0,I.jsxs)("div",{className:"row compartmentRow",children:[(0,I.jsx)("div",{className:"col col-md-8 col-lg-9 col col-xl-9",children:(0,I.jsx)("h4",{children:_("Trailer_CompartmentInfo")})}),(0,I.jsx)("div",{className:"col col-md-4 col-lg-3 col-xl-3",children:(0,I.jsxs)("div",{className:"compartmentIconContainer",children:[(0,I.jsxs)("div",{onClick:u,className:"compartmentIcon",children:[(0,I.jsx)("div",{children:(0,I.jsx)(E.Icon,{root:"common",name:"badge-plus",size:"medium"})}),(0,I.jsx)("div",{className:"margin_l10",children:(0,I.jsx)("h5",{className:"font14",children:_("TrailerInfo_Add")})})]}),(0,I.jsxs)("div",{onClick:p,className:"compartmentIcon margin_l30",children:[(0,I.jsx)("div",{children:(0,I.jsx)(E.Icon,{root:"common",name:"delete",size:"medium"})}),(0,I.jsx)("div",{className:"margin_l10",children:(0,I.jsx)("h5",{className:"font14",children:_("TrailerInfo_Delete")})})]})]})})]}),(0,I.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,I.jsx)("div",{className:"col-12 detailsTable havingchildTable",children:(0,I.jsxs)(b.bQ,{data:i.VehicleTrailers[0].Trailer.Compartments,rowExpansionTemplate:function(e){return Array.isArray(e.AttributesforUI)&&e.AttributesforUI.length>0?(0,I.jsx)("div",{className:"childTable",children:(0,I.jsxs)(b.bQ,{data:e.AttributesforUI,row:1,rows:k,children:[g?(0,I.jsx)(b.bQ.Column,{className:"compColHeight",field:"TerminalCode",header:_("CompartmentTerminal"),editable:!1},"TerminalCode"):"",(0,I.jsx)(b.bQ.Column,{className:"compColHeight",header:_("CompartmentAttributeName"),renderer:B,editable:!1},"AttributeName"),(0,I.jsx)(b.bQ.Column,{className:"compColHeight",header:_("CompartmentAttributeValue"),renderer:W}),(0,I.jsx)(b.bQ.Pagination,{})]})}):(0,I.jsx)("div",{className:"compartmentIcon",children:(0,I.jsx)("div",{className:"gridButtonAlignLeft",children:_("CustomerInventory_NoRecordsFound")})})},expandedRows:O,selectionMode:"multiple",selection:c,onSelectionChange:C,scrollable:!0,scrollHeight:"320px",children:[(0,I.jsx)(b.bQ.Column,{className:"compColHeight disabledColumn colminWidth",field:"Code",header:_("Trailer_CompCode"),editFieldType:"text"},"Code"),(0,I.jsx)(b.bQ.Column,{className:"compColHeight colminWidth",field:"Description",header:_("Trailer_Desc"),editable:!0,editFieldType:"text",customEditRenderer:F},"Description"),(0,I.jsx)(b.bQ.Column,{className:"compColHeight colminWidth",field:"Capacity",header:_("Trailer_CompCapacity"),editable:!0,editFieldType:"text",renderer:e=>null===e.value?"":e.value.toLocaleString(),customEditRenderer:F},"Capacity"),(0,I.jsx)(b.bQ.Column,{className:"compColHeight colminWidth",field:"UOM",header:_("Trailer_UOM"),editable:!0,editFieldType:"text",customEditRenderer:e=>{let t=[...h.unitOfVolume,...h.unitOfWeight];return(0,I.jsx)(E.Select,{className:"selectDropwdown",placeholder:_("Common_Select"),value:i.VehicleTrailers[0].Trailer.Compartments[e.rowIndex][e.field],fluid:!0,options:t,onChange:t=>m(t,e),indicator:"required",reserveSpace:!1,search:!0,noResultsMessage:_("noResultsMessage")})}},"UOM"),(0,I.jsx)(b.bQ.Column,{className:"expandedColumn",initialWidth:"200px",renderer:e=>{const t=O.findIndex((t=>t.CompartmentSeqNoInTrailer===e.rowData.CompartmentSeqNoInTrailer))>=0;return(0,I.jsxs)("div",{onClick:()=>V(e.rowData,t),className:"compartmentIcon gridButtonFontColor",children:[(0,I.jsx)("span",{children:_(t?"Hide_Attributes":"View_Attributes")}),(0,I.jsx)(E.Icon,{root:"common",name:t?"caret-up":"caret-down",className:"margin_l10"})]})}})]})})})]})}N.defaultProps={listOptions:{carriers:[],productType:[],loadingType:[],unitOfWeight:[],unitOfVolume:[],unitOfDimension:[],terminalCodes:[],hazardousTankerCategoryOptions:[]},isEnterpriseNode:!1,hazardousEnabled:!1};var v=i(28882),y=i(46100),L=i(40252),f=i(15417),x=i(97105),S=i(39424),V=i(40510),O=i(62900);class k extends a.Component{constructor(){var e;super(...arguments),e=this,this.state={rigidTruck:{},modRigidTruck:{},validationErrors:r.Th(l.X6),isReadyToRender:!1,carrierOptions:[],terminalOptions:[],volumeUOMOptions:[],weightUOMOptions:[],lengthUOMOptions:[],productTypeOptions:[],loadingTypeOptions:[],saveEnabled:!1,selectedCompRow:[],attributeMetaDataList:[],modVehicleAttributeMetaDataList:[],modVehicleTrailerAttributeMetaDataList:[],modTrailerAttributeMetaDataList:[],vehicleAttributeValidationErrors:[],vehicleTrailerAttributeValidationErrors:[],trailerAttributeValidationErrors:[],expandedRows:[],isBonded:!1,vehicleKPIList:[],hazardousEnabled:!1,hazardousTankerCategoryOptions:[],maxNumberOfCompartments:12,showAuthenticationLayout:!1,tempVehicle:{}},this.handleCarrierChange=e=>{if(this.props.userDetails.EntityResult.IsEnterpriseNode)this.getTerminalsForCarrier(e);else{const t=g().cloneDeep(this.state.modRigidTruck);t.CarrierCompanyCode=e;const i=[];t.TerminalCodes=[],this.setState({terminalOptions:i,modRigidTruck:t})}if(void 0!==l.X6.CarrierCompanyCode){const t={...this.state.validationErrors};t.CarrierCompanyCode=r.jr(l.X6.CarrierCompanyCode,e),this.setState({validationErrors:t})}},this.handleActiveStatusChange=e=>{try{let t=g().cloneDeep(this.state.modRigidTruck);t.Active=e,t.Active!==this.state.rigidTruck.Active&&(t.Remarks=""),this.setState({modRigidTruck:t})}catch(t){console.log("RigidTruckDetailsComposite:Error occured in handleActiveStatusChange",t)}},this.handleChange=(e,t)=>{let i=g().cloneDeep(this.state.modRigidTruck);try{"LoadingType"===e?(i.VehicleTrailers[0].Trailer.LoadingType=t,this.setState({modRigidTruck:i})):i[e]=t;const a={...this.state.validationErrors};i.Active===this.state.rigidTruck.Active&&(this.state.rigidTruck.Remarks!==i.Remarks&&""!==i.Remarks||this.state.rigidTruck.IsBonded===i.IsBonded&&this.state.isBonded&&(a.Remarks=""),""===i.Remarks&&(i.Remarks=this.state.rigidTruck.Remarks)),"IsBonded"===e&&(i.VehicleCustomsBondNo=null,i.BondExpiryDate=null,a.VehicleCustomsBondNo="",a.BondExpiryDate=""),"RoadTaxNo"!==e&&"RoadTaxNoIssueDate"!==e&&"RoadTaxNoExpiryDate"!==e||(a.RoadTaxNo="",a.RoadTaxNoIssueDate="",a.RoadTaxNoExpiryDate=""),"Height"!==e&&"Length"!==e&&"Width"!==e&&"LWHUOM"!==e||(a.LWHUOM=""),void 0!==l.X6[e]&&(a[e]=r.jr(l.X6[e],t)),this.setState({validationErrors:a,modRigidTruck:i},(()=>{"TerminalCodes"===e&&this.terminalSelectionChange(t)}))}catch(a){console.log("RigidTruckDetailsComposite:Error occured on handleChange",a)}},this.toggleExpand=function(t,i){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.state.expandedRows,l=r.findIndex((e=>e.CompartmentSeqNoInTrailer===t.CompartmentSeqNoInTrailer));i?a&&l>=0?(r.splice(l,1),r.push(t)):l>=0&&r.splice(l,1):l>=0?r=r.filter((e=>e.Code!==t.Code&&e.CompartmentSeqNoInTrailer!==t.CompartmentSeqNoInTrailer)):r.push(t),e.setState({expandedRows:r})},this.handleCompAttributeCellDataEdit=(e,t)=>{var i=g().cloneDeep(this.state.modRigidTruck);let a=i.VehicleTrailers[0].Trailer.Compartments.findIndex((t=>t.CompartmentSeqNoInTrailer===e.rowData.compSequenceNo));a>=0&&(i.VehicleTrailers[0].Trailer.Compartments[a].AttributesforUI[e.rowData.SeqNumber-1].AttributeValue=t),this.setState({modRigidTruck:i}),a>=0&&this.toggleExpand(i.VehicleTrailers[0].Trailer.Compartments[a],!0,!0)},this.handleReset=()=>{try{if(this.setState({modRigidTruck:g().cloneDeep(this.state.rigidTruck),modVehicleAttributeMetaDataList:[],modVehicleTrailerAttributeMetaDataList:[],modTrailerAttributeMetaDataList:[]},(()=>{this.props.userDetails.EntityResult.IsEnterpriseNode?(this.terminalSelectionChange(this.state.modRigidTruck.TerminalCodes),this.handleResetAttributeValidationError()):(this.localNodeAttribute(),this.handleResetAttributeValidationError())})),""===this.state.rigidTruck.Code){let e=[];this.setState({terminalOptions:e})}let e={...this.state.validationErrors};Object.keys(e).forEach((t=>{e[t]=""})),this.setState({validationErrors:e})}catch(e){console.log("RigidTruckDetailsComposite:Error occured on handleReset",e)}},this.handleAddCompartment=()=>{if(!this.props.userDetails.EntityResult.IsArchived)try{let e={Attributes:[],Capacity:null,Code:null,CompartmentSeqNoInTrailer:0,TrailerCode:null,ShareholderCode:null,CarrierCompanyCode:null,Description:"",FRUOM:null,FlangeNo:null,MaxFR:null,Name:"",NoofSeals:null,UOM:null},t=g().cloneDeep(this.state.modRigidTruck);if(null!==t.VehicleTrailers[0].Trailer.Compartments){t.VehicleTrailers[0].Trailer.Compartments.length>0&&(e.UOM=t.VehicleTrailers[0].Trailer.Compartments[0].UOM);let i=1;t.VehicleTrailers[0].Trailer.Compartments.forEach((e=>{e.CompartmentSeqNoInTrailer=i,++i})),e.CompartmentSeqNoInTrailer=t.VehicleTrailers[0].Trailer.Compartments.length+1,t.VehicleTrailers[0].Trailer.Compartments.push(e)}this.setState({modRigidTruck:t,selectedCompRow:[]},(()=>{if(!1===this.props.userDetails.EntityResult.IsEnterpriseNode){var e=g().cloneDeep(this.state.attributeMetaDataList.TRAILERCOMPARTMENT);e.length>0&&this.formCompartmentAttributes([e[0].TerminalCode])}else this.formCompartmentAttributes(t.TerminalCodes)}))}catch(e){console.log("RigidTruckDetailsComposite:Error occured on handleAddCompartment",e)}},this.handleDeleteCompartment=()=>{if(!this.props.userDetails.EntityResult.IsArchived)try{if(null!=this.state.selectedCompRow&&this.state.selectedCompRow.length>0&&this.state.modRigidTruck.VehicleTrailers[0].Trailer.Compartments.length>0){let e=g().cloneDeep(this.state.modRigidTruck);this.state.selectedCompRow.forEach(((t,i)=>{e.VehicleTrailers[0].Trailer.Compartments=e.VehicleTrailers[0].Trailer.Compartments.filter(((e,i)=>e.CompartmentSeqNoInTrailer!==t.CompartmentSeqNoInTrailer))}));let t=1;e.VehicleTrailers[0].Trailer.Compartments.forEach((e=>{e.CompartmentSeqNoInTrailer=t,++t})),this.setState({modRigidTruck:e})}this.setState({selectedCompRow:[]})}catch(e){console.log("RigidtruckDetailsComposite:Error occured on handleDeleteCompartment",e)}},this.handleRowSelectionChange=e=>{this.setState({selectedCompRow:e})},this.handleCellDataEdit=(e,t)=>{let i=g().cloneDeep(this.state.modRigidTruck);"Description"===t.field&&(i.VehicleTrailers[0].Trailer.Compartments[t.rowIndex][t.field]=e),"Capacity"===t.field&&(isNaN(parseInt(e))&&(e=""),i.VehicleTrailers[0].Trailer.Compartments[t.rowIndex][t.field]=e),"UOM"===t.field&&i.VehicleTrailers[0].Trailer.Compartments.forEach((t=>{t.UOM=e})),this.toggleExpand(i.VehicleTrailers[0].Trailer.Compartments[t.rowIndex],!0,!0),this.setState({modRigidTruck:i})},this.handleAllTerminalsChange=e=>{try{let t=g().cloneDeep(this.state.modRigidTruck),i=[...this.state.terminalOptions];t.TerminalCodes=e?i:[],this.setState({modRigidTruck:t},(()=>{this.terminalSelectionChange(t.TerminalCodes)}))}catch(t){console.log("RigidTruckDetailsComposite:Error occured on handleAllTerminalsChange",t)}},this.saveVehicle=()=>{try{this.setState({saveEnabled:!1});let e=g().cloneDeep(this.state.tempVehicle);""===this.state.rigidTruck.Code?this.createVehicle(e):this.updateVehicle(e)}catch(e){console.log("RigidTruckDetailsComposite : Error in saveVehicle")}},this.handleSave=()=>{try{if(Object.values(this.state.validationErrors).every((function(e){return""===e}))){let e=this.fillDetails(),t=[],i=r.pI(this.state.modVehicleAttributeMetaDataList),a=r.pI(this.state.modVehicleTrailerAttributeMetaDataList),l=r.pI(this.state.modTrailerAttributeMetaDataList);if(t.push({vehilceAttributeList:i}),t.push({vehicleTrailerAttributeList:a}),t.push({trailerAttributeList:l}),this.validateSave(e,t)){e=this.convertStringtoDecimal(e,t),e=r.pC(x.S.Vehicle,e);let i=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,a=g().cloneDeep(e);this.setState({showAuthenticationLayout:i,tempVehicle:a},(()=>{!1===i&&this.saveVehicle()}))}else this.setState({saveEnabled:!0})}}catch(e){console.log("RigidTruck DetailsComposite:Error occured on handleSave",e)}},this.handleDateTextChange=(e,t,i)=>{try{let a={...this.state.validationErrors},r=g().cloneDeep(this.state.modRigidTruck);a[e]=i,r[e]=t,this.setState({validationErrors:a,modRigidTruck:r})}catch(i){console.log("RigidTruckDetailsComposite:Error occured on handleDateTextChange",i)}},this.handleVehicleAttributeDataChange=(e,t)=>{try{let i=[],a=g().cloneDeep(this.state.modVehicleAttributeMetaDataList),l=a.filter((t=>t.TerminalCode===e.TerminalCode));l.length>0&&Array.isArray(l[0].attributeMetaDataList)&&(i=l[0].attributeMetaDataList.filter((t=>t.Code===e.Code))),i.length>0&&(i[0].DefaultValue=t);const s=g().cloneDeep(this.state.vehicleAttributeValidationErrors);s.forEach((i=>{i.TerminalCode===e.TerminalCode&&(i.attributeValidationErrors[e.Code]=r.I5(e,t))})),this.setState({vehicleAttributeValidationErrors:s,modVehicleAttributeMetaDataList:a})}catch(i){console.log("RigidTruckDetailsComposite:Error occured on handleVehicleAttributeDataChange",i)}},this.handleVehicleTrailerAttributeDataChange=(e,t)=>{try{let i=[],a=g().cloneDeep(this.state.modVehicleTrailerAttributeMetaDataList),l=a.filter((t=>t.TerminalCode===e.TerminalCode));l.length>0&&Array.isArray(l[0].attributeMetaDataList)&&(i=l[0].attributeMetaDataList.filter((t=>t.Code===e.Code))),i.length>0&&(i[0].DefaultValue=t);const s=g().cloneDeep(this.state.vehicleTrailerAttributeValidationErrors);s.forEach((i=>{i.TerminalCode===e.TerminalCode&&(i.attributeValidationErrors[e.Code]=r.I5(e,t))})),this.setState({vehicleTrailerAttributeValidationErrors:s,modVehicleTrailerAttributeMetaDataList:a})}catch(i){console.log("RigidTruckDetailsComposite:Error occured on handleVehicleTrailerAttributeDataChange",i)}},this.handleTrailerAttributeDataChange=(e,t)=>{try{let i=[],a=g().cloneDeep(this.state.modTrailerAttributeMetaDataList),l=a.filter((t=>t.TerminalCode===e.TerminalCode));l.length>0&&Array.isArray(l[0].attributeMetaDataList)&&(i=l[0].attributeMetaDataList.filter((t=>t.Code===e.Code))),i.length>0&&(i[0].DefaultValue=t);const s=g().cloneDeep(this.state.trailerAttributeValidationErrors);s.forEach((i=>{i.TerminalCode===e.TerminalCode&&(i.attributeValidationErrors[e.Code]=r.I5(e,t))})),this.setState({trailerAttributeValidationErrors:s,modTrailerAttributeMetaDataList:a})}catch(i){console.log("RigidTruckDetailsComposite:Error occured on handleTrailerAttributeDataChange",i)}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})}}componentDidMount(){try{r.pJ(this.props.userDetails.EntityResult.IsArchived);let e=!1;void 0===this.props.selectedRow.Common_Code&&(e=!0),this.getHazardousLookup(),this.getAttributes(e),this.getCarrierList(this.props.selectedShareholder),this.getUOMList(),this.getProductTypes(),this.getLoadingTypes(),this.IsBonded()}catch(e){console.log("RigidTruckDetailsComposite:Error occured on componentDidMount",e)}}getHazardousLookup(){try{n()(p.xAA+"?LookUpTypeCode=HazardousMaterial",r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess&&t.EntityResult.RoadEnabled&&"true"===t.EntityResult.RoadEnabled.toLowerCase()&&(this.setState({hazardousEnabled:!0}),this.getHazardousCategories())})),n()(p.xAA+"?LookUpTypeCode=VirtualPreset",r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess&&(isNaN(parseInt(t.EntityResult.RoadMaximumNumberOfCompartments))||this.setState({maxNumberOfCompartments:parseInt(t.EntityResult.RoadMaximumNumberOfCompartments)}))}))}catch(e){console.log("RigidTruckDetailsComposite:Error occured on getHazardousLookup",e)}}getHazardousCategories(){n()(p.H20,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=r.Zj(t.EntityResult);this.setState({hazardousTankerCategoryOptions:e})}}else console.log("Error in getHazardousCategories:",t.ErrorList)}))}catch(e){console.log("RigidTruckDetailsComposite:Error occured on getHazardousCategories",e)}getLoadingTypes(){n()(p.zVP,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=r.Zj(t.EntityResult);this.setState({loadingTypeOptions:e})}}else console.log("Error in getLoadingTypes:",t.ErrorList)})).catch((e=>{console.log("Error while getting getLoadingTypes:",e)}))}IsBonded(){n()(p.xAA+"?LookUpTypeCode=Bonding",r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;if(!0===t.IsSuccess){let e=t.EntityResult["EnableBondingNon-Bonding"];this.setState({isBonded:"TRUE"===e.toUpperCase()})}else this.setState({isBonded:!1}),console.log("Error in get IsBonded: ",t.ErrorList)})).catch((e=>{this.setState({isBonded:!1}),console.log("SealMasterDetailsComposite: Error occurred on get IsBonded",e)}))}getProductTypes(){n()(p.YG_,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=r.Zj(t.EntityResult);this.setState({productTypeOptions:e})}}else console.log("Error in getProductTypes:",t.ErrorList)})).catch((e=>{console.log("Error while getting getProductTypes:",e)}))}getUOMList(){n()(p.WFM,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult){let e=t.EntityResult.MASS,i=[];e.forEach((e=>{i.push({text:e,value:e})}));let a=t.EntityResult.VOLUME,r=[];a.forEach((e=>{r.push({text:e,value:e})}));let l=t.EntityResult.LENGTH,s=[];l.forEach((e=>{s.push({text:e,value:e})})),this.setState({volumeUOMOptions:r,weightUOMOptions:i,lengthUOMOptions:s})}}else console.log("Error in getUOM:",t.ErrorList)})).catch((e=>{console.log("Error while getting getUOM:",e)}))}getCarrierList(e){n()(p.Xj6+"?ShareholderCode="+e+"&Transportationtype="+T.LY.ROAD,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=r.Zj(t.EntityResult);this.setState({carrierOptions:e})}}else console.log("Error while getting Carrier List:",t.ErrorList)})).catch((e=>{console.log("Error while getting Carrier List:",e)}))}componentWillReceiveProps(e){try{if(""!==this.state.rigidTruck.Code&&void 0===e.selectedRow.Common_Code&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo){this.getRigidTruck(!0);let e={...this.state.validationErrors};Object.keys(e).forEach((t=>{e[t]=""})),this.setState({validationErrors:e})}}catch(t){console.log("RigidTruckDetailsComposite:Error occured on componentWillReceiveProps",t)}}getAttributes(e){try{n()(p.fKH,r.tW([f.MK,f.bN,f.dv,f.gG],this.props.tokenDetails.tokenInfo)).then((t=>{var i=t.data;!0===i.IsSuccess?this.setState({attributeMetaDataList:g().cloneDeep(i.EntityResult),vehicleAttributeValidationErrors:r.Fl(i.EntityResult.vehicle),vehicleTrailerAttributeValidationErrors:r.Fl(i.EntityResult.vehicletrailer),trailerAttributeValidationErrors:r.Fl(i.EntityResult.TRAILER)},(()=>this.getRigidTruck(e))):console.log("Error in getAttributes:")}))}catch(t){console.log("Error while getAttributes:",t)}}terminalSelectionChange(e){try{if(void 0!==e&&null!==e){let l=[];var t=[],i=[];t=g().cloneDeep(this.state.attributeMetaDataList),i=g().cloneDeep(this.state.modVehicleAttributeMetaDataList);const s=g().cloneDeep(this.state.vehicleAttributeValidationErrors);var a=g().cloneDeep(this.state.modRigidTruck);e.forEach((e=>{var r=i.find((t=>t.TerminalCode===e));void 0===r?t.vehicle.forEach((function(t){if(t.TerminalCode===e){var i=a.Attributes.find((t=>t.TerminalCode===e));void 0!==i&&t.attributeMetaDataList.forEach((function(e){var t=i.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),l.push(t)}})):l.push(r)})),i=[],i=l,i=r.nQ(i),s.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.formCompartmentAttributes(e),this.setState({modVehicleAttributeMetaDataList:i,vehicleAttributeValidationErrors:s}),this.setVehicleTrailerAttributes(e)}}catch(l){console.log("RigidTruckDetailsComposite:Error occured on terminalSelectionChange",l)}}setVehicleTrailerAttributes(e){try{let l=[];var t=[],i=[];t=g().cloneDeep(this.state.attributeMetaDataList),i=g().cloneDeep(this.state.modVehicleTrailerAttributeMetaDataList);const s=g().cloneDeep(this.state.vehicleTrailerAttributeValidationErrors);var a=g().cloneDeep(this.state.modRigidTruck);e.forEach((e=>{var r=i.find((t=>t.TerminalCode===e));void 0===r?t.vehicletrailer.forEach((function(t){if(t.TerminalCode===e){var i=a.VehicleTrailers[0].Attributes.find((t=>t.TerminalCode===e));void 0!==i&&t.attributeMetaDataList.forEach((function(e){var t=i.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),l.push(t)}})):l.push(r)})),i=[],i=l,i=r.nQ(i),s.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.setState({modVehicleTrailerAttributeMetaDataList:i,vehicleTrailerAttributeValidationErrors:s}),this.setTrailerAttributes(e)}catch(l){console.log("RigidTruckDetailsComposite:Error occured on setVehicleTrailerAttributes",l)}}setTrailerAttributes(e){try{let l=[];var t=[],i=[];t=g().cloneDeep(this.state.attributeMetaDataList),i=g().cloneDeep(this.state.modTrailerAttributeMetaDataList);const s=g().cloneDeep(this.state.trailerAttributeValidationErrors);var a=g().cloneDeep(this.state.modRigidTruck);e.forEach((e=>{var r=i.find((t=>t.TerminalCode===e));void 0===r?t.TRAILER.forEach((function(t){if(t.TerminalCode===e){var i=a.VehicleTrailers[0].Trailer.Attributes.find((t=>t.TerminalCode===e));void 0!==i&&t.attributeMetaDataList.forEach((function(e){var t=i.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),l.push(t)}})):l.push(r)})),i=[],i=l,i=r.nQ(i),s.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.setState({modTrailerAttributeMetaDataList:i,trailerAttributeValidationErrors:s})}catch(l){console.log("RigidTruckDetailsComposite:Error occured on setTrailerAttributes",l)}}formCompartmentAttributes(e){try{let i=g().cloneDeep(this.state.attributeMetaDataList);i=i.TRAILERCOMPARTMENT.filter((function(t){return e.some((function(e){return t.TerminalCode===e}))}));var t=g().cloneDeep(this.state.modRigidTruck);let a=[];i.forEach((e=>{e.attributeMetaDataList.forEach((e=>{a.push({AttributeCode:e.Code,AttributeName:e.DisplayName,AttributeValue:e.DefaultValue,TerminalCode:e.TerminalCode,IsMandatory:e.IsMandatory,DataType:e.DataType,IsReadonly:e.IsReadonly,MinValue:e.MinValue,MaxValue:e.MaxValue,ValidationFormat:e.ValidationFormat,compSequenceNo:""})}))}));let l=g().cloneDeep(a);t.VehicleTrailers[0].Trailer.Compartments.forEach((t=>{if(null!==t.Code||null!==t.AttributesforUI&&void 0!==t.AttributesforUI){null!==t.AttributesforUI&&void 0!==t.AttributesforUI?(t.AttributesforUI=t.AttributesforUI.filter((function(t){return e.some((function(e){return t.TerminalCode===e}))})),a=a.filter((function(e){return!t.AttributesforUI.some((function(t){return e.TerminalCode===t.TerminalCode}))}))):t.AttributesforUI=[];let i=g().cloneDeep(a);if(Array.isArray(t.Attributes)&&null!==t.Attributes&&void 0!==t.Attributes&&t.Attributes.length>0){t.Attributes.filter((function(t){return e.some((function(e){return t.TerminalCode===e}))})).forEach((e=>{e.ListOfAttributeData.forEach((t=>{let a=i.findIndex((i=>i.TerminalCode===e.TerminalCode&&i.AttributeCode===t.AttributeCode));a>=0&&(i[a].AttributeValue=t.AttributeValue)}))})),i.forEach((e=>{e.compSequenceNo=t.CompartmentSeqNoInTrailer,t.AttributesforUI.push(e)}))}else a.forEach((e=>{e.compSequenceNo=t.CompartmentSeqNoInTrailer,t.AttributesforUI.push(e)}))}else t.AttributesforUI=[],l.forEach((e=>{e.compSequenceNo=t.CompartmentSeqNoInTrailer,t.AttributesforUI.push(e)}));this.toggleExpand(t,!0,!0),void 0!==t.AttributesforUI&&null!=t.AttributesforUI&&(t.AttributesforUI=r.vt(t.AttributesforUI)),t.AttributesforUI=r.Q3(t.AttributesforUI)})),this.setState({modRigidTruck:t})}catch(i){console.log("RigidTruckDetailsComposite:Error in forming Compartment Attributes",i)}}localNodeAttribute(){try{var e=g().cloneDeep(this.state.attributeMetaDataList);Array.isArray(e.vehicle)&&e.vehicle.length>0?this.terminalSelectionChange([e.vehicle[0].TerminalCode]):Array.isArray(e.TRAILERCOMPARTMENT)&&e.TRAILERCOMPARTMENT.length>0&&this.formCompartmentAttributes([e.TRAILERCOMPARTMENT[0].TerminalCode])}catch(t){console.log("RigidTruckDetailsComposite:Error occured on localNodeAttribute",t)}}getRigidTruck(e){if(e){let e=[];return y.Ut.WeightUOM=this.props.userDetails.EntityResult.PageAttibutes.DefaultUOMS.MassUOM,void this.setState({rigidTruck:g().cloneDeep(y.Ut),modRigidTruck:g().cloneDeep(y.Ut),isReadyToRender:!0,terminalOptions:e,modVehicleAttributeMetaDataList:[],modVehicleTrailerAttributeMetaDataList:[],modTrailerAttributeMetaDataList:[],vehicleKPIList:[],saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,h.i.add,h.PE)},(()=>{this.props.userDetails.EntityResult.IsEnterpriseNode?this.terminalSelectionChange([]):this.localNodeAttribute()}))}let t=[{key:m.ok,value:void 0===this.props.selectedRow.Common_Code?this.state.modRigidTruck.Code:this.props.selectedRow.Common_Code}],i={ShareHolderCode:this.props.selectedShareholder,keyDataCode:m.ok,KeyCodes:t};n()(p.jvS,r.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;!0===t.IsSuccess?(null!==t.EntityResult&&(console.log("result.EntityResult",t.EntityResult),t.EntityResult.MaxLoadableWeight=t.EntityResult.MaxLoadableWeight+t.EntityResult.TareWeight,null!==t.EntityResult.VehicleTrailers[0].Trailer.Compartments&&t.EntityResult.VehicleTrailers[0].Trailer.Compartments.length>0&&(t.EntityResult.VehicleTrailers[0].Trailer.Compartments=t.EntityResult.VehicleTrailers[0].Trailer.Compartments.sort(((e,t)=>e.CompartmentSeqNoInTrailer-t.CompartmentSeqNoInTrailer)))),this.setState({isReadyToRender:!0,rigidTruck:g().cloneDeep(t.EntityResult),modRigidTruck:g().cloneDeep(t.EntityResult),saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,h.i.modify,h.PE)},(()=>{this.getTerminalsForCarrier(t.EntityResult.CarrierCompanyCode),this.getKPIList(this.props.selectedShareholder,t.EntityResult.Code),this.props.userDetails.EntityResult.IsEnterpriseNode?this.terminalSelectionChange(t.EntityResult.TerminalCodes):this.localNodeAttribute()}))):(y.Ut.ShareholderCode=this.props.selectedShareholder,this.setState({modRigidTruck:g().cloneDeep(y.Ut),rigidTruck:g().cloneDeep(y.Ut),isReadyToRender:!0}),console.log("Error in GetVehicle:",t.ErrorList))})).catch((e=>{console.log("Error while getting Vehicle:",e)}))}getTerminalsForCarrier(e){if(this.props.userDetails.EntityResult.IsEnterpriseNode){const i=g().cloneDeep(this.state.modRigidTruck);let a=[...this.state.terminalOptions];i.CarrierCompanyCode=e;try{if(void 0===e)return a=[],i.TerminalCodes=[],void this.setState({terminalOptions:a,modRigidTruck:i},(()=>{this.formCompartmentAttributes([])}));let t=[{key:m._n,value:e},{key:m.v6,value:T.LY.ROAD}],l={ShareHolderCode:this.props.selectedShareholder,keyDataCode:m._n,KeyCodes:t};n()(p.pm$,r.tW(l,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;!0===t.IsSuccess&&null!==t.EntityResult&&null!==t.EntityResult.TerminalCodes?(a=[...t.EntityResult.TerminalCodes],this.setState({terminalOptions:a})):(a=[],this.setState({terminalOptions:a}),console.log("Error in GetCarrier:",t.ErrorList));let r={...this.state.rigidTruck};void 0!==r.Code&&""!==r.Code&&null!==r.Code||(1===a.length?i.TerminalCodes=[...a]:i.TerminalCodes=[]),Array.isArray(i.TerminalCodes)&&(i.TerminalCodes=a.filter((e=>i.TerminalCodes.includes(e)))),this.setState({modRigidTruck:i},(()=>{this.terminalSelectionChange(i.TerminalCodes)}))})).catch((t=>{a=[],i.TerminalCodes=[],this.setState({terminalOptions:a,modRigidTruck:i}),console.log("Error while getting Carrier:",t,e)}))}catch(t){a=[],i.TerminalCodes=[],this.setState({terminalOptions:a,modRigidTruck:i}),console.log("RigidTruckDetailsComposite:Error occured on handleCarrierChange",t)}}else{const t=g().cloneDeep(this.state.modRigidTruck);t.CarrierCompanyCode=e;const i=[];this.setState({terminalOptions:i,modRigidTruck:t})}}handleResetAttributeValidationError(){try{var e=g().cloneDeep(this.state.attributeMetaDataList);this.setState({vehicleAttributeValidationErrors:r.Fl(e.vehicle),vehicleTrailerAttributeValidationErrors:r.Fl(e.vehicletrailer),trailerAttributeValidationErrors:r.Fl(e.TRAILER)})}catch(t){console.log("handleAttributeValidationError:Error occured on handleReset",t)}}convertStringtoDecimal(e,t){try{return null!==e.Height&&""!==e.Height&&(e.Height=r.bo(e.Height)),null!==e.Length&&""!==e.Length&&(e.Length=r.bo(e.Length)),null!==e.Width&&""!==e.Width&&(e.Width=r.bo(e.Width)),e.TareWeight=r.bo(e.TareWeight),e.MaxLoadableWeight=parseFloat(r.bo(e.MaxLoadableWeight)-e.TareWeight),e.VehicleTrailers[0].Trailer.TareWeight=e.TareWeight,e.VehicleTrailers[0].Trailer.MaxLoadableWeight=e.MaxLoadableWeight,e.VehicleTrailers[0].Trailer.Compartments.forEach((e=>{e.Capacity=r.bo(e.Capacity)})),e=this.fillAttributeDetails(e,t)}catch(i){console.log("convertStringtoDecimal error rigidtruckdetails",i)}}fillDetails(){try{let t=g().cloneDeep(this.state.modRigidTruck);t.ShareholderCode=this.props.selectedShareholder,t.VehicleType=T.$O.RigidTruck,t.TransportationType=T.LY.ROAD,t.VehicleTrailers[0].Trailer.Compartments.forEach((e=>{e.TrailerCode=t.Code,e.ShareholderCode=t.ShareholderCode,e.CarrierCompanyCode=t.CarrierCompanyCode,null!==e.Capacity&&""!==e.Capacity&&(e.Capacity=e.Capacity.toLocaleString()),null!==e.Code&&""!==e.Code||(e.Code=r.d1(t.VehicleTrailers[0].Trailer.Compartments).toString()),void 0!==e.AttributesforUI&&null!=e.AttributesforUI&&(e.AttributesforUI=r.BZ(e.AttributesforUI))})),""===t.Height&&(t.Height=null),""===t.Length&&(t.Length=null),""===t.Width&&(t.Width=null),null!==t.TareWeight&&""!==t.TareWeight&&(t.TareWeight=t.TareWeight.toLocaleString()),null!==t.MaxLoadableWeight&&""!==t.MaxLoadableWeight&&(t.MaxLoadableWeight=t.MaxLoadableWeight.toLocaleString()),null!==t.Height&&""!==t.Height&&(t.Height=t.Height.toLocaleString()),null!==t.Length&&""!==t.Length&&(t.Length=t.Length.toLocaleString()),null!==t.Width&&""!==t.Width&&(t.Width=t.Width.toLocaleString());var e=new Date;return t.LicenseNoIssueDate=e.getUTCDate(),t.VehicleTrailers[0].TrailerCode=t.Code,t.VehicleTrailers[0].VehicleCode=t.Code,t.VehicleTrailers[0].ShareholderCode=t.ShareholderCode,t.VehicleTrailers[0].CarrierCompanyCode=t.CarrierCompanyCode,t.VehicleTrailers[0].TrailerSeq=1,t.VehicleTrailers[0].Trailer.Code=t.Code,t.VehicleTrailers[0].Trailer.Name=t.Name,t.VehicleTrailers[0].Trailer.ShareholderCode=t.ShareholderCode,t.VehicleTrailers[0].Trailer.TransportationType=T.LY.ROAD,t.VehicleTrailers[0].Trailer.CarrierCompanyCode=t.CarrierCompanyCode,t.VehicleTrailers[0].Trailer.TrailerType=T.YH.RIGID_TRAILER,t.VehicleTrailers[0].Trailer.ProductType=t.ProductType,t.VehicleTrailers[0].Trailer.WeightUOM=t.WeightUOM,t.VehicleTrailers[0].Trailer.Active=t.Active,t.VehicleTrailers[0].Trailer.HazardousCategory=t.HazardousCategory,t.VehicleTrailers[0].Trailer.HazardousLicenseExpiry=t.HazardousLicenseExpiry,t.VehicleTrailers[0].Trailer=r.pC(x.S.Trailer,t.VehicleTrailers[0].Trailer),t}catch(t){console.log("RigidTruckDetailsComposite:Error occured on fillDetails",t)}}fillAttributeDetails(e,t){try{let i=t.find((function(e){return void 0!==e.vehilceAttributeList})),a=t.find((function(e){return void 0!==e.vehicleTrailerAttributeList})),l=t.find((function(e){return void 0!==e.trailerAttributeList})),s=r.SC(i.vehilceAttributeList);e.Attributes=r.Gh(s);let o=r.SC(a.vehicleTrailerAttributeList);e.VehicleTrailers[0].Attributes=r.Gh(o);let n=r.SC(l.trailerAttributeList);return e.VehicleTrailers[0].Trailer.Attributes=r.Gh(n),e.VehicleTrailers[0].Trailer.Compartments.forEach((t=>{void 0!==t.AttributesforUI&&null!=t.AttributesforUI&&(t.AttributesforUI=r.mr(t.AttributesforUI));let i=[];if(this.props.userDetails.EntityResult.IsEnterpriseNode)i=g().cloneDeep(e.TerminalCodes);else{var a=g().cloneDeep(this.state.attributeMetaDataList.TRAILERCOMPARTMENT);a.length>0&&(i=[a[0].TerminalCode])}let l=[];t.Attributes=[],void 0!==i&&null!==i&&i.forEach((e=>{null!==t.AttributesforUI&&void 0!==t.AttributesforUI&&(l=t.AttributesforUI.filter((function(t){return t.TerminalCode===e})));let i={ListOfAttributeData:[]};i.TerminalCode=e,l.forEach((e=>{""===e.AttributeValue&&!0!==e.IsMandatory||i.ListOfAttributeData.push({AttributeCode:e.AttributeCode,AttributeValue:e.AttributeValue})})),null!==i.ListOfAttributeData&&void 0!==i.ListOfAttributeData&&i.ListOfAttributeData.length>0&&t.Attributes.push(i)}))})),e}catch(i){console.log("RigidTruckDetailsComposite:Error occured on fillAttributeDetails",i)}}validateSave(e,t){const i={...this.state.validationErrors};Object.keys(l.X6).forEach((function(t){void 0!==e[t]&&(i[t]=r.jr(l.X6[t],e[t]))})),e.Active!==this.state.rigidTruck.Active&&""===e.Remarks&&(i.Remarks="Vehicle_RemarksRequired"),this.state.isBonded&&e.IsBonded&&(""!==e.VehicleCustomsBondNo&&null!==e.VehicleCustomsBondNo||(i.VehicleCustomsBondNo="VehicleInfo_VehicleCustomsBondNoError"),""!==e.BondExpiryDate&&null!==e.BondExpiryDate||(i.BondExpiryDate="VehicleInfo_BondExpiryDateError"),e.IsBonded!==this.state.rigidTruck.IsBonded&&""!==this.state.rigidTruck.Code&&""===e.Remarks&&(i.Remarks="Vehicle_RemarksRequired")),(null===e.RoadTaxNo||""===e.RoadTaxNo)&&isNaN(Date.parse(e.RoadTaxNoIssueDate))&&isNaN(Date.parse(e.RoadTaxNoExpiryDate))||(null!==e.RoadTaxNo&&""!==e.RoadTaxNo||(i.RoadTaxNo="Vehicle_RoadTaxNoRequired"),isNaN(Date.parse(e.RoadTaxNoIssueDate))&&(i.RoadTaxNoIssueDate="Vehicle_RoadTaxIssRequired"),isNaN(Date.parse(e.RoadTaxNoExpiryDate))&&(i.RoadTaxNoExpiryDate="Vehicle_RoadTaxExpRequired"));let a={messageType:"critical",message:"VehicleInfo_SavedStatus",messageResultDetails:[]};null===e.Height&&null==e.Width&&null===e.Length||null!==e.LWHUOM||(i.LWHUOM="PrimeMover_UOMRequired");var s=g().cloneDeep(this.state.vehicleAttributeValidationErrors);t.find((function(e){return void 0!==e.vehilceAttributeList})).vehilceAttributeList.forEach((e=>{s.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=r.I5(e,e.DefaultValue)}))}))}));var o=g().cloneDeep(this.state.vehicleTrailerAttributeValidationErrors);t.find((function(e){return void 0!==e.vehicleTrailerAttributeList})).vehicleTrailerAttributeList.forEach((e=>{o.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=r.I5(e,e.DefaultValue)}))}))}));var n=g().cloneDeep(this.state.trailerAttributeValidationErrors);t.find((function(e){return void 0!==e.trailerAttributeList})).trailerAttributeList.forEach((e=>{n.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=r.I5(e,e.DefaultValue)}))}))})),this.setState({validationErrors:i,vehicleAttributeValidationErrors:s,vehicleTrailerAttributeValidationErrors:o,trailerAttributeValidationErrors:n});var d=!0;return s.forEach((e=>{if(!d)return d;d=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),d&&o.forEach((e=>{if(!d)return d;d=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),d?(d=Object.values(i).every((function(e){return""===e})),e.VehicleTrailers[0].Trailer.Compartments.length>0?e.VehicleTrailers[0].Trailer.Compartments.length<=this.state.maxNumberOfCompartments?e.VehicleTrailers[0].Trailer.Compartments.forEach((e=>{v.Ig.forEach((t=>{let i="";void 0!==t.validator&&(i=r.jr(t.validator,e[t.field])),""!==i&&a.messageResultDetails.push({keyFields:["Trailer_CompCode",t.displayName],keyValues:[e.Code,e[t.field]],isSuccess:!1,errorMessage:i})})),null!==e.AttributesforUI&&void 0!==e.AttributesforUI&&e.AttributesforUI.forEach((t=>{let i=r.I5(t,t.AttributeValue);""!==i&&(this.props.userDetails.EntityResult.IsEnterpriseNode?a.messageResultDetails.push({keyFields:["CompAttributeComp","CompAttributeTerminal",t.AttributeName],keyValues:[e.Code,t.TerminalCode,t.AttributeValue],isSuccess:!1,errorMessage:i}):a.messageResultDetails.push({keyFields:["CompAttributeComp",t.AttributeName],keyValues:[e.Code,t.AttributeValue],isSuccess:!1,errorMessage:i}))})),this.toggleExpand(e,!0,!0)})):a.messageResultDetails.push({keyFields:["Vehicle_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:"Compartment_limit_Exceeded"}):a.messageResultDetails.push({keyFields:["Vehicle_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:"TrailerInfo_CompartmentRequired"}),a.messageResultDetails.length>0?(this.props.onSaved(this.state.modRigidTruck,"update",a),!1):d):d}createVehicle(e){let t=[{key:m.ok,value:e.Code}],i={ShareHolderCode:this.props.selectedShareholder,keyDataCode:m.ok,KeyCodes:t,Entity:e},a={messageType:"critical",message:"VehicleInfo_SavedStatus",messageResultDetails:[{keyFields:["Vehicle_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:""}]};n()(p.h1s,r.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;a.messageType=t.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?(this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,h.i.modify,h.PE),showAuthenticationLayout:!1}),this.getRigidTruck(!1)):(a.messageResultDetails[0].errorMessage=t.ErrorList[0],this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,h.i.add,h.PE),showAuthenticationLayout:!1}),console.log("Error in CreateVehicle:",t.ErrorList)),this.props.onSaved(this.state.modRigidTruck,"add",a)})).catch((e=>{this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,h.i.add,h.PE),showAuthenticationLayout:!1}),a.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modRigidTruck,"add",a)}))}updateVehicle(e){let t=[{key:m.ok,value:e.Code}],i={ShareHolderCode:this.props.selectedShareholder,keyDataCode:m.ok,KeyCodes:t,Entity:e},a={messageType:"critical",message:"VehicleInfo_SavedStatus",messageResultDetails:[{keyFields:["Vehicle_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:""}]};n()(p.Kas,r.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;a.messageType=t.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?(this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,h.i.modify,h.PE),showAuthenticationLayout:!1}),this.getRigidTruck(!1)):(this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,h.i.modify,h.PE),showAuthenticationLayout:!1}),a.messageResultDetails[0].errorMessage=t.ErrorList[0],console.log("Error in UpdateVehicle:",t.ErrorList)),this.props.onSaved(this.state.modRigidTruck,"update",a)})).catch((e=>{a.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modRigidTruck,"modify",a),this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,h.i.modify,h.PE),showAuthenticationLayout:!1})}))}getKPIList(e,t){if(!0===r.ab(this.props.userDetails.EntityResult.FunctionsList,h.i.view,h.bL)){let i={PageName:S.c0,InputParameters:[{key:"ShareholderCode",value:e},{key:"VehicleCode",value:t}]};n()(p.dxq,r.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({vehicleKPIList:t.EntityResult.ListKPIDetails}):(this.setState({vehicleKPIList:[]}),console.log("Error in vehicle KPIList:",t.ErrorList))})).catch((e=>{console.log("Error while getting Vehicle KPIList:",e)}))}}render(){const e={carriers:this.state.carrierOptions,productType:this.state.productTypeOptions,loadingType:this.state.loadingTypeOptions,unitOfWeight:this.state.weightUOMOptions,unitOfVolume:this.state.volumeUOMOptions,unitOfDimension:this.state.lengthUOMOptions,terminalCodes:this.state.terminalOptions,hazardousTankerCategoryOptions:this.state.hazardousTankerCategoryOptions},t=[{fieldName:"Vehicle_LastUpdated",fieldValue:new Date(this.state.modRigidTruck.LastUpdateTime).toLocaleDateString()+" "+new Date(this.state.modRigidTruck.LastUpdateTime).toLocaleTimeString()},{fieldName:"Vehicle_LastActiveTime",fieldValue:void 0!==this.state.modRigidTruck.LastActiveTime&&null!==this.state.modRigidTruck.LastActiveTime?new Date(this.state.modRigidTruck.LastActiveTime).toLocaleDateString()+" "+new Date(this.state.modRigidTruck.LastActiveTime).toLocaleTimeString():""},{fieldName:"Vehicle_CreateTime",fieldValue:new Date(this.state.modRigidTruck.CreatedTime).toLocaleDateString()+" "+new Date(this.state.modRigidTruck.CreatedTime).toLocaleTimeString()}];return this.state.isReadyToRender?(0,I.jsxs)("div",{children:[(0,I.jsx)(d.A,{children:(0,I.jsx)(c.A,{entityCode:this.state.rigidTruck.Code,newEntityName:"RigidTruck_title",popUpContents:t})}),(0,I.jsx)(V.A,{KPIList:this.state.vehicleKPIList,children:" "}),(0,I.jsx)(d.A,{children:(0,I.jsx)(N,{rigidTruck:this.state.rigidTruck,modRigidTruck:this.state.modRigidTruck,validationErrors:this.state.validationErrors,listOptions:e,onFieldChange:this.handleChange,onDateTextChange:this.handleDateTextChange,onAllTerminalsChange:this.handleAllTerminalsChange,selectedCompRow:this.state.selectedCompRow,handleRowSelectionChange:this.handleRowSelectionChange,handleCellDataEdit:this.handleCellDataEdit,handleAddCompartment:this.handleAddCompartment,handleDeleteCompartment:this.handleDeleteCompartment,onCarrierChange:this.handleCarrierChange,onActiveStatusChange:this.handleActiveStatusChange,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,vehicleAttributeValidationErrors:this.state.vehicleAttributeValidationErrors,modVehicleAttributeMetaDataList:this.state.modVehicleAttributeMetaDataList,onVehicleAttributeDataChange:this.handleVehicleAttributeDataChange,vehicleTrailerAttributeValidationErrors:this.state.vehicleTrailerAttributeValidationErrors,modVehicleTrailerAttributeMetaDataList:this.state.modVehicleTrailerAttributeMetaDataList,onVehicleTrailerAttributeDataChange:this.handleVehicleTrailerAttributeDataChange,trailerAttributeValidationErrors:this.state.trailerAttributeValidationErrors,modTrailerAttributeMetaDataList:this.state.modTrailerAttributeMetaDataList,onTrailerAttributeDataChange:this.handleTrailerAttributeDataChange,expandedRows:this.state.expandedRows,compartmentDetailsPageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,toggleExpand:this.toggleExpand,handleCompAttributeCellDataEdit:this.handleCompAttributeCellDataEdit,isBonded:this.state.isBonded,hazardousEnabled:this.state.hazardousEnabled})}),(0,I.jsx)(d.A,{children:(0,I.jsx)(u.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.showAuthenticationLayout?(0,I.jsx)(O.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.rigidTruck.Code?h.i.add:h.i.modify,functionGroup:h.PE,handleOperation:this.saveVehicle,handleClose:this.handleAuthenticationClose}):null]}):(0,I.jsx)(L.A,{message:"Loading"})}}const M=(0,s.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(k)},24904:(e,t,i)=>{i.d(t,{y:()=>o});i(65043);var a=i(67907),r=i(72711),l=i(69062),s=i(70579);function o(e){let{terminalList:t,selectedTerminal:i,validationError:o,onFieldChange:n,onCheckChange:d}=e;return null===i&&(i=[]),(0,s.jsx)(a.TranslationConsumer,{children:e=>(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,s.jsx)("div",{style:{width:"80%"},children:(0,s.jsx)(r.Select,{fluid:!0,placeholder:e("Common_Select"),label:e("TerminalCodes"),value:i,multiple:!0,options:l.Zj(t),onChange:e=>n("TerminalCodes",e),error:e(o),disabled:0===t.length,reserveSpace:!1})}),(0,s.jsx)("div",{className:"ddlSelectAll",children:(0,s.jsx)(r.Checkbox,{label:e("Common_All"),checked:Array.isArray(i)&&i.length===t.length,onChange:e=>d(e)})})]})})}o.defaultProps={terminalList:[],selectedTerminal:[],validationError:""}},43503:(e,t,i)=>{i.d(t,{A:()=>o});i(65043);var a=i(67907),r=i(72711),l=i(70579);function s(e){let{entityCode:t,newEntityName:i,popUpContents:s}=e;return(0,l.jsx)(a.TranslationConsumer,{children:e=>(0,l.jsx)("div",{className:"headerContainer",children:(0,l.jsxs)("div",{className:"row headerSpacing",children:[(0,l.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,l.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(i):t})}),""!==t&&void 0!==t&&s.length>0?(0,l.jsx)("div",{className:"headerItemRight",children:(0,l.jsx)(r.Popup,{element:(0,l.jsxs)("div",{children:[e(s[0].fieldName)+" ",":"," "+s[0].fieldValue,(0,l.jsx)(r.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,l.jsx)(r.List,{className:"detailsHeaderPopUp",children:s.map((t=>(0,l.jsxs)(r.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}s.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const o=s},9256:(e,t,i)=>{i.d(t,{q:()=>s});i(65043);var a=i(72711),r=i(67907),l=i(70579);function s(e){let{handleBack:t,handleSave:i,handleReset:s,saveEnabled:o}=e;return(0,l.jsx)(r.TranslationConsumer,{children:e=>(0,l.jsxs)("div",{className:"row userActionPosition",children:[(0,l.jsx)("div",{className:"col-12 col-md-3 col-lg-4",children:(0,l.jsx)(a.Button,{className:"backButton",onClick:t,content:e("Back")})}),(0,l.jsx)("div",{className:"col-12 col-md-9 col-lg-8",children:(0,l.jsxs)("div",{style:{float:"right"},children:[(0,l.jsx)(a.Button,{content:e("LookUpData_btnReset"),className:"cancelButton",onClick:s}),(0,l.jsx)(a.Button,{content:e("Save"),disabled:!o,onClick:i})]})})]})})}s.defaultProps={saveEnabled:!1}},85800:(e,t,i)=>{i.d(t,{n:()=>n});i(65043);var a=i(72711),r=i(67907),l=i(7523),s=i(35861),o=i(70579);function n(e){let{selectedAttributeList:t,handleCellDataEdit:i,attributeValidationErrors:n}=e;const d=e=>{if("0000-00-00"===e.DefaultValue)return c(e,new Date),new Date;var t=e.DefaultValue.split("-");return new Date(t[0],t[1]-1,t[2])},c=(e,t)=>{var a=new Date(t);t=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2),i(e,t)};return(0,o.jsx)(r.TranslationConsumer,{children:e=>(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("div",{className:"col-md-12 attributeDetails-wrap",children:(0,o.jsx)("div",{className:"row",children:t.map((t=>t.DataType.toLowerCase()===l.pe.STRING.toLowerCase()&&!0===t.IsVisible?(0,o.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,o.jsx)(a.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>i(t,e),error:e(n[t.Code]),reserveSpace:!1})}):t.DataType.toLowerCase()!==l.pe.INT.toLowerCase()&&t.DataType.toLowerCase()!==l.pe.LONG.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()!==l.pe.FLOAT.toLowerCase()&&t.DataType.toLowerCase()!==l.pe.DOUBLE.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()===l.pe.BOOL.toLowerCase()&&!0===t.IsVisible?(0,o.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,o.jsx)(a.Checkbox,{className:"deviceCheckBox customDeviceCheckBox",label:e(t.DisplayName),checked:null===t.DefaultValue?"":"true"===t.DefaultValue.toString().toLowerCase(),disabled:!0===t.IsReadonly,onChange:e=>i(t,e)})}):t.DataType.toLowerCase()===l.pe.DATETIME.toLowerCase()&&!0===t.IsVisible?(0,o.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,o.jsx)(a.DatePicker,{fluid:!0,value:null===t.DefaultValue||""===t.DefaultValue?"":d(t),label:e(t.DisplayName),displayFormat:(0,s.F1)(),showYearSelector:"true",indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>c(t,e),onTextChange:e=>{c(t,e)},error:e(n[t.Code]),reserveSpace:!1})}):null:(0,o.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,o.jsx)(a.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue||""===t.DefaultValue?"":t.DefaultValue.toLocaleString(),indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>i(t,e),error:e(n[t.Code]),reserveSpace:!1})}):(0,o.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,o.jsx)(a.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>i(t,e),error:e(n[t.Code]),reserveSpace:!1})})))})})})})}},96935:(e,t,i)=>{i.d(t,{A:()=>u});i(65043);var a=i(72711),r=i(67907),l=i(24904),s=i(7523),o=i(35861),n=i(65187),d=i(85800),c=i(69062),h=i(70579);function u(e){let{data:t,modData:i,onFieldChange:u,validationErrors:m,listOptions:p,onDateTextChange:T,onAllTerminalsChange:C,onActiveStatusChange:g,onCarrierChange:E,children:A,isEnterpriseNode:D,modAttributeMetaDataList:b,attributeValidationErrors:R,onAttributeDataChange:I,isBonded:N,hazardousEnabled:v}=e;const y=(e,t)=>{let i=[];return i=e.find((e=>e.TerminalCode===t)),i.attributeValidationErrors},[L]=(0,r.useTranslation)();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.Input,{fluid:!0,value:i.Code,label:L("Vehicle_Code"),indicator:"required",disabled:""!==t.Code,onChange:e=>u("Code",e),error:L(m.Code),reserveSpace:!1})}),(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.Input,{fluid:!0,value:i.Name,label:L("Vehicle_Name"),indicator:"required",onChange:e=>u("Name",e),error:L(m.Name,{label:L("Vehicle_Name")}),reserveSpace:!1})}),(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.Input,{fluid:!0,value:null===i.Description?"":i.Description,label:L("Vehicle_Desc"),onChange:e=>u("Description",e),error:L(m.Description),reserveSpace:!1})}),(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("Vehicle_CarrierCompany"),value:i.CarrierCompanyCode,options:p.carriers,onChange:e=>{E(e)},indicator:"required",error:L(m.CarrierCompanyCode),reserveSpace:!1,disabled:""!==t.Code,search:!0,noResultsMessage:L("noResultsMessage")})}),i.VehicleType!==s.$O.NonFillingVehicle?(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("Vehicle_ProductType"),value:i.ProductType,options:p.productType,onChange:e=>{u("ProductType",e)},indicator:"required",error:L(m.ProductType),reserveSpace:!1,search:!0,noResultsMessage:L("noResultsMessage")})}):"",A,(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.Input,{fluid:!0,value:null===i.LicenseNo?"":i.LicenseNo,label:L("Vehicle_LicenseNo"),indicator:i.VehicleType!==s.$O.NonFillingVehicle?"required":"",onChange:e=>u("LicenseNo",e),error:L(m.LicenseNo),reserveSpace:!1})}),(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.DatePicker,{fluid:!0,value:null===i.LicenseNoExpiryDate?"":(0,c.OL)(i.LicenseNoExpiryDate),displayFormat:(0,o.F1)(),label:L("Vehicle_LicenseExpiry"),showYearSelector:"true",indicator:i.VehicleType!==s.$O.NonFillingVehicle||i.VehicleType===s.$O.NonFillingVehicle&&null!==i.LicenseNo&&""!==i.LicenseNo.trim()?"required":"",disablePast:!0,onChange:e=>u("LicenseNoExpiryDate",e),onTextChange:(e,t)=>{T("LicenseNoExpiryDate",e,t)},error:L(m.LicenseNoExpiryDate),reserveSpace:!1})}),(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.Input,{fluid:!0,value:null===i.RoadTaxNo?"":i.RoadTaxNo,label:L("Vehicle_RoadTaxNo"),indicator:null!==i.RoadTaxNo&&""!==i.RoadTaxNo.trim()||!isNaN(Date.parse(i.RoadTaxNoIssueDate))||!isNaN(Date.parse(i.RoadTaxNoExpiryDate))?"required":"",onChange:e=>u("RoadTaxNo",e),error:L(m.RoadTaxNo),reserveSpace:!1})}),(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.DatePicker,{fluid:!0,value:null===i.RoadTaxNoIssueDate?"":(0,c.OL)(i.RoadTaxNoIssueDate),displayFormat:(0,o.F1)(),label:L("Vehicle_RoadTaxIssue"),showYearSelector:"true",indicator:null!==i.RoadTaxNo&&""!==i.RoadTaxNo.trim()||!isNaN(Date.parse(i.RoadTaxNoIssueDate))||!isNaN(Date.parse(i.RoadTaxNoExpiryDate))?"required":"",onChange:e=>u("RoadTaxNoIssueDate",e),onTextChange:(e,t)=>{T("RoadTaxNoIssueDate",e,t)},error:L(m.RoadTaxNoIssueDate),reserveSpace:!1})}),(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.DatePicker,{fluid:!0,value:null===i.RoadTaxNoExpiryDate?"":(0,c.OL)(i.RoadTaxNoExpiryDate),displayFormat:(0,o.F1)(),label:L("Vehicle_RoadTaxExpiry"),showYearSelector:"true",indicator:null!==i.RoadTaxNo&&""!==i.RoadTaxNo.trim()||!isNaN(Date.parse(i.RoadTaxNoIssueDate))||!isNaN(Date.parse(i.RoadTaxNoExpiryDate))?"required":"",disablePast:!0,onChange:e=>u("RoadTaxNoExpiryDate",e),onTextChange:(e,t)=>{T("RoadTaxNoExpiryDate",e,t)},error:L(m.RoadTaxNoExpiryDate),reserveSpace:!1})}),(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.Input,{fluid:!0,value:null===i.Owner?"":i.Owner,label:L("Vehicle_owner"),onChange:e=>u("Owner",e),error:L(m.Owner),reserveSpace:!1})}),i.VehicleType!==s.$O.NonFillingVehicle?(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.Input,{fluid:!0,value:null===i.TareWeight?"":i.TareWeight.toLocaleString(),label:L("Vehicle_Tareweight"),indicator:i.VehicleType!==s.$O.RigidTruck?null:"required",onChange:e=>u("TareWeight",e),error:L(m.TareWeight,{label:L("Vehicle_Tareweight")}),disabled:i.VehicleType!==s.$O.RigidTruck,reserveSpace:!1})}):"",i.VehicleType!==s.$O.NonFillingVehicle?(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.Input,{fluid:!0,value:null===i.MaxLoadableWeight?"":i.MaxLoadableWeight.toLocaleString(),label:L("Vehicle_MaxLoadWeight"),indicator:i.VehicleType!==s.$O.RigidTruck?null:"required",onChange:e=>u("MaxLoadableWeight",e),error:L(m.MaxLoadableWeight,{label:L("Vehicle_MaxLoadWeight")}),disabled:i.VehicleType!==s.$O.RigidTruck,reserveSpace:!1})}):"",i.VehicleType!==s.$O.NonFillingVehicle?(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("Vehicle_UOMWeight"),value:i.WeightUOM,options:p.unitOfWeight,onChange:e=>{u("WeightUOM",e)},indicator:i.VehicleType!==s.$O.RigidTruck?null:"required",error:L(m.WeightUOM),reserveSpace:!1,search:!0,noResultsMessage:L("noResultsMessage"),disabled:i.VehicleType!==s.$O.RigidTruck})}):"",i.VehicleType!==s.$O.NonFillingVehicle?(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.Input,{fluid:!0,value:null===i.Height?"":i.Height.toLocaleString(),label:L("Vehicle_height"),onChange:e=>u("Height",e),error:L(m.Height,{label:L("Vehicle_height")}),reserveSpace:!1})}):"",i.VehicleType!==s.$O.NonFillingVehicle?(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.Input,{fluid:!0,value:null===i.Width?"":i.Width.toLocaleString(),label:L("Vehicle_Width"),onChange:e=>u("Width",e),error:L(m.Width,{label:L("Vehicle_Width")}),reserveSpace:!1})}):"",i.VehicleType!==s.$O.NonFillingVehicle?(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.Input,{fluid:!0,value:null===i.Length?"":i.Length.toLocaleString(),label:L("Vehicle_Length"),onChange:e=>u("Length",e),error:L(m.Length,{label:L("Vehicle_Length")}),reserveSpace:!1})}):"",i.VehicleType!==s.$O.NonFillingVehicle?(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("Vehicle_UOMDimemsion"),value:i.LWHUOM,options:(0,o.r4)(p.unitOfDimension,L("Common_Select")),onChange:e=>{u("LWHUOM",e)},error:L(m.LWHUOM),reserveSpace:!1,search:!0,noResultsMessage:L("noResultsMessage")})}):"",i.VehicleType!==s.$O.NonFillingVehicle?(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.Input,{fluid:!0,value:null===i.MaxLoadableVolume?"":i.MaxLoadableVolume.toLocaleString(),label:L("Vehicle_MaxLoadVolume"),onChange:e=>u("MaxLoadableVolume",e),error:L(m.MaxLoadableVolume),reserveSpace:!1,disabled:!0})}):"",i.VehicleType!==s.$O.NonFillingVehicle?(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("Vehicle_UOMVolume"),value:i.VolumeUOM,options:p.unitOfVolume,onChange:e=>{u("VolumeUOM",e)},error:L(m.VolumeUOM),reserveSpace:!1,disabled:!0})}):"",N&&i.VehicleType!==s.$O.NonFillingVehicle?(0,h.jsxs)("div",{className:"col-12 col-md-6 col-lg-4",children:[(0,h.jsxs)("div",{className:"ui single-input fluid disabled",style:{width:"30%",float:"left"},children:[(0,h.jsx)("div",{class:"ui input-label",children:(0,h.jsx)("span",{className:"input-label-message",children:L("VehicleInfo_Bonded")})}),(0,h.jsx)("div",{className:"input-wrap",children:(0,h.jsx)(a.Checkbox,{onChange:e=>u("IsBonded",e),checked:i.IsBonded})})]}),i.IsBonded&&i.VehicleType!==s.$O.NonFillingVehicle?(0,h.jsx)("div",{style:{width:"70%",float:"right"},children:(0,h.jsx)(a.Input,{fluid:!0,value:null===i.VehicleCustomsBondNo?"":i.VehicleCustomsBondNo,onChange:e=>u("VehicleCustomsBondNo",e),label:L("VehicleInfo_VehicleCustomsBondNo"),reserveSpace:!1,error:L(m.VehicleCustomsBondNo),indicator:i.IsBonded?"required":""})}):""]}):"",i.IsBonded&&i.VehicleType!==s.$O.NonFillingVehicle?(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.DatePicker,{fluid:!0,value:null===i.BondExpiryDate?"":(0,c.OL)(i.BondExpiryDate),displayFormat:(0,o.F1)(),label:L("VehicleInfo_BondExpiryDate"),showYearSelector:"true",indicator:i.IsBonded?"required":"",disablePast:!0,onChange:e=>u("BondExpiryDate",e),onTextChange:(e,t)=>{T("BondExpiryDate",e,t)},error:L(m.BondExpiryDate),reserveSpace:!1})}):"",v&&i.VehicleType===s.$O.RigidTruck?(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,h.jsx)("div",{style:{width:"48%"},children:(0,h.jsx)(a.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("FP_HazardousCategory"),value:null===i.HazardousCategory?"":i.HazardousCategory,options:(0,o.r4)(p.hazardousTankerCategoryOptions,L("Common_Select")),onChange:e=>u("HazardousCategory",e),reserveSpace:!1,search:!0,noResultsMessage:L("noResultsMessage"),error:L(m.HazardousCategory)})}),(0,h.jsx)("div",{style:{width:"48%"},children:(0,h.jsx)(a.DatePicker,{fluid:!0,value:null===i.HazardousLicenseExpiry?"":(0,c.OL)(i.HazardousLicenseExpiry),displayFormat:(0,o.F1)(),label:L("DriverInfo_HazardousLicExpiry"),disablePast:!0,showYearSelector:"true",onChange:e=>u("HazardousLicenseExpiry",e),onTextChange:(e,t)=>{T("HazardousLicenseExpiry",e,t)},error:L(m.HazardousLicenseExpiry),reserveSpace:!1})})]})}):"",(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("Vehicle_Status"),value:i.Active,options:[{text:L("ViewShipment_Ok"),value:!0},{text:L("ViewShipmentStatus_Inactive"),value:!1}],onChange:e=>g(e)})}),(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(a.Input,{fluid:!0,value:null===i.Remarks?"":i.Remarks,label:L("Vehicle_Remarks"),onChange:e=>u("Remarks",e),indicator:i.Active!==t.Active||""!==t.Code&&N&&i.IsBonded&&i.IsBonded!==t.IsBonded?"required":"",error:L(m.Remarks),reserveSpace:!1})}),D?(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(l.y,{terminalList:p.terminalCodes,selectedTerminal:i.TerminalCodes,error:L(m.TerminalCodes),onFieldChange:u,onCheckChange:C})}):"",i.VehicleType!==s.$O.NonFillingVehicle?(0,h.jsx)("div",{}):"",i.VehicleType===s.$O.NonFillingVehicle?b.length>0?b.map((e=>(0,h.jsx)(n.A,{children:(0,h.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,h.jsx)(a.Accordion,{children:(0,h.jsx)(a.Accordion.Content,{className:"attributeAccordian",title:D?e.TerminalCode+" - "+L("Attributes_Header"):L("Attributes_Header"),children:(0,h.jsx)(d.n,{selectedAttributeList:e.attributeMetaDataList,handleCellDataEdit:I,attributeValidationErrors:y(R,e.TerminalCode)})})})})}))):null:b.length>0?(0,h.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,h.jsx)(a.Accordion,{children:(0,h.jsx)(a.Accordion.Content,{className:"attributeAccordian",title:L("VEHICLE_Attributes"),children:b.length>0?b.map((e=>(0,h.jsx)(n.A,{children:(0,h.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,h.jsx)(a.Accordion,{children:(0,h.jsx)(a.Accordion.Content,{className:"attributeAccordian",title:D?e.TerminalCode+" - "+L("Attributes_Header"):L("Attributes_Header"),children:(0,h.jsx)(d.n,{selectedAttributeList:e.attributeMetaDataList,handleCellDataEdit:I,attributeValidationErrors:y(R,e.TerminalCode)})})})})}))):null})})}):null]})}u.defaultProps={listOptions:{carriers:[],productType:[],unitOfWeight:[],unitOfVolume:[],unitOfDimension:[],terminalCodes:[],hazardousTankerCategoryOptions:[]},isEnterpriseNode:!1,hazardousEnabled:!1}},15417:(e,t,i)=>{i.d(t,{$7:()=>S,AN:()=>ie,AU:()=>L,Ak:()=>Be,Ao:()=>a,B6:()=>K,C4:()=>we,CG:()=>Q,Ct:()=>z,Cw:()=>j,EY:()=>v,G$:()=>Ke,G6:()=>Je,GF:()=>me,GJ:()=>M,Gj:()=>he,Gl:()=>le,H9:()=>$e,HB:()=>ye,HP:()=>N,Hr:()=>ve,II:()=>rt,IQ:()=>D,Jr:()=>W,Jx:()=>Ae,Ki:()=>te,LP:()=>re,Lv:()=>l,MK:()=>g,MX:()=>ee,Mx:()=>G,N4:()=>ke,NH:()=>Ee,OF:()=>Ze,Ps:()=>H,Q7:()=>ze,QY:()=>w,SF:()=>s,Sq:()=>Ie,Sw:()=>oe,TQ:()=>X,U7:()=>y,UH:()=>C,UO:()=>se,V_:()=>xe,Vy:()=>Ue,W9:()=>de,WN:()=>A,Wr:()=>r,Ww:()=>J,XP:()=>fe,Xk:()=>$,Yb:()=>Re,Yy:()=>p,Z2:()=>Me,ZN:()=>V,ZO:()=>be,Zu:()=>We,_G:()=>q,_N:()=>h,_u:()=>ce,ad:()=>ne,al:()=>De,ao:()=>U,bK:()=>B,bN:()=>E,cf:()=>O,dO:()=>Se,dU:()=>m,dv:()=>o,eE:()=>Y,g:()=>I,gG:()=>n,gS:()=>Le,gT:()=>it,gW:()=>Z,gZ:()=>Xe,go:()=>f,gp:()=>_,hq:()=>Oe,i6:()=>et,ip:()=>ue,k9:()=>T,kI:()=>b,l4:()=>je,l5:()=>R,lA:()=>k,lU:()=>Qe,mD:()=>_e,mY:()=>P,mq:()=>d,n$:()=>at,n7:()=>u,nZ:()=>Ve,rA:()=>Pe,s$:()=>He,s8:()=>Fe,se:()=>ge,tA:()=>Ne,vK:()=>tt,vs:()=>Ce,w2:()=>Ye,w4:()=>Te,wT:()=>c,wY:()=>x,wf:()=>pe,wk:()=>ae,xW:()=>F,yM:()=>qe,yO:()=>Ge});const a="driver",r="carriercompany",l="shareholder",s="baseProduct",o="TRAILER",n="TRAILERCOMPARTMENT",d="terminal",c="customer",h="destination",u="finishedproduct",m="tank",p="marine_vessel",T="marine_trailercompartment",C="supplier",g="vehicle",E="vehicletrailer",A="originterminal",D="bay",b="loadingArm",R="cardreader",I="vehicleprimemover",N="meter",v="SHIPMENT",y="SHIPMENTCOMPARTMENT",L="SHIPMENTDESTINATIONCOMPARTMENT",f="SHIPMENTDETAILS",x="SHIPMENTTRAILERWEIGHBRIDGE",S="SHIPMENTTRAILER",V="SHIPMENTSTATUSTIME",O="MARINEDISPATCH",k="MARINEDISPATCHCOMPARTMENTDETAIL",M="railwagon",j="primemover",P="bcu",w="RAILRECEIPTPLAN",H="RAILRECEIPTWAGONDETAILPLAN",U="RAILUNLOADINGDETAILSFP",_="RAILUNLOADINGDETAILSBP",F="RAILUNLOADINGDETAILSADDITIVE",W="RAILDISPATCHPLAN",B="RAILDISPATCHITEM",q="RAILDISPATCHSTATUSCHANGE",G="RAILDISPATCHWAGON",z="RAILDISPATCHWAGONDETAILPLAN",$="RAILDISPATCHWAGONWEIGHBRIDGE",K="RAILDISPATCHWAGONCOMPARTMENT",Y="RAILLOADINGDETAILSFP",Q="RAILLOADINGDETAILSBP",Z="RAILLOADINGDETAILSADDITIVE",J="marineReceipt",X="UNACCOUNTEDMETERTRANSACTION",ee="UNACCOUNTEDTANKTRANSACTION",te="marineLoadingDetailsFP",ie="marineLoadingDetailsAdditive",ae="marineLoadingDetailsBP",re="marineReceiptCompartmentDetail",le="marineUnloadingDetailsFP",se="marineUnloadingDetailsBP",oe="accessCard",ne="LOADINGDETAILSFP",de="LOADINGDETAILSBP",ce="LOADINGDETAILSADDITIVE",he="MARINERECEIPTSTATUSTIME",ue="MARINEDISPATCHSTATUSTIME",me="RECEIPT",pe="UNLOADINGTRANSACTIONS",Te="ORDER",Ce="ORDERITEM",ge="CONTRACT",Ee="CONTRACT_ITEM",Ae="RECEIPTORIGINTERMINALCOMPARTMENT",De="GeneralTMUser_CAPTAIN",be="weighbridge",Re="deu",Ie="GeneralTMUser_STAFF",Ne="GeneralTMUser_VISITOR",ve="PIPELINEHEADER",ye="SEALMASTER",Le="PIPELINERECEIPT",fe="ROADSHIPMENTSLOTINFO",xe="ROADRECEIPTSLOTINFO",Se="MARINESHIPMENTSLOTINFO",Ve="MARINERECEIPTSLOTINFO",Oe="PIPELINEDISPATCH",ke="PIPELINETRANSACTIONS",Me="PIPELINEDISPATCHSTATUSTIME",je="PIPELINERECEIPTSTATUSTIME",Pe="PROCESSCONFIG",we="PRODUCTALLOCATIONITEM",He="HSEINSPECTIONSHIPMENTRIGIDTRUCK",Ue="HSEINSPECTIONSHIPMENTTRAILER",_e="HSEINSPECTIONSHIPMENTPRIMEMOVER",Fe="HSEINSPECTIONSHIPMENTNONFILLINGVEHICLE",We="HSEINSPECTIONMARINESHIPMENTBARGE",Be="HSEINSPECTIONMARINESHIPMENTSHIP",qe="HSEINSPECTIONSHIPMENTRAILWAGON",Ge="HSEINSPECTIONSHIPMENTPIPELINE",ze="HSEINSPECTIONRECEIPTRIGIDTRUCK",$e="HSEINSPECTIONRECEIPTTRAILER",Ke="HSEINSPECTIONRECEIPTPRIMEMOVER",Ye="HSEINSPECTIONRECEIPTNONFILLINGVEHICLE",Qe="HSEINSPECTIONMARINERECEIPTBARGE",Ze="HSEINSPECTIONMARINERECEIPTSHIP",Je="HSEINSPECTIONRECEIPTRAILWAGON",Xe="HSEINSPECTIONRECEIPTPIPELINE",et="SHAREHOLDERAGREEMENT",tt="COATEMPLATE",it="COAMANAGEMENT",at="COACUSTOMER",rt="COAASSIGNMENT"},97105:(e,t,i)=>{i.d(t,{S:()=>a});const a={Driver:["License1ExpiryDate","License1IssueDate","License2IssueDate","License2ExpiryDate","License3IssueDate","License3ExpiryDate","HazardousLicenseExpiry"],CarrierCompany:["PermitExpiryDate"],PrimeMover:["RoadTaxNoIssueDate","RoadTaxNoExpiryDate","licenseExpiryDate"],Wagon:["LicenseExpiryDate"],Vehicle:["LicenseNoIssueDate","LicenseNoExpiryDate","RoadTaxNoIssueDate","RoadTaxNoExpiryDate","Bondexpirydate","HazardousLicenseExpiry"],Contract:["StartDate","EndDate"],ContractItem:["StartDate","EndDate"],Order:["OrderStartDate","OrderEndDate","OrderDate","DeliveryDate"],AccessCard:["ExpiryDate","IssueDate","PasswordExpiryDate"],Trailer:["HazardousLicenseExpiry"]}},35861:(e,t,i)=>{i.d(t,{F1:()=>o,i7:()=>n,r4:()=>s});var a=i(86178),r=i.n(a),l=(i(15660),i(65043),i(70579));function s(e,t){if(Array.isArray(e)){0===e.filter((e=>e.text===t)).length&&e.unshift({value:null,text:t})}return e}function o(){let e=window.navigator.userLanguage||window.navigator.language;return r().locale(e),r().localeData().longDateFormat("L")}function n(e){return(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{children:e}),(0,l.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]})}}}]);
//# sourceMappingURL=1030.e5339aeb.chunk.js.map