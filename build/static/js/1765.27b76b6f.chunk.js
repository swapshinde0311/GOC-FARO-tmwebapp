"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[1765],{61765:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var a=s(65043),l=s(97508),o=s(69062),i=s(28882),n=s(65187),r=s(53536),d=s.n(r),c=s(40854),p=s.n(c),m=s(93779),h=s(72067),u=s(11981),C=s(14159),S=s(67907),g=s(72711),N=s(78374),y=s(70579);class x extends a.Component{constructor(){super(...arguments),this.state={sealCompartments:this.props.sealCompartments},this.updateSealCompartments=()=>{let e=d().cloneDeep(this.state.sealCompartments),t={messageType:"critical",message:"ViewAllReceipt_SealCompUpdate",messageResultDetails:[]};if(e.forEach((e=>{i.F1.forEach((s=>{let a="";void 0!==s.validator&&(a=o.jr(s.validator,e[s.field])),""!==a&&t.messageResultDetails.push({keyFields:["ShipmentCompDetail_CompSeqInVehicle",s.displayName],keyValues:[e.CompartmentSeqNoInVehicle,e[s.field]],isSuccess:!1,errorMessage:a})}))})),t.messageResultDetails.length>0)(0,C.toast)((0,y.jsx)(n.A,{children:(0,y.jsx)(u.A,{notificationMessage:t})}),{autoClose:"success"===t.messageType&&1e4});else{t.messageResultDetails.push({keyFields:["Receipt_Code"],keyValues:[this.props.transactionCode],isSuccess:!1,errorMessage:""});var s=[{key:m.FR,value:this.props.selectedShareholder},{key:m.ml,value:this.props.transactionCode}],a={ShareHolderCode:this.props.selectedShareholder,keyDataCode:m.ml,KeyCodes:s,Entity:this.state.sealCompartments};p()(h.yIB,o.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{var s=e.data;t.messageType=s.IsSuccess?"success":"critical",t.messageResultDetails[0].isSuccess=s.IsSuccess,t.messageResultDetails[0].errorMessage=s.ErrorList[0],(0,C.toast)((0,y.jsx)(n.A,{children:(0,y.jsx)(u.A,{notificationMessage:t})}),{autoClose:"success"===t.messageType&&1e4})})).catch((e=>{console.log("Error while update Receipt Seal Info:",e)}))}},this.handleSealNoInput=e=>{let t=e.rowData;return(0,y.jsx)(g.Input,{fluid:!0,value:t.SealNo,disabled:!1,onChange:e=>{let s=d().cloneDeep(this.state.sealCompartments),a=s.findIndex((e=>e.CompartmentSeqNoInVehicle===t.CompartmentSeqNoInVehicle));a>=0&&(s[a].SealNo=e),this.setState({sealCompartments:s})},reserveSpace:!1})}}getCustomtableData(e){const t=[];return e.forEach((e=>{t.push({SealNo:null===e.SealNo?"":e.SealNo,CompartmentSeqNoInVehicle:e.CompartmentSeqNoInVehicle,FinishedProductCode:null===e.FinishedProductCode?"":e.FinishedProductCode,ReceiptCompartmentStatus:null===e.ReceiptCompartmentStatus?"":e.ReceiptCompartmentStatus,UnLoadedQty:null===e.UnLoadedQuantity?"":e.UnLoadedQuantity+" "+e.UnLoadedQuantityUOM})})),t}isNodeEnterpriseOrWebortal(){return!(!this.props.userDetails.EntityResult.IsEnterpriseNode&&!this.props.userDetails.EntityResult.IsWebPortalUser)}render(){return(0,y.jsx)("div",{children:(0,y.jsx)(S.TranslationConsumer,{children:e=>(0,y.jsxs)(g.Modal,{open:!0,size:"large",className:"sealCompartmentsPopUp",children:[(0,y.jsxs)(g.Modal.Content,{children:[(0,y.jsx)("div",{className:"col col-lg-12",children:(0,y.jsx)("h3",{children:e("ViewAllReceipt_SealCompartment")+" : "+this.props.transactionCode})}),(0,y.jsx)("div",{className:"col-12 detailsTable",children:(0,y.jsxs)(N.bQ,{data:this.getCustomtableData(this.state.sealCompartments),children:[(0,y.jsx)(N.bQ.Column,{className:"compColHeight",field:"CompartmentSeqNoInVehicle",header:e("ViewShipment_CompartmentSeq"),editable:!1}),(0,y.jsx)(N.bQ.Column,{className:"compColHeight",field:"FinishedProductCode",header:e("ViewShipment_FinishedProductCode"),editable:!1}),(0,y.jsx)(N.bQ.Column,{className:"compColHeight",field:"ReceiptCompartmentStatus",header:e("ViewShipment_Status"),editable:!1}),(0,y.jsx)(N.bQ.Column,{className:"compColHeight",field:"UnLoadedQty",header:e("ViewReceiptList_LoadedQuantity"),editable:!1}),(0,y.jsx)(N.bQ.Column,{className:"compColHeight",field:"SealNo",header:e("SealMaster_SealNo"),renderer:e=>this.handleSealNoInput(e)})]})})]}),(0,y.jsxs)(g.Modal.Footer,{children:[(0,y.jsx)(g.Button,{content:e("MarineEOD_Close"),className:"cancelButton",onClick:this.props.handleSealClose}),(0,y.jsx)(g.Button,{type:"primary",content:e("SealMaster_Save"),disabled:this.isNodeEnterpriseOrWebortal(),onClick:this.updateSealCompartments})]})]})})})}}const b=(0,l.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(x)}}]);
//# sourceMappingURL=1765.27b76b6f.chunk.js.map