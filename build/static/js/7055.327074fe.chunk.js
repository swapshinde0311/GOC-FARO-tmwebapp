"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[7055],{97055:(e,t,i)=>{i.r(t),i.d(t,{default:()=>O});var s=i(65043),a=i(14271),r=i(31045),o=i(72711),l=i(78374),n=i(46100),h=i(69062),c=i(93779),d=i(7523),u=i(72067),p=i(53536),m=i.n(p),C=i(97508),v=i(40854),g=i.n(v),T=i(65187),y=i(44192),D=i(80312),b=i(96935),S=i(9256),V=i(43503),E=i(67907),x=i(40252),R=i(15417),L=i(85800),A=i(97105),f=i(62900),N=i(70579);let M=null,j=null,k=[],I=[];class P extends s.Component{constructor(){super(...arguments),this.state={isReadyToRender:!1,vehicle:{},modVehicle:{},validationErrors:h.Th(y.zA),carrierOptions:[],terminalOptions:[],volumeUOMOptions:[],weightUOMOptions:[],lengthUOMOptions:[],productTypeOptions:[],step1Active:void 0===this.props.selectedRow.Common_Code,step2Active:!1,step3Active:void 0!==this.props.selectedRow.Common_Code,tractorSelection:[],trailerSelection:[],attributeMetaDataList:[],modVehicleAttributeMetaDataList:[],vehicleAttributeValidationErrors:[],modVehiclePrimeMoversAttributeMetaDataList:[],vehiclePrimeMoversAttributeValidationErrors:[],modVehicleTrailerAttributeMetaDataList:[],vehicleTrailerAttributeValidationErrors:[],isBonded:!1,maxNumberOfCompartments:12,showAuthenticationLayout:!1,tempVehicle:{}},this.handleReset=()=>{try{if(this.setState({modVehicle:m().cloneDeep(this.state.vehicle),modVehicleAttributeMetaDataList:[],modVehiclePrimeMoversAttributeMetaDataList:[],modVehicleTrailerAttributeMetaDataList:[]},(()=>{this.props.userDetails.EntityResult.IsEnterpriseNode?(this.terminalSelectionChange(this.state.modVehicle.TerminalCodes),this.handleResetAttributeValidationError()):(this.localNodeAttribute(),this.handleResetAttributeValidationError())})),""===this.state.vehicle.Code){let e=[];this.setState({terminalOptions:e})}k=m().cloneDeep(this.state.vehicle.VehiclePrimeMovers),I=m().cloneDeep(this.state.vehicle.VehicleTrailers);let e={...this.state.validationErrors};Object.keys(e).forEach((t=>{e[t]=""})),this.setState({validationErrors:e})}catch(e){console.log("TractorWithTrailerDetailsComposite:Error occured on handleReset",e)}},this.handleCarrierChange=e=>{if(this.props.userDetails.EntityResult.IsEnterpriseNode)this.getTerminalsForCarrier(e);else{const t=m().cloneDeep(this.state.modVehicle);t.CarrierCompanyCode=e;const i=[];t.TerminalCodes=[],this.setState({terminalOptions:i,modVehicle:t})}if(void 0!==y.zA.CarrierCompanyCode){const t={...this.state.validationErrors};t.CarrierCompanyCode=h.jr(y.zA.CarrierCompanyCode,e),this.setState({validationErrors:t})}},this.handleActiveStatusChange=e=>{try{let t=m().cloneDeep(this.state.modVehicle);t.Active=e,t.Active!==this.state.vehicle.Active&&(t.Remarks=""),this.setState({modVehicle:t})}catch(t){console.log("TractorWithTrailerDetailsComposite:Error occured in handleActiveStatusChange",t)}},this.handleChange=(e,t)=>{let i=m().cloneDeep(this.state.modVehicle);try{i[e]=t;const s={...this.state.validationErrors};i.Active===this.state.vehicle.Active&&(this.state.vehicle.Remarks!==i.Remarks&&""!==i.Remarks||this.state.vehicle.IsBonded===i.IsBonded&&this.state.isBonded&&(s.Remarks=""),""===i.Remarks&&(i.Remarks=this.state.vehicle.Remarks)),"IsBonded"===e&&(i.VehicleCustomsBondNo=null,i.BondExpiryDate=null,s.VehicleCustomsBondNo="",s.BondExpiryDate=""),"RoadTaxNo"!==e&&"RoadTaxNoIssueDate"!==e&&"RoadTaxNoExpiryDate"!==e||(s.RoadTaxNo="",s.RoadTaxNoExpiryDate="",s.RoadTaxNoIssueDate=""),"Height"!==e&&"Length"!==e&&"Width"!==e&&"LWHUOM"!==e||(s.LWHUOM=""),void 0!==y.zA[e]&&(s[e]=h.jr(y.zA[e],t)),this.setState({validationErrors:s,modVehicle:i}),"TerminalCodes"===e&&this.terminalSelectionChange(t)}catch(s){console.log("TractorWithTrailerDetailsComposite:Error occured on handleChange",s)}},this.handleAllTerminalsChange=e=>{try{let t=m().cloneDeep(this.state.modVehicle),i=[...this.state.terminalOptions];t.TerminalCodes=e?i:[],this.setState({modVehicle:t}),this.terminalSelectionChange(t.TerminalCodes)}catch(t){console.log("TractorWithTrailerDetailsComposite:Error occured on handleAllTerminalsChange",t)}},this.saveVehicle=()=>{try{this.setState({saveEnabled:!1});let e=m().cloneDeep(this.state.tempVehicle);""===this.state.vehicle.Code?this.createVehicle(e):this.updateVehicle(e)}catch(e){console.log("PrimeMoversComposite : Error in savePrimeMover")}},this.handleSave=()=>{try{if(Object.values(this.state.validationErrors).every((function(e){return""===e}))){let e=this.fillDetails(),t=[],i=h.pI(this.state.modVehicleAttributeMetaDataList),s=h.pI(this.state.modVehicleTrailerAttributeMetaDataList),a=h.pI(this.state.modVehiclePrimeMoversAttributeMetaDataList);if(t.push({vehilceAttributeList:i}),t.push({vehicleTrailerAttributeList:s}),t.push({vehiclePrimeMoverAttributeList:a}),this.validateSave(e,t)){e=this.convertStringtoDecimal(e,t),e=h.pC(A.S.Vehicle,e),e.VehiclePrimeMovers.forEach((e=>e.Primemover=h.pC(A.S.PrimeMover,e.Primemover)));let i=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,s=m().cloneDeep(e);this.setState({showAuthenticationLayout:i,tempVehicle:s},(()=>{!1===i&&this.saveVehicle()}))}else this.setState({saveEnabled:!0})}}catch(e){console.log("Tractor With Trailer DetailsComposite:Error occured on handleSave",e)}},this.handleNextClick=(e,t,i)=>{"primeMover"===e&&(this.setState({step1Active:!1,step2Active:!0}),M=i),"trailer"===e&&(this.setState({step2Active:!1,step3Active:!0}),j=i)},this.handleSelectClick=(e,t,i)=>{"primeMover"===e&&(this.setState({tractorSelection:[...t]}),M=i),"trailer"===e&&(this.setState({trailerSelection:[...t]}),j=i)},this.handleTractorList=(e,t)=>{M=t,this.setState({tractorSelection:e})},this.handleTrailerList=(e,t)=>{j=t,this.setState({trailerSelection:e})},this.handleDateTextChange=(e,t,i)=>{try{let s={...this.state.validationErrors},a=m().cloneDeep(this.state.modVehicle);s[e]=i,a[e]=t,this.setState({validationErrors:s,modVehicle:a})}catch(i){console.log("TractorWithTrailerDetailsComposite:Error occured on handleDateTextChange",i)}},this.handleVehicleAttributeDataChange=(e,t)=>{try{let i=[],s=m().cloneDeep(this.state.modVehicleAttributeMetaDataList),a=s.filter((t=>t.TerminalCode===e.TerminalCode));a.length>0&&Array.isArray(a[0].attributeMetaDataList)&&(i=a[0].attributeMetaDataList.filter((t=>t.Code===e.Code))),i.length>0&&(i[0].DefaultValue=t);const r=m().cloneDeep(this.state.vehicleAttributeValidationErrors);r.forEach((i=>{i.TerminalCode===e.TerminalCode&&(i.attributeValidationErrors[e.Code]=h.I5(e,t))})),this.setState({vehicleAttributeValidationErrors:r,modVehicleAttributeMetaDataList:s})}catch(i){console.log("TractorWithTrailerDetailsComposite:Error occured on handleVehicleAttributeDataChange",i)}},this.handleVehiclePrimeMoverAttributeDataChange=(e,t)=>{try{let i=[],s=m().cloneDeep(this.state.modVehiclePrimeMoversAttributeMetaDataList),a=s.filter((t=>t.TerminalCode===e.TerminalCode));a.length>0&&Array.isArray(a[0].attributeMetaDataList)&&(i=a[0].attributeMetaDataList.filter((t=>t.Code===e.Code))),i.length>0&&(i[0].DefaultValue=t);const r=m().cloneDeep(this.state.vehiclePrimeMoversAttributeValidationErrors);r.forEach((i=>{i.TerminalCode===e.TerminalCode&&(i.attributeValidationErrors[e.Code]=h.I5(e,t))})),this.setState({vehiclePrimeMoversAttributeValidationErrors:r,modVehiclePrimeMoversAttributeMetaDataList:s})}catch(i){console.log("TractorWithTrailerDetailsComposite:Error occured on handleVehiclePrimeMoverAttributeDataChange",i)}},this.handleVehicleTrailerAttributeDataDataChange=(e,t)=>{try{let i=[],s=m().cloneDeep(this.state.modVehicleTrailerAttributeMetaDataList),a=s.filter((t=>t.TerminalCode===e.TerminalCode));a.length>0&&Array.isArray(a[0].attributeMetaDataList)&&(i=a[0].attributeMetaDataList.filter((t=>t.Code===e.Code))),i.length>0&&(i[0].DefaultValue=t);const r=m().cloneDeep(this.state.vehicleTrailerAttributeValidationErrors);r.forEach((i=>{i.TerminalCode===e.TerminalCode&&(i.attributeValidationErrors[e.Code]=h.I5(e,t))})),this.setState({vehicleTrailerAttributeValidationErrors:r,modVehicleTrailerAttributeMetaDataList:s})}catch(i){console.log("TractorWithTrailerDetailsComposite:Error occured on handleVehicleTrailerAttributeDataDataChange",i)}},this.handleValidationErrorFilter=(e,t)=>{let i=[];return i=e.find((e=>e.TerminalCode===t)),i.attributeValidationErrors},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})}}componentDidMount(){try{h.pJ(this.props.userDetails.EntityResult.IsArchived);let e=!1;void 0===this.props.selectedRow.Common_Code&&(e=!0),this.getAttributes(e),this.getCarrierList(this.props.selectedShareholder),this.getUOMList(),this.IsBonded(),this.getProductTypes()}catch(e){console.log("TractorWithTrailerDetailsComposite:Error occured on componentDidMount",e)}}IsBonded(){g()(u.xAA+"?LookUpTypeCode=Bonding",h.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;if(!0===t.IsSuccess){let e=t.EntityResult["EnableBondingNon-Bonding"];this.setState({isBonded:"TRUE"===e.toUpperCase()})}else this.setState({isBonded:!1}),console.log("Error in get IsBonded: ",t.ErrorList)})),g()(u.xAA+"?LookUpTypeCode=VirtualPreset",h.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess&&(isNaN(parseInt(t.EntityResult.RoadMaximumNumberOfCompartments))||this.setState({maxNumberOfCompartments:parseInt(t.EntityResult.RoadMaximumNumberOfCompartments)}))})).catch((e=>{this.setState({isBonded:!1}),console.log("SealMasterDetailsComposite: Error occurred on get IsBonded",e)}))}getProductTypes(){g()(u.YG_,h.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=h.Zj(t.EntityResult);this.setState({productTypeOptions:e})}}else console.log("Error in getProductTypes:",t.ErrorList)})).catch((e=>{console.log("Error while getting getProductTypes:",e)}))}getUOMList(){g()(u.WFM,h.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult){let e=t.EntityResult.MASS,i=[];e.forEach((e=>{i.push({text:e,value:e})}));let s=t.EntityResult.VOLUME,a=[];s.forEach((e=>{a.push({text:e,value:e})}));let r=t.EntityResult.LENGTH,o=[];r.forEach((e=>{o.push({text:e,value:e})})),this.setState({volumeUOMOptions:a,weightUOMOptions:i,lengthUOMOptions:o})}}else console.log("Error in getUOM:",t.ErrorList)})).catch((e=>{console.log("Error while getting getUOM:",e)}))}getCarrierList(e){g()(u.Xj6+"?ShareholderCode="+e+"&Transportationtype="+d.LY.ROAD,h.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=h.Zj(t.EntityResult);this.setState({carrierOptions:e})}}else console.log("Error in GetCarrierListForRole:",t.ErrorList)})).catch((e=>{console.log("Error while getting Carrier List:",e)}))}componentWillReceiveProps(e){try{if(""!==this.state.vehicle.Code&&void 0===e.selectedRow.Common_Code&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo){this.getVehicle(!0);let e={...this.state.validationErrors};Object.keys(e).forEach((t=>{e[t]=""})),this.setState({validationErrors:e})}}catch(t){console.log("TractorWithTrailerDetailsComposite:Error occured on componentWillReceiveProps",t)}}displayValues(e,t){const{value:i,field:s}=e;return"boolean"===typeof i||"Active"===s?i?(0,N.jsx)(o.Icon,{name:"check",size:"small",color:"green"}):(0,N.jsx)(o.Icon,{name:"close",size:"small",color:"red"}):""===i||null===i||void 0===i?i:"TerminalCodes"===s&&null!==i?this.terminalPopOver(i):void 0!==t&&null!==t&&void 0!==t.DataType&&"DateTime"===t.DataType?new Date(i).toLocaleDateString()+" "+new Date(i).toLocaleTimeString():void 0!==t&&null!==t&&void 0!==t.DataType&&"Date"===t.DataType?new Date(i).toLocaleDateString():i}terminalPopOver(e){return e.split(",").length>2?(0,N.jsx)(o.Popup,{className:"popup-theme-wrap",on:"hover",element:(0,N.jsx)("span",{children:e.split(",").length}),children:(0,N.jsx)(o.Card,{children:(0,N.jsx)(o.Card.Content,{children:e})})}):(0,N.jsx)("span",{children:e})}getAttributes(e){try{g()(u.fKH,h.tW([R.MK,R.g,R.bN],this.props.tokenDetails.tokenInfo)).then((t=>{var i=t.data;!0===i.IsSuccess?this.setState({attributeMetaDataList:m().cloneDeep(i.EntityResult),vehicleAttributeValidationErrors:h.Fl(i.EntityResult.vehicle),vehiclePrimeMoversAttributeValidationErrors:h.Fl(i.EntityResult.vehicleprimemover),vehicleTrailerAttributeValidationErrors:h.Fl(i.EntityResult.vehicletrailer)},(()=>this.getVehicle(e))):console.log("Error in getAttributes:")}))}catch(t){console.log("Error while getAttributes:",t)}}getVehicle(e){if(e){let e=[];return n.ul.VehicleType=d.$O.TractorWithTrailer,I=[],k=[],void this.setState({vehicle:m().cloneDeep(n.ul),modVehicle:m().cloneDeep(n.ul),tractorSelection:[],trailerSelection:[],isReadyToRender:!0,terminalOptions:e,modVehicleAttributeMetaDataList:[],modVehiclePrimeMoversAttributeMetaDataList:[],modVehicleTrailerAttributeMetaDataList:[],saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.add,D.PE)},(()=>{this.props.userDetails.EntityResult.IsEnterpriseNode?this.terminalSelectionChange([]):this.localNodeAttribute()}))}let t=[{key:c.ok,value:void 0===this.props.selectedRow.Common_Code?this.state.modVehicle.Code:this.props.selectedRow.Common_Code}],i={ShareHolderCode:this.props.selectedShareholder,keyDataCode:c.ok,KeyCodes:t};g()(u.jvS,h.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;!0===t.IsSuccess?(null!==t.EntityResult&&(t.EntityResult.MaxLoadableWeight=t.EntityResult.MaxLoadableWeight+t.EntityResult.TareWeight,k=t.EntityResult.VehiclePrimeMovers,I=t.EntityResult.VehicleTrailers),this.setState({isReadyToRender:!0,vehicle:m().cloneDeep(t.EntityResult),modVehicle:m().cloneDeep(t.EntityResult),saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.modify,D.PE)},(()=>{this.getTerminalsForCarrier(t.EntityResult.CarrierCompanyCode),this.props.userDetails.EntityResult.IsEnterpriseNode?this.terminalSelectionChange(t.EntityResult.TerminalCodes):this.localNodeAttribute()}))):(n.ul.ShareholderCode=this.props.selectedShareholder,n.ul.VehicleType=d.$O.TractorWithTrailer,this.setState({modVehicle:m().cloneDeep(n.ul),vehicle:m().cloneDeep(n.ul),isReadyToRender:!0}),console.log("Error in GetVehicle:",t.ErrorList))})).catch((e=>{console.log("Error while getting Vehicle:",e)}))}terminalSelectionChange(e){try{if(void 0!==e&&null!==e){let a=[];var t=[],i=[];t=m().cloneDeep(this.state.attributeMetaDataList),i=m().cloneDeep(this.state.modVehicleAttributeMetaDataList);const r=m().cloneDeep(this.state.vehicleAttributeValidationErrors);var s=m().cloneDeep(this.state.modVehicle);e.forEach((e=>{var r=i.find((t=>t.TerminalCode===e));void 0===r?t.vehicle.forEach((function(t){if(t.TerminalCode===e){var i=s.Attributes.find((t=>t.TerminalCode===e));void 0!==i&&t.attributeMetaDataList.forEach((function(e){var t=i.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),a.push(t)}})):a.push(r)})),i=[],i=a,i=h.nQ(i),r.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.setState({modVehicleAttributeMetaDataList:i,vehicleAttributeValidationErrors:r}),this.setVehiclePrimeMoverAttributes(e)}}catch(a){console.log("RigidTruckWithTrailerDetailsComposite:Error occured on terminalSelectionChange",a)}}setVehiclePrimeMoverAttributes(e){try{let a=[];var t=[],i=[];t=m().cloneDeep(this.state.attributeMetaDataList),i=m().cloneDeep(this.state.modVehiclePrimeMoversAttributeMetaDataList);const r=m().cloneDeep(this.state.vehiclePrimeMoversAttributeValidationErrors);var s=m().cloneDeep(this.state.modVehicle);e.forEach((e=>{var r=i.find((t=>t.TerminalCode===e));void 0===r?t.vehicleprimemover.forEach((function(t){if(t.TerminalCode===e){if(null!==s.VehiclePrimeMovers&s.VehiclePrimeMovers.length>0){var i=s.VehiclePrimeMovers[0].Attributes.find((t=>t.TerminalCode===e));void 0!==i&&t.attributeMetaDataList.forEach((function(e){var t=i.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)}))}a.push(t)}})):a.push(r)})),i=[],i=a,i=h.nQ(i),r.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.setState({modVehiclePrimeMoversAttributeMetaDataList:i,vehiclePrimeMoversAttributeValidationErrors:r}),this.setVehicleTrailerAttributes(e)}catch(a){console.log("TractorWithTrailerDetailsComposite:Error occured on setVehiclePrimeMoverAttributes",a)}}setVehicleTrailerAttributes(e){try{let a=[];var t=[],i=[];t=m().cloneDeep(this.state.attributeMetaDataList),i=m().cloneDeep(this.state.modVehicleTrailerAttributeMetaDataList);const r=m().cloneDeep(this.state.vehicleTrailerAttributeValidationErrors);var s=m().cloneDeep(this.state.modVehicle);e.forEach((e=>{var r=i.find((t=>t.TerminalCode===e));void 0===r?t.vehicletrailer.forEach((function(t){if(t.TerminalCode===e){if(null!==s.VehicleTrailers&s.VehicleTrailers.length>0){var i=s.VehicleTrailers[0].Attributes.find((t=>t.TerminalCode===e));void 0!==i&&t.attributeMetaDataList.forEach((function(e){var t=i.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)}))}a.push(t)}})):a.push(r)})),i=[],i=a,i=h.nQ(i),r.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.setState({modVehicleTrailerAttributeMetaDataList:i,vehicleTrailerAttributeValidationErrors:r})}catch(a){console.log("TractorWithTrailerDetailsComposite:Error occured on setVehicleTrailerAttributes",a)}}localNodeAttribute(){try{var e=m().cloneDeep(this.state.attributeMetaDataList);Array.isArray(e.vehicle)&&e.vehicle.length>0&&this.terminalSelectionChange([e.vehicle[0].TerminalCode])}catch(t){console.log("TractorWithTrailerDetailsComposite:Error occured on localNodeAttribute",t)}}getTerminalsForCarrier(e){if(this.props.userDetails.EntityResult.IsEnterpriseNode){const i=m().cloneDeep(this.state.modVehicle);let s=[...this.state.terminalOptions];i.CarrierCompanyCode=e;try{if(void 0===e)return s=[],i.TerminalCodes=[],this.setState({terminalOptions:s,modVehicle:i}),void this.terminalSelectionChange([]);let t=[{key:c._n,value:e},{key:c.v6,value:d.LY.ROAD}],a={ShareHolderCode:this.props.selectedShareholder,keyDataCode:c._n,KeyCodes:t};g()(u.pm$,h.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;!0===t.IsSuccess&&null!==t.EntityResult&&null!==t.EntityResult.TerminalCodes?(s=[...t.EntityResult.TerminalCodes],this.setState({terminalOptions:s})):(s=[],this.setState({terminalOptions:s}),console.log("Error in GetCarrier:",t.ErrorList));let a={...this.state.vehicle};void 0!==a.Code&&""!==a.Code&&null!==a.Code||(1===s.length?(i.TerminalCodes=[...s],this.terminalSelectionChange(i.TerminalCodes)):(i.TerminalCodes=[],this.terminalSelectionChange([]))),Array.isArray(i.TerminalCodes)&&(i.TerminalCodes=s.filter((e=>i.TerminalCodes.includes(e)))),this.setState({modVehicle:i})})).catch((t=>{s=[],i.TerminalCodes=[],this.setState({terminalOptions:s,modVehicle:i}),console.log("Error while getting Carrier:",t,e)}))}catch(t){s=[],i.TerminalCodes=[],this.setState({terminalOptions:s,modVehicle:i}),console.log("TractowWithTrailerDetailsComposite:Error occured on handleCarrierChange",t)}}else{const t=m().cloneDeep(this.state.modVehicle);t.CarrierCompanyCode=e;const i=[];this.setState({terminalOptions:i,modVehicle:t})}}handleResetAttributeValidationError(){try{var e=m().cloneDeep(this.state.attributeMetaDataList);this.setState({vehicleAttributeValidationErrors:h.Fl(e.vehicle),vehiclePrimeMoversAttributeValidationErrors:h.Fl(e.vehicleprimemover),vehicleTrailerAttributeValidationErrors:h.Fl(e.vehicletrailer)})}catch(t){console.log("TractorWithTrailerDetailsComposite:Error occured on handleResetAttributeValidationError",t)}}validateSave(e,t){const i={...this.state.validationErrors};Object.keys(y.zA).forEach((function(t){void 0!==e[t]&&(i[t]=h.jr(y.zA[t],e[t]))})),e.Active!==this.state.vehicle.Active&&""===e.Remarks&&(i.Remarks="Vehicle_RemarksRequired"),this.state.isBonded&&e.IsBonded&&(""!==e.VehicleCustomsBondNo&&null!==e.VehicleCustomsBondNo||(i.VehicleCustomsBondNo="VehicleInfo_VehicleCustomsBondNoError"),""!==e.BondExpiryDate&&null!==e.BondExpiryDate||(i.BondExpiryDate="VehicleInfo_BondExpiryDateError"),e.IsBonded!==this.state.vehicle.IsBonded&&""!==this.state.vehicle.Code&&""===e.Remarks&&(i.Remarks="Vehicle_RemarksRequired")),(null===e.RoadTaxNo||""===e.RoadTaxNo)&&isNaN(Date.parse(e.RoadTaxNoIssueDate))&&isNaN(Date.parse(e.RoadTaxNoExpiryDate))||(null!==e.RoadTaxNo&&""!==e.RoadTaxNo||(i.RoadTaxNo="Vehicle_RoadTaxNoRequired"),isNaN(Date.parse(e.RoadTaxNoIssueDate))&&(i.RoadTaxNoIssueDate="Vehicle_RoadTaxIssRequired"),isNaN(Date.parse(e.RoadTaxNoExpiryDate))&&(i.RoadTaxNoExpiryDate="Vehicle_RoadTaxExpRequired"));let s={messageType:"critical",message:"VehicleInfo_SavedStatus",messageResultDetails:[]};null===e.Height&&null==e.Width&&null===e.Length||null!==e.LWHUOM||(i.LWHUOM="PrimeMover_UOMRequired"),this.state.tractorSelection.length<=0&&s.messageResultDetails.push({keyFields:["Vehicle_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:"Vehicle_PMRequired"});let a=0;this.state.trailerSelection.length<=0?s.messageResultDetails.push({keyFields:["Vehicle_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:"Vehicle_TrailerRequired"}):this.state.trailerSelection.map((e=>{a+=e.CompCount})),this.state.maxNumberOfCompartments<a&&s.messageResultDetails.push({keyFields:["Vehicle_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:"Compartment_limit_Exceeded"});var r=m().cloneDeep(this.state.vehicleAttributeValidationErrors);t.find((function(e){return void 0!==e.vehilceAttributeList})).vehilceAttributeList.forEach((e=>{r.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=h.I5(e,e.DefaultValue)}))}))}));var o=m().cloneDeep(this.state.vehiclePrimeMoversAttributeValidationErrors);t.find((function(e){return void 0!==e.vehiclePrimeMoverAttributeList})).vehiclePrimeMoverAttributeList.forEach((e=>{o.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=h.I5(e,e.DefaultValue)}))}))}));var l=m().cloneDeep(this.state.vehicleTrailerAttributeValidationErrors);t.find((function(e){return void 0!==e.vehicleTrailerAttributeList})).vehicleTrailerAttributeList.forEach((e=>{l.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=h.I5(e,e.DefaultValue)}))}))})),this.setState({validationErrors:i,vehicleAttributeValidationErrors:r,vehiclePrimeMoversAttributeValidationErrors:o,vehicleTrailerAttributeValidationErrors:l});var n=!0;return r.forEach((e=>{if(!n)return n;n=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),n&&o.forEach((e=>{if(!n)return n;n=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),n&&l.forEach((e=>{if(!n)return n;n=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),n?(n=Object.values(i).every((function(e){return""===e})),s.messageResultDetails.length>0?(this.props.onSaved(this.state.modVehicle,"update",s),!1):n):n}convertStringtoDecimal(e,t){try{return null!==e.Height&&""!==e.Height&&(e.Height=h.bo(e.Height)),null!==e.Length&&""!==e.Length&&(e.Length=h.bo(e.Length)),null!==e.Width&&""!==e.Width&&(e.Width=h.bo(e.Width)),e=this.fillAttributeDetails(e,t)}catch(i){console.log("convertStringtoDecimal error TractorWithTrailer details",i)}}createVehicle(e){let t=[{key:c.ok,value:e.Code}],i={ShareHolderCode:this.props.selectedShareholder,keyDataCode:c.ok,KeyCodes:t,Entity:e},s={messageType:"critical",message:"VehicleInfo_SavedStatus",messageResultDetails:[{keyFields:["Vehicle_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:""}]};g()(u.h1s,h.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;s.messageType=t.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?(this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.modify,D.PE),showAuthenticationLayout:!1}),this.getVehicle(!1)):(s.messageResultDetails[0].errorMessage=t.ErrorList[0],this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.add,D.PE),showAuthenticationLayout:!1}),console.log("Error in CreateVehicle:",t.ErrorList)),this.props.onSaved(this.state.modVehicle,"add",s)})).catch((e=>{this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.add,D.PE),showAuthenticationLayout:!1}),s.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modVehicle,"add",s)}))}updateVehicle(e){let t=[{key:c.ok,value:e.Code}],i={ShareHolderCode:this.props.selectedShareholder,keyDataCode:c.ok,KeyCodes:t,Entity:e},s={messageType:"critical",message:"VehicleInfo_SavedStatus",messageResultDetails:[{keyFields:["Vehicle_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:""}]};g()(u.Kas,h.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;s.messageType=t.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?(this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.modify,D.PE),showAuthenticationLayout:!1}),this.getVehicle(!1)):(this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.modify,D.PE),showAuthenticationLayout:!1}),s.messageResultDetails[0].errorMessage=t.ErrorList[0],console.log("Error in UpdateVehicle:",t.ErrorList)),this.props.onSaved(this.state.modVehicle,"update",s)})).catch((e=>{s.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modVehicle,"modify",s),this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.modify,D.PE),showAuthenticationLayout:!1})}))}fillDetails(){try{let t=m().cloneDeep(this.state.modVehicle);t.ShareholderCode=this.props.selectedShareholder,t.VehicleType=d.$O.TractorWithTrailer,""===t.Height&&(t.Height=null),""===t.Length&&(t.Length=null),""===t.Width&&(t.Width=null),null!==t.Height&&""!==t.Height&&(t.Height=t.Height.toLocaleString()),null!==t.Length&&""!==t.Length&&(t.Length=t.Length.toLocaleString()),null!==t.Width&&""!==t.Width&&(t.Width=t.Width.toLocaleString());let i={VehicleCode:null,PrimeMoverCode:null,ShareholderCode:null,CarrierCompanyCode:null,PrimeMoverSequence:null,PrimeMover:null};t.TransportationType=d.LY.ROAD;var e=new Date;t.LicenseNoIssueDate=e.getUTCDate(),this.state.tractorSelection.length>0&&(i.VehicleCode=t.Code,i.PrimeMoverCode=this.state.tractorSelection[0].Common_Code,i.ShareholderCode=t.ShareholderCode,i.CarrierCompanyCode=t.CarrierCompanyCode,i.PrimeMoverSequence=1,t.VehiclePrimeMovers=[],t.VehiclePrimeMovers.push(i));let s=0;return t.VehicleTrailers=[],this.state.trailerSelection.length>0&&this.state.trailerSelection.forEach((e=>{let i={TrailerCode:null,VehicleCode:null,ShareholderCode:null,CarrierCompanyCode:null,TrailerSeq:null,Trailer:{}};i.TrailerCode=e.Common_Code,i.VehicleCode=t.Code,i.ShareholderCode=t.ShareholderCode,i.CarrierCompanyCode=t.CarrierCompanyCode,i.TrailerSeq=++s,i.Trailer.Code=e.Common_Code,i.Trailer.Name=e.Common_Name,i.Trailer.ShareholderCode=t.ShareholderCode,i.Trailer.TransportationType=d.LY.ROAD,i.Trailer.CarrierCompanyCode=t.CarrierCompanyCode,i.Trailer.TrailerType=d.YH.NON_RIGID_TRAILER,t.VehicleTrailers.push(i)})),t}catch(t){console.log("TractorWithTrailerDetailsComposite:Error occured on fillDetails",t)}}fillAttributeDetails(e,t){try{let i=t.find((function(e){return void 0!==e.vehilceAttributeList})),s=t.find((function(e){return void 0!==e.vehicleTrailerAttributeList})),a=t.find((function(e){return void 0!==e.vehiclePrimeMoverAttributeList})),r=h.SC(i.vehilceAttributeList);e.Attributes=h.Gh(r);let o=h.SC(a.vehiclePrimeMoverAttributeList),l=h.SC(s.vehicleTrailerAttributeList);return null!==e.VehiclePrimeMovers&e.VehiclePrimeMovers.length>0&&e.VehiclePrimeMovers.forEach((e=>{e.Attributes=h.Gh(o)})),null!==e.VehicleTrailers&e.VehicleTrailers.length>0&&e.VehicleTrailers.forEach((e=>{e.Attributes=h.Gh(l)})),e}catch(i){console.log("TractorWithTrailerDetailsComposite:Error occured on fillAttributeDetails",i)}}render(){const e={carriers:this.state.carrierOptions,productType:this.state.productTypeOptions,unitOfWeight:this.state.weightUOMOptions,unitOfVolume:this.state.volumeUOMOptions,unitOfDimension:this.state.lengthUOMOptions,terminalCodes:this.state.terminalOptions},t=[{fieldName:"Vehicle_LastUpdated",fieldValue:new Date(this.state.modVehicle.LastUpdateTime).toLocaleDateString()+" "+new Date(this.state.modVehicle.LastUpdateTime).toLocaleTimeString()},{fieldName:"Vehicle_LastActiveTime",fieldValue:void 0!==this.state.modVehicle.LastActiveTime&&null!==this.state.modVehicle.LastActiveTime?new Date(this.state.modVehicle.LastActiveTime).toLocaleDateString()+" "+new Date(this.state.modVehicle.LastActiveTime).toLocaleTimeString():""},{fieldName:"Vehicle_CreateTime",fieldValue:new Date(this.state.modVehicle.CreatedTime).toLocaleDateString()+" "+new Date(this.state.modVehicle.CreatedTime).toLocaleTimeString()}];return this.state.isReadyToRender?(0,N.jsx)(E.TranslationConsumer,{children:i=>(0,N.jsxs)("div",{children:[(0,N.jsx)(o.Accordion,{children:(0,N.jsx)(o.Accordion.Content,{title:i("Step1_Tractor"),active:this.state.step1Active,onClick:()=>this.setState({step1Active:!this.state.step1Active}),children:(0,N.jsx)("div",{className:"borderTable",children:(0,N.jsx)(a.default,{tractorWithTrailer:true,tractorSelection:k,handleNextClick:this.handleNextClick,getTractorList:this.handleTractorList,tractorShareholder:this.props.selectedShareholder,handleSelectClick:this.handleSelectClick})})})}),this.state.tractorSelection.length>0&&!this.state.step1Active?(0,N.jsx)(l.bQ,{data:this.state.tractorSelection,selection:this.state.tractorSelection,selectionMode:"multiple",showHeader:!0,children:M.map((e=>(0,N.jsx)(l.bQ.Column,{initialWidth:e.Width,field:e.Name,header:i(e.Name),renderer:t=>this.displayValues(t,e)},e.Name)))}):"",""!==this.state.vehicle.Code&&0===this.state.tractorSelection.length?(0,N.jsx)("div",{className:"authLoading",style:{height:"80px"},children:(0,N.jsx)(o.Loader,{style:{top:"10px"},text:" "})}):"",(0,N.jsx)(o.Accordion,{children:(0,N.jsx)(o.Accordion.Content,{title:i("Step2_Trailer"),active:this.state.step2Active,onClick:()=>this.setState({step2Active:!this.state.step2Active}),children:(0,N.jsx)("div",{className:"borderTable",children:(0,N.jsx)(r.default,{vehicleWithTrailer:true,handleNextClick:this.handleNextClick,getTrailerList:this.handleTrailerList,trailerSelection:I,vehicleShareholder:this.props.selectedShareholder,handleSelectClick:this.handleSelectClick})})})}),this.state.trailerSelection.length>0&&!this.state.step2Active?(0,N.jsx)(l.bQ,{data:this.state.trailerSelection,selection:this.state.trailerSelection,selectionMode:"multiple",showHeader:!0,children:j.map((e=>(0,N.jsx)(l.bQ.Column,{initialWidth:e.Width,field:e.Name,header:i(e.Name),renderer:t=>this.displayValues(t,e)},e.Name)))}):"",""!==this.state.vehicle.Code&&0===this.state.trailerSelection.length?(0,N.jsx)("div",{className:"authLoading",style:{height:"80px"},children:(0,N.jsx)(o.Loader,{style:{top:"10px"},text:" "})}):"",(0,N.jsx)(o.Accordion,{children:(0,N.jsx)(o.Accordion.Content,{title:i("Step3_Vehicle"),active:this.state.step3Active,onClick:()=>this.setState({step3Active:!this.state.step3Active}),children:(0,N.jsx)("div",{className:"borderTable",children:(0,N.jsxs)("div",{children:[(0,N.jsx)(T.A,{children:(0,N.jsx)(V.A,{entityCode:this.state.vehicle.Code,newEntityName:"VehicleList_title",popUpContents:t})}),(0,N.jsx)(T.A,{children:(0,N.jsx)("div",{className:"detailsContainer",children:(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)(b.A,{data:this.state.vehicle,modData:this.state.modVehicle,validationErrors:this.state.validationErrors,listOptions:e,onFieldChange:this.handleChange,onDateTextChange:this.handleDateTextChange,onAllTerminalsChange:this.handleAllTerminalsChange,onCarrierChange:this.handleCarrierChange,onActiveStatusChange:this.handleActiveStatusChange,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,attributeValidationErrors:this.state.vehicleAttributeValidationErrors,modAttributeMetaDataList:this.state.modVehicleAttributeMetaDataList,onAttributeDataChange:this.handleVehicleAttributeDataChange,isBonded:this.state.isBonded}),this.state.modVehiclePrimeMoversAttributeMetaDataList.length>0?(0,N.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,N.jsx)(o.Accordion,{children:(0,N.jsx)(o.Accordion.Content,{className:"attributeAccordian",title:i("VEHICLEPRIMEMOVER_Attributes"),children:this.state.modVehiclePrimeMoversAttributeMetaDataList.length>0?this.state.modVehiclePrimeMoversAttributeMetaDataList.map((e=>(0,N.jsx)(T.A,{children:(0,N.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,N.jsx)(o.Accordion,{children:(0,N.jsx)(o.Accordion.Content,{className:"attributeAccordian",title:this.props.userDetails.EntityResult.IsEnterpriseNode?e.TerminalCode+" - "+i("Attributes_Header"):i("Attributes_Header"),children:(0,N.jsx)(L.n,{selectedAttributeList:e.attributeMetaDataList,handleCellDataEdit:this.handleVehiclePrimeMoverAttributeDataChange,attributeValidationErrors:this.handleValidationErrorFilter(this.state.vehiclePrimeMoversAttributeValidationErrors,e.TerminalCode)})})})})}))):null})})}):null,this.state.modVehicleTrailerAttributeMetaDataList.length>0?(0,N.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,N.jsx)(o.Accordion,{children:(0,N.jsx)(o.Accordion.Content,{className:"attributeAccordian",title:i("VEHICLETRAILER_Attributes"),children:this.state.modVehicleTrailerAttributeMetaDataList.length>0?this.state.modVehicleTrailerAttributeMetaDataList.map((e=>(0,N.jsx)(T.A,{children:(0,N.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,N.jsx)(o.Accordion,{children:(0,N.jsx)(o.Accordion.Content,{className:"attributeAccordian",title:this.props.userDetails.EntityResult.IsEnterpriseNode?e.TerminalCode+" - "+i("Attributes_Header"):i("Attributes_Header"),children:(0,N.jsx)(L.n,{selectedAttributeList:e.attributeMetaDataList,handleCellDataEdit:this.handleVehicleTrailerAttributeDataDataChange,attributeValidationErrors:this.handleValidationErrorFilter(this.state.vehicleTrailerAttributeValidationErrors,e.TerminalCode)})})})})}))):null})})}):null]})})}),(0,N.jsx)(T.A,{children:(0,N.jsx)(S.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.showAuthenticationLayout?(0,N.jsx)(f.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.vehicle.Code?D.i.add:D.i.modify,functionGroup:D.PE,handleOperation:this.saveVehicle,handleClose:this.handleAuthenticationClose}):null]})})})}),this.state.step3Active?"":(0,N.jsx)("div",{className:"vehicleBackbtn",children:(0,N.jsx)(o.Button,{className:"backButton",content:i("Back"),onClick:this.props.onBack})})]})}):(0,N.jsx)(x.A,{message:"Loading"})}}const O=(0,C.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(P)},14271:(e,t,i)=>{i.r(t),i.d(t,{default:()=>L});var s=i(65043),a=i(80312),r=i(7523),o=i(72067),l=i(40854),n=i.n(l),h=i(72711),c=i(14159),d=i(11981),u=i(66554),p=i(69062),m=i(65187),C=i(97508),v=i(93779),g=(i(92342),i(19380)),T=i(70579);function y(e){let{tableData:t,columnDetails:i,pageSize:s,exportRequired:a,exportFileName:r,columnPickerRequired:o,columnGroupingRequired:l,terminalsToShow:n,selectionRequired:h,onSelectionChange:c,onRowClick:d,parentComponent:u}=e;return(0,T.jsx)(g.A,{data:t,columns:i,rowsPerPage:s,exportRequired:a,exportFileName:r,columnPickerRequired:o,columnGroupingRequired:l,terminalsToShow:n,selectionRequired:h,onSelectionHandle:c,onRowClick:d,parentComponent:u})}var D=i(51994),b=i(67907),S=i(40252),V=i(80297),E=i(39424),x=i(62900);class R extends s.PureComponent{constructor(){super(...arguments),this.state={isDetails:!1,isReadyToRender:!1,isDetailsModified:!1,operationsVisibilty:{add:!1,delete:!1,shareholder:!0},selectedRow:{},selectedItems:[],data:{},primeMoverKPIList:[],showAuthenticationLayout:!1},this.componentName="PrimeMoverComponent",this.handleAdd=()=>{try{const e={...this.state.operationsVisibilty};e.delete=!1,e.add=!1,e.shareholder=!1,this.setState({isDetails:!0,selectedRow:{},operationsVisibilty:e})}catch(e){console.log("PrimeMoverComposite:Error occured on handleAdd",e)}},this.handleShareholderSelectionChange=e=>{try{let{operationsVisibilty:t}={...this.state};t.delete=!1,this.setState({selectedShareholder:e,isReadyToRender:!1,selectedItems:[],operationsVisibilty:t}),this.getPrimeMoverList(e),void 0!==this.props.tractorWithTrailer&&!1!==this.props.tractorWithTrailer||this.getKPIList(e)}catch(t){console.log("PrimeMoverComposite:Error occured on handleShareholderSelectionChange",t)}},this.handleRowClick=e=>{try{if(void 0===this.props.tractorWithTrailer){const t={...this.state.operationsVisibilty};t.add=p.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.add,a.LR),t.delete=p.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.remove,a.LR),t.shareholder=!1,this.setState({isDetails:!0,selectedRow:e,selectedItems:[e],operationsVisibilty:t})}}catch(t){console.log("PrimeMoverComposite:Error occured on Row click",t)}},this.handleSelection=e=>{try{const t={...this.state.operationsVisibilty};t.delete=e.length>0&&p.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.remove,a.LR),this.setState({selectedItems:e,operationsVisibilty:t},(()=>{!0===this.props.tractorWithTrailer&&this.props.handleSelectClick("primeMover",this.state.selectedItems,this.state.data.Column)}))}catch(t){console.log("PrimeMoverComposite:Error occured on handleSelection",t)}},this.handleDelete=()=>{try{const i={...this.state.operationsVisibilty};i.delete=!1,this.setState({operationsVisibilty:i});for(var e=[],t=0;t<this.state.selectedItems.length;t++){let i=this.state.selectedShareholder,s=this.state.selectedItems[t].Common_Code,a=this.state.selectedItems[t].PrimeMover_CarrierCompany,r={keyDataCode:0,ShareHolderCode:i,KeyCodes:[{Key:v.xy,Value:s},{key:v._n,Value:a}]};e.push(r)}n()(o.gc$,p.tW(e,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data,s=t.IsSuccess;if(null!==t.ResultDataList&&void 0!==t.ResultDataList){s=t.ResultDataList.filter((function(e){return!e.IsSuccess})).length!==t.ResultDataList.length}let a=p.Cy(t,"PrimeMover_DeletionStatus",["PrimeMoverCode"]);s?(this.setState({isReadyToRender:!1,showAuthenticationLayout:!1}),this.getPrimeMoverList(this.state.selectedShareholder),void 0!==this.props.tractorWithTrailer&&!1!==this.props.tractorWithTrailer||this.getKPIList(this.state.selectedShareholder),i.delete=!1,this.setState({selectedItems:[],operationsVisibilty:i,selectedRow:{},showAuthenticationLayout:!1})):(i.delete=!0,this.setState({operationsVisibilty:i,showAuthenticationLayout:!1})),a.messageResultDetails.forEach((e=>{e.keyFields.length>0&&(e.keyFields[0]="PrimeMover_Code")})),(0,c.toast)((0,T.jsx)(m.A,{children:(0,T.jsx)(d.A,{notificationMessage:a})}),{autoClose:"success"===a.messageType&&1e4})})).catch((e=>{throw e}))}catch(i){console.log("PrimeMoverComposite:Error occured on handleDelete",i)}},this.savedEvent=(e,t,i)=>{try{const r={...this.state.operationsVisibilty};if("success"===i.messageType&&(r.add=p.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.add,a.LR),r.delete=p.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.remove,a.LR),this.setState({isDetailsModified:!0,operationsVisibilty:r})),"success"===i.messageType&&"add"===t){var s=[{Common_Code:e.Code,Common_Status:e.Active,PrimeMover_CarrierCompany:e.CarrierCompanyCode}];this.setState({selectedItems:s})}(0,c.toast)((0,T.jsx)(m.A,{children:(0,T.jsx)(d.A,{notificationMessage:i})}),{autoClose:"success"===i.messageType&&1e4})}catch(r){console.log("PrimeMoverComposite:Error occured on savedEvent",r)}},this.handleBack=()=>{try{const e={...this.state.operationsVisibilty};e.add=p.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.add,a.LR),e.delete=!1,e.shareholder=!0,this.setState({isDetails:!1,selectedRow:{},selectedItems:[],operationsVisibilty:e,isReadyToRender:!1}),this.getPrimeMoverList(this.state.selectedShareholder),void 0!==this.props.tractorWithTrailer&&!1!==this.props.tractorWithTrailer||this.getKPIList(this.state.selectedShareholder)}catch(e){console.log("PrimeMoverComposite:Error occured on Back click",e)}},this.componentWillUnmount=()=>{p.D6(this.componentName+"GridState"),window.removeEventListener("beforeunload",(()=>p.D6(this.componentName+"GridState")))},this.handleNextClick=()=>{this.props.handleNextClick("primeMover",this.state.selectedItems,this.state.data.Column)},this.authenticateDelete=()=>{try{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showAuthenticationLayout:e}),!1===e&&this.handleDelete()}catch(e){console.log("PrimeMoverComposite : Error in authenticateDelete")}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})}}getKPIList(e){if(!0===p.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.view,a.bL)){var t={message:"",messageType:"critical",messageResultDetails:[]};let i={PageName:E.XV,InputParameters:[{key:"ShareholderCode",value:e}]};n()(o.dxq,p.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{var i=e.data;!0===i.IsSuccess?this.setState({primeMoverKPIList:i.EntityResult.ListKPIDetails}):(this.setState({primeMoverKPIList:[]}),console.log("Error in Prime Mover KPIList:",i.ErrorList),t.messageResultDetails.push({keyFields:[],keyValues:[],isSuccess:!1,errorMessage:i.ErrorList[0]})),t.messageResultDetails.length>0&&(0,c.toast)((0,T.jsx)(m.A,{children:(0,T.jsx)(d.A,{notificationMessage:t})}),{autoClose:"success"===t.messageType&&1e4})})).catch((e=>{console.log("Error while getting Prime Mover KPIList:",e)}))}}getPrimeMoverList(e){let t=r.LY.ROAD;n()(o.s_Y+"?ShareholderCode="+e+"&Transportationtype="+t,p.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;if(!0===t.IsSuccess){if(this.setState({data:{...t.EntityResult},isReadyToRender:!0}),!0===this.props.tractorWithTrailer&&this.props.tractorSelection.length>0){let e=this.props.tractorSelection;if(e.length>0){let i=[];e.forEach((e=>{let s=t.EntityResult.Table.find((t=>t.Common_Code===e.PrimeMover.Code));void 0!==s&&i.push(s)})),this.setState({selectedItems:i}),this.props.getTractorList(i,t.EntityResult.Column)}}}else this.setState({data:{},isReadyToRender:!0}),console.log("Error in GetPrimeMoverListForRole:",t.ErrorList)})).catch((e=>{this.setState({data:{},isReadyToRender:!0}),console.log("Error while getting PrimeMover List:",e)}))}componentWillReceiveProps(e){if(!0===e.tractorWithTrailer&&e.tractorSelection.length>0){let t=e.tractorSelection;if(t.length>0){let e=[];t.forEach((t=>{let i=this.state.data.Table.find((e=>e.Common_Code===t.PrimeMover.Code));void 0!==i&&e.push(i)})),this.setState({selectedItems:e}),this.props.getTractorList(e,this.state.data.Column)}}else!0===e.tractorWithTrailer&&0===e.tractorSelection.length&&this.setState({selectedItems:[]})}componentDidMount(){try{p.pJ(this.props.userDetails.EntityResult.IsArchived);const e={...this.state.operationsVisibilty};e.add=p.ab(this.props.userDetails.EntityResult.FunctionsList,a.i.add,a.LR);let t=this.props.userDetails.EntityResult.PrimaryShareholder;!0===this.props.tractorWithTrailer&&(t=this.props.tractorShareholder),this.setState({operationsVisibilty:e,selectedShareholder:t}),this.getPrimeMoverList(t),void 0!==this.props.tractorWithTrailer&&!1!==this.props.tractorWithTrailer||this.getKPIList(t)}catch(e){console.log("PrimeMoverComposite:Error occured on ComponentDidMount",e)}window.addEventListener("beforeunload",(()=>p.D6(this.componentName+"GridState")))}render(){let e="multiple",t=!0,i="globalLoader";return!0===this.props.tractorWithTrailer&&(e="single",t=!1,i="nestedList"),(0,T.jsx)(b.TranslationConsumer,{children:e=>(0,T.jsxs)("div",{children:[(0,T.jsx)(m.A,{children:void 0===this.props.tractorWithTrailer?(0,T.jsx)(u.$,{operationsVisibilty:this.state.operationsVisibilty,breadcrumbItem:this.props.activeItem,shareholders:this.props.userDetails.EntityResult.ShareholderList,selectedShareholder:this.state.selectedShareholder,onShareholderChange:this.handleShareholderSelectionChange,onDelete:this.authenticateDelete,onAdd:this.handleAdd,handleBreadCrumbClick:this.props.handleBreadCrumbClick}):(0,T.jsx)(T.Fragment,{children:this.state.isDetails?"":(0,T.jsxs)("div",{className:"vehicleDataTableHeading",children:[(0,T.jsx)("div",{className:"col col-lg-10 dataTableHeadingPadding",children:(0,T.jsx)("h5",{children:e("Select_Tractors")})}),(0,T.jsx)("div",{className:"col col-lg-1 vehicleDataTableIcon",children:(0,T.jsx)("div",{className:(this.state.operationsVisibilty.add?"iconCircle ":"iconCircleDisable ")+"iconblock",onClick:()=>{this.state.operationsVisibilty.add&&this.handleAdd()},children:(0,T.jsx)(h.Icon,{root:"common",name:"badge-plus",size:"small",color:"white"})})})]})})}),this.state.isDetails?(0,T.jsx)(m.A,{children:(0,T.jsx)(D.default,{selectedRow:this.state.selectedRow,onBack:this.handleBack,onSaved:this.savedEvent,selectedShareholder:this.state.selectedShareholder},"PrimeMoverDetails")}):this.state.isReadyToRender?(0,T.jsxs)("div",{children:[!0===this.props.tractorWithTrailer?"":(0,T.jsx)(m.A,{children:(0,T.jsx)("div",{className:"kpiSummaryContainer",children:(0,T.jsx)(V.A,{kpiList:this.state.primeMoverKPIList,pageName:"PrimeMover"})})}),(0,T.jsxs)(m.A,{children:[(0,T.jsx)(y,{tableData:this.state.data.Table,columnDetails:this.state.data.Column,pageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,exportRequired:!0,exportFileName:"PrimeMoverList",columnPickerRequired:!0,terminalsToShow:this.props.userDetails.EntityResult.PageAttibutes.NoOfTerminalsToShow,selectionRequired:!0,columnGroupingRequired:!0,onSelectionChange:this.handleSelection,onRowClick:this.handleRowClick,parentComponent:this.componentName}),!0===this.props.tractorWithTrailer?(0,T.jsx)("div",{className:"vehicleNextButton",children:(0,T.jsx)(h.Button,{onClick:this.handleNextClick,children:e("Common_Next")})}):""]})]}):(0,T.jsx)(S.A,{loadingClass:i,message:"Loading"}),this.state.showAuthenticationLayout?(0,T.jsx)(x.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:a.i.remove,functionGroup:a.LR,handleClose:this.handleAuthenticationClose,handleOperation:this.handleDelete}):null,!0===this.props.tractorWithTrailer?"":(0,T.jsx)(m.A,{children:(0,T.jsx)(c.ToastContainer,{hideProgressBar:!0,closeOnClick:!1,closeButton:!0,newestOnTop:!0,position:"bottom-right",toastClassName:"toast-notification-wrap"})})]})})}}const L=(0,C.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(R)},31045:(e,t,i)=>{i.r(t),i.d(t,{default:()=>L});var s=i(65043),a=i(66554),r=i(19380),o=i(70579);function l(e){let{tableData:t,columnDetails:i,pageSize:s,exportRequired:a,exportFileName:l,columnPickerRequired:n,columnGroupingRequired:h,selectionRequired:c,terminalsToShow:d,selectedItems:u,onSelectionChange:p,onRowClick:m,parentComponent:C}=e;return(0,o.jsx)(r.A,{data:t,columns:i,rowsPerPage:s,exportRequired:a,exportFileName:l,columnPickerRequired:n,columnGroupingRequired:h,selectionRequired:c,selectedItems:u,onSelectionHandle:p,onRowClick:m,parentComponent:C,terminalsToShow:d})}var n=i(40854),h=i.n(n),c=i(7523),d=i(72067),u=i(72711),p=i(14159),m=i(11981),C=i(69062),v=i(65187),g=i(97508),T=i(93779),y=i(80312),D=i(48754),b=(i(92342),i(67907)),S=i(40252),V=i(80297),E=i(39424),x=i(62900);class R extends s.PureComponent{constructor(){super(...arguments),this.state={isDetails:!1,isReadyToRender:!1,isDetailsModified:!1,operationsVisibilty:{add:!1,delete:!1,shareholder:!0},selectedRow:{},selectedItems:[],data:{},trailerKPIList:[],showAuthenticationLayout:!1},this.componentName=(this.props.vehicleWithTrailer?"vehicleWithTrailer":"")+"TrailerComponent",this.handleAdd=()=>{try{let e={...this.state.operationsVisibilty};e.delete=!1,e.add=!1,e.shareholder=!1,this.setState({isDetails:!0,selectedRow:{},operationsVisibilty:e})}catch(e){console.log("TrailerComposite:Error occured on handleAdd",e)}},this.handleShareholderSelectionChange=e=>{try{let{operationsVisibilty:t}={...this.state};t.delete=!1,this.setState({selectedShareholder:e,isReadyToRender:!1,selectedItems:[],operationsVisibilty:t}),this.getTrailerList(e),void 0!==this.props.vehicleWithTrailer&&!1!==this.props.vehicleWithTrailer||this.getKPIList(e)}catch(t){console.log("TrailerComposite:Error occured on handleShareholderSelectionChange",t)}},this.handleDelete=()=>{try{let i={...this.state.operationsVisibilty};i.delete=!1,this.setState({operationsVisibilty:i});for(var e=[],t=0;t<this.state.selectedItems.length;t++){let i=this.state.selectedShareholder,s=this.state.selectedItems[t].Common_Code,a=this.state.selectedItems[t].TrailerList_Carrier,r={keyDataCode:0,ShareHolderCode:i,KeyCodes:[{Key:T.UT,Value:s},{key:T._n,Value:a}]};e.push(r)}h()(d.jt2,C.tW(e,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data,s=t.IsSuccess;if(null!==t.ResultDataList&&void 0!==t.ResultDataList){s=t.ResultDataList.filter((function(e){return!e.IsSuccess})).length!==t.ResultDataList.length}let a=C.Cy(t,"TrailerDetails_DeleteStatus",["TrailerCode"]);s?(this.setState({isReadyToRender:!1,showAuthenticationLayout:!1}),this.getTrailerList(this.state.selectedShareholder),void 0!==this.props.vehicleWithTrailer&&!1!==this.props.vehicleWithTrailer||this.getKPIList(this.state.selectedShareholder),i.delete=!1,this.setState({selectedItems:[],operationsVisibilty:i,selectedRow:{},showAuthenticationLayout:!1})):(i.delete=!0,this.setState({operationsVisibilty:i,showAuthenticationLayout:!1})),a.messageResultDetails.forEach((e=>{e.keyFields.length>0&&(e.keyFields[0]="Trailer_Code")})),(0,p.toast)((0,o.jsx)(v.A,{children:(0,o.jsx)(m.A,{notificationMessage:a})}),{autoClose:"success"===a.messageType&&1e4})})).catch((e=>{throw e}))}catch(i){console.log("TrailerComposite:Error occured on handleDelet",i)}},this.handleRowClick=e=>{try{if(void 0===this.props.vehicleWithTrailer){let t={...this.state.operationsVisibilty};t.add=C.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.add,y.eQ),t.delete=C.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.remove,y.eQ),t.shareholder=!1,this.setState({isDetails:!0,selectedRow:e,selectedItems:[e],operationsVisibilty:t})}}catch(t){console.log("TrailerComposite:Error occured on Row click",t)}},this.handleSelection=e=>{try{let t={...this.state.operationsVisibilty};t.delete=e.length>0&&C.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.remove,y.eQ),this.setState({selectedItems:e,operationsVisibilty:t},(()=>{!0===this.props.vehicleWithTrailer&&this.props.handleSelectClick("trailer",this.state.selectedItems,this.state.data.Column)}))}catch(t){console.log("TrailerComposite:Error occured on handleSelection",t)}},this.savedEvent=(e,t,i)=>{try{let a={...this.state.operationsVisibilty};if("success"===i.messageType&&(a.add=C.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.add,y.eQ),a.delete=C.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.remove,y.eQ),this.setState({isDetailsModified:!0,operationsVisibilty:a})),"success"===i.messageType&&"add"===t){var s=[{Common_Code:e.Code,TrailerList_Carrier:e.CarrierCompanyCode,Common_Status:e.Active,Common_Shareholder:e.ShareholderCode}];this.setState({selectedItems:s})}(0,p.toast)((0,o.jsx)(v.A,{children:(0,o.jsx)(m.A,{notificationMessage:i})}),{autoClose:"success"===i.messageType&&1e4})}catch(a){console.log("TrailerComposite:Error occured on savedEvent",a)}},this.handleBack=()=>{try{let e={...this.state.operationsVisibilty};e.add=C.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.add,y.eQ),e.delete=!1,e.shareholder=!0,this.setState({isDetails:!1,selectedRow:{},selectedItems:[],operationsVisibilty:e,isReadyToRender:!1}),this.getTrailerList(this.state.selectedShareholder),void 0!==this.props.vehicleWithTrailer&&!1!==this.props.vehicleWithTrailer||this.getKPIList(this.state.selectedShareholder)}catch(e){console.log("TrailerComposite:Error occured on Back click",e)}},this.componentWillUnmount=()=>{C.D6(this.componentName+"GridState"),window.removeEventListener("beforeunload",(()=>C.D6(this.componentName+"GridState")))},this.handleNextClick=()=>{this.props.handleNextClick("trailer",this.state.selectedItems,this.state.data.Column)},this.authenticateDelete=()=>{try{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showAuthenticationLayout:e}),!1===e&&this.handleDelete()}catch(e){console.log("TrailerComposite : Error in authenticateDelete")}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})}}getKPIList(e){if(!0===C.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.view,y.bL)){var t={message:"",messageType:"critical",messageResultDetails:[]};let i={PageName:E.WK,InputParameters:[{key:"ShareholderCode",value:e}]};h()(d.dxq,C.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{var i=e.data;!0===i.IsSuccess?this.setState({trailerKPIList:i.EntityResult.ListKPIDetails}):(this.setState({trailerKPIList:[]}),console.log("Error in Trailer KPIList:",i.ErrorList),t.messageResultDetails.push({keyFields:[],keyValues:[],isSuccess:!1,errorMessage:i.ErrorList[0]})),t.messageResultDetails.length>0&&(0,p.toast)((0,o.jsx)(v.A,{children:(0,o.jsx)(m.A,{notificationMessage:t})}),{autoClose:"success"===t.messageType&&1e4})})).catch((e=>{console.log("Error while getting trailer KPIList:",e)}))}}getTrailerList(e){let t=c.LY.ROAD;h()(d.nxy+"?ShareholderCode="+e+"&Transportationtype="+t,C.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;if(!0===t.IsSuccess){if(this.setState({data:t.EntityResult,isReadyToRender:!0}),!0===this.props.vehicleWithTrailer&&this.props.trailerSelection.length>0){let e=this.props.trailerSelection;if(e.length>0){let i=[];e.forEach((e=>{let s=t.EntityResult.Table.find((t=>t.Common_Code===e.Trailer.Code));void 0!==s&&i.push(s)})),this.setState({selectedItems:i}),this.props.getTrailerList(i,t.EntityResult.Column)}}}else this.setState({data:{},isReadyToRender:!0}),console.log("Error in GetTrailerListForRole:",t.ErrorList)})).catch((e=>{this.setState({data:{},isReadyToRender:!0}),console.log("Error while getting Trailer List:",e)}))}componentDidMount(){window.addEventListener("beforeunload",(()=>C.D6(this.componentName+"GridState")));try{C.pJ(this.props.userDetails.EntityResult.IsArchived);let e={...this.state.operationsVisibilty};e.add=C.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.add,y.eQ);let t=this.props.userDetails.EntityResult.PrimaryShareholder;!0===this.props.vehicleWithTrailer&&(t=this.props.vehicleShareholder),this.setState({operationsVisibilty:e,selectedShareholder:t}),this.getTrailerList(t),void 0!==this.props.vehicleWithTrailer&&!1!==this.props.vehicleWithTrailer||this.getKPIList(t)}catch(e){console.log("TrailerComposite:Error occured on ComponentDidMount",e)}}componentWillReceiveProps(e){if(!0===e.vehicleWithTrailer&&e.trailerSelection.length>0){let t=e.trailerSelection;if(t.length>0){let e=[];t.forEach((t=>{let i=this.state.data.Table.find((e=>e.Common_Code===t.Trailer.Code));void 0!==i&&e.push(i)})),this.setState({selectedItems:e}),this.props.getTrailerList(e,this.state.data.Column)}}else!0===e.vehicleWithTrailer&&0===e.trailerSelection.length&&this.setState({selectedItems:[]})}render(){let e=!0,t="globalLoader";return!0===this.props.vehicleWithTrailer&&(e=!1,t="nestedList"),(0,o.jsx)(b.TranslationConsumer,{children:i=>(0,o.jsxs)("div",{children:[(0,o.jsx)(v.A,{children:void 0===this.props.vehicleWithTrailer?(0,o.jsx)(a.$,{operationsVisibilty:this.state.operationsVisibilty,breadcrumbItem:this.props.activeItem,shareholders:this.props.userDetails.EntityResult.ShareholderList,selectedShareholder:this.state.selectedShareholder,onShareholderChange:this.handleShareholderSelectionChange,onDelete:this.authenticateDelete,onAdd:this.handleAdd,handleBreadCrumbClick:this.props.handleBreadCrumbClick}):(0,o.jsx)(o.Fragment,{children:this.state.isDetails?"":(0,o.jsxs)("div",{className:"vehicleDataTableHeading",children:[(0,o.jsx)("div",{className:"col col-lg-10 dataTableHeadingPadding",children:(0,o.jsx)("h5",{children:i("Select_Trailers")})}),(0,o.jsx)("div",{className:"col col-lg-1 vehicleDataTableIcon",children:(0,o.jsx)("div",{className:(this.state.operationsVisibilty.add?"iconCircle ":"iconCircleDisable ")+"iconblock",onClick:()=>{this.state.operationsVisibilty.add&&this.handleAdd()},children:(0,o.jsx)(u.Icon,{root:"common",name:"badge-plus",size:"small",color:"white"})})})]})})}),this.state.isDetails?(0,o.jsx)(v.A,{children:(0,o.jsx)(D.default,{selectedRow:this.state.selectedRow,onBack:this.handleBack,onSaved:this.savedEvent,selectedShareholder:this.state.selectedShareholder},"TrailerDetails")}):this.state.isReadyToRender?(0,o.jsxs)("div",{children:[!0===this.props.vehicleWithTrailer?"":(0,o.jsx)(v.A,{children:(0,o.jsx)("div",{className:"kpiSummaryContainer",children:(0,o.jsx)(V.A,{kpiList:this.state.trailerKPIList,pageName:"Trailer"})})}),(0,o.jsxs)(v.A,{children:[(0,o.jsx)(l,{tableData:this.state.data.Table,columnDetails:this.state.data.Column,pageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,exportRequired:!this.props.vehicleWithTrailer,exportFileName:"TrailerList.xlsx",columnPickerRequired:!this.props.vehicleWithTrailer,columnGroupingRequired:!this.props.vehicleWithTrailer,selectionRequired:!0,terminalsToShow:this.props.userDetails.EntityResult.PageAttibutes.NoOfTerminalsToShow,selectedItems:this.state.selectedItems,onRowClick:this.handleRowClick,onSelectionChange:this.handleSelection,fillPage:e,parentComponent:this.componentName}),!0===this.props.vehicleWithTrailer?(0,o.jsx)("div",{className:"vehicleNextButton",children:(0,o.jsx)(u.Button,{onClick:this.handleNextClick,children:i("Common_Next")})}):""]})]}):(0,o.jsx)(S.A,{loadingClass:t,message:"Loading"}),this.state.showAuthenticationLayout?(0,o.jsx)(x.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:y.i.remove,functionGroup:y.eQ,handleClose:this.handleAuthenticationClose,handleOperation:this.handleDelete}):null,!0===this.props.vehicleWithTrailer?"":(0,o.jsx)(v.A,{children:(0,o.jsx)(p.ToastContainer,{hideProgressBar:!0,closeOnClick:!1,closeButton:!0,newestOnTop:!0,position:"bottom-right",toastClassName:"toast-notification-wrap"})})]})})}}const L=(0,g.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(R)},96935:(e,t,i)=>{i.d(t,{A:()=>u});i(65043);var s=i(72711),a=i(67907),r=i(24904),o=i(7523),l=i(35861),n=i(65187),h=i(85800),c=i(69062),d=i(70579);function u(e){let{data:t,modData:i,onFieldChange:u,validationErrors:p,listOptions:m,onDateTextChange:C,onAllTerminalsChange:v,onActiveStatusChange:g,onCarrierChange:T,children:y,isEnterpriseNode:D,modAttributeMetaDataList:b,attributeValidationErrors:S,onAttributeDataChange:V,isBonded:E,hazardousEnabled:x}=e;const R=(e,t)=>{let i=[];return i=e.find((e=>e.TerminalCode===t)),i.attributeValidationErrors},[L]=(0,a.useTranslation)();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:i.Code,label:L("Vehicle_Code"),indicator:"required",disabled:""!==t.Code,onChange:e=>u("Code",e),error:L(p.Code),reserveSpace:!1})}),(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:i.Name,label:L("Vehicle_Name"),indicator:"required",onChange:e=>u("Name",e),error:L(p.Name,{label:L("Vehicle_Name")}),reserveSpace:!1})}),(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.Description?"":i.Description,label:L("Vehicle_Desc"),onChange:e=>u("Description",e),error:L(p.Description),reserveSpace:!1})}),(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("Vehicle_CarrierCompany"),value:i.CarrierCompanyCode,options:m.carriers,onChange:e=>{T(e)},indicator:"required",error:L(p.CarrierCompanyCode),reserveSpace:!1,disabled:""!==t.Code,search:!0,noResultsMessage:L("noResultsMessage")})}),i.VehicleType!==o.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("Vehicle_ProductType"),value:i.ProductType,options:m.productType,onChange:e=>{u("ProductType",e)},indicator:"required",error:L(p.ProductType),reserveSpace:!1,search:!0,noResultsMessage:L("noResultsMessage")})}):"",y,(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.LicenseNo?"":i.LicenseNo,label:L("Vehicle_LicenseNo"),indicator:i.VehicleType!==o.$O.NonFillingVehicle?"required":"",onChange:e=>u("LicenseNo",e),error:L(p.LicenseNo),reserveSpace:!1})}),(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.DatePicker,{fluid:!0,value:null===i.LicenseNoExpiryDate?"":(0,c.OL)(i.LicenseNoExpiryDate),displayFormat:(0,l.F1)(),label:L("Vehicle_LicenseExpiry"),showYearSelector:"true",indicator:i.VehicleType!==o.$O.NonFillingVehicle||i.VehicleType===o.$O.NonFillingVehicle&&null!==i.LicenseNo&&""!==i.LicenseNo.trim()?"required":"",disablePast:!0,onChange:e=>u("LicenseNoExpiryDate",e),onTextChange:(e,t)=>{C("LicenseNoExpiryDate",e,t)},error:L(p.LicenseNoExpiryDate),reserveSpace:!1})}),(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.RoadTaxNo?"":i.RoadTaxNo,label:L("Vehicle_RoadTaxNo"),indicator:null!==i.RoadTaxNo&&""!==i.RoadTaxNo.trim()||!isNaN(Date.parse(i.RoadTaxNoIssueDate))||!isNaN(Date.parse(i.RoadTaxNoExpiryDate))?"required":"",onChange:e=>u("RoadTaxNo",e),error:L(p.RoadTaxNo),reserveSpace:!1})}),(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.DatePicker,{fluid:!0,value:null===i.RoadTaxNoIssueDate?"":(0,c.OL)(i.RoadTaxNoIssueDate),displayFormat:(0,l.F1)(),label:L("Vehicle_RoadTaxIssue"),showYearSelector:"true",indicator:null!==i.RoadTaxNo&&""!==i.RoadTaxNo.trim()||!isNaN(Date.parse(i.RoadTaxNoIssueDate))||!isNaN(Date.parse(i.RoadTaxNoExpiryDate))?"required":"",onChange:e=>u("RoadTaxNoIssueDate",e),onTextChange:(e,t)=>{C("RoadTaxNoIssueDate",e,t)},error:L(p.RoadTaxNoIssueDate),reserveSpace:!1})}),(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.DatePicker,{fluid:!0,value:null===i.RoadTaxNoExpiryDate?"":(0,c.OL)(i.RoadTaxNoExpiryDate),displayFormat:(0,l.F1)(),label:L("Vehicle_RoadTaxExpiry"),showYearSelector:"true",indicator:null!==i.RoadTaxNo&&""!==i.RoadTaxNo.trim()||!isNaN(Date.parse(i.RoadTaxNoIssueDate))||!isNaN(Date.parse(i.RoadTaxNoExpiryDate))?"required":"",disablePast:!0,onChange:e=>u("RoadTaxNoExpiryDate",e),onTextChange:(e,t)=>{C("RoadTaxNoExpiryDate",e,t)},error:L(p.RoadTaxNoExpiryDate),reserveSpace:!1})}),(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.Owner?"":i.Owner,label:L("Vehicle_owner"),onChange:e=>u("Owner",e),error:L(p.Owner),reserveSpace:!1})}),i.VehicleType!==o.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.TareWeight?"":i.TareWeight.toLocaleString(),label:L("Vehicle_Tareweight"),indicator:i.VehicleType!==o.$O.RigidTruck?null:"required",onChange:e=>u("TareWeight",e),error:L(p.TareWeight,{label:L("Vehicle_Tareweight")}),disabled:i.VehicleType!==o.$O.RigidTruck,reserveSpace:!1})}):"",i.VehicleType!==o.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.MaxLoadableWeight?"":i.MaxLoadableWeight.toLocaleString(),label:L("Vehicle_MaxLoadWeight"),indicator:i.VehicleType!==o.$O.RigidTruck?null:"required",onChange:e=>u("MaxLoadableWeight",e),error:L(p.MaxLoadableWeight,{label:L("Vehicle_MaxLoadWeight")}),disabled:i.VehicleType!==o.$O.RigidTruck,reserveSpace:!1})}):"",i.VehicleType!==o.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("Vehicle_UOMWeight"),value:i.WeightUOM,options:m.unitOfWeight,onChange:e=>{u("WeightUOM",e)},indicator:i.VehicleType!==o.$O.RigidTruck?null:"required",error:L(p.WeightUOM),reserveSpace:!1,search:!0,noResultsMessage:L("noResultsMessage"),disabled:i.VehicleType!==o.$O.RigidTruck})}):"",i.VehicleType!==o.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.Height?"":i.Height.toLocaleString(),label:L("Vehicle_height"),onChange:e=>u("Height",e),error:L(p.Height,{label:L("Vehicle_height")}),reserveSpace:!1})}):"",i.VehicleType!==o.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.Width?"":i.Width.toLocaleString(),label:L("Vehicle_Width"),onChange:e=>u("Width",e),error:L(p.Width,{label:L("Vehicle_Width")}),reserveSpace:!1})}):"",i.VehicleType!==o.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.Length?"":i.Length.toLocaleString(),label:L("Vehicle_Length"),onChange:e=>u("Length",e),error:L(p.Length,{label:L("Vehicle_Length")}),reserveSpace:!1})}):"",i.VehicleType!==o.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("Vehicle_UOMDimemsion"),value:i.LWHUOM,options:(0,l.r4)(m.unitOfDimension,L("Common_Select")),onChange:e=>{u("LWHUOM",e)},error:L(p.LWHUOM),reserveSpace:!1,search:!0,noResultsMessage:L("noResultsMessage")})}):"",i.VehicleType!==o.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.MaxLoadableVolume?"":i.MaxLoadableVolume.toLocaleString(),label:L("Vehicle_MaxLoadVolume"),onChange:e=>u("MaxLoadableVolume",e),error:L(p.MaxLoadableVolume),reserveSpace:!1,disabled:!0})}):"",i.VehicleType!==o.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("Vehicle_UOMVolume"),value:i.VolumeUOM,options:m.unitOfVolume,onChange:e=>{u("VolumeUOM",e)},error:L(p.VolumeUOM),reserveSpace:!1,disabled:!0})}):"",E&&i.VehicleType!==o.$O.NonFillingVehicle?(0,d.jsxs)("div",{className:"col-12 col-md-6 col-lg-4",children:[(0,d.jsxs)("div",{className:"ui single-input fluid disabled",style:{width:"30%",float:"left"},children:[(0,d.jsx)("div",{class:"ui input-label",children:(0,d.jsx)("span",{className:"input-label-message",children:L("VehicleInfo_Bonded")})}),(0,d.jsx)("div",{className:"input-wrap",children:(0,d.jsx)(s.Checkbox,{onChange:e=>u("IsBonded",e),checked:i.IsBonded})})]}),i.IsBonded&&i.VehicleType!==o.$O.NonFillingVehicle?(0,d.jsx)("div",{style:{width:"70%",float:"right"},children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.VehicleCustomsBondNo?"":i.VehicleCustomsBondNo,onChange:e=>u("VehicleCustomsBondNo",e),label:L("VehicleInfo_VehicleCustomsBondNo"),reserveSpace:!1,error:L(p.VehicleCustomsBondNo),indicator:i.IsBonded?"required":""})}):""]}):"",i.IsBonded&&i.VehicleType!==o.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.DatePicker,{fluid:!0,value:null===i.BondExpiryDate?"":(0,c.OL)(i.BondExpiryDate),displayFormat:(0,l.F1)(),label:L("VehicleInfo_BondExpiryDate"),showYearSelector:"true",indicator:i.IsBonded?"required":"",disablePast:!0,onChange:e=>u("BondExpiryDate",e),onTextChange:(e,t)=>{C("BondExpiryDate",e,t)},error:L(p.BondExpiryDate),reserveSpace:!1})}):"",x&&i.VehicleType===o.$O.RigidTruck?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,d.jsx)("div",{style:{width:"48%"},children:(0,d.jsx)(s.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("FP_HazardousCategory"),value:null===i.HazardousCategory?"":i.HazardousCategory,options:(0,l.r4)(m.hazardousTankerCategoryOptions,L("Common_Select")),onChange:e=>u("HazardousCategory",e),reserveSpace:!1,search:!0,noResultsMessage:L("noResultsMessage"),error:L(p.HazardousCategory)})}),(0,d.jsx)("div",{style:{width:"48%"},children:(0,d.jsx)(s.DatePicker,{fluid:!0,value:null===i.HazardousLicenseExpiry?"":(0,c.OL)(i.HazardousLicenseExpiry),displayFormat:(0,l.F1)(),label:L("DriverInfo_HazardousLicExpiry"),disablePast:!0,showYearSelector:"true",onChange:e=>u("HazardousLicenseExpiry",e),onTextChange:(e,t)=>{C("HazardousLicenseExpiry",e,t)},error:L(p.HazardousLicenseExpiry),reserveSpace:!1})})]})}):"",(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("Vehicle_Status"),value:i.Active,options:[{text:L("ViewShipment_Ok"),value:!0},{text:L("ViewShipmentStatus_Inactive"),value:!1}],onChange:e=>g(e)})}),(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.Remarks?"":i.Remarks,label:L("Vehicle_Remarks"),onChange:e=>u("Remarks",e),indicator:i.Active!==t.Active||""!==t.Code&&E&&i.IsBonded&&i.IsBonded!==t.IsBonded?"required":"",error:L(p.Remarks),reserveSpace:!1})}),D?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(r.y,{terminalList:m.terminalCodes,selectedTerminal:i.TerminalCodes,error:L(p.TerminalCodes),onFieldChange:u,onCheckChange:v})}):"",i.VehicleType!==o.$O.NonFillingVehicle?(0,d.jsx)("div",{}):"",i.VehicleType===o.$O.NonFillingVehicle?b.length>0?b.map((e=>(0,d.jsx)(n.A,{children:(0,d.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,d.jsx)(s.Accordion,{children:(0,d.jsx)(s.Accordion.Content,{className:"attributeAccordian",title:D?e.TerminalCode+" - "+L("Attributes_Header"):L("Attributes_Header"),children:(0,d.jsx)(h.n,{selectedAttributeList:e.attributeMetaDataList,handleCellDataEdit:V,attributeValidationErrors:R(S,e.TerminalCode)})})})})}))):null:b.length>0?(0,d.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,d.jsx)(s.Accordion,{children:(0,d.jsx)(s.Accordion.Content,{className:"attributeAccordian",title:L("VEHICLE_Attributes"),children:b.length>0?b.map((e=>(0,d.jsx)(n.A,{children:(0,d.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,d.jsx)(s.Accordion,{children:(0,d.jsx)(s.Accordion.Content,{className:"attributeAccordian",title:D?e.TerminalCode+" - "+L("Attributes_Header"):L("Attributes_Header"),children:(0,d.jsx)(h.n,{selectedAttributeList:e.attributeMetaDataList,handleCellDataEdit:V,attributeValidationErrors:R(S,e.TerminalCode)})})})})}))):null})})}):null]})}u.defaultProps={listOptions:{carriers:[],productType:[],unitOfWeight:[],unitOfVolume:[],unitOfDimension:[],terminalCodes:[],hazardousTankerCategoryOptions:[]},isEnterpriseNode:!1,hazardousEnabled:!1}}}]);
//# sourceMappingURL=7055.327074fe.chunk.js.map