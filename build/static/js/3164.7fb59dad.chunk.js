"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[3164],{53164:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var s=a(65043),r=a(97508),i=a(65187),l=a(11981),o=a(43503),n=a(14159),c=a(67907),d=a(72711),u=a(69062),h=a(35861),p=a(70579);function m(e){let{railMarineFinishedProductInfo:t,validationErrors:a,listOptions:s,onFieldChange:r,onDateTextChange:i,selectedCompartment:l,marineDispatchManualEntryEnabled:o}=e;return(0,p.jsx)(c.TranslationConsumer,{children:e=>(0,p.jsx)("div",{children:(0,p.jsx)("div",{className:"detailsContainer",children:(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Select,{fluid:!0,placeholder:"Select",value:t.CompartmentSeqNoInVehicle,label:e("MarineDispatchManualEntry_CompSeqNo"),options:u.Zj(s.compartmentSeqNoInVehicleList),onChange:e=>r("FP","CompartmentSeqNoInVehicle",e),multiple:!1,reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),indicator:"required",error:e(a.CompartmentSeqNoInVehicle),disabled:null===l.DispatchCompartmentStatus})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Select,{fluid:!0,placeholder:"Select",value:t.BayCode,label:e("MarineDispatchManualEntry_Bay"),options:u.Zj(s.berthList),onChange:e=>r("FP","BayCode",e),multiple:!1,reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),indicator:"required",error:e(a.BayCode),disabled:!o})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Select,{fluid:!0,placeholder:"Select",value:t.BCUCode,label:e("BCU_Code"),options:u.Zj(s.bcuCodeList),onChange:e=>r("FP","BCUCode",e),multiple:!1,reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),indicator:"required",error:e(a.BCUCode),disabled:!o})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Select,{fluid:!0,placeholder:"Select",value:t.LoadingArm,label:e("MarineDispatchManualEntry_LoadingArm"),options:u.Zj(s.loadingArmList),onChange:e=>r("FP","LoadingArm",e),multiple:!1,reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),indicator:"required",error:e(a.LoadingArm),disabled:!o})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.DatePicker,{fluid:!0,value:new Date(t.StartTime),label:e("MarineDispatchManualEntry_MandatoryLoadStartTime"),disablePast:!1,minuteStep:1,type:"datetime",indicator:"required",onChange:e=>r("FP","StartTime",e),displayFormat:(0,h.F1)(),reserveSpace:!1,disableFuture:!0,onTextChange:(e,t)=>{i("StartTime",e,t)},error:e(a.StartTime),disabled:!o})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.DatePicker,{fluid:!0,value:new Date(t.EndTime),label:e("MarineDispatchManualEntry_MandatoryLoadEndTime"),disablePast:!1,minuteStep:1,type:"datetime",indicator:"required",onChange:e=>r("FP","EndTime",e),displayFormat:(0,h.F1)(),reserveSpace:!1,disableFuture:!0,onTextChange:(e,t)=>{i("EndTime",e,t)},error:e(a.EndTime),disabled:!o})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.FinishedProductCode,label:e("MarineDispatchManualEntry_FinishedProduct"),disabled:!0,onChange:e=>r("FP","FinishedProductCode",e),reserveSpace:!1,error:e(a.FinishedProductCode)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Select,{fluid:!0,placeholder:"Select",value:t.QuantityUOM,label:e("MarineDispatchManualEntry_QuantityUOM"),options:u.Zj(s.quantityUOMList),onChange:e=>r("FP","QuantityUOM",e),multiple:!1,reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),indicator:"required",error:e(a.QuantityUOM),disabled:!o})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.TransactionID,label:e("MarineDispatchManualEntry_TransactionNo"),onChange:e=>r("FP","TransactionID",e),reserveSpace:!1,error:e(a.TransactionID),disabled:!o})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.Remarks,label:e("MarineDispatchManualEntry_Remarks"),onChange:e=>r("FP","Remarks",e),reserveSpace:!1,error:e(a.Remarks),disabled:!o})})]})})})})}function M(e){let{railMarineFinishedProductInfo:t,onFieldChange:a,listOptions:s,validationErrors:r}=e;return(0,p.jsx)(c.TranslationConsumer,{children:e=>(0,p.jsx)("div",{className:"detailsContainer",children:(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.GrossQuantity,label:e("GrossQuantity"),indicator:"required",onChange:e=>a("FP","GrossQuantity",e),reserveSpace:!1,error:e(r.GrossQuantity)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.NetQuantity,label:e("NetQuantity"),onChange:e=>a("FP","NetQuantity",e),reserveSpace:!1,error:e(r.NetQuantity)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.Temperature,label:e("Temperature"),onChange:e=>a("FP","Temperature",e),reserveSpace:!1,error:e(r.Temperature)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Select,{fluid:!0,value:t.TemperatureUOM,options:u.Zj(s.temperatureUOMs),placeholder:"Select",label:e("MarineDispatchManualEntry_TemperatureUOM"),onChange:e=>a("FP","TemperatureUOM",e),multiple:!1,reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),error:e(r.TemperatureUOM)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.ProductDensity,label:e("ViewShipment_Density"),onChange:e=>a("FP","ProductDensity",e),reserveSpace:!1,error:e(r.ProductDensity)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Select,{fluid:!0,value:t.ProductDensityUOM,options:u.Zj(s.densityUOMs),placeholder:"Select",label:e("ViewShipment_DensityUOM"),onChange:e=>a("FP","ProductDensityUOM",e),multiple:!1,reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),error:e(r.ProductDensityUOM)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.ReferenceDensity,label:e("MarineDispatchManualEntry_ReferenceDensity"),onChange:e=>a("FP","ReferenceDensity",e),reserveSpace:!1,error:e(r.ReferenceDensity)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Select,{fluid:!0,value:t.MeterCode,options:u.Zj(s.meterCodes),placeholder:"Select",label:e("Meter_Code"),onChange:e=>a("FP","MeterCode",e),multiple:!1,reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),error:e(r.MeterCode)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.StartTotalizer,label:e("StartTotalizer"),onChange:e=>a("FP","StartTotalizer",e),reserveSpace:!1,error:e(r.StartTotalizer)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.EndTotalizer,label:e("EndTotalizer"),onChange:e=>a("FP","EndTotalizer",e),reserveSpace:!1,error:e(r.EndTotalizer)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.NetStartTotalizer,label:e("MarineDispatchManualEntry_NetStartTotalizer"),onChange:e=>a("FP","NetStartTotalizer",e),reserveSpace:!1,error:e(r.NetStartTotalizer)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.NetEndTotalizer,label:e("MarineDispatchManualEntry_NetEndTotalizer"),onChange:e=>a("FP","NetEndTotalizer",e),reserveSpace:!1,error:e(r.NetEndTotalizer)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.GrossMass,label:e("LoadingDetailsEntry_GrossMass"),onChange:e=>a("FP","GrossMass",e),reserveSpace:!1,error:e(r.GrossMass)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Select,{fluid:!0,value:t.MassUOM,options:u.Zj(s.massUOMs),placeholder:"Select",label:e("LoadingDetailsEntry_MassUom"),onChange:e=>a("FP","MassUOM",e),multiple:!1,reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),error:e(r.MassUOM)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.Pressure,label:e("Pressure"),onChange:e=>a("FP","Pressure",e),reserveSpace:!1,error:e(r.Pressure)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Select,{fluid:!0,value:t.PressureUOM,options:u.Zj(s.pressureUOMs),placeholder:"Select",label:e("LoadingDetailsEntry_PressureUOM"),onChange:e=>a("FP","PressureUOM",e),multiple:!1,reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),error:e(r.PressureUOM)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.CalculatedGross,label:e("LoadingDetails_CalculatedGross"),onChange:e=>a("FP","CalculatedGross",e),reserveSpace:!1,error:e(r.CalculatedGross)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.CalculatedNet,label:e("LoadingDetails_CalculatedNet"),onChange:e=>a("FP","CalculatedNet",e),reserveSpace:!1,error:e(r.CalculatedNet)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Select,{fluid:!0,value:t.CalculatedValueUOM,options:u.Zj(s.calculatedValueUOMs),placeholder:"Select",label:e("LoadingDetails_CalculatedValueUOM"),onChange:e=>a("FP","CalculatedValueUOM",e),multiple:!1,reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),error:e(r.CalculatedValueUOM)})})]})})})}m.defaultProps={},M.defaultProps={};var E=a(85800);function C(e){let{railMarineBaseProductInfo:t,onFieldChange:a,listOptions:s,code:r,selectedAttributeList:l,handleAttributeCellDataEdit:o,attributeValidationErrors:n,isEnterpriseNode:h,validationErrors:m}=e;const M=(e,t)=>{let a=[];return a=e.find((e=>e.TerminalCode===t)),a.attributeValidationErrors};return(0,p.jsx)(c.TranslationConsumer,{children:e=>(0,p.jsxs)("div",{className:"detailsContainer",children:[(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.GrossQuantity,label:e("GrossQuantity"),indicator:"required",onChange:e=>a("BaseProduct","GrossQuantity",e),reserveSpace:!1,error:e(m.GrossQuantity)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.NetQuantity,label:e("NetQuantity"),onChange:e=>a("BaseProduct","NetQuantity",e),reserveSpace:!1,error:e(m.NetQuantity)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.Temperature,label:e("Temperature"),onChange:e=>a("BaseProduct","Temperature",e),reserveSpace:!1,error:e(m.Temperature)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Select,{fluid:!0,value:t.TemperatureUOM,options:u.Zj(s.temperatureUOMs),placeholder:"Select",label:e("MarineDispatchManualEntry_TemperatureUOM"),onChange:e=>a("BaseProduct","TemperatureUOM",e),multiple:!1,reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),error:e(m.TemperatureUOM)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.ProductDensity,label:e("ViewShipment_Density"),onChange:e=>a("BaseProduct","ProductDensity",e),reserveSpace:!1,error:e(m.ProductDensity)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Select,{fluid:!0,value:t.ProductDensityUOM,options:u.Zj(s.densityUOMs),placeholder:"Select",label:e("ViewShipment_DensityUOM"),onChange:e=>a("BaseProduct","ProductDensityUOM",e),multiple:!1,reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),error:e(m.ProductDensityUOM)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.ReferenceDensity,label:e("MarineDispatchManualEntry_ReferenceDensity"),onChange:e=>a("BaseProduct","ReferenceDensity",e),reserveSpace:!1,error:e(m.ReferenceDensity)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Select,{fluid:!0,value:t.MeterCode,options:u.Zj(s.meterCodes),placeholder:"Select",label:e("Meter_Code"),onChange:e=>a("BaseProduct","MeterCode",e),multiple:!1,reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),error:e(m.MeterCode)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.StartTotalizer,label:e("StartTotalizer"),onChange:e=>a("BaseProduct","StartTotalizer",e),reserveSpace:!1,error:e(m.StartTotalizer)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.EndTotalizer,label:e("EndTotalizer"),onChange:e=>a("BaseProduct","EndTotalizer",e),reserveSpace:!1,error:e(m.EndTotalizer)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.NetStartTotalizer,label:e("MarineDispatchManualEntry_NetStartTotalizer"),onChange:e=>a("BaseProduct","NetStartTotalizer",e),reserveSpace:!1,error:e(m.NetStartTotalizer)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.NetEndTotalizer,label:e("MarineDispatchManualEntry_NetEndTotalizer"),onChange:e=>a("BaseProduct","NetEndTotalizer",e),reserveSpace:!1,error:e(m.NetEndTotalizer)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.GrossMass,label:e("LoadingDetailsEntry_GrossMass"),onChange:e=>a("BaseProduct","GrossMass",e),reserveSpace:!1,error:e(m.GrossMass)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Select,{fluid:!0,value:t.MassUOM,options:u.Zj(s.massUOMs),placeholder:"Select",label:e("LoadingDetailsEntry_MassUom"),onChange:e=>a("BaseProduct","MassUOM",e),multiple:!1,reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),error:e(m.MassUOM)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Select,{fluid:!0,value:t.TankCode,options:u.Zj(s.tankList),placeholder:"Select",label:e("TankCode"),onChange:e=>a("BaseProduct","TankCode",e),multiple:!1,reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),error:e(m.TankCode)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.Pressure,label:e("Pressure"),onChange:e=>a("BaseProduct","Pressure",e),reserveSpace:!1,error:e(m.Pressure)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Select,{fluid:!0,value:t.PressureUOM,options:u.Zj(s.pressureUOMs),placeholder:"Select",label:e("LoadingDetailsEntry_PressureUOM"),onChange:e=>a("BaseProduct","PressureUOM",e),multiple:!1,reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),error:e(m.PressureUOM)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.TankStartGrossQuantity,label:e("LoadingDetailsEntry_TankStartGrossQuantity"),onChange:e=>a("BaseProduct","TankStartGrossQuantity",e),reserveSpace:!1,error:e(m.TankStartGrossQuantity)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.TankEndGrossQuantity,label:e("LoadingDetailsEntry_TankEndGrossQuantity"),onChange:e=>a("BaseProduct","TankEndGrossQuantity",e),reserveSpace:!1,error:e(m.TankEndGrossQuantity)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.TankStartNetQuantity,label:e("LoadingDetailsEntry_TankStartNetQuantity"),onChange:e=>a("BaseProduct","TankStartNetQuantity",e),reserveSpace:!1,error:e(m.TankStartNetQuantity)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.TankEndNetQuantity,label:e("LoadingDetailsEntry_TankEndNetQuantity"),onChange:e=>a("BaseProduct","TankEndNetQuantity",e),reserveSpace:!1,error:e(m.TankEndNetQuantity)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.TankStartGrossMass,label:e("LoadingDetailsEntry_TankStartGrossMass"),onChange:e=>a("BaseProduct","TankStartGrossMass",e),reserveSpace:!1,error:e(m.TankStartMass)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.TankEndGrossMass,label:e("LoadingDetailsEntry_TankEndGrossMass"),onChange:e=>a("BaseProduct","TankEndGrossMass",e),reserveSpace:!1,error:e(m.TankEndMass)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.TankStartPressure,label:e("LoadingDetailsEntry_TankStartPressure"),onChange:e=>a("BaseProduct","TankStartPressure",e),reserveSpace:!1,error:e(m.TankStartPressure)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.TankEndPressure,label:e("LoadingDetailsEntry_TankEndPressure"),onChange:e=>a("BaseProduct","TankEndPressure",e),reserveSpace:!1,error:e(m.TankEndPressure)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.CalculatedGross,label:e("LoadingDetails_CalculatedGross"),onChange:e=>a("BaseProduct","CalculatedGross",e),reserveSpace:!1,error:e(m.CalculatedGross)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Input,{fluid:!0,value:t.CalculatedNet,label:e("LoadingDetails_CalculatedNet"),onChange:e=>a("BaseProduct","CalculatedNet",e),reserveSpace:!1,error:e(m.CalculatedNet)})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(d.Select,{fluid:!0,value:t.CalculatedValueUOM,options:u.Zj(s.calculatedValueUOMs),placeholder:"Select",label:e("LoadingDetails_CalculatedValueUOM"),onChange:e=>a("BaseProduct","CalculatedValueUOM",e),multiple:!1,reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),error:e(m.CalculatedValueUOM)})})]}),l.length>0?l.map((t=>(0,p.jsx)(i.A,{children:(0,p.jsx)(d.Accordion,{children:(0,p.jsx)(d.Accordion.Content,{className:"attributeAccordian",title:h?t.TerminalCode+" - "+e("Attributes_Header"):e("Attributes_Header"),children:(0,p.jsx)(E.n,{selectedAttributeList:t.attributeMetaDataList,handleCellDataEdit:(e,t)=>{o(e,t,r)},attributeValidationErrors:M(n,t.TerminalCode)})})})}))):null]})})}C.defaultProps={};var g=a(9256),y=a(53536),v=a.n(y),D=a(46100),S=a(44192),b=a(93779),f=a(40854),T=a.n(f),P=a(7523),L=a(72067),I=a(15417),O=a(80312),j=a(62900);class U extends s.Component{constructor(){super(...arguments),this.state={railMarineFinishedProductInfo:v().cloneDeep(D.rw),railMarineBaseProductInfo:[],validationErrors:u.Th(S.te),validationErrorsForBP:[],selectedCompartment:{},compartmentSeqNoInVehicleList:[],marineCompartmentDetails:[],berthList:[],bcuCodeList:[],loadingArmList:[],quantityUOMList:[],densityUOMList:[],temperatureUOMList:[],massUOMList:[],pressureUOMList:[],calculatedValueUOMList:[],meterCodeList:[],tankList:[],productList:[],activeIndex:0,manualEntrySaveEnable:!1,attributeMetaDataList:[],attributeValidationErrors:[],BPattributeValidationErrors:[],compartmentAttributeMetaDataList:[],baseProductAttributeMetaDataList:[],selectedAttributeList:[],BPselectedAttributeList:[],attribute:[],marineDispatchManualEntryEnabled:!1,showAuthenticationLayout:!1,tempLoadingDetails:{}},this.handleAttributeCellDataEdit=(e,t)=>{try{const a=v().cloneDeep(this.state.attributeValidationErrors);a.forEach((a=>{a.TerminalCode===e.TerminalCode&&(a.attributeValidationErrors[e.Code]=u.I5(e,t))})),this.setState({attributeValidationErrors:a}),e.DataType!==P.IB.INT&&e.DataType!==P.IB.LONG&&e.DataType!==P.IB.FLOAT&&e.DataType!==P.IB.DOUBLE||(t=u.bo(t)),e.DefaultValue=t,this.setState({attribute:e})}catch(a){console.log("TrailerDetailsComposite:Error occured on handleAttributeCellDataEdit",a)}},this.handleBPAttributeCellDataEdit=(e,t,a)=>{try{const s=v().cloneDeep(this.state.BPattributeValidationErrors);s[a].forEach((a=>{a.TerminalCode===e.TerminalCode&&(a.attributeValidationErrors[e.Code]=u.I5(e,t))})),this.setState({BPattributeValidationErrors:s}),e.DataType!==P.IB.INT&&e.DataType!==P.IB.LONG&&e.DataType!==P.IB.FLOAT&&e.DataType!==P.IB.DOUBLE||(t=u.bo(t)),e.DefaultValue=t,this.setState({attribute:e})}catch(s){console.log("MarineReceiptManualEntryDetails:Error occured on handleBPAttributeCellDataEdit",s)}},this.handleValidationErrorFilter=(e,t)=>{let a=[];return a=e.find((e=>e.TerminalCode===t)),a.attributeValidationErrors},this.handleChange=(e,t,a)=>{try{const s=v().cloneDeep(this.state.validationErrors),r=v().cloneDeep(this.state.validationErrorsForBP);if("FP"===e){const e=v().cloneDeep(this.state.railMarineFinishedProductInfo);if(e[t]=a,void 0!==S.te[t]&&(s[t]=u.jr(S.te[t],a)),this.setState({railMarineFinishedProductInfo:e,validationErrors:s}),"CompartmentSeqNoInVehicle"===t){this.getSelectedCompartment(a);let e=v().cloneDeep(D.rw);""!==a&&(e.CompartmentSeqNoInVehicle=a,e.QuantityUOM=this.props.QuantityUOM);const t={...this.state.validationErrors};Object.keys(t).forEach((function(e){t[e]=""})),this.setState({railMarineFinishedProductInfo:e,validationErrors:t,bcuCodeList:[],loadingArmList:[],manualEntrySaveEnable:u.ab(this.props.userDetails.EntityResult.FunctionsList,O.i.modify,O.QB)})}"BayCode"===t?this.setState({railMarineFinishedProductInfo:e},(()=>{this.getBCUListByBerth()})):"BCUCode"===t?this.setState({railMarineFinishedProductInfo:e},(()=>{this.GetLoadingArmListByBCU()})):"LoadingArm"===t&&this.setState({railMarineFinishedProductInfo:e},(()=>{this.GetMetersForLA()}))}else if("BaseProduct"===e){const e=v().cloneDeep(this.state.railMarineBaseProductInfo);e[this.state.activeIndex-1][t]=a,void 0!==S.RJ[t]&&(r[this.state.activeIndex-1][t]=u.jr(S.RJ[t],a)),this.setState({railMarineBaseProductInfo:e,validationErrorsForBP:r})}}catch(s){console.log("MarineDispatchManualEntryComposite:Error occured on handleChange",s)}},this.handleDateTextChange=(e,t,a)=>{try{var s=v().cloneDeep(this.state.validationErrors),r=v().cloneDeep(this.state.railMarineFinishedProductInfo);s[e]=a,r[e]=t,this.setState({validationErrors:s,railMarineFinishedProductInfo:r})}catch(a){console.log("MarineReceiptDetailsComposite:Error occured on handleDateTextChange",a)}},this.handleTabChange=e=>{this.GetTankList(e),this.setState({activeIndex:e})},this.addLoadingDetails=()=>{try{this.setState({manualEntrySaveEnable:!1,marineDispatchManualEntryEnabled:!1});let e=v().cloneDeep(this.state.tempLoadingDetails);this.manualEntrySave(e)}catch(e){console.log("Marine Loading DetailsComposite : Error in save Marine Loading details")}},this.handleSave=()=>{try{let e=this.fillAttributeDetails();if(this.fillBPAttributeDetails(this.state.railMarineBaseProductInfo),this.validateSave()){let t=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,a=v().cloneDeep(e);this.setState({showAuthenticationLayout:t,tempLoadingDetails:a},(()=>{!1===t&&this.addLoadingDetails()}))}else this.setState({manualEntrySaveEnable:u.ab(this.props.userDetails.EntityResult.FunctionsList,O.i.modify,O.QB),marineDispatchManualEntryEnabled:!0,showAuthenticationLayout:!1})}catch(e){console.log("MarineShipmentDetailsComposite:Error occured on handleSave",e)}},this.handleReset=()=>{try{const{validationErrors:t,validationErrorsForBP:a,railMarineBaseProductInfo:s}=this.state;Object.keys(t).forEach((function(e){t[e]=""})),a.forEach(((e,t)=>{Object.keys(a[t]).forEach((function(e){a[t][e]=""}))}));var e=v().cloneDeep(D.rw);e.StartTime=new Date,e.EndTime=new Date,e.QuantityUOM=this.props.QuantityUOM,s.forEach(((e,t)=>{s[t]=v().cloneDeep(D.gG)})),this.setState({validationErrors:t,validationErrorsForBP:a,railMarineFinishedProductInfo:e,railMarineBaseProductInfo:s,bcuCodeList:[],loadingArmList:[],productList:[],activeIndex:0,selectedCompartment:{},selectedAttributeList:[],BPselectedAttributeList:[],manualEntrySaveEnable:u.ab(this.props.userDetails.EntityResult.FunctionsList,O.i.modify,O.QB),marineDispatchManualEntryEnabled:!1})}catch(t){console.log("MarineReceiptManualEntryDetails:Error occured on handleChange",t)}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})}}componentDidMount(){this.setDefaultValues(),this.getMarineCompartmentDetails(),this.getBerthList(),this.getQuantityUOMList(),this.getDensityUOMList(),this.getTemperatureUOMList(),this.getMassUOMList(),this.getPressureUOMList(),this.getCalculatedValueUOMList(),this.GetMeterList(),this.setState({manualEntrySaveEnable:u.ab(this.props.userDetails.EntityResult.FunctionsList,O.i.modify,O.QB)})}setDefaultValues(){D.rw.StartTime=new Date,D.rw.EndTime=new Date,D.rw.QuantityUOM=this.props.QuantityUOM,this.setState({railMarineFinishedProductInfo:v().cloneDeep(D.rw)})}getMarineDispatchManualEntryEnabled(e){let t=Object.keys(P.FG),a="";for(const s of t)if(P.FG[s]===e.DispatchCompartmentStatus){a=s;break}T()(L.Gkh+"?ShareholderCode="+e.ShareholderCode+"&DispatchStatus="+this.props.DispatchStatus+"&DispatchCompartmentStatus="+a,u.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let{marineDispatchManualEntryEnabled:e}=this.state;e="TRUE"===t.EntityResult,this.setState({marineDispatchManualEntryEnabled:e})}else this.setState({marineDispatchManualEntryEnabled:!1}),console.log("Error in getMarineDispatchManualEntryEnabled:",t.ErrorList)})).catch((e=>{console.log("Error while getting Marine Dispatch ManualEntry Enabled:",e)}))}initializeAttributeForBP(){let e=Object.keys(this.state.railMarineBaseProductInfo),{BPselectedAttributeList:t}=this.state;e.forEach((e=>{t[e]=[]})),this.setState({BPselectedAttributeList:t})}getAttributes(){try{T()(L.fKH,u.tW([I.Ki,I.AN,I.wk],this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let{BPattributeValidationErrors:e}=this.state;Object.keys(this.state.railMarineBaseProductInfo).forEach((a=>{e[a]=u.Fl(t.EntityResult.marineLoadingDetailsBP)})),this.setState({attributeMetaDataList:v().cloneDeep(t.EntityResult.marineLoadingDetailsFP),attributeValidationErrors:u.Fl(t.EntityResult.marineLoadingDetailsFP),compartmentAttributeMetaDataList:v().cloneDeep(t.EntityResult.marineLoadingDetailsAdditive),baseProductAttributeMetaDataList:v().cloneDeep(t.EntityResult.marineLoadingDetailsBP),BPattributeValidationErrors:e},(()=>{this.props.userDetails.EntityResult.IsEnterpriseNode?(this.state.baseProductAttributeMetaDataList.length>0&&this.baseProductSelectionChange([this.state.baseProductAttributeMetaDataList[0].TerminalCode]),this.state.attributeMetaDataList.length>0&&this.terminalSelectionChange([this.state.attributeMetaDataList[0].TerminalCode])):this.localNodeAttribute()}))}else console.log("Failed to get Attributes")}))}catch(e){console.log("Error while getting Attributes:",e)}}localNodeAttribute(){try{var e=v().cloneDeep(this.state.attributeMetaDataList),t=v().cloneDeep(this.state.baseProductAttributeMetaDataList);Array.isArray(e)&&e.length>0&&this.terminalSelectionChange([e[0].TerminalCode]),Array.isArray(t)&&t.length>0&&this.baseProductSelectionChange([t[0].TerminalCode])}catch(a){console.log("TrailerDetailsComposite:Error occured on localNodeAttribute",a)}}terminalSelectionChange(e){try{let r=[];var t=[],a=[];t=v().cloneDeep(this.state.attributeMetaDataList),a=v().cloneDeep(this.state.selectedAttributeList);const i=v().cloneDeep(this.state.attributeValidationErrors);var s=v().cloneDeep(this.state.railMarineFinishedProductInfo);e.forEach((e=>{var i=a.find((t=>t.TerminalCode===e));void 0===i?t.forEach((function(t){if(t.TerminalCode===e){var a=s.Attributes.find((t=>t.TerminalCode===e));void 0!==a&&t.attributeMetaDataList.forEach((function(e){var t=a.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),r.push(t)}})):r.push(i)})),a=[],a=r,i.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.setState({selectedAttributeList:a,attributeValidationErrors:i})}catch(r){console.log("TrailerDetailsComposite:Error occured on terminalSelectionChange",r)}}baseProductSelectionChange(e){Object.keys(this.state.railMarineBaseProductInfo).forEach((t=>{try{let i=[];var a=[],s=[];a=v().cloneDeep(this.state.baseProductAttributeMetaDataList),s=v().cloneDeep(this.state.BPselectedAttributeList[t]);const l=v().cloneDeep(this.state.BPattributeValidationErrors[t]);var r=v().cloneDeep(this.state.railMarineBaseProductInfo[t]);e.forEach((e=>{var t=s.find((t=>t.TerminalCode===e));void 0===t?a.forEach((function(t){if(t.TerminalCode===e){var a=r.Attributes.find((t=>t.TerminalCode===e));void 0!==a&&t.baseProductAttributeMetaDataList.forEach((function(e){var t=a.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),i.push(t)}})):i.push(t)})),s=[],s=i,l.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.BPattributeValidationErrors).forEach((e=>t.BPattributeValidationErrors[e]=""))}));let o=this.state.BPselectedAttributeList,n=this.state.BPattributeValidationErrors;o[t]=s,n[t]=l,this.setState({BPselectedAttributeList:o,BPattributeValidationErrors:n})}catch(i){console.log("MarineReceiptManualEntryDetails:Error occured on terminalSelectionChangeBP",i)}}))}fillAttributeDetails(){try{let e=v().cloneDeep(this.state.selectedAttributeList),t=v().cloneDeep(this.state.railMarineFinishedProductInfo);return t.Attributes=[],e.forEach((e=>{let a={ListOfAttributeData:[]};a.TerminalCode=e.TerminalCode,e.attributeMetaDataList.forEach((e=>{a.ListOfAttributeData.push({AttributeCode:e.Code,AttributeValue:e.DefaultValue})})),t.Attributes.push(a)})),this.setState({railMarineFinishedProductInfo:t}),t}catch(e){console.log("TrailerDetailsComposite:Error occured on fillAttributeDetails",e)}}fillBPAttributeDetails(e){Object.keys(e).forEach((t=>{try{let a=v().cloneDeep(this.state.BPselectedAttributeList[t]);return e[t].Attributes=[],a.forEach((a=>{let s={ListOfAttributeData:[]};s.TerminalCode=a.TerminalCode,a.attributeMetaDataList.forEach((e=>{s.ListOfAttributeData.push({AttributeCode:e.Code,AttributeValue:e.DefaultValue})})),e[t].Attributes.push(s)})),this.setState({railMarineBaseProductInfo:e}),e}catch(a){console.log("MarineReceiptManualEntryDetails:Error occured on fillFPAttributeDetails",a)}}))}getPartialMarineDispatchData(){var e=[{key:"MarineDispatchCode",value:this.props.dispatchCode},{key:"CompartmentSeqNoInVehicle",value:this.state.selectedCompartment.CompartmentSeqNoInVehicle}],t={ShareHolderCode:this.state.selectedCompartment.ShareholderCode,keyDataCode:b.yI,KeyCodes:e};T()(L.Atx,u.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult.Table,s=[],r=[],i=[];a.forEach((e=>{s.push(e),r.push(u.Th(S.RJ)),i.push(v().cloneDeep(D.gG))}),(()=>{})),this.setState({productList:s,validationErrorsForBP:r,railMarineBaseProductInfo:i},(()=>{this.initializeAttributeForBP(),this.getAttributes()}))}})).catch((e=>{console.log("Error while getPartialMarineDispatchData:",e)}))}getBerthList(){T()(L.sML,u.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult.Table,s=[];a.forEach((e=>{s.push(e.Code)})),this.setState({berthList:s})}else console.log("Error in getBerthList:",t.ErrorList)})).catch((e=>{console.log("Error while getBerthList:",e)}))}getBCUListByBerth(){const e=v().cloneDeep(this.state.railMarineFinishedProductInfo);T()(L.XRM+"?Berth="+e.BayCode,u.Jm(this.props.tokenDetails.tokenInfo)).then((t=>{var a=t.data;if(!0===a.IsSuccess){var s=a.EntityResult,r=[];s.forEach((e=>{r.push(e.DeviceCode)})),this.setState({bcuCodeList:r}),1===r.length&&(e.BCUCode=r[0],this.setState({railMarineFinishedProductInfo:e}),this.getBCUDetails(r[0]),this.GetLoadingArmListByBCU())}else console.log("Error in getBCUListByBerth:",a.ErrorList)})).catch((e=>{console.log("Error while getBCUListByBerth:",e)}))}GetLoadingArmListByBCU(){const e=v().cloneDeep(this.state.railMarineFinishedProductInfo);T()(L.OC2+"?BCUCode="+e.BCUCode,u.Jm(this.props.tokenDetails.tokenInfo)).then((t=>{var a=t.data;if(!0===a.IsSuccess){var s=a.EntityResult.Table,r=[];s.forEach((e=>{r.push(e.LoadingArmCode)})),this.setState({loadingArmList:r}),1===r.length&&(e.LoadingArm=r[0],this.setState({railMarineFinishedProductInfo:e}),this.GetMetersForLA())}else console.log("Error in GetLoadingArmListByBCU:",a.ErrorList)})).catch((e=>{console.log("Error while GetLoadingArmListByBCU:",e)}))}getBCUDetails(e){try{var t=[{key:b.wX,value:e}],a={ShareHolderCode:"",keyDataCode:b.wX,KeyCodes:t};T()(L.T1y,u.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;if(!0===t.IsSuccess){let e=t.EntityResult,a=v().cloneDeep(this.state.railMarineFinishedProductInfo);a.TemperatureUOM=e.TemperatureUOM,a.ProductDensityUOM=e.DensityUOM;let s=v().cloneDeep(this.state.railMarineBaseProductInfo);s.map((t=>{t.TemperatureUOM=e.TemperatureUOM,t.ProductDensityUOM=e.DensityUOM})),this.setState({railMarineFinishedProductInfo:a,railMarineBaseProductInfo:s})}}))}catch(s){console.log("TruckShipmentManualEntryDetailsComposite:Error while getting getBCUDeviceDetails")}}GetMetersForLA(){const e=v().cloneDeep(this.state.railMarineFinishedProductInfo);let t="",a="";if(t=e.BCUCode,a=e.LoadingArm,""!==t&&""!==a)try{var s=[{key:b.Dm,value:P.Dm.MARINE_BCUVIEW},{key:b.wX,value:t},{key:b.uw,value:this.props.ActualTerminalCode}],r={ShareHolderCode:"",keyDataCode:b.Dm,KeyCodes:s};T()(L._xh,u.tW(r,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess&&Array.isArray(t.EntityResult)&&t.EntityResult.length>0){let e=t.EntityResult[0].AssociatedArmsList.find((e=>e.Code===a));if(null!==e){let t=[];t=e.AssociatedMeterList.find((e=>"MAINLINE"===e.MeterLineType));let a="";if(null!==t&&""!==t){let e=[];t.MeterList.forEach((t=>{e.push(t.Code)})),this.setState({meterCodeList:e}),1===t.MeterList.length&&(a=t.MeterList[0].Code)}if(""!==a){let e=v().cloneDeep(this.state.railMarineFinishedProductInfo);e.MeterCode=a;let t=v().cloneDeep(this.state.railMarineBaseProductInfo);t.map((e=>{e.MeterCode=a})),this.setState({railMarineBaseProductInfo:t,railMarineFinishedProductInfo:e})}}}}))}catch(i){console.log("SiteTreeView:Error occured in GetMetersForLA",i)}}getQuantityUOMList(){T()(L.N6z+"?TypeName="+P.El.QuantityUOM,u.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult.Table,s=[];a.forEach((e=>{s.push(e.Code)})),this.setState({quantityUOMList:s})}else console.log("Error in getQuantityUOMList:",t.ErrorList)})).catch((e=>{console.log("Error while getQuantityUOMList:",e)}))}getDensityUOMList(){T()(L.N6z+"?TypeName="+P.El.DensityUOM,u.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult.Table,s=[];a.forEach((e=>{s.push(e.Code)})),this.setState({densityUOMList:s})}else console.log("Error in getDensityUOMList:",t.ErrorList)})).catch((e=>{console.log("Error while getDensityUOMList:",e)}))}getTemperatureUOMList(){T()(L.N6z+"?TypeName="+P.El.TemperatureUOM,u.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult.Table,s=[];a.forEach((e=>{s.push(e.Code)})),this.setState({temperatureUOMList:s})}else console.log("Error in getTemperatureUOMList:",t.ErrorList)})).catch((e=>{console.log("Error while getTemperatureUOMList:",e)}))}getMassUOMList(){T()(L.N6z+"?TypeName="+P.El.MassUOM,u.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult.Table,s=[];a.forEach((e=>{s.push(e.Code)})),this.setState({massUOMList:s})}else console.log("Error in getMassUOMList:",t.ErrorList)})).catch((e=>{console.log("Error while getMassUOMList:",e)}))}getPressureUOMList(){T()(L.N6z+"?TypeName="+P.El.PressureUOM,u.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult.Table,s=[];a.forEach((e=>{s.push(e.Code)})),this.setState({pressureUOMList:s})}else console.log("Error in getPressureUOMList:",t.ErrorList)})).catch((e=>{console.log("Error while getPressureUOMList:",e)}))}getCalculatedValueUOMList(){T()(L.N6z+"?TypeName="+P.El.CalculatedValueUOM,u.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult.Table,s=[];a.forEach((e=>{s.push(e.Code)})),this.setState({calculatedValueUOMList:s})}else console.log("Error in getCalculatedValueUOMList:",t.ErrorList)})).catch((e=>{console.log("Error while getCalculatedValueUOMList:",e)}))}GetMeterList(){T()(L.yXV,u.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult.Table,s=[];a.forEach((e=>{s.push(e.Code)})),this.setState({meterCodeList:s})}else console.log("Error in GetMeterList:",t.ErrorList)})).catch((e=>{console.log("Error while GetMeterList:",e)}))}GetTankList(e){if(0===e)return;if(0===this.state.productList.length)return;const t=this.state.productList[e-1].code;T()(L.n16+"?BaseProductCode="+t+"&AdditiveCode=",u.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult.Table,s=[];a.forEach((e=>{s.push(e.Code)})),this.setState({tankList:s})}else console.log("Error in GetTankList:",t.ErrorList)})).catch((e=>{console.log("Error while GetTankList:",e)}))}getMarineCompartmentDetails(){const{dispatchCode:e}=this.props;void 0!==e?T()(L.tGc+"?MarineDispatchCode="+e,u.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?(this.setState({marineCompartmentDetails:t.EntityResult}),this.getCompartmentSeqNoInVehicleList()):(this.setState({marineCompartmentDetails:[]}),console.log("Error in getMarineCompartmentDetails:",t.ErrorList))})).catch((e=>{console.log("Error while getting marine compartment details:",e)})):this.setState({marineCompartmentDetails:[]})}getCompartmentSeqNoInVehicleList(){let e=[];this.state.marineCompartmentDetails.forEach((t=>{e.push(t.CompartmentSeqNoInVehicle)})),this.setState({compartmentSeqNoInVehicleList:e})}getSelectedCompartment(e){let t=this.state.marineCompartmentDetails.find((t=>t.CompartmentSeqNoInVehicle===+e));this.setState({selectedCompartment:t,activeIndex:0,railMarineBaseProductInfo:[],validationErrorsForBP:[]},(()=>{this.handleChange("FP","FinishedProductCode",this.state.selectedCompartment.FinishedProductCode),this.getMarineDispatchManualEntryEnabled(t),this.getPartialMarineDispatchData()}))}validateSave(){const{railMarineFinishedProductInfo:e,railMarineBaseProductInfo:t}=this.state;var a=v().cloneDeep(this.state.validationErrors),s=v().cloneDeep(this.state.validationErrorsForBP);let r=Object.keys(s);Object.keys(S.te).forEach((function(t){a[t]=u.jr(S.te[t],e[t])})),this.state.productList.forEach(((e,a)=>{Object.keys(S.RJ).forEach((function(e){s[a][e]=u.jr(S.RJ[e],t[a][e])}))})),e.StartTime>=e.EndTime&&(a.StartTime="MarineDispatchManualEntry_ErrorLoadTime"),this.setState({validationErrors:a,validationErrorsForBP:s});var i=Object.values(a).every((function(e){return""===e})),l=!0,o=0;this.state.productList.forEach(((e,t)=>{(l=l&&Object.values(s[t]).every((function(e){return""===e})))||0!==o||(o++,this.setState({activeIndex:t+1}))})),i||this.setState({activeIndex:0});var n=v().cloneDeep(this.state.attributeValidationErrors);v().cloneDeep(this.state.selectedAttributeList).forEach((e=>{n.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=u.I5(e,e.DefaultValue)}))}))})),this.setState({attributeValidationErrors:n});let c=!0;n.forEach((e=>{c=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),c||this.setState({activeIndex:0});let d=v().cloneDeep(this.state.BPattributeValidationErrors),h=v().cloneDeep(this.state.BPselectedAttributeList);r.forEach((e=>{h[e].forEach((t=>{d[e].forEach((e=>{e.TerminalCode===t.TerminalCode&&t.attributeMetaDataList.forEach((t=>{e.attributeValidationErrors[t.Code]=u.I5(t,t.DefaultValue)}))}))}))})),this.setState({BPattributeValidationErrors:d});let p=r.map((e=>{let t=!0;return d[e].forEach((e=>{t=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),t})),m=p.findIndex((e=>!0!==e));-1!==m&&this.setState({activeIndex:m+1});let M=p.every((function(e){return!0===e}));return i&&l&&c&&M}manualEntrySave(e){const{railMarineBaseProductInfo:t,productList:a}=this.state;Object.keys(e).forEach((t=>{t.includes("UOM")||"BayCode"===t||"BCUCode"===t||"UnLoadingArm"===t||"StartTime"===t||"EndTime"===t||"FinishedProductCode"===t||"Remarks"===t||"MeterCode"===t||"Attributes"===t||(e[t]=u.bo(e[t]))}));let s=Object.keys(t);s.forEach((e=>{Object.keys(t[e]).forEach((a=>{a.includes("UOM")||"MeterCode"===a||"Attributes"===a||"TankCode"===a||(t[e][a]=u.bo(t[e][a]))}))}));var r=[{key:"MarineDispatchCode",value:this.props.dispatchCode},{key:"CompartmentSeqNoInVehicle",value:this.state.selectedCompartment.CompartmentSeqNoInVehicle},{key:"FinishedProductCode",value:this.state.selectedCompartment.FinishedProductCode}],o={messageType:"critical",message:"MarineDispatchManualEntry_SavedSuccess",messageResultDetails:[{keyFields:["MarineDispatchManualEntry_CompSeqNo"],keyValues:[this.state.selectedCompartment.CompartmentSeqNoInVehicle],isSuccess:!1,errorMessage:""}]},c={CommonInfo:{BayCode:e.BayCode,BCUCode:e.BCUCode,LoadingArm:e.LoadingArm,IsBonded:this.props.IsBonded},TransactionFPinfo:{QuantityUOM:e.QuantityUOM,StartTime:e.StartTime,EndTime:e.EndTime,TransactionID:e.TransactionID,Remarks:e.Remarks,GrossQuantity:e.GrossQuantity,NetQuantity:e.NetQuantity,Temperature:e.Temperature,TemperatureUOM:e.TemperatureUOM,ProductDensity:e.ProductDensity,ProductDensityUOM:e.ProductDensityUOM,StartTotalizer:e.StartTotalizer,EndTotalizer:e.EndTotalizer,NetStartTotalizer:e.NetStartTotalizer,NetEndTotalizer:e.NetEndTotalizer,MeterCode:e.MeterCode,GrossMass:e.GrossMass,MassUOM:e.MassUOM,Pressure:e.Pressure,PressureUOM:e.PressureUOM,TankStartSnapShot:{MassUOM:e.MassUOM},TankEndSnapShot:{MassUOM:e.MassUOM},CalculatedGross:e.CalculatedGross,CalculatedNet:e.CalculatedNet,CalculatedValueUOM:e.CalculatedValueUOM,Attributes:e.Attributes},ArrTransactionBP:[],ArrTransactionAdditive:null};s.forEach((e=>{var s={BaseProductCode:a[e].code,TankCode:t[e].TankCode,TankStartSnapShot:{MassUOM:t[e].MassUOM,GrossVolume:t[e].TankStartGrossQuantity,NetVolume:t[e].TankStartNetQuantity,GrossMass:t[e].TankStartGrossMass,Pressure:t[e].TankStartPressure},TankEndSnapShot:{MassUOM:t[e].MassUOM,GrossVolume:t[e].TankEndGrossQuantity,NetVolume:t[e].TankEndNetQuantity,GrossMass:t[e].TankEndGrossMass,Pressure:t[e].TankEndPressure},QuantityUOM:t[e].QuantityUOM,StartTime:t[e].StartTime,EndTime:t[e].EndTime,TransactionID:t[e].TransactionID,Remarks:t[e].Remarks,GrossQuantity:t[e].GrossQuantity,NetQuantity:t[e].NetQuantity,Temperature:t[e].Temperature,TemperatureUOM:t[e].TemperatureUOM,ProductDensity:t[e].ProductDensity,ProductDensityUOM:t[e].ProductDensityUOM,StartTotalizer:t[e].StartTotalizer,EndTotalizer:t[e].EndTotalizer,NetStartTotalizer:t[e].NetStartTotalizer,NetEndTotalizer:t[e].NetEndTotalizer,MeterCode:t[e].MeterCode,GrossMass:t[e].GrossMass,MassUOM:t[e].MassUOM,Pressure:t[e].Pressure,PressureUOM:t[e].PressureUOM,CalculatedGross:t[e].CalculatedGross,CalculatedNet:t[e].CalculatedNet,CalculatedValueUOM:t[e].CalculatedValueUOM,Attributes:t[e].Attributes};c.ArrTransactionBP.push(s)}));var d={ShareHolderCode:this.state.selectedCompartment.ShareHolderCode,keyDataCode:b.yI,KeyCodes:r,Entity:c};T()(L.qCG,u.tW(d,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;o.messageType=t.IsSuccess?"success":"critical",o.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?this.setState({manualEntrySaveEnable:u.ab(this.props.userDetails.EntityResult.FunctionsList,O.i.modify,O.QB),showAuthenticationLayout:!1},(()=>{this.getMarineDispatchManualEntryEnabled(this.state.selectedCompartment)})):(o.message="MarineDispatchManualEntry_SaveFailure",o.messageResultDetails[0].errorMessage=t.ErrorList[0],this.setState({manualEntrySaveEnable:u.ab(this.props.userDetails.EntityResult.FunctionsList,O.i.modify,O.QB),marineDispatchManualEntryEnabled:!1,showAuthenticationLayout:!1})),(0,n.toast)((0,p.jsx)(i.A,{children:(0,p.jsx)(l.A,{notificationMessage:o})}),{autoClose:"success"===o.messageType&&1e4})})).catch((e=>{this.setState({showAuthenticationLayout:!1}),o.messageResultDetails[0].errorMessage=e,console.log("Error while handleSave:",e)}))}render(){const e={compartmentSeqNoInVehicleList:this.state.compartmentSeqNoInVehicleList,berthList:this.state.berthList,bcuCodeList:this.state.bcuCodeList,loadingArmList:this.state.loadingArmList,quantityUOMList:this.state.quantityUOMList,temperatureUOMs:this.state.temperatureUOMList,densityUOMs:this.state.densityUOMList,meterCodes:this.state.meterCodeList,massUOMs:this.state.massUOMList,pressureUOMs:this.state.pressureUOMList,calculatedValueUOMs:this.state.calculatedValueUOMList,tankList:this.state.tankList},{selectedCompartment:t,manualEntrySaveEnable:a,marineDispatchManualEntryEnabled:s}=this.state;return(0,p.jsx)(c.TranslationConsumer,{children:r=>(0,p.jsxs)("div",{children:[(0,p.jsx)(i.A,{children:(0,p.jsx)(o.A,{newEntityName:"MarineDispatchManualEntry_PageTitle"})}),(0,p.jsx)(i.A,{children:(0,p.jsx)(m,{railMarineFinishedProductInfo:this.state.railMarineFinishedProductInfo,onFieldChange:this.handleChange,validationErrors:this.state.validationErrors,listOptions:e,onDateTextChange:this.handleDateTextChange,selectedCompartment:t,marineDispatchManualEntryEnabled:this.state.marineDispatchManualEntryEnabled})}),(0,p.jsx)(i.A,{children:(0,p.jsxs)(d.Tab,{activeIndex:this.state.activeIndex,onTabChange:e=>this.handleTabChange(e),children:[(0,p.jsxs)(d.Tab.Pane,{title:""===this.state.railMarineFinishedProductInfo.FinishedProductCode?r("FinishedProduct"):r("FinishedProduct")+"-"+this.state.railMarineFinishedProductInfo.FinishedProductCode,children:[(0,p.jsx)(M,{railMarineFinishedProductInfo:this.state.railMarineFinishedProductInfo,onFieldChange:this.handleChange,validationErrors:this.state.validationErrors,listOptions:e}),this.state.selectedAttributeList.length>0?this.state.selectedAttributeList.map((e=>(0,p.jsx)(i.A,{children:(0,p.jsx)(d.Accordion,{children:(0,p.jsx)(d.Accordion.Content,{className:"attributeAccordian",title:this.props.userDetails.EntityResult.IsEnterpriseNode?e.TerminalCode+" - "+r("Attributes_Header"):r("Attributes_Header"),children:(0,p.jsx)(E.n,{selectedAttributeList:e.attributeMetaDataList,handleCellDataEdit:this.handleAttributeCellDataEdit,attributeValidationErrors:this.handleValidationErrorFilter(this.state.attributeValidationErrors,e.TerminalCode)})})})}))):null]}),this.state.productList.map(((t,a)=>(0,p.jsx)(d.Tab.Pane,{title:r("baseproduct"===t.ProductTYPE?"MarineDispatch_BaseProduct":t.ProductType)+t.SequenceNumber+"-"+t.code,children:(0,p.jsx)(C,{railMarineBaseProductInfo:this.state.railMarineBaseProductInfo[a],onFieldChange:this.handleChange,validationErrors:this.state.validationErrorsForBP[a],listOptions:e,selectedAttributeList:this.state.BPselectedAttributeList[a],attributeValidationErrors:this.state.BPattributeValidationErrors[a],handleAttributeCellDataEdit:this.handleBPAttributeCellDataEdit,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,code:a})},a)))]})}),(0,p.jsx)(i.A,{children:(0,p.jsx)(g.q,{handleBack:this.props.handleBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:a&&s})}),this.state.showAuthenticationLayout?(0,p.jsx)(j.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:O.i.add,functionGroup:O.Yb,handleOperation:this.addLoadingDetails,handleClose:this.handleAuthenticationClose}):null]})})}}const N=(0,r.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(U)}}]);
//# sourceMappingURL=3164.7fb59dad.chunk.js.map