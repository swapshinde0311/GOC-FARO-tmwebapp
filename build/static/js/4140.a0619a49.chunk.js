(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[4140,8149,5841,8222],{66554:(e,t,i)=>{"use strict";i.d(t,{$:()=>c});var s=i(65043),a=i(72711),o=i(67907),r=i(65187),l=i(69062),n=i(70579);function d(e){let{operationsVisibilty:t,breadcrumbItem:i,shareholders:d,selectedShareholder:c,onShareholderChange:h,onDelete:u,onAdd:m,popUpContent:p,shrVisible:g,handleBreadCrumbClick:S,addVisible:C,deleteVisible:x}=e;const[y,f]=(0,s.useState)(!1),[k,T]=(0,s.useState)(!1);function j(){t.add&&(p.length>0?T(!1===k):m())}return(0,n.jsxs)("div",{className:"row",style:{alignItems:"flex-start",padding:"0px"},children:[(0,n.jsx)("div",{className:"col-9 col-sm-9 col-md-9 col-lg-10 col-xl-10",style:{padding:"0px"},children:(0,n.jsxs)("div",{className:"row",style:{marginTop:"10px",alignItems:""},children:[(0,n.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-8",children:(0,n.jsxs)(r.A,{children:[" ",(0,n.jsx)(o.TranslationConsumer,{children:e=>(0,n.jsxs)(a.Breadcrumb,{children:[i.parents.map((t=>(0,n.jsx)(a.Breadcrumb.Item,{onClick:()=>{void 0!==S&&null!==S&&S(t.itemCode,i.parents)},children:e(t.localizedKey)},t.itemCode))),(0,n.jsx)(a.Breadcrumb.Item,{children:e(i.localizedKey)},i.itemCode)]})})]})}),(0,n.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-4",children:(0,n.jsx)(o.TranslationConsumer,{children:e=>(0,n.jsx)("div",{className:"compartmentIcon",style:{justifyContent:"flex-start"},children:!1===g?"":(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:(0,n.jsxs)("h4",{className:"shrText",children:[e("Common_Shareholder"),":"]})}),(0,n.jsx)("div",{className:"opSelect",children:(0,n.jsx)(a.Select,{placeholder:e("Common_Shareholder"),value:c,disabled:!t.shareholder,options:l.Zj(d),onChange:e=>h(e)})})]})})})}),(0,n.jsx)(o.TranslationConsumer,{children:e=>(0,n.jsxs)(a.Modal,{open:y,size:"small",children:[(0,n.jsx)(a.Modal.Content,{children:(0,n.jsx)("div",{children:(0,n.jsx)("b",{children:e("Confirm_Delete")})})}),(0,n.jsxs)(a.Modal.Footer,{children:[(0,n.jsx)(a.Button,{type:"secondary",content:e("Cancel"),onClick:()=>f(!1)}),(0,n.jsx)(a.Button,{type:"primary",content:e("PipelineDispatch_BtnSubmit"),onClick:()=>{f(!1),u()}})]})]})})]})}),(0,n.jsx)("div",{className:"col-3 col-sm-3 col-md-3 col-lg-2 col-xl-2",children:(0,n.jsxs)("div",{style:{float:"right",display:"inline-block",marginTop:"10px"},children:[C?(0,n.jsx)(a.Popup,{position:"bottom right",className:"popup-theme-wrap",element:(0,n.jsx)("div",{className:(t.add?"iconCircle ":"iconCircleDisable ")+"iconblock",onClick:j,children:(0,n.jsx)(a.Icon,{root:"common",name:"badge-plus",size:"small",color:"white"})}),on:"click",open:k,children:(0,n.jsx)("div",{onMouseLeave:()=>T(!1),children:(0,n.jsx)(o.TranslationConsumer,{children:e=>(0,n.jsx)(a.VerticalMenu,{children:(0,n.jsxs)(a.VerticalMenu,{children:[(0,n.jsx)(a.VerticalMenu.Header,{children:e("Common_Create")}),p.map((t=>(0,n.jsx)(a.VerticalMenu.Item,{onClick:()=>{return e=t.fieldName,T(!1),void m(e);var e},children:e(t.fieldValue)})))]})})})})}):"",x?(0,n.jsx)("div",{style:{marginLeft:"10px"},onClick:()=>{t.delete&&f(!0)},className:(t.delete?"iconCircle ":"iconCircleDisable ")+"iconblock",children:(0,n.jsx)(a.Icon,{root:"common",name:"delete",size:"small",color:"white"})}):""]})})]})}d.defaultProps={operationsVisibilty:{add:!1,delete:!1,shareholder:!1},breadcrumbItem:{itemName:"",itemCode:"",localizedKey:"",itemProps:{},parents:[],isComponent:!1},shareholders:[],selectedShareholder:"",popUpContent:[],shrVisible:!0,addVisible:!0,deleteVisible:!0};i(38726);function c(e){let{operationsVisibilty:t,breadcrumbItem:i,shareholders:s,selectedShareholder:a,onShareholderChange:o,onDelete:r,onAdd:l,popUpContent:c,shrVisible:h,handleBreadCrumbClick:u,addVisible:m,deleteVisible:p}=e;return(0,n.jsx)(d,{operationsVisibilty:t,breadcrumbItem:i,shareholders:s,selectedShareholder:a,onShareholderChange:o,onDelete:r,onAdd:l,popUpContent:c,shrVisible:h,handleBreadCrumbClick:u,addVisible:m,deleteVisible:p})}},62900:(e,t,i)=>{"use strict";i.d(t,{A:()=>x});var s=i(65043),a=i(67907),o=i(72711),r=i(72067),l=i(69062),n=i(97508),d=i(44192),c=i(40854),h=i.n(c),u=i(53536),m=i.n(u),p=i(86111),g=i.n(p),S=i(70579);class C extends s.Component{constructor(){super(...arguments),this.state={isPasswordRequired:!1,Password:"",validationErrors:l.Th(d.Qh),authenticationResponse:"",btnAuthenticateEnabled:!0},this.onFieldChange=(e,t)=>{this.setState({Password:t});const i=m().cloneDeep(this.state.validationErrors);void 0!==d.Qh[e]&&(i[e]=l.jr(d.Qh[e],t),this.setState({validationErrors:i,authenticationResponse:""}))},this.validatePassword=e=>{this.setState({btnAuthenticateEnabled:!1});const t={...this.state.validationErrors};null!==e&&""!==e||(t.Password="UserValidationForm_ReqfldValPassword"),this.setState({validationErrors:t});var i=!0;return i&&(i=Object.values(t).every((function(e){return""===e}))),i},this.onCloseClick=()=>{this.setState({isPasswordRequired:!1,authenticationResponse:"",btnAuthenticateEnabled:!0},(()=>this.props.handleClose()))},this.AuthenticateUser=()=>{if(this.validatePassword(this.state.Password)){this.setState({authenticationResponse:""});try{var e=this.state.Password,t=this.props.Username,i=g().lib.WordArray.random(16),s=g().PBKDF2(t,i,{keySize:8,iterations:100}),a=g().lib.WordArray.random(16),o=g().AES.encrypt(e,s,{iv:a,padding:g().pad.Pkcs7,mode:g().mode.CBC}),n=i.toString()+a.toString()+o.toString();h()(r.KrY+"?encryptedPassword="+encodeURIComponent(n),l.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess&&"true"===t.EntityResult.toLowerCase()?(this.setState({isPasswordRequired:!1}),this.props.handleOperation()):this.setState({authenticationResponse:t.ErrorList[0],btnAuthenticateEnabled:!0})})).catch((e=>{this.setState({authenticationResponse:e,btnAuthenticateEnabled:!0})}))}catch(d){this.setState({authenticationResponse:d,btnAuthenticateEnabled:!0})}}else this.setState({btnAuthenticateEnabled:!0})}}componentDidMount(){try{this.IsPasswordRequired()}catch(e){console.log("BaseProductDetailsComposite:Error occured on componentDidMount",e)}}IsPasswordRequired(){try{let e=l.Hp(this.props.userDetails.EntityResult.roleFunctionInfo,this.props.functionName,this.props.functionGroup);this.setState({isPasswordRequired:e}),!1===e&&this.props.handleOperation()}catch(e){console.log("Error in IsPasswordRequired method:",e)}}render(){return(0,S.jsx)("div",{children:!0===this.state.isPasswordRequired?(0,S.jsx)(a.TranslationConsumer,{children:e=>(0,S.jsxs)(o.Modal,{open:!0,size:"mini",children:[(0,S.jsxs)(o.Modal.Content,{children:[(0,S.jsxs)("div",{className:"row",children:[(0,S.jsx)("div",{className:"col col-lg-8",style:{marginLeft:"10px"},children:(0,S.jsx)("h4",{children:e("User_Authentication")})}),(0,S.jsx)("div",{className:"col-12 col-lg-3",style:{textAlign:"right"},onClick:this.onCloseClick,children:(0,S.jsx)(o.Icon,{root:"common",name:"close"})})]}),(0,S.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,S.jsx)("div",{className:"col col-lg-12",children:(0,S.jsx)("label",{children:(0,S.jsxs)("h5",{children:[e("UserValidation_Form_AccountName"),":",this.props.Username]})})}),(0,S.jsx)("div",{className:"col col-lg-12",children:(0,S.jsx)(o.Input,{fluid:!0,type:"password",disablePasswordToggle:!1,value:this.state.Password,indicator:"required",onChange:e=>this.onFieldChange("Password",e),label:e("AccessCardInfo_x_Pwd"),error:e(this.state.validationErrors.Password),reserveSpace:!1})})]})]}),(0,S.jsxs)(o.Modal.Footer,{children:[(0,S.jsx)("span",{className:"ui error-message autherrormsg",children:e(this.state.authenticationResponse)}),(0,S.jsx)(o.Button,{type:"primary",disabled:!this.state.btnAuthenticateEnabled,content:e("UserValidationForm_Authentication"),onClick:this.AuthenticateUser})]})]})}):null})}}const x=(0,n.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(C)},19380:(e,t,i)=>{"use strict";i.d(t,{A:()=>k});var s=i(65043),a=i(728),o=i(62672),r=i(27976),l=i(44063),n=i(39078),d=i(48546),c=i(82967),h=i(11201),u=i(43439),m=(i(60663),i(48385)),p=i(72711),g=i(67907),S=i(65187),C=i(53536),x=(i(90837),i(70579));const y=e=>{const[t,i]=(0,s.useState)(null),[y]=(0,g.useTranslation)(),f=t=>new a.CollectionView(e.sourceData,{pageSize:t}),[k,T]=(0,s.useState)(f(e.rowsPerPage)),j=s.createRef(),D=s.createRef(),w=s.createRef(),R=s.createRef(),E=s.useRef(),v=s.useRef(e.selectionRequired?[]:null);let b=null;const A=t=>{try{if(V(),e.onRowClick&&t.addEventListener(t.hostElement,"click",(i=>{let s=t.hitTest(i);if(s.target.closest(".wj-cell")&&![...s.target.closest(".wj-cell").classList].includes("wj-group")&&s.cellType===o.CellType.Cell){const i=t.rows[s.row].dataItem;e.onRowClick(i)}})),t.selectionMode=a.asEnum("None",o.SelectionMode),t.select(-1,-1),i(t),e.selectionRequired){b=new h.Selector(t,{itemChecked:(i,s)=>{e.singleSelection&&t.rows.filter((e=>e.isSelected&&1===v.current.filter((t=>C.isEqual(t,e.dataItem))).length)).forEach((e=>{e.isSelected=!1})),e.onSelectionHandle(t.rows.filter((e=>e.isSelected)).map((e=>e.dataItem)))},showCheckAll:!e.singleSelection});let i=b.column.grid;b.column=i.rowHeaders.columns[0],i.headersVisibility=o.HeadersVisibility.All,i.selectionMode=a.asEnum("None",o.SelectionMode)}}catch(s){console.log("Error in gridInitialized: "+s)}};(0,s.useEffect)((()=>{try{if(null!=j){let e=j.current.control;D.current.control.grid=e}T(f(e.rowsPerPage))}catch(t){console.log("Error in grid update:",t)}}),[e.sourceData]),(0,s.useEffect)((()=>{try{t&&e.selectionRequired&&(v.current.length=0,v.current.push(...e.selectedItems),t.rows.forEach((t=>{1===e.selectedItems.filter((e=>C.isEqual(e,t.dataItem))).length?t.isSelected=!0:t.isSelected=!1})),t.refresh())}catch(i){console.log("Error in pre-selecting rows:",i)}}),[e.selectedItems]),(0,s.useEffect)((()=>{try{if(localStorage.getItem(e.parentComponent+"GridState")&&"null"!==localStorage.getItem(e.parentComponent+"GridState")&&t){let s=JSON.parse(localStorage.getItem(e.parentComponent+"GridState")),o=t;o.columns.forEach((e=>{let t=s.columns.filter((t=>t.binding===e.binding));e.visible=t.length>0?t[0].visible:e.visible})),w.current.control.filterDefinition=s.filterDefinition,o.collectionView.deferUpdate((()=>{o.collectionView.sortDescriptions.clear();for(let e=0;e<s.sortDescriptions.length;e++){let t=s.sortDescriptions[e];o.collectionView.sortDescriptions.push(new a.SortDescription(t.property,t.ascending))}}));for(let e=0;e<s.groupDescriptions.length;e++)o.collectionView.groupDescriptions.push(new a.PropertyGroupDescription(s.groupDescriptions[e])),o.columns.filter((t=>t.binding===s.groupDescriptions[e]))[0].visible=!1;if(sessionStorage.getItem(e.parentComponent+"GridState")&&"null"!==sessionStorage.getItem(e.parentComponent+"GridState")){let t=JSON.parse(sessionStorage.getItem(e.parentComponent+"GridState"));o.collectionView.moveToPage(o.collectionView.pageCount-1>=t.pageIndex?t.pageIndex:o.collectionView.pageCount-1),D&&(D.current.control.text=t.searchText)}i(o),t.refresh()}}catch(s){console.log("Error in restoring local storage settings: ",s)}}),[k]),(0,s.useEffect)((()=>{try{t&&E.current&&e.columnPickerRequired&&(E.current.itemsSource=t.columns,E.current.checkedMemberPath="visible",E.current.displayMemberPath="header",E.current.lostFocus.addHandler((()=>{(0,a.hidePopup)(E.current.hostElement)})))}catch(i){console.log("Error in initializing column picker properties:",i)}}),[E.current]),(0,s.useEffect)((()=>()=>{e.columnPickerRequired&&E.current&&(0,a.hidePopup)(E.current.hostElement)}),[]);const L=()=>{try{let s=t;s.itemsSource.pageSize=e.sourceData.length,i(s),u.FlexGridXlsxConverter.saveAsync(t,{includeColumnHeaders:!0,includeCellStyles:!1,formatItem:null},e.exportFileName),s.itemsSource.pageSize=e.rowsPerPage,i(s)}catch(s){console.log("Error in export grid to excel:",s)}},P=(t,i)=>{if(void 0!==i&&null!==i){if("boolean"===typeof t||"Active"===i.Name)return t?(0,x.jsx)(p.Icon,{name:"check",size:"small",color:"green"}):(0,x.jsx)(p.Icon,{name:"close",size:"small",color:"red"});if(""===t||null===t||void 0===t)return t;if(("TerminalCodes"===i.Name||"1"===i.PopOver)&&null!==t)return(s=t).split(",").length>e.terminalsToShow?(0,x.jsx)(p.Popup,{className:"popup-theme-wrap",on:"hover",element:s.split(",").length,children:(0,x.jsx)(p.Card,{children:(0,x.jsx)(p.Card.Content,{children:s})})}):s;if(void 0!==i.DataType&&"DateTime"===i.DataType)return new Date(t).toLocaleDateString()+" "+new Date(t).toLocaleTimeString();if(void 0!==i.DataType&&"Date"===i.DataType)return new Date(t).toLocaleDateString();if(void 0!==i.DataType&&"Time"===i.DataType)return new Date(t).toLocaleTimeString()}var s;return t},N=()=>{try{if(t&&w.current){let i={columns:t.columns.map((e=>({binding:e.binding,visible:e.visible}))),filterDefinition:w.current.control.filterDefinition,sortDescriptions:t.collectionView.sortDescriptions.map((e=>({property:e.property,ascending:e.ascending}))),groupDescriptions:t.collectionView.groupDescriptions.map((e=>e.propertyName?e.propertyName:null))};if(t.collectionView.groupDescriptions&&t.collectionView.groupDescriptions.length>0){[...document.getElementsByClassName("wj-column-selector-group")].forEach((e=>{e.parentNode.parentNode.classList.add("wj-grouped-checkbox")}))}let s={pageIndex:t.collectionView.pageIndex,searchText:D.current.control.text};localStorage.setItem(e.parentComponent+"GridState",JSON.stringify(i)),sessionStorage.setItem(e.parentComponent+"GridState",JSON.stringify(s))}}catch(i){console.log("Error in saving grid state")}},V=()=>{let e=a.culture.FlexGridFilter,t=n.Operator;a.culture.FlexGridFilter.header=y("WijmoGridFilterHeader"),a.culture.FlexGridFilter.ascending="\u2191 "+y("WijmoGridFilterAscending"),a.culture.FlexGridFilter.descending="\u2193 "+y("WijmoGridFilterDescending"),a.culture.FlexGridFilter.apply=y("RoleAdminEdit_Apply"),a.culture.FlexGridFilter.clear=y("OrderCreate_btnClear"),a.culture.FlexGridFilter.conditions=y("WijmoGridFilterCondition"),a.culture.FlexGridFilter.values=y("WijmoGridFilterValue"),a.culture.FlexGridFilter.search=y("LoadingDetailsView_SearchGrid"),a.culture.FlexGridFilter.selectAll=y("WijmoGridFilterSelectAll"),a.culture.FlexGridFilter.and=y("WijmoGridFilterAnd"),a.culture.FlexGridFilter.or=y("WijmoGridFilterOr"),a.culture.FlexGridFilter.cancel=y("AccessCardInfo_Cancel"),e.stringOperators=[{name:y("WijmoGridFilterUnset"),op:null},{name:y("WijmoGridFilterEqual"),op:t.EQ},{name:y("WijmoGridFilterNotEqual"),op:t.NE},{name:y("WijmoGridFilterBeginsWith"),op:t.BW},{name:y("WijmoGridFilterEndsWith"),op:t.EW},{name:y("WijmoGridFilterContains"),op:t.CT},{name:y("WijmoGridFilterDoesNotContain"),op:t.NC}],e.numberOperators=[{name:y("WijmoGridFilterUnset"),op:null},{name:y("WijmoGridFilterEqual"),op:t.EQ},{name:y("WijmoGridFilterNotEqual"),op:t.NE},{name:y("WijmoGridFilterGreaterThan"),op:t.GT},{name:y("WijmoGridFilterLessThan"),op:t.LT},{name:y("WijmoGridFilterGreaterThanOrEqual"),op:t.GE},{name:y("WijmoGridFilterLessThanOrEqual"),op:t.LE}],e.dateOperators=[{name:y("WijmoGridFilterUnset"),op:null},{name:y("WijmoGridFilterEqual"),op:t.EQ},{name:y("WijmoGridFilterDateEarlierThan"),op:t.LT},{name:y("WijmoGridFilterDateLaterThan"),op:t.GT}],e.booleanOperators=[{name:y("WijmoGridFilterUnset"),op:null},{name:y("WijmoGridFilterEqual"),op:t.EQ},{name:y("WijmoGridFilterNotEqual"),op:t.NE}]},I=e=>{try{if(window.screen.width<1024&&e.WidthPx&&""!==e.WidthPx)return parseInt(e.WidthPx)}catch(t){console.log("Error in width:",t)}return e.WidthPercentage.includes("*")?e.WidthPercentage:parseInt(e.WidthPercentage)};return(0,x.jsx)("div",{className:"pl-1",children:(0,x.jsx)(S.A,{children:(0,x.jsx)(g.TranslationConsumer,{children:i=>(0,x.jsxs)(s.Fragment,{children:[(0,x.jsxs)("div",{className:"row pl-0",children:[(0,x.jsx)("div",{className:"col-10 col-sm-12 col-md-5 col-lg-6",children:(0,x.jsx)(d.q,{class:"ui single-input",ref:D,placeholder:i("LoadingDetailsView_SearchGrid")})}),(0,x.jsx)("div",{className:"col-10 col-sm-12 col-md-7 col-lg-6",children:(0,x.jsxs)("div",{style:{float:"right"},children:[e.columnPickerRequired?(0,x.jsxs)(p.Button,{id:"colPicker",actionType:"button",type:"primary",onClick:e=>(e=>{try{let i=E.current.hostElement;i.offsetHeight?((0,a.hidePopup)(i,!0,!0),t.focus()):((0,a.showPopup)(i,e.target,a.PopupPosition.Below,!0,!1),E.current.focus()),E.current.focus(),e.preventDefault()}catch(i){console.log("Error in Column Picker click event:",i)}})(e),children:[(0,x.jsx)("div",{style:{display:"inline-block"},children:i("WijmoGridColumnPicker")}),(0,x.jsx)("div",{style:{display:"inline-block"},children:(0,x.jsx)(p.Icon,{name:"caret-down",className:"btnIcon",size:"small"})})]}):null,e.exportRequired?(0,x.jsxs)(p.Button,{actionType:"button",type:"primary",className:"mt-3 mt-md-0",onClick:L,children:[(0,x.jsx)("div",{style:{display:"inline-block"},children:i("WijmoGridExport")}),(0,x.jsx)("div",{style:{display:"inline-block",marginLeft:"0.2rem"},children:(0,x.jsx)("span",{className:"icon-Xls",style:{fontSize:"17px",position:"absolute",top:"3px"}})})]}):null]})})]}),(0,x.jsxs)("div",{className:"tableScroll",children:[e.columnGroupingRequired?(0,x.jsx)(m.u,{className:"group-panel",grid:t,placeholder:i("WijmoGridGroupPanelPlaceholder")}):null,(0,x.jsx)(S.A,{children:(0,x.jsxs)(r.MC,{ref:j,autoGenerateColumns:!1,alternatingRowStep:0,autoRowHeights:!0,headersVisibility:"Column",itemsSource:k,selectionMode:a.asEnum("None",o.SelectionMode),initialized:A,virtualizationThreshold:[0,1e4],onUpdatedView:N,children:[(0,x.jsx)(l.M,{ref:w}),e.columns.map((t=>(0,x.jsx)(r.aK,{header:i(t.Name),binding:t.Name,width:I(t),minWidth:100,isReadOnly:!0,wordWrap:!0,align:"left",children:(0,x.jsx)(r.Gw,{cellType:"Cell",template:i=>(0,x.jsx)("span",{style:null!=e.conditionalRowStyleCheck&&e.conditionalRowStyleCheck(i.item)?{...e.conditionalRowStyles}:null,children:P(i.item[t.Name],t)})})},t.Name)))]})}),e.columnPickerRequired?(0,x.jsx)("div",{className:"column-picker-div",children:(0,x.jsx)(c.qF,{className:"column-picker",initialized:t=>(t=>{e.columnPickerRequired&&(E.current=t)})(t)})}):null]}),(0,x.jsx)("div",{className:"row",children:(0,x.jsx)(c.Ne,{ref:R,className:"ml-auto mr-auto mt-3",headerFormat:i("WijmoGridPagingTemplate"),byPage:!0,cv:k})})]})})})})};y.defaultProps={sourceData:[],columns:[],exportRequired:!0,exportFileName:"Grid.xlsx",selectionRequired:!1,columnPickerRequired:!1,columnGroupingRequired:!1,rowsPerPage:10,terminalsToShow:2,singleSelection:!1,selectedItems:[]};const f=y,k=e=>(0,x.jsx)(f,{sourceData:e.data,columns:e.columns,exportRequired:e.exportRequired,exportFileName:e.exportFileName,columnPickerRequired:e.columnPickerRequired,selectionRequired:e.selectionRequired,columnGroupingRequired:e.columnGroupingRequired,conditionalRowStyleCheck:e.conditionalRowStyleCheck,conditionalRowStyles:e.conditionalRowStyles,rowsPerPage:e.rowsPerPage,onSelectionHandle:e.onSelectionHandle,onRowClick:e.onRowClick,parentComponent:e.parentComponent,terminalsToShow:e.terminalsToShow,singleSelection:e.singleSelection,selectedItems:e.selectedItems})},24462:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>P});var s=i(65043),a=i(97508),o=i(65187),r=i(40252),l=i(66554),n=i(40854),d=i.n(n),c=i(72067),h=i(69062),u=i(14159),m=i(11981),p=i(19380),g=i(67907),S=i(72711),C=i(78374),x=i(70579);function y(e){let{tableData:t,columnDetails:i,pageSize:s,exportRequired:a,exportFileName:o,columnPickerRequired:r,columnGroupingRequired:l,terminalsToShow:n,selectionRequired:d,onSelectionChange:c,parentComponent:h,handleViewAuditTrail:u,selectedItems:m,isDetails:y,handleEditTank:f,isEnableModify:k,modShareholderList:T,handleFieldChange:j,modSelectedTankShareholderDetails:D,handleSave:w,saveEnabled:R,handleReset:E,handleViewReport:v,selectedShareholder:b,OverwriteGrossNetValues:A}=e;const[L]=(0,g.useTranslation)(),P=e=>{const{value:t}=e;return"number"===typeof t&&null!==t?t.toLocaleString():t},N=(e,t)=>"grossQuantity"===t?(0,x.jsx)(S.Input,{fluid:!0,value:D[e.rowIndex][e.field],onChange:i=>j(i,e,t),reserveSpace:!1,disabled:null!==e.rowData.CalculatedGrossVolume&&e.rowData.CalculatedGrossVolume>=0&&!A&&e.rowData.LimitQuantity>0}):(0,x.jsx)(S.Input,{fluid:!0,value:"shareholder"===t?T[e.rowIndex][e.field]:D[e.rowIndex][e.field],onChange:i=>j(i,e,t),reserveSpace:!1});return(0,x.jsxs)("div",{children:[(0,x.jsx)(p.A,{data:t,columns:i,rowsPerPage:s,exportRequired:a,exportFileName:o,columnPickerRequired:r,columnGroupingRequired:l,terminalsToShow:n,selectionRequired:d,onSelectionHandle:c,parentComponent:h}),(0,x.jsxs)("div",{className:"row userActionPosition",children:[m.length>0?(0,x.jsx)("div",{className:"col-12 col-md-3 col-lg-6",children:(0,x.jsx)(S.Button,{content:L(k?"TankShareholderAssn_EditCommingleButton":"TankShareholderAssn_ViewCommingleButton"),onClick:f})}):(0,x.jsx)("div",{className:"col-12 col-md-3 col-lg-6"}),(0,x.jsx)("div",{className:"col-12 col-md-9 col-lg-6",children:(0,x.jsxs)("div",{style:{float:"right"},children:[(0,x.jsx)(S.Button,{content:L("ViewShipmentStatus_ViewAuditTrail"),onClick:u}),(0,x.jsx)(S.Button,{content:L("TankShareholderAssn_ViewComminglingReport"),onClick:v})]})})]}),y&&m.length>0?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,x.jsxs)("div",{className:"col col-lg-3",children:[(0,x.jsx)("h5",{children:L("TankShareholderAssn_ProposedPercentageQuantity")}),(0,x.jsxs)(C.bQ,{data:T,children:[(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"ShareholderCode",header:L("AccessCardInfo_Shareholder")},"ShareholderCode"),(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"Volume",header:L("TankShareholderAssn_PercentageLimitQuantity"),editFieldType:"text",renderer:e=>P(e),customEditRenderer:e=>N(e,"shareholder"),editable:!0,initialWidth:"100px"},"Volume")]})]}),(0,x.jsxs)("div",{className:"col col-lg-9",children:[(0,x.jsx)("h5",{children:L("TankShareholderAssn_ComminglingDetails")}),(0,x.jsxs)(C.bQ,{data:D,children:[(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"TankCode",header:L("AtgConfigure_TankCode"),initialWidth:"120px"},"TankCode"),(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"ShareholderCode",header:L("AccessCardInfo_Shareholder")},"ShareholderCode"),(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"BaseProductCode",header:L("BaseProductInfo_BaseProdCode")},"BaseProductCode"),(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"LimitQuantity",header:L("TankShareholderAssn_CurrentLimitCapacity")},"LimitQuantity"),(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"LimitQuantityPercentage",header:L("TankShareholderAssn_PercentageCurrentLimitCapacity")},"LimitQuantityPercentage"),(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"CalculatedGrossVolume",header:L("TankShareholderAssn_CalculatedGrossQuantity"),renderer:e=>P(e),customEditRenderer:e=>N(e,"grossQuantity"),editable:!0,editFieldType:"text"},"CalculatedGrossVolume"),(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"VolumeUOM",header:L("ExchangeAgreementDetailsItem_UOM"),initialWidth:"80px"},"VolumeUOM"),(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"NewLimitQuantity",header:L("TankShareholderAssn_ProposedLimitCapacity"),renderer:e=>P(e),customEditRenderer:e=>N(e,"newQuantity"),editable:!0,editFieldType:"text"},"NewLimitQuantity")]})]})]}),(0,x.jsx)("div",{className:"col-12 col-md-9 col-lg-12",children:(0,x.jsxs)("div",{style:{float:"right"},children:[(0,x.jsx)(S.Button,{content:L("LookUpData_btnReset"),className:"cancelButton",onClick:E}),(0,x.jsx)(S.Button,{content:L("Save"),disabled:!R,onClick:w})]})})]}):null]})}function f(e){let{auditTrailList:t,handleBack:i}=e;const[a,o]=(0,s.useState)(!1);return(0,x.jsxs)("div",{children:[(0,x.jsx)(g.TranslationConsumer,{children:e=>(0,x.jsx)("div",{children:(0,x.jsxs)("div",{className:"detailsContainer",children:[(0,x.jsxs)("div",{id:"printTable",children:[(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"col-12",children:(0,x.jsx)("h3",{children:e("ViewTankShAuditTrail_Title")})})}),(0,x.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,x.jsx)("div",{className:"col-12 detailsTable ",children:(0,x.jsxs)(C.bQ,{data:t,scrollable:!0,children:[(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"ShareholderCode",header:e("AccessCardInfo_Shareholder")},"ShareholderCode"),(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"TankCode",header:e("AtgConfigure_TankCode")},"TankCode"),(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"BaseProductCode",header:e("BaseProductInfo_BaseProdCode")},"BaseProductCode"),(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"LimitQuantity",header:e("TankShareholderAssn_LimitCapacity")},"LimitQuantity"),(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"LastUpdatedTime",header:e("AccessCardInfo_LastUpdated")},"LastUpdatedTime"),(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"LastUpdatedBy",header:e("AdditiveInjectorInfo_LastUpdatedBy")},"LastUpdatedBy")]})})})]}),(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-12 col-sm-6 col-lg-8",children:(0,x.jsx)(S.Button,{className:"backButton",onClick:i,content:e("Back")})}),(0,x.jsx)("div",{className:"col-12 col-sm-6 col-lg-4",style:{textAlign:"right"},children:(0,x.jsx)(S.Button,{className:"printButton",onClick:()=>{o(!0)},content:e("ViewAuditTrail_PrintAuditTrail")})})]})]})})}),(0,x.jsx)(g.TranslationConsumer,{children:e=>(0,x.jsx)(S.Modal,{open:a,className:"marineModalPrint",children:(0,x.jsxs)(S.Modal.Content,{children:[(0,x.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,x.jsx)("div",{className:"col col-lg-8",children:(0,x.jsx)("h3",{children:e("ViewTankShAuditTrail_Title")})}),(0,x.jsx)("div",{className:"col col-lg-4",style:{textAlign:"right"},children:(0,x.jsx)("div",{onClick:()=>{o(!1)},children:(0,x.jsx)(S.Icon,{root:"common",name:"close"})})})]}),(0,x.jsx)("div",{className:"col-12 detailsTable",children:(0,x.jsxs)(C.bQ,{data:t,children:[(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"ShareholderCode",header:e("AccessCardInfo_Shareholder")},"ShareholderCode"),(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"TankCode",header:e("AtgConfigure_TankCode")},"TankCode"),(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"BaseProductCode",header:e("BaseProductInfo_BaseProdCode")},"BaseProductCode"),(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"LimitQuantity",header:e("TankShareholderAssn_LimitCapacity")},"LimitQuantity"),(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"LastUpdatedTime",header:e("AccessCardInfo_LastUpdated")},"LastUpdatedTime"),(0,x.jsx)(C.bQ.Column,{className:"compColHeight",field:"LastUpdatedBy",header:e("AdditiveInjectorInfo_LastUpdatedBy")},"LastUpdatedBy")]})}),(0,x.jsx)(S.Modal.Footer,{children:(0,x.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,x.jsx)(S.Button,{type:"primary",size:"small",content:e("ViewAuditTrail_Print"),onClick:()=>{let e=window.document.getElementById("printTable").innerHTML;const t=window.document.createElement("IFRAME");let i=null;window.document.body.appendChild(t),i=t.contentWindow.document;const s=e.substring(0,e.indexOf("<table")+6),a=e.substring(e.indexOf("<table")+6,e.length);e=s+' border="1" cellspacing="1"'+a,i.write(e),i.close(),t.contentWindow.focus(),t.contentWindow.print(),setTimeout((()=>{window.document.body.removeChild(t)}),2e3)}}),(0,x.jsx)(S.Button,{type:"primary",size:"small",content:e("MarineEOD_Close"),onClick:()=>{o(!1)}})]})})]})})})]})}f.defaultProps={};var k=i(80297),T=i(39424),j=i(80312),D=i(53536),w=i.n(D),R=(i(92342),i(73571)),E=i(7523),v=i(28882),b=i(15821),A=i(62900);class L extends s.Component{constructor(){super(...arguments),this.state={isDetails:!1,isReadyToRender:!1,operationsVisibilty:{shareholder:!0},selectedItems:[],data:{},lookUpData:null,selectedShareholder:"",noOfSignificantDigits:"3",isViewAuditTrail:!1,auditTrailList:[],tankShareholderAssociationKPIList:[],allShareholder:[],shareholderList:[],modShareholderList:[],selectedTankShareholderDetails:[],modSelectedTankShareholderDetails:[],saveEnabled:!1,showReport:!1,isEnable:!0,OverwriteGrossNetValues:!1,isValidVolume:!0,errorMsg:"",showAuthenticationLayout:!1,tempSelectedTankShareholderDetails:{}},this.componentName="TankShareholderAssociationComponent",this.handleModalBack=()=>{this.setState({showReport:!1})},this.handleViewReport=()=>{void 0===this.reportServiceURI?d()(c.yTV,h.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{e.data.IsSuccess&&(this.reportServiceURI=e.data.EntityResult,this.setState({showReport:!0}))})):this.setState({showReport:!0})},this.componentWillUnmount=()=>{h.D6(this.componentName+"GridState"),window.removeEventListener("beforeunload",(()=>h.D6(this.componentName+"GridState")))},this.handleSelection=e=>{0==e.length?this.setState({isDetails:!1,selectedItems:e,modShareholderList:this.state.shareholderList}):this.setState({selectedItems:e,modShareholderList:this.state.shareholderList})},this.handleFieldChange=(e,t,i)=>{try{let s=w().cloneDeep(this.state.modSelectedTankShareholderDetails),a=w().cloneDeep(this.state.modShareholderList);if("shareholder"===i){let i=a.findIndex((e=>e.ShareholderCode===t.rowData.ShareholderCode));a[i].Volume=e,this.setState({modShareholderList:a},(()=>this.ValidateShareHolderVolume(a,e,t,s)))}else if("grossQuantity"===i){let i=s.findIndex((e=>e.ShareholderCode===t.rowData.ShareholderCode&&e.TankCode===t.rowData.TankCode));s[i].CalculatedGrossVolume=e,this.setState({modSelectedTankShareholderDetails:s})}else{let i=s.findIndex((e=>e.ShareholderCode===t.rowData.ShareholderCode&&e.TankCode===t.rowData.TankCode));s[i].NewLimitQuantity=e,this.setState({modSelectedTankShareholderDetails:s})}}catch(s){console.log("TankShareholderAssociationComposite : Error in handleFieldChange")}},this.handleReset=()=>{try{this.setState({modSelectedTankShareholderDetails:w().cloneDeep(this.state.selectedTankShareholderDetails),modShareholderList:w().cloneDeep(this.state.shareholderList)})}catch(e){console.log("TankShareholderAssociationComposite : Error in handleReset")}},this.handleUpdate=()=>{try{this.setState({saveEnabled:!1});let e=w().cloneDeep(this.state.tempSelectedTankShareholderDetails);this.UpdateTankShareholderAssociate(e)}catch(e){console.log("Tank shareholder Association Composite : Error in UpdateTankShareholderAssociation")}},this.handleSave=()=>{try{let e=w().cloneDeep(this.state.modSelectedTankShareholderDetails),t=[];if(e.forEach((e=>{null!==e.NewLimitQuantity&&void 0!==e.NewLimitQuantity&&""!==e.NewLimitQuantity&&(e.Active=!0,e.NewLimitQuantity=h.bo(e.NewLimitQuantity),t.push(e),e.LimitQuantity=e.NewLimitQuantity)})),this.ValidateSave(t)){let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,i=w().cloneDeep(t);this.setState({showAuthenticationLayout:e,tempSelectedTankShareholderDetails:i},(()=>{!1===e&&this.handleUpdate()}))}else this.setState({saveEnabled:!0})}catch(e){console.log("TankShareholderAssociationComposite : Error in handleSave")}},this.handleEditTank=()=>{this.GetTankShareholderAssociation()},this.handleViewAuditTrail=()=>{try{let e={messageType:"critical",message:"TankShareholderAssociationViewAuditTrailStatus",messageResultDetails:[{keyFields:[],keyValues:[],isSuccess:!1,errorMessage:""}]};d()(c.ZIT,h.Jm(this.props.tokenDetails.tokenInfo)).then((t=>{var i=t.data;if(!0===i.IsSuccess){let e=i.EntityResult.Table;Array.isArray(e)&&e.length>0&&e.forEach((e=>{let t=new Date(e.LastUpdatedTime).toLocaleDateString()+" "+new Date(e.LastUpdatedTime).toLocaleTimeString();e.LastUpdatedTime=t}));let t={...this.state.operationsVisibility};t.shareholder=!1,this.setState({auditTrailList:e,isReadyToRender:!1,isViewAuditTrail:!0,operationsVisibilty:t})}else this.setState({auditTrailList:[],isReadyToRender:!0},(()=>{e.messageType=i.IsSuccess?"success":"critical",e.messageResultDetails[0].isSuccess=i.IsSuccess,e.messageResultDetails[0].errorMessage=i.ErrorList[0],(0,u.toast)((0,x.jsx)(o.A,{children:(0,x.jsx)(m.A,{notificationMessage:e})}),{autoClose:"success"===e.messageType&&1e4})})),console.log("Error in handleViewAuditTrail:",i.ErrorList)})).catch((e=>{this.setState({data:[],isReadyToRender:!0}),console.log("Error while handleViewAuditTrail:",e)}))}catch(e){console.log("TankShareholderAssociationComposite:Error occured on getting view audit trail",e)}},this.inValidVolumePopUp=()=>(0,x.jsx)(g.TranslationConsumer,{children:e=>(0,x.jsxs)(S.Modal,{open:!this.state.isValidVolume,size:"small",children:[(0,x.jsx)(S.Modal.Content,{children:(0,x.jsx)("div",{className:"col col-lg-12",children:(0,x.jsx)("h5",{children:e(this.state.errorMsg)})})}),(0,x.jsx)(S.Modal.Footer,{children:(0,x.jsx)(S.Button,{type:"primary",content:e("AccessCardInfo_Ok"),onClick:()=>{this.setState({isValidVolume:!0})}})})]})}),this.handleBack=()=>{try{let e={...this.state.operationsVisibility};e.shareholder=!0,this.setState({isDetails:!1,selectedItems:[],isViewAuditTrail:!1,isReadyToRender:!0,operationsVisibilty:e},(()=>{this.GetTankShareholderList("All"===this.state.selectedShareholder?"":this.state.selectedShareholder),this.getKPIList("All"===this.state.selectedShareholder?this.props.userDetails.EntityResult.PrimaryShareholder:this.state.selectedShareholder)}))}catch(e){console.log("TankShareholderAssociationComposite:Error occured on Back click",e)}},this.handleShareholderSelectionChange=e=>{try{this.setState({selectedShareholder:e,isReadyToRender:!1,selectedItems:[],isDetails:!1},(()=>{this.GetTankShareholderList("All"===e?"":e),this.getKPIList("All"===e?this.props.userDetails.EntityResult.PrimaryShareholder:e)}))}catch(t){console.log("TankShareholderAssociationComposite:Error occured on handleShareholderSelectionChange",t)}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})}}componentDidMount(){try{h.pJ(this.props.userDetails.EntityResult.IsArchived),this.getLookUpData()}catch(e){console.log("TankShareholderAssociationComposite:Error occured on componentDidMount",e)}window.addEventListener("beforeunload",this.clearStorage)}getLookUpData(){d()(c.xAA+"?LookUpTypeCode=Commingling",h.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;if(!0===t.IsSuccess){let e=!0;if("FALSE"===t.EntityResult.EnableCommingling.toUpperCase()&&(e=!1),this.setState({isEnable:e,OverwriteGrossNetValues:"FALSE"!==t.EntityResult.OverwriteGrossNetValues.toUpperCase()}),e){let e=w().cloneDeep(this.props.userDetails.EntityResult.ShareholderList);e.splice(0,0,"All");let t=[];this.props.userDetails.EntityResult.ShareholderList.forEach((e=>{t.push({ShareholderCode:e,Volume:null})})),this.setState({selectedShareholder:e[0],allShareholder:e,shareholderList:t,modShareholderList:t}),this.GetTankShareholderList(""),this.getKPIList(this.props.userDetails.EntityResult.PrimaryShareholder)}}else console.log("Error in getLookUpData: ",t.ErrorList)})).catch((e=>{console.log("TankShareholderAssociationComposite: Error occurred on getLookUpData",e)}))}renderModal(){let e=null,t=this.props.userDetails.EntityResult.ShareholderList.join(E.uV);e=this.props.userDetails.EntityResult.IsArchived?"TM/"+E.mD+"/TankCominglingReport":"TM/"+E.PZ+"/TankCominglingReport";let i={Culture:this.props.userDetails.EntityResult.UICulture,ShareholderList:t,readonly:1};return(0,x.jsx)(R.A,{showReport:this.state.showReport,handleBack:this.handleModalBack,handleModalClose:this.handleModalBack,proxyServerHost:c._Oi,reportServiceHost:this.reportServiceURI,filePath:e,parameters:i})}getKPIList(e){if(!0===h.ab(this.props.userDetails.EntityResult.FunctionsList,j.i.view,j.bL)){var t={message:"",messageType:"critical",messageResultDetails:[]};let i={PageName:T.bF,InputParameters:[{key:"ShareholderCode",value:e}]};d()(c.dxq,h.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{var i=e.data;!0===i.IsSuccess?this.setState({tankShareholderAssociationKPIList:i.EntityResult.ListKPIDetails}):(this.setState({tankShareholderAssociationKPIList:[]}),console.log("Error in tank shareholder association KPIList:",i.ErrorList),t.messageResultDetails.push({keyFields:[],keyValues:[],isSuccess:!1,errorMessage:i.ErrorList[0]})),t.messageResultDetails.length>0&&(0,u.toast)((0,x.jsx)(o.A,{children:(0,x.jsx)(m.A,{notificationMessage:t})}),{autoClose:"success"===t.messageType&&1e4})})).catch((e=>{console.log("Error while getting tank shareholder association KPIList:",e)}))}}GetSignificantDigits(){try{d()(c.xAA+"?LookUpTypeCode=Common",h.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;!0===t.IsSuccess?void 0!==t.EntityResult.NumberOfSignificantDigits&&null!==t.EntityResult.NumberOfSignificantDigits&&this.setState({noOfSignificantDigits:t.EntityResult.NumberOfSignificantDigits}):console.log("Error in getSignificantDigits: ",t.ErrorList)})).catch((e=>{console.log("TankShareholderAssociationComposite: Error occurred on getSignificantDigits",e)}))}catch(e){console.log("TankShareholderAssociationComposite:Error occured on geting RefrenceSourceLookUp Value",e)}}GetTankShareholderList(e){try{d()(c.FlU+"?shareholderCode="+e,h.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({data:t.EntityResult,isReadyToRender:!0}):(this.setState({data:[],isReadyToRender:!0}),console.log("Error in getTankshareholder:",t.ErrorList))})).catch((e=>{this.setState({data:[],isReadyToRender:!0}),console.log("Error while getting getTankshareholder:",e)}))}catch(t){console.log("TankShareholderAssociationComposite : Error while getting getTankshareholder list:",t)}}ValidateShareHolderVolume(e,t,i,s){let a=w().cloneDeep(this.state.noOfSignificantDigits);var r={message:"",messageType:"critical",messageResultDetails:[]};let l=!0;if(e.forEach((t=>{v.Uv.forEach((s=>{let a="";if(void 0!==s.validator&&(a=h.jr(s.validator,t[s.field])),""!==a){l=!1,r.messageResultDetails.push({keyFields:["AccessCardInfo_Shareholder",s.displayName],keyValues:[t.ShareholderCode,t[s.field]],isSuccess:!1,errorMessage:a});let n=e.findIndex((e=>e.ShareholderCode===i.rowData.ShareholderCode));e[n].Volume=null,this.setState({modShareholderList:e}),(0,u.toast)((0,x.jsx)(o.A,{children:(0,x.jsx)(m.A,{notificationMessage:r})}),{autoClose:"success"===r.messageType&&1e4})}}))})),l){let o="";if(parseFloat(t)>100)o="Commingling_IndividualStakeError";else{let r=0;e.forEach((e=>{null!==e.Volume&&void 0!==e.Volume&&(r+=parseFloat(e.Volume))})),parseFloat(r)>100?o="Commingling_CombinedStakeError":(s.forEach((e=>{e.ShareholderCode===i.rowData.ShareholderCode&&(e.NewLimitQuantity=Math.round(e.TankCapacity*(t/100),a),0!==e.TankGrossVolume&&null!==e.TankGrossVolume&&void 0!==e.TankGrossVolume&&""!==e.TankGrossVolume&&(e.CalculatedGrossVolume=Math.round(e.NewLimitQuantity/e.TankCapacity*e.TankGrossVolume,a)),0!==e.TankNetVolume&&null!==e.TankNetVolume&&void 0!==e.TankNetVolume&&""!==e.TankNetVolume&&(e.CalculatedNetVolume=Math.round(e.NewLimitQuantity/e.TankCapacity*e.TankNetVolume,a)))})),this.setState({modSelectedTankShareholderDetails:s}))}if(""!==o){let t=e.findIndex((e=>e.ShareholderCode===i.rowData.ShareholderCode));e[t].Volume=null,this.setState({isValidVolume:!1,errorMsg:o,modShareholderList:e})}}}UpdateTankShareholderAssociate(e){this.handleAuthenticationClose();try{let t={Entity:e},i={messageType:"critical",message:"TankShareholderInfo_SavedStatus",messageResultDetails:[{keyFields:[],keyValues:[],isSuccess:!1,errorMessage:""}]};d()(c.Z4Y,h.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;i.messageType=t.IsSuccess?"success":"critical",i.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?(this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,j.i.modify,j.B2),modShareholderList:w().cloneDeep(this.state.shareholderList)}),this.GetTankShareholderAssociation()):(i.messageResultDetails[0].errorMessage=t.ErrorList[0],this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,j.i.add,j.B2)}),console.log("Error in Update Tank Shareholder Info:",t.ErrorList)),(0,u.toast)((0,x.jsx)(o.A,{children:(0,x.jsx)(m.A,{notificationMessage:i})}),{autoClose:"success"===i.messageType&&1e4})})).catch((e=>{this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,j.i.add,j.B2)}),i.messageResultDetails[0].errorMessage=e,(0,u.toast)((0,x.jsx)(o.A,{children:(0,x.jsx)(m.A,{notificationMessage:i})}),{autoClose:"success"===i.messageType&&1e4})}))}catch(t){console.log("TankShareholderAssociationComposite : Error in UpdateTankShareholderAssociate")}}ValidateSave(e){try{let t={messageType:"critical",message:"TankShareholderInfo_SavedStatus",messageResultDetails:[]};if(e.length>0?e.forEach((e=>{v.WP.forEach((i=>{let s="";void 0!==i.validator&&(s=h.jr(i.validator,e[i.field])),""!==s&&t.messageResultDetails.push({keyFields:["AtgConfigure_TankCode",i.displayName],keyValues:[e.TankCode,e[i.field]],isSuccess:!1,errorMessage:s})}))})):t.messageResultDetails.push({keyFields:[],keyValues:[],isSuccess:!1,errorMessage:"TankShareholderAssn_EnterProposedQtyMessage"}),t.messageResultDetails.length>0)return(0,u.toast)((0,x.jsx)(o.A,{children:(0,x.jsx)(m.A,{notificationMessage:t})}),{autoClose:"success"===t.messageType&&1e4}),!1}catch(t){console.log("TankShareholderAssociationComposite : Error in ValidateSave")}return!0}GetTankShareholderAssociation(){try{d()(c.TK0,h.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=w().cloneDeep(t.EntityResult),i=w().cloneDeep(this.state.selectedItems),s=w().cloneDeep(this.state.selectedShareholder),a=w().cloneDeep(t.EntityResult),o=[],r=[];i.forEach((e=>{o.push(e.Common_Code),this.props.userDetails.EntityResult.ShareholderList.forEach((t=>{r.push({TankCode:e.Common_Code,ShareholderCode:t,BaseProductCode:e.TankList_BaseProduct,LimitQuantity:0,LimitQuantityPercentage:0,VolumeUOM:e.TankList_Units,TankCapacity:e.TankList_Capacity,TankGrossVolume:e.TankList_GrossVolume,TankNetVolume:e.TankList_NetVolume})}))})),a=a.filter((e=>o.includes(e.TankCode))),r.forEach((e=>{a.findIndex((t=>t.TankCode===e.TankCode&&t.BaseProductCode===e.BaseProductCode&&t.ShareholderCode===e.ShareholderCode))<0&&(e.CalculatedGrossVolume=0,e.CalculatedNetVolume=0,a.push(e))})),a.forEach((e=>{if("All"!==s)s.includes(e.ShareholderCode)||(e.LimitQuantity=0,e.CalculatedGrossVolume=0);else{-1===this.props.userDetails.EntityResult.ShareholderList.indexOf(e.ShareholderCode)&&(e.LimitQuantity=0,e.CalculatedGrossVolume=0)}e.NewLimitQuantity=null,e.LimitQuantityPercentage=parseFloat(e.LimitQuantity/e.TankCapacity*100).toFixed(this.state.noOfSignificantDigits)})),this.setState({tankShareholderDetails:e,isDetails:!0,selectedTankShareholderDetails:a,modSelectedTankShareholderDetails:w().cloneDeep(a),saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,j.i.add,j.B2)})}else this.setState({tankShareholderDetails:[],isDetails:!1,saveEnabled:!1}),console.log("Error in getTankShareholderAssociationDetails:",t.ErrorList)})).catch((e=>{this.setState({tankShareholderDetails:[],isDetails:!1}),console.log("Error while getting TankShareholderAssociationDetails:",e)}))}catch(e){console.log("TankShareholderAssociationComposite: Error in GetTankShareholderAssociation")}}render(){return(0,x.jsxs)("div",{children:[(0,x.jsx)(o.A,{children:(0,x.jsx)(l.$,{operationsVisibilty:this.state.operationsVisibilty,shareholders:this.state.allShareholder,breadcrumbItem:this.props.activeItem,onShareholderChange:this.handleShareholderSelectionChange,selectedShareholder:this.state.selectedShareholder,addVisible:!1,deleteVisible:!1})}),this.state.isViewAuditTrail?(0,x.jsx)(f,{auditTrailList:this.state.auditTrailList,handleBack:this.handleBack}):this.state.isReadyToRender?(0,x.jsxs)("div",{children:[(0,x.jsx)(o.A,{children:(0,x.jsx)(k.A,{kpiList:this.state.tankShareholderAssociationKPIList,pageName:"TankShareholderAssociation"})}),(0,x.jsx)(o.A,{children:(0,x.jsx)(y,{tableData:this.state.data.Table,columnDetails:this.state.data.Column,pageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,terminalsToShow:this.props.userDetails.EntityResult.PageAttibutes.NoOfTerminalsToShow,selectedItems:this.state.selectedItems,onSelectionChange:this.handleSelection,handleViewAuditTrail:this.handleViewAuditTrail,exportRequired:!0,exportFileName:"TankShareholderAssociationList",columnPickerRequired:!0,selectionRequired:!0,columnGroupingRequired:!0,parentComponent:this.componentName,isDetails:this.state.isDetails,handleEditTank:this.handleEditTank,isEnableModify:h.ab(this.props.userDetails.EntityResult.FunctionsList,j.i.modify,j.B2),shareholderList:this.state.shareholderList,modShareholderList:this.state.modShareholderList,handleFieldChange:this.handleFieldChange,selectedTankShareholderDetails:this.state.selectedTankShareholderDetails,modSelectedTankShareholderDetails:this.state.modSelectedTankShareholderDetails,handleSave:this.handleSave,saveEnabled:this.state.saveEnabled,handleReset:this.handleReset,handleViewReport:this.handleViewReport,selectedShareholder:this.state.selectedShareholder,OverwriteGrossNetValues:this.state.OverwriteGrossNetValues})})]}):this.state.isEnable?(0,x.jsx)(r.A,{message:"Loading"}):(0,x.jsx)(b.default,{errorMessage:"Commingling_Enable"}),this.state.showReport?this.renderModal():"",(0,x.jsx)(o.A,{children:(0,x.jsx)(u.ToastContainer,{hideProgressBar:!0,closeOnClick:!1,closeButton:!0,newestOnTop:!0,position:"bottom-right",toastClassName:"toast-notification-wrap"})}),this.state.isValidVolume?null:this.inValidVolumePopUp(),this.state.showAuthenticationLayout?(0,x.jsx)(A.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:j.i.modify,functionGroup:j.B2,handleOperation:this.handleUpdate,handleClose:this.handleAuthenticationClose}):null]})}}const P=(0,a.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(L)},73571:(e,t,i)=>{"use strict";i.d(t,{A:()=>m});i(65043);var s=i(72711),a=i(728),o=i(92569),r=i(47766),l=(i(60663),i(7523)),n=i(97508),d=i(70579);function c(e){let{proxyServerHost:t,reportServiceHost:i,parameters:s,filePath:a,...l}=e;const n=t+"api/report",c=(e,t)=>{const i=t.settings.beforeSend;t.settings.beforeSend=function(t){i&&i(t),l.userDetails.EntityResult.IsWebPortalUser||(t.withCredentials=!0),t.URL_DEBUG.indexOf("parameters")>-1&&(t.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var t=e.hostElement;setTimeout((()=>{var e=t.querySelector(".wj-viewer-splitter"),i=t.querySelector(".wj-viewer-tabsleft").querySelectorAll("li")[2];i.disabled||(i.className="hidden",e.click())}),1e3)}})}};let h={Authorization:"Bearer "+l.tokenDetails.tokenInfo};const u=(e,s)=>{r._ReportService.prototype.load=function(e){var s=this,a=new r._Promise;return this._checkReportController(a)?(this.httpRequest(this._getReportInstancesUrl(),{method:"POST",data:e}).then((function(e){var o=r._parseReportExecutionInfo(e.responseText);s._instanceId=o.id,s._status=r._ExecutionStatus.loaded,s._outlinesLocation=o.outlinesLocation,s._statusLocation=o.statusLocation.replace(i,t),s._pageSettingsLocation=o.pageSettingsLocation,s._featuresLocation=o.featuresLocation,s._parametersLocation=o.parametersLocation,a.resolve(o)}),(function(e){a.reject(s._getError(e))})),a):a}};return(0,d.jsx)("div",{children:l.userDetails.EntityResult.IsWebPortalUser?(0,d.jsx)("div",{children:(0,d.jsx)(o.R,{requestHeaders:h,style:{height:"80vh"},parameters:s,serviceUrl:n,filePath:a,initialized:u,beforeSendRequest:c})}):(0,d.jsx)("div",{children:(0,d.jsx)(o.R,{style:{height:"80vh"},parameters:s,serviceUrl:n,filePath:a,initialized:u,beforeSendRequest:c})})})}c.defaultProps={parameters:{}},a.setLicenseKey(l.yQ);const h=(0,n.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(c);var u=i(67907);function m(e){let{proxyServerHost:t,reportServiceHost:i,filePath:a,handleBack:o,showReport:r,handleModalClose:l,parameters:n}=e;const[c]=(0,u.useTranslation)();return(0,d.jsx)(s.Modal,{style:{padding:"0px"},size:"fullscreen",open:r,children:(0,d.jsxs)("div",{children:[(0,d.jsx)(s.Header,{title:c("Header_TerminalManager"),menu:!1}),(0,d.jsx)(h,{proxyServerHost:t,reportServiceHost:i,filePath:a,parameters:n}),(0,d.jsx)("div",{style:{marginTop:"10px",marginLeft:"20px"},children:(0,d.jsx)(s.Button,{className:"backButton",onClick:o,content:c("Report_Back")})})]})})}m.defaultProps={parameters:{}}},80312:(e,t,i)=>{"use strict";i.d(t,{$3:()=>q,$H:()=>se,$J:()=>me,$K:()=>ge,$V:()=>Et,$b:()=>ft,$p:()=>B,AE:()=>D,Al:()=>U,B2:()=>st,By:()=>Dt,CW:()=>gt,DA:()=>n,Ee:()=>_e,FO:()=>A,Fy:()=>Ie,G9:()=>it,H8:()=>ee,Hq:()=>lt,Ig:()=>V,Iu:()=>C,JI:()=>dt,JJ:()=>te,JU:()=>z,Jz:()=>ze,KQ:()=>re,Kk:()=>Ye,Kw:()=>et,LP:()=>bt,LR:()=>c,Lg:()=>Z,Mg:()=>fe,Mm:()=>I,N1:()=>$,Nm:()=>p,No:()=>de,Ow:()=>Q,P2:()=>o,P8:()=>xe,PD:()=>Le,PE:()=>h,PG:()=>K,PP:()=>mt,Pb:()=>Ne,QB:()=>k,QC:()=>Y,RE:()=>ot,RO:()=>Ze,Rc:()=>Ct,Rl:()=>kt,Rx:()=>St,TI:()=>x,Tm:()=>pe,Ug:()=>X,Ur:()=>Oe,V9:()=>d,VK:()=>O,VL:()=>ue,VQ:()=>le,WD:()=>Fe,Wf:()=>E,YO:()=>P,YY:()=>Ae,Yb:()=>Se,Yg:()=>qe,Z9:()=>ut,ZE:()=>ct,ZU:()=>f,_N:()=>xt,_S:()=>vt,_d:()=>At,aS:()=>_,aZ:()=>ht,au:()=>je,b0:()=>Rt,bL:()=>Ue,c2:()=>Me,d4:()=>Ve,dB:()=>S,dD:()=>Be,dK:()=>W,dY:()=>L,de:()=>u,dv:()=>ve,eQ:()=>l,f3:()=>ke,fF:()=>F,fL:()=>yt,fN:()=>jt,fk:()=>v,fl:()=>Ce,fr:()=>T,go:()=>a,h:()=>he,hD:()=>R,hE:()=>b,hh:()=>Xe,hk:()=>oe,hz:()=>pt,i:()=>s,j2:()=>rt,jN:()=>H,je:()=>g,jx:()=>M,kL:()=>$e,ke:()=>Qe,km:()=>ne,l0:()=>ae,l6:()=>We,lz:()=>N,m0:()=>y,nS:()=>we,nk:()=>nt,nn:()=>j,np:()=>J,oh:()=>at,op:()=>Ke,pt:()=>Ge,qk:()=>ce,qp:()=>ye,r6:()=>Re,rQ:()=>Ee,rj:()=>G,rp:()=>r,t3:()=>Tt,tM:()=>Pe,to:()=>Pt,ts:()=>tt,uH:()=>Te,uy:()=>Je,w1:()=>be,x5:()=>ie,xz:()=>w,y_:()=>He,yu:()=>m,yx:()=>wt,z8:()=>De,z_:()=>Lt});const s={view:"view",add:"add",modify:"modify",remove:"remove"},a="carriercompany",o="driver",r="customer",l="trailer",n="originterminal",d="destination",c="primemover",h="vehicle",u="shipmentbycompartment",m="shipmentbyproduct",p="ViewShipmentStatus",g="vessel",S="order",C="OrderForceClose",x="contract",y="receiptplanbycompartment",f="ViewMarineShipment",k="MarineShipmentByCompartment",T="ViewMarineReceipt",j="supplier",D="finishedproduct",w="RailDispatch",R="RailReceipt",E="RailRoute",v="RailWagon",b="CloseRailDispatch",A="PrintRailBOL",L="PrintRailFAN",P="RailDispatchLoadSpotAssignment",N="RailDispatchProductAssignment",V="ViewRailDispatch",I="ViewRailLoadingDetails",F="CloseRailReceipt",G="PrintRailBOD",M="PrintRailRAN",U="ViewRailReceipt",B="ViewRailUnLoadingDetails",_="SMS",Q="UnAccountedTransactionTank",O="UnAccountedTransactionMeter",W="PipelineDispatch",q="PipelineReceipt",H="PipelineDispatchManualEntry",z="PipelineReceiptManualEntry",K="LookUpData",J="HSEInspection",Z="HSEInspectionConfig",$="Email",Y="Shareholder",X="LocationConfig",ee="DeviceConfig",te="baseproduct",ie="SiteView",se="LeakageManualEntry",ae="Terminal",oe="SlotInformation",re="TankGroup",le="Tank",ne="SealMaster",de="TankEODEntry",ce="UnmatchedLocalTransactions",he="AccessCard",ue="ResetPin",me="SlotConfiguration",pe="PrintMarineFAN",ge="PrintMarineBOL",Se="ViewMarineLoadingDetails",Ce="ViewMarineShipmentAuditTrail",xe="CloseMarineShipment",ye="IssueCard",fe="ActivateCard",ke="RevokeCard",Te="AutoIDAssociation",je="MarineReceiptByCompartment",De="PrintMarineRAN",we="PrintMarineBOD",Re="ViewMarineUnloadingDetails",Ee="ViewMarineReceiptAuditTrail",ve="CloseMarineReceipt",be="WeekendConfig",Ae="EODAdmin",Le="PrintBOL",Pe="PrintFAN",Ne="PrintBOD",Ve="CloseShipment",Ie="CloseReceipt",Fe="CONTRACTFORCECLOSE",Ge="Captain",Me="OverrideShipmentSequence",Ue="KPIInformation",Be="Language",_e="WebPortalUserMap",Qe="BayGroup",Oe="PipelineHeaderSiteView",We="TankMonitor",qe="PersonAdmin",He="ProductReconciliationReports",ze="ReportConfiguration",Ke="EXECONFIGURATION",Je="ShareholderAllocation",Ze="NotificationGroup",$e="NotificationRestriction",Ye="NotificationConfig",Xe="AllowWeighBridgeManualEntry",et="ProductAllocation",tt="MasterDeviceConfiguration",it="ShareholderAgreement",st="TANKSHAREHOLDERPRIMEFUNCTION",at="ROLEADMIN",ot="ShiftConfig",rt="PrinterConfiguration",lt="CustomerAgreement",nt="BaySCADAConfiguration",dt="RailReceiptUnloadSpotAssignment",ct="STAFF_VISITOR",ht="PipelineMeterSiteView",ut="RailSiteView",mt="MarineSiteView",pt="LoadingDetails",gt="UnloadingDetails",St="RoadHSEInspection",Ct="RoadHSEInspectionConfig",xt="MarineHSEInspection",yt="MarineHSEInspectionConfig",ft="RailHSEInspection",kt="RailHSEInspectionConfig",Tt="PipelineHSEInspection",jt="PipelineHSEInspectionConfig",Dt="PrintRAN",wt="ViewReceiptStatus",Rt="customerrecipe",Et="COAParameter",vt="COATemplate",bt="COAManagement",At="COACustomer",Lt="COAAssignment",Pt="ProductForecastConfiguration"},50477:()=>{}}]);
//# sourceMappingURL=4140.a0619a49.chunk.js.map