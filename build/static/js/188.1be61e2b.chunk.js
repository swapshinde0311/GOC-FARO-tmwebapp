(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[188,5841,8222,3235,7185],{66554:(e,t,i)=>{"use strict";i.d(t,{$:()=>d});var o=i(65043),s=i(72711),n=i(67907),l=i(65187),a=i(69062),r=i(70579);function c(e){let{operationsVisibilty:t,breadcrumbItem:i,shareholders:c,selectedShareholder:d,onShareholderChange:u,onDelete:h,onAdd:m,popUpContent:p,shrVisible:R,handleBreadCrumbClick:g,addVisible:y,deleteVisible:C}=e;const[f,x]=(0,o.useState)(!1),[S,v]=(0,o.useState)(!1);function D(){t.add&&(p.length>0?v(!1===S):m())}return(0,r.jsxs)("div",{className:"row",style:{alignItems:"flex-start",padding:"0px"},children:[(0,r.jsx)("div",{className:"col-9 col-sm-9 col-md-9 col-lg-10 col-xl-10",style:{padding:"0px"},children:(0,r.jsxs)("div",{className:"row",style:{marginTop:"10px",alignItems:""},children:[(0,r.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-8",children:(0,r.jsxs)(l.A,{children:[" ",(0,r.jsx)(n.TranslationConsumer,{children:e=>(0,r.jsxs)(s.Breadcrumb,{children:[i.parents.map((t=>(0,r.jsx)(s.Breadcrumb.Item,{onClick:()=>{void 0!==g&&null!==g&&g(t.itemCode,i.parents)},children:e(t.localizedKey)},t.itemCode))),(0,r.jsx)(s.Breadcrumb.Item,{children:e(i.localizedKey)},i.itemCode)]})})]})}),(0,r.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-4",children:(0,r.jsx)(n.TranslationConsumer,{children:e=>(0,r.jsx)("div",{className:"compartmentIcon",style:{justifyContent:"flex-start"},children:!1===R?"":(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsxs)("h4",{className:"shrText",children:[e("Common_Shareholder"),":"]})}),(0,r.jsx)("div",{className:"opSelect",children:(0,r.jsx)(s.Select,{placeholder:e("Common_Shareholder"),value:d,disabled:!t.shareholder,options:a.Zj(c),onChange:e=>u(e)})})]})})})}),(0,r.jsx)(n.TranslationConsumer,{children:e=>(0,r.jsxs)(s.Modal,{open:f,size:"small",children:[(0,r.jsx)(s.Modal.Content,{children:(0,r.jsx)("div",{children:(0,r.jsx)("b",{children:e("Confirm_Delete")})})}),(0,r.jsxs)(s.Modal.Footer,{children:[(0,r.jsx)(s.Button,{type:"secondary",content:e("Cancel"),onClick:()=>x(!1)}),(0,r.jsx)(s.Button,{type:"primary",content:e("PipelineDispatch_BtnSubmit"),onClick:()=>{x(!1),h()}})]})]})})]})}),(0,r.jsx)("div",{className:"col-3 col-sm-3 col-md-3 col-lg-2 col-xl-2",children:(0,r.jsxs)("div",{style:{float:"right",display:"inline-block",marginTop:"10px"},children:[y?(0,r.jsx)(s.Popup,{position:"bottom right",className:"popup-theme-wrap",element:(0,r.jsx)("div",{className:(t.add?"iconCircle ":"iconCircleDisable ")+"iconblock",onClick:D,children:(0,r.jsx)(s.Icon,{root:"common",name:"badge-plus",size:"small",color:"white"})}),on:"click",open:S,children:(0,r.jsx)("div",{onMouseLeave:()=>v(!1),children:(0,r.jsx)(n.TranslationConsumer,{children:e=>(0,r.jsx)(s.VerticalMenu,{children:(0,r.jsxs)(s.VerticalMenu,{children:[(0,r.jsx)(s.VerticalMenu.Header,{children:e("Common_Create")}),p.map((t=>(0,r.jsx)(s.VerticalMenu.Item,{onClick:()=>{return e=t.fieldName,v(!1),void m(e);var e},children:e(t.fieldValue)})))]})})})})}):"",C?(0,r.jsx)("div",{style:{marginLeft:"10px"},onClick:()=>{t.delete&&x(!0)},className:(t.delete?"iconCircle ":"iconCircleDisable ")+"iconblock",children:(0,r.jsx)(s.Icon,{root:"common",name:"delete",size:"small",color:"white"})}):""]})})]})}c.defaultProps={operationsVisibilty:{add:!1,delete:!1,shareholder:!1},breadcrumbItem:{itemName:"",itemCode:"",localizedKey:"",itemProps:{},parents:[],isComponent:!1},shareholders:[],selectedShareholder:"",popUpContent:[],shrVisible:!0,addVisible:!0,deleteVisible:!0};i(38726);function d(e){let{operationsVisibilty:t,breadcrumbItem:i,shareholders:o,selectedShareholder:s,onShareholderChange:n,onDelete:l,onAdd:a,popUpContent:d,shrVisible:u,handleBreadCrumbClick:h,addVisible:m,deleteVisible:p}=e;return(0,r.jsx)(c,{operationsVisibilty:t,breadcrumbItem:i,shareholders:o,selectedShareholder:s,onShareholderChange:n,onDelete:l,onAdd:a,popUpContent:d,shrVisible:u,handleBreadCrumbClick:h,addVisible:m,deleteVisible:p})}},62900:(e,t,i)=>{"use strict";i.d(t,{A:()=>C});var o=i(65043),s=i(67907),n=i(72711),l=i(72067),a=i(69062),r=i(97508),c=i(44192),d=i(40854),u=i.n(d),h=i(53536),m=i.n(h),p=i(86111),R=i.n(p),g=i(70579);class y extends o.Component{constructor(){super(...arguments),this.state={isPasswordRequired:!1,Password:"",validationErrors:a.Th(c.Qh),authenticationResponse:"",btnAuthenticateEnabled:!0},this.onFieldChange=(e,t)=>{this.setState({Password:t});const i=m().cloneDeep(this.state.validationErrors);void 0!==c.Qh[e]&&(i[e]=a.jr(c.Qh[e],t),this.setState({validationErrors:i,authenticationResponse:""}))},this.validatePassword=e=>{this.setState({btnAuthenticateEnabled:!1});const t={...this.state.validationErrors};null!==e&&""!==e||(t.Password="UserValidationForm_ReqfldValPassword"),this.setState({validationErrors:t});var i=!0;return i&&(i=Object.values(t).every((function(e){return""===e}))),i},this.onCloseClick=()=>{this.setState({isPasswordRequired:!1,authenticationResponse:"",btnAuthenticateEnabled:!0},(()=>this.props.handleClose()))},this.AuthenticateUser=()=>{if(this.validatePassword(this.state.Password)){this.setState({authenticationResponse:""});try{var e=this.state.Password,t=this.props.Username,i=R().lib.WordArray.random(16),o=R().PBKDF2(t,i,{keySize:8,iterations:100}),s=R().lib.WordArray.random(16),n=R().AES.encrypt(e,o,{iv:s,padding:R().pad.Pkcs7,mode:R().mode.CBC}),r=i.toString()+s.toString()+n.toString();u()(l.KrY+"?encryptedPassword="+encodeURIComponent(r),a.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess&&"true"===t.EntityResult.toLowerCase()?(this.setState({isPasswordRequired:!1}),this.props.handleOperation()):this.setState({authenticationResponse:t.ErrorList[0],btnAuthenticateEnabled:!0})})).catch((e=>{this.setState({authenticationResponse:e,btnAuthenticateEnabled:!0})}))}catch(c){this.setState({authenticationResponse:c,btnAuthenticateEnabled:!0})}}else this.setState({btnAuthenticateEnabled:!0})}}componentDidMount(){try{this.IsPasswordRequired()}catch(e){console.log("BaseProductDetailsComposite:Error occured on componentDidMount",e)}}IsPasswordRequired(){try{let e=a.Hp(this.props.userDetails.EntityResult.roleFunctionInfo,this.props.functionName,this.props.functionGroup);this.setState({isPasswordRequired:e}),!1===e&&this.props.handleOperation()}catch(e){console.log("Error in IsPasswordRequired method:",e)}}render(){return(0,g.jsx)("div",{children:!0===this.state.isPasswordRequired?(0,g.jsx)(s.TranslationConsumer,{children:e=>(0,g.jsxs)(n.Modal,{open:!0,size:"mini",children:[(0,g.jsxs)(n.Modal.Content,{children:[(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col col-lg-8",style:{marginLeft:"10px"},children:(0,g.jsx)("h4",{children:e("User_Authentication")})}),(0,g.jsx)("div",{className:"col-12 col-lg-3",style:{textAlign:"right"},onClick:this.onCloseClick,children:(0,g.jsx)(n.Icon,{root:"common",name:"close"})})]}),(0,g.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,g.jsx)("div",{className:"col col-lg-12",children:(0,g.jsx)("label",{children:(0,g.jsxs)("h5",{children:[e("UserValidation_Form_AccountName"),":",this.props.Username]})})}),(0,g.jsx)("div",{className:"col col-lg-12",children:(0,g.jsx)(n.Input,{fluid:!0,type:"password",disablePasswordToggle:!1,value:this.state.Password,indicator:"required",onChange:e=>this.onFieldChange("Password",e),label:e("AccessCardInfo_x_Pwd"),error:e(this.state.validationErrors.Password),reserveSpace:!1})})]})]}),(0,g.jsxs)(n.Modal.Footer,{children:[(0,g.jsx)("span",{className:"ui error-message autherrormsg",children:e(this.state.authenticationResponse)}),(0,g.jsx)(n.Button,{type:"primary",disabled:!this.state.btnAuthenticateEnabled,content:e("UserValidationForm_Authentication"),onClick:this.AuthenticateUser})]})]})}):null})}}const C=(0,r.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(y)},19380:(e,t,i)=>{"use strict";i.d(t,{A:()=>S});var o=i(65043),s=i(728),n=i(62672),l=i(27976),a=i(44063),r=i(39078),c=i(48546),d=i(82967),u=i(11201),h=i(43439),m=(i(60663),i(48385)),p=i(72711),R=i(67907),g=i(65187),y=i(53536),C=(i(90837),i(70579));const f=e=>{const[t,i]=(0,o.useState)(null),[f]=(0,R.useTranslation)(),x=t=>new s.CollectionView(e.sourceData,{pageSize:t}),[S,v]=(0,o.useState)(x(e.rowsPerPage)),D=o.createRef(),E=o.createRef(),j=o.createRef(),b=o.createRef(),I=o.useRef(),w=o.useRef(e.selectionRequired?[]:null);let N=null;const F=t=>{try{if(M(),e.onRowClick&&t.addEventListener(t.hostElement,"click",(i=>{let o=t.hitTest(i);if(o.target.closest(".wj-cell")&&![...o.target.closest(".wj-cell").classList].includes("wj-group")&&o.cellType===n.CellType.Cell){const i=t.rows[o.row].dataItem;e.onRowClick(i)}})),t.selectionMode=s.asEnum("None",n.SelectionMode),t.select(-1,-1),i(t),e.selectionRequired){N=new u.Selector(t,{itemChecked:(i,o)=>{e.singleSelection&&t.rows.filter((e=>e.isSelected&&1===w.current.filter((t=>y.isEqual(t,e.dataItem))).length)).forEach((e=>{e.isSelected=!1})),e.onSelectionHandle(t.rows.filter((e=>e.isSelected)).map((e=>e.dataItem)))},showCheckAll:!e.singleSelection});let i=N.column.grid;N.column=i.rowHeaders.columns[0],i.headersVisibility=n.HeadersVisibility.All,i.selectionMode=s.asEnum("None",n.SelectionMode)}}catch(o){console.log("Error in gridInitialized: "+o)}};(0,o.useEffect)((()=>{try{if(null!=D){let e=D.current.control;E.current.control.grid=e}v(x(e.rowsPerPage))}catch(t){console.log("Error in grid update:",t)}}),[e.sourceData]),(0,o.useEffect)((()=>{try{t&&e.selectionRequired&&(w.current.length=0,w.current.push(...e.selectedItems),t.rows.forEach((t=>{1===e.selectedItems.filter((e=>y.isEqual(e,t.dataItem))).length?t.isSelected=!0:t.isSelected=!1})),t.refresh())}catch(i){console.log("Error in pre-selecting rows:",i)}}),[e.selectedItems]),(0,o.useEffect)((()=>{try{if(localStorage.getItem(e.parentComponent+"GridState")&&"null"!==localStorage.getItem(e.parentComponent+"GridState")&&t){let o=JSON.parse(localStorage.getItem(e.parentComponent+"GridState")),n=t;n.columns.forEach((e=>{let t=o.columns.filter((t=>t.binding===e.binding));e.visible=t.length>0?t[0].visible:e.visible})),j.current.control.filterDefinition=o.filterDefinition,n.collectionView.deferUpdate((()=>{n.collectionView.sortDescriptions.clear();for(let e=0;e<o.sortDescriptions.length;e++){let t=o.sortDescriptions[e];n.collectionView.sortDescriptions.push(new s.SortDescription(t.property,t.ascending))}}));for(let e=0;e<o.groupDescriptions.length;e++)n.collectionView.groupDescriptions.push(new s.PropertyGroupDescription(o.groupDescriptions[e])),n.columns.filter((t=>t.binding===o.groupDescriptions[e]))[0].visible=!1;if(sessionStorage.getItem(e.parentComponent+"GridState")&&"null"!==sessionStorage.getItem(e.parentComponent+"GridState")){let t=JSON.parse(sessionStorage.getItem(e.parentComponent+"GridState"));n.collectionView.moveToPage(n.collectionView.pageCount-1>=t.pageIndex?t.pageIndex:n.collectionView.pageCount-1),E&&(E.current.control.text=t.searchText)}i(n),t.refresh()}}catch(o){console.log("Error in restoring local storage settings: ",o)}}),[S]),(0,o.useEffect)((()=>{try{t&&I.current&&e.columnPickerRequired&&(I.current.itemsSource=t.columns,I.current.checkedMemberPath="visible",I.current.displayMemberPath="header",I.current.lostFocus.addHandler((()=>{(0,s.hidePopup)(I.current.hostElement)})))}catch(i){console.log("Error in initializing column picker properties:",i)}}),[I.current]),(0,o.useEffect)((()=>()=>{e.columnPickerRequired&&I.current&&(0,s.hidePopup)(I.current.hostElement)}),[]);const A=()=>{try{let o=t;o.itemsSource.pageSize=e.sourceData.length,i(o),h.FlexGridXlsxConverter.saveAsync(t,{includeColumnHeaders:!0,includeCellStyles:!1,formatItem:null},e.exportFileName),o.itemsSource.pageSize=e.rowsPerPage,i(o)}catch(o){console.log("Error in export grid to excel:",o)}},P=(t,i)=>{if(void 0!==i&&null!==i){if("boolean"===typeof t||"Active"===i.Name)return t?(0,C.jsx)(p.Icon,{name:"check",size:"small",color:"green"}):(0,C.jsx)(p.Icon,{name:"close",size:"small",color:"red"});if(""===t||null===t||void 0===t)return t;if(("TerminalCodes"===i.Name||"1"===i.PopOver)&&null!==t)return(o=t).split(",").length>e.terminalsToShow?(0,C.jsx)(p.Popup,{className:"popup-theme-wrap",on:"hover",element:o.split(",").length,children:(0,C.jsx)(p.Card,{children:(0,C.jsx)(p.Card.Content,{children:o})})}):o;if(void 0!==i.DataType&&"DateTime"===i.DataType)return new Date(t).toLocaleDateString()+" "+new Date(t).toLocaleTimeString();if(void 0!==i.DataType&&"Date"===i.DataType)return new Date(t).toLocaleDateString();if(void 0!==i.DataType&&"Time"===i.DataType)return new Date(t).toLocaleTimeString()}var o;return t},G=()=>{try{if(t&&j.current){let i={columns:t.columns.map((e=>({binding:e.binding,visible:e.visible}))),filterDefinition:j.current.control.filterDefinition,sortDescriptions:t.collectionView.sortDescriptions.map((e=>({property:e.property,ascending:e.ascending}))),groupDescriptions:t.collectionView.groupDescriptions.map((e=>e.propertyName?e.propertyName:null))};if(t.collectionView.groupDescriptions&&t.collectionView.groupDescriptions.length>0){[...document.getElementsByClassName("wj-column-selector-group")].forEach((e=>{e.parentNode.parentNode.classList.add("wj-grouped-checkbox")}))}let o={pageIndex:t.collectionView.pageIndex,searchText:E.current.control.text};localStorage.setItem(e.parentComponent+"GridState",JSON.stringify(i)),sessionStorage.setItem(e.parentComponent+"GridState",JSON.stringify(o))}}catch(i){console.log("Error in saving grid state")}},M=()=>{let e=s.culture.FlexGridFilter,t=r.Operator;s.culture.FlexGridFilter.header=f("WijmoGridFilterHeader"),s.culture.FlexGridFilter.ascending="\u2191 "+f("WijmoGridFilterAscending"),s.culture.FlexGridFilter.descending="\u2193 "+f("WijmoGridFilterDescending"),s.culture.FlexGridFilter.apply=f("RoleAdminEdit_Apply"),s.culture.FlexGridFilter.clear=f("OrderCreate_btnClear"),s.culture.FlexGridFilter.conditions=f("WijmoGridFilterCondition"),s.culture.FlexGridFilter.values=f("WijmoGridFilterValue"),s.culture.FlexGridFilter.search=f("LoadingDetailsView_SearchGrid"),s.culture.FlexGridFilter.selectAll=f("WijmoGridFilterSelectAll"),s.culture.FlexGridFilter.and=f("WijmoGridFilterAnd"),s.culture.FlexGridFilter.or=f("WijmoGridFilterOr"),s.culture.FlexGridFilter.cancel=f("AccessCardInfo_Cancel"),e.stringOperators=[{name:f("WijmoGridFilterUnset"),op:null},{name:f("WijmoGridFilterEqual"),op:t.EQ},{name:f("WijmoGridFilterNotEqual"),op:t.NE},{name:f("WijmoGridFilterBeginsWith"),op:t.BW},{name:f("WijmoGridFilterEndsWith"),op:t.EW},{name:f("WijmoGridFilterContains"),op:t.CT},{name:f("WijmoGridFilterDoesNotContain"),op:t.NC}],e.numberOperators=[{name:f("WijmoGridFilterUnset"),op:null},{name:f("WijmoGridFilterEqual"),op:t.EQ},{name:f("WijmoGridFilterNotEqual"),op:t.NE},{name:f("WijmoGridFilterGreaterThan"),op:t.GT},{name:f("WijmoGridFilterLessThan"),op:t.LT},{name:f("WijmoGridFilterGreaterThanOrEqual"),op:t.GE},{name:f("WijmoGridFilterLessThanOrEqual"),op:t.LE}],e.dateOperators=[{name:f("WijmoGridFilterUnset"),op:null},{name:f("WijmoGridFilterEqual"),op:t.EQ},{name:f("WijmoGridFilterDateEarlierThan"),op:t.LT},{name:f("WijmoGridFilterDateLaterThan"),op:t.GT}],e.booleanOperators=[{name:f("WijmoGridFilterUnset"),op:null},{name:f("WijmoGridFilterEqual"),op:t.EQ},{name:f("WijmoGridFilterNotEqual"),op:t.NE}]},k=e=>{try{if(window.screen.width<1024&&e.WidthPx&&""!==e.WidthPx)return parseInt(e.WidthPx)}catch(t){console.log("Error in width:",t)}return e.WidthPercentage.includes("*")?e.WidthPercentage:parseInt(e.WidthPercentage)};return(0,C.jsx)("div",{className:"pl-1",children:(0,C.jsx)(g.A,{children:(0,C.jsx)(R.TranslationConsumer,{children:i=>(0,C.jsxs)(o.Fragment,{children:[(0,C.jsxs)("div",{className:"row pl-0",children:[(0,C.jsx)("div",{className:"col-10 col-sm-12 col-md-5 col-lg-6",children:(0,C.jsx)(c.q,{class:"ui single-input",ref:E,placeholder:i("LoadingDetailsView_SearchGrid")})}),(0,C.jsx)("div",{className:"col-10 col-sm-12 col-md-7 col-lg-6",children:(0,C.jsxs)("div",{style:{float:"right"},children:[e.columnPickerRequired?(0,C.jsxs)(p.Button,{id:"colPicker",actionType:"button",type:"primary",onClick:e=>(e=>{try{let i=I.current.hostElement;i.offsetHeight?((0,s.hidePopup)(i,!0,!0),t.focus()):((0,s.showPopup)(i,e.target,s.PopupPosition.Below,!0,!1),I.current.focus()),I.current.focus(),e.preventDefault()}catch(i){console.log("Error in Column Picker click event:",i)}})(e),children:[(0,C.jsx)("div",{style:{display:"inline-block"},children:i("WijmoGridColumnPicker")}),(0,C.jsx)("div",{style:{display:"inline-block"},children:(0,C.jsx)(p.Icon,{name:"caret-down",className:"btnIcon",size:"small"})})]}):null,e.exportRequired?(0,C.jsxs)(p.Button,{actionType:"button",type:"primary",className:"mt-3 mt-md-0",onClick:A,children:[(0,C.jsx)("div",{style:{display:"inline-block"},children:i("WijmoGridExport")}),(0,C.jsx)("div",{style:{display:"inline-block",marginLeft:"0.2rem"},children:(0,C.jsx)("span",{className:"icon-Xls",style:{fontSize:"17px",position:"absolute",top:"3px"}})})]}):null]})})]}),(0,C.jsxs)("div",{className:"tableScroll",children:[e.columnGroupingRequired?(0,C.jsx)(m.u,{className:"group-panel",grid:t,placeholder:i("WijmoGridGroupPanelPlaceholder")}):null,(0,C.jsx)(g.A,{children:(0,C.jsxs)(l.MC,{ref:D,autoGenerateColumns:!1,alternatingRowStep:0,autoRowHeights:!0,headersVisibility:"Column",itemsSource:S,selectionMode:s.asEnum("None",n.SelectionMode),initialized:F,virtualizationThreshold:[0,1e4],onUpdatedView:G,children:[(0,C.jsx)(a.M,{ref:j}),e.columns.map((t=>(0,C.jsx)(l.aK,{header:i(t.Name),binding:t.Name,width:k(t),minWidth:100,isReadOnly:!0,wordWrap:!0,align:"left",children:(0,C.jsx)(l.Gw,{cellType:"Cell",template:i=>(0,C.jsx)("span",{style:null!=e.conditionalRowStyleCheck&&e.conditionalRowStyleCheck(i.item)?{...e.conditionalRowStyles}:null,children:P(i.item[t.Name],t)})})},t.Name)))]})}),e.columnPickerRequired?(0,C.jsx)("div",{className:"column-picker-div",children:(0,C.jsx)(d.qF,{className:"column-picker",initialized:t=>(t=>{e.columnPickerRequired&&(I.current=t)})(t)})}):null]}),(0,C.jsx)("div",{className:"row",children:(0,C.jsx)(d.Ne,{ref:b,className:"ml-auto mr-auto mt-3",headerFormat:i("WijmoGridPagingTemplate"),byPage:!0,cv:S})})]})})})})};f.defaultProps={sourceData:[],columns:[],exportRequired:!0,exportFileName:"Grid.xlsx",selectionRequired:!1,columnPickerRequired:!1,columnGroupingRequired:!1,rowsPerPage:10,terminalsToShow:2,singleSelection:!1,selectedItems:[]};const x=f,S=e=>(0,C.jsx)(x,{sourceData:e.data,columns:e.columns,exportRequired:e.exportRequired,exportFileName:e.exportFileName,columnPickerRequired:e.columnPickerRequired,selectionRequired:e.selectionRequired,columnGroupingRequired:e.columnGroupingRequired,conditionalRowStyleCheck:e.conditionalRowStyleCheck,conditionalRowStyles:e.conditionalRowStyles,rowsPerPage:e.rowsPerPage,onSelectionHandle:e.onSelectionHandle,onRowClick:e.onRowClick,parentComponent:e.parentComponent,terminalsToShow:e.terminalsToShow,singleSelection:e.singleSelection,selectedItems:e.selectedItems})},97185:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>b});var o=i(65043),s=i(65187),n=i(43503),l=i(97508),a=i(69062),r=i(40854),c=i.n(r),d=i(72067),u=i(40252),h=i(9256),m=i(72711),p=i(67907),R=i(78374),g=i(35861),y=i(70579);function C(e){let{role:t,modRole:i,validationErrors:o,onFieldChange:s,onVisibilityChange:n,roleOptions:l,handleCopyRoleAccess:a,modMenuItems:r,modFunctionGroupItems:c,copyPermissionFromRole:d,onCopyPermissionChange:u,onFunctionGroupChange:h}=e;const[C]=(0,p.useTranslation)(),f=e=>(0,y.jsx)("div",{className:e.rowData.IsModified?"isModifiedCell":"",children:(0,y.jsx)(m.Checkbox,{checked:!0===e.rowData.Visible,onChange:t=>n(t,e)})}),x=e=>{let t=e.rowData.Name.split(">");return(0,y.jsx)("div",{children:t.map(((e,i)=>t.length>i+1?(0,y.jsx)("span",{style:{color:"#a0a0a0"},children:C(e)+" > "}):(0,y.jsx)("span",{children:C(e)})))})},S=e=>{try{let t=e.rowData.MenuGroup;return(0,y.jsx)("div",{children:t.map((e=>{if(null!==e){let t=e.split(">");return(0,y.jsx)("div",{children:t.map(((e,i)=>t.length>i+1?(0,y.jsx)("span",{style:{color:"#a0a0a0"},children:C(e)+" > "}):(0,y.jsx)("span",{children:C(e)})))})}}))})}catch(t){console.log("Error occured on showMenuGroup",t)}},v=(e,t,i)=>{if(e.rowData.FunctionInfoList.length>0&&Array.isArray(e.rowData.FunctionInfoList)){let o="Add"===t?e.rowData.FunctionInfoList.filter((e=>"Add"===e.FunctionName)):"Modify"===t?e.rowData.FunctionInfoList.filter((e=>"Modify"===e.FunctionName)):"Remove"===t?e.rowData.FunctionInfoList.filter((e=>"Remove"===e.FunctionName)):e.rowData.FunctionInfoList.filter((e=>"View"===e.FunctionName));if(o.length>0&&Array.isArray(o))return(0,y.jsx)("div",{className:i?o[0].IsPasswordModified?"isModifiedCell":"":o[0].FunctionProperties.IsModified?"isModifiedCell":"",children:(0,y.jsx)(m.Checkbox,{disabled:!i&&!o[0].FunctionProperties.Editable,checked:i?!0===o[0].PasswordEnabled:!0===o[0].FunctionProperties.FunctionEnabled,onChange:o=>i?h(e.rowData.FunctionGroupName,t,o,"Password"):h(e.rowData.FunctionGroupName,t,o)})})}};return(0,y.jsx)(p.TranslationConsumer,{children:e=>(0,y.jsxs)("div",{className:"detailsContainer",children:[(0,y.jsxs)("div",{className:"row",children:[(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(m.Input,{fluid:!0,value:i.RoleName,indicator:"required",disabled:""!==t.RoleName,onChange:e=>s("RoleName",e),label:e("RoleAdmin_RoleName"),error:e(o.RoleName),reserveSpace:!1})}),(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(m.Input,{fluid:!0,value:i.Description,label:e("RoleAdmin_Description"),onChange:e=>s("Description",e),error:e(o.Description),reserveSpace:!1})})]}),(0,y.jsxs)("div",{className:"row",children:[(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,y.jsx)(m.Select,{fluid:!0,placeholder:"Select",value:d,label:e("RoleAdmin_CopyAccess"),options:(0,g.r4)(l,e("Common_Select")),onChange:e=>u(e),reserveSpace:!1,search:!0,onResultsMessage:e("noResultsMessage")})}),(0,y.jsx)("div",{children:(0,y.jsx)("div",{className:"col-12 col-md-6 col-lg-4",style:{marginTop:"25px"},children:(0,y.jsx)(m.Button,{type:"primary",disabled:""===d||null===d,content:e("RoleAdminEdit_Apply"),onClick:a})})})]}),(0,y.jsxs)(m.Accordion,{children:[(0,y.jsx)(m.Accordion.Content,{className:"attributeAccordian",title:e("RoleAdmin_PageMenu"),children:(0,y.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,y.jsx)("div",{className:"col-12 detailsTable roleDatatableHeight",children:(0,y.jsxs)(R.bQ,{search:!0,searchPlaceholder:e("LoadingDetailsView_SearchGrid"),data:r,children:[(0,y.jsx)(R.bQ.Column,{initialWidth:"75%",className:"compColHeight",field:"Name",header:e("RoleAdmin_MenuElement"),renderer:x,editFieldType:"text"},"Name"),(0,y.jsx)(R.bQ.Column,{initialWidth:"25%",className:"compColHeight",field:"Visible",header:e("RoleAdmin_Visiblity"),renderer:f,editFieldType:"text"},"Visible")]})})})}),(0,y.jsx)(m.Accordion.Content,{className:"attributeAccordian",title:e("RoleAdmin_FunctionGroups"),children:(0,y.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,y.jsx)("div",{className:"col-12 detailsTable roleDatatableHeight",children:(0,y.jsxs)(R.bQ,{search:!0,searchPlaceholder:e("LoadingDetailsView_SearchGrid"),data:c,children:[(0,y.jsx)(R.bQ.Column,{initialWidth:"22%",className:"compColHeight",header:e("Menu"),renderer:S}),(0,y.jsx)(R.bQ.Column,{initialWidth:"20%",className:"compColHeight",field:"FunctionGroupName",header:e("RoleAdmin_Features"),editFieldType:"text"},"FunctionGroupName"),(0,y.jsx)(R.bQ.Column,{initialWidth:"5%",className:"compColHeight",header:e("BayGroupList_Add"),renderer:e=>v(e,"Add",!1)}),(0,y.jsx)(R.bQ.Column,{initialWidth:"7%",className:"compColHeight",header:e("AccessCardInfo_x_Pwd"),renderer:e=>v(e,"Add",!0)}),(0,y.jsx)(R.bQ.Column,{initialWidth:"5%",className:"compColHeight",header:e("RoleAdmin_Modify"),renderer:e=>v(e,"Modify",!1)}),(0,y.jsx)(R.bQ.Column,{initialWidth:"7%",className:"compColHeight",header:e("AccessCardInfo_x_Pwd"),renderer:e=>v(e,"Modify",!0)}),(0,y.jsx)(R.bQ.Column,{initialWidth:"5%",className:"compColHeight",header:e("AccessCardInfo_Delete"),renderer:e=>v(e,"Remove",!1)}),(0,y.jsx)(R.bQ.Column,{initialWidth:"7%",className:"compColHeight",header:e("AccessCardInfo_x_Pwd"),renderer:e=>v(e,"Remove",!0)}),(0,y.jsx)(R.bQ.Column,{initialWidth:"5%",className:"compColHeight",header:e("RoleAdmin_View"),renderer:e=>v(e,"View",!1)})]})})})})]})]})})}C.defaultProps={modMenuItems:[],modFunctionGroupItems:[]};var f=i(46100),x=i(53536),S=i.n(x),v=i(44192),D=i(80312),E=i(62900);class j extends o.Component{constructor(){super(...arguments),this.state={role:S().cloneDeep(f.AK),modRole:{},isReadyToRender:!1,validationErrors:a.Th(v.nR),saveEnabled:!1,roleOptions:[],menuItems:[],modMenuItems:[],functionGroupItems:[],modFunctionGroupItems:[],copyPermissionFromRole:"",isConfirmToSave:!1,allMenuItems:[],showAuthenticationLayout:!1,tempRole:{}},this.updateCopyPermissionRole=e=>{try{let t=S().cloneDeep(this.state.roleOptions).filter((t=>t.text!==e));this.setState({roleOptions:t})}catch(t){console.log("RoleDetailsComposite:Error occured on updateCopyPermissionRole",t)}},this.handleChange=(e,t)=>{try{const i=S().cloneDeep(this.state.modRole);i[e]=t,this.setState({modRole:i});const o=S().cloneDeep(this.state.validationErrors);void 0!==v.nR[e]&&(o[e]=a.jr(v.nR[e],t),this.setState({validationErrors:o}))}catch(i){console.log("RoleDetailsComposite:Error occured on handleChange",i)}},this.handleCopyPermission=e=>{this.setState({copyPermissionFromRole:e})},this.handleReset=()=>{try{const{validationErrors:e}={...this.state},t=S().cloneDeep(this.state.role),i=S().cloneDeep(this.state.menuItems),o=S().cloneDeep(this.state.functionGroupItems);Object.keys(e).forEach((function(t){e[t]=""})),this.setState({modRole:{...t},validationErrors:e,modMenuItems:i,modFunctionGroupItems:o,copyPermissionFromRole:""})}catch(e){console.log("RoleDetailsComposite:Error occured on handleReset",e)}},this.handleCopyRoleAccess=()=>{let e=S().cloneDeep(this.state.copyPermissionFromRole);""===e&&null===e||c()(d.NWc+"?roleName="+e,a.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=[],i=[];null!==t.EntityResult&&(t.EntityResult.MenuItems.length>0&&Array.isArray(t.EntityResult.MenuItems)&&(e=t.EntityResult.MenuItems.filter((e=>!0===e.IsComponent))),t.EntityResult.FunctionGroupItems.length>0&&Array.isArray(t.EntityResult.FunctionGroupItems)&&t.EntityResult.FunctionGroupItems.forEach((e=>{var t=i.find((t=>t.FunctionGroupName===e.FunctionGroupName));if(void 0===t){let t={FunctionGroupName:e.FunctionGroupName,FunctionInfoList:e.FunctionInfoList,MenuGroup:[e.MenuGroup]};i.push(t)}else t.MenuGroup.push(e.MenuGroup)}))),this.setState({allMenuItems:t.EntityResult.MenuItems,modMenuItems:e,modFunctionGroupItems:i})}}))},this.confirmToSave=()=>(0,y.jsx)(p.TranslationConsumer,{children:e=>(0,y.jsxs)(m.Modal,{open:this.state.isConfirmToSave,size:"small",children:[(0,y.jsx)(m.Modal.Content,{children:(0,y.jsx)("div",{className:"col col-lg-12",children:(0,y.jsx)("h5",{children:e("Role_ConfirmToSave")})})}),(0,y.jsxs)(m.Modal.Footer,{children:[(0,y.jsx)(m.Button,{type:"primary",content:e("AccessCardInfo_Ok"),onClick:()=>{this.setState({isConfirmToSave:!1},(()=>{this.handleSave()}))}}),(0,y.jsx)(m.Button,{type:"primary",content:e("Cancel"),onClick:()=>{this.setState({isConfirmToSave:!1})}})]})]})}),this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})},this.handleSave=()=>{try{let e=this.fillDetails();if(this.validateSave(e)){let t=S().cloneDeep(e),i=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showAuthenticationLayout:i,tempRole:t},(()=>{!1===i&&this.saveRole()}))}}catch(e){console.log("RoleDetailsComposite:Error occured on handleSave",e)}},this.saveRole=()=>{try{this.setState({saveEnabled:!1});let e=S().cloneDeep(this.state.tempRole);""===this.state.role.RoleName?this.createRole(e):this.updateRole(e)}catch(e){console.log("RoleDetailsComposite:Error occured on saveRole",e)}},this.handleSaveModal=()=>{this.setState({isConfirmToSave:!0})},this.handleVisibilityChange=(e,t)=>{try{let i=S().cloneDeep(this.state.modMenuItems),o=S().cloneDeep(this.state.menuItems),s=S().cloneDeep(this.state.role),n=i.filter((e=>e.MenuCode===t.rowData.MenuCode));if(n.length>0&&(n[0].Visible=e,""!==s.RoleName)){let e=o.filter((e=>e.MenuCode===t.rowData.MenuCode));n[0].Visible!==e[0].Visible?n[0].IsModified=!0:n[0].IsModified=!1}this.setState({modMenuItems:i})}catch(i){console.log("RoleDetailsComposite:Error occured on handleVisibilityChange",i)}},this.handleFunctionGroupChange=(e,t,i,o)=>{try{let s=S().cloneDeep(this.state.modFunctionGroupItems),n=S().cloneDeep(this.state.functionGroupItems),l=S().cloneDeep(this.state.role),a=s.filter((t=>t.FunctionGroupName===e));if(a.length>0){let r=a[0].FunctionInfoList.filter((e=>e.FunctionName===t));if(r.length>0){if("Password"===o){if(r[0].PasswordEnabled=i,""!==l.RoleName){let i=n.filter((t=>t.FunctionGroupName===e))[0].FunctionInfoList.filter((e=>e.FunctionName===t));r[0].PasswordEnabled!==i[0].PasswordEnabled?r[0].IsPasswordModified=!0:r[0].IsPasswordModified=!1}}else if(r[0].FunctionProperties.FunctionEnabled=i,""!==l.RoleName){let i=n.filter((t=>t.FunctionGroupName===e))[0].FunctionInfoList.filter((e=>e.FunctionName===t));r[0].FunctionProperties.FunctionEnabled!==i[0].FunctionProperties.FunctionEnabled?r[0].FunctionProperties.IsModified=!0:r[0].FunctionProperties.IsModified=!1}this.setState({modFunctionGroupItems:s})}}}catch(s){console.log("RoleDetailsComposite:Error occured on handleFunctionGroupChange",s)}}}componentDidMount(){try{a.pJ(this.props.userDetails.EntityResult.IsArchived),this.getSecurityRoles(),this.getRole(this.props.selectedRow)}catch(e){console.log("RoleDetailsComposite:Error occured on componentDidMount",e)}}componentWillReceiveProps(e){try{if(""!==this.state.role.RoleName&&void 0===e.selectedRow.RoleAdmin_RoleName&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo){this.getRole(e.selectedRow),this.getSecurityRoles();let t={...this.state.validationErrors};Object.keys(t).forEach((e=>{t[e]=""})),this.setState({validationErrors:t,copyPermissionFromRole:""})}}catch(t){console.log("RoleDetailsComposite:Error occured on componentWillReceiveProps",t)}}getRole(e){try{if(void 0===e.RoleAdmin_RoleName)return void c()(d.NWc+"?roleName=",a.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=[],i=[];null!==t.EntityResult&&(t.EntityResult.MenuItems.length>0&&Array.isArray(t.EntityResult.MenuItems)&&(e=t.EntityResult.MenuItems.filter((e=>!0===e.IsComponent))),t.EntityResult.FunctionGroupItems.length>0&&Array.isArray(t.EntityResult.FunctionGroupItems)&&t.EntityResult.FunctionGroupItems.forEach((e=>{var t=i.find((t=>t.FunctionGroupName===e.FunctionGroupName));if(void 0===t){let t={FunctionGroupName:e.FunctionGroupName,FunctionInfoList:e.FunctionInfoList,MenuGroup:[e.MenuGroup]};i.push(t)}else t.MenuGroup.push(e.MenuGroup)}))),this.setState({allMenuItems:t.EntityResult.MenuItems,menuItems:e,modMenuItems:e,isReadyToRender:!0,role:S().cloneDeep(f.AK),modRole:S().cloneDeep(f.AK),functionGroupItems:i,modFunctionGroupItems:i,saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.modify,D.oh)})}else this.setState({role:S().cloneDeep(f.AK),modRole:S().cloneDeep(f.AK),isReadyToRender:!0})}));c()(d.NWc+"?roleName="+e.RoleAdmin_RoleName,a.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=[],i=[];null!==t.EntityResult&&(t.EntityResult.MenuItems.length>0&&Array.isArray(t.EntityResult.MenuItems)&&(e=t.EntityResult.MenuItems.filter((e=>!0===e.IsComponent))),t.EntityResult.FunctionGroupItems.length>0&&Array.isArray(t.EntityResult.FunctionGroupItems)&&t.EntityResult.FunctionGroupItems.forEach((e=>{var t=i.find((t=>t.FunctionGroupName===e.FunctionGroupName));if(void 0===t){let t={FunctionGroupName:e.FunctionGroupName,FunctionInfoList:e.FunctionInfoList,MenuGroup:[e.MenuGroup]};i.push(t)}else t.MenuGroup.push(e.MenuGroup)}))),this.setState({isReadyToRender:!0,role:S().cloneDeep(t.EntityResult),modRole:S().cloneDeep(t.EntityResult),allMenuItems:t.EntityResult.MenuItems,menuItems:e,modMenuItems:e,functionGroupItems:i,modFunctionGroupItems:i,saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.modify,D.oh)},(()=>{this.updateCopyPermissionRole(t.EntityResult.RoleName)}))}else this.setState({role:S().cloneDeep(f.AK),modRole:S().cloneDeep(f.AK),menuItems:[],modMenuItems:[],isReadyToRender:!0})}))}catch(t){console.log("RoleDetailsComposite:Error occured on getRole",t)}}getSecurityRoles(){c()(d.aDm,a.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=[];e=a.Zj(t.EntityResult),this.setState({roleOptions:e})}}else console.log("Error in getSecurityRoles:",t.ErrorList)})).catch((e=>{console.log("Error while getSecurityRoles:",e)}))}fillDetails(){try{let e=S().cloneDeep(this.state.modRole),t=S().cloneDeep(this.state.modMenuItems),i=S().cloneDeep(this.state.allMenuItems),o=S().cloneDeep(this.state.modFunctionGroupItems),s=[],n=[];return t.forEach((e=>{let t={MenuCode:e.MenuCode,Visible:e.Visible};s.push(t)})),i.filter((e=>!1===e.IsComponent)).forEach((e=>{let t={MenuCode:e.MenuCode,Visible:1};s.push(t)})),o.forEach((e=>{let t=e.FunctionInfoList.filter((e=>!0===e.FunctionProperties.FunctionEnabled)),i={FunctionGroupName:e.FunctionGroupName,FunctionInfoList:t};n.push(i)})),e.MenuItems=s,e.FunctionGroupItems=n,this.setState({modRole:e}),e}catch(e){console.log("RoleDetailsComposite:Error occured on fillDetailss",e)}}validateSave(e){try{const t={...this.state.validationErrors};return Object.keys(v.nR).forEach((function(i){void 0!==e[i]&&(t[i]=a.jr(v.nR[i],e[i]))})),this.setState({validationErrors:t}),Object.values(t).every((function(e){return""===e}))}catch(t){console.log("RoleDetailsComposite:Error occured on validateSave",t)}}createRole(e){let t={Entity:e},i={messageType:"critical",message:"RoleInfo_SavedStatus",messageResultDetails:[{keyFields:["RoleAdmin_RoleName"],keyValues:[e.RoleName],isSuccess:!1,errorMessage:""}]};c()(d.nez,a.tW(t,this.props.tokenDetails.tokenInfo)).then((t=>{let o=t.data;i.messageType=o.IsSuccess?"success":"critical",i.messageResultDetails[0].isSuccess=o.IsSuccess,!0===o.IsSuccess?this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.modify,D.oh),showAuthenticationLayout:!1},(()=>this.getRole({RoleAdmin_RoleName:e.RoleName}))):(i.messageResultDetails[0].errorMessage=o.ErrorList[0],this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.add,D.oh),showAuthenticationLayout:!1}),console.log("Error in createRole:",o.ErrorList)),this.props.onSaved(this.state.modRole,"add",i)})).catch((e=>{this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.add,D.oh),showAuthenticationLayout:!1}),i.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modRole,"add",i)}))}updateRole(e){let t={Entity:e},i={messageType:"critical",message:"RoleInfo_SavedStatus",messageResultDetails:[{keyFields:["RoleAdmin_RoleName"],keyValues:[e.RoleName],isSuccess:!1,errorMessage:""}]};c()(d.qrn,a.tW(t,this.props.tokenDetails.tokenInfo)).then((t=>{let o=t.data;i.messageType=o.IsSuccess?"success":"critical",i.messageResultDetails[0].isSuccess=o.IsSuccess,!0===o.IsSuccess?this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.modify,D.oh),showAuthenticationLayout:!1},(()=>this.getRole({RoleAdmin_RoleName:e.RoleName}))):(i.messageResultDetails[0].errorMessage=o.ErrorList[0],this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.add,D.oh),showAuthenticationLayout:!1}),console.log("Error in updateRole:",o.ErrorList)),this.props.onSaved(this.state.modRole,"update",i)})).catch((e=>{this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.add,D.oh),showAuthenticationLayout:!1}),i.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modRole,"update",i)}))}render(){const e=[{fieldName:"BaseProductInfo_LastUpdated",fieldValue:new Date(this.state.modRole.LastUpdatedTime).toLocaleDateString()+" "+new Date(this.state.modRole.LastUpdatedTime).toLocaleTimeString()},{fieldName:"BaseProductInfo_Created",fieldValue:new Date(this.state.modRole.CreatedTime).toLocaleDateString()+" "+new Date(this.state.modRole.CreatedTime).toLocaleTimeString()}];return this.state.isReadyToRender?(0,y.jsxs)("div",{children:[(0,y.jsx)(s.A,{children:(0,y.jsx)(n.A,{entityCode:this.state.role.RoleName,newEntityName:"RoleAdmin_NewRole",popUpContents:e})}),(0,y.jsx)(s.A,{children:(0,y.jsx)(C,{role:this.state.role,modRole:this.state.modRole,validationErrors:this.state.validationErrors,onFieldChange:this.handleChange,onVisibilityChange:this.handleVisibilityChange,roleOptions:this.state.roleOptions,handleCopyRoleAccess:this.handleCopyRoleAccess,modMenuItems:this.state.modMenuItems,modFunctionGroupItems:this.state.modFunctionGroupItems,copyPermissionFromRole:this.state.copyPermissionFromRole,onCopyPermissionChange:this.handleCopyPermission,onFunctionGroupChange:this.handleFunctionGroupChange})}),(0,y.jsx)(s.A,{children:(0,y.jsx)(h.q,{handleBack:this.props.onBack,handleSave:this.handleSaveModal,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.isConfirmToSave?this.confirmToSave():null,this.state.showAuthenticationLayout?(0,y.jsx)(E.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.role.RoleName?D.i.add:D.i.modify,functionGroup:D.oh,handleOperation:this.saveRole,handleClose:this.handleAuthenticationClose}):null]}):(0,y.jsx)(u.A,{message:"Loading"})}}const b=(0,l.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(j)},14486:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>v});var o=i(65043),s=i(97508),n=i(65187),l=i(40252),a=i(66554),r=i(19380),c=i(70579);function d(e){let{tableData:t,columnDetails:i,pageSize:o,exportRequired:s,exportFileName:n,columnPickerRequired:l,columnGroupingRequired:a,terminalsToShow:d,selectionRequired:u,onSelectionChange:h,onRowClick:m,parentComponent:p}=e;return(0,c.jsx)(r.A,{data:t,columns:i,rowsPerPage:o,exportRequired:s,exportFileName:n,columnPickerRequired:l,columnGroupingRequired:a,terminalsToShow:d,selectionRequired:u,onSelectionHandle:h,onRowClick:m,parentComponent:p})}var u=i(40854),h=i.n(u),m=i(72067),p=i(69062),R=(i(63973),i(11981)),g=i(14159),y=i(80312),C=i(97185),f=i(7523),x=(i(92342),i(62900));class S extends o.Component{constructor(){super(...arguments),this.state={data:{},isDetails:"false",isReadyToRender:!1,operationsVisibilty:{add:!1,delete:!1,shareholder:!1},selectedRow:{},selectedItems:[],showAuthenticationLayout:!1},this.componentName="RoleComponent",this.handleAdd=()=>{try{var{operationsVisibilty:e}={...this.state};e.delete=!1,e.add=!1,this.setState({isDetails:"true",selectedRow:{},operationsVisibilty:e})}catch(t){console.log("RolesComposite:Error occured on handleAdd",t)}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})},this.authenticateDelete=()=>{try{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showAuthenticationLayout:e}),!1===e&&this.handleDelete()}catch(e){console.log("RolesComposite : Error in authenticateDelete")}},this.handleDelete=()=>{try{var{operationsVisibilty:e}={...this.state};e.delete=!1,this.setState({operationsVisibilty:e});for(var t=[],i=0;i<this.state.selectedItems.length;i++){var o=this.state.selectedItems[i].RoleAdmin_RoleName;t.push(o)}let s={Entity:t};h()(m.wLb,p.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{var i=t.data,o=i.isSuccess;null!==i.ResultDataList&&void 0!==i.ResultDataList&&(o=i.ResultDataList.filter((function(e){return!e.IsSuccess})).length!==i.ResultDataList.length);var s=p.Cy(i,"RoleAdmin_DeletionStatus",["Role"]);o?(this.setState({isReadyToRender:!1,showAuthenticationLayout:!1}),this.getSecurityRoleList(),e.delete=!1,this.setState({selectedItems:[],operationsVisibilty:e,selectedRow:{}})):(e.delete=!0,this.setState({operationsVisibilty:e,showAuthenticationLayout:!1})),s.messageResultDetails.forEach((e=>{e.keyFields.length>0&&(e.keyFields[0]="RoleAdmin_RoleName")})),(0,g.toast)((0,c.jsx)(n.A,{children:(0,c.jsx)(R.A,{notificationMessage:s})}),{autoClose:"success"===s.messageType&&1e4})})).catch((e=>{console.log("RolesComposite:Error occured on handleDelete",e);var{operationsVisibilty:t}={...this.state};t.delete=!0,this.setState({operationsVisibilty:t,showAuthenticationLayout:!1})}))}catch(s){console.log("RolesComposite:Error occured on handleDelete",s)}},this.handleBack=()=>{try{var{operationsVisibilty:e}={...this.state};e.add=p.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.add,y.oh),e.delete=!1,this.setState({isDetails:"false",selectedRow:{},selectedItems:[],operationsVisibilty:e,isReadyToRender:!1}),this.getSecurityRoleList()}catch(t){console.log("RolesComposite:Error occured on Back click",t)}},this.handleRowClick=e=>{try{var{operationsVisibilty:t}={...this.state};t.add=p.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.add,y.oh),t.delete=p.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.remove,y.oh),this.setState({isDetails:"true",selectedRow:e,selectedItems:[e],operationsVisibilty:t})}catch(i){console.log("RolesComposite:Error occured on handleRowClick",i)}},this.handleSelection=e=>{try{var{operationsVisibilty:t}={...this.state};let i=e.findIndex((e=>e.RoleAdmin_RoleName.toUpperCase()===f.jv))>=0,o=e.findIndex((e=>!0===e.LookUpData_ReadOnly))>=0;t.delete=e.length>0&&!i&&!o,p.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.remove,y.oh),this.setState({selectedItems:e,operationsVisibilty:t})}catch(i){console.log("RolesComposite:Error occured on handleSelection",i)}},this.savedEvent=(e,t,i)=>{try{var{operationsVisibilty:o}={...this.state};if("success"===i.messageType&&(o.add=p.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.add,y.oh),o.delete=p.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.remove,y.oh),this.setState({operationsVisibilty:o})),"success"===i.messageType&&"add"===t){var s=[{RoleAdmin_RoleName:e.RoleName}];this.setState({selectedItems:s})}(0,g.toast)((0,c.jsx)(n.A,{children:(0,c.jsx)(R.A,{notificationMessage:i})}),{autoClose:"success"===i.messageType&&1e4})}catch(l){console.log("RolesComposite:Error occured on savedEvent",l)}},this.componentWillUnmount=()=>{this.clearStorage(),window.removeEventListener("beforeunload",this.clearStorage)},this.clearStorage=()=>{sessionStorage.removeItem(this.componentName+"GridState")}}componentDidMount(){try{p.pJ(this.props.userDetails.EntityResult.IsArchived);var{operationsVisibilty:e}={...this.state};e.add=p.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.add,y.oh),this.setState({operationsVisibilty:e}),this.getSecurityRoleList()}catch(t){console.log("RolesComposite:Error occured on ComponentDidMount",t)}}getSecurityRoleList(){h()(m.qd,p.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({data:t.EntityResult,isReadyToRender:!0}):(this.setState({data:[],isReadyToRender:!0}),console.log("Error in getSecurityRoleList:",t.ErrorList))})).catch((e=>{this.setState({data:[],isReadyToRender:!0}),console.log("Error while getSecurityRoleList:",e)}))}render(){return(0,c.jsxs)("div",{children:[(0,c.jsx)(n.A,{children:(0,c.jsx)(a.$,{operationsVisibilty:this.state.operationsVisibilty,breadcrumbItem:this.props.activeItem,onDelete:this.authenticateDelete,onAdd:this.handleAdd,handleBreadCrumbClick:this.props.handleBreadCrumbClick,shrVisible:!1})}),"true"===this.state.isDetails?(0,c.jsx)(n.A,{children:(0,c.jsx)(C.default,{selectedRow:this.state.selectedRow,onBack:this.handleBack,onSaved:this.savedEvent})}):this.state.isReadyToRender?(0,c.jsx)("div",{children:(0,c.jsx)(n.A,{children:(0,c.jsx)(d,{tableData:this.state.data.Table,columnDetails:this.state.data.Column,pageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,exportRequired:!0,exportFileName:"RoleList",columnPickerRequired:!0,selectionRequired:!0,columnGroupingRequired:!0,onRowClick:this.handleRowClick,onSelectionChange:this.handleSelection,parentComponent:this.componentName})})}):(0,c.jsx)(l.A,{message:"Loading"}),this.state.showAuthenticationLayout?(0,c.jsx)(x.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:y.i.remove,functionGroup:y.oh,handleClose:this.handleAuthenticationClose,handleOperation:this.handleDelete}):null,(0,c.jsx)(n.A,{children:(0,c.jsx)(g.ToastContainer,{hideProgressBar:!0,closeOnClick:!1,closeButton:!0,newestOnTop:!0,position:"bottom-right",toastClassName:"toast-notification-wrap"})})]})}}const v=(0,s.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(S)},43503:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});i(65043);var o=i(67907),s=i(72711),n=i(70579);function l(e){let{entityCode:t,newEntityName:i,popUpContents:l}=e;return(0,n.jsx)(o.TranslationConsumer,{children:e=>(0,n.jsx)("div",{className:"headerContainer",children:(0,n.jsxs)("div",{className:"row headerSpacing",children:[(0,n.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,n.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(i):t})}),""!==t&&void 0!==t&&l.length>0?(0,n.jsx)("div",{className:"headerItemRight",children:(0,n.jsx)(s.Popup,{element:(0,n.jsxs)("div",{children:[e(l[0].fieldName)+" ",":"," "+l[0].fieldValue,(0,n.jsx)(s.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,n.jsx)(s.List,{className:"detailsHeaderPopUp",children:l.map((t=>(0,n.jsxs)(s.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}l.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const a=l},9256:(e,t,i)=>{"use strict";i.d(t,{q:()=>l});i(65043);var o=i(72711),s=i(67907),n=i(70579);function l(e){let{handleBack:t,handleSave:i,handleReset:l,saveEnabled:a}=e;return(0,n.jsx)(s.TranslationConsumer,{children:e=>(0,n.jsxs)("div",{className:"row userActionPosition",children:[(0,n.jsx)("div",{className:"col-12 col-md-3 col-lg-4",children:(0,n.jsx)(o.Button,{className:"backButton",onClick:t,content:e("Back")})}),(0,n.jsx)("div",{className:"col-12 col-md-9 col-lg-8",children:(0,n.jsxs)("div",{style:{float:"right"},children:[(0,n.jsx)(o.Button,{content:e("LookUpData_btnReset"),className:"cancelButton",onClick:l}),(0,n.jsx)(o.Button,{content:e("Save"),disabled:!a,onClick:i})]})})]})})}l.defaultProps={saveEnabled:!1}},80312:(e,t,i)=>{"use strict";i.d(t,{$3:()=>H,$H:()=>oe,$J:()=>me,$K:()=>Re,$V:()=>It,$b:()=>xt,$p:()=>q,AE:()=>E,Al:()=>W,B2:()=>ot,By:()=>Et,CW:()=>Rt,DA:()=>r,Ee:()=>_e,FO:()=>F,Fy:()=>ke,G9:()=>it,H8:()=>ee,Hq:()=>at,Ig:()=>M,Iu:()=>y,JI:()=>ct,JJ:()=>te,JU:()=>Q,Jz:()=>Qe,KQ:()=>le,Kk:()=>Ye,Kw:()=>et,LP:()=>Nt,LR:()=>d,Lg:()=>$,Mg:()=>xe,Mm:()=>k,N1:()=>Z,Nm:()=>p,No:()=>ce,Ow:()=>O,P2:()=>n,P8:()=>Ce,PD:()=>Ae,PE:()=>u,PG:()=>K,PP:()=>mt,Pb:()=>Ge,QB:()=>S,QC:()=>Y,RE:()=>nt,RO:()=>$e,Rc:()=>yt,Rl:()=>St,Rx:()=>gt,TI:()=>C,Tm:()=>pe,Ug:()=>X,Ur:()=>Ue,V9:()=>c,VK:()=>U,VL:()=>he,VQ:()=>ae,WD:()=>Le,Wf:()=>I,YO:()=>P,YY:()=>Fe,Yb:()=>ge,Yg:()=>He,Z9:()=>ht,ZE:()=>dt,ZU:()=>x,_N:()=>Ct,_S:()=>wt,_d:()=>Ft,aS:()=>_,aZ:()=>ut,au:()=>De,b0:()=>bt,bL:()=>We,c2:()=>Ve,d4:()=>Me,dB:()=>g,dD:()=>qe,dK:()=>B,dY:()=>A,de:()=>h,dv:()=>we,eQ:()=>a,f3:()=>Se,fF:()=>L,fL:()=>ft,fN:()=>Dt,fk:()=>w,fl:()=>ye,fr:()=>v,go:()=>s,h:()=>ue,hD:()=>b,hE:()=>N,hh:()=>Xe,hk:()=>ne,hz:()=>pt,i:()=>o,j2:()=>lt,jN:()=>z,je:()=>R,jx:()=>V,kL:()=>Ze,ke:()=>Oe,km:()=>re,l0:()=>se,l6:()=>Be,lz:()=>G,m0:()=>f,nS:()=>je,nk:()=>rt,nn:()=>D,np:()=>J,oh:()=>st,op:()=>Ke,pt:()=>Te,qk:()=>de,qp:()=>fe,r6:()=>be,rQ:()=>Ie,rj:()=>T,rp:()=>l,t3:()=>vt,tM:()=>Pe,to:()=>Pt,ts:()=>tt,uH:()=>ve,uy:()=>Je,w1:()=>Ne,x5:()=>ie,xz:()=>j,y_:()=>ze,yu:()=>m,yx:()=>jt,z8:()=>Ee,z_:()=>At});const o={view:"view",add:"add",modify:"modify",remove:"remove"},s="carriercompany",n="driver",l="customer",a="trailer",r="originterminal",c="destination",d="primemover",u="vehicle",h="shipmentbycompartment",m="shipmentbyproduct",p="ViewShipmentStatus",R="vessel",g="order",y="OrderForceClose",C="contract",f="receiptplanbycompartment",x="ViewMarineShipment",S="MarineShipmentByCompartment",v="ViewMarineReceipt",D="supplier",E="finishedproduct",j="RailDispatch",b="RailReceipt",I="RailRoute",w="RailWagon",N="CloseRailDispatch",F="PrintRailBOL",A="PrintRailFAN",P="RailDispatchLoadSpotAssignment",G="RailDispatchProductAssignment",M="ViewRailDispatch",k="ViewRailLoadingDetails",L="CloseRailReceipt",T="PrintRailBOD",V="PrintRailRAN",W="ViewRailReceipt",q="ViewRailUnLoadingDetails",_="SMS",O="UnAccountedTransactionTank",U="UnAccountedTransactionMeter",B="PipelineDispatch",H="PipelineReceipt",z="PipelineDispatchManualEntry",Q="PipelineReceiptManualEntry",K="LookUpData",J="HSEInspection",$="HSEInspectionConfig",Z="Email",Y="Shareholder",X="LocationConfig",ee="DeviceConfig",te="baseproduct",ie="SiteView",oe="LeakageManualEntry",se="Terminal",ne="SlotInformation",le="TankGroup",ae="Tank",re="SealMaster",ce="TankEODEntry",de="UnmatchedLocalTransactions",ue="AccessCard",he="ResetPin",me="SlotConfiguration",pe="PrintMarineFAN",Re="PrintMarineBOL",ge="ViewMarineLoadingDetails",ye="ViewMarineShipmentAuditTrail",Ce="CloseMarineShipment",fe="IssueCard",xe="ActivateCard",Se="RevokeCard",ve="AutoIDAssociation",De="MarineReceiptByCompartment",Ee="PrintMarineRAN",je="PrintMarineBOD",be="ViewMarineUnloadingDetails",Ie="ViewMarineReceiptAuditTrail",we="CloseMarineReceipt",Ne="WeekendConfig",Fe="EODAdmin",Ae="PrintBOL",Pe="PrintFAN",Ge="PrintBOD",Me="CloseShipment",ke="CloseReceipt",Le="CONTRACTFORCECLOSE",Te="Captain",Ve="OverrideShipmentSequence",We="KPIInformation",qe="Language",_e="WebPortalUserMap",Oe="BayGroup",Ue="PipelineHeaderSiteView",Be="TankMonitor",He="PersonAdmin",ze="ProductReconciliationReports",Qe="ReportConfiguration",Ke="EXECONFIGURATION",Je="ShareholderAllocation",$e="NotificationGroup",Ze="NotificationRestriction",Ye="NotificationConfig",Xe="AllowWeighBridgeManualEntry",et="ProductAllocation",tt="MasterDeviceConfiguration",it="ShareholderAgreement",ot="TANKSHAREHOLDERPRIMEFUNCTION",st="ROLEADMIN",nt="ShiftConfig",lt="PrinterConfiguration",at="CustomerAgreement",rt="BaySCADAConfiguration",ct="RailReceiptUnloadSpotAssignment",dt="STAFF_VISITOR",ut="PipelineMeterSiteView",ht="RailSiteView",mt="MarineSiteView",pt="LoadingDetails",Rt="UnloadingDetails",gt="RoadHSEInspection",yt="RoadHSEInspectionConfig",Ct="MarineHSEInspection",ft="MarineHSEInspectionConfig",xt="RailHSEInspection",St="RailHSEInspectionConfig",vt="PipelineHSEInspection",Dt="PipelineHSEInspectionConfig",Et="PrintRAN",jt="ViewReceiptStatus",bt="customerrecipe",It="COAParameter",wt="COATemplate",Nt="COAManagement",Ft="COACustomer",At="COAAssignment",Pt="ProductForecastConfiguration"},35861:(e,t,i)=>{"use strict";i.d(t,{F1:()=>a,i7:()=>r,r4:()=>l});var o=i(86178),s=i.n(o),n=(i(15660),i(65043),i(70579));function l(e,t){if(Array.isArray(e)){0===e.filter((e=>e.text===t)).length&&e.unshift({value:null,text:t})}return e}function a(){let e=window.navigator.userLanguage||window.navigator.language;return s().locale(e),s().localeData().longDateFormat("L")}function r(e){return(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{children:e}),(0,n.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]})}},50477:()=>{}}]);
//# sourceMappingURL=188.1be61e2b.chunk.js.map