"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[429],{40510:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(65043),o=s(80297),i=s(65187),n=s(67907),r=s(70579);function l(e){let{KPIList:t,pageName:s,rowHeight:l,widgetHeight:d,isDraggable:c,isResizable:u,kpiDisplayTopBreakpoint:h}=e;const[p,m]=(0,a.useState)(1),k=a.useRef(null),g=()=>{let e=window.pageYOffset,t=p;if(k.current&&k.current.getBoundingClientRect().top<h)t=0;else{if(0!==e)return;t=1}m(t)};return(0,a.useEffect)((()=>{"undefined"!==typeof window&&window.addEventListener("scroll",g)})),(0,a.useEffect)((()=>()=>{window.removeEventListener("scroll",g)}),[]),(0,r.jsx)("div",{ref:k,children:1===p?(0,r.jsx)(n.TranslationConsumer,{children:e=>(0,r.jsx)("div",{style:{marginTop:"6px"},children:(0,r.jsx)(i.A,{children:(0,r.jsx)(o.A,{kpiList:t,isDraggable:c,isResizable:u,rowHeight:l,widgetHeight:d,pageName:s})})})}):""})}l.defaultProps={kpiDisplayTopBreakpoint:100}},10429:(e,t,s)=>{s.r(t),s.d(t,{default:()=>I});var a=s(65043),o=s(69062),i=s(40854),n=s.n(i),r=s(72067),l=s(72711),d=s(67907),c=s(70579);function u(e){let{tankGroup:t,modTankGroup:s,validationErrors:a,onFieldChange:i,onActiveStatusChange:n,listOptions:r,isEnterpriseNode:u,handleSelectTankCode:h,onTerminalChange:p}=e;return(0,c.jsx)(d.TranslationConsumer,{children:e=>(0,c.jsx)("div",{className:"detailsContainer",children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,c.jsx)(l.Input,{fluid:!0,value:s.Code,indicator:"required",disabled:""!==t.Code,onChange:e=>i("Code",e),label:e("TankGroupInfo_Code"),error:e(a.Code),reserveSpace:!1})}),(0,c.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,c.jsx)(l.Input,{fluid:!0,value:s.Name,onChange:e=>i("Name",e),label:e("TankGroupInfo_Name"),error:e(a.Name),reserveSpace:!1})}),(0,c.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,c.jsx)(l.Input,{fluid:!0,value:s.Description,label:e("TankInfo_Description"),onChange:e=>i("Description",e),error:e(a.Description),reserveSpace:!1})}),u?(0,c.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,c.jsx)(l.Select,{fluid:!0,placeholder:e("Common_Select"),label:e("TerminalCodes"),value:s.TerminalCode,options:r.terminalCode,onChange:e=>{p(e)},indicator:"required",error:e(a.TerminalCode),reserveSpace:!1,disabled:""!==t.Code,search:!0,noResultsMessage:e("noResultsMessage")})}):"",(0,c.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,c.jsx)(l.Select,{fluid:!0,placeholder:e("Common_Select"),label:e("TankGroupInfo_BaseProduct"),value:s.BaseProductCode,options:r.baseProduct,onChange:e=>{i("BaseProductCode",e)},indicator:"required",error:e(a.BaseProductCode),reserveSpace:!1,search:!0,disabled:s.TankCollection.length>0||s.MeterCollection.length>0,noResultsMessage:e("noResultsMessage")})}),(0,c.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,c.jsx)(l.Select,{fluid:!0,placeholder:e("Common_Select"),label:e("BaseProductList_Status"),value:s.Active,options:[{text:e("ViewShipment_Ok"),value:!0},{text:e("ViewShipmentStatus_Inactive"),value:!1}],onChange:e=>n(e),error:e(a.Active),reserveSpace:!1,search:!0,disabled:!0,noResultsMessage:e("noResultsMessage")})}),(0,c.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,c.jsx)(l.Input,{fluid:!0,value:s.Remarks,onChange:e=>i("Remarks",e),label:e("BaseProductList_Remarks"),error:e(a.Remarks),indicator:s.Active!==t.Active?"required":"",reserveSpace:!1})}),""!==t.Code?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"col-12 col-md-6 col-lg-4",children:[(0,c.jsx)("div",{children:e("TankGroupInfo_AssociatedTank")}),(0,c.jsx)("div",{className:"associatedTank-wrap",children:s.TankCollection.map((t=>(0,c.jsx)("div",{className:"associatedTank-wrap-list",children:(0,c.jsxs)("label",{children:[(0,c.jsx)("span",{children:t}),t===s.ActiveTankCode?(0,c.jsx)(l.Badge,{className:"badge-TankGroup",color:"green",children:e("TankGroupInfo_Active")}):(0,c.jsx)("a",{href:"#/",onClick:()=>h(t),className:"tankGroupAnchorTag",children:e("TankGroupInfo_TankActivate")})]})})))})]}),(0,c.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,c.jsx)(l.Select,{fluid:!0,placeholder:e("Common_Select"),label:e("TankGroupInfo_AssociatedMeter"),value:s.MeterCollection,options:o.Zj(s.MeterCollection),reserveSpace:!1,disabled:!0,search:!0,noResultsMessage:e("noResultsMessage"),multiple:!0})})]}):""]})})})}u.defaultProps={listOptions:{baseProduct:[],terminalCode:[]},isEnterpriseNode:!1};var h=s(9256),p=s(97508),m=s(46100),k=s(44192),g=(s(38726),s(65187)),C=s(43503),v=s(93779),T=s(40252),y=s(53536),E=s.n(y),f=s(80312),S=s(14159),G=s(11981),D=s(40510),R=s(39424),j=s(62900);class x extends a.Component{constructor(){super(...arguments),this.state={tankGroup:E().cloneDeep(m.$r),modTankGroup:{},validationErrors:o.Th(k.aH),isReadyToRender:!1,saveEnabled:!1,baseProductOptions:[],terminalOptions:[],tankGroupKPIList:[],showAuthenticationLayout:!1},this.handleChange=(e,t)=>{try{const s=E().cloneDeep(this.state.modTankGroup);s[e]=t,this.setState({modTankGroup:s});const a=E().cloneDeep(this.state.validationErrors);void 0!==k.aH[e]&&(a[e]=o.jr(k.aH[e],t),this.setState({validationErrors:a}))}catch(s){console.log("TankGroupDetailsComposite:Error occured on handleChange",s)}},this.handleTerminalChange=e=>{try{const t=E().cloneDeep(this.state.modTankGroup),s={...this.state.validationErrors};t.TerminalCode=e,s.TerminalCode="",this.setState({modTankGroup:t,validationErrors:s}),this.getBaseProducts(e)}catch(t){console.log("TankGroupDetailsComposite:Error occured on handleTerminalChange",t)}},this.handleActiveStatusChange=e=>{try{let t=E().cloneDeep(this.state.modTankGroup);t.Active=e,t.Active!==this.state.tankGroup.Active&&(t.Remarks=""),this.setState({modTankGroup:t})}catch(t){console.log(t)}},this.handleSelectTankCode=e=>{try{let a=E().cloneDeep(this.state.modTankGroup),i={messageType:"critical",message:"TankGroupInfo_TankActivateSuccess",messageResultDetails:[{keyFields:["TankGroupInfo_Code"],keyValues:[a.Code],isSuccess:!1,errorMessage:""}]};var t=[{key:v.JQ,value:a.Code},{key:v.E7,value:e},{key:v.uw,value:""!==a.TerminalCode?a.TerminalCode:null}],s={keyDataCode:v.JQ,KeyCodes:t};n()(r.yCM,o.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;i.messageType=t.IsSuccess?"success":"critical",i.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?this.getTankGroup({Common_Code:a.Code,TerminalCode:a.TerminalCode}):i.messageResultDetails[0].errorMessage=t.ErrorList[0],(0,S.toast)((0,c.jsx)(g.A,{children:(0,c.jsx)(G.A,{notificationMessage:i})}),{autoClose:"success"===i.messageType&&1e4})}))}catch(a){console.log(a)}},this.handleSave=()=>{try{let e=E().cloneDeep(this.state.modTankGroup);if(this.validateSave(e)){let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showAuthenticationLayout:e},(()=>{!1===e&&this.saveTankGroup()}))}}catch(e){console.log("TankGroupDetailsComposite:Error occured on handleSave",e)}},this.saveTankGroup=()=>{this.setState({saveEnabled:!1});let e=E().cloneDeep(this.state.modTankGroup);""===this.state.tankGroup.Code?this.createTankGroup(e):this.updateTankGroup(e)},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})},this.handleReset=()=>{try{const{validationErrors:e}={...this.state},t=E().cloneDeep(this.state.tankGroup);Object.keys(e).forEach((function(t){e[t]=""})),this.setState({modTankGroup:{...t},selectedCompRow:[],validationErrors:e})}catch(e){console.log("TankGroupDetailsComposite:Error occured on handleReset",e)}}}componentDidMount(){try{o.pJ(this.props.userDetails.EntityResult.IsArchived),this.getTankGroup(this.props.selectedRow),this.props.userDetails.EntityResult.IsEnterpriseNode?this.getTerminal():this.getBaseProducts("")}catch(e){console.log("TankGroupDetailsComposite:Error occured on componentDidMount",e)}}componentWillReceiveProps(e){try{if(""!==this.state.tankGroup.Code&&void 0===e.selectedRow.Common_Code&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo){this.getTankGroup(e.selectedRow);let t={...this.state.validationErrors};Object.keys(t).forEach((e=>{t[e]=""})),this.setState({validationErrors:t})}}catch(t){console.log("TankGroupDetailsComposite:Error occured on componentWillReceiveProps",t)}}getTankGroup(e){if(void 0!==e.Common_Code){var t=[{key:v.JQ,value:e.Common_Code},{key:v.uw,value:""!==e.TerminalCode?e.TerminalCode:null}],s={keyDataCode:v.JQ,KeyCodes:t};n()(r.gWP,o.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({isReadyToRender:!0,tankGroup:E().cloneDeep(t.EntityResult),modTankGroup:E().cloneDeep(t.EntityResult),saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,f.i.modify,f.KQ)},(()=>{this.getKPIList(t.EntityResult.Code),this.props.userDetails.EntityResult.IsEnterpriseNode&&this.getBaseProducts(t.EntityResult.TerminalCode)})):(this.setState({tankGroup:E().cloneDeep(m.$r),modTankGroup:E().cloneDeep(m.$r),isReadyToRender:!0}),console.log("Error in getTankGroup:",t.ErrorList))})).catch((t=>{console.log("Error while getting TankGroup:",t,e)}))}else this.setState({tankGroup:E().cloneDeep(m.$r),modTankGroup:E().cloneDeep(m.$r),isReadyToRender:!0,tankGroupKPIList:[],saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,f.i.add,f.KQ)})}getBaseProducts(e){n()(r.Odh+"?TerminalCode="+e,o.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=o.Zj(t.EntityResult);this.setState({baseProductOptions:e})}}else console.log("Error in getBaseProducts:",t.ErrorList)})).catch((e=>{console.log("Error while getting BaseProducts:",e)}))}getTerminal(){n()(r.Oqv,o.tW(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=o.Zj(t.EntityResult);this.setState({terminalOptions:e})}}else console.log("Error in getTerminal:",t.ErrorList)})).catch((e=>{console.log("Error while getting Terminal:",e)}))}validateSave(e){const t={...this.state.validationErrors};return Object.keys(k.aH).forEach((function(s){void 0!==e[s]&&(t[s]=o.jr(k.aH[s],e[s]))})),this.props.userDetails.EntityResult.IsEnterpriseNode&&(null===e.TerminalCode||""===e.TerminalCode?t.TerminalCode="TankGroupInfo_TerminalRequired":t.TerminalCode=""),this.setState({validationErrors:t}),Object.values(t).every((function(e){return""===e}))}createTankGroup(e){let t=[{key:v.JQ,value:e.Code}],s={keyDataCode:v.JQ,KeyCodes:t,Entity:e},a={messageType:"critical",message:"TankGroupInfo_SavedStatus",messageResultDetails:[{keyFields:["TankGroupInfo_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:""}]};n()(r.Ss9,o.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{let s=t.data;a.messageType=s.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,f.i.modify,f.KQ),showAuthenticationLayout:!1},(()=>this.getTankGroup({Common_Code:e.Code,TerminalCode:e.TerminalCode}))):(a.messageResultDetails[0].errorMessage=s.ErrorList[0],this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,f.i.add,f.KQ),showAuthenticationLayout:!1}),console.log("Error in createTankGroup:",s.ErrorList)),this.props.onSaved(this.state.modTankGroup,"add",a)})).catch((e=>{this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,f.i.add,f.KQ),showAuthenticationLayout:!1}),a.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modTankGroup,"add",a)}))}updateTankGroup(e){let t=[{key:v.JQ,value:e.Code}],s={keyDataCode:v.JQ,KeyCodes:t,Entity:e},a={messageType:"critical",message:"TankGroupInfo_SavedStatus",messageResultDetails:[{keyFields:["TankGroupInfo_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:""}]};n()(r.b2q,o.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{let s=t.data;a.messageType=s.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,f.i.modify,f.KQ),showAuthenticationLayout:!1},(()=>this.getTankGroup({Common_Code:e.Code,TerminalCode:e.TerminalCode}))):(a.messageResultDetails[0].errorMessage=s.ErrorList[0],this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,f.i.modify,f.KQ),showAuthenticationLayout:!1}),console.log("Error in updateTankGroup:",s.ErrorList)),this.props.onSaved(this.state.modTankGroup,"update",a)})).catch((e=>{this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,f.i.modify,f.KQ),showAuthenticationLayout:!1}),a.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modTankGroup,"modify",a)}))}getKPIList(e){if(!0===o.ab(this.props.userDetails.EntityResult.FunctionsList,f.i.view,f.bL)){let t={PageName:R.Ph,InputParameters:[{key:"TankGroupCode",value:e}]};n()(r.dxq,o.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({tankGroupKPIList:t.EntityResult.ListKPIDetails}):(this.setState({tankGroupKPIList:[]}),console.log("Error in tank group KPIList:",t.ErrorList))})).catch((e=>{console.log("Error while getting tank group KPIList:",e)}))}}render(){const e={baseProduct:this.state.baseProductOptions,terminalCode:this.state.terminalOptions},t=[{fieldName:"BaseProductInfo_LastUpdated",fieldValue:new Date(this.state.modTankGroup.LastUpdatedTime).toLocaleDateString()+" "+new Date(this.state.modTankGroup.LastUpdatedTime).toLocaleTimeString()},{fieldName:"BaseProductInfo_Created",fieldValue:new Date(this.state.modTankGroup.CreatedTime).toLocaleDateString()+" "+new Date(this.state.modTankGroup.CreatedTime).toLocaleTimeString()}];return this.state.isReadyToRender?(0,c.jsxs)("div",{children:[(0,c.jsx)(g.A,{children:(0,c.jsx)(C.A,{entityCode:this.state.tankGroup.Code,newEntityName:"TankGroupInfo_NewTankGroup",popUpContents:t})}),(0,c.jsx)(D.A,{KPIList:this.state.tankGroupKPIList,children:" "}),(0,c.jsx)(g.A,{children:(0,c.jsx)(u,{tankGroup:this.state.tankGroup,modTankGroup:this.state.modTankGroup,validationErrors:this.state.validationErrors,onFieldChange:this.handleChange,listOptions:e,onActiveStatusChange:this.handleActiveStatusChange,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,handleSelectTankCode:this.handleSelectTankCode,onTerminalChange:this.handleTerminalChange})}),(0,c.jsx)(g.A,{children:(0,c.jsx)(h.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.showAuthenticationLayout?(0,c.jsx)(j.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.tankGroup.Code?f.i.add:f.i.modify,functionGroup:f.KQ,handleOperation:this.saveTankGroup,handleClose:this.handleAuthenticationClose}):null]}):(0,c.jsx)(T.A,{message:"Loading"})}}const I=(0,p.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(x)},43503:(e,t,s)=>{s.d(t,{A:()=>r});s(65043);var a=s(67907),o=s(72711),i=s(70579);function n(e){let{entityCode:t,newEntityName:s,popUpContents:n}=e;return(0,i.jsx)(a.TranslationConsumer,{children:e=>(0,i.jsx)("div",{className:"headerContainer",children:(0,i.jsxs)("div",{className:"row headerSpacing",children:[(0,i.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,i.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(s):t})}),""!==t&&void 0!==t&&n.length>0?(0,i.jsx)("div",{className:"headerItemRight",children:(0,i.jsx)(o.Popup,{element:(0,i.jsxs)("div",{children:[e(n[0].fieldName)+" ",":"," "+n[0].fieldValue,(0,i.jsx)(o.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,i.jsx)(o.List,{className:"detailsHeaderPopUp",children:n.map((t=>(0,i.jsxs)(o.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}n.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const r=n},9256:(e,t,s)=>{s.d(t,{q:()=>n});s(65043);var a=s(72711),o=s(67907),i=s(70579);function n(e){let{handleBack:t,handleSave:s,handleReset:n,saveEnabled:r}=e;return(0,i.jsx)(o.TranslationConsumer,{children:e=>(0,i.jsxs)("div",{className:"row userActionPosition",children:[(0,i.jsx)("div",{className:"col-12 col-md-3 col-lg-4",children:(0,i.jsx)(a.Button,{className:"backButton",onClick:t,content:e("Back")})}),(0,i.jsx)("div",{className:"col-12 col-md-9 col-lg-8",children:(0,i.jsxs)("div",{style:{float:"right"},children:[(0,i.jsx)(a.Button,{content:e("LookUpData_btnReset"),className:"cancelButton",onClick:n}),(0,i.jsx)(a.Button,{content:e("Save"),disabled:!r,onClick:s})]})})]})})}n.defaultProps={saveEnabled:!1}}}]);
//# sourceMappingURL=429.9382ced7.chunk.js.map