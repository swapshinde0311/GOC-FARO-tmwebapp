"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[2459],{2459:(e,t,i)=>{i.r(t),i.d(t,{default:()=>L});var o=i(65043),s=i(69062),n=i(40854),r=i.n(n),a=i(72067),l=i(72711),c=i(67907),d=i(78374),h=i(70579);function p(e){let{listOptions:t,onTabChange:i,activeTab:o,handleAddBackUpConfigComp:n,handleDeleteBackUpConfigComp:r,selectedBackupPrinters:a,handleBackUpPrinterSelectionChange:p,onRowClick:g,onFieldChange:C,handleCellDataEdit:m,modReportPrinterConfig:u,validationErrors:f,selectedReports:P,handleReportsSelectionChange:R,modLocationPrinterConfig:v,modBackUpPrinterConfig:S,tab1_LocationCode:y}=e;const[k]=(0,c.useTranslation)(),b=e=>(0,h.jsx)(l.Select,{className:"selectDropwdown",placeholder:k("Common_Select"),value:S[e.rowIndex][e.field],fluid:!0,options:s.Zj(t.allPrinterOptions),onChange:t=>m(t,e),indicator:"required",reserveSpace:!1,search:!0,noResultsMessage:k("noResultsMessage")});return(0,h.jsx)("div",{className:"detailsContainer",children:(0,h.jsxs)(l.Tab,{activeIndex:o,onTabChange:e=>{i(e)},children:[(0,h.jsxs)(l.Tab.Pane,{title:k("PrinterConfig_ReportPrinterConfiguration"),children:[(0,h.jsxs)("div",{className:"row marginRightZero tableScroll",children:[(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(l.Select,{fluid:!0,placeholder:k("Common_Select"),label:k("LocationCode"),value:u.locationCode,options:s.Zj(t.locationOptions),onChange:e=>{C("report_locationCode",e)},indicator:"required",error:k(f.LocationCode),reserveSpace:!1,search:!0,noResultsMessage:k("noResultsMessage")})}),(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,h.jsx)(l.Select,{fluid:!0,placeholder:k("Common_Select"),label:k("PrinterConfig_PrinterName"),value:u.printerName,options:s.Zj(t.printerOptions),onChange:e=>{C("report_printerName",e)},indicator:"required",error:k(f.PrinterName),reserveSpace:!1,search:!0,noResultsMessage:k("noResultsMessage")})})]}),(0,h.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,h.jsx)("div",{className:"",children:(0,h.jsx)(d.bQ,{data:t.allAvailableReports,scrollable:!0,scrollHeight:"320px",selectionMode:"multiple",selection:P,onSelectionChange:R,children:(0,h.jsx)(d.bQ.Column,{className:"compColHeight colminWidth",field:"ReportName",header:k("PrinterList_ReportName")},"ReportName")})})})]}),(0,h.jsx)(l.Tab.Pane,{title:k("PrinterConfig_LocationPrinterConfiguration"),children:(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-12 col-md-6 col-lg-7",children:(0,h.jsxs)(d.bQ,{data:v,onCellClick:e=>void 0!==g?g(e):{},children:[(0,h.jsx)(d.bQ.Column,{className:"compColHeight",field:"Location",header:k("LocationCode"),editable:!1},"Location"),(0,h.jsx)(d.bQ.Column,{className:"compColHeight",field:"Printer",header:k("PrinterConfig_Printers"),editable:!1},"Printer")]})}),(0,h.jsxs)("div",{className:"col-12 col-md-6 col-lg-4",children:[(0,h.jsx)("div",{style:{marginBottom:"1rem"},children:(0,h.jsx)(l.Input,{fluid:!0,value:y,label:k("LocationCode"),indicator:"required",error:k(f.Location),reserveSpace:!1,disabled:!0})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{class:"ui input-label",children:(0,h.jsx)("span",{className:"input-label-message",children:k("PrinterConfig_Printers")})}),t.allPrinterOptions.map((e=>(0,h.jsx)("div",{children:(0,h.jsx)(l.Checkbox,{label:e,checked:t.printerOptions.some((t=>t===e)),disabled:!1,onChange:t=>C("locationPrinter",t,e)})})))]})]})]})}),(0,h.jsxs)(l.Tab.Pane,{title:k("PrinterConfig_BackupConfigHeader"),children:[(0,h.jsx)("div",{className:"row compartmentRow",children:(0,h.jsx)("div",{className:"col col-md-4 col-lg-3 col-xl-12",children:(0,h.jsxs)("div",{className:"compartmentIconContainer",children:[(0,h.jsxs)("div",{onClick:n,className:"compartmentIcon",children:[(0,h.jsx)("div",{children:(0,h.jsx)(l.Icon,{root:"common",name:"badge-plus",size:"medium"})}),(0,h.jsx)("div",{className:"margin_l10",children:(0,h.jsx)("h5",{className:"font14",children:k("TrailerInfo_Add")})})]}),(0,h.jsxs)("div",{onClick:r,className:"compartmentIcon margin_l30",children:[(0,h.jsx)("div",{children:(0,h.jsx)(l.Icon,{root:"common",name:"delete",size:"medium"})}),(0,h.jsx)("div",{className:"margin_l10",children:(0,h.jsx)("h5",{className:"font14",children:k("TrailerInfo_Delete")})})]})]})})}),(0,h.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,h.jsxs)(d.bQ,{data:S,scrollable:!0,scrollHeight:"320px",selectionMode:"multiple",selection:a,onSelectionChange:p,children:[(0,h.jsx)(d.bQ.Column,{className:"compColHeight colminWidth",field:"PrimaryPrinter",header:k("PrinterConfig_PrinterName"),editable:!0,editFieldType:"text",customEditRenderer:b},"PrimaryPrinter"),(0,h.jsx)(d.bQ.Column,{className:"compColHeight colminWidth",field:"BackupPrinter",header:k("PrinterConfig_BackupPrinter"),editable:!0,editFieldType:"text",customEditRenderer:b},"BackupPrinter")]})})]})]})})}var g=i(9256),C=i(97508),m=(i(38726),i(65187)),u=i(43503),f=i(93779),P=i(40252),R=i(53536),v=i.n(R),S=i(80312),y=i(44192),k=i(62900);class b extends o.Component{constructor(){super(...arguments),this.state={locationOptions:[],modlocationOptions:[],printerOptions:[],allPrinterOptions:[],allAvailableReports:[],locationPrinterConfig:[],backUpPrinterConfig:[],modLocationPrinterConfig:[],modBackUpPrinterConfig:[],isReadyToRender:!1,activeTab:0,reportPrinterConfig:{locationCode:null,printerName:null,selectedReports:[]},modReportPrinterConfig:{locationCode:null,printerName:null,selectedReports:[]},modLocationCode:null,modPrinterName:null,saveEnabled:!1,validationErrors:s.Th(y.dJ),selectedReports:[],selectedBackupPrinters:[],tab1_LocationCode:null,showAuthenticationLayout:!1},this.handleReportsSelectionChange=e=>{try{let t=v().cloneDeep(this.state.modReportPrinterConfig);t.selectedReports=e,this.setState({modReportPrinterConfig:t})}catch(t){console.log("PrinterConfigurationDetailsComposite:Error occured on handleReportsSelectionChange",t)}},this.handleBackUpPrinterSelectionChange=e=>{try{this.setState({selectedBackupPrinters:e})}catch(t){console.log("PrinterConfigurationDetailsComposite:Error occured on handleBackUpPrinterSelectionChange",t)}},this.UpdateReportPrinterConfig=()=>{this.handleAuthenticationClose();let e=v().cloneDeep(this.state.modReportPrinterConfig.selectedReports),t=[];Array.isArray(e)&&e.forEach((e=>{t.push(e.ReportName)}));let i=this.state.modReportPrinterConfig.locationCode,o=this.state.modReportPrinterConfig.printerName;var n=[{key:f.$A,value:i},{key:f.Yl,value:o}],l={ShareHolderCode:"",keyDataCode:f.$A,KeyCodes:n,Entity:t};let c={messageType:"critical",message:"ReportPrinterConfig_SavedStatus",messageResultDetails:[{keyFields:["PrinterConfig_LocationCode"],keyValues:[i],isSuccess:!1,errorMessage:""}]};r()(a.gHU,s.tW(l,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(c.messageType=t.IsSuccess?"success":"critical",c.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess){let e=v().cloneDeep(this.state.reportPrinterConfig);e.locationCode=i,e.printerName=o,this.setState({reportPrinterConfig:e,modReportPrinterConfig:e,saveEnabled:s.ab(this.props.userDetails.EntityResult.FunctionsList,S.i.add,S.j2)},(()=>{this.GetPrintersForLocation(i,o)}))}else this.setState({isReadyToRender:!0}),c.messageResultDetails[0].errorMessage=t.ResultDataList[0].ErrorList[0];this.props.onSaved(this.state.modReportPrinterConfig,"add",c)})).catch((e=>{console.log("Error while UpdateReportPrinterConfig:",e)}))},this.handleUpdateReportPrinterConfig=()=>{try{this.setState({saveEnabled:!1}),this.UpdateReportPrinterConfig()}catch(e){console.log("Save Scada Config Composite : Error in saveScadaConfig")}},this.handleUpdateLocationPrinterConfig=()=>{try{this.setState({saveEnabled:!1}),this.UpdateLocationPrinterConfig()}catch(e){console.log("Save Scada Config Composite : Error in saveScadaConfig")}},this.handleUpdateBackupPrinterConfig=()=>{try{this.setState({saveEnabled:!1}),this.UpdateBackUpPrinterConfig()}catch(e){console.log("Save Scada Config Composite : Error in saveScadaConfig")}},this.handleSave=()=>{try{if(0===this.state.activeTab)if(this.validateSave()){let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showAuthenticationLayout:e},(()=>{!1===e&&this.handleUpdateReportPrinterConfig()}))}else this.setState({saveEnabled:!0});else if(1===this.state.activeTab)if(this.validateSave()){let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showAuthenticationLayout:e},(()=>{!1===e&&this.handleUpdateLocationPrinterConfig()}))}else this.setState({saveEnabled:!0});else if(2===this.state.activeTab)if(this.validateSave()){let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showAuthenticationLayout:e},(()=>{!1===e&&this.handleUpdateBackupPrinterConfig()}))}else this.setState({saveEnabled:!0})}catch(e){console.log("PrinterConfigurationDetailsComposite:Error occured on handleSave",e)}},this.handleReset=()=>{try{if(0==this.state.activeTab){let e=v().cloneDeep(this.state.reportPrinterConfig);this.setState({modReportPrinterConfig:e,validationErrors:s.Th(y.dJ)})}else 1==this.state.activeTab?(this.setState({validationErrors:s.Th(y.dJ)}),null!==this.state.tab1_LocationCode&&void 0!==this.state.tab1_LocationCode&&""!==this.state.tab1_LocationCode&&this.GetPrintersForLocation(this.state.tab1_LocationCode,null)):this.setState({modBackUpPrinterConfig:this.state.backUpPrinterConfig,selectedBackupPrinters:[]})}catch(e){console.log("PrinterConfigurationDetailsComposite : Error in handleReset")}},this.handleTabChange=e=>{try{0!==e?this.setState({activeTab:e,validationErrors:s.Th(y.dJ),reportPrinterConfig:{locationCode:null,printerName:null,selectedReports:[]},modReportPrinterConfig:{locationCode:null,printerName:null,selectedReports:[]},printerOptions:[],tab1_LocationCode:null},(()=>{this.GetLocationPrinterConfig(),this.GetAllPrinters()})):this.setState({activeTab:e,validationErrors:s.Th(y.dJ)})}catch(t){console.log("PrinterConfigurationDetailsComposite: Error occurred on handleTabChange",t)}},this.handleChange=(e,t,i)=>{try{if("report_locationCode"===e){let e={...this.state.validationErrors},i=v().cloneDeep(this.state.modReportPrinterConfig);i.locationCode=t,i.printerName=null,e.LocationCode=s.jr(y.dJ.LocationCode,i.locationCode),this.setState({validationErrors:e,modReportPrinterConfig:i},(()=>{this.GetPrintersForLocation(t,null)}))}else if("report_printerName"===e){let e={...this.state.validationErrors},i=v().cloneDeep(this.state.modReportPrinterConfig);i.printerName=t,e.PrinterName=s.jr(y.dJ.PrinterName,i.printerName),this.setState({validationErrors:e,modReportPrinterConfig:i},(()=>{this.GetAssociatedReports(i.locationCode,t)}))}else if("locationPrinter"===e){let e=v().cloneDeep(this.state.printerOptions);t?e.push(i):e=e.filter((e=>e!==i)),this.setState({printerOptions:e})}}catch(o){console.log("PrinterConfigurationDetailsComposite: Error occurred on handleTabChange",o)}},this.handleRowClick=e=>{try{this.setState({tab1_LocationCode:e.rowData.Location},(()=>{this.GetPrintersForLocation(this.state.tab1_LocationCode,null)}))}catch(t){console.log("PrinterConfigurationDetailsComposite:Error occured on Row click",t)}},this.handleAddBackUpConfigComp=()=>{try{let e={PrimaryPrinter:null,BackupPrinter:null},t=v().cloneDeep(this.state.modBackUpPrinterConfig);e.SeqNumber=s.Mz(t),t.push(e),this.setState({modBackUpPrinterConfig:t})}catch(e){console.log("PrinterConfigurationDetailsComposite : Error in handleAddBackupConfigComp")}},this.handleCellDataEdit=(e,t)=>{try{let i=v().cloneDeep(this.state.modBackUpPrinterConfig);i[t.rowIndex][t.field]=e,this.setState({modBackUpPrinterConfig:i})}catch(i){console.log("PrinterConfigurationDetailsComposite:Error occured on handleCellDataEdit",i)}},this.handleBackUpPrinterSelectionChange=e=>{this.setState({selectedBackupPrinters:e})},this.handleDeleteBackUpConfigComp=()=>{try{if(null!=this.state.selectedBackupPrinters&&this.state.selectedBackupPrinters.length>0&&this.state.modBackUpPrinterConfig.length>0){let e=v().cloneDeep(this.state.modBackUpPrinterConfig);this.state.selectedBackupPrinters.forEach(((t,i)=>{e=e.filter(((e,i)=>e.SeqNumber!==t.SeqNumber))})),this.setState({modBackUpPrinterConfig:e,selectedBackupPrinters:[]})}}catch(e){console.log("PrinterConfigurationDetailsComposite : Error in handleDeleteBackUpConfigComp")}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})},this.handleOperation=()=>0===this.state.activeTab?this.handleUpdateReportPrinterConfig:1===this.state.activeTab?this.handleUpdateLocationPrinterConfig:2===this.state.activeTab?this.handleUpdateBackupPrinterConfig:void 0}componentDidMount(){try{s.pJ(this.props.userDetails.EntityResult.IsArchived),this.setState({saveEnabled:s.ab(this.props.userDetails.EntityResult.FunctionsList,S.i.add,S.j2)}),this.GetAllLocationsForPrinterConfig(),this.GetAllAvailableReports()}catch(e){console.log("PrinterConfigurationDetailsComposite:Error occured on componentDidMount",e)}}componentWillReceiveProps(e){try{if(0==this.state.activeTab){if(null!==this.state.reportPrinterConfig.locationCode&&void 0===e.selectedRow.LocationCode&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo){let e={locationCode:null,printerName:null,selectedReports:[]};this.setState({reportPrinterConfig:e,modReportPrinterConfig:e,printerOptions:[],tab1_LocationCode:null,activeTab:0},(()=>{this.GetAllLocationsForPrinterConfig()}))}}else if(void 0===e.selectedRow.LocationCode&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo){let e={locationCode:null,printerName:null,selectedReports:[]};this.setState({reportPrinterConfig:e,modReportPrinterConfig:e,printerOptions:[],tab1_LocationCode:null,activeTab:0},(()=>{this.GetAllLocationsForPrinterConfig()}))}}catch(t){console.log("PrinterConfigurationDetailsComposite:Error occured on componentWillReceiveProps",t)}}GetAllLocationsForPrinterConfig(){try{r()(a.PjR,s.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess)if(void 0!==this.props.selectedRow.LocationCode&&null!==this.props.selectedRow.LocationCode&&""!==this.props.selectedRow.LocationCode){let e=v().cloneDeep(this.state.reportPrinterConfig);e.locationCode=this.props.selectedRow.LocationCode,this.setState({locationOptions:t.EntityResult,modlocationOptions:t.EntityResult,isReadyToRender:!0,reportPrinterConfig:e,modReportPrinterConfig:e},(()=>{this.GetLocationPrinterConfig(),this.GetPrintersForLocation(this.props.selectedRow.LocationCode,this.props.selectedRow.PrinterName)}))}else this.setState({locationOptions:t.EntityResult,modlocationOptions:t.EntityResult,isReadyToRender:!0},(()=>{this.GetLocationPrinterConfig()}));else this.setState({locationOptions:[],modlocationOptions:[],isReadyToRender:!0}),console.log("Error in getLocations List:",t.ErrorList)})).catch((e=>{this.setState({locationOptions:[],modlocationOptions:[],isReadyToRender:!0}),console.log("Error while getting locations List:",e)}))}catch(e){console.log("PrinterConfigurationDetailsComposite : Error while getting Locations List:",e)}}GetAllPrinters(){try{r()(a.vCe,s.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({allPrinterOptions:t.EntityResult,isReadyToRender:!0}):(this.setState({allPrinterOptions:[],isReadyToRender:!0}),console.log("Error in getallPrinter List:",t.ErrorList))})).catch((e=>{this.setState({allPrinterOptions:[],isReadyToRender:!0}),console.log("Error while getting all Printers List:",e)}))}catch(e){console.log("PrinterConfigurationDetailsComposite : Error while getting all Printer List:",e)}}GetAllAvailableReports(){try{r()(a.KSX,s.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=[];Array.isArray(t.EntityResult)&&t.EntityResult.forEach((t=>{e.push({ReportName:t})})),this.setState({allAvailableReports:e,isReadyToRender:!0})}else this.setState({allAvailableReports:[],isReadyToRender:!0}),console.log("Error in getallAvailableReports List:",t.ErrorList)})).catch((e=>{this.setState({allAvailableReports:[],isReadyToRender:!0}),console.log("Error while getting all reports List:",e)}))}catch(e){console.log("PrinterConfigurationDetailsComposite : Error while getting all reports List:",e)}}GetAssociatedReports(e,t){try{let i=v().cloneDeep(this.state.modReportPrinterConfig);r()(a._UE+"?locationCode="+e+"&printerName="+t,s.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=[];Array.isArray(t.EntityResult)&&t.EntityResult.forEach((t=>{e.push({ReportName:t})})),i.selectedReports=e;let o=v().cloneDeep(this.state.reportPrinterConfig);null!==o.locationCode&&void 0!==o.locationCode&&""!==o.locationCode?this.setState({reportPrinterConfig:i,modReportPrinterConfig:i,isReadyToRender:!0}):this.setState({modReportPrinterConfig:i,isReadyToRender:!0})}else i.selectedReports=[],this.setState({modReportPrinterConfig:i,isReadyToRender:!0}),console.log("Error in getAssociatedReports for location and printer Name:",t.ErrorList)})).catch((e=>{i.selectedReports=[],this.setState({modReportPrinterConfig:i,isReadyToRender:!0}),console.log("Error while getting associated reports for location List:",e)}))}catch(i){console.log("PrinterConfigurationDetailsComposite : Error while getting Printers for location List:",i)}}GetPrintersForLocation(e,t){try{r()(a.qJE+"?locationCode="+e,s.Jm(this.props.tokenDetails.tokenInfo)).then((i=>{var o=i.data;if(!0===o.IsSuccess)if(null!==t&&void 0!==t&&""!==t){let i=v().cloneDeep(this.state.reportPrinterConfig);i.printerName=t,this.setState({printerOptions:o.EntityResult,isReadyToRender:!0,reportPrinterConfig:i,modReportPrinterConfig:i},(()=>{this.GetAssociatedReports(e,t)}))}else this.setState({printerOptions:o.EntityResult,isReadyToRender:!0});else this.setState({printerOptions:[],isReadyToRender:!0}),console.log("Error in getPrinters for location List:",o.ErrorList)})).catch((e=>{this.setState({printerOptions:[],isReadyToRender:!0}),console.log("Error while getting Printers for location List:",e)}))}catch(i){console.log("PrinterConfigurationDetailsComposite : Error while getting Printers for location List:",i)}}GetLocationPrinterConfig(){try{r()(a.k2,s.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=t.EntityResult.LocationPrinterConfigList,i=t.EntityResult.BackupPrinterInfoList,o=v().cloneDeep(this.state.locationOptions);o=o.filter((t=>{let i=e.findIndex((e=>e.Location===t));return-1!==i&&""!==e[i].Printer})),i=s.Q3(i),this.setState({locationPrinterConfig:e,backUpPrinterConfig:i,modLocationPrinterConfig:e,modBackUpPrinterConfig:i,isReadyToRender:!0,modlocationOptions:o})}else this.setState({locationPrinterConfig:[],backUpPrinterConfig:[],modLocationPrinterConfig:[],modBackUpPrinterConfig:[],isReadyToRender:!0}),console.log("Error in getLocationPrinterConfig List:",t.ErrorList)})).catch((e=>{this.setState({locationPrinterConfig:[],backUpPrinterConfig:[],modLocationPrinterConfig:[],modBackUpPrinterConfig:[],isReadyToRender:!0}),console.log("Error while getting LocationPrinterConfig List:",e)}))}catch(e){console.log("PrinterConfigurationDetailsComposite : Error while getting Printer List:",e)}}UpdateLocationPrinterConfig(){this.handleAuthenticationClose();let e=v().cloneDeep(this.state.printerOptions),t=this.state.tab1_LocationCode;var i=[{key:f.$A,value:t}],o={ShareHolderCode:"",keyDataCode:f.$A,KeyCodes:i,Entity:e};let n={messageType:"critical",message:"LocationPrinterConfig_SavedStatus",messageResultDetails:[{keyFields:["PrinterConfig_LocationCode"],keyValues:[t],isSuccess:!1,errorMessage:""}]};r()(a.VXq,s.tW(o,this.props.tokenDetails.tokenInfo)).then((e=>{var i=e.data;n.messageType=i.IsSuccess?"success":"critical",n.messageResultDetails[0].isSuccess=i.IsSuccess,!0===i.IsSuccess?this.setState({tab1_LocationCode:t,saveEnabled:s.ab(this.props.userDetails.EntityResult.FunctionsList,S.i.add,S.j2)},(()=>{this.GetLocationPrinterConfig(),this.GetPrintersForLocation(t,null)})):(this.setState({isReadyToRender:!0,saveEnabled:s.ab(this.props.userDetails.EntityResult.FunctionsList,S.i.add,S.j2)}),n.messageResultDetails[0].errorMessage=i.ErrorList[0]),this.props.onSaved("","",n)})).catch((e=>{console.log("Error while UpdateLocationPrinterConfig:",e),this.setState({isReadyToRender:!0,saveEnabled:s.ab(this.props.userDetails.EntityResult.FunctionsList,S.i.add,S.j2)})}))}UpdateBackUpPrinterConfig(){this.handleAuthenticationClose();let e=v().cloneDeep(this.state.modBackUpPrinterConfig);var t={ShareHolderCode:"",keyDataCode:f.$A,KeyCodes:[],Entity:e};let i={messageType:"critical",message:"BackUPPrinterConfig_SavedStatus",messageResultDetails:[{keyFields:[],keyValues:[],isSuccess:!1,errorMessage:""}]};r()(a.EV0,s.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;i.messageType=t.IsSuccess?"success":"critical",i.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?this.setState({saveEnabled:s.ab(this.props.userDetails.EntityResult.FunctionsList,S.i.add,S.j2)},(()=>{this.GetLocationPrinterConfig()})):(this.setState({isReadyToRender:!0,saveEnabled:s.ab(this.props.userDetails.EntityResult.FunctionsList,S.i.add,S.j2)}),i.messageResultDetails[0].errorMessage=t.ErrorList[0]),this.props.onSaved("","",i)})).catch((e=>{console.log("Error while UpdateBackUpPrinterConfig:",e),this.setState({isReadyToRender:!0,saveEnabled:s.ab(this.props.userDetails.EntityResult.FunctionsList,S.i.add,S.j2)})}))}validateSave(){var e=!0;if(0===this.state.activeTab){let t={...this.state.validationErrors};t.LocationCode=s.jr(y.dJ.LocationCode,this.state.modReportPrinterConfig.locationCode),t.PrinterName=s.jr(y.dJ.PrinterName,this.state.modReportPrinterConfig.printerName),this.setState({validationErrors:t}),e&&(e=Object.values(t).every((function(e){return""===e})))}if(1===this.state.activeTab){let t={...this.state.validationErrors};t.Location=s.jr(y.dJ.Location,this.state.tab1_LocationCode),t.LocationCode="",t.PrinterName="",this.setState({validationErrors:t}),e&&(e=Object.values(t).every((function(e){return""===e})))}if(2==this.state.activeTab){v().cloneDeep(this.state.backUpPrinterConfig);let t=v().cloneDeep(this.state.modBackUpPrinterConfig),i=[...new Set(t.map((e=>e.PrimaryPrinter)))],o={messageType:"critical",message:"ShipmentCompDetail_SavedStatus",messageResultDetails:[]};i.length!==t.length&&(o.messageResultDetails.push({keyFields:[],keyValues:[],isSuccess:!1,errorMessage:"PrinterConfig_CannotConfigureMultipleBackup"}),e=!1),e&&t.forEach((t=>{""===t.PrimaryPrinter||void 0===t.PrimaryPrinter||null===t.PrimaryPrinter?(o.messageResultDetails.push({keyFields:[],keyValues:[],isSuccess:!1,errorMessage:"PrinterConfig_PrinterNameRequired"}),e=!1):""!==t.BackupPrinter&&void 0!==t.BackupPrinter&&null!==t.BackupPrinter||(o.messageResultDetails.push({keyFields:[],keyValues:[],isSuccess:!1,errorMessage:"PrinterConfig_BackupPrinterNameRequired"}),e=!1)})),e||""===o.messageResultDetails[0].errorMessage||this.props.onSaved("","",o)}return e}render(){const e={locationOptions:this.state.modlocationOptions,printerOptions:this.state.printerOptions,allPrinterOptions:this.state.allPrinterOptions,allAvailableReports:this.state.allAvailableReports};return this.state.isReadyToRender?(0,h.jsxs)("div",{children:[(0,h.jsx)(c.TranslationConsumer,{children:e=>(0,h.jsx)(m.A,{children:(0,h.jsx)(u.A,{entityCode:e("PrinterConfig_Title"),newEntityName:"PrinterConfig_Title"})})}),(0,h.jsx)(m.A,{children:(0,h.jsx)(p,{listOptions:e,onTabChange:this.handleTabChange,activeTab:this.state.activeTab,modReportPrinterConfig:this.state.modReportPrinterConfig,onFieldChange:this.handleChange,validationErrors:this.state.validationErrors,selectedReports:this.state.modReportPrinterConfig.selectedReports,handleReportsSelectionChange:this.handleReportsSelectionChange,selectedBackupPrinters:this.state.selectedBackupPrinters,handleBackUpPrinterSelectionChange:this.handleBackUpPrinterSelectionChange,modLocationPrinterConfig:this.state.modLocationPrinterConfig,modBackUpPrinterConfig:this.state.modBackUpPrinterConfig,onRowClick:this.handleRowClick,tab1_LocationCode:this.state.tab1_LocationCode,handleAddBackUpConfigComp:this.handleAddBackUpConfigComp,handleDeleteBackUpConfigComp:this.handleDeleteBackUpConfigComp,handleCellDataEdit:this.handleCellDataEdit})}),(0,h.jsx)(m.A,{children:(0,h.jsx)(g.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.showAuthenticationLayout?(0,h.jsx)(k.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:S.i.modify,functionGroup:S.j2,handleOperation:this.handleOperation(),handleClose:this.handleAuthenticationClose}):null]}):(0,h.jsx)(P.A,{message:"Loading"})}}const L=(0,C.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(b)},43503:(e,t,i)=>{i.d(t,{A:()=>a});i(65043);var o=i(67907),s=i(72711),n=i(70579);function r(e){let{entityCode:t,newEntityName:i,popUpContents:r}=e;return(0,n.jsx)(o.TranslationConsumer,{children:e=>(0,n.jsx)("div",{className:"headerContainer",children:(0,n.jsxs)("div",{className:"row headerSpacing",children:[(0,n.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,n.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(i):t})}),""!==t&&void 0!==t&&r.length>0?(0,n.jsx)("div",{className:"headerItemRight",children:(0,n.jsx)(s.Popup,{element:(0,n.jsxs)("div",{children:[e(r[0].fieldName)+" ",":"," "+r[0].fieldValue,(0,n.jsx)(s.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,n.jsx)(s.List,{className:"detailsHeaderPopUp",children:r.map((t=>(0,n.jsxs)(s.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}r.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const a=r},9256:(e,t,i)=>{i.d(t,{q:()=>r});i(65043);var o=i(72711),s=i(67907),n=i(70579);function r(e){let{handleBack:t,handleSave:i,handleReset:r,saveEnabled:a}=e;return(0,n.jsx)(s.TranslationConsumer,{children:e=>(0,n.jsxs)("div",{className:"row userActionPosition",children:[(0,n.jsx)("div",{className:"col-12 col-md-3 col-lg-4",children:(0,n.jsx)(o.Button,{className:"backButton",onClick:t,content:e("Back")})}),(0,n.jsx)("div",{className:"col-12 col-md-9 col-lg-8",children:(0,n.jsxs)("div",{style:{float:"right"},children:[(0,n.jsx)(o.Button,{content:e("LookUpData_btnReset"),className:"cancelButton",onClick:r}),(0,n.jsx)(o.Button,{content:e("Save"),disabled:!a,onClick:i})]})})]})})}r.defaultProps={saveEnabled:!1}}}]);
//# sourceMappingURL=2459.0dca1145.chunk.js.map