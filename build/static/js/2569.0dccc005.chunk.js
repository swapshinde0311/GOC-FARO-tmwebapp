"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[2569],{92569:(e,t,n)=>{n.d(t,{R:()=>a});var o=n(6890),r=n(47766),i=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(e){function t(t){return e.call(this,t,r.ReportViewer,{objectProps:["requestHeaders","parameters"]})||this}return i(t,e),t}(o.x);!function(e){function t(t){return e.call(this,t,r.PdfViewer,{objectProps:["requestHeaders"]})||this}i(t,e)}(o.x)},47766:(e,t,n)=>{n.r(t),n.d(t,{CatalogItemType:()=>S,MouseMode:()=>E,PageLoadedEventArgs:()=>h,PdfViewer:()=>Et,QueryLoadingDataEventArgs:()=>D,ReportViewer:()=>Lt,RequestEventArgs:()=>O,ViewMode:()=>M,ViewerBase:()=>Tt,ZoomMode:()=>I,_ActionKind:()=>T,_ActionQueue:()=>p,_ArActionKind:()=>Ve,_ArDocumentFormat:()=>gt,_ArErrorCode:()=>mt,_ArLoadState:()=>_t,_ArPage:()=>qe,_ArParameterState:()=>je,_ArParameterType:()=>Ae,_ArReportService:()=>Nt,_ArReportSource:()=>zt,_CompositePageView:()=>Xe,_CompositedPromise:()=>N,_ContinuousPageView:()=>Ke,_DocumentService:()=>Re,_DocumentSource:()=>He,_ExecutionStatus:()=>R,_ExportOptionEditor:()=>Me,_HamburgerMenu:()=>Ot,_HistoryManager:()=>De,_LinkClickedEventArgs:()=>x,_Magnifier:()=>xt,_MouseTool:()=>St,_MultiSelectEx:()=>u,_Page:()=>Ue,_PageSetupDialog:()=>Pt,_PageSetupEditor:()=>bt,_PageViewBase:()=>Ze,_PanEvent:()=>be,_PanEventArgs:()=>we,_PanTrigger:()=>Pe,_PaperKind:()=>j,_ParameterType:()=>P,_ParametersEditor:()=>ae,_PdfDocumentService:()=>Le,_PdfDocumentSource:()=>ze,_PinchEvent:()=>ve,_PinchEventArgs:()=>fe,_PinchTrigger:()=>ye,_Promise:()=>F,_Report:()=>Ne,_ReportHamburgerMenu:()=>Ft,_ReportService:()=>Oe,_ReportServiceBase:()=>ke,_ReportSourceBase:()=>Fe,_RotateAngle:()=>A,_Rubberband:()=>Ct,_RubberbandOnAppliedEventArgs:()=>C,_Scroller:()=>w,_SearchBar:()=>Dt,_SearchManager:()=>We,_SearchOptionsMenu:()=>kt,_SideTabs:()=>yt,_SinglePageView:()=>Je,_SpeedReducer:()=>y,_SwipeEvent:()=>Ce,_SwipeEventArgs:()=>Se,_SwipeTrigger:()=>xe,_TabPage:()=>wt,_Toolbar:()=>ft,_TouchDirection:()=>d,_TouchEvent:()=>_e,_TouchEventArgs:()=>ge,_TouchEventType:()=>ie,_TouchInfo:()=>v,_TouchManager:()=>Te,_TouchTrigger:()=>me,_Unit:()=>H,_UnitType:()=>k,_VScroller:()=>Ee,_ViewMenu:()=>Ht,_ViewerActionType:()=>V,_ViewerMenuBase:()=>Rt,_ViewerMiniToolbar:()=>Mt,_ViewerMobileToolbar:()=>jt,_ViewerMobileToolbarBase:()=>Vt,_ViewerToolbar:()=>It,_ViewerToolbarBase:()=>vt,_ViewerZoomBar:()=>At,_abstractMethodExceptionText:()=>L,_addEvent:()=>K,_addWjHandler:()=>X,_appendQueryString:()=>ce,_checkImageButton:()=>rt,_checkSeparatorShown:()=>it,_commandTagAttr:()=>tt,_createSvgBtn:()=>ot,_disableCache:()=>U,_disableImageButton:()=>at,_enumToArray:()=>b,_getErrorMessage:()=>Y,_getPositionByHitTestInfo:()=>st,_getRotatedSize:()=>ne,_getTouchEventMap:()=>f,_getTransformedPosition:()=>te,_hiddenCss:()=>B,_httpRequest:()=>Ie,_isCheckedImageButton:()=>ht,_isDisabledImageButton:()=>lt,_isEqual:()=>re,_joinStringUrl:()=>he,_joinUrl:()=>le,_pageSettingsJsonReviver:()=>ue,_parseExecutionInfo:()=>Be,_parseReportExecutionInfo:()=>de,_pixelToTwip:()=>$,_pointMove:()=>W,_prepareStringUrl:()=>pe,_removeAllWjHandlers:()=>G,_removeChildren:()=>q,_removeEvent:()=>J,_setLandscape:()=>ut,_showImageButton:()=>ct,_statusJsonReviver:()=>se,_strEndsWith:()=>oe,_toDOM:()=>pt,_toDOMs:()=>Z,_transformSvg:()=>ee,_twipToPixel:()=>Q,icons:()=>l,isIOS:()=>nt,parametersIcon:()=>c});var o=n(728),r=n(38074),i=n(62672),a=n(47766),s=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(){function e(e){this._selectedAll=!1,this._innerCheckedItemsChanged=!1,this.checkedItemsChanged=new o.Event;var t=this,n=new r.MultiSelect(e);t._multiSelect=n,n.checkedItemsChanged.addHandler(t.onCheckedItemsChanged,t),n.isDroppedDownChanged.addHandler(t.onIsDroppedDownChanged,t),n.headerFormatter=function(){return t._updateHeader()},t._lostFocus=t._multiSelect.lostFocus}return e.prototype._updateHeader=function(){var e=this.checkedItems||[],t=[],n=this.displayMemberPath;if(!e.length)return o.culture.Viewer.parameterNoneItemsSelected;if(this._selectedAll)return o.culture.Viewer.parameterAllItemsSelected;if(n){for(var r=0;r<e.length;r++)t[r]=e[r][n];return t.join(", ")}return e.join(", ")},e.prototype.onIsDroppedDownChanged=function(){this._multiSelect.isDroppedDown&&this._updateSelectedAll()},e.prototype.onCheckedItemsChanged=function(e,t){this._innerCheckedItemsChanged||(this._selectAllItem?(this._updateSelectedAll(),this.checkedItemsChanged.raise(this,t)):this.checkedItemsChanged.raise(this,t))},Object.defineProperty(e.prototype,"isEditable",{get:function(){return this._multiSelect.isEditable},set:function(e){this._multiSelect.isEditable=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisabled",{get:function(){return this._multiSelect.isDisabled},set:function(e){this._multiSelect.isDisabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayMemberPath",{get:function(){return this._multiSelect.displayMemberPath},set:function(e){this._multiSelect.displayMemberPath=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedValuePath",{get:function(){return this._multiSelect.selectedValuePath},set:function(e){this._multiSelect.selectedValuePath=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._itemsSource},set:function(e){var t=this.displayMemberPath||"name";this._itemsSource=e;var n=[];e&&(e.length>1?(this._selectAllItem={},this._selectAllItem[t]=o.culture.Viewer.parameterSelectAllItemText,n.push(this._selectAllItem)):this._selectAllItem=null,n=n.concat(e)),this._multiSelect.itemsSource=n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkedItems",{get:function(){var e=[];this._multiSelect.checkedItems&&(e=this._multiSelect.checkedItems.slice());var t=e.indexOf(this._selectAllItem);return t>-1&&e.splice(t,1),e},set:function(e){this._multiSelect.checkedItems=e,this._selectedAll=!1,this._updateSelectedAll()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lostFocus",{get:function(){return this._lostFocus},enumerable:!0,configurable:!0}),e.prototype._updateSelectedAll=function(){if(this._selectAllItem){var e=this._multiSelect.checkedItems||[],t=e.indexOf(this._selectAllItem),n=t>-1;this._selectedAll!==n?(this._selectedAll=n,this._innerCheckedItemsChanged=!0,this._selectedAll?this._multiSelect.checkedItems=this._multiSelect.itemsSource.slice():this._multiSelect.checkedItems=[],this._innerCheckedItemsChanged=!1):(this._selectedAll=e&&this._itemsSource&&e.length-(n?1:0)===this._itemsSource.length,this._selectedAll!==n&&(this._innerCheckedItemsChanged=!0,this._selectedAll?this._multiSelect.checkedItems=e.concat(this._selectAllItem):((e=e.slice()).splice(t,1),this._multiSelect.checkedItems=e),this._innerCheckedItemsChanged=!1))}},e}(),c='<path d="M24,11.9v-2h-4V7h0V5h0h-1h-5V2h0V0h0h-1H1H0h0v2h0v11h0v1h0h1h5v4h0v1h0h1h3v4h0v1h0h1h2.1v-1H11V12h2.1v-2H11h-1h0v2h0v6H7V7h12v2.9h-1v2h5V23h-4.9v1H23h1h0v-1h0L24,11.9L24,11.9z M6,5L6,5l0,2h0v6H1V2h12v3H7H6z"/><path d="M20,20v-3v-1h-1h-1v-1v-1h-1h-3h-1v1v3v1h1h1v2h0h1h3h1h0L20,20L20,20z M14,18v-3h3v1h-1h-1v1v1H14z M17,17v1h-1v-1H17z M16,20v-1h1h1v-1v-1h1v3H16z"/>',l={paginated:'<rect x="16" y= "1" width="1" height="1" /><rect x="17" y= "2" width="1" height="1" /><rect x="18" y= "3" width="1" height="1" /><path d= "M20,5V4h-1v1h-0.6H18h-3V2V1.3V1h1V0h-1h0H5H4H3v24h2v0h13h1.1H20L20,5L20,5z M5,22.1V2h8v5h1h1h3v15.1H5z" /><rect x="6" y= "8" width="10" height="1" /><rect x="6" y= "5" width="5" height="1" /><rect x="6" y= "11" width="10" height="1" /><rect x="6" y= "14" width="10" height="1" /><rect x="6" y= "17" width="10" height="1" /><rect x="6" y= "20" width="10" height="1" />',print:'<rect x="5" y= "1" width="14" height="4" /><polygon points= "22,8 22,7 19,7 19,6 5,6 5,7 2,7 2,8 1,8 1,11 1,20 2,20 2,21 5,21 5,11 19,11 19,21 22,21 22,20 23,20 23, 11 23, 8 "/><path d="M6,12v11h12V12H6z M16,21H8v-1h8V21z M16,18H8v-1h8V18z M16,15H8v-1h8V15z" />',exports:'<path d="M19.6,23"/><polyline points="5,19 5,2 13,2 13,7 14.3,7 15,7 18,7 18,9 20,9 20,7 20,6.4 20,5 20,4 19,4 19,5 15,5 15,2 15,1 16,1 16,0 15,0 5,0 3,0 3,2 3,19 3,21 5,21 "/><rect x="18" y="3" width="1" height="1"/><rect x="17" y="2" width="1" height="1"/><rect x="16" y="1" width="1" height="1"/><polygon points="17,16.6 20,14.1 17,11.6 17,13.6 13,13.6 13,14.6 17,14.6 "/><rect x="3" y="20.9" width="2" height="3.1"/><rect x="4.5" y="22" width="15.6" height="2"/><rect x="18" y="8.4" width="2" height="1.6"/><rect x="18" y="18" width="2.1" height="6"/>',portrait:'<path d="M19,0L19,0L5,0v0H3v24h0.1H5h14h1.7H21V0H19z M12.5,23h-1v-1h1V23z M19,21H5V2h14V21z"/>',landscape:'<path d="M24,19L24,19l0-14h0V3H0v0.1V5v14v1.7V21h24V19z M1,12.5v-1h1v1H1z M3,19V5h19v14H3z"/>',pageSetup:'<rect x="18" y="1" width="1" height="1"/><rect x="19" y="2" width="1" height="1"/><rect x="20" y="3" width="1" height="1"/><polygon points="22,5 22,4 21,4 21,5 20.4,5 20,5 17,5 17,2 17,1.3 17,1 18,1 18,0 17,0 17,0 7,0 6,0 5,0 5,5 7,5 7,2 15,2 15,7 16,7 17,7 20,7 20,22.1 7,22.1 7,19 5,19 5,24 5.9,24 7,24 20,24 21.1,24 22,24 22,5 "/><rect x="5" y="7" width="2" height="2"/><rect x="5" y="11" width="2" height="2"/><rect x="5" y="15" width="2" height="2"/><rect x="9" y="11" width="2" height="2"/><rect x="1" y="11" width="2" height="2"/><polygon points="9,8 9,8 8,8 8,9 9,9 9,10 10,10 10,8 "/><polygon points="2,9 2,9 2,10 3,10 3,9 4,9 4,8 2,8 "/><polygon points="3,16 3,16 4,16 4,15 3,15 3,14 2,14 2,16 "/><polygon points="10,15 10,15 10,14 9,14 9,15 8,15 8,16 10,16 "/>',previousPage:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="5.6,10.7 12,4.4 18.4,10.7 18.4,15 13.5,10.1 13.5,19.6 10.4,19.6 10.4,10.1 5.6,15 " />',nextPage:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="18.4,13.3 12,19.6 5.6,13.3 5.6,9 10.5,13.9 10.5,4.4 13.6,4.4 13.6,13.9 18.4,9 " />',firstPage:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="6.5,13.1 12,7.8 17.5,13.1 17.5,17.5 13.5,13.5 13.5,19.6 10.4,19.6 10.4,13.5 6.5,17.5 " /><rect x="6.5" y= "4.4" width="10.9" height="2.2" />',lastPage:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="17.5,10.9 12,16.2 6.5,10.9 6.5,6.5 10.5,10.5 10.5,4.4 13.6,4.4 13.6,10.5 17.5,6.5 " /><rect x="6.5" y= "17.5" transform="matrix(-1 -8.987357e-011 8.987357e-011 -1 24 37.0909)" width="10.9" height="2.2" />',backwardHistory:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="10.7,18.4 4.4,12 10.7,5.6 15,5.6 10.1,10.5 19.6,10.5 19.6,13.6 10.1,13.6 15,18.4 " />',forwardHistory:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="13.3,5.6 19.6,12 13.3,18.4 9,18.4 13.9,13.5 4.4,13.5 4.4,10.4 13.9,10.4 9,5.6 " />',selectTool:'<polygon points="19.9,13.4 5.6,1.1 5.3,19.9 10.5,14.7 14.3,23.3 16.4,22.4 12.6,13.8 "/>',moveTool:'<polygon points="12.5,3 14.5,3 12,0 9.5,3 11.5,3 11.5,21 11.5,21 9.6,21 12,24 14.5,21 12.5,21 "/><polygon points="21,12.5 21,14.5 24,12 21,9.5 21,11.5 3,11.5 3,11.5 3,9.6 0,12 3,14.5 3,12.5 "/>',continuousView:'<polygon points="22,0 22,5 9,5 9,0 7,0 7,5 7,7 7,7 24,7 24,7 24,5 24,0 "/><polygon points="23,15 19,15 19,11 20,11 20,10 19,10 18,10 17,10 9,10 7.4,10 7,10 7,24 9,24 9,12 17,12 17,15 17,16.6 17,17 22,17 22,24 24,24 24,17 24,15.1 24,15 24,15 24,14 23,14 "/><rect x="22" y="13" width="1" height="1"/><polygon points="20.9,12 20.9,13 22,13 22,12 21,12 21,11 20,11 20,12 "/><polygon points="4.9,5.2 2.5,2.2 0,5.2 2,5.2 2,9.2 3,9.2 3,5.2 "/><polygon points="2.9,19.2 2.9,15.2 1.9,15.2 1.9,19.2 0,19.2 2.5,22.1 4.9,19.2 "/>',singleView:'<rect x="16" y="1" width="1" height="1"/><rect x="17" y="2" width="1" height="1"/><rect x="18" y="3" width="1" height="1"/><path d="M20,5V4h-1v1h-0.6H18h-3V2V1.3V1h1V0h-1h0H5H4H3v24h2v0h13h1.1H20L20,5L20,5z M5,22.1V2h8v5h1h1h3v15.1H5z"/>',fitWholePage:'<rect x="16" y="1" width="1" height="1"/><rect x="17" y="2" width="1" height="1"/><rect x="18" y="3" width="1" height="1"/><path d="M20,5V4h-1v1h-0.6H18h-3V2V1.3V1h1V0h-1h0H5H4H3v24h2v0h13h1.1H20L20,5L20,5z M18,22.1H5V2h8v5h1h1h3V22.1z"/><polygon points="17,13.5 15,11 15,13 13,13 13,14 15,14 15,16 "/><polygon points="6,13.5 8,16 8,14 10,14 10,13 8,13 8,11 "/><polygon points="11.5,7 9,9 11,9 11,11 12,11 12,9 14,9 "/><polygon points="11.5,20 14,18 12,18 12,16 11,16 11,18 9,18 "/>',fitPageWidth:'<rect x="16" y="1" width="1" height="1"/><rect x="17" y="2" width="1" height="1"/><rect x="18" y="3" width="1" height="1"/><path d="M20,5V4h-1v1h-0.6H18h-3V2V1.3V1h1V0h-1h0H5H4H3v24h2v0h13h1.1H20L20,5L20,5z M5,22.1V2h8v5h1h1h3v15.1H5z"/><polygon points="14,15.5 17,13 14,10.6 14,12.6 13,12.6 13,13.6 14,13.6 "/><polyline points="6,13.1 9,15.6 9,13.6 10,13.6 10,12.6 9,12.6 9,10.6 6,13.1 "/>',zoomOut:'<circle opacity=".25" cx="12" cy="12" r="12"/><rect opacity=".75" x="5" y="10" width="14" height="3"/>',zoomIn:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon opacity=".75" points="19,10 13.5,10 13.5,4.5 10.5,4.5 10.5,10 5,10 5,13 10.5,13 10.5,18.5 13.5,18.5 13.5,13 19,13 " />',fullScreen:'<path d="M22,0H0v2.8V4v20h1.5H2h20h0.7H24V4V0H22z M7,1h1v1H7V1z M5,1h1v1H5V1z M3,1h1v1H3V1z M22,22H2L2,4h20L22,22z" /><polygon points="19.6,9.9 20,6 16.1,6.4 17.6,7.8 14.7,10.6 15.4,11.3 18.3,8.5"/><polygon points="4.4,16.2 4,20 7.9,19.7 6.5,18.3 9.3,15.5 8.6,14.8 5.8,17.6"/>',exitFullScreen:'<path d="M22,0H0v2.8V4v20h1.5H2h20h0.7H24V4V0H22z M7,1h1v1H7V1z M5,1h1v1H5V1z M3,1h1v1H3V1z M22,22H2L2,4h20L22,22z" /><polygon points="9.2,18.6 9.6,14.7 5.7,15.1 7.2,16.5 4.3,19.3 5,20 7.9,17.2"/><polygon points="14.8,7.5 14.4,11.3 18.3,11 16.9,9.6 19.7,6.8 19,6.1 16.2,8.9"/>',thumbnails:'<path d="M20,2h-5h-2v2v5v2v0h2v0h5v0h2v0V9V4V2H20z M20,9h-5V4h5V9z"/><path d="M20,13h-5h-2v2v5v2v0h2v0h5v0h2v0v-2v-5v-2H20z M20,20h-5v-5h5V20z"/><path d="M9,13H4H2v2v5v2v0h2v0h5v0h2v0v-2v-5v-2H9z M9,20H4v-5h5V20z"/><rect x="2" y="2" width="9" height="9"/>',outlines:'<path d="M22,0H2H0v2v20v2h2h20h2v-2V2V0H22z M2,2h12v20H2V2z M22,22h-6V2h6V22z"/><rect x="17.5" y="5" width="3" height="1" /><rect x="17.5" y="8" width="3" height="1"/><rect x="17.5" y="11" width="3" height="1"/>',search:'<circle stroke-width="2" fill="none" cx="9.5" cy="9.5" r="8.5"/><rect x="16.9" y="13.7" transform="matrix(-0.7193 0.6947 -0.6947 -0.7193 44.3315 18.4942)" width="3" height="9"/>',searchNext:'<polygon points="12,12.6 4,4.5 4,11.4 12,19.5 20,11.4 20,4.5 "/>',searchPrevious:'<polygon points="12,11.4 20,19.5 20,12.6 12,4.5 4,12.6 4,19.5 "/>',hamburgerMenu:'<rect x="2" y="4.875" width="20" height="1.5"/><rect x="2" y="11.25" width="20" height="1.5"/><rect x="2" y="17.625" width="20" height="1.5"/>',viewMenu:'<path transform="scale(1.5)" d="M8,2.9c-4.4,0-8,2.2-8,5s3.6,5,8,5s8-2.2,8-5S12.4,2.9,8,2.9z M8,11.8c-2.2,0-4-1.8-4-4c0-2.2,1.8-4,4-4s4, 1.8,4,4C12, 10,10.2,11.8,8,11.8z"/><circle class="st0" cx="12" cy="11.85" r="3.45"/>',searchOptions:'<polygon points="12,12.6 4,4.5 4,11.4 12,19.5 20,11.4 20,4.5 "/>',searchLeft:'<polygon points="11.4,12 19.5,20 12.6,20 4.5,12 12.6,4 19.5,4 "/>',searchRight:'<polygon points="12.6,12 4.5,4 11.4,4 19.5,12 11.4,20 4.5,20 "/>',showZoomBar:'<path d="M22.8,20.7l-4.4-4.4c1.1-1.6,1.8-3.5,1.8-5.6c0-5.2-4.3-9.5-9.5-9.5s-9.5,4.3-9.5,9.5s4.3,9.5,9.5,9.5 c2.1,0,4-0.7,5.6-1.8l4.4,4.4L22.8,20.7z M4.2,10.7c0-3.6,2.9-6.5,6.5-6.5s6.5,2.9,6.5,6.5s-2.9,6.5-6.5,6.5S4.2,14.3,4.2,10.7z"/><polygon points="7.2,9.2 7.2,7.2 9.2,7.2 9.2,6.2 6.2,6.2 6.2,9.2 "/><polygon points="12.2,7.2 14.2,7.2 14.2,9.2 15.2,9.2 15.2,6.2 12.2,6.2 "/><polygon points="9.2,14.2 7.2,14.2 7.2,12.2 6.2,12.2 6.2,15.2 9.2,15.2 "/><polygon points="14.2,12.2 14.2,14.2 12.2,14.2 12.2,15.2 15.2,15.2 15.2,12.2"/>',rubberbandTool:'\n    <g>\n        <polygon points="11.5,2 4,2 2,2 2,4 2,11.5 4,11.5 4,4 11.5,4 \t"/>\n        <path d="M16,10V8h-2h-4H8v2v4v2h2h4h2v-2V10z M14,14h-4v-4h4V14z"/>\n        <polygon points="20,12 20,19 19,19 19,20 12,20 12,22 20,22 22,22 22,20 22,12"/>\n        <rect x="16" y="16" class="st0" width="1" height="1"/>\n        <rect x="17" y="17" class="st0" width="1" height="1"/>\n        <rect x="18" y="18" class="st0" width="1" height="1"/>\n    </g>',magnifierTool:'\n    <circle fill="none" stroke-width="2" stroke-miterlimit="10" cx="9.5" cy="9.5" r="7.5"/>\n    <rect x="17" y="13.7" transform="matrix(0.7193 -0.6947 0.6947 0.7193 -7.4537 17.9238)" class="st1" width="3" height="9"/>\n    <polygon points="14,8.5 10.5,8.5 10.5,5 8.5,5 8.5,8.5 5,8.5 5,10.5 8.5,10.5 8.5,14 10.5,14 10.5,10.5 14,10.5"/>\n    ',rotateDocument:'\n    <g>\n        <path d="M18,0H5H3v4v18v2h2h13h2v-2V4V0H18z M18,22H5V4h13V22z"/>\n        <polygon points="9,12 13,12 13,14 15,11.5 13,9 13,11 9,11 8,11 8,12 8,17 9,17"/>\n    </g>',rotatePage:'\n    <g>\n        <rect x="16" y="1" width="1" height="1"/>\n        <rect x="17" y="2" width="1" height="1"/>\n        <rect x="18" y="3" width="1" height="1"/>\n        <path class="st0" d="M19,4v1h-0.6H18h-3V2V1.3V1h1V0h-1H5H4H3v24h2h13h1.1H20V5V4H19z M18,22.1H5V2h8v5h1h1h3V22.1z"/>\n        <polygon points="13,11 9,11 8,11 8,12 8,17 9,17 9,12 13,12 13,14 15,11.5 13,9"/>\n    </g>'},h=function(e){function t(t,n){var o=e.call(this)||this;return o._pageIndex=t,o._pageElement=n,o}return s(t,e),Object.defineProperty(t.prototype,"pageIndex",{get:function(){return this._pageIndex},set:function(e){this._pageIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageElement",{get:function(){return this._pageElement},set:function(e){this._pageElement=e},enumerable:!0,configurable:!0}),t}(o.EventArgs),p=function(){function e(){this._actions=[],this._isStarted=!1}return e.prototype._any=function(){return this._actions.length>0},e.prototype.queue=function(e){var t=this,n=this._any();this._actions.push((function(){e(),t._continue()})),this.isStarted&&!n&&this._continue()},e.prototype._continue=function(){var e=this._actions.shift();e&&e()},e.prototype.start=function(){this._isStarted||(this._isStarted=!0,this._continue())},Object.defineProperty(e.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!0,configurable:!0}),e}();"undefined"!=typeof window&&(window.TouchEvent=window.TouchEvent||function(){},window.PointerEvent=window.PointerEvent||function(){},window.Touch=window.Touch||function(){});var d,g,_={startName:"touchstart",moveName:"touchmove",endName:["touchend","touchcancel","touchleave"].join(",")},m={startName:["pointerdown","pointerenter"].join(","),moveName:"pointermove",endName:["pointerup","pointercancel","pointerleave"].join(",")};function f(){return"ontouchstart"in window?_:m}(g=d||(d={}))[g.None=0]="None",g[g.Left=1]="Left",g[g.Up=2]="Up",g[g.Right=3]="Right",g[g.Down=4]="Down";var v=function(){function e(e){this._systemTouchInfo=e,e instanceof Touch?this._id=e.identifier:this._id=e.pointerId,this._target=e.target,this._screenX=e.screenX,this._screenY=e.screenY,this._clientX=e.clientX,this._clientY=e.clientY}return e.getCenter=function(e,t){return new o.Point(e.x+(t.x-e.x)/2,e.y+(t.y-e.y)/2)},e.getCenterClient=function(t,n){return e.getCenter(new o.Point(t.clientX,t.clientY),new o.Point(n.clientX,n.clientY))},e.getCenterScreen=function(t,n){return e.getCenter(new o.Point(t.screenX,t.screenY),new o.Point(n.screenX,n.screenY))},e.getDistance=function(e,t){var n=Math.abs(e.clientX-t.clientX),o=Math.abs(e.clientY-t.clientY);return Math.sqrt(n*n+o*o)},e._getDirection=function(e,t){var n=t.clientX-e.clientX,o=t.clientY-e.clientY;return Math.abs(n)>=Math.abs(o)?n>0?d.Right:n<0?d.Left:d.None:o>0?d.Down:o<0?d.Up:d.None},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"systemTouchInfo",{get:function(){return this._systemTouchInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"screenX",{get:function(){return this._screenX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"screenY",{get:function(){return this._screenY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientX",{get:function(){return this._clientX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientY",{get:function(){return this._clientY},enumerable:!0,configurable:!0}),e}(),y=function(){function e(){this._timeInterval=50,this._speedInterval=5}return Object.defineProperty(e.prototype,"timeInterval",{get:function(){return this._timeInterval},set:function(e){this._timeInterval=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speedInterval",{get:function(){return this._speedInterval},set:function(e){this._speedInterval=e},enumerable:!0,configurable:!0}),e.prototype.stop=function(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)},e.prototype.start=function(e,t,n){var o=this;if(this.stop(),n){var r=e>=0?1:-1,i=t>=0?1:-1,a=Math.abs(e*this._timeInterval),s=Math.abs(t*this._timeInterval),u=Math.max(a,s),c=Math.floor(u/this.speedInterval),l=Math.floor(a/c),h=Math.floor(s/c);this._timer=setInterval((function(){a-=l,s-=h,a=Math.max(0,a),s=Math.max(0,s),a&&s?n(a*r,s*i):o.stop()}),this._timeInterval)}},e}(),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.getScrollbarWidth=function(e){var n,o;return t._scrollbarWidth&&!e||((n=document.createElement("div")).style.width="50px",n.style.height="50px",n.style.overflow="auto",document.body.appendChild(n),(o=document.createElement("div")).style.height="60px",n.appendChild(o),t._scrollbarWidth=n.offsetWidth-n.clientWidth,document.body.removeChild(n)),t._scrollbarWidth},t._scrollbarWidth=null,t}(o.Control);function b(e){var t=[];for(var n in e)n&&n.length&&"_"!=n[0]&&!isNaN(parseInt(n))&&t.push({text:e[n],value:n});return t}var P,S,C=function(e){function t(t){var n=e.call(this)||this;return n._rect=t,n}return s(t,e),Object.defineProperty(t.prototype,"rect",{get:function(){return this._rect},enumerable:!0,configurable:!0}),t}(o.EventArgs),x=function(e){function t(t){var n=e.call(this)||this;return n._a=t,n}return s(t,e),Object.defineProperty(t.prototype,"element",{get:function(){return this._a},enumerable:!0,configurable:!0}),t}(o.EventArgs);!function(e){e[e.Boolean=0]="Boolean",e[e.DateTime=1]="DateTime",e[e.Time=2]="Time",e[e.Date=3]="Date",e[e.Integer=4]="Integer",e[e.Float=5]="Float",e[e.String=6]="String"}(P||(P={})),function(e){e[e.Folder=0]="Folder",e[e.File=1]="File",e[e.Report=2]="Report"}(S||(S={}));var T,E,M,I,V,A,j,D=function(e){function t(t){var n=e.call(this)||this;return n._data=t||{},n}return s(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),t}(o.EventArgs),R=function(){function e(){}return e.loaded="Loaded",e.rendering="Rendering",e.completed="Completed",e.stopped="Stopped",e.cleared="Cleared",e.notFound="NotFound",e}();!function(e){e[e.Bookmark=0]="Bookmark",e[e.Custom=1]="Custom"}(T||(T={})),function(e){e[e.SelectTool=0]="SelectTool",e[e.MoveTool=1]="MoveTool",e[e.RubberbandTool=2]="RubberbandTool",e[e.MagnifierTool=3]="MagnifierTool"}(E||(E={})),function(e){e[e.Single=0]="Single",e[e.Continuous=1]="Continuous"}(M||(M={})),function(e){e[e.Custom=0]="Custom",e[e.PageWidth=1]="PageWidth",e[e.WholePage=2]="WholePage"}(I||(I={})),function(e){e[e.TogglePaginated=0]="TogglePaginated",e[e.Print=1]="Print",e[e.Portrait=2]="Portrait",e[e.Landscape=3]="Landscape",e[e.ShowPageSetupDialog=4]="ShowPageSetupDialog",e[e.FirstPage=5]="FirstPage",e[e.PrePage=6]="PrePage",e[e.NextPage=7]="NextPage",e[e.LastPage=8]="LastPage",e[e.PageNumber=9]="PageNumber",e[e.PageCountLabel=10]="PageCountLabel",e[e.Backward=11]="Backward",e[e.Forward=12]="Forward",e[e.SelectTool=13]="SelectTool",e[e.MoveTool=14]="MoveTool",e[e.Continuous=15]="Continuous",e[e.Single=16]="Single",e[e.ZoomOut=17]="ZoomOut",e[e.ZoomIn=18]="ZoomIn",e[e.ZoomValue=19]="ZoomValue",e[e.FitWholePage=20]="FitWholePage",e[e.FitPageWidth=21]="FitPageWidth",e[e.ToggleFullScreen=22]="ToggleFullScreen",e[e.ShowHamburgerMenu=23]="ShowHamburgerMenu",e[e.ShowViewMenu=24]="ShowViewMenu",e[e.ShowSearchBar=25]="ShowSearchBar",e[e.ShowThumbnails=26]="ShowThumbnails",e[e.ShowOutlines=27]="ShowOutlines",e[e.ShowExportsPanel=28]="ShowExportsPanel",e[e.ShowPageSetupPanel=29]="ShowPageSetupPanel",e[e.ShowZoomBar=30]="ShowZoomBar",e[e.ShowSearchOptions=31]="ShowSearchOptions",e[e.SearchPrev=32]="SearchPrev",e[e.SearchNext=33]="SearchNext",e[e.SearchMatchCase=34]="SearchMatchCase",e[e.SearchMatchWholeWord=35]="SearchMatchWholeWord",e[e.RubberbandTool=36]="RubberbandTool",e[e.MagnifierTool=37]="MagnifierTool",e[e.RotateDocument=38]="RotateDocument",e[e.RotatePage=39]="RotatePage"}(V||(V={})),function(e){e[e.NoRotate=0]="NoRotate",e[e.Rotation90=1]="Rotation90",e[e.Rotation180=2]="Rotation180",e[e.Rotation270=3]="Rotation270"}(A||(A={})),function(e){e[e.Custom=0]="Custom",e[e.Letter=1]="Letter",e[e.LetterSmall=2]="LetterSmall",e[e.Tabloid=3]="Tabloid",e[e.Ledger=4]="Ledger",e[e.Legal=5]="Legal",e[e.Statement=6]="Statement",e[e.Executive=7]="Executive",e[e.A3=8]="A3",e[e.A4=9]="A4",e[e.A4Small=10]="A4Small",e[e.A5=11]="A5",e[e.B4=12]="B4",e[e.B5=13]="B5",e[e.Folio=14]="Folio",e[e.Quarto=15]="Quarto",e[e.Standard10x14=16]="Standard10x14",e[e.Standard11x17=17]="Standard11x17",e[e.Note=18]="Note",e[e.Number9Envelope=19]="Number9Envelope",e[e.Number10Envelope=20]="Number10Envelope",e[e.Number11Envelope=21]="Number11Envelope",e[e.Number12Envelope=22]="Number12Envelope",e[e.Number14Envelope=23]="Number14Envelope",e[e.CSheet=24]="CSheet",e[e.DSheet=25]="DSheet",e[e.ESheet=26]="ESheet",e[e.DLEnvelope=27]="DLEnvelope",e[e.C5Envelope=28]="C5Envelope",e[e.C3Envelope=29]="C3Envelope",e[e.C4Envelope=30]="C4Envelope",e[e.C6Envelope=31]="C6Envelope",e[e.C65Envelope=32]="C65Envelope",e[e.B4Envelope=33]="B4Envelope",e[e.B5Envelope=34]="B5Envelope",e[e.B6Envelope=35]="B6Envelope",e[e.ItalyEnvelope=36]="ItalyEnvelope",e[e.MonarchEnvelope=37]="MonarchEnvelope",e[e.PersonalEnvelope=38]="PersonalEnvelope",e[e.USStandardFanfold=39]="USStandardFanfold",e[e.GermanStandardFanfold=40]="GermanStandardFanfold",e[e.GermanLegalFanfold=41]="GermanLegalFanfold",e[e.IsoB4=42]="IsoB4",e[e.JapanesePostcard=43]="JapanesePostcard",e[e.Standard9x11=44]="Standard9x11",e[e.Standard10x11=45]="Standard10x11",e[e.Standard15x11=46]="Standard15x11",e[e.InviteEnvelope=47]="InviteEnvelope",e[e.LetterExtra=50]="LetterExtra",e[e.LegalExtra=51]="LegalExtra",e[e.TabloidExtra=52]="TabloidExtra",e[e.A4Extra=53]="A4Extra",e[e.LetterTransverse=54]="LetterTransverse",e[e.A4Transverse=55]="A4Transverse",e[e.LetterExtraTransverse=56]="LetterExtraTransverse",e[e.APlus=57]="APlus",e[e.BPlus=58]="BPlus",e[e.LetterPlus=59]="LetterPlus",e[e.A4Plus=60]="A4Plus",e[e.A5Transverse=61]="A5Transverse",e[e.B5Transverse=62]="B5Transverse",e[e.A3Extra=63]="A3Extra",e[e.A5Extra=64]="A5Extra",e[e.B5Extra=65]="B5Extra",e[e.A2=66]="A2",e[e.A3Transverse=67]="A3Transverse",e[e.A3ExtraTransverse=68]="A3ExtraTransverse",e[e.JapaneseDoublePostcard=69]="JapaneseDoublePostcard",e[e.A6=70]="A6",e[e.JapaneseEnvelopeKakuNumber2=71]="JapaneseEnvelopeKakuNumber2",e[e.JapaneseEnvelopeKakuNumber3=72]="JapaneseEnvelopeKakuNumber3",e[e.JapaneseEnvelopeChouNumber3=73]="JapaneseEnvelopeChouNumber3",e[e.JapaneseEnvelopeChouNumber4=74]="JapaneseEnvelopeChouNumber4",e[e.LetterRotated=75]="LetterRotated",e[e.A3Rotated=76]="A3Rotated",e[e.A4Rotated=77]="A4Rotated",e[e.A5Rotated=78]="A5Rotated",e[e.B4JisRotated=79]="B4JisRotated",e[e.B5JisRotated=80]="B5JisRotated",e[e.JapanesePostcardRotated=81]="JapanesePostcardRotated",e[e.JapaneseDoublePostcardRotated=82]="JapaneseDoublePostcardRotated",e[e.A6Rotated=83]="A6Rotated",e[e.JapaneseEnvelopeKakuNumber2Rotated=84]="JapaneseEnvelopeKakuNumber2Rotated",e[e.JapaneseEnvelopeKakuNumber3Rotated=85]="JapaneseEnvelopeKakuNumber3Rotated",e[e.JapaneseEnvelopeChouNumber3Rotated=86]="JapaneseEnvelopeChouNumber3Rotated",e[e.JapaneseEnvelopeChouNumber4Rotated=87]="JapaneseEnvelopeChouNumber4Rotated",e[e.B6Jis=88]="B6Jis",e[e.B6JisRotated=89]="B6JisRotated",e[e.Standard12x11=90]="Standard12x11",e[e.JapaneseEnvelopeYouNumber4=91]="JapaneseEnvelopeYouNumber4",e[e.JapaneseEnvelopeYouNumber4Rotated=92]="JapaneseEnvelopeYouNumber4Rotated",e[e.Prc16K=93]="Prc16K",e[e.Prc32K=94]="Prc32K",e[e.Prc32KBig=95]="Prc32KBig",e[e.PrcEnvelopeNumber1=96]="PrcEnvelopeNumber1",e[e.PrcEnvelopeNumber2=97]="PrcEnvelopeNumber2",e[e.PrcEnvelopeNumber3=98]="PrcEnvelopeNumber3",e[e.PrcEnvelopeNumber4=99]="PrcEnvelopeNumber4",e[e.PrcEnvelopeNumber5=100]="PrcEnvelopeNumber5",e[e.PrcEnvelopeNumber6=101]="PrcEnvelopeNumber6",e[e.PrcEnvelopeNumber7=102]="PrcEnvelopeNumber7",e[e.PrcEnvelopeNumber8=103]="PrcEnvelopeNumber8",e[e.PrcEnvelopeNumber9=104]="PrcEnvelopeNumber9",e[e.PrcEnvelopeNumber10=105]="PrcEnvelopeNumber10",e[e.Prc16KRotated=106]="Prc16KRotated",e[e.Prc32KRotated=107]="Prc32KRotated",e[e.Prc32KBigRotated=108]="Prc32KBigRotated",e[e.PrcEnvelopeNumber1Rotated=109]="PrcEnvelopeNumber1Rotated",e[e.PrcEnvelopeNumber2Rotated=110]="PrcEnvelopeNumber2Rotated",e[e.PrcEnvelopeNumber3Rotated=111]="PrcEnvelopeNumber3Rotated",e[e.PrcEnvelopeNumber4Rotated=112]="PrcEnvelopeNumber4Rotated",e[e.PrcEnvelopeNumber5Rotated=113]="PrcEnvelopeNumber5Rotated",e[e.PrcEnvelopeNumber6Rotated=114]="PrcEnvelopeNumber6Rotated",e[e.PrcEnvelopeNumber7Rotated=115]="PrcEnvelopeNumber7Rotated",e[e.PrcEnvelopeNumber8Rotated=116]="PrcEnvelopeNumber8Rotated",e[e.PrcEnvelopeNumber9Rotated=117]="PrcEnvelopeNumber9Rotated",e[e.PrcEnvelopeNumber10Rotated=118]="PrcEnvelopeNumber10Rotated"}(j||(j={}));var k,O=function(e){function t(t,n){var o=e.call(this)||this;return o._url=t,o._settings=n,o}return s(t,e),Object.defineProperty(t.prototype,"url",{get:function(){return this._url},set:function(e){this._url=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"settings",{get:function(){return this._settings},set:function(e){this._settings=e},enumerable:!0,configurable:!0}),t}(o.EventArgs);(0,o._addCultureInfo)("Viewer",{cancel:"Cancel",ok:"OK",bottom:"Bottom:",top:"Top:",right:"Right:",left:"Left:",margins:"Margins(inches)",orientation:"Orientation:",paperKind:"Paper Kind:",pageSetup:"Page Setup",landscape:"Landscape",portrait:"Portrait",pageNumber:"Page Number",zoomFactor:"Zoom Factor",paginated:"Paginated",print:"Print",search:"Search",matchCase:"Match case",wholeWord:"Match whole word only",searchResults:"Search Results",previousPage:"Previous Page",nextPage:"Next Page",firstPage:"First Page",lastPage:"Last Page",backwardHistory:"Backward",forwardHistory:"Forward",pageCount:"Page Count",selectTool:"Select Tool",moveTool:"Move Tool",continuousMode:"Continuous Page View",singleMode:"Single Page View",wholePage:"Fit Whole Page",pageWidth:"Fit Page Width",zoomOut:"Zoom Out",zoomIn:"Zoom In",rubberbandTool:"Zoom by Selection",magnifierTool:"Magnifier",rotatePage:"Rotate Page",rotateDocument:"Rotate Document",exports:"Export",fullScreen:"Full Screen",exitFullScreen:"Exit Full Screen",hamburgerMenu:"Tools",showSearchBar:"Show Search Bar",viewMenu:"Layout Options",searchOptions:"Search Options",matchCaseMenuItem:"Match Case",wholeWordMenuItem:"Match Whole Word",thumbnails:"Page Thumbnails",outlines:"Document Map",loading:"Loading...",pdfExportName:"Adobe PDF",docxExportName:"Open XML Word",xlsxExportName:"Open XML Excel",docExportName:"Microsoft Word",xlsExportName:"Microsoft Excel",mhtmlExportName:"Web archive (MHTML)",htmlExportName:"HTML document",rtfExportName:"RTF document",metafileExportName:"Compressed metafiles",csvExportName:"CSV",tiffExportName:"Tiff images",bmpExportName:"BMP images",emfExportName:"Enhanced metafile",gifExportName:"GIF images",jpgExportName:"JPEG images",jpegExportName:"JPEG images",pngExportName:"PNG images",abstractMethodException:"It is an abstract method, please implement it.",cannotRenderPageNoViewPage:"Cannot render page without document source and view page.",cannotRenderPageNoDoc:"Cannot render page without document source and view page.",exportFormat:"Export format:",exportOptionTitle:"Export options",documentRestrictionsGroup:"Document restrictions",passwordSecurityGroup:"Password security",outputRangeGroup:"Output range",documentInfoGroup:"Document info",generalGroup:"General",docInfoTitle:"Title",docInfoAuthor:"Author",docInfoManager:"Manager",docInfoOperator:"Operator",docInfoCompany:"Company",docInfoSubject:"Subject",docInfoComment:"Comment",docInfoCreator:"Creator",docInfoProducer:"Producer",docInfoCreationTime:"Creation time",docInfoRevisionTime:"Revision time",docInfoKeywords:"Keywords",embedFonts:"Embed TrueType fonts",pdfACompatible:"PDF/A compatible (level 2B)",useCompression:"Use compression",useOutlines:"Generate outlines",allowCopyContent:"Allow content copying or extraction",allowEditAnnotations:"Allow annotations editing",allowEditContent:"Allow content editing",allowPrint:"Allow printing",ownerPassword:"Permissions (owner) password:",userPassword:"Document open (user) password:",encryptionType:"Encryption level:",paged:"Paged",showNavigator:"Show Navigator",navigatorPosition:"Navigator Position",singleFile:"Single File",tolerance:"Tolerance when detecting text bounds (points):",pictureLayer:"Use separate picture layer",metafileType:"Metafile Type:",monochrome:"Monochrome",resolution:"Resolution:",outputRange:"Page range:",outputRangeInverted:"Inverted",showZoomBar:"Zoom Bar",searchPrev:"Search Previous",searchNext:"Search Next",checkMark:"\u2713",exportOk:"Export...",cannotSearch:"Search requires a document source to be specified.",parameters:"Parameters",requiringParameters:"Please input parameters.",nullParameterError:"Value cannot be null.",invalidParameterError:"Invalid input.",parameterNoneItemsSelected:"(none)",parameterAllItemsSelected:"(all)",parameterSelectAllItemText:"(Select All)",selectParameterValue:"(select value)",apply:"Apply",errorOccured:"An error has occured."}),function(e){e[e.Document=0]="Document",e[e.Inch=1]="Inch",e[e.Mm=2]="Mm",e[e.Pica=3]="Pica",e[e.Point=4]="Point",e[e.Twip=5]="Twip",e[e.InHs=6]="InHs",e[e.Display=7]="Display",e[e.Cm=8]="Cm",e[e.Dip=9]="Dip"}(k||(k={}));var H=function(){function e(t,n){if(void 0===n&&(n=k.Dip),e._initUnitTypeDic(),(0,o.isObject)(t)){var r=t;t=r.value,n=r.units}else if((0,o.isString)(t)){var i=parseFloat(t);isNaN(i)||(n=e._unitTypeDic[t.substr(i.toString().length)],t=i)}this._value=t,this._units=n,this._valueInPixel=e.convertValue(t,n,k.Dip)}return e._initUnitTypeDic=function(){if(!e._unitTypeDic)for(var t in e._unitTypeDic={},e._unitTypes)e._unitTypeDic[e._unitTypeDic[t]=e._unitTypes[t]]=t},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"units",{get:function(){return this._units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueInPixel",{get:function(){return this._valueInPixel},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return e.toString(this)},e.toString=function(t){return null==t.value?"":t.value+e._unitTypeDic[t.units]},e.convertValue=function(t,n,o){if(n===o)return t;var r;switch(n){case k.Document:r=t/e._DocumentUnitsPerInch;break;case k.Inch:r=t;break;case k.Mm:r=t/e._MmPerInch;break;case k.Pica:r=t/e._PicaPerInch;break;case k.Point:r=t/e._PointsPerInch;break;case k.Twip:r=t/e._TwipsPerInch;break;case k.InHs:r=t/100;break;case k.Display:r=t/e._DisplayPerInch;break;case k.Cm:r=t/e._CmPerInch;break;case k.Dip:r=t/e._DipPerInch;break;default:throw"Invalid from _UnitType: "+n}switch(o){case k.Document:return r*e._DocumentUnitsPerInch;case k.Inch:return r;case k.Mm:return r*e._MmPerInch;case k.Pica:return r*e._PicaPerInch;case k.Point:return r*e._PointsPerInch;case k.Twip:return r*e._TwipsPerInch;case k.InHs:return 100*r;case k.Display:return r*e._DisplayPerInch;case k.Cm:return r*e._CmPerInch;case k.Dip:return r*e._DipPerInch;default:throw"Invalid to _UnitType: "+o}},e._MmPerInch=25.4,e._DocumentUnitsPerInch=300,e._PointsPerInch=72,e._TwipsPerInch=1440,e._PicaPerInch=6,e._CmPerInch=e._MmPerInch/10,e._DisplayPerInch=75,e._DipPerInch=96,e._unitTypes={doc:k.Document,in:k.Inch,mm:k.Mm,pc:k.Pica,pt:k.Point,tw:k.Twip,inhs:k.InHs,dsp:k.Display,cm:k.Cm,dip:k.Dip,px:k.Dip},e}(),F=function(){function e(){this._callbacks=[],this._finished=!1}return Object.defineProperty(e.prototype,"isFinished",{get:function(){return this._finished},enumerable:!0,configurable:!0}),e.prototype.cancel=function(){this._finished=!0},e.prototype.then=function(e,t){return this._callbacks.push({onFulfilled:e,onRejected:t}),this},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.resolve=function(e){var t=this;return setTimeout((function(){try{t.onFulfilled(e)}catch(e){t.onRejected(e)}}),0),this},e.prototype.reject=function(e){var t=this;return setTimeout((function(){t.onRejected(e)}),0),this},e.prototype.onFulfilled=function(e){if(!this._finished){this._finished=!0;for(var t;t=this._callbacks.shift();)if(t.onFulfilled){var n=t.onFulfilled(e);void 0!==n&&(e=n)}}},e.prototype.onRejected=function(e){if(!this._finished){this._finished=!0;for(var t;t=this._callbacks.shift();)if(t.onRejected){var n=t.onRejected(e);return void this.onFulfilled(n)}throw e}},e}(),N=function(e){function t(t){var n=e.call(this)||this;return n._promises=t,n._init(),n}return s(t,e),t.prototype._init=function(){var e=this;if(this._promises&&this._promises.length){var t=this._promises.length,n=0,o=[],r=!1;this._promises.some((function(i){return i.then((function(i){r||(o.push(i),++n>=t&&e.resolve(o))})).catch((function(t){r=!0,e.reject(t)})),r}))}else this.reject("No promises in current composited promise.")},t}(F),z="__wjEvents",L="It is an abstract method, please implement it.",B="hidden";function W(e,t,n,r){var i,a=e?1:-1;return n instanceof o.Point?(i=n.x,r=n.y):(i=n,r=r||0),new o.Point(t.x+a*i,t.y+a*r)}function U(e){return e+(-1==e.indexOf("?")?"?":"&")+"_="+(new Date).getTime()}function q(e,t){if(e&&e.children)for(var n=e.children,r=n.length-1;r>-1;r--){var i=n[r];if(null==t||t(i)){var a=i.querySelector(".wj-control");a&&(a=o.Control.getControl(a))&&a.dispose(),e.removeChild(i)}}}function Z(e){var t,n=document.createElement("div"),o=document.createDocumentFragment();for(n.innerHTML=e;t=n.firstChild;)o.appendChild(t);return o}function K(e,t,n,o){for(var r,i=t.split(","),a=0;a<i.length;a++)r=i[a].trim(),e.addEventListener?e.addEventListener(r,n,o):e.attachEvent?e.attachEvent("on"+r,n):e["on"+r]=n}function J(e,t,n){for(var o,r=t.split(","),i=0;i<r.length;i++)o=r[i].trim(),e.removeEventListener?e.removeEventListener(o,n):e.detachEvent?e.detachEvent("on"+o,n):e["on"+o]=null}function X(e,t,n,o){if(e){var r=t[z];r||(r=t[z]={});var i=r[e];i||(i=r[e]=[]),i.push(n)}t.addHandler(n,o)}function G(e,t){if(e){var n=t[z];if(n){var o=n[e];o&&o.forEach((function(e){return t.removeHandler(e)}))}}}function Y(e){var t;return Nt.IsError(e)?t=e.json.Error.Description:(t=e,e.Message&&(t=e.Message,e.ExceptionMessage&&(t+="<br/>"+e.ExceptionMessage))),t||o.culture.Viewer.errorOccured}function Q(e){return H.convertValue(e,k.Twip,k.Dip)}function $(e){return H.convertValue(e,k.Dip,k.Twip)}function ee(e,t,n,r,i){r=null==r?1:r;var a=e.querySelector("g");if(a){var s="scale("+r+")";if(null!=i)switch(i){case A.Rotation90:s+=" rotate(90)",s+=" translate(0 "+-n+")";break;case A.Rotation180:s+=" rotate(180)",s+=" translate("+-t+" "+-n+")";break;case A.Rotation270:s+=" rotate(270)",s+=" translate("+-t+" 0)"}a.setAttribute("transform",s),o.isIE&&((e=a.parentNode).removeChild(a),e.appendChild(a))}return e}function te(e,t,n,r){var i,a,s={x:Q(e.x),y:Q(e.y),width:Q(e.width),height:Q(e.height)};switch(n){case A.NoRotate:i=s.y,a=s.x;break;case A.Rotation90:i=s.x,a=t.height.valueInPixel-s.y-s.height;break;case A.Rotation180:i=t.height.valueInPixel-s.y-s.height,a=t.width.valueInPixel-s.x-s.width;break;case A.Rotation270:i=t.width.valueInPixel-s.x-s.width,a=s.y}return new o.Point(a*r,i*r)}function ne(e,t){return t===A.NoRotate||t===A.Rotation180?e:{width:e.height,height:e.width}}function oe(e,t,n){return void 0===n&&(n=!1),n?e.slice(-t.length).toLowerCase()===t.toLowerCase():e.slice(-t.length)===t}function re(e,t){return e&&t&&(0,o.isFunction)(e.valueOf)&&(0,o.isFunction)(t.valueOf)?e.valueOf()===t.valueOf():e===t}var ie,ae=function(e){function t(t){var n=e.call(this,t)||this;return n._parameters={},n._errors=[],n._errorsVisible=!1,n._savingParam=!1,n.commit=new o.Event,n.validate=new o.Event,(0,o.addClass)(n.hostElement,"wj-parameterscontainer"),n._updateErrorsVisible(),n}return s(t,e),t.prototype._setErrors=function(e){this._errors=e,this._updateErrorDiv()},Object.defineProperty(t.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._itemSources},set:function(e){this._itemSources=e,this._parameters={},this._render();var t=[];(e||[]).forEach((function(e){e.error&&t.push({key:e.name,value:e.error})})),this._setErrors(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"savingParam",{set:function(e){this._savingParam=e},enumerable:!0,configurable:!0}),t.prototype._reset=function(){this._lastEditedParam=null},t.prototype._setErrorsVisible=function(e){this._errorsVisible=e,this._updateErrorsVisible()},t.prototype._updateErrorsVisible=function(){this._errorsVisible?(0,o.removeClass)(this.hostElement,t._errorsHiddenCss):(0,o.addClass)(this.hostElement,t._errorsHiddenCss)},t.prototype.onCommit=function(){this.commit.raise(this)},t.prototype.onValidate=function(){this.validate.raise(this),this._setErrorsVisible(!1)},t.prototype._deferValidate=function(e,t,n){var o=this;null!=this._validateTimer&&(clearTimeout(this._validateTimer),this._validateTimer=null),this._savingParam=!0,this._validateTimer=setTimeout((function(){null!=t&&t(),o.onValidate(),null!=n&&n(),o._lastEditedParam=e,o._validateTimer=null}),500)},t.prototype._updateErrorDiv=function(){for(var e=this._errors||[],n=this.hostElement.querySelectorAll(".error"),o=0;o<n.length;o++)n[o].parentNode.removeChild(n[o]);for(o=0;o<e.length;o++){var r,i=this.hostElement.querySelector("*["+t._paramIdAttr+'="'+e[o].key+'"]'),a=e[o].value;i&&((r=document.createElement("div")).innerHTML=a,r.className="error",i.appendChild(r))}},t.prototype._render=function(){var e,n=this;if(q(this.hostElement,(function(o){if(!n._lastEditedParam||o.getAttribute(t._paramIdAttr)!==n._lastEditedParam)return!0;e=o})),this._itemSources){this._itemSources.forEach((function(r){if(n._lastEditedParam!==r.name){if(!r.hidden){var i=document.createElement("div"),a=document.createElement("span"),s=null;if(i.className="wj-parametercontainer",a.className="wj-parameterhead",a.innerHTML=r.prompt||r.name,(0,o.isArray)(r.allowedValues))s=n._generateComboEditor(r);else switch(r.dataType){case P.Boolean:s=n._generateBoolEditor(r);break;case P.DateTime:case P.Time:case P.Date:s=n._generateDateTimeEditor(r);break;case P.Integer:case P.Float:s=n._generateNumberEditor(r);break;case P.String:s=n._generateStringEditor(r)}s&&(s.className+=" wj-parametercontrol",i.setAttribute(t._paramIdAttr,r.name),i.appendChild(a),i.appendChild(s),e?n.hostElement.insertBefore(i,e):n.hostElement.appendChild(i))}}else n._lastEditedParam=null,e=null}));var r=document.createElement("input");r.type="button",r.value=o.culture.Viewer.apply,r.className="wj-applybutton";var i=function(){n._savingParam?setTimeout(i,100):(n._validateParameters()&&(n._errors=[],n.onCommit()),n._setErrorsVisible(!0))};K(r,"click",i),this.hostElement.appendChild(r)}},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),t&&(this._reset(),this._render())},t.prototype._validateParameters=function(){for(var e,n=this.hostElement.querySelectorAll("textarea"),r=[],i=this.itemsSource,a=0;a<i.length;a++){var s=i[a];e=this.hostElement.querySelector("["+t._paramIdAttr+'="'+s.name+'"]'),null!=s.value&&""!==s.value||s.nullable||s.dataType===P.String&&s.allowBlank||this.parameters.hasOwnProperty(s.name)||this.parameters[s.name]||e&&r.push({key:s.name,value:o.culture.Viewer.nullParameterError})}for(a=0;a<n.length;a++){var u=n.item(a),c=!0;switch(parseInt(u.getAttribute("data-type"))){case P.Date:case P.DateTime:case P.Time:c=t._checkValueType(u.value,o.isDate);break;case P.Float:c=t._checkValueType(u.value,t._isFloat);break;case P.Integer:c=t._checkValueType(u.value,o.isInt)}c||r.push({key:u.parentElement.id,value:o.culture.Viewer.invalidParameterError})}return this._setErrors(r),r.length<=0},t._isFloat=function(e){return!isNaN(parseFloat(e))},t._checkValueType=function(e,t){for(var n=e.split("\n"),o=0;o<n.length;o++)if(!(n[o].trim().length<=0||t(n[o].trim())))return!1;return!0},t.prototype._generateComboEditor=function(e){var t,n,i,a=this,s=[],c=document.createElement("div"),l=[],h=e.allowedValues&&e.allowedValues.length>0,p=h&&e.allowedValues.filter((function(t){return re(t.value,e.value)})).length>0;e.multiValue?t=new u(c):(t=new r.ComboBox(c),e.nullable?s.push({name:o.culture.Viewer.parameterNoneItemsSelected,value:null}):!h||null!=e.value&&p||s.push({name:o.culture.Viewer.selectParameterValue,value:null})),t.isEditable=!1,t.displayMemberPath="name",t.selectedValuePath="value",t.isDisabled=!h;for(var d=0;d<e.allowedValues.length;d++)s.push({name:e.allowedValues[d].key,value:e.allowedValues[d].value});if(t.itemsSource=s,e.multiValue){if(n=t,h){if(e.value){for(d=0;d<e.value.length;d++)for(var g=0;g<n.itemsSource.length;g++)if(re(n.itemsSource[g].value,e.value[d])){l.push(n.itemsSource[g]);break}n.checkedItems=l}}else n.checkedItems=[];n.lostFocus.addHandler((function(){var t=n.checkedItems.length===(e.value||[]).length;if(t)for(var o=0;o<n.checkedItems.length;o++)n.checkedItems[o].value!==e.value[o]&&(t=!1);t||a._deferValidate(e.name,(function(){i=[];for(var t=0;t<n.checkedItems.length;t++)i.push(n.checkedItems[t].value);a._updateParameters(e,i)}),(function(){i.length>0&&!e.nullable&&a._validateNullValueOfParameter(c)}))}))}else{t.selectedValue=h&&p?e.value:null;var _=!1;t.selectedIndexChanged.addHandler((function(t){e.value!==t.selectedValue&&a._deferValidate(e.name,(function(){_||(a._updateParameters(e,t.selectedValue),t.selectedValue&&t.itemsSource[0].name===o.culture.Viewer.selectParameterValue&&setTimeout((function(){_=!0;var e=t.selectedValue,n=t.selectedIndex;t.itemsSource.shift(),t.collectionView.refresh(),t.selectedValue=e,t.selectedIndex=n-1,_=!1})))}),(function(){return a._validateNullValueOfParameter(c)}))}))}return c},t.prototype._updateParameters=function(e,t){var n;this.itemsSource.some((function(t){return t.name===e.name&&(n=t,!0)})),this._parameters[e.name]=n.value=e.value=function(e,t){return t&&(0,o.isString)(e)?e.split(/[\r\n]+/):e}(t,e.multiValue)},t.prototype._generateBoolEditor=function(e){var t,n,o=this,i=[];return e.nullable?(n=document.createElement("div"),(t=new r.ComboBox(n)).isEditable=!1,t.displayMemberPath="name",t.selectedValuePath="value",i.push({name:"None",value:null}),i.push({name:"True",value:!0}),i.push({name:"False",value:!1}),t.itemsSource=i,t.selectedValue=e.value,t.lostFocus.addHandler((function(t){e.value!==t.selectedValue&&o._deferValidate(e.name,(function(){return o._updateParameters(e,t.selectedValue)}))}))):((n=document.createElement("input")).type="checkbox",n.checked=e.value,K(n,"click",(function(){o._deferValidate(e.name,(function(){return o._updateParameters(e,n.checked)}))}))),n},t.prototype._generateStringEditor=function(e){var t;return e.multiValue?(t=this._createTextarea(e.value,e.dataType),e.maxLength>0&&(t.maxLength=e.maxLength)):((t=document.createElement("input")).type="text",e.value&&(t.value=e.value),e.maxLength>0&&(t.maxLength=e.maxLength)),this._bindTextChangedEvent(t,e,"focusout"),t},t.prototype._createTextarea=function(e,n){var r,i=document.createElement("textarea"),a=[];if(n!==P.DateTime&&n!==P.Time&&n!==P.Date||(r=t._dateTimeFormat),e&&e.length>0)if(r){for(var s=0;s<e.length;s++)a.push(o.Globalize.formatDate(new Date(e[s]),r));i.value=a.join("\n")}else i.value=e.join("\n");return i.wrap="off",i.setAttribute("data-type",n.toString()),i},t.prototype._bindTextChangedEvent=function(e,t,n){var r=this;void 0===n&&(n="change,keyup,paste,input"),K(e,n,(function(n){if(!n.target||!n.target.disabled){var i=!1;if((0,o.isArray)(t.value)){for(var a=e.value.split("\n"),s=0,u=0;u<a.length;u++)t.value[u]!=a[u]&&(s+=1);i=0===s}t.value===e.value||i||r._deferValidate(t.name,(function(){return r._updateParameters(t,e.value)}),(function(){e.value&&!t.nullable&&r._validateNullValueOfParameter(e)}))}}))},t.prototype._generateNumberEditor=function(e){var t,n,o=this;return e.multiValue?(t=this._createTextarea(e.value,e.dataType),this._bindTextChangedEvent(t,e,"focusout")):(t=document.createElement("div"),(n=new r.InputNumber(t)).format=e.dataType===P.Integer?"n0":"n2",n.isRequired=!e.nullable,e.value&&(n.value=e.dataType===P.Integer?parseInt(e.value):parseFloat(e.value)),n.lostFocus.addHandler((function(){e.value!==n.value&&o._deferValidate(e.name,(function(){return o._updateParameters(e,n.value)}))}))),t},t.prototype._generateDateTimeEditor=function(e){var n,o,i=this;return e.multiValue?((n=this._createTextarea(e.value,e.dataType)).title=t._dateTimeFormat,this._bindTextChangedEvent(n,e,"focusout")):(n=document.createElement("div"),e.dataType==P.Date?o=new r.InputDate(n):e.dataType==P.DateTime?(o=new r.InputDateTime(n)).timeStep=60:(o=new r.InputTime(n)).step=60,o.isRequired=!1,null!=e.value?o.value=new Date(e.value):o.value=null,o.isRequired=!e.nullable,o.valueChanged.addHandler((function(){i._deferValidate(e.name,(function(){return i._updateParameters(e,o.value)}))}))),n},t.prototype._validateNullValueOfParameter=function(e){var n=this._errors;if(n&&n.length)for(var o=0;o<n.length;o++)if(n[o].key===e.parentElement.getAttribute(t._paramIdAttr)){var r=e.parentElement.querySelector(".error");if(r){e.parentElement.removeChild(r),n.splice(o,1);break}}},t._paramIdAttr="param-id",t._errorsHiddenCss="wj-parametererrors-hidden",t._dateTimeFormat="MM/dd/yyyy HH:mm",t}(o.Control);function se(e,t){if((0,o.isString)(t)){if(oe(e,"DateTime"))return new Date(t);if("width"===e||"height"===e||oe(e,"Margin"))return new H(t)}return t}function ue(e,t){return(0,o.isString)(t)&&("width"===e||"height"===e||oe(e,"Margin"))?new H(t):t}function ce(e,t){t=t||{};var n=[];for(var o in t)n.push(o+"="+encodeURIComponent(t[o]));if(n.length){var r=e.indexOf("?")<0?"?":"&";e+=r+n.join("&")}return e}function le(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=[],o=0,r=e.length;o<r;o++){var i=e[o];i&&("string"!=typeof i?n=n.concat(he(i)):n.push(pe(i).join("/")))}return n.join("/")}function he(e){if(null==e)return null;for(var t=[],n=0,o=e.length;n<o;n++)t=t.concat(pe(e[n]));return t}function pe(e){var t=e.split("/");return t.length>0&&!t[t.length-1].length&&t.splice(t.length-1),t}function de(e){return JSON.parse(e,se)}!function(e){e[e.Start=0]="Start",e[e.Move=1]="Move",e[e.End=2]="End"}(ie||(ie={}));var ge=function(e){function t(n){var o=e.call(this)||this;return n instanceof t?(o._systemEvent=n.systemEvent,o._type=n.type,o._touchInfos=n.touchInfos,o):(o._systemEvent=n,Te._registerTouchInfo(n),o._type=Te._isTouchStart(n.type)?ie.Start:Te._isTouchEnd(n.type)?ie.End:ie.Move,o._touchInfos=Te._allTouchInfos?Te._allTouchInfos.slice():[],o)}return s(t,e),Object.defineProperty(t.prototype,"timeStamp",{get:function(){return this.systemEvent.timeStamp},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touchInfos",{get:function(){return this._touchInfos},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"systemEvent",{get:function(){return this._systemEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this.systemEvent.target},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTarget",{get:function(){return this.systemEvent.currentTarget},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointersCount",{get:function(){return this.touchInfos.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cancelBubble",{get:function(){return this._systemEvent.cancelBubble},set:function(e){this._systemEvent.cancelBubble=e},enumerable:!0,configurable:!0}),t.prototype.preventDefault=function(){this._systemEvent.preventDefault()},t}(o.EventArgs),_e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.raise=function(t,n){e.prototype.raise.call(this,t,n)},t}(o.Event),me=function(){function e(t){var n=this;this.touchMove=new _e,this.touchStart=new _e,this.touchEnd=new _e;var r=(0,o.getElement)(t);this._element=r;var i=e.getTrigger(r);if(i){var a=this._onTouchEvent.bind(this);i.touchMove.addHandler(a),i.touchStart.addHandler(a),i.touchEnd.addHandler(a),this._disposeAction=function(){i.touchMove.removeHandler(a),i.touchStart.removeHandler(a),i.touchEnd.removeHandler(a),n._disposeAction=null}}else{var s=f(),u=this._onSystemTouchEvent.bind(this);K(r,s.startName,u),K(r,s.moveName,u),K(r,s.endName,u),e.bindElement(r,this),this._disposeAction=function(){J(r,s.startName,u),J(r,s.moveName,u),J(r,s.endName,u),e.unbindElement(r),n._disposeAction=null}}}return e.bindElement=function(t,n){if(t[e._elementDataName])throw"Cannot bind multi _TouchTrigger on the same element.";t[e._elementDataName]=n},e.unbindElement=function(t){t[e._elementDataName]=null},e.getTrigger=function(t){return t[e._elementDataName]},e.prototype._onSystemTouchEvent=function(e){var t=this._createTouchEventArgs(e);t&&this._onTouchEvent(this,t)},e.prototype._createTouchEventArgs=function(e){return Te._isTouchEvent(e)?new ge(e):null},e.prototype.dispose=function(){this._disposeAction&&this._disposeAction()},Object.defineProperty(e.prototype,"hostElement",{get:function(){return this._element},enumerable:!0,configurable:!0}),e.prototype._onTouchEvent=function(e,t){switch(t.type){case ie.Start:return void this.onTouchStart(t);case ie.Move:return void this.onTouchMove(t);case ie.End:this.onTouchEnd(t)}},e.prototype.onTouchEnd=function(e){this.touchEnd.raise(this,e)},e.prototype.onTouchStart=function(e){this.touchStart.raise(this,e)},e.prototype.onTouchMove=function(e){this.touchMove.raise(this,e)},e._elementDataName="__wjTouchTrigger",e}(),fe=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i._zoom=1,i._pinchType=n,i._pre=r||{},i.type==ie.End?i:(i._pinchDistance=v.getDistance(i.touchInfos[0],i.touchInfos[1]),i._centerClient=v.getCenterClient(i.touchInfos[0],i.touchInfos[1]),i._centerScreen=v.getCenterScreen(i.touchInfos[0],i.touchInfos[1]),i.type==ie.Start||(i._zoom=i.pinchDistance/i.prePinchDistance,i._centerClientDelta=new o.Point(i.centerClient.x-i.preCenterClient.x,i.centerClient.y-i.preCenterClient.y),i._centerScreenDelta=new o.Point(i.centerScreen.x-i.preCenterScreen.x,i.centerScreen.y-i.preCenterScreen.y)),i)}return s(t,e),Object.defineProperty(t.prototype,"zoom",{get:function(){return this._zoom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointersCount",{get:function(){return this.type==ie.End?0:2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"prePinchDistance",{get:function(){return this._pre.pinchDistance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pinchDistance",{get:function(){return this._pinchDistance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerScreenDelta",{get:function(){return this._centerScreenDelta},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerClientDelta",{get:function(){return this._centerClientDelta},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerClient",{get:function(){return this._centerClient},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preCenterClient",{get:function(){return this._pre.centerClient},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerScreen",{get:function(){return this._centerScreen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preCenterScreen",{get:function(){return this._pre.centerScreen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._pinchType},enumerable:!0,configurable:!0}),t}(ge),ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.raise=function(t,n){e.prototype.raise.call(this,t,n)},t}(_e),ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pinch=new ve,t}return s(t,e),t.prototype.onPinch=function(e){this.pinch.raise(this,e)},t.prototype.onTouchStart=function(e){this._process(e)},t.prototype.onTouchend=function(e){this._process(e)},t.prototype.onTouchMove=function(e){this._process(e)},t.prototype._onPinching=function(e){var t=new fe(e,this._preEventArgs?ie.Move:ie.Start,this._preEventArgs);this.onPinch(t),this._preEventArgs=t},t.prototype._onPinchEnd=function(e){if(this._preEventArgs){var t=new fe(e,ie.End,this._preEventArgs);this.onPinch(t),this._preEventArgs=null}},t.prototype._process=function(e){if(2==e.pointersCount)switch(e.type){case ie.Start:case ie.Move:return void this._onPinching(e);case ie.End:return void this._onPinchEnd(e)}else this._onPinchEnd(e)},t}(me),we=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i._panType=null==r?t.type:r,i._client=new o.Point(i.touchInfo.clientX,i.touchInfo.clientY),i._screen=new o.Point(i.touchInfo.screenX,i.touchInfo.screenY),n&&(i._clientDelta=new o.Point(i.client.x-n.client.x,i.client.y-n.client.y),i._screenDelta=new o.Point(i.screen.x-n.screen.x,i.screen.y-n.screen.y)),i}return s(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._panType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientDelta",{get:function(){return this._clientDelta},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"screenDelta",{get:function(){return this._screenDelta},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"client",{get:function(){return this._client},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this._screen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointersCount",{get:function(){return this.type==ie.End?0:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touchInfo",{get:function(){return this.touchInfos[0]||{}},enumerable:!0,configurable:!0}),t}(ge),be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.raise=function(t,n){e.prototype.raise.call(this,t,n)},t}(_e),Pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panMove=new be,t.panStart=new be,t.panEnd=new be,t}return s(t,e),t.prototype.onPanEnd=function(e){this.panEnd.raise(this,e)},t.prototype.onPanStart=function(e){this.panStart.raise(this,e)},t.prototype.onPanMove=function(e){this.panMove.raise(this,e)},t.prototype._prepareMove=function(e){var t=this;this._prePanEventArgs=e,this._panEvents.queue((function(){t.onPanMove(e)}))},t.prototype._prepareStart=function(e){var n=this;this._prePanEventArgs=e,this._panEvents.queue((function(){n.onPanStart(e)})),this._clearPanStartTimer(),this._panStartTimer=setTimeout((function(){n._panEvents&&n._panEvents.start(),n._clearPanStartTimer()}),t._threhold)},t.prototype._prepareEnd=function(e){var t=this;this._prePanEventArgs=null,this._panEvents.queue((function(){var n=e instanceof we?e:new we(e,null,ie.End);t.onPanEnd(n),t._stopPan()}))},t.prototype._clearPanStartTimer=function(){null!=this._panStartTimer&&(clearTimeout(this._panStartTimer),this._panStartTimer=null)},t.prototype._tryStopPan=function(e){this._panEvents&&this._panEvents.isStarted?this._prepareEnd(e):this._stopPan()},t.prototype._stopPan=function(){this._clearPanStartTimer(),this._panEvents=null,this._prePanEventArgs=null},t.prototype._processPan=function(e){var t=this._createPanEventArgs(e);if(t)switch(t.type){case ie.Start:return void this._prepareStart(t);case ie.Move:return void this._prepareMove(t);case ie.End:return void this._prepareEnd(t)}else this._tryStopPan(e)},t.prototype.onTouchStart=function(t){e.prototype.onTouchStart.call(this,t),this._processPan(t)},t.prototype.onTouchMove=function(t){e.prototype.onTouchMove.call(this,t),this._processPan(t)},t.prototype.onTouchEnd=function(t){e.prototype.onTouchEnd.call(this,t);var n=this._createPanEventArgs(t);n?this._prepareEnd(n):this._tryStopPan(t)},t.prototype._createPanEventArgs=function(e){if(e.type==ie.End&&0!=e.pointersCount||e.type!=ie.End&&1!=e.pointersCount)return null;var t=new we(e,this._prePanEventArgs);if(t.type!=ie.Start){if(!this._panEvents)return null}else this._panEvents=new p;return t},t._threhold=10,t}(me),Se=function(e){function t(t,n,r,i){var a=e.call(this,r)||this;a._duration=i,a._startTouchInfo=t,a._endTouchInfo=n;var s=W(!1,new o.Point(a.endTouchInfo.clientX,a.endTouchInfo.clientY),new o.Point(a.startTouchInfo.clientX,a.startTouchInfo.clientY));return a._speed=new o.Point(xe.getSpeed(s.x,a.duration),xe.getSpeed(s.y,a.duration)),a._direction=v._getDirection(a.startTouchInfo,a.endTouchInfo),a}return s(t,e),Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startTouchInfo",{get:function(){return this._startTouchInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endTouchInfo",{get:function(){return this._endTouchInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointersCount",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},enumerable:!0,configurable:!0}),t}(we),Ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.raise=function(t,n){e.prototype.raise.call(this,t,n)},t}(be),xe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.swipe=new Ce,t}return s(t,e),t.getSpeed=function(e,t){return e/t},t.prototype.onPanStart=function(t){e.prototype.onPanStart.call(this,t),this._panStartEventArgs=t},t.prototype.onPanMove=function(t){e.prototype.onPanMove.call(this,t),this._prePanMoveEventArgs=t},t.prototype.onPanEnd=function(t){e.prototype.onPanEnd.call(this,t);var n=this._createSwipeEventArgs(t);n&&this.onSwipe(n),this._panStartEventArgs=null,this._prePanMoveEventArgs=null},t.prototype.onSwipe=function(e){this.swipe.raise(this,e)},t.prototype._createSwipeEventArgs=function(e){if(!this._panStartEventArgs||!this._prePanMoveEventArgs)return null;var n=e.timeStamp-this._panStartEventArgs.timeStamp;return n>t.maxDuration||v.getDistance(this._panStartEventArgs.touchInfo,this._prePanMoveEventArgs.touchInfo)<t.minDistance?null:new Se(this._panStartEventArgs.touchInfo,this._prePanMoveEventArgs.touchInfo,e,n)},t.minDistance=50,t.maxDuration=300,t}(Pe),Te=function(){function e(e,t){void 0===t&&(t=!0);var n=this;this.touchMove=new _e,this.touchStart=new _e,this.touchEnd=new _e,this.panMove=new be,this.panStart=new be,this.panEnd=new be,this.swipe=new Ce,this.pinch=new ve,this._trigger=new xe(e),this._trigger.touchStart.addHandler((function(e,t){return n.onTouchStart(t)})),this._trigger.touchMove.addHandler((function(e,t){return n.onTouchMove(t)})),this._trigger.touchEnd.addHandler((function(e,t){return n.onTouchEnd(t)})),this._trigger.panStart.addHandler((function(e,t){return n.onPanStart(t)})),this._trigger.panMove.addHandler((function(e,t){return n.onPanMove(t)})),this._trigger.panEnd.addHandler((function(e,t){return n.onPanEnd(t)})),this._trigger.swipe.addHandler((function(e,t){return n.onSwipe(t)})),this._pinchTrigger=new ye(e),this._pinchTrigger.pinch.addHandler((function(e,t){return n.onPinch(t)})),this.removeDefaultTouch=t}return e._isTouchEvent=function(t){return t instanceof TouchEvent||(t.pointerType||"").toLowerCase()===e._touchPointerName},e._isTouchStart=function(t){return e._eventTypeContains(t,f().startName)},e._isTouchEnd=function(t){return e._eventTypeContains(t,f().endName)},e._isTouchMove=function(t){return e._eventTypeContains(t,f().moveName)},e._eventTypeContains=function(e,t){var n=t.split(",");e=e.toLowerCase();for(var o=0,r=n.length;o<r;o++){var i=n[o].trim().toLowerCase();if(e.indexOf(i)>-1)return!0}return!1},e._registerTouchInfo=function(t){if(e._isTouchEvent(t))if(t instanceof TouchEvent){e._allTouchInfos=[];for(var n=0,o=t.touches.length;n<o;n++)e._allTouchInfos.push(new v(t.touches.item(n)))}else if(t instanceof PointerEvent){if(e._allTouchInfos=e._allTouchInfos||[],e._isTouchEnd(t.type)){var r=0;for(o=e._allTouchInfos.length;r<o;r++)if(e._allTouchInfos[r].id==t.pointerId)return void e._allTouchInfos.splice(r,1);return}for(r=0,o=e._allTouchInfos.length;r<o;r++)if(e._allTouchInfos[r].id==t.pointerId)return void(e._allTouchInfos[r]=new v(t));e._allTouchInfos.push(new v(t))}},e.prototype.onPinch=function(e){this.pinch.raise(this,e)},e.prototype.onSwipe=function(e){this.swipe.raise(this,e)},e.prototype.onTouchEnd=function(e){this.touchEnd.raise(this,e)},e.prototype.onTouchStart=function(e){this.touchStart.raise(this,e)},e.prototype.onTouchMove=function(e){this.touchMove.raise(this,e)},e.prototype.onPanEnd=function(e){this.panEnd.raise(this,e)},e.prototype.onPanStart=function(e){this.panStart.raise(this,e)},e.prototype.onPanMove=function(e){this.panMove.raise(this,e)},Object.defineProperty(e.prototype,"removeDefaultTouch",{get:function(){return this._removeDefaultTouch},set:function(e){this._removeDefaultTouch=e;var t=this.hostElement.style;e?(t.touchAction="none",t.msTouchAction="none"):(t.touchAction=this._defaultTouchAction,t.msTouchAction=this._defaultMsTouchAction)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hostElement",{get:function(){return this._pinchTrigger.hostElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentElement",{get:function(){return this.hostElement.children.length?this.hostElement.children[0]:null},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._pinchTrigger&&this._pinchTrigger.dispose(),this._trigger&&this._trigger.dispose(),this.removeDefaultTouch&&(this.removeDefaultTouch=!1)},e._touchPointerName="touch",e._allTouchInfos=[],e}(),Ee=function(e){function t(t){var n,r=e.call(this,t)||this;return r._height=100,r._max=100,r._desiredValue=0,r.valueChanged=new o.Event,n=r.getTemplate(),r.applyTemplate(null,n,{_wrapper:"wrapper"}),r.hostElement.style.width=w.getScrollbarWidth()+1+"px",K(r.hostElement,"scroll",(function(){r.onValueChanged()})),r}return s(t,e),t.prototype.onValueChanged=function(){this._desiredValue!=this.value&&this.valueChanged.raise(this)},t.prototype.preventScrollEvent=function(){this._desiredValue=this.hostElement.scrollTop},Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){e!==this._height&&(this._height=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.hostElement.scrollTop},set:function(e){this.hostElement.scrollTop=e,this.preventScrollEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(e){this._max!==e&&(this._max=e,this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t);var n=this._height+"px";this.hostElement.style.height!==n&&(this.hostElement.style.height=n);var o=this._max+this.hostElement.clientHeight+"px";this._wrapper.style.height!==o&&(this._wrapper.style.height=o),this.preventScrollEvent()},t.controlTemplate='<div class="wj-vscroller-wrapper" wj-part="wrapper"></div>',t}(w),Me=function(e){function t(t){var n=e.call(this,t)||this;return n._options={},n._optionLabels=null,n._groupTitleField=null,(0,o.addClass)(t,"wj-export-editor"),n}return s(t,e),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exportDescription",{get:function(){return this._exportDescription},set:function(e){this._exportDescription=e,this._options={},e&&(this._options.format=this.exportDescription.format,this._render())},enumerable:!0,configurable:!0}),t.prototype._skipOption=function(e){return t._skippedOptions.indexOf(e)>=0},t.prototype._render=function(){if(q(this.hostElement),this.exportDescription){document.createElement("table");var e=this.exportDescription.optionDescriptions,n={};if(e)for(var o=0;o<e.length;o++){var r=e[o];this._skipOption(r.name)||(r.group?(n[r.group]||(n[r.group]=[]),n[r.group].push(r)):(n[t._generalGroupName]||(n[t._generalGroupName]=[]),r.group=t._generalGroupName,n[t._generalGroupName].push(r)))}for(var i in n)this.hostElement.appendChild(this._generateGroup(n[i]));this._updateEditors()}},t.prototype._generateEditor=function(e){var n;if((0,o.isArray)(e.allowedValues))n=this._generateComboEditor(e);else switch(e.type){case"bool":n=this._generateBoolEditor(e);break;case"int":case"float":n=this._generateNumberEditor(e);break;case"unit":e.defaultValue=new H(e.defaultValue);default:n=this._generateStringEditor(e)}return n.setAttribute(t._optionIdAttr,e.name),n},t.prototype._generateComboEditor=function(e){for(var t,n=this,o=[],i=document.createElement("div"),a=0;a<e.allowedValues.length;a++)o.push(e.allowedValues[a]);return(t=new r.ComboBox(i)).isEditable=!1,t.itemsSource=o,t.selectedValue=e.defaultValue,t.selectedIndexChanged.addHandler((function(t){n._setOptionValue(e.name,t.selectedValue.toString())})),i},t.prototype._generateBoolEditor=function(e){var t,n=this;if(e.nullable){t=document.createElement("div");var i=new r.ComboBox(t),a=[];i.isEditable=!1,i.displayMemberPath="name",i.selectedValuePath="value",a.push({name:"None",value:null}),a.push({name:"True",value:!0}),a.push({name:"False",value:!1}),i.itemsSource=a,i.selectedValue=e.defaultValue;var s=function(t){n._setOptionValue(e.name,t.selectedValue),n._updateEditors(e.name)};i.selectedIndexChanged.addHandler(s),setTimeout((function(){return s(i)}))}else{(t=document.createElement("input")).type="checkbox";var u=(0,o.changeType)(e.defaultValue,o.DataType.Boolean,null);t.checked=u;var c=function(){n._setOptionValue(e.name,t.checked),n._updateEditors(e.name)};K(t,"click",c),setTimeout(c)}return t},t.prototype._generateNumberEditor=function(e){var t,n,o=this,i="int"===e.type;return t=document.createElement("div"),(n=new r.InputNumber(t)).format=i?"n0":"n2",n.isRequired=!e.nullable,n.value=e.defaultValue,n.valueChanged.addHandler((function(t){o._setOptionValue(e.name,t.value)})),t},t.prototype._generateStringEditor=function(e){var t,n=this;return t=document.createElement("input"),e.name.match(/password/i)?t.type="password":t.type="text",t.value=e.defaultValue,K(t,"change,keyup,paste,input",(function(){n._setOptionValue(e.name,t.value)})),t},t.prototype._generateGroup=function(e){var n=document.createElement("fieldset"),r=document.createElement("legend"),i=e[0].group;(0,o.addClass)(n,"wj-exportformats-group"),r.innerHTML=this._groupTitle[i],r.setAttribute(t._optionNameAttr,i),n.appendChild(r);for(var a=document.createElement("table"),s=0;s<e.length;s++){var u=e[s],c=document.createElement("tr"),l=document.createElement("td"),h=document.createElement("td");l.innerHTML=this._getOptionLabel(u.name),l.setAttribute(t._optionNameAttr,u.name),h.appendChild(this._generateEditor(u)),c.appendChild(l),c.appendChild(h),a.appendChild(c)}return n.appendChild(a),n},t.prototype._updateEditors=function(e){if("pdfACompatible"!==e&&e){if("paged"===e||!e){var n=this.hostElement.querySelector("["+t._optionIdAttr+'="showNavigator"]');if(n){var r=(0,o.changeType)(this._getOptionValue("paged"),o.DataType.Boolean,null);r?(n.checked=this._previousShowNavigator,this._setOptionValue("showNavigator",this._previousShowNavigator)):(this._previousShowNavigator=n.checked,n.checked=!1,this._setOptionValue("showNavigator",!1)),n.disabled=!r}}}else{var i=this.hostElement.querySelector("["+t._optionIdAttr+'="embedFonts"]');if(i){var a=(0,o.changeType)(this._getOptionValue("pdfACompatible"),o.DataType.Boolean,null);a?(this._previousEmbedFonts=i.checked,i.checked=!0,this._setOptionValue("embedFonts",!0)):(i.checked=this._previousEmbedFonts,this._setOptionValue("embedFonts",this._previousEmbedFonts)),i.disabled=a}}},t.prototype._getOptionLabel=function(e){return this._optionLabelsText[e]||e[0].toUpperCase()+e.substring(1)},t.prototype._getOptionDescByName=function(e){var t=null;return this._exportDescription.optionDescriptions.some((function(n){return n.name===e&&(t=n,!0)})),t},t.prototype._getOptionValue=function(e){return void 0!==this._options[e]?this._options[e]:this._getOptionDescByName(e).defaultValue},t.prototype._setOptionValue=function(e,t){var n=this._getOptionDescByName(e),o=n.defaultValue;"unit"===n.type&&(o=n.defaultValue.toString()),t!==o?this._options[e]=t:void 0!==this._options[e]&&delete this._options[e]},Object.defineProperty(t.prototype,"_optionLabelsText",{get:function(){if(!this._optionLabels){var e=o.culture.Viewer;this._optionLabels={title:e.docInfoTitle,author:e.docInfoAuthor,manager:e.docInfoManager,operator:e.docInfoOperator,company:e.docInfoCompany,subject:e.docInfoSubject,comment:e.docInfoComment,creator:e.docInfoCreator,producer:e.docInfoProducer,creationTime:e.docInfoCreationTime,revisionTime:e.docInfoRevisionTime,keywords:e.docInfoKeywords,embedFonts:e.embedFonts,pdfACompatible:e.pdfACompatible,useCompression:e.useCompression,useOutlines:e.useOutlines,allowCopyContent:e.allowCopyContent,allowEditAnnotations:e.allowEditAnnotations,allowEditContent:e.allowEditContent,allowPrint:e.allowPrint,ownerPassword:e.ownerPassword,userPassword:e.userPassword,encryptionType:e.encryptionType,paged:e.paged,showNavigator:e.showNavigator,navigatorPosition:e.navigatorPosition,singleFile:e.singleFile,tolerance:e.tolerance,pictureLayer:e.pictureLayer,metafileType:e.metafileType,monochrome:e.monochrome,resolution:e.resolution,outputRange:e.outputRange,outputRangeInverted:e.outputRangeInverted}}return this._optionLabels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_groupTitle",{get:function(){return this._groupTitleField||(this._groupTitleField={documentRestrictions:o.culture.Viewer.documentRestrictionsGroup,passwordSecurity:o.culture.Viewer.passwordSecurityGroup,outputRange:o.culture.Viewer.outputRangeGroup,documentInfo:o.culture.Viewer.documentInfoGroup,general:o.culture.Viewer.generalGroup}),this._groupTitleField},enumerable:!0,configurable:!0}),t.prototype._globalize=function(){for(var e=this.hostElement.querySelectorAll("["+t._optionNameAttr+"]"),n=0;n<e.length;n++){var o=e[n];o instanceof HTMLLegendElement?o.innerHTML=this._groupTitle[o.getAttribute(t._optionNameAttr)]:o.innerHTML=this._getOptionLabel(o.getAttribute(t._optionNameAttr))}},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),t&&(this._optionLabels=null,this._groupTitleField=null,this._globalize())},t._optionIdAttr="option-id",t._optionNameAttr="option-name",t._skippedOptions=["shapesWord2007Compatible","sheetName","navigatorPositions"],t._generalGroupName="general",t}(o.Control);function Ie(e,t,n){if(n&&n.cache||(e=U(e)),n&&"GET"!==(n.method||"GET").toUpperCase()){if(n.data&&!1!==n.urlEncode){var r=function(e){var t=[];for(var n in e=e||{})if(null!==e[n]&&void 0!==e[n])if((0,o.isArray)(e[n]))if(e[n].length>0)for(var r=0;r<e[n].length;r++)t.push(n+"="+encodeURIComponent(e[n][r]));else t.push(n+"=");else t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}(n.data);null!=r&&(n.data=r)}!1!==n.urlEncode&&(n.requestHeaders?n.requestHeaders["Content-Type"]||(n.requestHeaders["Content-Type"]="application/x-www-form-urlencoded"):n.requestHeaders={"Content-Type":"application/x-www-form-urlencoded"})}t&&t.requestHeaders&&((n=n||{}).requestHeaders=n.requestHeaders||{},Object.keys(t.requestHeaders).forEach((function(e){n.requestHeaders[e]=t.requestHeaders[e]})));var i=new O(e,n);return t&&t.beforeSend&&t.beforeSend(i),(0,o.httpRequest)(i.url,i.settings)}var Ve,Ae,je,De=function(){function e(){this._items=[{}],this._position=0,this.statusChanged=new o.Event}return e.prototype._onStatusChanged=function(){this.statusChanged.raise(this)},Object.defineProperty(e.prototype,"current",{get:function(){return this._items[this._position]},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._items=[{}],this._position=0,this._onStatusChanged()},e.prototype.add=function(){this._items.splice(++this._position),this._items.push({}),this._onStatusChanged()},e.prototype.forward=function(){if(!this.canForward())return null;var e=this._items[++this._position];return this._onStatusChanged(),e},e.prototype.backward=function(){if(!this.canBackward())return null;var e=this._items[--this._position];return this._onStatusChanged(),e},e.prototype.canForward=function(){return this._position<this._items.length-1},e.prototype.canBackward=function(){return this._position>0},e}();!function(e){e.Hyperlink="hyperlink",e.Bookmark="bookmark",e.Drillthrough="drillthrough",e.Sort="sort",e.Toggle="toggle"}(Ve||(Ve={})),function(e){e[e.String=0]="String",e[e.DateTime=1]="DateTime",e[e.Boolean=2]="Boolean",e[e.Integer=3]="Integer",e[e.Float=4]="Float"}(Ae||(Ae={})),function(e){e[e.OK=0]="OK",e[e.ExpectValue=1]="ExpectValue",e[e.HasOutstandingDependencies=2]="HasOutstandingDependencies",e[e.ValuesValidationFailed=3]="ValuesValidationFailed",e[e.DynamicValuesUnavailable=4]="DynamicValuesUnavailable"}(je||(je={}));var Re=function(){function e(e,t){this._url="",this._url=e.serviceUrl||"",this._documentPath=e.filePath,this._httpHandler=t}return Object.defineProperty(e.prototype,"serviceUrl",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filePath",{get:function(){return this._documentPath},enumerable:!0,configurable:!0}),e.prototype.getStatus=function(){throw L},e.prototype.setPageSettings=function(e){throw L},e.prototype.getBookmark=function(e){throw L},e.prototype.executeCustomAction=function(e){throw L},e.prototype.load=function(e){throw L},e.prototype.dispose=function(){throw L},e.prototype.getOutlines=function(){throw L},e.prototype.renderToFilter=function(e){throw L},e.prototype.search=function(e){throw L},e.prototype.getRenderToFilterUrl=function(e){throw L},e.prototype.getExportedUrl=function(e){throw L},e.prototype.getSupportedExportDescriptions=function(){throw L},e.prototype.getFeatures=function(){throw L},e.prototype.getPingTimeout=function(){return 100},e.prototype.getFileName=function(){var e=/([^\\/]+)$/.exec(this.filePath)[1];return e.lastIndexOf(".")>=0?e.substr(0,e.lastIndexOf(".")):e},e.prototype.downloadDataUrl=function(e){var t=new F;return this.downloadBlob(e).then((function(e){var n=new FileReader;n.onloadend=function(e){t.resolve(n.result)},n.readAsDataURL(e)})),t},e.prototype.downloadBlob=function(e){var t=new F;return this.httpRequest(e,{beforeSend:function(e){e.responseType="blob"}}).then((function(e){t.resolve(e.response)})),t},e.prototype.httpRequest=function(e,t){var n=this;t=t||{};var r=new F,i=t.error,a=t.success;return t.error=function(e){(0,o.isFunction)(i)&&i.call(n,e),r.reject(e)},t.success=function(e){(0,o.isFunction)(a)&&a.call(n,e),r.resolve(e)},Ie(e,this._httpHandler,t),r},e}(),ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.render=function(){throw L},t}(Re),Oe=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o._reportName=t.reportName,o}return s(t,e),Object.defineProperty(t.prototype,"isCleared",{get:function(){return!this._instanceId&&this._status==R.cleared},enumerable:!0,configurable:!0}),t.getReportNames=function(e,n,o){return t.getReports(e,n,null,o).then((function(e){if(!e)return null;var t=[];return e.items.forEach((function(e){e.type===S.Report&&t.push(e.name)})),t}))},t.getReports=function(e,t,n,o){var r=new F;return Ie(le(e,t),o,{data:n,success:function(e){r.resolve(JSON.parse(e.responseText))},error:function(e){return r.reject(e)}}),r},Object.defineProperty(t.prototype,"reportName",{get:function(){return this._reportName},enumerable:!0,configurable:!0}),t.prototype.getBookmark=function(e){var n=new F;return this._checkReportInstanceController(n)?(this.httpRequest(this._getReportInstancesUrl(t._bookmarkAction,e)).then((function(e){n.resolve(JSON.parse(e.responseText))})),n):n},t.prototype.executeCustomAction=function(e){var n={};return n[t._customActionParam]=e.data,this.render(n)},t.prototype.getStatus=function(){var e=new F;return this.httpRequest(this._statusLocation).then((function(t){e.resolve(JSON.parse(t.responseText,se))})),e},t.prototype.getDocumentStatus=function(){return this._getReportCache()},t.prototype._getReportCache=function(){var e=new F;return this._checkReportInstanceController(e)?(this.httpRequest(this._getReportInstancesUrl()).then((function(t){e.resolve(de(t.responseText))})),e):e},t.prototype.getParameters=function(){var e=new F;return this._checkReportInstanceController(e)?(this.httpRequest(this._getReportInstancesUrl(t._parametersAction)).then((function(t){e.resolve(JSON.parse(t.responseText))})),e):e},t.prototype._getUrlMainPart=function(){return le(this.serviceUrl,this.filePath,this.reportName)},t.prototype._getReportUrl=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return le(this._getUrlMainPart(),t._reportCommand,e)},t.prototype._getReportInstancesUrl=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return le(this._getUrlMainPart(),t._instancesCommand,this._instanceId,e)},t.prototype._checkReportController=function(e){return!(null==this.serviceUrl||!this.filePath||(oe(this.filePath,".flxr",!0)||oe(this.filePath,".xml",!0))&&!this.reportName)||(e&&e.reject(t._invalidReportControllerError),!1)},t.prototype._checkReportInstanceController=function(e){return!(!this._checkReportController(e)||!this._instanceId)||(e&&e.reject(t._invalidReportCacheControllerError),!1)},t.prototype._getError=function(e){var t=e.responseText;try{t&&(t=JSON.parse(t))}finally{return t}},t.prototype.render=function(e){var n=this,o=new F;return this._checkReportInstanceController(o)?(this.httpRequest(this._getReportInstancesUrl(t._renderAction),{method:"POST",data:e}).then((function(e){var t=202===e.status?{status:R.rendering}:de(e.responseText);n._status=t.status,o.resolve(t)}),(function(e){o.reject(n._getError(e))})),o):o},t.prototype.renderToFilter=function(e){var t=this,n=new F;return this._checkReportInstanceController(n)?(this.getRenderToFilterUrl(e).then((function(e){t.httpRequest(e,{cache:!0}).then((function(e){n.resolve(e)}),(function(e){n.reject(t._getError(e))}))})),n):n},t.prototype.load=function(e){var t=this,n=new F;return this._checkReportController(n)?(this.httpRequest(this._getReportInstancesUrl(),{method:"POST",data:e}).then((function(e){var o=de(e.responseText);t._instanceId=o.id,t._status=R.loaded,t._outlinesLocation=o.outlinesLocation,t._statusLocation=o.statusLocation,t._pageSettingsLocation=o.pageSettingsLocation,t._featuresLocation=o.featuresLocation,t._parametersLocation=o.parametersLocation,n.resolve(o)}),(function(e){n.reject(t._getError(e))})),n):n},t.prototype.cancel=function(){var e=this,n=new F;return this._checkReportInstanceController(n)?this._status!==R.rendering?(n.reject("Cannot execute cancel when the report is not rendering."),n):(this.httpRequest(this._getReportInstancesUrl(t._cancelAction),{method:"POST"}).then((function(t){var o=de(t.responseText);e._status=o.status.status,n.resolve(o)})),n):n},t.prototype.dispose=function(){var e=this,t=new F;return this._checkReportInstanceController()?(this.httpRequest(this._getReportInstancesUrl(),{method:"DELETE"}).then((function(n){e._status=R.cleared,e._instanceId="",t.resolve()})),t):t},t.prototype.getOutlines=function(){var e=new F;return this._checkReportInstanceController(e)?(this.httpRequest(this._getReportInstancesUrl(t._outlinesAction)).then((function(t){e.resolve(JSON.parse(t.responseText))})),e):e},t.prototype.getRenderToFilterUrl=function(e){var n=new F,o=null;return this._checkReportInstanceController()&&(o=ce(o=U(o=this._getReportInstancesUrl(t._exportAction)),e),n.resolve(o)),n.resolve(o),n},t.prototype.getExportedUrl=function(e){return this.getRenderToFilterUrl(e)},t.prototype.search=function(e){var n=new F;return this._checkReportInstanceController(n)?(this.httpRequest(this._getReportInstancesUrl(t._searchAction),{data:e}).then((function(e){n.resolve(JSON.parse(e.responseText))})),n):n},t.prototype.setPageSettings=function(e){var n=this,o=new F;if(!this._checkReportInstanceController(o))return o;var r=this._getReportInstancesUrl(t._pageSettingsAction);return this.httpRequest(r,{method:"PUT",data:e}).then((function(e){o.resolve(JSON.parse(e.responseText,ue))}),(function(e){o.reject(n._getError(e))})),o},t.prototype.setParameters=function(e){var n=this,r=new F;if(!this._checkReportInstanceController(r))return r;Object.keys(e).forEach((function(t){null===e[t]&&(e[t]=""),e[t]instanceof Date&&(e[t]=o.Globalize.formatDate(e[t],"yyyy/MM/dd HH:mm:ss"))}));var i=this._getReportInstancesUrl(t._parametersAction);return this.httpRequest(i,{method:"PATCH",data:e}).then((function(e){r.resolve(JSON.parse(e.responseText))}),(function(e){r.reject(n._getError(e))})),r},t.prototype.getSupportedExportDescriptions=function(){var e=new F;return this._checkReportInstanceController(e)?(this.httpRequest(this._getReportInstancesUrl(t._supportedFormatsAction)).then((function(t){e.resolve(JSON.parse(t.responseText))})),e):e},t.prototype.getFeatures=function(){var e=new F;return this._checkReportInstanceController(e)?(this.httpRequest(this._featuresLocation).then((function(t){e.resolve(JSON.parse(t.responseText))})),e):e},t._reportCommand="$report",t._instancesCommand="$instances",t._customActionParam="actionString",t._renderAction="render",t._searchAction="search",t._cancelAction="stop",t._outlinesAction="outlines",t._exportAction="export",t._parametersAction="parameters",t._bookmarkAction="bookmarks",t._pageSettingsAction="pagesettings",t._supportedFormatsAction="supportedformats",t._invalidReportControllerError="Cannot call the service without service url, document path or report name.",t._invalidReportCacheControllerError="Cannot call the service when service url is not set or the report is not loaded.",t}(ke),He=function(){function e(e,t){this._hasOutlines=!1,this._pageCount=0,this._supportedExportDescriptions=[],this._isLoadCompleted=!1,this._isInstanceCreated=!1,this._isDisposed=!1,this._errors=[],this.pageCountChanged=new o.Event,this.disposed=new o.Event,this.pageSettingsChanged=new o.Event,this.loading=new o.Event,this.loadCompleted=new o.Event,this.queryLoadingData=new o.Event,this._httpHandler=t,this._service=this._createDocumentService(e),this._paginated=e.paginated}return e.prototype.onQueryLoadingData=function(e){this.queryLoadingData.raise(this,e)},e.prototype._updateIsLoadCompleted=function(e){this._isLoadCompleted!==e&&(this._isLoadCompleted=e,e&&this.onLoadCompleted())},e.prototype._updateIsDisposed=function(e){this._isDisposed!==e&&(this._isDisposed=e,this.onDisposed())},e.prototype._getIsDisposed=function(){return this._isDisposed},e.prototype._checkHasOutlines=function(e){return e.hasOutlines},e.prototype._checkIsLoadCompleted=function(e){return e.status===R.completed||e.status===R.stopped||e.status===R.loaded},Object.defineProperty(e.prototype,"encodeRequestParams",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"executionDateTime",{get:function(){return this._executionDateTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expiredDateTime",{get:function(){return this._expiredDateTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return this._errors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoadCompleted",{get:function(){return this._isLoadCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInstanceCreated",{get:function(){return this._isInstanceCreated},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this._getIsDisposed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"features",{get:function(){return this._features},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageSettings",{get:function(){return this._pageSettings},enumerable:!0,configurable:!0}),e.prototype.onPageSettingsChanged=function(e){this.pageSettingsChanged.raise(this,e||new o.EventArgs)},e.prototype.onLoadCompleted=function(e){this.loadCompleted.raise(this,e||new o.EventArgs)},e.prototype.onLoading=function(e){this.loading.raise(this,e||new o.EventArgs)},e.prototype.onDisposed=function(e){this.disposed.raise(this,e||new o.EventArgs)},e.prototype.setPageSettings=function(e){var t=this;return this._innerService.setPageSettings(e).then((function(e){return t._updatePageSettings(e)}))},e.prototype._updatePageSettings=function(e){this._pageSettings=e,this.onPageSettingsChanged()},Object.defineProperty(e.prototype,"_innerService",{get:function(){return this._service},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paginated",{get:function(){return this.pageSettings?this.pageSettings.paginated:this._paginated},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasThumbnails",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasOutlines",{get:function(){return this._hasOutlines},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageCount",{get:function(){return this._pageCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initialPosition",{get:function(){return this._initialPosition},set:function(e){this._initialPosition=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"service",{get:function(){return this._service},enumerable:!0,configurable:!0}),e.prototype.getSupportedExportDescriptions=function(){return this._innerService.getSupportedExportDescriptions()},e.prototype.getBookmark=function(e){return this._innerService.getBookmark(e)},e.prototype.executeCustomAction=function(e){return this._innerService.executeCustomAction(e)},e.prototype.getOutlines=function(){return this._innerService.getOutlines()},e.prototype.getFeatures=function(){var e=this;return this._innerService.getFeatures().then((function(t){e._features=t}))},e.prototype.dispose=function(){var e=this;return this._innerService.dispose().then((function(){return e._updateIsDisposed(!0)}))},e.prototype.load=function(){var e=this;this.onLoading();var t={};null!=this._paginated&&(t["pageSettings.paginated"]=this.paginated);var n=new D(t);return this.onQueryLoadingData(n),this._innerService.load(n.data).then((function(t){e._updateExecutionInfo(t)}))},e.prototype._updateExecutionInfo=function(e){null!=e&&(this._executionDateTime=this._getExecutionDateTime(e),this._expiredDateTime=this._getExpiredDateTime(e),this._updatePageSettings(e.pageSettings),this._features=e.features,this._isInstanceCreated=null!=e.status&&e.status.status!==R.notFound&&e.status.status!==R.cleared,this._updateDocumentStatus(e.status))},e.prototype._updateDocumentStatus=function(e){e&&(this._errors=e.errorList,this._initialPosition=e.initialPosition,this._updatePageCount(this._getPageCount(e)),this._expiredDateTime=this._getExpiredDateTime(e),this._hasOutlines=this._checkHasOutlines(e),this._updateIsLoadCompleted(this._checkIsLoadCompleted(e)))},e.prototype._getExecutionDateTime=function(e){return e.loadedDateTime},e.prototype._getExpiredDateTime=function(e){return e.expiredDateTime},e.prototype._getPageCount=function(e){return e.pageCount},e.prototype._updatePageCount=function(e){this._pageCount!==e&&(this._pageCount=e,this.onPageCountChanged())},e.prototype.getStatus=function(){var e=this;return this._innerService.getStatus().then((function(t){e._updateDocumentStatus(t)}))},e.prototype._createDocumentService=function(t){throw e._abstractMethodException},e.prototype.onPageCountChanged=function(e){this.pageCountChanged.raise(this,e||new o.EventArgs)},e.prototype.export=function(e){var t=this;this.getExportedUrl(e).then((function(n){t._innerService.downloadBlob(n).then((function(n){var r=e.format;r.match("bmp|emf|gif|html|jpeg|jpg|png|tif|tiff")&&"application/zip"===n.type&&(r="zip"),"zip"===r&&"application/x-emf"===n.type&&(r="emf"),(0,o.saveFile)(n,t._innerService.getFileName()+"."+r)}))}))},e.prototype.print=function(e){var t=this;if((0,o.isMobile)())this.export({format:"pdf"});else{var n=new o.PrintDocument({title:"Document"});this.renderToFilter({format:"html"}).then((function(o){n.append(o.responseText),n._getDocument().close(),window.setTimeout((function(){t._removeScript(n),t._rotate(n,e),n.print()}),100)}))}},Object.defineProperty(e.prototype,"httpHandler",{get:function(){return this._httpHandler},enumerable:!0,configurable:!0}),e.prototype._removeScript=function(e){for(var t=e._getDocument().querySelectorAll("script"),n=0;n<t.length;n++){var o=t.item(n);o.parentElement.removeChild(o)}},e.prototype._rotate=function(e,t){if(t&&t.length)for(var n=e._getDocument().querySelectorAll("svg"),o=0;o<n.length;o++){var r=t[o];if(r){for(var i=n[o],a=document.createElementNS("http://www.w3.org/2000/svg","g");i.hasChildNodes();)a.appendChild(i.firstChild);i.appendChild(a);var s={width:new H(i.width.baseVal.value),height:new H(i.height.baseVal.value)},u=ne(s,r),c=i.parentNode;c.style.width=u.width.valueInPixel+"px",c.style.height=u.height.valueInPixel+"px",i.setAttribute("width",u.width.valueInPixel.toString()+"px"),i.setAttribute("height",u.height.valueInPixel.toString()+"px"),ee(n[o],s.width.valueInPixel,s.height.valueInPixel,1,r)}}},e.prototype.renderToFilter=function(e){return this._innerService.renderToFilter(e)},e.prototype.getRenderToFilterUrl=function(e){return this._innerService.getRenderToFilterUrl(e)},e.prototype.getExportedUrl=function(e,t){var n=this;void 0===t&&(t=!1);var o=new F;return this._innerService.getExportedUrl(e).then((function(e){var r=new O(e,null);t&&n.httpHandler.beforeSend(r),o.resolve(r.url)})),o},e.prototype.search=function(e){return this._innerService.search(e)},e._abstractMethodException="It is an abstract method, please implement it.",e}(),Fe=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._status=R.notFound,r.statusChanged=new o.Event,r}return s(t,e),Object.defineProperty(t.prototype,"autoRun",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasParameters",{get:function(){throw He._abstractMethodException},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},set:function(e){e!==this._status&&(this._status=e,this.onStatusChanged())},enumerable:!0,configurable:!0}),t.prototype.getParameters=function(){throw He._abstractMethodException},t.prototype.setParameters=function(e){throw He._abstractMethodException},t.prototype.render=function(){var e=this;return this._innerService.render().then((function(t){return e._updateDocumentStatus(t)}))},t.prototype.executeCustomAction=function(e){var t=this;return this._innerService.executeCustomAction(e).then((function(e){return t._updateDocumentStatus(e)}))},t.prototype.onStatusChanged=function(e){this.statusChanged.raise(this,e)},Object.defineProperty(t.prototype,"_innerService",{get:function(){return this.service},enumerable:!0,configurable:!0}),t.prototype._updateDocumentStatus=function(t){t&&(this.status=t.status),e.prototype._updateDocumentStatus.call(this,t)},t}(He),Ne=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o._hasParameters=!1,o}return s(t,e),t.getReportNames=function(e,t,n){return Oe.getReportNames(e,t,n)},t.getReports=function(e,t,n,r){return(0,o.isBoolean)(n)&&(n={recursive:n}),Oe.getReports(e,t,n,r)},Object.defineProperty(t.prototype,"reportName",{get:function(){return this._innerService?this._innerService.reportName:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasParameters",{get:function(){return this._hasParameters},enumerable:!0,configurable:!0}),t.prototype.load=function(){return e.prototype.load.call(this)},t.prototype.cancel=function(){var e=this;return this._innerService.cancel().then((function(t){return e._updateDocumentStatus(t)}))},t.prototype.dispose=function(){return e.prototype.dispose.call(this)},t.prototype.setParameters=function(e){var t=this;return this._innerService.setParameters(e).then((function(e){t._parameters=e}))},t.prototype.getParameters=function(){var e=this;return this._innerService.getParameters().then((function(t){e._parameters=t}))},t.prototype._getIsDisposed=function(){return e.prototype._getIsDisposed.call(this)||this._innerService.isCleared},t.prototype._updateExecutionInfo=function(t){null==t||this.isDisposed||(this._hasParameters=!!t.hasParameters,e.prototype._updateExecutionInfo.call(this,t))},t.prototype._checkIsLoadCompleted=function(e){return e.status===R.completed||e.status===R.stopped},t.prototype._createDocumentService=function(e){return new Oe(e,this.httpHandler)},Object.defineProperty(t.prototype,"_innerService",{get:function(){return this.service},enumerable:!0,configurable:!0}),t}(Fe),ze=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o._status=R.notFound,o}return s(t,e),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_innerService",{get:function(){return this.service},enumerable:!0,configurable:!0}),t.prototype._createDocumentService=function(e){return new Le(e,this.httpHandler)},t.prototype.load=function(){return e.prototype.load.call(this)},t.prototype._updateStatus=function(e){this._status!==e&&(this._status=e)},t.prototype.getStatus=function(){var e=this,t=new D;return this.onQueryLoadingData(t),this._innerService.getStatus(t.data).then((function(t){return e._updateDocumentStatus(t)}))},t.prototype.renderToFilter=function(e){var t=new D;return this.onQueryLoadingData(t),this._innerService.renderToFilter(e,t.data)},t.prototype._updateDocumentStatus=function(t){null!=t&&(this._updateStatus(t.status),e.prototype._updateDocumentStatus.call(this,t))},t}(He),Le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype._getPdfUrl=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return le(this.serviceUrl,this.filePath,t._pdfCommand,e)},t.prototype._getPdfStatus=function(e){var t=this,n=new F;return this._checkPdfController(n)?(this.httpRequest(this._getPdfUrl(),{data:e}).then((function(e){var o=Be(e.responseText);t._status=R.loaded,t._statusLocation=o.statusLocation,t._featuresLocation=o.featuresLocation,n.resolve(o)}),(function(e){n.reject(e.statusText)})),n):n},t.prototype._checkPdfController=function(e){return!(null==this.serviceUrl||!this.filePath)||(e&&e.reject(t._invalidPdfControllerError),!1)},t.prototype.dispose=function(){var e=new F;return e.resolve(),e},t.prototype.load=function(e){return this._getPdfStatus(e)},t.prototype.getStatus=function(e){var t=new F;return this.httpRequest(this._statusLocation,{data:e}).then((function(e){t.resolve(JSON.parse(e.responseText))})),t},t.prototype.renderToFilter=function(e,t){var n=this,o=new F;return this._checkPdfController(o)?(this.getRenderToFilterUrl(e).then((function(e){n.httpRequest(e,{data:t,cache:!0}).then((function(e){o.resolve(e)}))})),o):o},t.prototype.getRenderToFilterUrl=function(e){var n=new F,o=null;return this._checkPdfController()&&(o=ce(o=U(o=this._getPdfUrl(t._exportAction)),e)),n.resolve(o),n},t.prototype.getExportedUrl=function(e){return this.getRenderToFilterUrl(e)},t.prototype.getSupportedExportDescriptions=function(){var e=new F;return this._checkPdfController(e)?(this.httpRequest(this._getPdfUrl(t._supportedFormatsAction)).then((function(t){e.resolve(JSON.parse(t.responseText))})),e):e},t.prototype.getFeatures=function(){var e=new F;return this._checkPdfController(e)?(this.httpRequest(this._featuresLocation).then((function(t){e.resolve(JSON.parse(t.responseText))})),e):e},t.prototype.search=function(e){var n=new F;return this._checkPdfController(n)?(this.httpRequest(this._getPdfUrl(t._searchAction),{data:e}).then((function(e){n.resolve(JSON.parse(e.responseText))})),n):n},t._pdfCommand="$pdf",t._exportAction="export",t._supportedFormatsAction="supportedformats",t._searchAction="search",t._invalidPdfControllerError="Cannot call the service when service url is not set or the pdf is not loaded.",t}(Re);function Be(e){return JSON.parse(e,se)}var We=function(){function e(){this._currentIndex=-1,this.currentChanged=new o.Event,this.searchStarted=new o.Event,this.searchCompleted=new o.Event,this.resultsCleared=new o.Event,this.textChanged=new o.Event}return Object.defineProperty(e.prototype,"current",{get:function(){return this._currentIndex<0?null:this._searchResult[this._currentIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentIndex",{get:function(){return this._currentIndex},set:function(e){var t=this;e!==this._currentIndex&&this._getSearchResults().then((function(n){t._currentIndex=e,t._onCurrentChanged()}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"documentSource",{get:function(){return this._documentSource},set:function(e){this._documentSource=e,this.clear()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"matchCase",{get:function(){return this._matchCase},set:function(e){this._matchCase!==e&&(this._matchCase=e,this._clearResults())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchResult",{get:function(){return this._searchResult},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(e){this._text!==e&&(this._text=e,this._onTextChanged(),this._clearResults())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wholeWord",{get:function(){return this._wholeWord},set:function(e){this._wholeWord!==e&&(this._wholeWord=e,this._clearResults())},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._matchCase=!1,this._wholeWord=!1,this._currentIndex=-1,this.text=null},e.prototype.search=function(e){var t=this;this._getSearchResults().then((function(n){var o=t._searchResult.length;e?(t._currentIndex--,t._currentIndex<0&&(t._currentIndex=o-1)):(t._currentIndex++,t._currentIndex>=o&&(t._currentIndex=0)),t._currentIndex=Math.max(Math.min(t._currentIndex,o-1),0),t._onCurrentChanged()}))},e.prototype._clearResults=function(){this._currentIndex=-1,this._searchResult=null,this._onResultsCleared()},e.prototype._getSearchResults=function(){var e=this,t=new F;return this._searchResult?(t.resolve(this._searchResult),t):this.documentSource?null==this._text||0===this._text.length?t:(this._onSearchStarted(),this.documentSource.search({text:this.documentSource.encodeRequestParams?encodeURIComponent(this.text):this.text,matchCase:this.matchCase,wholeWord:this.wholeWord}).then((function(t){e._searchResult=t,e._onSearchCompleted()}))):(t.reject(o.culture.Viewer.cannotSearch),t)},e.prototype._onCurrentChanged=function(){this.currentChanged.raise(this)},e.prototype._onSearchStarted=function(){this.searchStarted.raise(this)},e.prototype._onSearchCompleted=function(){this.searchCompleted.raise(this)},e.prototype._onResultsCleared=function(){this.resultsCleared.raise(this)},e.prototype._onTextChanged=function(){this.textChanged.raise(this)},e}(),Ue=function(){function e(e,t,n){this._content=null,this._rotateAngle=A.NoRotate,this._pendingContent=!1,this.linkClicked=new o.Event,this._documentSource=e,this._index=t,this._size=n}return Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotateAngle",{get:function(){return this._rotateAngle},set:function(e){this._rotateAngle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pendingContent",{get:function(){return this._pendingContent},enumerable:!0,configurable:!0}),e.prototype.getContent=function(){var e=this,t=this._contentPromise;if(t&&!t.isFinished)return t;this._contentPromise=t=new F;var n=this._documentSource;return n?this._content?(t.resolve(this._content),t):(this._pendingContent=!0,n.renderToFilter({format:"html",paged:n.paginated,outputRange:(this.index+1).toString()}).then((function(o){if(e._documentSource===n){var r=document.createElement("div");r.innerHTML=e._processSvgResponse(e._addGlobalUniqueId(o.responseText));for(var i=r.querySelector("svg"),a=document.createElementNS("http://www.w3.org/2000/svg","g");i.hasChildNodes();)a.appendChild(i.firstChild);i.appendChild(a),e._size={width:new H(i.width.baseVal.value),height:new H(i.height.baseVal.value)},e._content=i,e._processActionLinks(i,(function(t){K(t,"click",(function(){e._onLinkClicked(new x(t))}))})),e._pendingContent=!1,t.resolve(e._content)}})).catch((function(){e._pendingContent=!1})),t):(t.reject(o.culture.Viewer.cannotRenderPageNoDoc),t)},e.prototype._processSvgResponse=function(e){return e},e.prototype._extractSize=function(e){if(e){var t=e.querySelector("svg");if(t)return{width:new H(t.width.baseVal.value),height:new H(t.height.baseVal.value)}}return null},e.prototype._onLinkClicked=function(e){this.linkClicked.raise(this,e)},e.prototype._processActionLinks=function(t,n){for(var o=t.querySelectorAll("a"),r=0;r<o.length;r++){var i=o.item(r),a=i.href?i.href.baseVal:"";if(a.indexOf("navigate")>0){var s=e._bookmarkReg.exec(a);s&&(s[1]&&s[1].length>0?(i.href.baseVal=e._invalidHref,i.setAttribute(e._bookmarkAttr,s[1]),n(i)):i.removeAttribute("xlink:href"))}else e._customActionReg.test(a)&&(i.href.baseVal=e._invalidHref,i.setAttribute(e._customActionAttr,a.substr(3)),n(i))}},e.prototype._addGlobalUniqueId=function(t){var n=(new Date).getTime().toString();return(t=t.replace(e._idReg,"$1$2"+n+"$3$4")).replace(e._idReferReg,"$1$2"+n+"$3$4")},e._bookmarkReg=/javascript\:navigate\(['|"](.*)['|"]\)/,e._bookmarkAttr="bookmark",e._customActionReg=/^CA\:/,e._customActionAttr="customAction",e._idReg=/(\<[^\>]+)(id=['|"])(\w+)(['|"])/g,e._idReferReg=/(\<[^\>]+)(url\(#)(\w+)(\))/g,e._invalidHref="javascript:void(0)",e}(),qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype._processSvgResponse=function(t){t=e.prototype._processSvgResponse.call(this,t);var n=(new DOMParser).parseFromString(t,"text/xml");return(new XMLSerializer).serializeToString(n)},t.prototype._processActionLinks=function(e,t){for(var n=e.querySelectorAll("rect[arsvg\\:data-action-type]"),o=0;o<n.length;o++)t(n[o])},t}(Ue),Ze=function(e){function t(t){var n,r=e.call(this,t)||this;return r._autoHeightCalculated=!1,r._startX=null,r._startY=null,r._panMode=!1,r._pageIndex=-1,r._zoomFactor=1,r._zoomMode=I.Custom,r._zoomModeUpdating=!1,r._movingPromise=new F,r.pageIndexChanged=new o.Event,r.zoomFactorChanged=new o.Event,r.zoomModeChanged=new o.Event,r.positionChanged=new o.Event,r.rotateAngleChanged=new o.Event,r.pageLoaded=new o.Event,r._zoomFactorChangeInitiated=!1,r._zoomModeChangeInitiated=!1,n=r.getTemplate(),r.applyTemplate("wj-pageview",n,r._getTemplateParts()),r._fBorderBoxMode="border-box"===getComputedStyle(t).boxSizing,r._init(),r}return s(t,e),t.prototype._getTemplateParts=function(){return{_pagesWrapper:"pages-wrapper"}},t.prototype._getPagesContainer=function(){return this.hostElement},t.prototype._init=function(){this._bindEvents()},t.prototype.dispose=function(){this._touchManager&&this._touchManager.dispose(),e.prototype.dispose.call(this)},t.prototype._bindTouchEvents=function(e){var t=this;e.touchStart.addHandler((function(){t.hostElement.focus()})),e.panMove.addHandler((function(t,n){e.hostElement.scrollTop-=n.clientDelta.y,e.hostElement.scrollLeft-=n.clientDelta.x})),e.pinch.addHandler(this._zoomByPinch,this)},t.prototype._initTouchEvents=function(){var e=this._pagesWrapper.parentElement,t=new Te(e);this._touchManager=t,this._bindTouchEvents(t)},Object.defineProperty(t.prototype,"_borderBoxMode",{get:function(){return this._fBorderBoxMode},enumerable:!0,configurable:!0}),t.prototype._zoomByPinch=function(e,t){if(t.preventDefault(),t.type==ie.Move){var n=(0,o.getElementRect)(e.contentElement),r=getComputedStyle(e.contentElement),i=parseInt(r.marginTop),a=parseInt(r.marginLeft),s=W(!1,t.preCenterClient,n.left-a,n.top-i);this._zoom(e.hostElement,t.zoom,s,t.centerClientDelta)}},t.prototype._getFixedPosition=function(e){return new o.Point(t._pageMargin,t._pageMargin+this._getAbovePageCount(e.y)*t._pageMargin)},t.prototype._getAbovePageCount=function(e){return 0},t.prototype._zoom=function(e,t,n,r){var i=W(!1,n,e.scrollLeft,e.scrollTop),a=this._getFixedPosition(n),s=this.zoomFactor;this.zoomFactor=this.zoomFactor*t;var u=this.zoomFactor/s,c=new o.Point((n.x-a.x)*u+a.x,(n.y-a.y)*u+a.y),l=W(!0,i,r),h=W(!1,c,l);e.scrollTop=Math.round(h.y),e.scrollLeft=Math.round(h.x)},Object.defineProperty(t.prototype,"pageIndex",{get:function(){return this._pageIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pages",{get:function(){return this._pages},set:function(e){this._pages=e,this._reserveViewPage()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this.hostElement.scrollTop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollLeft",{get:function(){return this.hostElement.scrollLeft},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomFactor",{get:function(){return this._zoomFactor},set:function(e){if(e=Math.round(100*Math.max(.05,Math.min(10,e)))/100,this._zoomFactor!=e){this._zoomModeChangeInitiated||(this._zoomFactorChangeInitiated=!0);var t=this._zoomFactor,n=this._zoomMode;this._zoomFactor=e,this._updatePageViewTransform(),this._zoomModeUpdating||(this._zoomFactor===Math.round(100*this._calcZoomToViewFactor())/100?this.zoomMode=I.WholePage:this._zoomFactor===Math.round(100*this._calcZoomToViewWidthFactor())/100?this.zoomMode=I.PageWidth:this.zoomMode=I.Custom),this._zoomFactorChangeInitiated&&(this._onZoomFactorChanged(t,this.zoomFactor),n!==this.zoomMode&&this._onZoomModeChanged(n,this.zoomMode),this._zoomFactorChangeInitiated=!1)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomMode",{get:function(){return this._zoomMode},set:function(e){if(this._zoomMode!=e){this._zoomModeUpdating=!0,this._zoomFactorChangeInitiated||(this._zoomModeChangeInitiated=!0);var t=this._zoomMode,n=this._zoomFactor;this._zoomMode=e,this._calcZoomModeZoom(e),this._zoomModeUpdating=!1,this._zoomModeChangeInitiated&&(this._onZoomModeChanged(t,this.zoomMode),n!==this.zoomFactor&&this._onZoomFactorChanged(n,this.zoomFactor),this._zoomModeChangeInitiated=!1)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"panMode",{get:function(){return this._panMode},set:function(e){this._panMode!=e&&(this._panMode=e)},enumerable:!0,configurable:!0}),t.prototype._bindEvents=function(){var e=this;K(document,"mousemove",(function(t){null!==e._startX&&null!==e._startY&&e._panning(t)})),K(document,"mouseup",(function(t){e._stopPanning()})),this._initTouchEvents()},t.prototype._startPanning=function(e){this._startX=e.screenX,this._startY=e.screenY},t.prototype._panning=function(e){var t=this._getPagesContainer();t.scrollLeft+=this._startX-e.screenX,t.scrollTop+=this._startY-e.screenY,this._startX=e.screenX,this._startY=e.screenY},t.prototype._stopPanning=function(){this._startX=null,this._startY=null},t.prototype._onPageIndexChanged=function(){this.pageIndexChanged.raise(this)},t.prototype._onZoomFactorChanged=function(e,t){this.zoomFactorChanged.raise(this,{oldValue:e,newValue:t})},t.prototype._onZoomModeChanged=function(e,t){this.zoomModeChanged.raise(this,{oldValue:e,newValue:t})},t.prototype._onPositionChanged=function(){this.positionChanged.raise(this)},t.prototype._onRotateAngleChanged=function(){this.rotateAngleChanged.raise(this)},t.prototype._onPageLoaded=function(e,t){this.pageLoaded.raise(this,new h(e,t))},t.prototype._renderViewPage=function(e,t,n){var r,i=this,a=new F;if(t=t<0?0:t,this._targetRenderPageIndex=t,!e)return a.reject(o.culture.Viewer.cannotRenderPageNoViewPage),a;if(q(e),this._pages[t].content){var s=this._pages[t].content;return e.appendChild(s),this._setPageTransform(e,t),a.resolve(t),a}return(r=document.createElement("div")).className="wj-loading",r.style.height=e.style.height,r.style.lineHeight=e.style.height,r.innerHTML=o.culture.Viewer.loading,e.appendChild(r),this._pages[t].pendingContent?a.resolve(t):this._pages[t].getContent().then((function(o){if(i.pages){if(n||i._targetRenderPageIndex===t){var r=o;q(e),e.appendChild(r),i._setPageTransform(e,t),i._onPageLoaded(t,e)}a.resolve(t)}})).catch((function(e){r.innerHTML=Y(e)})),a},t.prototype._reserveViewPage=function(){throw o.culture.Viewer.abstractMethodException},t.prototype._getViewPortHeight=function(){var e=this._pagesWrapper.currentStyle||window.getComputedStyle(this._pagesWrapper);return this.hostElement.offsetHeight-parseFloat(e.marginBottom)-parseFloat(e.marginTop)},t.prototype._getViewPortWidth=function(){var e=this._pagesWrapper.currentStyle||window.getComputedStyle(this._pagesWrapper);return this.hostElement.offsetWidth-parseFloat(e.marginLeft)-parseFloat(e.marginRight)},t.prototype._setPageTransform=function(e,t){var n;if(e&&!(t<0)){var o=this._getPageSize(t),r=this._pages[t].rotateAngle;e.style.height=o.height.valueInPixel*this._zoomFactor+"px",e.style.width=o.width.valueInPixel*this._zoomFactor+"px",(n=e.querySelector("g"))&&(n.parentNode.setAttribute("height",o.height.valueInPixel*this._zoomFactor+"px"),n.parentNode.setAttribute("width",o.width.valueInPixel*this._zoomFactor+"px"),ee(n.parentNode,this._pages[t].size.width.valueInPixel,this._pages[t].size.height.valueInPixel,this._zoomFactor,r))}},t.prototype._addViewPage=function(){var e=this,t=document.createElement("div");return t.className="wj-view-page",K(t,"mousedown",(function(t){e._panMode&&e._startPanning(t)})),K(t,"dragstart",(function(t){e._panMode&&t.preventDefault()})),this._pagesWrapper.appendChild(t),t},t.prototype._getPageSize=function(e){if(e<0||e>=this._pages.length)return null;var t=this._pages[e];return ne(t.size,t.rotateAngle)},t.prototype._render=function(e){throw o.culture.Viewer.abstractMethodException},t.prototype._moveToPagePosition=function(e){throw o.culture.Viewer.abstractMethodException},t.prototype._updatePageViewTransform=function(){throw o.culture.Viewer.abstractMethodException},t.prototype._updatePageIndex=function(e){this.pages&&(e=this.resolvePageIndex(e),this._pageIndex!==e&&(this._pageIndex=e,this._onPageIndexChanged()))},t.prototype.moveToPage=function(e){return this.moveToPosition({pageIndex:e})},t.prototype.resolvePageIndex=function(e){return Math.min((this.pages||[]).length-1,Math.max(e,0))},t.prototype.moveToPosition=function(e){var t=this;this._movingPromise.isFinished||this._movingPromise.cancel(),this._movingPromise=new F;var n=e.pageIndex||0,o=this.pageIndex;return!this.pages||n<0?(this._movingPromise.resolve(n),this._movingPromise):(n=this.resolvePageIndex(n),e.pageIndex=n,n!==o?(this._updatePageIndex(n),this._movingPromise=this._render(n)):this._movingPromise.resolve(n),this._movingPromise.then((function(){t.pages&&(e.samePage=n===o,t._moveToPagePosition(e))})).then((function(e){return n})).then((function(){t._calcZoomModeZoom(),t._onPositionChanged()})))},t.prototype._calcZoomModeZoom=function(e){switch(this._zoomModeUpdating=!0,e=null==e?this.zoomMode:e){case I.PageWidth:this._zoomToViewWidth();break;case I.WholePage:this._zoomToView()}this._zoomModeUpdating=!1},t.prototype._zoomToView=function(){this._getPageSize(this.pageIndex)&&(this.zoomFactor=this._calcZoomToViewFactor())},t.prototype._calcZoomToViewFactor=function(){var e=this._getViewPortHeight(),t=this._getViewPortWidth(),n=this._getPageSize(this.pageIndex);return Math.min(e/n.height.valueInPixel,t/n.width.valueInPixel)},t.prototype._zoomToViewWidth=function(){throw o.culture.Viewer.abstractMethodException},t.prototype._calcZoomToViewWidthFactor=function(){throw o.culture.Viewer.abstractMethodException},t.prototype._getTransformedPoint=function(e,t,n){t/=this.zoomFactor,n/=this.zoomFactor;var r=this.pages[e],i=r.size;switch(r.rotateAngle){case A.Rotation90:var a=t;t=i.height.valueInPixel-n,n=a;break;case A.Rotation180:t=i.height.valueInPixel-t,n=i.width.valueInPixel-n;break;case A.Rotation270:a=t,t=n,n=i.width.valueInPixel-a}return new o.Point(n,t)},t.prototype._hitTestPagePosition=function(e){if(!e||e.pageIndex<0)return null;var n=e.y,o=e.x,r=e.pageIndex;n-=t._pageMargin+t._pageBorderWidth,o-=t._pageMargin+t._pageBorderWidth;var i=this._getTransformedPoint(e.pageIndex,n,o);n=i.y,o=i.x;var a=$(n),s=$(o),u=this.pages[r].size;return{pageIndex:r,x:s,y:a,hitWorkingArea:n>=0&&n<=u.height.valueInPixel&&o>=0&&o<=u.width.valueInPixel}},t.prototype.rotatePageTo=function(e,t){this._pages[e].rotateAngle=t,this._updatePageViewTransform(),this._onRotateAngleChanged()},t.prototype.hitTest=function(e,t){if(this._pointInViewPanelClientArea(e,t)){var n=this._panelViewPntToPageView(e,t);return this._hitTestPagePosition(n)}return null},t.prototype.resetPages=function(){this._pageIndex=-1,this._pages=null,q(this._pagesWrapper),this._addViewPage(),this.invalidate()},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),this._autoHeightCalculated=!1,!this.pages||0==this.pages.length||this.pageIndex<0||this.pageIndex>=this.pages.length||(this._render(this.pageIndex),this._calcZoomModeZoom())},t.prototype.isPageContentLoaded=function(e){var t=this.pages;return!!t&&e>=0&&e<t.length&&!!t[e].content},t.prototype._hitTestPageIndex=function(e){throw o.culture.Viewer.abstractMethodException},t.prototype._pointInViewPanelClientArea=function(e,t){throw o.culture.Viewer.abstractMethodException},t.prototype._panelViewPntToPageView=function(e,t){throw o.culture.Viewer.abstractMethodException},t._pageMargin=30,t._pageBorderWidth=1,t.controlTemplate='<div class="wj-pages-wrapper" wj-part="pages-wrapper"></div>',t}(o.Control),Ke=function(e){function t(t){var n=e.call(this,t)||this;return(0,o.addClass)(t,"wj-pageview-continuous"),n}return s(t,e),t.prototype._init=function(){var t=this;e.prototype._init.call(this),K(this.hostElement,"click",(function(e){t.hostElement.focus()})),K(this.hostElement,"scroll",(function(){t._onPositionChanged(),clearTimeout(t._scrollingTimer),t._scrollingTimer=setTimeout((function(){t._ensurePageIndexPosition()}),200)})),this.zoomFactorChanged.addHandler((function(){clearTimeout(t._zoomFactorTimer),t._zoomFactorTimer=setTimeout((function(){t._ensurePageIndexPosition()}),200)}))},t.prototype.dispose=function(){clearTimeout(this._scrollingTimer),clearTimeout(this._zoomFactorTimer),this._disposeBodyStopSwipe&&this._disposeBodyStopSwipe(),e.prototype.dispose.call(this)},t.prototype._stopSwip=function(){this._swipeSpeedReducer&&this._swipeSpeedReducer.stop()},t.prototype._bindTouchEvents=function(t){var n=this;e.prototype._bindTouchEvents.call(this,t),t.touchStart.addHandler(this._stopSwip,this),t.swipe.addHandler((function(e,o){n._swipeSpeedReducer||(n._swipeSpeedReducer=new y),n._swipeSpeedReducer.start(o.speed.x,o.speed.y,(function(e,o){var r=t.hostElement.scrollLeft,i=t.hostElement.scrollTop;t.hostElement.scrollLeft-=e,t.hostElement.scrollTop-=o,r==t.hostElement.scrollLeft&&i==t.hostElement.scrollTop&&n._stopSwip()}))}));var o=new Te(document.body,!1),r=this._stopSwip.bind(this);K(document.body,"mousedown",r,!0),o.touchStart.addHandler(r),this._disposeBodyStopSwipe=function(){n._stopSwip(),J(document.body,"mousedown",r),o.touchStart.removeHandler(r),o.dispose(),n._disposeBodyStopSwipe=null}},t.prototype._getAbovePageCount=function(e){return this._hitTestPageIndex(e)},t.prototype.refresh=function(t){this._stopSwip(),e.prototype.refresh.call(this,t)},t.prototype._hitTestPageIndex=function(e){if(!this.pages)return this.pageIndex;for(var t=0,n=0;t<this.pages.length;t++)if(e<(n+=this._getPageSize(t).height.valueInPixel*this.zoomFactor+Ze._pageMargin)){if(n-e<1)continue;break}return Math.min(t,this.pages.length-1)},t.prototype._guessPageIndex=function(){return this.pages&&this.hostElement.scrollHeight-this.hostElement.clientHeight<=this.hostElement.scrollTop?this.pages.length-1:this._hitTestPageIndex(this.hostElement.scrollTop)},t.prototype._render=function(e){var n=this.pages.length,o=e-t._preFetchPageCount,r=e+t._preFetchPageCount,i=[];r=r>n-1?n-1:r;for(var a=o=o<0?0:o;a<=r;a++)i.push(this._renderViewPage(this._pagesWrapper.querySelectorAll(".wj-view-page").item(a),a,!0));return new N(i)},t.prototype._moveToPagePosition=function(e){this._stopSwip();for(var t=0,n=0,o=!e.pageBounds,r=e.pageBounds||{x:0,y:0,width:0,height:0},i=o?0:Ze._pageMargin,a=this.pages[this.pageIndex],s=0;s<e.pageIndex;s++)t+=this._getPageSize(s).height.valueInPixel*this.zoomFactor+Ze._pageMargin,this._borderBoxMode||(t+=2*Ze._pageBorderWidth);var u=te(r,a.size,o?A.NoRotate:a.rotateAngle,this.zoomFactor);t+=u.y+i+1,n+=u.x+i,n+=this._getPageViewOffsetLeft(e.pageIndex),this.hostElement.scrollTop=t,this.hostElement.scrollLeft=n},t.prototype._pointInViewPanelClientArea=function(e,t){return e>=0&&t>=0&&e<this.hostElement.clientWidth&&t<this.hostElement.clientHeight},t.prototype._panelViewPntToPageView=function(e,t){var n=this.hostElement.scrollTop+t,o=0;if(this.hostElement.scrollLeft>0)o=this.hostElement.scrollLeft+e;else{var r=this.hostElement.getBoundingClientRect();o=e-(this._pagesWrapper.getBoundingClientRect().left-r.left)+Ze._pageMargin}var i=this._hitTestPageIndex(n);if(i<0)return null;o-=this._getPageViewOffsetLeft(i);for(var a=0;a<i;a++)n-=this._getPageSize(a).height.valueInPixel*this.zoomFactor+Ze._pageMargin,this._borderBoxMode||(n-=2*Ze._pageBorderWidth);return{x:o,y:n,pageIndex:i}},t.prototype._reserveViewPage=function(){q(this._pagesWrapper);for(var e=0;e<(this.pages||[]).length;e++){var t=this._addViewPage(),n=this._getPageSize(e);t.style.height=n.height.valueInPixel*this.zoomFactor+"px",t.style.width=n.width.valueInPixel*this.zoomFactor+"px"}},t.prototype._updatePageViewTransform=function(){if(this.pages&&this.pages.length){var e;e=this._pagesWrapper.querySelectorAll(".wj-view-page");for(var t=0;t<e.length;t++)this._setPageTransform(e.item(t),t)}},t.prototype._zoomToViewWidth=function(){this.pages&&0!=this.pages.length&&(this.zoomFactor=this._calcZoomToViewWidthFactor())},t.prototype._calcZoomToViewWidthFactor=function(){for(var e=this._getViewPortHeight(),t=this._getViewPortWidth(),n=0,o=0,r=0;r<this.pages.length;r++){var i=this._getPageSize(r);i.width.valueInPixel>n&&(n=i.width.valueInPixel),o+=i.height.valueInPixel}return t/n>e/o&&(t-=w.getScrollbarWidth()),t/n},t.prototype._ensurePageIndexPosition=function(){var e=this._guessPageIndex();this.pageIndex!==e&&(this._render(e),this._updatePageIndex(e))},t.prototype._getPageViewOffsetLeft=function(e){var t=this._pagesWrapper.querySelectorAll(".wj-view-page").item(e);return t?t.offsetLeft-this._pagesWrapper.offsetLeft:0},t._preFetchPageCount=3,t}(Ze),Je=function(e){function t(t){var n=e.call(this,t)||this;return n._innerNavigating=!1,n._virtualScrollMode=!0,(0,o.addClass)(t,"wj-pageview-single"),n}return s(t,e),t.prototype._init=function(){e.prototype._init.call(this),this._initScroller(),this._initEvents()},t.prototype._initScroller=function(){var e=this;new Ee(this._vscroller).valueChanged.addHandler((function(){setTimeout((function(){return e._doScrollerValueChanged()}))}))},t.prototype._initEvents=function(){var e=this;K(this._pagesContainer,"wheel",(function(t){e._doContainerWheel(t)})),K(this._pagesContainer,"scroll",(function(t){e._doContainerScroll()})),K(this._pagesContainer,"keydown",(function(t){e._doContainerKeyDown()})),K(this._pagesContainer,"click",(function(t){e._pagesContainer.focus()}))},t.prototype._bindTouchEvents=function(t){var n=this;e.prototype._bindTouchEvents.call(this,t),t.swipe.addHandler((function(e,t){switch(t.direction){case d.Down:var o=n.resolvePageIndex(n.pageIndex-1);o!=n.pageIndex&&n.moveToPage(o);break;case d.Up:var r=n.resolvePageIndex(n.pageIndex+1);r!=n.pageIndex&&n.moveToPage(r)}}))},t.prototype._getTemplateParts=function(){return{_pagesWrapper:"pages-wrapper",_pagesContainer:"pages-container",_vscroller:"vscroller"}},t.prototype.applyTemplate=function(e,t,n){var r=this.hostElement;if((0,o.addClass)(r,e),r.appendChild(Z(t)),n)for(var i in n){var a=n[i];if(this[i]=r.querySelector('[wj-part="'+a+'"]'),null==this[i]&&r.getAttribute("wj-part")==a&&(this[i]=t),null==this[i])throw'Missing template part: "'+a+'"'}return r},Object.defineProperty(t.prototype,"virtualScrollMode",{get:function(){return this._virtualScrollMode},set:function(e){this._virtualScrollMode!==e&&(this._virtualScrollMode=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_isScrollerVisible",{get:function(){return this._virtualScrollMode&&this.pages&&this.pages.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_scroller",{get:function(){return o.Control.getControl(this._vscroller)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_hasPageVScrollBar",{get:function(){return this._hasScrollbar(this._pagesContainer)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_hasPageHScrollBar",{get:function(){return this._hasScrollbar(this._pagesContainer,!0)},enumerable:!0,configurable:!0}),t.prototype._getPagesContainer=function(){return this._pagesContainer},t.prototype._getPageHeightWithoutZoom=function(e){var t=this._pagesContainer.clientHeight,n=this._getPageSize(e).height.valueInPixel+2*Ze._pageMargin;return Math.max(n,t)},t.prototype._hasScrollbar=function(e,t){return t?e.scrollWidth>e.clientWidth:e.scrollHeight>e.clientHeight},t.prototype._updateScroller=function(){if(this._isScrollerVisible){var e=this._scroller;e.height=this._pagesContainer.clientHeight;for(var t=0,n=0;n<this.pages.length;n++)t+=this._getPageHeightWithoutZoom(n);e.max=t,this._updateScrollerValue()}},t.prototype._updateScrollerValue=function(){if(this._isScrollerVisible){var e=this.pageIndex;if(!(e<0)){var t=0;this._pagesContainer.scrollTop>0&&(t=this._pagesContainer.scrollTop/(this._pagesContainer.scrollHeight-this._pagesContainer.clientHeight));for(var n=this._scroller,o=this.pages.length,r=0,i=0;i<e;i++)r+=this._getPageHeightWithoutZoom(i);r+=this._getPageHeightWithoutZoom(e)*t,e>=o-1&&!this._hasPageVScrollBar&&(r=n.max),n.value=r}}},t.prototype._doScrollerValueChanged=function(){if(this._isScrollerVisible){for(var e=this._scroller,t=this.pages.length,n=e.value,o=0,r=1;o<t;o++){var i=this._getPageHeightWithoutZoom(o);if(!(n>i)){r=n/i;break}n-=i}o>=t&&(o=t-1),this._innerMoveToPage(o,r)}},t.prototype._doContainerWheel=function(e){if(this._isScrollerVisible&&0!=e.deltaY){var t=e.deltaY<0;if(this._hasPageVScrollBar)if(t){if(this._pagesContainer.scrollTop>0)return}else if(this._pagesContainer.scrollTop<this._pagesContainer.scrollHeight-this._pagesContainer.clientHeight)return;t?this._innerMoveToPreviousPageAtBottom(e):this._innerMoveToNextPageAtTop(e)}},t.prototype._doContainerScroll=function(){this._isScrollerVisible&&this._pagesContainer.scrollTop!=this._desiredPageScrollTop&&(this._updateScrollerValue(),this._onPositionChanged())},t.prototype._doContainerKeyDown=function(){if(this._isScrollerVisible){var e=event;if(this._hasPageVScrollBar)switch(e.keyCode){case o.Key.PageDown:this._pagesContainer.scrollTop>=this._pagesContainer.scrollHeight-this._pagesContainer.clientHeight&&this._innerMoveToNextPageAtTop(e);break;case o.Key.PageUp:0==this._pagesContainer.scrollTop&&this._innerMoveToPreviousPageAtBottom(e)}else switch(e.keyCode){case o.Key.Down:case o.Key.PageDown:this._innerMoveToNextPageAtTop(e);break;case o.Key.Up:case o.Key.PageUp:this._innerMoveToPreviousPageAtBottom(e)}}},t.prototype._preventContainerScroll=function(){this._desiredPageScrollTop=this._pagesContainer.scrollTop},t.prototype._innerMoveToPreviousPageAtBottom=function(e){this.pageIndex>0&&(e&&e.preventDefault(),this._innerMoveToPage(this.pageIndex-1,1),this._updateScrollerValue())},t.prototype._innerMoveToNextPageAtTop=function(e){this.pageIndex<this.pages.length-1&&(e&&e.preventDefault(),this._innerMoveToPage(this.pageIndex+1,0),this._updateScrollerValue())},t.prototype._innerMoveToPage=function(e,t){var n=this;this._innerNavigating=!0;var o={pageIndex:e};this.moveToPosition(o).then((function(e){n._innerMoveToPagePosition(t),n._innerNavigating=!1}))},t.prototype._innerMoveToPagePosition=function(e){if(this._hasPageVScrollBar){var t=(this._pagesContainer.scrollHeight-this._pagesContainer.clientHeight)*e;this._pagesContainer.scrollTop=t,this._preventContainerScroll()}},t.prototype.moveToPosition=function(t){var n=e.prototype.moveToPosition.call(this,t);return this._innerNavigating||this._updateScrollerValue(),n},t.prototype._moveToPagePosition=function(e){var t=e.pageBounds||{x:0,y:0,width:0,height:0},n=e.pageBounds?Ze._pageMargin:0,o=this.pages[this.pageIndex],r=te(t,o.size,o.rotateAngle,this.zoomFactor);e.samePage||(this._pagesContainer.scrollTop=r.y+n,this._pagesContainer.scrollLeft=r.x+n)},t.prototype._hitTestPageIndex=function(e){return this.pageIndex},t.prototype._pointInViewPanelClientArea=function(e,t){return e>=0&&t>=0&&e<this._pagesContainer.clientWidth&&t<this._pagesContainer.clientHeight},t.prototype._panelViewPntToPageView=function(e,t){if(this.pageIndex<0)return null;var n=this._pagesContainer.scrollTop+t,o=0;if(this._pagesContainer.scrollLeft>0)o=this._pagesContainer.scrollLeft+e;else{var r=this._pagesContainer.getBoundingClientRect();o=e-(this._pagesWrapper.getBoundingClientRect().left-r.left)+Ze._pageMargin}return{x:o,y:n,pageIndex:this.pageIndex}},t.prototype._render=function(e){return this._renderViewPage(this._pagesWrapper.querySelector(".wj-view-page"),e,!1)},t.prototype._guessPageIndex=function(){return this.pageIndex},t.prototype._reserveViewPage=function(){q(this._pagesWrapper),this._addViewPage(),this.invalidate()},t.prototype._updatePageViewTransform=function(){var e;e=this._pagesWrapper.querySelector(".wj-view-page"),this._setPageTransform(e,this.pageIndex)},t.prototype._onPageLoaded=function(t,n){e.prototype._onPageLoaded.call(this,t,n),this._updateScroller()},t.prototype._onZoomFactorChanged=function(t,n){e.prototype._onZoomFactorChanged.call(this,t,n),this._updateScroller()},t.prototype._zoomToViewWidth=function(){this._getPageSize(this.pageIndex)&&(this.zoomFactor=this._calcZoomToViewWidthFactor())},t.prototype._calcZoomToViewWidthFactor=function(){var e=this._getViewPortHeight(),t=this._getViewPortWidth(),n=this._getPageSize(this.pageIndex),o=n.height.valueInPixel,r=n.width.valueInPixel;return t/r>e/o&&(t-=w.getScrollbarWidth()),t/r},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),this._isScrollerVisible?(0,o.addClass)(this.hostElement,"virtual"):(0,o.removeClass)(this.hostElement,"virtual"),this._updateScroller()},t.controlTemplate='<div class="wj-pageview-pagescontainer" wj-part="pages-container" tabindex="0">   <div class="wj-pages-wrapper" wj-part="pages-wrapper"></div></div><div class="wj-pageview-vscroller" wj-part="vscroller" tabindex="-1"></div> ',t}(Ze),Xe=function(e){function t(t){var n,r=e.call(this,t)||this;return r._viewMode=M.Single,r.pageIndexChanged=new o.Event,r.zoomFactorChanged=new o.Event,r.zoomModeChanged=new o.Event,r.positionChanged=new o.Event,r.rotateAngleChanged=new o.Event,r.pageLoaded=new o.Event,r._handlerPageIndexChanged=function(){return r.onPageIndexChanged()},r._handlerZoomFactorChanged=function(e,t){return r.onZoomFactorChanged(t.oldValue,t.newValue)},r._handlerZoomModeChanged=function(e,t){return r.onZoomModeChanged(t.oldValue,t.newValue)},r._handlerPositionChanged=function(){return r.onPositionChanged()},r._handlerRotateAngleChanged=function(){return r.onRotateAngleChanged()},r._handlerPageLoaded=function(e,t){return r.onPageLoaded(t)},n=r.getTemplate(),r.applyTemplate("wj-viewpanel-container",n,{_singlePageView:"single-pageview",_continuousPageView:"continuous-pageview"}),r._initPageView(),r}return s(t,e),t.prototype.applyTemplate=function(e,t,n){var r=this.hostElement;if((0,o.addClass)(r,e),r.appendChild(Z(t)),n)for(var i in n){var a=n[i];if(this[i]=r.querySelector('[wj-part="'+a+'"]'),null==this[i]&&r.getAttribute("wj-part")==a&&(this[i]=t),null==this[i])throw'Missing template part: "'+a+'"'}return r},Object.defineProperty(t.prototype,"pageIndex",{get:function(){return this._activePageView.pageIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pages",{get:function(){return this._activePageView.pages},set:function(e){this._activePageView.pages=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomMode",{get:function(){return this._activePageView.zoomMode},set:function(e){this._activePageView.zoomMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomFactor",{get:function(){return this._activePageView.zoomFactor},set:function(e){this._activePageView.zoomFactor=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"panMode",{get:function(){return this._activePageView.panMode},set:function(e){this._activePageView.panMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewMode",{get:function(){return this._viewMode},set:function(e){this._viewMode!==e&&(this._viewMode=e,this._updateActivePageView())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this._activePageView.scrollTop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollLeft",{get:function(){return this._activePageView.scrollLeft},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_activePageViewElement",{get:function(){return this.viewMode===M.Single?this._singlePageView:this._continuousPageView},enumerable:!0,configurable:!0}),t.prototype.onPageIndexChanged=function(){this.pageIndexChanged.raise(this)},t.prototype.onZoomFactorChanged=function(e,t){this.zoomFactorChanged.raise(this,{oldValue:e,newValue:t})},t.prototype.onZoomModeChanged=function(e,t){this.zoomModeChanged.raise(this,{oldValue:e,newValue:t})},t.prototype.onPositionChanged=function(){this.positionChanged.raise(this)},t.prototype.onRotateAngleChanged=function(){this.rotateAngleChanged.raise(this)},t.prototype.onPageLoaded=function(e){this.pageLoaded.raise(this,e)},t.prototype._updateActivePageView=function(){var e=this._activePageView.pageIndex,t=this._activePageView.pages,n=this._activePageView.zoomFactor,r=this._activePageView.zoomMode,i=this._activePageView.panMode;this._removePageViewHandlers(this._activePageView),this._activePageView=o.Control.getControl(this._activePageViewElement),this._activePageView.pages||(this._activePageView.pages=t),this._activePageView.invalidate(),this._updatePageViewsVisible(),this._activePageView.moveToPage(e),this._activePageView.zoomFactor=n,this._activePageView.zoomMode=r,this._activePageView.panMode=i,this._addPageViewHandlers(this._activePageView)},t.prototype._initPageView=function(){this._activePageView=new Je(this._singlePageView),this._addPageViewHandlers(this._activePageView),new Ke(this._continuousPageView),this._updatePageViewsVisible()},t.prototype._addPageViewHandlers=function(e){this._activePageView.pageIndexChanged.addHandler(this._handlerPageIndexChanged),this._activePageView.zoomFactorChanged.addHandler(this._handlerZoomFactorChanged),this._activePageView.zoomModeChanged.addHandler(this._handlerZoomModeChanged),this._activePageView.positionChanged.addHandler(this._handlerPositionChanged),this._activePageView.rotateAngleChanged.addHandler(this._handlerRotateAngleChanged),this._activePageView.pageLoaded.addHandler(this._handlerPageLoaded)},t.prototype._removePageViewHandlers=function(e){e.pageIndexChanged.removeHandler(this._handlerPageIndexChanged),e.zoomFactorChanged.removeHandler(this._handlerZoomFactorChanged),e.zoomModeChanged.removeHandler(this._handlerZoomModeChanged),e.positionChanged.removeHandler(this._handlerPositionChanged),e.rotateAngleChanged.removeHandler(this._handlerRotateAngleChanged),e.pageLoaded.removeHandler(this._handlerPageLoaded)},t.prototype._updatePageViewsVisible=function(){this.viewMode===M.Single?((0,o.removeClass)(this._singlePageView,B),(0,o.hasClass)(this._continuousPageView,B)||(0,o.addClass)(this._continuousPageView,B)):((0,o.removeClass)(this._continuousPageView,B),(0,o.hasClass)(this._singlePageView,B)||(0,o.addClass)(this._singlePageView,B))},t.prototype.moveToPage=function(e){return this._activePageView.moveToPage(e)},t.prototype.moveToPosition=function(e){return this._activePageView.moveToPosition(e)},t.prototype.rotatePageTo=function(e,t){this._activePageView.rotatePageTo(e,t)},t.prototype.hitTest=function(e,t){return this._activePageView.hitTest(e,t)},t.prototype.resetPages=function(){o.Control.getControl(this._singlePageView).resetPages(),o.Control.getControl(this._continuousPageView).resetPages()},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),o.Control.getControl(this._activePageViewElement).invalidate(),this._activePageView.refresh()},t.prototype.isPageContentLoaded=function(e){return this._activePageView.isPageContentLoaded(e)},t.controlTemplate='<div class="wj-pageview" wj-part="single-pageview"></div><div class="wj-pageview" wj-part="continuous-pageview"></div>',t}(o.Control),Ge="undefined"!=typeof navigator&&null!=navigator.userAgent.match(/iPhone|iPad|iPod/i),Ye='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" xml:space="preserve">',Qe="</svg>",$e="wj-state-active",et="wj-state-disabled",tt="command-tag";function nt(){return Ge}function ot(e){var t=pt(Ye+e+Qe);(0,o.addClass)(t,"wj-svg-btn");var n=document.createElement("a");return n.appendChild(t),(0,o.addClass)(n,"wj-btn"),n.tabIndex=0,n}function rt(e,t){t?(0,o.addClass)(e,$e):(0,o.removeClass)(e,$e)}function it(e){for(var t,n,r,i,a=!0,s=0;s<e.children.length;s++)n=e.children[s],t=(0,o.hasClass)(n,"wj-separator"),r=(0,o.hasClass)(n,B),t||r?t&&(a?r||(0,o.addClass)(n,B):(r&&(0,o.removeClass)(n,B),i=n),a=!0):a=!1;a&&i&&(0,o.addClass)(i,"hidden")}function at(e,t){if(t)(0,o.addClass)(e,et);else if((0,o.removeClass)(e,et),e instanceof HTMLElement){for(var n=e.querySelectorAll("input[disabled]"),r=0;r<n.length;r++)n[r].disabled=!1;var i=e.querySelectorAll("button[disabled]");for(r=0;r<i.length;r++)i[r].disabled=!1}}function st(e){return e?{pageIndex:e.pageIndex,pageBounds:{x:e.x,y:e.y,width:0,height:0}}:{pageIndex:0,pageBounds:{x:0,y:0,width:0,height:0}}}function ut(e,t){if(e.landscape!==t){e.landscape=t;var n=e.width;e.width=e.height,e.height=n;var o=e.leftMargin;t?(e.leftMargin=e.bottomMargin,e.bottomMargin=e.rightMargin,e.rightMargin=e.topMargin,e.topMargin=o):(e.leftMargin=e.topMargin,e.topMargin=e.rightMargin,e.rightMargin=e.bottomMargin,e.bottomMargin=o)}}function ct(e,t){t?(0,o.removeClass)(e,B):(0,o.addClass)(e,B)}function lt(e){return(0,o.hasClass)(e,et)}function ht(e){return(0,o.hasClass)(e,$e)}function pt(e){return Z(e).firstChild}var dt,gt,_t,mt,ft=function(e){function t(t){var n,r=e.call(this,t)||this;return r._disposed=!1,r.svgButtonClicked=new o.Event,n=r.getTemplate(),r.applyTemplate("wj-toolbar",n,{_toolbarWrapper:"toolbar-wrapper",_toolbarContainer:"toolbar-container",_toolbarLeft:"toolbar-left",_toolbarRight:"toolbar-right"}),K(r._toolbarLeft,"mouseover",(function(){r._scrollLeft()})),K(r._toolbarLeft,"mouseout",(function(){r._clearToolbarMoveTimer()})),K(r._toolbarRight,"mouseover",(function(){r._scrollRight()})),K(r._toolbarRight,"mouseout",(function(){r._clearToolbarMoveTimer()})),r}return s(t,e),t.prototype.applyTemplate=function(e,t,n){var r=this.hostElement;if((0,o.addClass)(r,e),r.appendChild(Z(t)),n)for(var i in n){var a=n[i];if(this[i]=r.querySelector('[wj-part="'+a+'"]'),null==this[i]&&r.getAttribute("wj-part")==a&&(this[i]=t),null==this[i])throw'Missing template part: "'+a+'"'}return r},t.prototype.dispose=function(){this._disposed=!0,e.prototype.dispose.call(this)},t.prototype._clearToolbarMoveTimer=function(){null!=this._toolbarMoveTimer&&(clearTimeout(this._toolbarMoveTimer),this._toolbarMoveTimer=null)},t.prototype._scrollRight=function(){var e=this,n=this._toolbarContainer.offsetWidth-this._toolbarWrapper.offsetWidth,o=this._toolbarWrapper.style,r=(o.left?parseInt(o.left):0)-t._moveStep;this._checkMoveButtonEnabled(),r<n||(o.left=r+"px",this._toolbarMoveTimer=setTimeout((function(){return e._scrollRight()}),t._moveInterval))},t.prototype._scrollLeft=function(){var e=this,n=this._toolbarWrapper.style,o=(n.left?parseInt(n.left):0)+t._moveStep;this._checkMoveButtonEnabled(),o>0||(n.left=o+"px",this._toolbarMoveTimer=setTimeout((function(){return e._scrollLeft()}),t._moveInterval))},t.prototype._checkMoveButtonEnabled=function(){var e=this._toolbarLeft.getBoundingClientRect().width,n=this._toolbarWrapper.offsetLeft-e+t._moveStep<=0,r=(0,o.hasClass)(this._toolbarLeft,t._enabledCss);n?r||(0,o.addClass)(this._toolbarLeft,t._enabledCss):r&&(0,o.removeClass)(this._toolbarLeft,t._enabledCss);var i=this._toolbarRight.getBoundingClientRect().width,a=this._toolbarContainer.getBoundingClientRect().width-this._toolbarWrapper.getBoundingClientRect().width,s=this._toolbarWrapper.offsetLeft-i-t._moveStep>=a,u=(0,o.hasClass)(this._toolbarRight,t._enabledCss);s?u||(0,o.addClass)(this._toolbarRight,t._enabledCss):u&&(0,o.removeClass)(this._toolbarRight,t._enabledCss)},t.prototype._showToolbarMoveButton=function(e){var t=e?"visible":"hidden";this._toolbarLeft.style.visibility=t,this._toolbarRight.style.visibility=t,this._checkMoveButtonEnabled()},t.prototype._globalize=function(){},t.prototype.resetWidth=function(){var e=this._toolbarLeft.getBoundingClientRect().width,t=this._toolbarRight.getBoundingClientRect().width,n=this.hostElement.getBoundingClientRect().width;this._toolbarContainer.style.width="1500px",this._toolbarWrapper.style.width="auto";var o=this._toolbarWrapper.getBoundingClientRect().width+2;this._toolbarWrapper.style.width=o+"px",this._toolbarContainer.style.width=n-e-t+"px";var r=e+t+o>n;this._showToolbarMoveButton(r),r||(this._toolbarWrapper.style.left="0px")},t.prototype.addSeparator=function(){var e=document.createElement("span");return e.className="wj-separator",this._toolbarWrapper.appendChild(e),e},t.prototype.onSvgButtonClicked=function(e){this.svgButtonClicked.raise(this,e)},t.prototype.addCustomItem=function(e,t){(0,o.isString)(e)&&(e=pt(e)),null!=t&&e.setAttribute(tt,t.toString()),this._toolbarWrapper.appendChild(e)},t.prototype.addSvgButton=function(e,t,n,r){var i=this,a=ot(t);return a.title=e,a.setAttribute(tt,n.toString()),this._toolbarWrapper.appendChild(a),K(a,"click,keydown",(function(e){var t=e||window.event;("keydown"!==t.type||t.keyCode!==o.Key.Enter)&&"click"!==t.type||lt(a)||!r&&ht(a)||i.onSvgButtonClicked({commandTag:n})})),a},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),t&&this._globalize()},t._moveStep=4,t._moveInterval=5,t._enabledCss="enabled",t.controlTemplate='<div class="wj-toolbar-move left" wj-part="toolbar-left"><span class="wj-glyph-left"></span></div><div class="wj-toolbarcontainer" wj-part="toolbar-container"><div class="wj-toolbarwrapper wj-btn-group" wj-part="toolbar-wrapper"></div></div><div class="wj-toolbar-move right" wj-part="toolbar-right"><span class="wj-glyph-right"></span></div>',t}(o.Control),vt=function(e){function t(t,n){var o=e.call(this,t)||this;o._viewer=n,o._initToolbarItems();var r=function(){return o.isDisabled=!o._viewer._getDocumentSource()};return o._viewer._documentSourceChanged.addHandler(r),r(),o._viewer._viewerActionStatusChanged.addHandler((function(e,t){var n=t.action,r=o.hostElement.querySelector('[command-tag="'+n.actionType.toString()+'"]');rt(r,n.checked),at(r,n.disabled),ct(r,n.shown),it(o._toolbarWrapper)})),o}return s(t,e),t.prototype._initToolbarItems=function(){throw o.culture.Viewer.abstractMethodException},t.prototype.onSvgButtonClicked=function(t){e.prototype.onSvgButtonClicked.call(this,t),this._viewer._executeAction(parseInt(t.commandTag))},Object.defineProperty(t.prototype,"viewer",{get:function(){return this._viewer},enumerable:!0,configurable:!0}),t._initToolbarZoomValue=function(e,t){var n,i,a,s,u=o.Control.getControl(e),c=document.createElement("div"),l=Tt._defaultZoomValues;c.className="wj-input-zoom",u.addCustomItem(c,V.ZoomValue),(n=new r.ComboBox(c)).deferUpdate((function(){for(a=0;a<l.length;a++)for(s=a+1;s<l.length;s++)l[a].value>l[s].value&&(i=l[a],l[a]=l[s],l[s]=i);n.itemsSource=l,n.isEditable=!0,n.displayMemberPath="name",n.selectedValuePath="value",n.selectedValue=1})),n.selectedIndexChanged.addHandler((function(){if(n.isDroppedDown){var e=n.selectedValue;if(null==e){var o=n.text.replace(",","");e=parseFloat(o),isNaN(e)&&(e=100),e*=.01}t.zoomFactor=e}})),n.textChanged.addHandler((function(){var e,o=n.text;o.length>0&&(e=Tt._zoomValuesParser(o),isNaN(e)||(t.zoomFactor=.01*e))}));var h=[t.zoomFactor],p=function(e){var t,n=l.length;if(!n)return[e,e];for(var o=-1,r=0;r<n;r++)if(l[r].value>e){o=r-1;break}return-1===o?[t=l[0].value,t]:o===n-1?[t=l[o].value,t]:[l[o].value,l[o+1].value]};n.hostElement.addEventListener("wheel",(function(e){if(n.containsFocus()&&n.selectedIndex<0){var o=p(t.zoomFactor);t.zoomFactor=o[e.deltaY<0?0:1],e.preventDefault()}})),n.hostElement.addEventListener("keydown",(function(e){if(n.containsFocus())switch(e.keyCode){case o.Key.Up:l.map((function(e){return e.value})).indexOf(h[1])<0&&(t.zoomFactor=p(h[1])[0]);break;case o.Key.Down:l.map((function(e){return e.value})).indexOf(h[0])<0&&(t.zoomFactor=p(h[0])[1]);break;case o.Key.PageUp:t.zoomFactor=l[0].value;break;case o.Key.PageDown:t.zoomFactor=l[l.length-1].value}}));var d=c.querySelector(".wj-form-control");K(d,"blur",(function(e){n.text=Tt._zoomValuesFormatter(t.zoomFactor)})),K(d,"keypress",(function(e){["1","2","3","4","5","6","7","8","9","0"].indexOf(e.key)<0&&e.preventDefault()})),t.zoomFactorChanged.addHandler((function(e,o){h.push(t.zoomFactor),h.length>2&&h.splice(0,1),n.text=Tt._zoomValuesFormatter(t.zoomFactor),n.isDroppedDown=!1}))},t._initToolbarPageNumberInput=function(e,t){var n,i=o.Control.getControl(e),a=document.createElement("div"),s=document.createElement("span"),u=function(){var e=t._getDocumentSource();e&&null!=e.pageCount&&(n.value=t.pageIndex+1)},c=function(){var e=t._getDocumentSource();e&&null!=e.pageCount&&(s.innerHTML=e.pageCount.toString(),n.max=e.pageCount,n.min=Math.min(e.pageCount,1),u())},l=function(){var e=t._getDocumentSource();e&&(c(),X(t._documentEventKey,e.pageCountChanged,c),X(t._documentEventKey,e.loadCompleted,c))};a.className="wj-pagenumber",i.addCustomItem(a,V.PageNumber),(n=new r.InputNumber(a)).format="n0",K(a,"keyup",(function(e){(e||window.event).keyCode===o.Key.Enter&&t.moveToPage(n.value-1)})),K(n.inputElement,"blur",(function(e){t.moveToPage(n.value-1)})),i.addCustomItem('<span class="slash">/</span>'),s.className="wj-pagecount",i.addCustomItem(s,V.PageCountLabel),t.pageIndexChanged.addHandler(u),t._getDocumentSource()&&l(),t._documentSourceChanged.addHandler(l)},t}(ft),yt=function(e){function t(t){var n=e.call(this,t)||this;n._idCounter=0,n._tabPages=[],n._tabPageDic={},n.tabPageActived=new o.Event,n.tabPageVisibilityChanged=new o.Event,n.expanded=new o.Event,n.collapsed=new o.Event;var r=n.getTemplate();return n.applyTemplate("wj-control",r,{_headersContainer:"wj-headers",_contentsContainer:"wj-contents"}),n}return s(t,e),t.prototype.applyTemplate=function(e,t,n){var r=this.hostElement;if((0,o.addClass)(r,e),r.appendChild(Z(t)),n)for(var i in n){var a=n[i];if(this[i]=r.querySelector('[wj-part="'+a+'"]'),null==this[i]&&r.getAttribute("wj-part")==a&&(this[i]=t),null==this[i])throw'Missing template part: "'+a+'"'}return r},Object.defineProperty(t.prototype,"tabPages",{get:function(){return this._tabPages},enumerable:!0,configurable:!0}),t.prototype.getTabPage=function(e){return this._tabPageDic[e]},t.prototype.getFirstShownTabPage=function(e){var t;return this._tabPages.some((function(n){return!n.isHidden&&n!==e&&(t=n,!0)})),t},Object.defineProperty(t.prototype,"visibleTabPagesCount",{get:function(){var e=0;return this._tabPages.forEach((function(t){t.isHidden||e++})),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activedTabPage",{get:function(){var e;return this._tabPages.some((function(t){return!!t.isActived&&(e=t,!0)})),e},enumerable:!0,configurable:!0}),t.prototype.removePage=function(e){var t;if(t="string"==typeof e?this.getTabPage(e):e){var n=t.id,o=this._tabPages.indexOf(t);if(!(o<0)){if(this._tabPages.splice(o,1),this._tabPageDic[n]=void 0,!this.isCollapsed&&t.isActived){var r=this.getFirstShownTabPage();r?this.active(r):this.collapse()}this._headersContainer.removeChild(t.header),this._contentsContainer.removeChild(t.outContent)}}},t.prototype.addPage=function(e,t,n){var r=this,i=this._getNewTabPageId(),a=document.createElement("li"),s=pt('<div class="wj-tabpane"><div class="wj-tabtitle-wrapper"><h3 class="wj-tabtitle">'+e+'</h3><span class="wj-close">\xd7</span></div><div class="wj-tabcontent-wrapper"><div class="wj-tabcontent-inner"></div></div></div>'),u=ot(t);a.appendChild(u),n=null==n?this._tabPages.length:n,(n=Math.min(Math.max(n,0),this._tabPages.length))>=this._tabPages.length?(this._headersContainer.appendChild(a),this._contentsContainer.appendChild(s)):(this._headersContainer.insertBefore(a,this._tabPages[n].header),this._contentsContainer.insertBefore(s,this._tabPages[n].outContent)),K(s.querySelector(".wj-close"),"click",(function(){r.collapse()})),K(a.querySelector("a"),"click,keydown",(function(e){var t=r.getTabPage(i);t&&("keydown"===e.type&&e.keyCode===o.Key.Enter||"click"===e.type)&&r.active(t)}));var c=new wt(s,a,i);return n>=this._tabPages.length?this._tabPages.push(c):this._tabPages.splice(n,0,c),this._tabPageDic[i]=c,this.isCollapsed||this.activedTabPage||this.active(c),c},Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return(0,o.hasClass)(this.hostElement,t._collapsedCss)},enumerable:!0,configurable:!0}),t.prototype.hide=function(e){var t="string"==typeof e?this.getTabPage(e):e;t&&!(0,o.hasClass)(t.header,B)&&((0,o.addClass)(t.header,B),this.onTabPageVisibilityChanged(t),this.deactive(t))},t.prototype.show=function(e){var t="string"==typeof e?this.getTabPage(e):e;t&&(0,o.hasClass)(t.header,B)&&((0,o.removeClass)(t.header,B),this.onTabPageVisibilityChanged(t),this.isCollapsed||this.activedTabPage||this.active(t))},t.prototype.deactive=function(e){var n="string"==typeof e?this.getTabPage(e):e;if(n&&n.isActived){(0,o.removeClass)(n.outContent,t._activedCss),rt(n.header.querySelector("a"),!1);var r=this.getFirstShownTabPage(n);r?this.active(r):this.collapse()}},t.prototype.active=function(e){var n="string"==typeof e?this.getTabPage(e):e;n&&!n.isActived&&(this._clearActiveStyles(),this.show(n),(0,o.addClass)(n.outContent,t._activedCss),rt(n.header.querySelector("a"),!0),this.expand(),this.onTabPageActived())},t.prototype.enable=function(e,t){void 0===t&&(t=!0);var n="string"==typeof e?this.getTabPage(e):e;n&&n.enable(t)},t.prototype.enableAll=function(e){void 0===e&&(e=!0),this._tabPages.forEach((function(t){t.enable(e)}))},t.prototype.onTabPageActived=function(){this.tabPageActived.raise(this)},t.prototype.onTabPageVisibilityChanged=function(e){this.tabPageVisibilityChanged.raise(this,{tabPage:e})},t.prototype.onExpanded=function(){this.expanded.raise(this)},t.prototype.onCollapsed=function(){this.collapsed.raise(this)},t.prototype.collapse=function(){this.isCollapsed||(this._clearActiveStyles(),(0,o.addClass)(this.hostElement,t._collapsedCss),this.onCollapsed())},t.prototype.expand=function(){if(this.isCollapsed){if((0,o.removeClass)(this.hostElement,t._collapsedCss),!this.activedTabPage){var e=this.getFirstShownTabPage();e&&this.active(e)}this.onExpanded()}},t.prototype.toggle=function(){this.isCollapsed?this.expand():this.collapse()},t.prototype._clearActiveStyles=function(){this._tabPages.forEach((function(e){(0,o.removeClass)(e.outContent,t._activedCss),rt(e.header.querySelector("a"),!1)}))},t.prototype._getNewTabPageId=function(){for(;this._tabPageDic[(this._idCounter++).toString()];);return this._idCounter.toString()},t._activedCss="active",t._collapsedCss="collapsed",t.controlTemplate='<ul class="wj-nav wj-btn-group" wj-part="wj-headers"></ul><div class="wj-tabcontent" wj-part="wj-contents"></div>',t}(o.Control),wt=function(){function e(e,t,n){this._header=t,this._outContent=e,this._content=e.querySelector(".wj-tabcontent-inner"),this._id=n}return Object.defineProperty(e.prototype,"isActived",{get:function(){return(0,o.hasClass)(this.outContent,yt._activedCss)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHidden",{get:function(){return(0,o.hasClass)(this.header,B)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outContent",{get:function(){return this._outContent},enumerable:!0,configurable:!0}),e.prototype.enable=function(e){void 0===e&&(e=!0),(0,o.enable)(this._header,e),(0,o.enable)(this._content,e)},e.prototype.format=function(e){e(this)},e}(),bt=function(e){function t(t){var n,i=e.call(this,t)||this;i._uiUpdating=!1,(0,o.assert)(null!=r.ComboBox,"Missing dependency: _PageSetupEditor requires wijmo.input."),n=i.getTemplate(),i.applyTemplate("wj-control",n,{_divPaperKind:"div-paper-kind",_divOrientation:"div-page-orientation",_divMarginsLeft:"div-margins-left",_divMarginsRight:"div-margins-right",_divMarginsTop:"div-margins-top",_divMarginsBottom:"div-margins-bottom",_gPaperKind:"g-paperkind",_gOrientation:"g-orientation",_gMargins:"g-margins",_gLeft:"g-left",_gRight:"g-right",_gTop:"g-top",_gBottom:"g-bottom"});var a={format:"n2",min:0,max:4,step:.25,valueChanged:i._updateValue.bind(i)};return i._numMarginsLeft=new r.InputNumber(i._divMarginsLeft,a),i._numMarginsRight=new r.InputNumber(i._divMarginsRight,a),i._numMarginsTop=new r.InputNumber(i._divMarginsTop,a),i._numMarginsBottom=new r.InputNumber(i._divMarginsBottom,a),i._cmbPaperKind=new r.ComboBox(i._divPaperKind,{itemsSource:b(j),displayMemberPath:"text",selectedValuePath:"value",isEditable:!1}),i._cmbPaperKind.selectedIndexChanged.addHandler(i._updateValue,i),i._cmbOrientation=new r.ComboBox(i._divOrientation,{itemsSource:[o.culture.Viewer.portrait,o.culture.Viewer.landscape],isEditable:!1}),i._cmbOrientation.selectedIndexChanged.addHandler(i._updateValue,i),i._globalize(),i}return s(t,e),Object.defineProperty(t.prototype,"pageSettings",{get:function(){return this._pageSettings},set:function(e){var t=this._clonePageSettings(e);this._pageSettings=t,this._updateUI(),this._cmbPaperKind.focus()},enumerable:!0,configurable:!0}),t.prototype._globalize=function(){var e=o.culture.Viewer;this._gPaperKind.textContent=e.paperKind,this._gOrientation.textContent=e.orientation,this._gMargins.textContent=e.margins,this._gLeft.textContent=e.left,this._gRight.textContent=e.right,this._gTop.textContent=e.top,this._gBottom.textContent=e.bottom;var t=this._cmbOrientation.selectedIndex;this._cmbOrientation.itemsSource=[o.culture.Viewer.portrait,o.culture.Viewer.landscape],this._cmbOrientation.selectedIndex=t},t.prototype._updateValue=function(){if(!this._uiUpdating){var e=this.pageSettings;e&&(e.bottomMargin=new H(this._numMarginsBottom.value,k.Inch),e.leftMargin=new H(this._numMarginsLeft.value,k.Inch),e.rightMargin=new H(this._numMarginsRight.value,k.Inch),e.topMargin=new H(this._numMarginsTop.value,k.Inch),e.paperSize=this._cmbPaperKind.selectedValue,ut(e,this._cmbOrientation.text===o.culture.Viewer.landscape),this._updateUI())}},t.prototype._clonePageSettings=function(e){if(!e)return null;var t={};return t.height=e.height?new H(e.height):null,t.width=e.width?new H(e.width):null,t.bottomMargin=e.bottomMargin?new H(e.bottomMargin):null,t.leftMargin=e.leftMargin?new H(e.leftMargin):null,t.rightMargin=e.rightMargin?new H(e.rightMargin):null,t.topMargin=e.topMargin?new H(e.topMargin):null,t.landscape=e.landscape,t.paperSize=e.paperSize,t},t.prototype._updateUI=function(){this._uiUpdating=!0;var e=this.pageSettings,t=function(e,t){e.value=H.convertValue(t.value,t.units,k.Inch)};e&&(this._cmbPaperKind.selectedIndex=this._findIndex(this._cmbPaperKind.itemsSource,(function(t){return t.value==e.paperSize})),this._cmbOrientation.text=e.landscape?o.culture.Viewer.landscape:o.culture.Viewer.portrait,t(this._numMarginsLeft,e.leftMargin),t(this._numMarginsRight,e.rightMargin),t(this._numMarginsTop,e.topMargin),t(this._numMarginsBottom,e.bottomMargin)),this._uiUpdating=!1},t.prototype._findIndex=function(e,t){e.length;for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),t&&this._globalize()},t.controlTemplate='<div><div style="padding:12px;"><table style="table-layout:fixed"><tr><td wj-part="g-paperkind"></td><td><div wj-part="div-paper-kind"></div></td></tr><tr><td wj-part="g-orientation"></td><td><div wj-part="div-page-orientation"></div></td></tr></table><fieldset style="margin-top: 12px"><legend wj-part="g-margins"></legend><table style="table-layout:fixed"><tr><td wj-part="g-left"></td><td><div wj-part="div-margins-left"></div></td></tr><tr><td wj-part="g-right"></td><td><div wj-part="div-margins-right"></div></td></tr><tr><td wj-part="g-top"></td><td><div wj-part="div-margins-top"></div></td></tr><tr><td wj-part="g-bottom"></td><td><div wj-part="div-margins-bottom"></div></td></tr></table></fieldset></div></div>',t}(o.Control),Pt=function(e){function t(t){var n,i=e.call(this,t)||this;return i.applied=new o.Event,i.modal=!0,i.hideTrigger=r.PopupTrigger.None,n=i.getTemplate(),i.applyTemplate("wj-control wj-content",n,{_gHeader:"g-header",_pageSetupEditorElement:"pagesetup-editor",_btnApply:"btn-apply",_btnCancel:"btn-cancel",_btnClose:"a-close"}),i._pageSetupEditor=new bt(i._pageSetupEditorElement),i._globalize(),i._addEvents(),i}return s(t,e),Object.defineProperty(t.prototype,"pageSettings",{get:function(){return this._pageSetupEditor.pageSettings},enumerable:!0,configurable:!0}),t.prototype._globalize=function(){var e=o.culture.Viewer;this._gHeader.textContent=e.pageSetup,this._btnApply.textContent=e.ok,this._btnCancel.textContent=e.cancel},t.prototype._addEvents=function(){var e=this;K(e._btnClose,"click",(function(){e.hide()})),K(e._btnCancel,"click",(function(){e.hide()})),K(e._btnApply,"click",(function(){e._apply(),e.hide()}))},t.prototype._apply=function(){this.onApplied()},t.prototype.onApplied=function(){this.applied.raise(this)},t.prototype.showWithValue=function(t){this._pageSetupEditor.pageSettings=t,e.prototype.show.call(this)},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),t&&(this._globalize(),this._pageSetupEditor.refresh())},t.controlTemplate='<div><div wj-part="g-header" class="wj-dialog-header"><a class="wj-hide" wj-part="a-close" style="float:right;outline:none;text-decoration:none;padding:0px 6px" href="" tabindex="-1" draggable="false">&times;</a></div><div style="padding:12px;"><div wj-part="pagesetup-editor"></div></div><div class="wj-dialog-footer"><a wj-part="btn-apply" class="wj-hide wj-btn" tabindex="-1"></a>&nbsp;&nbsp;<a wj-part="btn-cancel" class="wj-hide wj-btn" tabindex="-1"></a></div></div>',t}(r.Popup),St=function(e){function t(t,n,o,r,i,a,s){var u=e.call(this,t)||this;return u._stopOnClientOut=r,u._css=i,u._activeCss=a,u._visibleCss=s,u._pageView=o,u._viewPanelContainer=n,u._initElement(),u._bindEvents(),u}return s(t,e),t.prototype.activate=function(){this._isActive||(this._isActive=!0,(0,o.addClass)(this._viewPanelContainer,this._activeCss))},t.prototype.deactivate=function(){this._isActive&&(this._isActive=!1,(0,o.removeClass)(this._viewPanelContainer,this._activeCss))},t.prototype.reset=function(){this._innerStop(null)},Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startPnt",{get:function(){return this._startPnt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageView",{get:function(){return this._pageView},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewPanelContainer",{get:function(){return this._viewPanelContainer},enumerable:!0,configurable:!0}),t.prototype._initElement=function(){this.applyTemplate(this._css,this.getTemplate(),this._getTemplateParts()),this._viewPanelContainer.appendChild(this.hostElement)},t.prototype._innerStop=function(e){try{this._stop(e)}finally{this._isStarted=!1,this._startPnt=null}},t.prototype._getTemplateParts=function(){return null},t.prototype._onMouseDown=function(e){var t=this._toClientPoint(e),n=this._testPageWorkingAreaHit(t);n&&this.pageView.isPageContentLoaded(n.pageIndex)&&(void 0!==window.getSelection&&getSelection().removeAllRanges(),this._isStarted=!0,this._startPnt=t,this._start(n))},t.prototype._onMouseMove=function(e){if(this._isStarted){var t=this._toClientPoint(e),n=this._testPageWorkingAreaHit(t);n&&this.pageView.isPageContentLoaded(n.pageIndex)?this._move(t,n):this._stopOnClientOut&&this._stop(t)}},t.prototype._onMouseUp=function(e){this._isStarted&&this._innerStop(this._toClientPoint(e))},t.prototype._start=function(e){(0,o.addClass)(this.hostElement,this._visibleCss)},t.prototype._move=function(e,t){},t.prototype._stop=function(e){(0,o.removeClass)(this.hostElement,this._visibleCss)},t.prototype._bindEvents=function(){var e=this;this.addEventListener(this._viewPanelContainer,"mousedown",(function(t){e._isActive&&e._onMouseDown(t)})),this.addEventListener(this._viewPanelContainer,"mousemove",(function(t){e._isActive&&e._onMouseMove(t)})),this.addEventListener(document,"mouseup",(function(t){e._isActive&&e._onMouseUp(t)}))},t.prototype._toClientPoint=function(e){var t=this._viewPanelContainer.getBoundingClientRect();return new o.Point(e.clientX-t.left,e.clientY-t.top)},t.prototype._testPageWorkingAreaHit=function(e){var t=this._pageView.hitTest(e.x,e.y);return t&&t.hitWorkingArea?t:null},t}(o.Control),Ct=function(e){function t(t,n,r){var i=e.call(this,t,n,r,!1,"wj-rubberband","rubberband-actived","show")||this;return i.applied=new o.Event,i}return s(t,e),t.prototype._start=function(t){e.prototype._start.call(this,t),this.hostElement.style.left=this.startPnt.x+"px",this.hostElement.style.top=this.startPnt.y+"px"},t.prototype._move=function(e,t){this.startPnt&&(this.viewPanelContainer.getBoundingClientRect(),this.hostElement.style.width=e.x-this.startPnt.x+"px",this.hostElement.style.height=e.y-this.startPnt.y+"px")},t.prototype._stop=function(t){if(t){var n=this.hostElement.getBoundingClientRect();n.width>5&&n.height>5&&this._onApplied(new C(new o.Rect(this.startPnt.x,this.startPnt.y,n.width,n.height)))}this.hostElement.style.width="0px",this.hostElement.style.height="0px",e.prototype._stop.call(this,t)},t.prototype._onApplied=function(e){this.applied.raise(this,e)},t}(St),xt=function(e){function t(t,n,o){var r=e.call(this,t,n,o,!0,"wj-magnifier","magnifier-actived","show")||this;return r._Magnification=2,r._currentPageIndex=-1,r}return s(t,e),t.prototype.deactivate=function(){e.prototype.deactivate.call(this),this._currentPageIndex=-1},t.prototype.reset=function(){e.prototype.reset.call(this),this._currentPageIndex=-1},t.prototype._getTemplateParts=function(){return{_viewPageDiv:"view-page-div"}},t.prototype._bindEvents=function(){var t=this;e.prototype._bindEvents.call(this);var n=function(){if(!(t._currentPageIndex<0)){var e=t.pageView.pages[t._currentPageIndex],n=ne(e.size,e.rotateAngle),o=t._viewPageDiv.querySelector("svg");t._viewPageDiv.style.height=n.height.valueInPixel*t.pageView.zoomFactor*t._Magnification+"px",t._viewPageDiv.style.width=n.width.valueInPixel*t.pageView.zoomFactor*t._Magnification+"px",o.setAttribute("width",t._viewPageDiv.style.width),o.setAttribute("height",t._viewPageDiv.style.height),ee(o,e.size.width.valueInPixel,e.size.height.valueInPixel,t._Magnification*t.pageView.zoomFactor,e.rotateAngle)}};this.pageView.zoomFactorChanged.addHandler((function(){n()})),this.pageView.rotateAngleChanged.addHandler((function(){n()}))},t.prototype._start=function(t){e.prototype._start.call(this,t),this._showMagnifer(this.startPnt,t)},t.prototype._move=function(e,t){this._showMagnifer(e,t)},t.prototype._showMagnifer=function(e,t){var n=this.hostElement.getBoundingClientRect(),o=st(t);this.hostElement.style.left=e.x-n.width/2+"px",this.hostElement.style.top=e.y-n.height/2+"px",this._fillPage(o),this._showHitPosition(o)},t.prototype._fillPage=function(e){var t=this;e.pageIndex!==this._currentPageIndex&&(this._currentPageIndex=e.pageIndex,this.pageView.pages[this._currentPageIndex].getContent().then((function(e){var n=e.cloneNode(!0);t._viewPageDiv.innerHTML="",t._viewPageDiv.appendChild(n),n.setAttribute("width",new H(n.getAttribute("width")).valueInPixel*t._Magnification+"px"),n.setAttribute("height",new H(n.getAttribute("height")).valueInPixel*t._Magnification+"px");var o=t.pageView.pages[t._currentPageIndex].size;ee(n,o.width.valueInPixel,o.height.valueInPixel,t._Magnification*t.pageView.zoomFactor,t.pageView.pages[t._currentPageIndex].rotateAngle),t._viewPageDiv.style.width=n.getAttribute("width"),t._viewPageDiv.style.height=n.getAttribute("height")})))},t.prototype._showHitPosition=function(e){var t=this.hostElement.getBoundingClientRect(),n=this.pageView.pages[this._currentPageIndex],o=te(e.pageBounds,n.size,n.rotateAngle,this.pageView.zoomFactor);this._viewPageDiv.style.left=-o.x*this._Magnification+t.width/2+"px",this._viewPageDiv.style.top=-o.y*this._Magnification+t.height/2+"px"},t.controlTemplate='<div wj-part="view-page-div" class="wj-view-page"></div>',t}(St),Tt=function(e){function t(t,n){var r=e.call(this,t,n,!0)||this;return r._pages=[],r._pageIndex=0,r._mouseMode=E.SelectTool,r._viewMode=M.Single,r._needBind=!1,r._historyManager=new De,r._fullScreen=!1,r._miniToolbarPinnedTimer=null,r._autoHeightCalculated=!1,r._searchManager=new We,r._thresholdWidth=767,r._historyMoving=!1,r._prohibitAddHistory=!1,r._initialScroll=!1,r._pageMoving=!1,r._devicePixelRatio=window.devicePixelRatio,r._documentSourceChanged=new o.Event,r.pageIndexChanged=new o.Event,r.viewModeChanged=new o.Event,r.mouseModeChanged=new o.Event,r.fullScreenChanged=new o.Event,r.zoomFactorChanged=new o.Event,r.zoomModeChanged=new o.Event,r.queryLoadingData=new o.Event,r.beforeSendRequest=new o.Event,r.pageLoaded=new o.Event,r._viewerActionStatusChanged=new o.Event,r._documentEventKey=(new Date).getTime().toString(),r._init(n),r}return s(t,e),t.prototype._getProductInfo=function(){return"QNI5,ViewerBase"},Object.defineProperty(t.prototype,"serviceUrl",{get:function(){return this._serviceUrl},set:function(e){e!=this._serviceUrl&&(this._serviceUrl=e,this._needBindDocumentSource(),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filePath",{get:function(){return this._filePath},set:function(e){e!=this._filePath&&(this._filePath=e,this._needBindDocumentSource(),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"requestHeaders",{get:function(){return this._requestHeaders},set:function(e){this._requestHeaders=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thresholdWidth",{get:function(){return this._thresholdWidth},set:function(e){e!=this._thresholdWidth&&(this._thresholdWidth=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_innerPaginated",{get:function(){return this._documentSource&&!this._needBind?this._documentSource.paginated:this._paginated},set:function(e){this._documentSource&&!this._needBind?this._setPaginated(e):this._paginated=null==e?null:(0,o.asBoolean)(e),this._setViewerAction(V.TogglePaginated,!0)},enumerable:!0,configurable:!0}),t.prototype._setTabOrder=function(t){e.prototype._setTabOrder.call(this,t),this._updateInnerElementsTabIndex()},t.prototype._setIsDisabled=function(e){if((e=(0,o.asBoolean)(e,!0))!=this.isDisabled){var t=this._e;t&&((0,o.enable)(t,!e),t.tabIndex=this.isDisabled||t.querySelector("input")?-1:this._orgTabIndex,this._updateInnerElementsTabIndex())}},t.prototype._updateInnerElementsTabIndex=function(){for(var e=this.isDisabled?-1:this._orgTabIndex,t=this._e.querySelectorAll("input, [tabindex], .wj-pageview"),n=0;n<t.length;n++)t[n].tabIndex=e},t.prototype.invalidate=function(n){void 0===n&&(n=!0),e.prototype.invalidate.call(this,n),t._exportItems=null,this._updateExportTab()},t.prototype.reload=function(){this._needBindDocumentSource(),this.invalidate()},t.prototype.refresh=function(n){if(void 0===n&&(n=!0),e.prototype.refresh.call(this,n),this._needBind&&(this._setDocumentSource(this._getSource()),this._needBind=!1),n){var r=o.Control.getControl(this._toolbar);r&&r.refresh();var i=o.Control.getControl(this._miniToolbar);i&&i.refresh();var a=o.Control.getControl(this._mobileToolbar);a&&a.refresh();var s=o.Control.getControl(this._zoomBar);s&&s.refresh();var u=o.Control.getControl(this._searchBar);u&&u.refresh(),this._hamburgerMenu&&this._hamburgerMenu.refresh(),this._viewMenu&&this._viewMenu.refresh(),this._searchOptionsMenu&&this._searchOptionsMenu.refresh(),t._exportItems=null,this._updateExportTab(!0),this._globalize(),this._updateLayout()}this._resetMiniToolbarPosition(),this._resetToolbarWidth(),this._resetViewPanelContainerWidth(),this._autoHeightCalculated=!1},t.prototype._updateLayout=function(){this._switchTemplate(this._isMobileTemplate())},t.prototype._switchTemplate=function(e){var t=this.hostElement.querySelector(".wj-viewer-outer"),n=o.Control.getControl(this._sidePanel),r=n.getTabPage(this._pageSetupPageId);e?((0,o.addClass)(t,"mobile"),n.show(r)):((0,o.removeClass)(t,"mobile"),n.hide(r))},t.prototype._getSource=function(){return this.filePath?new He({serviceUrl:this._serviceUrl,filePath:this._filePath},this):null},t.prototype._needBindDocumentSource=function(){this._needBind=!0},t.prototype._supportsPageSettingActions=function(){return!1},t.prototype._isMobileTemplate=function(){return this.thresholdWidth>this.hostElement.getBoundingClientRect().width},t.prototype._init=function(e){var t=this;this._createChildren(),this._autoCalculateHeight(),this._resetToolbarWidth(),this._resetViewPanelContainerWidth(),this._bindEvents(),this._initTools(),this.deferUpdate((function(){t.initialize(e)}))},t.prototype._initTools=function(){var e=this;this._rubberband=new Ct(document.createElement("div"),this._viewpanelContainer,this._pageView),this._rubberband.applied.addHandler((function(t,n){var o=n.rect,r=e._pageView.hitTest(o.left,o.top),i=e._viewpanelContainer.getBoundingClientRect();o.width>o.height?e._pageView.zoomFactor*=i.width/o.width:e._pageView.zoomFactor*=i.height/o.height,e._pageView.moveToPosition(st(r))})),this._magnifier=new xt(document.createElement("div"),this._viewpanelContainer,this._pageView)},t.prototype._globalize=function(){var e=o.culture.Viewer;this._gSearchTitle.textContent=e.search,this._gMatchCase.innerHTML="&nbsp;&nbsp;&nbsp;"+e.matchCase,this._gWholeWord.innerHTML="&nbsp;&nbsp;&nbsp;"+e.wholeWord,this._gSearchResults.textContent=e.searchResults,this._gThumbnailsTitle.textContent=e.thumbnails,this._gOutlinesTitle.textContent=e.outlines,this._gPageSetupTitle.textContent=e.pageSetup,this._gPageSetupApplyBtn.textContent=e.ok,this._gExportsPageTitle.textContent=e.exports,this._gExportsPageApplyBtn.textContent=e.exportOk,this._gExportFormatTitle.textContent=e.exportFormat},t.prototype._autoCalculateHeight=function(){if(this._shouldAutoHeight()){var e=this._viewpanelContainer.style.height;this._viewpanelContainer.style.height="100%",this._viewerContainer.style.height=Math.max(this._viewpanelContainer.getBoundingClientRect().height,t._viewpanelContainerMinHeight)+"px",this._viewpanelContainer.style.height=e}},t.prototype._bindEvents=function(){var e=this;K(window,"unload",(function(){e._documentSource&&e._documentSource.dispose()})),K(window,"resize",(function(){var t=window.devicePixelRatio;e._devicePixelRatio!==t&&(e._devicePixelRatio=t,e._resetViewPanelContainerWidth())})),K(document,"mousemove",(function(t){if(e.fullScreen&&e._miniToolbar){var n=e._checkMiniToolbarVisible(t);null!=e._miniToolbarPinnedTimer&&n?(clearTimeout(e._miniToolbarPinnedTimer),e._miniToolbarPinnedTimer=null,e._showMiniToolbar(n)):null==e._miniToolbarPinnedTimer&&e._showMiniToolbar(n)}})),K(document,"keydown",(function(t){t.keyCode===o.Key.Escape&&(e.fullScreen=!1)})),this._historyManager.statusChanged.addHandler(this._onHistoryManagerStatusUpdated,this),this._onHistoryManagerStatusUpdated(),this._pageView.pageIndexChanged.addHandler((function(){e._initialScroll?e._initialScroll=!1:e._addHistory(!1,!0),e._updatePageIndex(e._pageView.pageIndex)})),this._pageView.zoomFactorChanged.addHandler((function(t,n){e.zoomMode===I.Custom&&e._addHistory(!1,!0,{zoomFactor:n.oldValue}),e.onZoomFactorChanged(n)})),this._pageView.zoomModeChanged.addHandler((function(t,n){e._addHistory(!1,!0,{zoomMode:n.oldValue}),e.onZoomModeChanged(n)})),this.viewModeChanged.addHandler((function(t,n){e._addHistory(!1,!0,{viewMode:n.oldValue,zoomMode:e.zoomMode,zoomFactor:e.zoomFactor},!0)}));var n=null,r=null;this._pageView.positionChanged.addHandler((function(){e._pageMoving||(n||(r=e._pageIndex),clearTimeout(n),n=setTimeout((function(){r!==e._pageIndex?e._addHistory(!1,!0):e._updateHistoryCurrent(!0),n=null}),t._historyTimeout))})),this._pageView.pageLoaded.addHandler((function(t,n){e.onPageLoaded(n)}))},t.prototype._checkMiniToolbarVisible=function(e){var t=e.clientX,n=e.clientY,o=this._miniToolbar.getBoundingClientRect(),r=o.left-60,i=o.right+60,a=o.top-60,s=o.bottom+60;return t>=r&&t<=i&&n>=a&&n<=s},t.prototype._showMiniToolbar=function(e){var t,n=parseFloat(getComputedStyle(this._miniToolbar,"").opacity),o=this._miniToolbar;t=e?setInterval((function(){n>=.8?window.clearInterval(t):(n+=.01,o.style.opacity=n.toString())}),1):setInterval((function(){n<0?window.clearInterval(t):(n-=.01,o.style.opacity=n.toString())}),1)},t.prototype._goToBookmark=function(e){var t=this;this._documentSource&&e.data&&this._documentSource.getBookmark(e.data).then((function(e){e&&t._scrollToPosition(e,!0)}))},t.prototype._executeCustomAction=function(e){var t=this;if(this._documentSource&&e.data){this._initialPosition={pageIndex:this._pageIndex,pageBounds:{x:0,y:0,width:0,height:0}},this._resetDocument(),this._showViewPanelMessage(),this._setDocumentRendering();var n=this._documentSource;this._documentSource.executeCustomAction(e).then((function(e){t._initialPosition=e||t._initialPosition,t._getStatusUtilCompleted(n)})).catch((function(e){t._showViewPanelErrorMessage(Y(e))}))}},t.prototype._getStatusUtilCompleted=function(e){var t=this;!e||e.isLoadCompleted||e.isDisposed||e.getStatus().then((function(n){t._documentSource===e&&setTimeout((function(){return t._getStatusUtilCompleted(e)}),e._innerService.getPingTimeout())})).catch((function(e){t._showViewPanelErrorMessage(e)}))},t.prototype._initChildren=function(){this._initPageView(),this._initToolbar(),this._initSidePanel(),this._initSplitter(),this._initFooter(),this._initSearchBar(),this._initMiniToolbar()},t.prototype._initSearchBar=function(){new Dt(this._searchBar,this),this._showSearchBar(!1)},t.prototype._showSearchBar=function(e){var t=this.hostElement.querySelector(".wj-viewer-outer");e?((0,o.removeClass)(this._searchBar,B),(0,o.addClass)(t,"with-searchbar")):((0,o.addClass)(this._searchBar,B),(0,o.removeClass)(t,"with-searchbar"))},t.prototype._initFooter=function(){var e=this;new At(this._zoomBar,this),K(this._footer.querySelector(".wj-close"),"click",(function(){e._showFooter(!1)}))},t.prototype._showFooter=function(e){var t=this.hostElement.querySelector(".wj-viewer-outer");e?((0,o.removeClass)(this._footer,B),(0,o.addClass)(t,"with-footer")):((0,o.addClass)(this._footer,B),(0,o.removeClass)(t,"with-footer")),this._pageView.refresh()},t.prototype._createChildren=function(){var e=this.getTemplate();this.applyTemplate("wj-viewer wj-control",e,{_viewpanelContainer:"viewpanel-container",_toolbar:"toolbar",_mobileToolbar:"mobile-toolbar",_miniToolbar:"mini-toolbar",_leftPanel:"viewer-left-panel",_sidePanel:"side-panel",_viewerContainer:"viewer-container",_splitter:"splitter",_footer:"viewer-footer",_zoomBar:"zoom-bar",_searchBar:"search-bar"}),this._initChildren()},t.prototype._initPageView=function(){new Xe(this._viewpanelContainer).viewMode=this.viewMode},Object.defineProperty(t.prototype,"_pageView",{get:function(){return o.Control.getControl(this._viewpanelContainer)},enumerable:!0,configurable:!0}),t.prototype._initSplitter=function(){var e=this;K(this._splitter,"click",(function(){return e._toggleSplitter()}))},t.prototype._toggleSplitter=function(e){var t=this._splitter.querySelector("span"),n=o.Control.getControl(this._sidePanel);if(!0===e){if((0,o.hasClass)(t,"wj-glyph-right"))return}else if(!1===e){if((0,o.hasClass)(t,"wj-glyph-left"))return}else e=(0,o.hasClass)(t,"wj-glyph-left");if(e)n.collapse(),t.className="wj-glyph-right";else{if(0===n.visibleTabPagesCount)return;t.className="wj-glyph-left",n.expand()}this._resetViewPanelContainerWidth()},t.prototype._resetMiniToolbarPosition=function(){if(this._miniToolbar){var e=this.hostElement.getBoundingClientRect().width,t=this._miniToolbar.getBoundingClientRect().width;this._miniToolbar.style.left=(e-t)/2+"px"}},t.prototype._resetToolbarWidth=function(){o.Control.getControl(this._toolbar).resetWidth()},t.prototype._resetViewPanelContainerWidth=function(){!this._isMobileTemplate()&&this.hostElement.getBoundingClientRect().width<=t._narrowWidthThreshold?(0,o.addClass)(this.hostElement,t._narrowCss):(0,o.removeClass)(this.hostElement,t._narrowCss);var e=this._splitter?this._splitter.getBoundingClientRect().width:0,n=this._leftPanel?this._leftPanel.getBoundingClientRect().width:0;this._viewpanelContainer.style.width=this._viewerContainer.getBoundingClientRect().width-e-n+"px",this._pageView.invalidate()},t.prototype._shouldAutoHeight=function(){return("100%"===this.hostElement.style.height||"auto"===this.hostElement.style.height)&&!this.fullScreen},t.prototype._initSidePanel=function(){var e=this,t=new yt(this._sidePanel);t.collapse(),t.collapsed.addHandler((function(){e._toggleSplitter(!0)})),t.expanded.addHandler((function(){e._toggleSplitter(!1);var t=e._splitter?e._splitter.getBoundingClientRect().width:0;e._sidePanel.getBoundingClientRect().width+t>e._viewerContainer.getBoundingClientRect().width&&(0,o.addClass)(e._sidePanel,"collapsed")})),t.tabPageVisibilityChanged.addHandler((function(n,o){(!o.tabPage.isHidden&&1==t.visibleTabPagesCount||o.tabPage.isHidden&&0==t.visibleTabPagesCount)&&e._resetViewPanelContainerWidth()})),this._initSidePanelThumbnails(),this._initSidePanelOutlines(),this._initSidePanelSearch(),this._initSidePanelExports(),this._initSidePanelPageSetup()},t.prototype._clearPreHightLights=function(){this._pages.forEach((function(e){var t;if(e.content){t=e.content.querySelectorAll(".highlight");for(var n=0;n<t.length;n++)t.item(n).parentNode.removeChild(t.item(n))}}))},t.prototype._highlightPosition=function(e,t){var n,o=this,r=(this._pageIndex,this._pageView.scrollTop,this._pageView.scrollLeft,{pageIndex:e,pageBounds:t.length>0?t[0]:null});this._scrollToPosition(r,!0).then((function(e){o._clearPreHightLights(),o._pages[o.pageIndex].getContent().then((function(e){n=e.querySelector("g");for(var o=0;o<t.length;o++){var r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttributeNS(null,"x",Q(t[o].x).toString()),r.setAttributeNS(null,"y",Q(t[o].y).toString()),r.setAttributeNS(null,"height",Q(t[o].height).toString()),r.setAttributeNS(null,"width",Q(t[o].width).toString()),r.setAttributeNS(null,"class","highlight"),n.appendChild(r)}}))}))},t.prototype._scrollToPosition=function(e,t){return!0===t&&this._addHistory(!0,!1),e.pageIndex=e.pageIndex||0,this._pageView.moveToPosition(e)},t.prototype._initSidePanelSearch=function(){var e=this,t=o.Control.getControl(this._sidePanel),n=t.addPage(o.culture.Viewer.search,l.search);this._gSearchTitle=n.outContent.querySelector(".wj-tabtitle");var i=function(e){return e.outContent.querySelectorAll('input[type="checkbox"]')},a=function(e){return e.outContent.querySelectorAll('input[type="text"]')};t.tabPageActived.addHandler((function(t){if(t.activedTabPage===n){var o=i(n);o[0].checked=e._searchManager.matchCase,o[1].checked=e._searchManager.wholeWord,a(n)[0].value=e._searchManager.text}})),n.format((function(s){var u=Z('<div class="wj-searchcontainer"><input class="wj-searchbox" wj-part="search-box" type="text"/><div class="wj-btn-group"><button class="wj-btn wj-btn-searchpre">'+ot(l.searchPrevious).innerHTML+'</button><button class="wj-btn wj-btn-searchnext">'+ot(l.searchNext).innerHTML+'</button></div></div><div class="wj-searchoption"><label><span wj-part="g-matchCase">&nbsp;&nbsp;&nbsp;'+o.culture.Viewer.matchCase+'</span><input type="checkbox" wj-part="match-case" /></label></div><div class="wj-searchoption"><label><span wj-part="g-wholeWord">&nbsp;&nbsp;&nbsp;'+o.culture.Viewer.wholeWord+'</span><input type="checkbox" wj-part="whole-word" /></label></div><h3 wj-part="g-searchResults" class="wj-searchresult">'+o.culture.Viewer.searchResults+"</h3>");e._gMatchCase=u.querySelector('[wj-part="g-matchCase"]'),e._gWholeWord=u.querySelector('[wj-part="g-wholeWord"]'),e._gSearchResults=u.querySelector('[wj-part="g-searchResults"]'),s.outContent.querySelector(".wj-tabtitle-wrapper").appendChild(u);var c=i(s),h=c[0],p=c[1],d=a(s)[0],g=s.outContent.querySelector(".wj-btn-searchpre"),_=s.outContent.querySelector(".wj-btn-searchnext");(0,o.addClass)(s.content.parentElement,"search-wrapper"),(0,o.addClass)(s.content,"wj-searchresultlist");var m=new r.ListBox(s.content),f=!1,v=!1;m.formatItem.addHandler((function(e,t){var n=t.item,r=t.data,i=document.createElement("div"),a=document.createElement("div");n.innerHTML="",a.innerHTML=r.nearText,a.className="wj-search-text",i.innerHTML="Page "+(r.pageIndex+1),i.className="wj-search-page",(0,o.addClass)(n,"wj-search-item"),n.setAttribute("tabIndex","-1"),n.appendChild(a),n.appendChild(i)})),m.selectedIndexChanged.addHandler((function(){return e._searchManager.currentIndex=m.selectedIndex}));var y=function(e){void 0===e&&(e=!0);for(var t=n.outContent.querySelectorAll("input"),o=0;o<t.length;o++)t.item(o).disabled=!e},w=n.outContent.querySelectorAll("input[type=text]")[0];e._searchManager.searchStarted.addHandler((function(){w&&w.value!==e._searchManager.text&&(w.value=e._searchManager.text),y(!1)})),e._searchManager.searchCompleted.addHandler((function(){f=!0,e._clearPreHightLights(),m.itemsSource=e._searchManager.searchResult,f=!1,y(!0),e._updateHistoryCurrent()})),e._searchManager.currentChanged.addHandler((function(){if(!f&&!v){var t=e._searchManager.current;t&&(v=!0,m.selectedIndex=e._searchManager.currentIndex,e._highlightPosition(t.pageIndex,t.boundsList),v=!1)}})),e._searchManager.resultsCleared.addHandler((function(){m.itemsSource=null,e._clearPreHightLights()}));var b=function(){e._searchManager.clear(),m.itemsSource=null,h.checked=!1,p.checked=!1,d.value="",e._documentSource&&e._documentSource.features&&(!e._documentSource.paginated||e._documentSource.features.textSearchInPaginatedMode)?t.show(s):t.hide(s)};e._documentSourceChanged.addHandler((function(){e._documentSource&&X(e._documentEventKey,e._documentSource.loadCompleted,b),b()})),K(h,"click",(function(){e._searchManager.matchCase=h.checked})),K(p,"click",(function(){e._searchManager.wholeWord=p.checked})),K(d,"input",(function(){e._searchManager.text=d.value})),K(d,"keyup",(function(t){var n=t||window.event;n.keyCode===o.Key.Enter&&e._searchManager.search(n.shiftKey)})),K(_,"click",(function(){return e._searchManager.search()})),K(g,"click",(function(){return e._searchManager.search(!0)})),K(s.header,"keydown",(function(t){var n,r=e._toolbar;t.keyCode===o.Key.Tab&&(n=r.querySelector("[tabIndex=0]")||r.querySelector('input:not([type="hidden"])')||r)&&n.focus&&(n.focus(),t.preventDefault())}))}))},t.prototype._initSidePanelOutlines=function(){var e=this,t=o.Control.getControl(this._sidePanel),n=t.addPage(o.culture.Viewer.outlines,l.outlines);this._gOutlinesTitle=n.outContent.querySelector(".wj-tabtitle"),this._outlinesPageId=n.id,n.format((function(n){(0,o.addClass)(n.content,"wj-outlines-tree");var r=new i.FlexGrid(n.content);r.initialize({autoGenerateColumns:!1,columns:[{binding:"caption",width:"*"}],isReadOnly:!0,childItemsPath:"children",allowResizing:i.AllowResizing.None,headersVisibility:i.HeadersVisibility.None}),r.itemFormatter=function(e,t,n,o){var r;r=o.firstElementChild?o.firstElementChild.outerHTML:"&nbsp;&nbsp;&nbsp;&nbsp;";var i=e.rows[t].dataItem;o.innerHTML=r+"<a>"+i.caption+"</a>"};var a=!0;r.selectionChanged.addHandler((function(n,o){if(!a){var r=o.getRow();if(r){var s=r.dataItem;if(s.position)e._scrollToPosition(s.position,!1);else if(s.target){if(!e._documentSource)return;e._documentSource.getBookmark(s.target).then((function(t){s.position=t,n.getSelectedState(o.row,o.col)!=i.SelectedState.None&&e._scrollToPosition(t,!1)}),(function(e){}))}e._isMobileTemplate()&&t.collapse()}}}));var s=!1,u=function(){s||t.isCollapsed||!n.isActived||n.isHidden||(r.refresh(),s=!0)},c=function(){e._documentSource?X(e._documentEventKey,e._documentSource.loadCompleted,(function(){e._documentSource.hasOutlines?e._documentSource.getOutlines().then((function(e){a=!0,s=!1,r.itemsSource=e,t.show(n),u(),a=!1})):(r.itemsSource=null,t.hide(n))})):(r.itemsSource=null,t.hide(n))};e._documentSourceChanged.addHandler(c),t.tabPageActived.addHandler(u),c()}))},t.prototype._initSidePanelThumbnails=function(){var e=this,n=o.Control.getControl(this._sidePanel),i=n.addPage(o.culture.Viewer.thumbnails,l.thumbnails);this._gThumbnailsTitle=i.outContent.querySelector(".wj-tabtitle"),this._thumbnailsPageId=i.id,i.format((function(i){(0,o.addClass)(i.content,"wj-thumbnaillist");var a=new r.ListBox(i.content),s=null,u=!1;a.formatItem.addHandler((function(n,r){var i=r.item,a=r.data;if(i.innerHTML="",e._pageView.pages){var s=document.createElement("div"),u=pt('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml: space = "preserve" ></svg>'),l=document.createElementNS("http://www.w3.org/2000/svg","g"),h=document.createElementNS("http://www.w3.org/2000/svg","image"),p=document.createElement("div"),d=e._pageView.pages[r.index],g=d.size.height.valueInPixel*t._thumbnailWidth/d.size.width.valueInPixel;(0,o.addClass)(i,"wj-thumbnail-item"),a().then((function(e){h.setAttributeNS("http://www.w3.org/1999/xlink","href",e)})),h.setAttribute("x","0"),h.setAttribute("y","0"),h.setAttribute("width",t._thumbnailWidth.toString()),h.setAttribute("height",g.toString()),(0,o.addClass)(s,"wj-pagethumbnail"),s.setAttribute("tabIndex","-1"),l.appendChild(h),u.appendChild(l),s.appendChild(u),i.appendChild(s),c(u,d),p.className="page-index",p.innerHTML=(r.index+1).toString(),i.appendChild(p)}})),a.selectedIndexChanged.addHandler((function(){u||a.selectedIndex<0||a.selectedIndex==e._pageIndex||(e.moveToPage(a.selectedIndex),e._isMobileTemplate()&&n.collapse())})),e.pageIndexChanged.addHandler((function(){return a.selectedIndex=e._pageIndex}));var c=function(e,n){var o=t._thumbnailWidth,r=n.size.height.valueInPixel*o/n.size.width.valueInPixel,i=e.parentNode;switch(ee(e,o,r,1,n.rotateAngle),n.rotateAngle){case A.Rotation90:case A.Rotation270:var a=r;r=o,o=a}i.style.width=o+"px",i.style.height=r+"px",e.setAttribute("width",o.toString()),e.setAttribute("height",r.toString())},l=function(){!n.isCollapsed&&i.isActived&&(s=s||function(){if(!e._documentSource||!e._documentSource.isLoadCompleted||!e._documentSource.pageCount)return null;for(var t=[],n=0;n<e._documentSource.pageCount;n++)!function(n){t.push((function(){var t=new F;return e._documentSource.getExportedUrl({format:"png",resolution:50,outputRange:n+1}).then((function(n){e._documentSource&&e._documentSource._innerService&&!e._documentSource.isDisposed||t.resolve(null),e._documentSource._innerService.downloadDataUrl(n).then((function(e){t.resolve(e)}),(function(e){return t.resolve(null)}))}),(function(e){return t.resolve(null)})),t}))}(n);return t}(),i.isActived&&a.itemsSource!==s&&a.deferUpdate((function(){u=!0,a.itemsSource=s,a.selectedIndex=e._pageIndex,u=!1})))},h=function(){e._documentSource&&e._documentSource.hasThumbnails?(n.show(i),s=null,l()):(n.hide(i),a.itemsSource=null)},p=function(){e._documentSource&&e._documentSource.hasThumbnails?(X(e._documentEventKey,e._documentSource.loadCompleted,h),X(e._documentEventKey,e._documentSource.pageCountChanged,h),X(e._documentEventKey,e._documentSource.pageSettingsChanged,h),h()):(n.hide(i),a.itemsSource=null)};e._documentSourceChanged.addHandler(p),p(),n.tabPageActived.addHandler((function(){n.activedTabPage.id===e._thumbnailsPageId&&l()})),l(),e._pageView.rotateAngleChanged.addHandler((function(){for(var t=a.hostElement.querySelectorAll("svg"),n=0;n<t.length;n++)c(t.item(n),e._pageView.pages[n])}))}))},t.prototype._initSidePanelExports=function(){var e=this,t=o.Control.getControl(this._sidePanel),n=t.addPage(o.culture.Viewer.exports,l.exports);this._gExportsPageTitle=n.outContent.querySelector(".wj-tabtitle"),this._exportsPageId=n.id,n.format((function(n){var i=Z('<div class="wj-exportcontainer"><label wj-part="g-wj-exportformat">'+o.culture.Viewer.exportFormat+'</label><div class="wj-exportformats"></div></div>');n.outContent.querySelector(".wj-tabtitle-wrapper").appendChild(i),e._gExportFormatTitle=n.outContent.querySelector('[wj-part="g-wj-exportformat"]');var a=n.outContent.querySelector(".wj-exportformats");new r.ComboBox(a),(0,o.addClass)(n.content.parentElement,"wj-exportformats-wrapper");var s=document.createElement("div"),u=new Me(s);n.content.appendChild(s);var c=Z('<div class="wj-exportformats-footer"><a wj-part="btn-apply" class="wj-btn wj-applybutton" tabindex="-1">'+o.culture.Viewer.exportOk+"</a></div>");n.content.appendChild(c);var l=n.content.querySelector('[wj-part="btn-apply"]');e._gExportsPageApplyBtn=l,K(l,"click",(function(){e._documentSource.export(u.options),t.collapse()}))}));var i=!0;this._documentSourceChanged.addHandler((function(){i=!0,e._documentSource&&X(e._documentEventKey,e._documentSource.loadCompleted,(function(){i&&e._ensureExportFormatsLoaded().then((function(){e._updateExportTab(),i=null==e._exportFormats}))}))})),t.tabPageActived.addHandler((function(){i&&t.activedTabPage.id===e._exportsPageId&&e._ensureExportFormatsLoaded().then((function(){e._updateExportTab(),i=null==e._exportFormats}))}))},t.prototype._ensureExportFormatsLoaded=function(){var e=this;if(!this._exportFormats&&this._documentSource&&!this._documentSource.isDisposed&&this._documentSource.isInstanceCreated)return this._documentSource.getSupportedExportDescriptions().then((function(t){e._exportFormats=t,e._setViewerAction(V.ShowExportsPanel)}));var t=new F;return t.resolve(),t},t.prototype._updateExportTab=function(e){var t=this;if(this._exportFormats){var n=o.Control.getControl(this._sidePanel).getTabPage(this._exportsPageId),r=o.Control.getControl(n.outContent.querySelector(".wj-exportformats")),i=o.Control.getControl(n.content.firstElementChild);if(e)i.refresh(),r.itemsSource&&r.itemsSource.forEach((function(e){e.name=t._exportItemDescriptions[e.format].name})),r.refresh();else{var a=[];this._exportFormats.forEach((function(e){var n=t._exportItemDescriptions[e.format];nt()&&!n.supportIOS||(e.name=n.name,a.push(e))})),r.selectedIndexChanged.addHandler((function(){i.exportDescription=r.selectedItem})),r.itemsSource=a,r.displayMemberPath="name",r.selectedValuePath="format",r.selectedIndex=-1}}},t.prototype._initSidePanelPageSetup=function(){var e=this,t=o.Control.getControl(this._sidePanel),n=t.addPage(o.culture.Viewer.pageSetup,l.pageSetup);this._gPageSetupTitle=n.outContent.querySelector(".wj-tabtitle"),this._pageSetupPageId=n.id,n.format((function(n){var r=document.createElement("div"),i=new bt(r);n.content.appendChild(r),(0,o.addClass)(r,"wj-pagesetupcontainer");var a=Z('<div class="wj-pagesetup-footer"><a wj-part="btn-apply" class="wj-btn wj-applybutton" tabindex="-1">'+o.culture.Viewer.ok+"</a></div>");n.content.appendChild(a);var s=n.content.querySelector('[wj-part="btn-apply"]');e._gPageSetupApplyBtn=s,K(s,"click",(function(){e._setPageSettings(i.pageSettings),t.collapse()}));var u=function(){i.pageSettings=e._documentSource.pageSettings},c=function(){e._documentSource&&(X(e._documentEventKey,e._documentSource.pageSettingsChanged,u),u())};e._documentSourceChanged.addHandler(c),c()}))},t.prototype._executeAction=function(e){if(!this._actionIsDisabled(e))switch(e){case V.TogglePaginated:this._innerPaginated=!this._innerPaginated;break;case V.Print:this._documentSource&&this._documentSource.print(this._pages.map((function(e){return e.rotateAngle})));break;case V.ShowExportsPanel:o.Control.getControl(this._sidePanel).active(this._exportsPageId);break;case V.Portrait:this._setPageLandscape(!1);break;case V.Landscape:this._setPageLandscape(!0);break;case V.ShowPageSetupDialog:this.showPageSetupDialog();break;case V.FirstPage:this.moveToPage(0);break;case V.LastPage:this._moveToLastPage();break;case V.PrePage:this.moveToPage(this._pageIndex-1);break;case V.NextPage:this.moveToPage(this._pageIndex+1);break;case V.Backward:this._moveBackwardHistory();break;case V.Forward:this._moveForwardHistory();break;case V.SelectTool:this.mouseMode=E.SelectTool;break;case V.MoveTool:this.mouseMode=E.MoveTool;break;case V.Continuous:this.viewMode=M.Continuous;break;case V.Single:this.viewMode=M.Single;break;case V.FitPageWidth:this.zoomMode=I.PageWidth;break;case V.FitWholePage:this.zoomMode=I.WholePage;break;case V.ZoomOut:this._zoomBtnClicked(!1,t._defaultZoomValues);break;case V.ZoomIn:this._zoomBtnClicked(!0,t._defaultZoomValues);break;case V.ToggleFullScreen:this.fullScreen=!this.fullScreen;break;case V.ShowHamburgerMenu:this._hamburgerMenu.showMenu();break;case V.ShowViewMenu:this._viewMenu.showMenu();break;case V.ShowSearchBar:this._showSearchBar((0,o.hasClass)(this._searchBar,B)),this._setViewerAction(V.ShowSearchBar);break;case V.ShowThumbnails:o.Control.getControl(this._sidePanel).active(this._thumbnailsPageId);break;case V.ShowOutlines:o.Control.getControl(this._sidePanel).active(this._outlinesPageId);break;case V.ShowPageSetupPanel:o.Control.getControl(this._sidePanel).active(this._pageSetupPageId);break;case V.ShowZoomBar:this._showFooter(!0);break;case V.SearchPrev:this._searchManager.search(!0);break;case V.SearchNext:this._searchManager.search();break;case V.ShowSearchOptions:this._searchOptionsMenu.showMenu(!0);break;case V.SearchMatchCase:this._searchManager.matchCase=!this._searchManager.matchCase;break;case V.SearchMatchWholeWord:this._searchManager.wholeWord=!this._searchManager.wholeWord;break;case V.RubberbandTool:this.mouseMode=E.RubberbandTool;break;case V.MagnifierTool:this.mouseMode=E.MagnifierTool;break;case V.RotateDocument:this._rotateDocument();break;case V.RotatePage:this._rotatePage()}},t.prototype._initSearchOptionsMenu=function(e){this._searchOptionsMenu=new kt(this,e)},t.prototype._initHamburgerMenu=function(e){this._hamburgerMenu=new Ot(this,e)},t.prototype._initViewMenu=function(e){this._viewMenu=new Ht(this,e)},t.prototype._initToolbar=function(){new It(this._toolbar,this),new jt(this._mobileToolbar,this)},t.prototype._clearExportFormats=function(){this._exportFormats=null},Object.defineProperty(t.prototype,"_exportItemDescriptions",{get:function(){return t._exportItems||(t._exportItems={pdf:{name:o.culture.Viewer.pdfExportName,supportIOS:!0},doc:{name:o.culture.Viewer.docExportName,supportIOS:!1},docx:{name:o.culture.Viewer.docxExportName,supportIOS:!1},rtf:{name:o.culture.Viewer.rtfExportName,supportIOS:!1},xlsx:{name:o.culture.Viewer.xlsxExportName,supportIOS:!0},xls:{name:o.culture.Viewer.xlsExportName,supportIOS:!0},mhtml:{name:o.culture.Viewer.mhtmlExportName,supportIOS:!0},html:{name:o.culture.Viewer.htmlExportName,supportIOS:!0},zip:{name:o.culture.Viewer.metafileExportName,supportIOS:!1},csv:{name:o.culture.Viewer.csvExportName,supportIOS:!0},tiff:{name:o.culture.Viewer.tiffExportName,supportIOS:!0},bmp:{name:o.culture.Viewer.bmpExportName,supportIOS:!1},emf:{name:o.culture.Viewer.emfExportName,supportIOS:!1},gif:{name:o.culture.Viewer.gifExportName,supportIOS:!1},jpeg:{name:o.culture.Viewer.jpegExportName,suportIOS:!1},jpg:{name:o.culture.Viewer.jpegExportName,supportIOS:!1},png:{name:o.culture.Viewer.pngExportName,supportIOS:!1},xml:{name:"XML document",supportIOS:!1}}),t._exportItems},enumerable:!0,configurable:!0}),t.prototype._actionIsChecked=function(e){switch(e){case V.TogglePaginated:return!0===this._innerPaginated;case V.Landscape:return!(!this._documentSource||!this._documentSource.pageSettings)&&this._documentSource.pageSettings.landscape;case V.Portrait:return!(!this._documentSource||!this._documentSource.pageSettings)&&!this._documentSource.pageSettings.landscape;case V.SelectTool:return this.mouseMode===E.SelectTool;case V.MoveTool:return this.mouseMode===E.MoveTool;case V.RubberbandTool:return this.mouseMode===E.RubberbandTool;case V.MagnifierTool:return this.mouseMode===E.MagnifierTool;case V.Continuous:return this.viewMode==M.Continuous;case V.Single:return this.viewMode==M.Single;case V.ToggleFullScreen:return this.fullScreen;case V.FitPageWidth:return this.zoomMode==I.PageWidth;case V.FitWholePage:return this.zoomMode==I.WholePage;case V.SearchMatchCase:return this._searchManager.matchCase;case V.SearchMatchWholeWord:return this._searchManager.wholeWord;case V.ShowSearchBar:return!(0,o.hasClass)(this._searchBar,B)}return!1},t.prototype._isDocumentSourceLoaded=function(){return this._documentSource&&this._documentSource.isLoadCompleted},t.prototype._actionIsDisabled=function(e){if(!(this._isDocumentSourceLoaded()&&this._documentSource.pageCount>0))return!0;switch(e){case V.TogglePaginated:return null==this._innerPaginated;case V.ShowExportsPanel:return!this._exportFormats||0===this._exportFormats.length;case V.Landscape:case V.Portrait:case V.ShowPageSetupDialog:case V.ShowPageSetupPanel:return!this._documentSource||!this._documentSource.pageSettings||!this._documentSource.paginated;case V.FirstPage:case V.PrePage:return this._pageIndex<=0;case V.LastPage:case V.NextPage:return this._pageIndex>=this._documentSource.pageCount-1;case V.Backward:return!this._historyManager.canBackward();case V.Forward:return!this._historyManager.canForward();case V.Continuous:case V.Single:return!this._documentSource||!this._documentSource.paginated;case V.ZoomOut:return this.zoomFactor<=t._defaultZoomValues[0].value;case V.ZoomIn:var n=t._defaultZoomValues;return this.zoomFactor>=n[n.length-1].value}return!1},t.prototype._actionIsShown=function(e){var t=this._documentSource?this._documentSource.features:null;switch(e){case V.TogglePaginated:return t&&t.paginated&&t.nonPaginated;case V.Landscape:case V.Portrait:case V.ShowPageSetupDialog:case V.ShowPageSetupPanel:return t?t.pageSettings:this._supportsPageSettingActions();case V.SelectTool:case V.MoveTool:case V.MagnifierTool:case V.RubberbandTool:return!(0,o.isMobile)();case V.ShowSearchBar:return t&&(!this._documentSource.paginated||t.textSearchInPaginatedMode);case V.ShowOutlines:return this._documentSource&&this._documentSource.hasOutlines;case V.ShowThumbnails:return this._documentSource&&this._documentSource.hasThumbnails}return!0},t.prototype._onViewerActionStatusChanged=function(e){this._viewerActionStatusChanged.raise(this,e)},t.prototype._setViewerAction=function(e,t,n,o){var r={actionType:e,disabled:t||this._actionIsDisabled(e),checked:n||this._actionIsChecked(e),shown:o||this._actionIsShown(e)};this._onViewerActionStatusChanged({action:r})},t.prototype._updateViewerActions=function(){this._updatePageSettingsActions(),this._updateViewModeActions(),this._updateMouseModeActions(),this._setViewerAction(V.ShowExportsPanel)},t.prototype._updateViewModeActions=function(){this._setViewerAction(V.Continuous),this._setViewerAction(V.Single)},t.prototype._updatePageSettingsActions=function(){this._setViewerAction(V.TogglePaginated),this._setViewerAction(V.Landscape),this._setViewerAction(V.Portrait),this._setViewerAction(V.ShowPageSetupDialog)},t.prototype._updateMouseModeActions=function(){this._setViewerAction(V.SelectTool),this._setViewerAction(V.MoveTool),this._setViewerAction(V.MagnifierTool),this._setViewerAction(V.RubberbandTool)},t.prototype._updateZoomModeActions=function(){this._setViewerAction(V.FitPageWidth),this._setViewerAction(V.FitWholePage)},t.prototype._updateZoomFactorActions=function(){this._setViewerAction(V.ZoomOut),this._setViewerAction(V.ZoomIn)},t.prototype._onPageSettingsUpdated=function(){this._updatePageSettingsActions(),this._updateViewModeActions(),this._resetToolbarWidth()},t.prototype._onPageCountUpdated=function(){this._updatePageNavActions(),this._resetToolbarWidth()},t.prototype._updatePageNavActions=function(){this._setViewerAction(V.FirstPage),this._setViewerAction(V.LastPage),this._setViewerAction(V.PrePage),this._setViewerAction(V.NextPage)},t.prototype._onHistoryManagerStatusUpdated=function(){this._setViewerAction(V.Backward),this._setViewerAction(V.Forward)},t.prototype._updateUI=function(){var e=this;Object.keys(V).forEach((function(t){isNaN(t)||e._setViewerAction(V[V[t]])}));var t=o.Control.getControl(this._sidePanel);t&&t.enableAll(this._isDocumentSourceLoaded())},t.prototype._updateViewContainerCursor=function(){this.mouseMode===E.MoveTool?(0,o.hasClass)(this._viewpanelContainer,"move")||(0,o.addClass)(this._viewpanelContainer,"move"):(0,o.hasClass)(this._viewpanelContainer,"move")&&(0,o.removeClass)(this._viewpanelContainer,"move")},t.prototype._updateFullScreenStyle=function(){var e=document.body;this.fullScreen?(this._bodyOriginScrollLeft=document.documentElement&&document.documentElement.scrollLeft||e.scrollLeft,this._bodyOriginScrollTop=document.documentElement&&document.documentElement.scrollTop||e.scrollTop,(0,o.addClass)(this.hostElement,"full-screen"),(0,o.addClass)(e,"full-screen"),this._hostOriginWidth=this.hostElement.style.width,this._hostOriginHeight=this.hostElement.style.height,this.hostElement.style.width="100%",this.hostElement.style.height="100%",window.scrollTo(0,0)):((0,o.removeClass)(this.hostElement,"full-screen"),(0,o.removeClass)(e,"full-screen"),this.hostElement.style.width=this._hostOriginWidth,this.hostElement.style.height=this._hostOriginHeight,(0,o.isNumber)(this._bodyOriginScrollLeft)&&(document.documentElement&&(document.documentElement.scrollLeft=this._bodyOriginScrollLeft),e.scrollLeft=this._bodyOriginScrollLeft),(0,o.isNumber)(this._bodyOriginScrollTop)&&(document.documentElement&&(document.documentElement.scrollTop=this._bodyOriginScrollTop),e.scrollTop=this._bodyOriginScrollTop)),this.refresh()},t.prototype.showPageSetupDialog=function(){this._pageSetupDialog||this._createPageSetupDialog(),this._pageSetupDialog.showWithValue(this._documentSource.pageSettings)},t.prototype._createPageSetupDialog=function(){var e=this,t=document.createElement("div");t.style.display="none",e.hostElement.appendChild(t),e._pageSetupDialog=new Pt(t),e._pageSetupDialog.applied.addHandler((function(){return e._setPageSettings(e._pageSetupDialog.pageSettings)}))},t.prototype.zoomToView=function(){(0,o._deprecated)("zoomToView","zoomMode"),this._documentSource&&(this.zoomMode=I.WholePage)},t.prototype.zoomToViewWidth=function(){(0,o._deprecated)("zoomToViewWidth","zoomMode"),this._documentSource&&(this.zoomMode=I.PageWidth)},t.prototype._setPageLandscape=function(e){var t=this._documentSource.pageSettings;ut(t,e),this._setPageSettings(t)},t.prototype._setPaginated=function(e){var t=this._documentSource.features,n=this._documentSource.pageSettings;t&&n&&e!=n.paginated&&(e&&t.paginated?(n.paginated=!0,this._setPageSettings(n),this._showSearchBar(!1)):!e&&t.nonPaginated&&(n.paginated=!1,this._setPageSettings(n)))},t.prototype._setPageSettings=function(e){var t=this;return this._showViewPanelMessage(),this._setDocumentRendering(),this._documentSource.setPageSettings(e).then((function(e){t._resetDocument(),t._reRenderDocument()})).catch((function(e){t._showViewPanelErrorMessage(Y(e))}))},t.prototype._showViewPanelErrorMessage=function(e){this._showViewPanelMessage(e,"errormessage")},t.prototype._showViewPanelMessage=function(e,t){var n=this._viewpanelContainer.querySelector(".wj-viewer-loading");n||((n=document.createElement("div")).innerHTML='<span class="verticalalign"></span><span class="textspan"></span>',this._viewpanelContainer.appendChild(n)),n.className="wj-viewer-loading",t&&(0,o.addClass)(n,t);var r=n.querySelector(".textspan");r&&(r.innerHTML=e||o.culture.Viewer.loading)},t.prototype._removeViewPanelMessage=function(){var e=this._viewpanelContainer.querySelector(".wj-viewer-loading");e&&this._viewpanelContainer.removeChild(e)},t.prototype._reRenderDocument=function(){this._documentSource&&(this._showViewPanelMessage(),this._documentSource.load())},t.prototype._zoomBtnClicked=function(e,t){var n,o;for(n=0;n<t.length;n++){if(t[n].value>this.zoomFactor){o=n-.5;break}if(t[n].value===this.zoomFactor){o=n;break}}null==o&&(o=t.length-.5),o<=0&&!e||o>=t.length-1&&e||(o=e?Math.floor(o)+1:Math.ceil(o)-1,this.zoomFactor=t[o].value)},t.prototype._getDocumentSource=function(){return this._documentSource},t.prototype._setDocumentSource=function(e){var t=this;this._loadDocument(e).then((function(n){t._documentSource==e&&t._ensureExportFormatsLoaded()}))},t.prototype._loadDocument=function(e,t,n){var o=this;void 0===t&&(t=!1),void 0===n&&(n=!0);var r=new F;return this._documentSource!==e||t?(this._disposeDocument(n),this._documentSource=e,e&&(X(this._documentEventKey,e.loading,(function(){o._updateUI()}),this),X(this._documentEventKey,e.loadCompleted,this._onDocumentSourceLoadCompleted,this),X(this._documentEventKey,e.queryLoadingData,(function(e,t){o.onQueryLoadingData(t)}),this),e.isLoadCompleted?(this._onDocumentSourceLoadCompleted(),this._keepServiceConnection(),r.resolve()):(this._showViewPanelMessage(),e.load().then((function(e){o._keepServiceConnection(),r.resolve(e)})).catch((function(e){o._showViewPanelErrorMessage(Y(e))})))),this._onDocumentSourceChanged(),r):r},t.prototype._actionElementClicked=function(e){var t=this._getActionInfo(e);t&&(t.kind===T.Bookmark?this._goToBookmark(t):t.kind===T.Custom&&this._executeCustomAction(t))},t.prototype._getActionInfo=function(e){var t=e.getAttribute(Ue._bookmarkAttr);return t?{kind:T.Bookmark,data:t}:(t=e.getAttribute(Ue._customActionAttr))?{kind:T.Custom,data:t}:null},t.prototype._onDocumentSourceLoadCompleted=function(){var e=this,t=this._documentSource.errors;if(this._documentSource.isLoadCompleted){if(this._removeViewPanelMessage(),this._pages.length=0,this._documentSource.pageCount<=0)return void this._updateUI();for(var n={width:this._documentSource.pageSettings.width,height:this._documentSource.pageSettings.height},o=0;o<this._documentSource.pageCount;o++){var r=this._createPage(o,n);r.linkClicked.addHandler((function(t,n){e._magnifier&&e._magnifier.isActive||e._rubberband&&e._rubberband.isActive||e._actionElementClicked(n.element)})),this._pages.push(r)}this._pageView.pages=this._pages,this._autoHeightCalculated||(this._autoCalculateHeight(),this._autoHeightCalculated=!0);var i=this._documentSource.initialPosition||this._initialPosition;if(this._documentSource.initialPosition=null,this._initialPosition=null,i&&0!=i.pageIndex||(this._pageIndex=0,i={pageIndex:0}),this._documentSource.paginated||(this.viewMode=M.Single),this._initialScroll=!0,this._scrollToPosition(i),this._updateHistoryCurrent(),t&&t.length>0)for(o=0;o<t.length;o++)t[o];this._updateUI()}},t.prototype._createPage=function(e,t){return new Ue(this._documentSource,e,t)},t.prototype._clearKeepSerConnTimer=function(){null!=this._keepSerConnTimer&&clearTimeout(this._keepSerConnTimer)},t.prototype._keepServiceConnection=function(){var e=this;this._clearKeepSerConnTimer();var t=this._documentSource;t&&(this._keepSerConnTimer=setTimeout((function(){e._documentSource===t&&e._documentSource.getStatus().then((function(t){return e._keepServiceConnection()}))}),this._getExpiredTime()))},t.prototype._getExpiredTime=function(){if(this._expiredTime)return this._expiredTime;var e=this._documentSource;return e&&e.expiredDateTime&&e.executionDateTime?(this._expiredTime=e.expiredDateTime.getTime()-e.executionDateTime.getTime(),this._expiredTime=Math.max(this._expiredTime-12e4,0),this._expiredTime):6e3},t.prototype._disposeDocument=function(e){void 0===e&&(e=!0),this._documentSource&&(G(this._documentEventKey,this._documentSource.disposed),G(this._documentEventKey,this._documentSource.pageCountChanged),G(this._documentEventKey,this._documentSource.pageSettingsChanged),G(this._documentEventKey,this._documentSource.loadCompleted),G(this._documentEventKey,this._documentSource.queryLoadingData),e&&this._documentSource.dispose()),this._resetDocument()},t.prototype._resetDocument=function(){this._pages.length=0,this._pageView.resetPages(),this._pageIndex=0,clearTimeout(this._historyTimer),this._historyManager.clear(),this._rubberband&&this._rubberband.reset(),this._magnifier&&this._magnifier.reset()},t.prototype._setDocumentRendering=function(){this._documentSource._updateIsLoadCompleted(!1)},t.prototype.moveToPage=function(e){return this._innerMoveToPage(e)},t.prototype._getCurrentPosition=function(){return st(this._pageView.hitTest(0,0))},t.prototype._resolvePageIndex=function(e){return Math.min(this._documentSource.pageCount-1,Math.max(e,0))},t.prototype._innerMoveToPage=function(e){var t=this;return this._resolvePageIndex(e)!=this.pageIndex&&(this._pageMoving=!0,this._addHistory(!1,!0)),this._updatePageIndex(e),this._pageView.moveToPage(this.pageIndex).then((function(){t._pageMoving=!1}))},t.prototype._moveToLastPage=function(){var e=new F;return this._ensureDocumentLoadCompleted(e)?this._innerMoveToPage(this._documentSource.pageCount-1):e},t.prototype._moveBackwardHistory=function(){if(this._ensureDocumentLoadCompleted()&&this._historyManager.canBackward()){var e=this._historyManager.backward();this._moveToHistory(e)}},t.prototype._moveForwardHistory=function(){if(this._ensureDocumentLoadCompleted()&&this._historyManager.canForward()){var e=this._historyManager.forward();this._moveToHistory(e)}},t.prototype._moveToHistory=function(e){var t=this;if(e){this._historyMoving=!0,this.viewMode=e.viewMode,e.zoomMode===I.Custom?this.zoomFactor=e.zoomFactor:this.zoomMode=e.zoomMode,this._scrollToPosition(e.position).then((function(e){t._historyMoving=!1}));for(var n=0;n<e.pageAngles.length;n++)this._pageView.rotatePageTo(n,e.pageAngles[n])}},t.prototype._isPositionEquals=function(e,t,n){return!this._pageMoving&&e.pageIndex===t.pageIndex&&(!n||e.pageBounds==t.pageBounds||null!=e.pageBounds&&null!=t.pageBounds&&e.pageBounds.x===t.pageBounds.x&&e.pageBounds.y===t.pageBounds.y)},t.prototype._isPageAnglesChanged=function(e){if(e.length!=this._pageView.pages.length)return!0;for(var t=e.length,n=0;n<t;n++)if(e[n]!==this._pageView.pages[n].rotateAngle)return!0;return!1},t.prototype._updateHistoryCurrent=function(e){void 0===e&&(e=!1),this._historyManager.current.position=this._getCurrentPosition(),e||(this._historyManager.current.zoomMode=this.zoomMode,this._historyManager.current.zoomFactor=this.zoomFactor,this._historyManager.current.viewMode=this.viewMode,this._updateCurrentPageAngles(this._historyManager.current))},t.prototype._innerAddHistory=function(e){var t=this._getCurrentPosition(),n=this._historyManager.current;this._isPositionEquals(t,n.position,e)&&this.viewMode===n.viewMode&&this.zoomMode===n.zoomMode&&this.zoomFactor===n.zoomFactor&&!this._isPageAnglesChanged(n.pageAngles)||(n.position=n.position||this._getCurrentPosition(),n.viewMode=null==n.viewMode?this.viewMode:n.viewMode,n.zoomMode=null==n.zoomMode?this.zoomMode:n.zoomMode,n.zoomFactor=null==n.zoomFactor?this.zoomFactor:n.zoomFactor,n.pageAngles||this._updateCurrentPageAngles(n),this._historyManager.add(),this._updateHistoryCurrent())},t.prototype._addHistory=function(e,n,o,r){var i=this;void 0===r&&(r=!1),this._prohibitAddHistory||this.isUpdating||this._historyMoving||!this._isDocumentSourceLoaded()||(r&&(this._prohibitAddHistory=!0),n?(this._mergeHistory(o),null!=this._historyTimer&&clearTimeout(this._historyTimer),this._historyTimer=setTimeout((function(){i._historyTimer=null,i._innerAddHistory(e),i._prohibitAddHistory=!1}),t._historyTimeout)):(this._innerAddHistory(e),this._prohibitAddHistory=!1))},t.prototype._updateCurrentPageAngles=function(e){e.pageAngles||(e.pageAngles=new Array);for(var t=this._pageView.pages.length,n=0;n<t;n++)e.pageAngles[n]=this._pageView.pages[n].rotateAngle},t.prototype._mergeHistory=function(e){var t=this._historyManager.current;if(e){if(null!=e.viewMode&&(t.viewMode=e.viewMode),null!=e.zoomMode&&(t.zoomMode=e.zoomMode),null!=e.zoomFactor&&(t.zoomFactor=e.zoomFactor),e.pageAngles){t.pageAngles=new Array;for(var n=this._pageView.pages.length,o=0;o<n;o++)t.pageAngles[o]=e.pageAngles[o]}}else t.viewMode=this.viewMode,t.zoomMode=this.zoomMode,t.zoomFactor=this.zoomFactor,this._updateCurrentPageAngles(t)},t.prototype._ensureDocumentLoadCompleted=function(e){return this._documentSource?!!this._documentSource.isLoadCompleted||(e&&e.reject("Cannot set page index when document source is not loaded completely."),!1):(e&&e.reject("Cannot set page index without document source."),!1)},t.prototype._updatePageIndex=function(e){this._documentSource&&(e=Math.min(this._documentSource.pageCount-1,Math.max(e,0)),this._pageIndex!==e&&(this._pageIndex=e,this.onPageIndexChanged()))},t.prototype._getRotatedAngle=function(e){switch(e){case A.NoRotate:return A.Rotation90;case A.Rotation90:return A.Rotation180;case A.Rotation180:return A.Rotation270;case A.Rotation270:return A.NoRotate}return A.NoRotate},t.prototype._rotateDocument=function(){this._addHistory(!1,!0);for(var e=this._pageView.pages.length,t=0;t<e;t++)this._pageView.rotatePageTo(t,this._getRotatedAngle(this._pageView.pages[t].rotateAngle))},t.prototype._rotatePage=function(){this._addHistory(!1,!0);var e=this._pageView.pages[this._pageIndex];this._pageView.rotatePageTo(this._pageIndex,this._getRotatedAngle(e.rotateAngle))},Object.defineProperty(t.prototype,"zoomMode",{get:function(){return this._pageView.zoomMode},set:function(e){this._pageView.zoomMode=(0,o.asEnum)(e,I)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomFactor",{get:function(){return this._pageView.zoomFactor},set:function(e){this._pageView.zoomFactor=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewMode",{get:function(){return this._viewMode},set:function(e){if(e=(0,o.asEnum)(e,M),this._viewMode!==e){var t=this._viewMode;this._viewMode=e,this.onViewModeChanged(t,e)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mouseMode",{get:function(){return this._mouseMode},set:function(e){if(this._mouseMode!==(e=(0,o.asEnum)(e,E))){switch(this._mouseMode=e,this._mouseMode){case E.RubberbandTool:this._rubberband.activate(),this._magnifier.deactivate();break;case E.MagnifierTool:this._magnifier.activate(),this._rubberband.deactivate();break;default:this._magnifier.deactivate(),this._rubberband.deactivate()}this.onMouseModeChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullScreen",{get:function(){return this._fullScreen},set:function(e){this._fullScreen!==e&&(this._fullScreen=e,this.onFullScreenChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageIndex",{get:function(){return this._pageIndex},enumerable:!0,configurable:!0}),t.prototype._initMiniToolbar=function(){o.Control.getControl(this._miniToolbar)||(new Mt(this._miniToolbar,this),(0,o.addClass)(this._miniToolbar,"wj-mini-toolbar"))},t.prototype._pinMiniToolbar=function(){var e=this;this._showMiniToolbar(!0),this._miniToolbarPinnedTimer=setTimeout((function(){e._showMiniToolbar(!1),e._miniToolbarPinnedTimer=null}),t._miniToolbarPinnedTime)},t.prototype._onDocumentSourceChanged=function(e){this._clearExportFormats(),this._documentSourceChanged.raise(this),this._updateViewerActions(),this._onPageSettingsUpdated(),this._onPageCountUpdated(),this._updateViewModeActions(),this._searchManager.documentSource=this._documentSource,this._documentSource&&(X(this._documentEventKey,this._documentSource.pageSettingsChanged,this._onPageSettingsUpdated,this),X(this._documentEventKey,this._documentSource.pageCountChanged,this._onPageCountUpdated,this),X(this._documentEventKey,this._documentSource.loadCompleted,this._onPageCountUpdated,this))},t.prototype.onPageIndexChanged=function(e){this.pageIndexChanged.raise(this),this._updatePageNavActions()},t.prototype.onViewModeChanged=function(e,t){this.viewModeChanged.raise(this,{oldValue:e,newValue:t}),this._updateViewModeActions(),this._pageView.viewMode=this.viewMode},t.prototype.onMouseModeChanged=function(e){this.mouseModeChanged.raise(this),(this.mouseMode!==E.MoveTool&&this.mouseMode!==E.SelectTool||!(0,o.isMobile)())&&(this._updateMouseModeActions(),this._updateViewContainerCursor(),this._pageView.panMode=this.mouseMode===E.MoveTool)},t.prototype.onFullScreenChanged=function(e){this.fullScreenChanged.raise(this),this._setViewerAction(V.ToggleFullScreen),this._updateFullScreenStyle(),this.fullScreen&&this._pinMiniToolbar()},t.prototype.onZoomFactorChanged=function(e){this.zoomFactorChanged.raise(this,e),this._updateZoomFactorActions(),this._updateZoomModeActions()},t.prototype.onZoomModeChanged=function(e){this.zoomModeChanged.raise(this,e),this._updateZoomModeActions(),this._updateZoomFactorActions()},t.prototype.onQueryLoadingData=function(e){this.queryLoadingData.raise(this,e)},t.prototype.onBeforeSendRequest=function(e){this.beforeSendRequest.raise(this,e)},t.prototype.onPageLoaded=function(e){this.pageLoaded.raise(this,e)},t.prototype.beforeSend=function(e){this.onBeforeSendRequest(e)},t._seperatorHtml="<div class='wj-separator' style='width:100%;height: 1px;margin: 3px 0;background-color:rgba(0,0,0,.2)'></div>",t._viewpanelContainerMinHeight=300,t._miniToolbarPinnedTime=3e3,t._narrowCss="narrow",t._narrowWidthThreshold=400,t._thumbnailWidth=100,t._historyTimeout=300,t._zoomValuesFormatter=function(e){return Math.floor(100*e+.5)+" %"},t._zoomValuesParser=function(e){return parseFloat(e.replace(" %",""))},t._defaultZoomValues=[.05,.25,.5,.75,1,2,3,4,8,10].map((function(e){return{value:e,name:t._zoomValuesFormatter(e)}})),t.controlTemplate='<div class="wj-viewer-outer wj-content with-footer"><div wj-part="toolbar"></div><div wj-part="mobile-toolbar"></div><div class="wj-viewer-container" wj-part="viewer-container"><div class="wj-viewer-leftpanel" wj-part="viewer-left-panel"><div class="wj-viewer-tabsleft" wj-part="side-panel"></div></div><div class="wj-viewer-splitter" wj-part="splitter"><button class="wj-btn wj-btn-default"><span class="wj-glyph-right"></span></button></div><div class="wj-viewpanel-container" wj-part="viewpanel-container"></div></div><div wj-part="mini-toolbar"></div><div class="wj-searchbar mobile" wj-part="search-bar"></div><div class="wj-viewer-footer mobile" class="wj-viewer-footer" wj-part="viewer-footer"><div wj-part="zoom-bar"></div><span class="wj-close">\xd7</span></div></div>',t}(o.Control),Et=function(e){function t(t,n){return e.call(this,t,n)||this}return s(t,e),t.prototype._getProductInfo=function(){return"QNI5,PdfViewer"},Object.defineProperty(t.prototype,"_innerDocumentSource",{get:function(){return this._getDocumentSource()},enumerable:!0,configurable:!0}),t.prototype._getSource=function(){return this.filePath?new ze({serviceUrl:this.serviceUrl,filePath:this.filePath},this):null},t}(Tt),Mt=function(e){function t(t,n){return e.call(this,t,n)||this}return s(t,e),t.prototype._initToolbarItems=function(){var e=o.culture.Viewer;this._gPrint=this.addSvgButton(e.print,l.print,V.Print),this.addSeparator(),this._gPreviousPage=this.addSvgButton(e.previousPage,l.previousPage,V.PrePage),this._gNextPage=this.addSvgButton(e.nextPage,l.nextPage,V.NextPage),vt._initToolbarPageNumberInput(this.hostElement,this.viewer),this.addSeparator(),this._gZoomOut=this.addSvgButton(e.zoomOut,l.zoomOut,V.ZoomOut),this._gZoomIn=this.addSvgButton(e.zoomIn,l.zoomIn,V.ZoomIn),this._gExitFullScreen=this.addSvgButton(e.exitFullScreen,l.exitFullScreen,V.ToggleFullScreen,!0)},t.prototype._globalize=function(){var e=o.culture.Viewer;this._gPrint.title=e.print,this._gPreviousPage.title=e.previousPage,this._gNextPage.title=e.nextPage,this._gZoomOut.title=e.zoomOut,this._gZoomIn.title=e.zoomIn,this._gExitFullScreen.title=e.exitFullScreen},t}(vt),It=function(e){function t(t,n){return e.call(this,t,n)||this}return s(t,e),t.prototype._globalize=function(){var e=o.culture.Viewer;this._gPaginated.title=e.paginated,this._gPrint.title=e.print,this._gExports.title=e.exports,this._gPortrait.title=e.portrait,this._gLandscape.title=e.landscape,this._gPageSetup.title=e.pageSetup,this._gFirstPage.title=e.firstPage,this._gPreviousPage.title=e.previousPage,this._gNextPage.title=e.nextPage,this._gLastPage.title=e.lastPage,this._gBackwardHistory.title=e.backwardHistory,this._gForwardHistory.title=e.forwardHistory,this._gSelectTool.title=e.selectTool,this._gMoveTool.title=e.moveTool,this._gContinuousMode.title=e.continuousMode,this._gSingleMode.title=e.singleMode,this._gWholePage.title=e.wholePage,this._gPageWidth.title=e.pageWidth,this._gZoomOut.title=e.zoomOut,this._gZoomIn.title=e.zoomIn,this._gRubberbandTool.title=e.rubberbandTool,this._gMagnifierTool.title=e.magnifierTool,this._gRotateDocument.title=e.rotateDocument,this._gRotatePage.title=e.rotatePage,this._gFullScreen.title=e.fullScreen},t.prototype._initToolbarItems=function(){var e=o.culture.Viewer;this._gPaginated=this.addSvgButton(e.paginated,l.paginated,V.TogglePaginated,!0),this._gPrint=this.addSvgButton(e.print,l.print,V.Print),this._gExports=this.addSvgButton(e.exports,l.exports,V.ShowExportsPanel),this.addSeparator(),this._gPortrait=this.addSvgButton(e.portrait,l.portrait,V.Portrait),this._gLandscape=this.addSvgButton(e.landscape,l.landscape,V.Landscape),this._gPageSetup=this.addSvgButton(e.pageSetup,l.pageSetup,V.ShowPageSetupDialog),this.addSeparator(),this._gFirstPage=this.addSvgButton(e.firstPage,l.firstPage,V.FirstPage),this._gPreviousPage=this.addSvgButton(e.previousPage,l.previousPage,V.PrePage),this._gNextPage=this.addSvgButton(e.nextPage,l.nextPage,V.NextPage),this._gLastPage=this.addSvgButton(e.lastPage,l.lastPage,V.LastPage),vt._initToolbarPageNumberInput(this.hostElement,this.viewer),this.addSeparator(),this._gBackwardHistory=this.addSvgButton(e.backwardHistory,l.backwardHistory,V.Backward),this._gForwardHistory=this.addSvgButton(e.forwardHistory,l.forwardHistory,V.Forward),this.addSeparator(),this._gSelectTool=this.addSvgButton(e.selectTool,l.selectTool,V.SelectTool),this._gMoveTool=this.addSvgButton(e.moveTool,l.moveTool,V.MoveTool),this._gContinuousMode=this.addSvgButton(e.continuousMode,l.continuousView,V.Continuous),this._gSingleMode=this.addSvgButton(e.singleMode,l.singleView,V.Single),this.addSeparator(),this._gWholePage=this.addSvgButton(e.wholePage,l.fitWholePage,V.FitWholePage),this._gPageWidth=this.addSvgButton(e.pageWidth,l.fitPageWidth,V.FitPageWidth),this._gZoomOut=this.addSvgButton(e.zoomOut,l.zoomOut,V.ZoomOut),this._gZoomIn=this.addSvgButton(e.zoomIn,l.zoomIn,V.ZoomIn),this._gRubberbandTool=this.addSvgButton(e.rubberbandTool,l.rubberbandTool,V.RubberbandTool),this._gMagnifierTool=this.addSvgButton(e.magnifierTool,l.magnifierTool,V.MagnifierTool),this._gRotateDocument=this.addSvgButton(e.rotateDocument,l.rotateDocument,V.RotateDocument),this._gRotatePage=this.addSvgButton(e.rotatePage,l.rotatePage,V.RotatePage),vt._initToolbarZoomValue(this.hostElement,this.viewer),this._gFullScreen=this.addSvgButton(e.fullScreen,l.fullScreen,V.ToggleFullScreen,!0)},t}(vt),Vt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return(0,o.addClass)(r.hostElement,"mobile"),r}return s(t,e),t}(vt),At=function(e){function t(t,n){var r=e.call(this,t,n)||this;return(0,o.addClass)(r.hostElement,"wj-zoombar"),r}return s(t,e),t.prototype._initToolbarItems=function(){var e=o.culture.Viewer;this._gZoomOut=this.addSvgButton(e.zoomOut,l.zoomOut,V.ZoomOut),vt._initToolbarZoomValue(this.hostElement,this.viewer),this._gZoomIn=this.addSvgButton(e.zoomIn,l.zoomIn,V.ZoomIn)},t.prototype._globalize=function(){var e=o.culture.Viewer;this._gZoomOut.title=e.zoomOut,this._gZoomIn.title=e.zoomIn},t}(Vt),jt=function(e){function t(t,n){return e.call(this,t,n)||this}return s(t,e),t.prototype._initToolbarItems=function(){var e=o.culture.Viewer;this._gShowHamburgerMenu=this.addSvgButton(e.hamburgerMenu,l.hamburgerMenu,V.ShowHamburgerMenu),this.viewer._initHamburgerMenu(this._gShowHamburgerMenu),this._gPrevPage=this.addSvgButton(e.previousPage,l.previousPage,V.PrePage),this._gNextPage=this.addSvgButton(e.nextPage,l.nextPage,V.NextPage),vt._initToolbarPageNumberInput(this.hostElement,this.viewer),this._gShowViewMenu=this.addSvgButton(e.viewMenu,l.viewMenu,V.ShowViewMenu),this.viewer._initViewMenu(this._gShowViewMenu),this._gShowSearchBar=this.addSvgButton(e.showSearchBar,l.search,V.ShowSearchBar,!0),this._gFullScreen=this.addSvgButton(e.fullScreen,l.fullScreen,V.ToggleFullScreen,!0)},t.prototype._globalize=function(){var e=o.culture.Viewer;this._gShowHamburgerMenu.title=e.hamburgerMenu,this._gPrevPage.title=e.previousPage,this._gNextPage.title=e.nextPage,this._gShowViewMenu.title=e.viewMenu,this._gShowSearchBar.title=e.showSearchBar,this._gFullScreen.title=e.fullScreen},t}(Vt),Dt=function(e){function t(t,n){return e.call(this,t,n)||this}return s(t,e),t.prototype._initToolbarItems=function(){var e=o.culture.Viewer;this._gSearchOptions=this.addSvgButton(e.searchOptions,l.searchOptions,V.ShowSearchOptions),this.viewer._initSearchOptionsMenu(this._gSearchOptions),this._initSearchInput(),this._initSearchBtnGroups()},t.prototype._initSearchInput=function(){var e=this,t=pt('<div class="wj-searchcontainer"><input class="wj-searchbox" wj-part="search-box" type="text"/><div class="wj-btn-group"><button class="wj-btn wj-btn-search">'+ot(l.search).innerHTML+"</button></div></div>"),n=t.querySelector('input[type="text"]'),o=t.querySelector(".wj-btn-search");K(n,"input",(function(){e.viewer._searchManager.text=n.value})),K(o,"click",(function(){e.viewer._searchManager.search()})),this.viewer._searchManager.searchStarted.addHandler((function(){n.value!==e.viewer._searchManager.text&&(n.value=e.viewer._searchManager.text),n.disabled=!0})),this.viewer._searchManager.searchCompleted.addHandler((function(){n.disabled=!1})),this.viewer._searchManager.textChanged.addHandler((function(){n.value=e.viewer._searchManager.text})),this.addCustomItem(t)},t.prototype._initSearchBtnGroups=function(){var e=pt('<div class="wj-searchbtn-groups wj-btn-group wj-toolbarwrapper"></div>'),t=o.culture.Viewer;this._gSearchPrev=this.addSvgButton(t.searchPrev,l.searchLeft,V.SearchPrev),this._gSearchNext=this.addSvgButton(t.searchNext,l.searchRight,V.SearchNext),e.appendChild(this._gSearchPrev),e.appendChild(this._gSearchNext),this.addCustomItem(e)},t.prototype._globalize=function(){var e=o.culture.Viewer;this._gSearchOptions.title=e.searchOptions,this._gSearchPrev.title=e.searchPrev,this._gSearchNext.title=e.searchNext},t}(Vt),Rt=function(e){function t(t,n,o){var r=e.call(this,document.createElement("div"),o)||this;return r.owner=n,r.hostElement.style.display="none",r.owner.appendChild(r.hostElement),r.showDropDownButton=!1,r.itemClicked.addHandler(r._onItemClicked,r),r.formatItem.addHandler(r._formatItem,r),r._viewer=t,r._bindMenuItems(),r.displayMemberPath="title",r.selectedValuePath="commandTag",r._viewer._viewerActionStatusChanged.addHandler((function(e,t){var n=r.dropDown.querySelector("["+tt+'="'+t.action.actionType.toString()+'"]');r._updateActionStatusCore(n,t.action)})),r}return s(t,e),Object.defineProperty(t.prototype,"viewer",{get:function(){return this._viewer},enumerable:!0,configurable:!0}),t.prototype._bindMenuItems=function(){this.itemsSource=this._initItems()},t.prototype._initItems=function(){throw o.culture.Viewer.abstractMethodException},t.prototype._internalFormatItem=function(e,t){if(e&&void 0!==e.commandTag){if(q(t),e.icon){var n=document.createElement("span");n.appendChild(ot(e.icon)),t.insertBefore(n,t.firstChild)}t.setAttribute(tt,e.commandTag.toString()),this._updateActionStatus(t,e.commandTag)}},t.prototype._formatItem=function(e,t){this._internalFormatItem(this.itemsSource[t.index],t.item)},t.prototype._onItemClicked=function(e){this._viewer._executeAction(parseInt(e.selectedItem.commandTag))},t.prototype._updateActionStatus=function(e,t){this._updateActionStatusCore(e,{actionType:t,checked:this._viewer._actionIsChecked(t),disabled:this._viewer._actionIsDisabled(t),shown:this._viewer._actionIsShown(t)})},t.prototype._updateActionStatusCore=function(e,t){rt(e,t.checked),at(e,t.disabled),ct(e,t.shown)},t.prototype._updateItemsStatus=function(){for(var e=this.dropDown.querySelectorAll("["+tt+"]"),t=0;t<e.length;t++){var n=e[t],o=n.getAttribute(tt);null!=o&&this._updateActionStatus(n,parseInt(o))}it(this.dropDown)},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),t&&this._bindMenuItems(),this.isDroppedDown&&this.showMenu()},t.prototype.showMenu=function(e){this.selectedIndex=-1,(0,o.showPopup)(this.dropDown,this.owner,e,!1,!1),this.dropDown.style.color=this._viewer.hostElement.style.color,(0,o.addClass)(this.dropDown,"wj-btn-group-vertical"),(0,o.addClass)(this.dropDown,"wj-viewer-menu"),this._updateItemsStatus(),this.dropDown.focus()},t}(r.Menu),kt=function(e){function t(t,n,o){return e.call(this,t,n,o)||this}return s(t,e),t.prototype._initItems=function(){var e=[];return e.push({title:o.culture.Viewer.matchCaseMenuItem,commandTag:V.SearchMatchCase}),e.push({title:o.culture.Viewer.wholeWordMenuItem,commandTag:V.SearchMatchWholeWord}),e},t.prototype._internalFormatItem=function(t,n){if(e.prototype._internalFormatItem.call(this,t,n),t&&void 0!==t.commandTag){var r=document.createElement("span");r.innerHTML=o.culture.Viewer.checkMark,(0,o.addClass)(r,"checkIcon"),n.insertBefore(r,n.firstChild)}},t.prototype._updateActionStatus=function(t,n){e.prototype._updateActionStatus.call(this,t,n),this.viewer._actionIsChecked(n)?(0,o.addClass)(t,"checked"):(0,o.removeClass)(t,"checked")},t}(Rt),Ot=function(e){function t(t,n,o){return e.call(this,t,n,o)||this}return s(t,e),t.prototype._initItems=function(){var e=[],t=o.culture.Viewer;return e.push({title:t.thumbnails,icon:l.thumbnails,commandTag:V.ShowThumbnails}),e.push({title:t.outlines,icon:l.outlines,commandTag:V.ShowOutlines}),e.push({title:t.exports,icon:l.exports,commandTag:V.ShowExportsPanel}),e.push({title:Tt._seperatorHtml}),e.push({title:t.portrait,icon:l.portrait,commandTag:V.Portrait}),e.push({title:t.landscape,icon:l.landscape,commandTag:V.Landscape}),e.push({title:t.pageSetup,icon:l.pageSetup,commandTag:V.ShowPageSetupPanel}),e.push({title:Tt._seperatorHtml}),e.push({title:t.showZoomBar,icon:l.showZoomBar,commandTag:V.ShowZoomBar}),e.push({title:Tt._seperatorHtml}),e.push({title:t.paginated,icon:l.paginated,commandTag:V.TogglePaginated}),e.push({title:t.print,icon:l.print,commandTag:V.Print}),e.push({title:Tt._seperatorHtml}),e.push({title:t.backwardHistory,icon:l.backwardHistory,commandTag:V.Backward}),e.push({title:t.forwardHistory,icon:l.forwardHistory,commandTag:V.Forward}),e},t}(Rt),Ht=function(e){function t(t,n,o){return e.call(this,t,n,o)||this}return s(t,e),t.prototype._initItems=function(){var e=[];return e.push({title:o.culture.Viewer.singleMode,icon:l.singleView,commandTag:V.Single}),e.push({title:o.culture.Viewer.continuousMode,icon:l.continuousView,commandTag:V.Continuous}),e.push({title:Tt._seperatorHtml}),e.push({title:o.culture.Viewer.wholePage,icon:l.fitWholePage,commandTag:V.FitWholePage}),e.push({title:o.culture.Viewer.pageWidth,icon:l.fitPageWidth,commandTag:V.FitPageWidth}),e},t}(Rt),Ft=function(e){function t(t,n,o){return e.call(this,t,n,o)||this}return s(t,e),t.prototype._initItems=function(){var t=e.prototype._initItems.call(this);return t.splice(2,0,{title:o.culture.Viewer.parameters,icon:c,commandTag:Lt._parameterCommandTag}),t},t}(Ot);!function(e){e[e.Rpx=0]="Rpx",e[e.Rdf=1]="Rdf",e[e.Rdlx=2]="Rdlx"}(dt||(dt={})),function(e){e[e.Image=3]="Image",e[e.Pdf=4]="Pdf",e[e.Html=5]="Html",e[e.Word=6]="Word",e[e.Xls=7]="Xls",e[e.Xml=8]="Xml",e[e.Svg=9]="Svg"}(gt||(gt={})),function(e){e[e.NotStarted=0]="NotStarted",e[e.Rendering=1]="Rendering",e[e.Rendered=2]="Rendered",e[e.Cancelling=3]="Cancelling",e[e.Cancelled=4]="Cancelled",e[e.Error=5]="Error"}(_t||(_t={})),function(e){e[e.InvalidCulture=0]="InvalidCulture",e[e.InvalidVersion=1]="InvalidVersion",e[e.UnknownReportType=2]="UnknownReportType",e[e.NoSuchReport=3]="NoSuchReport",e[e.ParametersNotSet=4]="ParametersNotSet",e[e.RuntimeIsBusy=5]="RuntimeIsBusy",e[e.InternalError=6]="InternalError",e[e.ParameterNotExists=7]="ParameterNotExists",e[e.NoAcceptableFormats=8]="NoAcceptableFormats",e[e.InvalidToken=9]="InvalidToken",e[e.UnsupportedFormat=10]="UnsupportedFormat",e[e.InvalidSetOfParameters=11]="InvalidSetOfParameters",e[e.MethodNotSupported=12]="MethodNotSupported",e[e.NoValidLicenseFound=13]="NoValidLicenseFound"}(mt||(mt={}));var Nt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lifeTime=6e5,t._drillthroughData=null,t._canChangeRenderMode=!1,t._uid=(new Date).getTime().toString(),t._isDisposed=!1,t._hasOutlines=void 0,t}return s(t,e),t.StateToStatus=function(e){switch(e){case _t.NotStarted:return R.notFound;case _t.Rendered:return R.completed;case _t.Rendering:return R.rendering;case _t.Cancelled:return R.stopped;default:throw"Not supported state: "+e}},t.ConvertFormat=function(e){switch(e){case"doc":case"docx":return gt.Word;case"html":case"svg":return gt.Svg;case"mhtml":return gt.Html;case"pdf":return gt.Pdf;case"tiff":case"png":return gt.Image;case"xml":return gt.Xml;case"xlsx":case"xls":return gt.Xls;default:throw"Not supported format: "+e}},t.IsError=function(e){return!!(e&&e.json&&e.json.Error)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoRun",{get:function(){return this._autoRun},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canChangeRenderMode",{get:function(){return this._canChangeRenderMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parameters",{get:function(){return this._parameters||[]},enumerable:!0,configurable:!0}),t.prototype.getStatus=function(){var e=this,n=new F;return this._isDisposed?n.resolve({status:R.cleared}):this._token?(this._ajax(this.serviceUrl+"/GetStatus",{method:"POST",data:{token:this._token}}).then((function(o){var r=t.StateToStatus(o.json.LoadState),i={errorList:o.json.Error?[o.json.Error.Description]:[],pageCount:o.json.AvailablePages,hasOutlines:!!e._hasOutlines,progress:0,status:r};r===R.completed&&null==e._hasOutlines?e.getOutlines(!0).then((function(t){i.hasOutlines=e._hasOutlines=(t||[]).length>0,n.resolve(i)})):n.resolve(i)}),(function(t){n.reject(e._getError(t))})),n):n.resolve({status:R.notFound})},t.prototype.setPageSettings=function(e){throw He._abstractMethodException},t.prototype.getBookmark=function(e){var t=new F,n=e.split("|");return t.resolve({pageIndex:parseInt(n[0],10)-1,pageBounds:function(e){if(e){var t=e.split(" ");return{x:H.convertValue(parseFloat(t[0]),k.Dip,k.Twip),y:H.convertValue(parseFloat(t[1]),k.Dip,k.Twip)}}}(n[1])})},t.prototype.executeCustomAction=function(e){switch(e.arKind){case Ve.Drillthrough:var t=JSON.parse(e.data);return(new F).resolve(t);case Ve.Toggle:return this.processOnClick(e.data);default:return(new F).reject("Not implemented action: "+e.arKind)}},t.prototype.load=function(e){var t=this,n=[];if(e&&Object.keys(e).forEach((function(t){0===t.indexOf("parameters.")&&(n.push({Name:t.substring(11),Value:e[t]}),delete e[t])})),this._drillthroughData)return n.length&&this._mergeParameters(n,this._drillthroughData.Parameters||[]),this.loadDrillthroughReport(this._drillthroughData);var o=new F;return this._ajax(this.serviceUrl+"/OpenReport",{method:"POST",data:this._merge(e,{acceptedFormats:[gt.Svg],culture:"en-US",lifeTime:this._lifeTime/1e3,reportPath:this.filePath,version:4})}).then((function(e){t._hasDelayedContent=e.json.HasDelayedContent,t._autoRun=!!e.json.AutoRun,t._documentFormat=e.json.DocumentFormat,t._parameters=(e.json.ParameterCollection||[]).map((function(e){return t._convertFromServiceParameter(e)})),t._token=e.json.Token,t._isDisposed=!1;var n=new Date,o=new Date(n.getTime()+t._lifeTime);return{expiredDateTime:o,loadedDateTime:n,features:{nonPaginated:!1,paginated:!0,pageSettings:!1,textSearchInPaginatedMode:!0},pageSettings:{height:new H(1056,k.Dip),width:new H(816,k.Dip),leftMargin:new H(48,k.Dip),rightMargin:new H(48,k.Dip),topMargin:new H(48,k.Dip),bottomMargin:new H(48,k.Dip),paginated:!0},status:{errorList:e.json.Error?[e.json.Error.Description]:[],expiredDateTime:o,pageCount:0,progress:0,status:R.loaded}}})).then((function(e){t.getReportProperty("ChangeRenderModeSupported").then((function(r){if(t._canChangeRenderMode=!!r,n&&n.length){var i=t._mergeParameters(n,t._parameters);t.setParameters(i).then((function(t){o.resolve(e)}))}else o.resolve(e)}))})).catch((function(e){o.reject(t._getError(e))})),o},t.prototype.loadDrillthroughReport=function(e){var t=this,n=new F;return this._ajax(this.serviceUrl+"/OpenDrillthroughReport",{method:"POST",data:{token:this._token,lifeTime:this._lifeTime/1e3,reportPath:e.ReportName}}).then((function(r){t.dispose(!1).then((function(){t._hasDelayedContent=r.json.HasDelayedContent,t._autoRun=!!r.json.AutoRun,t._documentFormat=r.json.DocumentFormat,t._parameters=(r.json.ParameterCollection||[]).map((function(e){return t._convertFromServiceParameter(e)})),t._token=r.json.Token,t._isDisposed=!1;var i=new Date,a=new Date(i.getTime()+t._lifeTime),s={expiredDateTime:a,loadedDateTime:i,features:{nonPaginated:!1,paginated:!0,pageSettings:!1,textSearchInPaginatedMode:!0},pageSettings:{height:new H(1056,k.Dip),width:new H(816,k.Dip),leftMargin:new H(48,k.Dip),rightMargin:new H(48,k.Dip),topMargin:new H(48,k.Dip),bottomMargin:new H(48,k.Dip),paginated:!0},status:{errorList:r.json.Error?[r.json.Error.Description]:[],expiredDateTime:a,pageCount:0,progress:0,status:R.loaded}};t.getReportProperty("ChangeRenderModeSupported").then((function(r){t._canChangeRenderMode=!!r,(0,o.isArray)(e.Parameters)&&e.Parameters.length?t.setParameters(e.Parameters).then((function(e){n.resolve(s)})):n.resolve(s)}))}))}),(function(e){n.reject(t._getError(e))})),n},t.prototype.processOnClick=function(e){var t=this,n=new F;return this._ajax(this.serviceUrl+"/ProcessOnClick",{method:"POST",data:{token:this._token,data:{Action:"toggle",Data:e}}}).then((function(e){n.resolve({status:R.rendering})}),(function(e){n.reject(t._getError(e))})),n},t.prototype.getReportProperty=function(e){return this._ajax(this.serviceUrl+"/GetReportProperty",{method:"POST",data:{token:this._token,propertyName:e}}).then((function(e){return e.json.Error?null:e.json.PropertyValue})).catch((function(e){return null}))},t.prototype.render=function(e){var t=this;return this._ajax(this.serviceUrl+"/RunReport",{method:"POST",data:{token:this._token}}).then((function(e){return t._isDisposed=!1,{errorList:e.json.Error?[e.json.Error.Description]:[],status:R.rendering}}))},t.prototype.setDrillthroughData=function(e){this._drillthroughData=e},t.prototype.dispose=function(e){var t=this;return void 0===e&&(e=!0),this._token?this._ajax(this.serviceUrl+"/CloseReport",{method:"POST",async:e,data:{token:this._token}}).then((function(){return t._isDisposed=!0,t._token=null,t._hasOutlines=void 0,{status:R.cleared}})):new F},t.prototype.getOutlines=function(e){return void 0===e&&(e=!1),this._getBookmarks(-1,0,e?1:100,!e)},t.prototype._getError=function(e){var n=e;return t.IsError(n)?'ErrorCode: "'+n.json.Error.ErrorCode+'". Description: "'+n.json.Error.Description+'"':e.responseText},t.prototype._getBookmarks=function(e,t,n,o){var r=this;void 0===o&&(o=!0);var i=new F;return this._ajax(this.serviceUrl+"/GetBookmarks",{method:"POST",data:{token:this._token,parentId:e,fromChild:t,count:n}}).then((function(a){var s=(a.json.Bookmarks||[]).map((function(e){return{caption:e.Name,children:e.ChildrenCount>0?function(){return r._getBookmarks(e.ID,0,n)}:null,position:{pageBounds:{height:H.convertValue(e.Size.Width||0,k.Inch,k.Twip),width:H.convertValue(e.Size.Height||0,k.Inch,k.Twip),x:H.convertValue(e.Location.X||0,k.Inch,k.Twip),y:H.convertValue(e.Location.Y||0,k.Inch,k.Twip)},pageIndex:e.Page},target:""}})),u=t+s.length;!o||u>=a.json.ChildrenCount||u>=1e5?i.resolve(s):r._getBookmarks(e,u,n).then((function(e){i.resolve(s.concat(e))}))})),i},t.prototype.renderToFilter=function(e){var n=this,o=new F;return this.getRenderToFilterUrl(e).then((function(r){n._ajax(r+"&WebViewerControlClientId="+n._uid+(e.outputRange?"&Page="+e.outputRange:""),{method:"GET",parseResponse:!1}).then((function(e){o.resolve(e.xhr)}),(function(r){t.IsError(r)&&r.json.Error.ErrorCode==mt.RuntimeIsBusy?setTimeout((function(){return n.renderToFilter(e)}),n.getPingTimeout()):o.reject(r)}))})),o},t.prototype.search=function(e){var t=new F;return this._ajax(this.serviceUrl+"/Search",{method:"POST",data:{token:this._token,options:{Text:e.text,MatchCase:e.matchCase,WholeWord:e.wholeWord},startFrom:{PageIndex:-1},numberOfResults:100}}).then((function(e){var n=e.json.SearchResults.map((function(e){return{nearText:e.DisplayText,positionInNearText:e.TextStart,pageIndex:e.PageIndex,boundsList:[{height:H.convertValue(e.ItemArea.Height||0,k.Inch,k.Twip),width:H.convertValue(e.ItemArea.Width||0,k.Inch,k.Twip),x:H.convertValue(e.ItemArea.Left||0,k.Inch,k.Twip),y:H.convertValue(e.ItemArea.Top||0,k.Inch,k.Twip)}]}}));t.resolve(n)}),(function(e){return t.reject(e)})),t},t.prototype.setParameters=function(e){var n=this,o=new F;return this._ajax(this.serviceUrl+"/SetParameters",{method:"POST",data:{token:this._token,parametersSetAtClient:(e||[]).map((function(e){return n._convertToServiceParameter(e)}))}}).then((function(e){o.resolve(n._parameters=(e.json.ParameterCollection||[]).map((function(e){return n._convertFromServiceParameter(e)})))})).catch((function(e){t.IsError(e)&&e.json.Error.ErrorCode==mt.ParametersNotSet?o.resolve(n._parameters=(e.json.ParameterCollection||[]).map((function(e){return n._convertFromServiceParameter(e)}))):o.reject(e)})),o},t.prototype.validateParameter=function(e){return this._ajax(this.serviceUrl+"/ValidateParameter",{method:"POST",data:{token:this._token,parametersSetAtClient:this._convertToServiceParameter(e)}}).then((function(e){return null}))},t.prototype.getRenderToFilterUrl=function(e){var n=this,o=new F;return this._ajax(this.serviceUrl+"/GetRenderedReportLink",{method:"POST",data:{token:this._token}}).then((function(e){o.resolve(e.json.ReportLink.Uri)}),(function(r){t.IsError(r)&&r.json.Error.ErrorCode==mt.RuntimeIsBusy?setTimeout((function(){return n.getRenderToFilterUrl(e)}),n.getPingTimeout()):o.reject(r)})),o},t.prototype.getExportedUrl=function(e){var n=this,r=t.ConvertFormat(e.format),i=function(){var t={FileName:n.getFileName()};return r==gt.Pdf&&(t.EmbedFonts="All"),r==gt.Image&&("png"===e.format&&(t.ImageType="PNG"),e.outputRange&&(t.StartPage=e.outputRange.toString(),t.EndPage=e.outputRange.toString()),e.resolution&&(t.DpiX=e.resolution.toString(),t.DpiY=e.resolution.toString())),e.printing&&r==gt.Pdf&&(t.PrintOnOpen=!0),t}(),a=new F;return this._ajax(this.serviceUrl+"/GetExportedReportLink",{method:"POST",data:{token:this._token,format:r,exportingParameters:i,pageRange:null}}).then((function(t){a.resolve(t.json.ReportLink.Uri+((0,o.isNumber)(e.outputRange)?"&outputRange="+e.outputRange:"")+(e.printing?"":"&Attachment=1"))}),(function(o){t.IsError(o)&&o.json.Error.ErrorCode==mt.RuntimeIsBusy?setTimeout((function(){return n.getExportedUrl(e)}),n.getPingTimeout()):a.reject(o)})),a},t.prototype.getPingTimeout=function(){return 1e3},t.prototype.getSupportedExportDescriptions=function(){var e=new F;return e.resolve([{name:"TIFF image",format:"tiff"},{name:"Adobe PDF",format:"pdf"},{name:"Web archive (MHTML)",format:"mhtml"},{name:"Microsoft Word",format:"doc"},{name:"Open XML Excel",format:"xlsx"},{name:"XML document",format:"xml"}]),e},t.prototype.getFeatures=function(){throw He._abstractMethodException},t.prototype._ajax=function(e,t){var n=new F;return(t=t||{}).urlEncode=!1,this.httpRequest(e,t).then((function(e){var o={xhr:e};try{if(e.responseText&&!1!==t.parseResponse&&(o.json=JSON.parse(e.responseText).d),o.json&&o.json.Error)throw"";n.resolve(o)}catch(e){n.reject(o)}}),(function(e){n.reject(e)})),n},t.prototype._convertFromServiceParameter=function(e){var t=function(e,t){return null!=e&&Ae.DateTime,e};return e.Value=t(e.Value,e.ParameterType),e.AvailableValues=(e.AvailableValues||[]).map((function(n){return{Label:n.Label,Value:t(n.Value,e.ParameterType)}})),e},t.prototype._convertToServiceParameter=function(e){var t=function(e,t){return null!=e&&Ae.DateTime,e};return e.Value=t(e.Value,e.ParameterType),e.Values&&e.Values.forEach((function(n){n.Value=t(n.Value,e.ParameterType)})),e},t.prototype._merge=function(e,t){if(e&&t){for(var n in e)t[n]=e[n];return t}},t.prototype._mergeParameters=function(e,t){var n=[],o=t.map((function(t){var o=t.Name.toLowerCase();n.push(o);var r=e.filter((function(e){return o===e.Name.toLowerCase()}));return r.length?(t.Value=r[0].Value,t):t}));return o.push.apply(o,e.filter((function(e){return n.indexOf(e.Name.toLowerCase())<0}))),o},t.prototype._parseXml=function(e){return(new DOMParser).parseFromString(e,"text/xml")},t}(Re),zt=function(e){function t(t,n){return e.call(this,t,n)||this}return s(t,e),Object.defineProperty(t.prototype,"autoRun",{get:function(){return this._innerService.autoRun},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"encodeRequestParams",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasParameters",{get:function(){var e=this._innerService.parameters;return e&&e.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasThumbnails",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_innerService",{get:function(){return this.service},enumerable:!0,configurable:!0}),t.prototype.getParameters=function(){var e=new F,t=this._convertParameters(this._innerService.parameters);return e.resolve(t)},t.prototype.setParameters=function(e){var t=this,n=new F,r=[],i={};return this._innerService.parameters.forEach((function(e){i[e.Name]=e})),Object.keys(e).forEach((function(t){var n;r.push(n={AllowEmpty:i[t].AllowEmpty,DateOnly:i[t].DateOnly,MultiLine:i[t].MultiLine,MultiValue:i[t].MultiValue,Name:t,Nullable:i[t].Nullable,ParameterType:i[t].ParameterType}),n.MultiValue&&(0,o.isArray)(e[t])?n.Values=e[t].map((function(e){return{Value:e}})):n.Value=e[t]})),this._innerService.setParameters(r).then((function(e){t._convertParameters(e.filter((function(e){return e.State!==je.OK}))),n.resolve(t._convertParameters(e))})),n},t.prototype.print=function(e){this.getExportedUrl({format:"pdf",printing:!0},!0).then((function(e){if(e)try{var t=window.open(e,"_blank");t&&t.focus()}catch(t){window.location.assign(e+"&Attachment=1")}}))},t.prototype._createDocumentService=function(e){return new Nt(e,this.httpHandler)},t.prototype._getIsDisposed=function(){return e.prototype._getIsDisposed.call(this)||this._innerService.isDisposed},t.prototype._updateExecutionInfo=function(t){e.prototype._updateExecutionInfo.call(this,t)},t.prototype._checkIsLoadCompleted=function(e){return e.status===R.completed||e.status===R.stopped},t.prototype._convertParameters=function(e){return e.map((function(e){return{allowedValues:e.AvailableValues&&e.AvailableValues.length?e.AvailableValues.map((function(e){return{key:e.Label,value:e.Value}})):void 0,allowBlank:e.AllowEmpty,dataType:e.ParameterType===Ae.Boolean?P.Boolean:e.ParameterType===Ae.DateTime?P.DateTime:e.ParameterType===Ae.Float?P.Float:e.ParameterType===Ae.Integer?P.Integer:P.String,error:e.ExtendedErrorInfo,hidden:!1,name:e.Name,nullable:!!e.Nullable,maxLength:0,multiValue:e.MultiValue,prompt:e.Prompt,value:e.MultiValue&&e.Values&&e.Values.length?e.Values.map((function(e){return e.Value})):e.Value}}))},t}(Fe),Lt=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o._initSidePanelParameters(),o}return s(t,e),t.prototype._getProductInfo=function(){return"QNI5,ReportViewer"},Object.defineProperty(t.prototype,"reportName",{get:function(){return this._reportName},set:function(e){e!=this._reportName&&(this._reportName=e,this._needBindDocumentSource(),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paginated",{get:function(){return this._innerPaginated},set:function(e){this._innerPaginated=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parameters",{get:function(){return this._clientParameters},set:function(e){e!=this._clientParameters&&(this._clientParameters=e,this._needBindDocumentSource(),this.invalidate())},enumerable:!0,configurable:!0}),t.getReportNames=function(e,t,n){return Ne.getReportNames(e,t,n)},t.getReports=function(e,t,n,o){return Ne.getReports(e,t,n,o)},t.prototype.onQueryLoadingData=function(t){var n=this;this.parameters&&Object.keys(this.parameters).forEach((function(e){return t.data["parameters."+e]=n.parameters[e]})),e.prototype.onQueryLoadingData.call(this,t)},t.prototype._globalize=function(){e.prototype._globalize.call(this);var t=o.culture.Viewer;this._gParameterTitle.textContent=t.parameters},t.prototype._executeAction=function(n){if(e.prototype._executeAction.call(this,n),!this._actionIsDisabled(n)&&n===t._parameterCommandTag)o.Control.getControl(this._sidePanel).active(this._parametersPageId)},t.prototype._executeCustomAction=function(t){if(this._isArReport()&&t.arKind===Ve.Drillthrough){var n=JSON.parse(t.data),o=this._getDocumentSource();o._innerService.setDrillthroughData(n),o._updateIsLoadCompleted(!1),this._loadDocument(o,!0,!1)}else e.prototype._executeCustomAction.call(this,t)},t.prototype._actionIsDisabled=function(n){return n===t._parameterCommandTag?!this._innerDocumentSource||!this._innerDocumentSource.hasParameters:e.prototype._actionIsDisabled.call(this,n)},t.prototype._initHamburgerMenu=function(e){this._hamburgerMenu=new Ft(this,e)},t.prototype._initSidePanelParameters=function(){var e=this,t=o.Control.getControl(this._sidePanel),n=t.addPage(o.culture.Viewer.parameters,c,2);this._parametersPageId=n.id,this._gParameterTitle=n.outContent.querySelector(".wj-tabtitle"),n.format((function(n){e._paramsEditor=new ae(n.content),e._paramsEditor.commit.addHandler((function(){e._innerDocumentSource&&e._innerDocumentSource.hasParameters&&(e._showViewPanelMessage(),e._innerDocumentSource.setParameters(e._paramsEditor.parameters).then((function(t){var n=t||[],o=n.some((function(e){return!!e.error}));e._paramsEditor._reset(),o?e._paramsEditor.itemsSource=n:(e._resetDocument(),e._paramsEditor.isDisabled=!0,e._renderDocumentSource())})).catch((function(t){e._showViewPanelErrorMessage(Y(t))})),e._isMobileTemplate()&&t.collapse())})),e._paramsEditor.validate.addHandler((function(){e._innerDocumentSource&&e._innerDocumentSource.hasParameters&&(e._paramsEditor.isDisabled=!0,e._innerDocumentSource.setParameters(e._paramsEditor.parameters).then((function(t){e._paramsEditor.itemsSource=t,e._paramsEditor.isDisabled=!1,e._paramsEditor.savingParam=!1}),(function(t){e._paramsEditor.isDisabled=!1,e._paramsEditor.savingParam=!1})))}));var r=function(){var r=e._innerDocumentSource;r.status===R.cleared||r.status===R.notFound?q(n.content):r.status===R.rendering?e._paramsEditor.isDisabled=!0:r.status===R.completed&&(e._paramsEditor.isDisabled=!1);var i=r.status===R.loaded;(r.status===R.completed||i)&&(r.hasParameters?r.getParameters().then((function(a){a.filter((function(e){return!e.hidden})).length?(t.show(n),t.active(n)):t.hide(n),e._innerDocumentSource!=r||r.isDisposed||(e._paramsEditor.itemsSource=a,a.filter((function(e){return null==e.value&&!e.nullable&&!e.hidden})).length?(e._showViewPanelMessage(o.culture.Viewer.requiringParameters),e._updateUI(),o.Control.getControl(e._sidePanel).enable(e._parametersPageId)):i&&(e._paramsEditor.isDisabled=!0,e._renderDocumentSource()))})):t.hide(n))},i=function(){e._innerDocumentSource&&(X(e._documentEventKey,e._innerDocumentSource.statusChanged,r),r())};e._documentSourceChanged.addHandler(i),i()}))},Object.defineProperty(t.prototype,"_innerDocumentSource",{get:function(){return this._getDocumentSource()},enumerable:!0,configurable:!0}),t.prototype._loadDocument=function(t,n,o){void 0===n&&(n=!1),void 0===o&&(o=!0);var r=this._innerDocumentSource!==t&&!n,i=e.prototype._loadDocument.call(this,t,n,o);return t&&r&&X(this._documentEventKey,t.statusChanged,this._onDocumentStatusChanged,this),i},t.prototype._reRenderDocument=function(){this._renderDocumentSource()},t.prototype._onDocumentStatusChanged=function(){this._innerDocumentSource&&this._innerDocumentSource.status===R.loaded&&!this._innerDocumentSource.hasParameters&&this._innerDocumentSource.autoRun&&this._renderDocumentSource()},t.prototype._renderDocumentSource=function(){var e=this;if(this._innerDocumentSource){this._setDocumentRendering();var t=this._innerDocumentSource;t.render().then((function(n){return e._getStatusUtilCompleted(t)}))}},t.prototype._disposeDocument=function(t){void 0===t&&(t=!0),this._innerDocumentSource&&G(this._documentEventKey,this._innerDocumentSource.statusChanged),e.prototype._disposeDocument.call(this,t)},t.prototype._setDocumentRendering=function(){this._innerDocumentSource.status=R.rendering,e.prototype._setDocumentRendering.call(this)},t.prototype._getSource=function(){return this.filePath?this._isArReport()?new zt({serviceUrl:this.serviceUrl,filePath:this.filePath},this):new Ne({serviceUrl:this.serviceUrl,filePath:this.filePath,reportName:this.reportName,paginated:this.paginated},this):null},t.prototype._supportsPageSettingActions=function(){return!0},t.prototype.refresh=function(t){void 0===t&&(t=!0),e.prototype.refresh.call(this,t),t&&this._paramsEditor.refresh()},t.prototype._isArReport=function(){return!!this.filePath&&oe(this.filePath,".rdlx",!0)},t.prototype._createPage=function(t,n){return this._isArReport()?new qe(this._getDocumentSource(),t,n):e.prototype._createPage.call(this,t,n)},t.prototype._actionElementClicked=function(t){if(this._isArReport()){var n=this._getActionInfo(t);n&&n.arKind===Ve.Hyperlink?window.open(n.data,"_blank"):e.prototype._actionElementClicked.call(this,t)}else e.prototype._actionElementClicked.call(this,t)},t.prototype._getActionInfo=function(t){if(!this._isArReport())return e.prototype._getActionInfo.call(this,t);var n=t.attributes["arsvg:data-action-type"].value,o=t.attributes["arsvg:data-action-data"].value.replace(/&quot;/g,'"'),r=t.attributes["arsvg:data-action-page"].value;if(n){if(n===Ve.Bookmark)return{kind:T.Bookmark,data:o?r+"|"+o:r,arKind:n};return{kind:T.Custom,data:o,arKind:n}}return null},t._parameterCommandTag=99,t}(Tt);(0,o._registerModule)("wijmo.viewer",a)}}]);
//# sourceMappingURL=2569.0dccc005.chunk.js.map