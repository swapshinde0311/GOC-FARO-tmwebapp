"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[622,8149,5841,8222],{25522:(t,e,s)=>{s.r(e),s.d(e,{default:()=>v});var i=s(65043),n=s(97508),r=s(65187),o=(s(92342),s(63973),s(67907)),a=s(39424),l=s(40854),p=s.n(l),h=(s(60663),s(72067)),c=s(69062),u=s(72711),d=s(54651),m=s(10766),g=s(80297),f=s(40252),_=s(70579);class y extends i.Component{constructor(){super(...arguments),this.state={terminalMessageList:[],toastMessages:[],isShowToastMessage:!1,showSummaryPage:!1,isShipment:!0,pendingShipmentCount:0,pendingReceiptCount:0,terminalMsgRefreshInterval:30,bayQueueInfoRefreshInterval:60,kpiList:[],showTipModal:!1,tipSuccess:!1,tipMessage:"",isKPILoading:!0},this.getKPIs=()=>{let t={PageName:a.LV,TransportationType:"ROAD",InputParameters:[]};p()(h.dxq,c.tW(t,this.props.tokenDetails.tokenInfo)).then((t=>{var e=t.data;!0===e.IsSuccess?this.setState({kpiList:e.EntityResult.ListKPIDetails,isKPILoading:!1}):(this.setState({kpiList:[],isKPILoading:!1}),console.log("Error in Dashboard KPIList:",e.ErrorList))})).catch((t=>{this.setState({kpiList:[],isKPILoading:!1}),console.log("Error while getting Dashboard KPIList:",t)}))}}componentDidMount(){try{this.getPendingTransactionCount(),this.getTerminalMessage(),this.getMobileLookupData(),this.getKPIs()}catch(t){console.log("Error occured in UserOverViewComposite ComponentDidMount",t)}}componentWillUnmount(){this.stopTerminalMessageTimer()}success(t){this.showMessage(!0,!0,t)}failed(t){this.showMessage(!0,!1,t)}showMessage(t,e,s){this.setState({showTipModal:t,tipSuccess:e,tipMessage:s})}getPendingTransactionCount(){p()(h.p6W,c.tW({},this.props.tokenDetails.tokenInfo)).then((t=>{let e=t.data;!0===e.IsSuccess?this.setState({pendingShipmentCount:e.EntityResult.Table[0].PendingShipmentCount,pendingReceiptCount:e.EntityResult.Table[0].PendingReceiptCount}):(this.failed(e.ErrorList[0]),console.log("Failed in RoadSummaryComposite getTransactionList:",e.ErrorList))})).catch((t=>{this.failed("error"),console.log("Error in RoadSummaryComposite getTransactionList:",t)}))}startTerminalMessageTimer(){let t=parseInt(this.state.terminalMsgRefreshInterval);this.terminalMessageTimer=setInterval((()=>{this.getTerminalMessage()}),1e3*t)}stopTerminalMessageTimer(){null!=this.terminalMessageTimer&&(clearInterval(this.terminalMessageTimer),this.terminalMessageTimer=null)}getMobileLookupData(){p()(h.xAA+"?LookUpTypeCode=Mobile",c.Jm(this.props.tokenDetails.tokenInfo)).then((t=>{let e=t.data,s=30,i=60;!0===e.IsSuccess&&(s=parseInt(e.EntityResult.TerminalMessageRefreshInterval),i=parseInt(e.EntityResult.UserBayQueueInfoRefreshInterval)),this.setState({terminalMsgRefreshInterval:s,bayQueueInfoRefreshInterval:i},(()=>this.startTerminalMessageTimer()))}))}catch(t){console.log("BayAllocationDetailsComposite:Error occured on getTerminalMessageRefreshInterval",t)}getTerminalMessage(){try{let t=[];p()(h.xAA+"?LookUpTypeCode=TerminalMessage",c.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{let s=e.data;!0===s.IsSuccess&&(t.push(s.EntityResult.Message1),t.push(s.EntityResult.Message2),t.push(s.EntityResult.Message3),t.push(s.EntityResult.Message4),t.push(s.EntityResult.Message5)),t=t.filter((t=>0!==t.replace(/(^s*)|(s*$)/g,"").length)),this.setState({terminalMessageList:t,isShowToastMessage:t.length>0},(()=>this.generateToastMessages()))}))}catch(t){console.log("BayAllocationDetailsComposite:Error occured on getTerminalMessage",t)}}generateToastMessages(){let t=this.state.terminalMessageList.map((t=>(0,_.jsx)(o.TranslationConsumer,{children:e=>(0,_.jsx)(u.Notification,{severity:"important",hasIcon:!1,children:e(t)})})));this.setState({toastMessages:t})}gotoRoadSummaryPage(t){this.setState({showSummaryPage:!0,isShipment:t},(()=>this.stopTerminalMessageTimer()))}backFromSummaryPage(){this.setState({showSummaryPage:!1},(()=>this.startTerminalMessageTimer()))}render(){const t=this.props.userDetails.EntityResult;return(0,_.jsx)(r.A,{children:(0,_.jsx)(o.TranslationConsumer,{children:e=>(0,_.jsxs)("div",{children:[this.state.showSummaryPage?(0,_.jsx)(d.default,{isShipment:this.state.isShipment,bayQueueInfoRefreshInterval:this.state.bayQueueInfoRefreshInterval,backToHomePage:()=>this.backFromSummaryPage()}):"",this.state.showSummaryPage?"":(0,_.jsx)("div",{className:"mobile-margin-top-10",children:(0,_.jsxs)(r.A,{children:[(0,_.jsx)("div",{className:"ui pl-1 mobile-align-items-start",children:(0,_.jsxs)("div",{className:"section mt-sm-2 mt-lg-0 mobile-padding-0-20",children:[(0,_.jsx)("span",{className:"icon-Driver mobile-margin-right-10"}),(0,_.jsx)("span",{children:e("Header_Welcome")+" "+t.Firstname})]})}),(0,_.jsxs)("div",{className:"mobile-pending-transaction",children:[(0,_.jsxs)("div",{className:"mobile-pending-shipment-card",onClick:()=>this.gotoRoadSummaryPage(!0),children:[(0,_.jsx)("div",{className:"mobile-pending-transaction-text",children:e("TruckShipment")}),(0,_.jsxs)("div",{className:"mobile-pending-transaction-number",children:[this.state.pendingShipmentCount," ",e("Pending")]})]}),(0,_.jsxs)("div",{className:"mobile-pending-receipt-card",onClick:()=>this.gotoRoadSummaryPage(!1),children:[(0,_.jsx)("div",{className:"mobile-pending-transaction-text",children:e("TruckReceipt")}),(0,_.jsxs)("div",{className:"mobile-pending-transaction-number",children:[this.state.pendingReceiptCount," ",e("Pending")]})]})]}),(0,_.jsx)("div",{className:"mobile-terminal-message",children:this.state.isShowToastMessage?this.state.toastMessages:""}),(0,_.jsx)("div",{className:"mb-3",style:{paddingLeft:"20px",paddingRight:"15px"},children:(0,_.jsx)(r.A,{children:this.state.isKPILoading?(0,_.jsx)(f.A,{message:"Loading"}):(0,_.jsx)(g.A,{kpiList:this.state.kpiList,pageName:"DriverPortal",isChartExport:!1,isChartFullscreen:!1})})})]})}),(0,_.jsx)(m.A,{isSuccess:this.state.tipSuccess,isOpen:this.state.showTipModal,message:this.state.tipMessage,handleClose:()=>{this.setState({showTipModal:!1})}})]})})})}}const v=(0,n.Ng)((t=>({userDetails:t.getUserDetails.userDetails,tokenDetails:t.getUserDetails.TokenAuth})))(y)},6890:(t,e,s)=>{s.d(e,{x:()=>o});var i=s(728),n=s(65043),r=function(){var t=function(e,s){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])})(e,s)};return function(e,s){function i(){this.constructor=e}t(e,s),e.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}}(),o=function(t){function e(s,r,o){var a=t.call(this,s)||this;a._objPropHash={},a._isMounted=!1,a._mountedCBs=[],a._hostRef=function(t){return a._hostRefValue=t},a._beforeRender=new i.Event,a._afterRender=new i.Event,a._beforeWillUnmount=new i.Event,a._afterWillUnmount=new i.Event,a._beforeDidUpdate=new i.Event,a._afterDidUpdate=new i.Event,e._reactMajorVersion||(e._reactMajorVersion=parseInt(n.version)),a.props=s,a.controlType=r;for(var l=0,p=o&&o.objectProps||[];l<p.length;l++){var h=p[l];a._objPropHash[h]=!0}return a}return r(e,t),e.prototype.render=function(){this._onBeforeRender();var t=this._renderImpl();return this._onAfterRender(),t},e.prototype.componentDidMount=function(){var t=this;if(this._isChild()){var s=this.props[e._propsParent];s&&s._mountedCB((function(){t._setParent(s)}))}else this._prepareControl();return this.control},e.prototype.componentWillUnmount=function(){this._onBeforeWillUnmount(),this._siblingInsertedEH&&this._getElement().removeEventListener("DOMNodeInserted",this._siblingInsertedEH);var t=this.control;if(t)if(this._isChild()){var e=this._getParentProp();if(e){var s=this.parent.control[e];if((0,i.isArray)(s)){var n=s.indexOf(t);n>-1&&s.splice(n,1)}}}else t instanceof i.Control&&setTimeout((function(){t.hostElement&&(t._orgOuter=null,t.dispose())}));this._onAfterWillUnmount()},e.prototype.shouldComponentUpdate=function(t){return!0},e.prototype.componentDidUpdate=function(t){this._onBeforeDidUpdate();var e=this.control;this._copy(e,this.props,t),this._onAfterDidUpdate()},e.prototype._mountedCB=function(t){this._isMounted?t():this._mountedCBs.push(t)},e.prototype._renderImpl=function(){var t={};t[e._propsParent]=this;var s=n.Children.map(this.props.children,(function(e){return e&&n.cloneElement(e,t)})),i={ref:this._hostRef};return this._isChild()&&(i.style={display:"none"}),n.createElement("div",i,s)},e.prototype._onBeforeRender=function(t){this._beforeRender.raise(this,t)},e.prototype._onAfterRender=function(t){this._afterRender.raise(this,t)},e.prototype._onBeforeWillUnmount=function(t){this._beforeWillUnmount.raise(this,t)},e.prototype._onAfterWillUnmount=function(t){this._afterWillUnmount.raise(this,t)},e.prototype._onBeforeDidUpdate=function(t){this._beforeDidUpdate.raise(this,t)},e.prototype._onAfterDidUpdate=function(t){this._afterDidUpdate.raise(this,t)},e.prototype._createControl=function(){var t=this._isChild()?this._isParentInCtor()?this.parent.control:void 0:this._getElement();return new this.controlType(t)},e.prototype._prepareControl=function(){var t=this._getElement(),s=this.props;t&&!this._isChild()&&e._copyAttrs(t,s,i.Control._rxInputAtts);var n=this.control=this._createControl(),r=n instanceof i.Control,o=e;this._siblingId||(null==this.constructor[o._typeSiblingIdProp]&&(this.constructor[o._typeSiblingIdProp]=++o._siblingDirId+""),this._siblingId=this.constructor[o._typeSiblingIdProp]),t.setAttribute(o._typeSiblingIdProp,this._siblingId);var a={};for(var l in s){var p=s[l];this._ignoreProp(l)||(0,i.isUndefined)(p)||(l in n?a[l]=p:this._setHostAttribute(t,l,p))}r?n.initialize(a):this._copy(n,a,null,!0),this._isMounted=!0;var h=this._mountedCBs;this._mountedCBs=[];for(var c=0,u=h;c<u.length;c++)(0,u[c])();(0,i.isFunction)(s.initialized)&&s.initialized(n)},e.prototype._initParent=function(){var t=this._getParentProp();if(t){var e=this.parent.control,s=e[t];if((0,i.isArray)(s)){var n=this._getSiblingIndex();(n<0||n>=s.length)&&(n=s.length),s.splice(n,0,this.control),this._siblingInsertedEH=this._siblingInserted.bind(this),this._getElement().addEventListener("DOMNodeInserted",this._siblingInsertedEH)}else e[t]=this.control}},e.prototype._setParent=function(t){if(t!==this.parent){if(this.parent)throw"Wijmo child component is already attached to a different parent.";this.parent=t,this._prepareControl(),this._initParent()}},e.prototype._isChild=function(){return null!=this._parentProp||null!=this._parentInCtor},e.prototype._isParentInCtor=function(){return!0===this._parentInCtor},e.prototype._getParentProp=function(){return this.props.wjProperty||this._parentProp},e.prototype._getSiblingIndex=function(){var t=this._getElement(),s=t.parentElement;if(!s)return-1;for(var i=s.childNodes,n=-1,r=this._siblingId,o=0;o<i.length;o++){var a=i[o];if(1==a.nodeType&&a.getAttribute(e._typeSiblingIdProp)==r&&(++n,a===t))return n}return-1},e.prototype._siblingInserted=function(t){if(t.target===this._getElement()){var e=this._getSiblingIndex(),s=this.control,i=this.parent.control[this._getParentProp()],n=i.indexOf(s);e>=0&&n>=0&&e!==n&&(i.splice(n,1),e=Math.min(e,i.length),i.splice(e,0,s))}},e.prototype._copy=function(t,e,s,n){if(void 0===n&&(n=!1),t&&e){var r,o=t===this.control;for(var a in e)if(!this._ignoreProp(a)||!o){var l=e[a];if(a in t){if(this._isEvent(t,a))n&&(0,i.isFunction)(l)&&t[a].addHandler(l);else if(!s||!this._sameValue(s[a],l))if(null==l)t[a]=l;else if((0,i.isPrimitive)(l)||(0,i.isFunction)(l)||this._objPropHash[a]&&t===(r||(r=this.control)))t[a]=l;else if((0,i.isArray)(l)&&(0,i.isArray)(t[a])){var p=t[a],h=l;if(h.length==p.length)for(var c=0;c<h.length;c++)this._copy(p[c],h[c])}else(0,i.isObject)(l)&&this._copy(t[a],e[a])}else this._setHostAttribute(t.hostElement,a,e[a])}}},e.prototype._setHostAttribute=function(t,e,s){if(t)switch(e){case"className":var n=this._appliedClassName;n!==s&&((0,i.removeClass)(t,n),(0,i.addClass)(t,s),this._appliedClassName=s);break;case"style":(0,i.setCss)(t,s);break;default:null!=t[e]?t[e]=s:"string"==typeof s&&"$"!==e[0]&&t.setAttribute(e,s)}},e.prototype._sameValue=function(t,e){return t==e||i.DateTime.equals(t,e)},e.prototype._isEvent=function(t,e){var s=t&&t[e];return null!=s&&s instanceof i.Event},e.prototype._getElement=function(){return this._hostRefValue},e.prototype._ignoreProp=function(t){return"children"===t},e._copyAttrs=function(t,e,s){if(t)for(var i in e)i.match(s)&&t.setAttribute(i,e[i])},e.isInStrictMode=function(t){return!!(t.hasOwnProperty("_reactInternalFiber")&&1&t._reactInternalFiber.mode)},e._propsParent="$parent",e._typeSiblingIdProp="_wjSiblingIdProp",e._siblingDirId=0,e}(n.Component)},43024:(t,e,s)=>{function i(t){var e,s,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(s=i(t[e]))&&(n&&(n+=" "),n+=s);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function n(){for(var t,e,s=0,n="";s<arguments.length;)(t=arguments[s++])&&(e=i(t))&&(n&&(n+=" "),n+=e);return n}s.r(e),s.d(e,{clsx:()=>n,default:()=>r});const r=n},60663:()=>{}}]);
//# sourceMappingURL=622.2e5eaa47.chunk.js.map