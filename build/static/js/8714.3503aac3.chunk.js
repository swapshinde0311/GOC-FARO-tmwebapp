"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[8714],{18714:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Q});var a=i(65043),s=i(78374),o=i(72711),n=i(67907),r=i(69062),l=i(35861),d=i(7523),c=i(65187),h=i(85800),p=i(70579);function u(e){let{marineReceipt:t,modMarineReceipt:i,modAssociations:u,modTankAssociations:m,validationErrors:C,listOptions:g,selectedAssociations:R,onFieldChange:S,onDateTextChange:D,handleRowSelectionChange:y,handleCellDataEdit:T,handleTankCellDataEdit:A,handleAddAssociation:E,handleDeleteAssociation:b,onVesselSearchChange:x,onCarrierSearchChange:f,isEnterpriseNode:v,receiptCompartmentDetails:M,modReceiptCompartment:I,operationsVisibilty:N,viewTab:w,handleDeleteTankAssociation:L,handleAddTankAssociation:k,onTabChange:P,selectedTankAssociations:V,handleTankAssociationSelectionChange:j,selectedAttributeList:O,handleAttributeCellDataEdit:U,attributeValidationErrors:_,expandedRows:Q,expandedCompDetailRows:F,toggleExpand:B,handleCompAttributeCellDataEdit:H,onCarrierCompanyChange:W,isHSEInspectionEnable:q,isBondShow:G,isTransloading:z,compDetailsTab:Y,isSlotbookinginUI:K,updateEnableForConfigure:J}=e;const[$]=(0,n.useTranslation)(),[Z,X]=(0,a.useState)(!1),ee=(e,t)=>(0,p.jsx)(o.Select,{className:"selectDropwdown",value:u[e.rowIndex][e.field],fluid:!0,options:t,onChange:t=>T(t,e),indicator:"required",reserveSpace:!1,search:!0,noResultsMessage:$("noResultsMessage")}),te=e=>(0,p.jsx)(o.Input,{fluid:!0,value:m[e.rowIndex][e.field],onChange:t=>A(t,e),reserveSpace:!1}),ie=e=>(0,p.jsx)(o.Input,{fluid:!0,editable:!1,value:u[e.rowIndex][e.field],onChange:t=>T(t,e),reserveSpace:!1}),ae=e=>{X(e),this.props.onFieldChange("Bonded")},se=(e,t)=>(0,p.jsx)(o.Select,{className:"selectDropwdown",value:m[e.rowIndex][e.field],fluid:!0,options:t,onChange:t=>A(t,e),indicator:"required",reserveSpace:!1,search:!0,noResultsMessage:$("noResultsMessage")}),[oe,ne]=(0,a.useState)(!1),[re,le]=(0,a.useState)([]),de=e=>null!==e.value&&""!==e.value?e.value+" "+e.rowData.PlanQuantityUOM:e.value,ce=e=>{let i=I.findIndex((t=>t.CompartmentSeqNoInVehicle===e.rowData.CompartmentSeqNoInVehicle));return(0,p.jsx)("div",{children:!N.adjustPlan||t.ReceiptStatus!==d.a$.PARTIALLY_UNLOADED&&t.ReceiptStatus!==d.a$.INTERRUPTED&&t.ReceiptStatus!==d.a$.MANUALLY_UNLOADED&&t.ReceiptStatus!==d.a$.AUTO_UNLOADED&&t.ReceiptStatus!==d.a$.QUEUED||0===e.rowData.ReceiptCompartmentStatus||2===e.rowData.ReceiptCompartmentStatus||7===e.rowData.ReceiptCompartmentStatus||4===e.rowData.ReceiptCompartmentStatus||v?(0,p.jsx)(o.Input,{fluid:!0,disabled:!0,reserveSpace:!1}):(0,p.jsx)(o.Input,{fluid:!0,value:I[i].AdjustPlan,disabled:!1,onChange:t=>T(t,e),reserveSpace:!1})})},he=e=>{let i=I.findIndex((t=>t.CompartmentSeqNoInVehicle===e.rowData.CompartmentSeqNoInVehicle));return(0,p.jsx)("div",{children:!N.forceComplete||t.ReceiptStatus!==d.a$.PARTIALLY_UNLOADED&&t.ReceiptStatus!==d.a$.INTERRUPTED&&t.ReceiptStatus!==d.a$.MANUALLY_UNLOADED&&t.ReceiptStatus!==d.a$.AUTO_UNLOADED&&t.ReceiptStatus!==d.a$.QUEUED||0===e.rowData.ReceiptCompartmentStatus||2===e.rowData.ReceiptCompartmentStatus||7===e.rowData.ReceiptCompartmentStatus||4===e.rowData.ReceiptCompartmentStatus||v?(0,p.jsx)(o.Checkbox,{checked:I[i][e.field],disabled:!0}):(0,p.jsx)(o.Checkbox,{checked:I[i][e.field],disabled:!1,onClick:()=>{I[i][e.field]?T("",e):(le(e),ne(!0))}})})},pe=(e,t)=>{let i=[];return i=e.find((e=>e.TerminalCode===t)),i.attributeValidationErrors},ue=e=>{const t=Q.findIndex((t=>t.CompartmentSeqNoInVehicle===e.rowData.CompartmentSeqNoInVehicle))>=0;return(0,p.jsxs)("div",{onClick:()=>B(e.rowData,t),className:"compartmentIcon gridButtonFontColor",children:[(0,p.jsx)("span",{children:$(t?"Hide_Attributes":"View_Attributes")}),(0,p.jsx)(o.Icon,{root:"common",name:t?"caret-up":"caret-down",className:"margin_l10"})]})},me=e=>e.rowData.IsMandatory?(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{children:e.rowData.AttributeName}),(0,p.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]}):(0,p.jsx)("div",{children:(0,p.jsx)("span",{children:e.rowData.AttributeName})});function Ce(e){return Array.isArray(e.AttributesforUI)&&e.AttributesforUI.length>0?(0,p.jsx)("div",{className:"childTable ChildGridViewAllShipmentLoadingDetails",children:(0,p.jsxs)(s.bQ,{data:e.AttributesforUI,children:[v?(0,p.jsx)(s.bQ.Column,{className:"compColHeight",field:"TerminalCode",header:$("CompartmentTerminal"),editable:!1},"TerminalCode"):"",(0,p.jsx)(s.bQ.Column,{className:"compColHeight",header:$("CompartmentAttributeName"),renderer:me,editable:!1},"AttributeName"),(0,p.jsx)(s.bQ.Column,{className:"compColHeight",header:$("CompartmentAttributeValue"),renderer:ge})]})}):(0,p.jsx)("div",{className:"compartmentIcon",children:(0,p.jsx)("div",{style:{paddingRight:"87%"},children:$("CustomerInventory_NoRecordsFound")})})}const ge=e=>{const t=e.rowData;try{return t.DataType.toLowerCase()===d.pe.STRING.toLowerCase()||t.DataType.toLowerCase()===d.pe.INT.toLowerCase()||t.DataType.toLowerCase()===d.pe.FLOAT.toLowerCase()||t.DataType.toLowerCase()===d.pe.LONG.toLowerCase()||t.DataType.toLowerCase()===d.pe.DOUBLE.toLowerCase()?(0,p.jsx)(o.Input,{fluid:!0,value:t.AttributeValue,disabled:t.IsReadonly,onChange:t=>H(e,t),reserveSpace:!1}):t.DataType.toLowerCase()===d.pe.BOOL.toLowerCase()?(0,p.jsx)(o.Checkbox,{checked:"true"===t.AttributeValue.toString().toLowerCase(),disabled:t.IsReadonly,onChange:t=>H(e,t)}):t.DataType.toLowerCase()===d.pe.DATETIME.toLowerCase()?(0,p.jsx)(o.DatePicker,{fluid:!0,minuteStep:"5",value:null===t.AttributeValue||void 0===t.AttributeValue||""===t.AttributeValue?"":new Date(t.AttributeValue),disabled:t.IsReadonly,showYearSelector:"true",onChange:t=>H(e,t),reserveSpace:!1}):null}catch(i){console.log("TrailerDetails:Error occured on handleAttributeType",i)}};function Re(e){let t=[];return t.push(e),Array.isArray(t)&&t.length>0?(0,p.jsx)("div",{className:"childTable ChildGridViewAllShipmentLoadingDetails",children:(0,p.jsxs)(s.bQ,{data:t,children:[(0,p.jsx)(s.bQ.Column,{className:"compColHeight",field:"AdjustPlan",header:$("ViewMarineReceiptList_AdjustPlan"),renderer:e=>ce(e)},"AdjustPlan"),(0,p.jsx)(s.bQ.Column,{className:"compColHeight",field:"ForceComplete",header:$("ViewMarineReceiptList_ForceComplete"),renderer:e=>he(e)},"ForceComplete")]})}):(0,p.jsx)("div",{className:"compartmentIcon",children:(0,p.jsx)("div",{className:"gridButtonAlignLeft",children:$("CustomerInventory_NoRecordsFound")})})}return(0,p.jsx)(n.TranslationConsumer,{children:e=>(0,p.jsxs)("div",{className:"detailsContainer",children:[(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(o.Input,{fluid:!0,value:i.ReceiptCode,indicator:"required",disabled:""!==t.ReceiptCode,onChange:e=>S("ReceiptCode",e),label:e("Marine_ReceiptCompDetail_ShipmentNumber"),error:e(C.ReceiptCode),reserveSpace:!1})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(o.Select,{fluid:!0,placeholder:"Select",indicator:"required",label:e("Marine_ShipmentCompDetail_CarrierCompany"),value:i.CarrierCode,disabled:!J,options:g.carriers,onChange:e=>{W(e)},error:e(C.CarrierCode),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage"),onSearch:f})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(o.Select,{fluid:!0,placeholder:"Select",indicator:"required",label:e("Marine_ShipmentCompDetail_Vehicle"),value:i.VesselCode,disabled:!J,options:(0,l.r4)(g.vessels,e("Common_Select")),onChange:e=>{S("VesselCode",e)},error:e(C.VesselCode),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage"),onSearch:x})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(o.DatePicker,{fluid:!0,minuteStep:"5",value:null===i.ScheduledDate?"":new Date(i.ScheduledDate),disabled:!J,label:e("Marine_ShipmentCompDetail_ScheduledDate"),type:"datetime",disablePast:!1,indicator:"required",onChange:e=>S("ScheduledDate",e),displayFormat:(0,l.F1)(),error:e(C.ScheduledDate),onTextChange:(e,t)=>{D("ScheduledDate",e,t)},reserveSpace:!1})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(o.Input,{fluid:!0,value:i.ReceiptStatus,onChange:e=>S("ReceiptStatus",e),label:e("Receipt_ReceiptStatus"),reserveSpace:!1,disabled:!0})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(o.Select,{fluid:!0,placeholder:"Select",indicator:"required",label:e("Receipt_QuantityUOM"),value:i.QuantityUOM,disabled:!J,options:g.shipmentUOM,onChange:e=>{S("QuantityUOM",e)},error:e(C.QuantityUOM),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage")})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(o.Input,{fluid:!0,value:i.Description,disabled:!J,onChange:e=>S("Description",e),label:e("CarrierDetails_Desc"),error:e(C.Description),reserveSpace:!1})}),""!==t.ReceiptCode&&K?(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4 ddlSelectAll",children:(0,p.jsxs)("div",{className:"ui single-input fluid disabled",children:[(0,p.jsx)("div",{class:"ui input-label",children:(0,p.jsx)("span",{className:"input-label-message",children:e("ViewShipment_IsSlotBooked")})}),(0,p.jsx)("div",{className:"input-wrap",children:(0,p.jsx)("label",{style:{fontWeight:"bold"},children:i.SlotBooked?"Booked":"Not Booked"})})]})}):"",J&&""===t.ReceiptCode||v||!q?"":(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(o.Input,{fluid:!0,value:i.HSEInspectionStatus,label:e("Marine_ShipmentCompDetail_InspectionStatus"),reserveSpace:!1,disabled:!0})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(o.Select,{fluid:!0,placeholder:e("FinishedProductInfo_Select"),label:e("Cust_Status"),value:i.Active,options:[{text:e("ViewShipment_Ok"),value:!0},{text:e("ViewShipmentStatus_Inactive"),value:!1}],onChange:e=>S("Active",e),disabled:!J||""===t.ReceiptCode})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(o.Input,{fluid:!0,value:i.Remarks,label:e("Cust_Remarks"),onChange:e=>S("Remarks",e),indicator:i.Active!==t.Active?"required":"",error:e(C.Remarks),reserveSpace:!1,disabled:!J})}),v?(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(o.Select,{fluid:!0,placeholder:"Select",indicator:"required",label:e("TerminalCodes"),value:null===i.TerminalCodes||0===i.TerminalCodes.length?"":i.TerminalCodes[0],disabled:!J,options:(0,l.r4)(r.Zj(g.terminalCodes),e("Common_Select")),onChange:e=>S("TerminalCodes",e),error:e(C.TerminalCodes),reserveSpace:!1})}):"",J&&""===t.ReceiptCode||!v?"":(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(o.Input,{fluid:!0,placeholder:"",label:e("Shipment_LoadedTerminal"),value:t.ActualTerminalCode,disabled:!0})}),G?(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",style:{paddingTop:"25px"},children:(0,p.jsx)(o.Checkbox,{label:e("ViewReceiptStatus_ReceiptBond"),checked:Z||null!==t.BondNumber,onChange:e=>ae(e),disabled:!J})}):"",G&&(Z||null!==t.BondNumber)?(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(o.Input,{fluid:!0,indicator:"required",label:e("Receipt_BondedNo"),value:t.BondNumber,error:e(C.BondNumber),disabled:!J,onChange:e=>S("BondNumber",e),reserveSpace:!1})}):""]}),O.length>0?O.map((t=>(0,p.jsx)(c.A,{children:(0,p.jsx)(o.Accordion,{children:(0,p.jsx)(o.Accordion.Content,{className:"attributeAccordian",title:v?t.TerminalCode+" - "+e("Attributes_Header"):e("Attributes_Header"),children:(0,p.jsx)(h.n,{selectedAttributeList:t.attributeMetaDataList,handleCellDataEdit:U,attributeValidationErrors:pe(_,t.TerminalCode)})})})},t))):null,(0,p.jsx)("div",{children:(0,p.jsxs)(o.Tab,{defaultActiveIndex:w,className:"col-12",onTabChange:P,children:[(0,p.jsxs)(o.Tab.Pane,{title:e("Shipment_Compartment_Planning_Tab_Header"),children:[(0,p.jsx)("div",{className:"row compartmentRow",children:(0,p.jsx)("div",{className:"col col-md-12 col-lg-12 col-xl-12",children:(0,p.jsxs)("div",{className:"compartmentIconContainer",children:[(0,p.jsxs)("div",{onClick:J?E:"",className:"compartmentIcon",children:[(0,p.jsx)("div",{children:(0,p.jsx)(o.Icon,{root:"common",name:"badge-plus",size:"medium"})}),(0,p.jsx)("div",{className:"margin_l10",children:(0,p.jsx)("h5",{className:"font14",children:e("FinishedProductInfo_Add")})})]}),(0,p.jsxs)("div",{onClick:J?b:"",className:"compartmentIcon margin_l30",children:[(0,p.jsx)("div",{children:(0,p.jsx)(o.Icon,{root:"common",name:"delete",size:"medium"})}),(0,p.jsx)("div",{className:"margin_l10",children:(0,p.jsx)("h5",{className:"font14",children:e("DestAdd_Delete")})})]})]})})}),(0,p.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,p.jsx)("div",{className:"col-12 detailsTable",children:(0,p.jsxs)(s.bQ,{data:u,selectionMode:"multiple",selection:R,expandedRows:Q,rowExpansionTemplate:Ce,onSelectionChange:y,children:[(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"ShareholderCode",header:(0,l.i7)(e("Receipt_Shareholder")),editable:J,editFieldType:"text",customEditRenderer:e=>ee(e,g.shareholders)},"ShareholderCode"),(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"CompartmentSeqNoInVehicle",header:(0,l.i7)(e("Marine_ShipmentCompDetail_CompSeqInVehicle")),editable:J,editFieldType:"text",customEditRenderer:e=>ee(e,g.compSeqOptions)},"CompartmentSeqNoInVehicle"),(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"FinishedProductCode",header:(0,l.i7)(e("Marine_ShipmentCompDetail_ProductCode")),editable:J,editFieldType:"text",customEditRenderer:e=>(e=>{let t=[];return void 0!==g.FinishedProducts&&null!==g.FinishedProducts&&void 0!==g.FinishedProducts[e.rowData.ShareholderCode]&&Array.isArray(g.FinishedProducts[e.rowData.ShareholderCode])&&g.FinishedProducts[e.rowData.ShareholderCode].forEach((e=>t.push({text:e,value:e}))),ee(e,t)})(e)},"FinishedProductCode"),(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"SupplierCode",header:(0,l.i7)(e("Receipt_Supplier")),editable:J,editFieldType:"text",customEditRenderer:e=>(e=>{let t=[];if(void 0!==g.shareholderSuppliers&&null!==g.shareholderSuppliers){let i=g.shareholderSuppliers.filter((t=>t.ShareholderCode===e.rowData.ShareholderCode));i.length>0&&null!==i[0].SupplierOriginTerminalsList&&Object.keys(i[0].SupplierOriginTerminalsList).forEach((e=>t.push({text:e,value:e})))}return ee(e,t)})(e)},"SupplierCode"),(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"OriginTerminalCode",header:(0,l.i7)(e("Marine_ReceiptCompDetail_Origin")),editable:J,editFieldType:"text",customEditRenderer:e=>(e=>{let t=[],i=[];if(void 0!==g.shareholderSuppliers&&null!==g.shareholderSuppliers){let a=g.shareholderSuppliers.filter((t=>t.ShareholderCode===e.rowData.ShareholderCode));a.length>0&&null!==a[0].SupplierOriginTerminalsList&&(i=a[0].SupplierOriginTerminalsList),void 0!==i[e.rowData.SupplierCode]&&Array.isArray(i[e.rowData.SupplierCode])&&i[e.rowData.SupplierCode].forEach((e=>t.push({text:e,value:e})))}return ee(e,t)})(e)},"OriginTerminalCode"),(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"Quantity",header:(0,l.i7)(e("Marine_ShipmentCompDetail_Quantity")),editable:J,editFieldType:"text",renderer:e=>(e=>{const{value:t}=e;return"number"===typeof t&&null!==t?t.toLocaleString():t})(e),customEditRenderer:ie},"Quantity"),z?(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"IsTransloading",header:e("Marine_ReceiptCompDetail_Transloading"),renderer:e=>(e=>(0,p.jsx)("div",{children:(0,p.jsx)(o.Checkbox,{onChange:t=>T(t,e),disabled:!J,checked:e.rowData.IsTransloading})}))(e)},"IsTransloading"):"",(0,p.jsx)(s.bQ.Column,{className:"compColHeight",initialWidth:"170px",renderer:ue})]})})})]}),(0,p.jsxs)(o.Tab.Pane,{title:e("ShipmentTankPlanning"),children:[(0,p.jsx)("div",{className:"row compartmentRow",children:(0,p.jsx)("div",{className:"col col-md-12 col-lg-12 col-xl-12",children:(0,p.jsxs)("div",{className:"compartmentIconContainer",children:[(0,p.jsxs)("div",{onClick:J?k:"",className:"compartmentIcon",children:[(0,p.jsx)("div",{children:(0,p.jsx)(o.Icon,{root:"common",name:"badge-plus",size:"medium"})}),(0,p.jsx)("div",{className:"margin_l10",children:(0,p.jsx)("h5",{className:"font14",children:e("FinishedProductInfo_Add")})})]}),(0,p.jsxs)("div",{onClick:J?L:"",className:"compartmentIcon margin_l30",children:[(0,p.jsx)("div",{children:(0,p.jsx)(o.Icon,{root:"common",name:"delete",size:"medium"})}),(0,p.jsx)("div",{className:"margin_l10",children:(0,p.jsx)("h5",{className:"font14",children:e("DestAdd_Delete")})})]})]})})}),(0,p.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,p.jsx)("div",{className:"col-12 detailsTable",children:(0,p.jsxs)(s.bQ,{data:m,selectionMode:"multiple",selection:V,onSelectionChange:j,children:[(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"ShareholderCode",header:(0,l.i7)(e("Receipt_Shareholder")),editable:J,editFieldType:"text",customEditRenderer:e=>se(e,g.shareholders)},"ShareholderCode"),(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"CompartmentSeqNoInVehicle",header:(0,l.i7)(e("Marine_ReceiptCompDetail_CompSeqInVehicle")),editable:J,editFieldType:"text",customEditRenderer:e=>se(e,g.compSeqOptions)},"CompartmentSeqNoInVehicle"),(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"FinishedProductCode",header:(0,l.i7)(e("Receipt_Product")),editable:J,editFieldType:"text",customEditRenderer:e=>(e=>{let t=[];return void 0!==g.FinishedProducts&&null!==g.FinishedProducts&&void 0!==g.FinishedProducts[e.rowData.ShareholderCode]&&Array.isArray(g.FinishedProducts[e.rowData.ShareholderCode])&&g.FinishedProducts[e.rowData.ShareholderCode].forEach((e=>t.push({text:e,value:e}))),se(e,t)})(e)},"FinishedProductCode"),(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"BaseProductCode",header:(0,l.i7)(e("Marine_ReceiptCompDetail_BaseProduct")),editable:J,editFieldType:"text",customEditRenderer:e=>(e=>{let t=[];var i=[];return null!==g.baseProductDetails&&void 0!==g.baseProductDetails&&(i=g.baseProductDetails.ALLPROD),null!==g.additiveDetails&&void 0!==g.additiveDetails&&(i=i.concat(g.additiveDetails.ALLPROD)),void 0!==g.baseProductDetails&&null!==g.baseProductDetails&&i.length>0&&Object.values(i).forEach((e=>t.push({text:e,value:e}))),se(e,t)})(e)},"BaseProductCode"),(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"TankCode",header:(0,l.i7)(e("Marine_ReceiptCompDetail_Tank")),editable:J,editFieldType:"text",customEditRenderer:e=>se(e,g.tankCodeOptions)},"TankCode"),(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"PlannedQuantity",header:(0,l.i7)(e("Marine_ReceiptCompDetail_Quantity")),editable:J,editFieldType:"text",customEditRenderer:te},"PlannedQuantity")]})})})]}),Y.map((()=>(0,p.jsx)(o.Tab.Pane,{title:e("ViewReceiptList_CompartmentDetails"),disabled:J&&""===t.ReceiptCode,children:(0,p.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,p.jsx)("div",{className:"col-12 detailsTable",children:(0,p.jsxs)(s.bQ,{data:M,expandedRows:F,rowExpansionTemplate:Re,children:[(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"CompartmentSeqNoInVehicle",header:e("ViewMarineReceiptList_SeqNo")},"CompartmentSeqNoInVehicle"),(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"FinishedProductCode",header:e("ViewMarineReceiptList_ProductCode")},"FinishedProductCode"),(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"ReceiptCompartmentStatus",header:e("ViewMarineReceiptList_Status"),renderer:e=>(e=>0===e.value&&null!==e.value?d.gB.COMPLETED.toLocaleString():1===e.value&&null!==e.value?d.gB.EMPTY.toLocaleString():2===e.value&&null!==e.value?d.gB.FORCE_COMPLETED:3===e.value&&null!==e.value?d.gB.INTERRUPTED.toLocaleString():4===e.value&&null!==e.value?d.gB.OVER_UNLOADED.toLocaleString():5===e.value&&null!==e.value?d.gB.PART_UNLOADED.toLocaleString():6===e.value&&null!==e.value?d.gB.UNLOAD_NOTSTARTED.toLocaleString():7===e.value&&null!==e.value?d.gB.UNLOADING.toLocaleString():e.value)(e)},"ReceiptCompartmentStatus"),(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"PlannedQuantity",header:e("ViewMarineReceiptList_PlannedQuantity"),renderer:e=>de(e)},"PlannedQuantity"),(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"AdjustedPlanQuantity",header:e("ViewMarineReceiptList_RevisedPlannedQuantity"),renderer:e=>de(e)},"AdjustedPlanQuantity"),(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"UnloadedQuantity",header:e("ViewMarineReceiptList_UnloadedQuantity"),renderer:e=>de(e)},"UnloadedQuantity"),(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"AdjustPlan",header:e("ViewMarineReceiptList_AdjustPlan"),renderer:e=>ce(e)},"AdjustPlan"),(0,p.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"ForceComplete",header:e("ViewMarineReceiptList_ForceComplete"),renderer:e=>he(e)},"ForceComplete")]})})})})))]})}),(0,p.jsx)(n.TranslationConsumer,{children:e=>(0,p.jsxs)(o.Modal,{open:oe,size:"small",children:[(0,p.jsx)(o.Modal.Content,{children:(0,p.jsx)("div",{children:(0,p.jsx)("b",{children:e("ViewMarineReceipt_ForceCompleteConfirm")})})}),(0,p.jsxs)(o.Modal.Footer,{children:[(0,p.jsx)(o.Button,{type:"secondary",content:e("Cancel"),onClick:()=>ne(!1)}),(0,p.jsx)(o.Button,{type:"primary",content:e("PipelineReceipt_BtnSubmit"),onClick:()=>{ne(!1),T("",re)}})]})]})})]})})}u.defaultProps={isEnterpriseNode:!1,isSlotbookinginUI:!1};var m=i(9256),C=i(44192),g=i(46100),R=i(40854),S=i.n(R),D=i(72067),y=i(9966),T=i(50805),A=i(97508),E=(i(38726),i(43503)),b=i(93779),x=i(80312),f=i(28882),v=i(53536),M=i.n(v),I=i(40252),N=i(11981),w=i(14159),L=i(26039),k=i(12577),P=i(38044),V=i(15417),j=i(40510),O=i(39424),U=i(62900);class _ extends a.Component{constructor(){var e;super(...arguments),e=this,this.state={marineReceipt:M().cloneDeep(g.Gi),modMarineReceipt:{},modAssociations:[],modTankAssociations:[],modTankPlanAssociations:[],tempModTankAssociations:[],modTankPlan:[],vehicleDetails:{carrierCode:"",vehicleCompartments:[]},modVehicleDetails:{carrierCode:"",vehicleCompartments:[]},validationErrors:r.Th(C.RU),isReadyToRender:!1,shareholders:this.getShareholders(),terminalCodes:this.props.terminalCodes,shipmentUOM:[],Captains:[],vessels:[],vesselSearchOptions:[],FinishedProducts:{},baseProductDetails:{},tankCodeOptions:[],supplierDestinationOptions:{},compSeqOptions:[],shareholderSuppliers:[],associatedCompartments:[],saveEnabled:!1,selectedTankAssociations:[],selectedAll:!1,receiptCompartmentDetails:[],modReceiptCompartment:[],ViewUnloadingData:[],ViewUnloadingHideFields:[],isManualEntry:!1,viewAuditTrail:!1,isViewUnloading:!1,isNewReceipt:!1,clickRow:[],operationsVisibilty:{save:!1,authorizeToLoad:!1,closeReceipt:!1,viewAuditTrail:!1,viewUnloadingDetails:!1,printRAN:!1,viewBOD:!1,printBOD:!1,bSIOutbound:!1,adjustPlan:!1,forceComplete:!1,manualEntry:!1},finishedProductItems:[],attribute:[],attributeMetaDataList:[],compartmentAttributeMetaDataList:[],selectedAttributeList:[],selectedAssociations:[],attributeValidationErrors:[],expandedRows:[],expandedCompDetailRows:[],additiveDetails:[],length:0,carrierCompany:[],carrierOptions:[],carrierSearchOptions:[],isHSEInspectionEnable:!1,isBondShow:!1,isTransloading:!1,carrierShareholderMap:{},marineReceiptKPIList:[],showAuthenticationLayout:!1,tempMarineReceipt:{}},this.handleChange=(e,t)=>{try{"VesselCode"===e&&(null===t?this.setState({modAssociations:[],modTankAssociations:[],modTankPlanAssociations:[]}):this.getVessel(t,!0));const i=M().cloneDeep(this.state.modMarineReceipt),a=M().cloneDeep(this.state.validationErrors);"TerminalCodes"===e?(null===i[e]&&(i[e]=[]),i[e][0]=t,this.terminalSelectionChange([t]),this.getTankListForRole(t)):i[e]=t,"Active"===e&&i.Active!==this.state.marineReceipt.Active&&(i.Remarks=""),"Bonded"===e&&(a.BondNumber="BONDED_NO_CANT_BE_EMPTY_FOR_BONDED_RECEIPT_X"),"ReceiptCode"===e&&void 0!==this.state.modTankAssociations&&null!==this.state.modTankAssociations&&0!==this.state.modTankAssociations.length&&this.state.modTankAssociations.forEach((e=>{e.ReceiptCode=t})),"BondNumber"===e&&(i[e]=t),this.setState({modMarineReceipt:i}),void 0!==C.RU[e]&&(a[e]=r.jr(C.RU[e],t),this.setState({validationErrors:a}))}catch(i){console.log("MarineReceiptDetailsComposite:Error occured on handleChange",i)}},this.handleAddAssociation=()=>{if(!this.props.userDetails.EntityResult.IsArchived)try{if(this.state.modAssociations.length<this.state.modVehicleDetails.vehicleCompartments.length){let t=M().cloneDeep(this.state.modAssociations),i={AssociatedContractItems:null,AssociatedOrderItems:null,Attributes:[],CarrierCompanyCode:null,CompartmentCode:null,CompartmentSeqNoInVehicle:"",FinishedProductCode:null,OriginTerminalCode:null,Quantity:null,QuantityUOM:null,ReceiptCode:null,SequenceNo:0,ShareholderCode:this.props.selectedShareholder,SupplierCode:null,TrailerCode:null};var e=1;t.forEach((t=>{var i=t.SequenceNo;if(null!==i&&""!==i&&void 0!==i&&!isNaN(parseInt(i))){let t=parseInt(i);t>=e&&(e=t+1)}})),i.SequenceNo=e,i.QuantityUOM=this.state.modMarineReceipt.QuantityUOM,t.push(i),this.setState({modAssociations:t,selectedAssociations:[]},(()=>{if(!1===this.props.userDetails.EntityResult.IsEnterpriseNode){var e=M().cloneDeep(this.state.compartmentAttributeMetaDataList);e.length>0&&this.formCompartmentAttributes([e[0].TerminalCode])}else this.formCompartmentAttributes(this.state.modMarineReceipt.TerminalCodes)}))}}catch(t){console.log("MarineReceiptDetailsComposite:Error occured on handleAddAssociation",t)}},this.handleDeleteAssociation=()=>{if(!this.props.userDetails.EntityResult.IsArchived)try{if(null!=this.state.selectedAssociations&&this.state.selectedAssociations.length>0&&this.state.modAssociations.length>0){let e=M().cloneDeep(this.state.modAssociations),t=M().cloneDeep(this.state.modTankPlanAssociations);this.state.selectedAssociations.forEach(((i,a)=>{e=e.filter(((e,t)=>e.SequenceNo!==i.SequenceNo)),t=t.filter((e=>e.CompartmentSeqNoInVehicle!==i.CompartmentSeqNoInVehicle))})),this.setState({modAssociations:e,modTankPlanAssociations:t,modTankAssociations:t,selectedAssociations:[]})}}catch(e){console.log("MarineReceiptDetailsComposite:Error occured on handleDeleteAssociation",e)}},this.handleDeleteTankAssociation=()=>{if(!this.props.userDetails.EntityResult.IsArchived)try{if(null!=this.state.selectedTankAssociations&&this.state.selectedTankAssociations.length>0&&this.state.modTankAssociations.length>0){let e=M().cloneDeep(this.state.modTankAssociations);this.state.selectedTankAssociations.forEach(((t,i)=>{e=e.filter(((e,i)=>e.SequenceNo!==t.SequenceNo))})),this.setState({modTankPlanAssociations:e,modTankAssociations:e,selectedTankAssociations:[]})}this.setState({selectedTankAssociations:[]})}catch(e){console.log("MarineReceiptDetailsComposite:Error occured on handleDeleteTankAssociation",e)}},this.handleAddTankAssociation=()=>{if(!this.props.userDetails.EntityResult.IsArchived)try{let t=M().cloneDeep(this.state.modTankAssociations),i=M().cloneDeep(g.DX);var e=1;t.forEach((t=>{var i=t.SequenceNo;if(null!==i&&""!==i&&void 0!==i&&!isNaN(parseInt(i))){let t=parseInt(i);t>=e&&(e=t+1)}})),i.SequenceNo=e,i.PlanQuantityUOM=this.state.modMarineReceipt.QuantityUOM,t.push(i),this.setState({modTankPlanAssociations:t,modTankAssociations:t,selectedTankAssociations:[]})}catch(t){console.log("MarineReceiptDetailsComposite:Error occured on handleAddAssociation",t)}},this.handleDateTextChange=(e,t,i)=>{try{var{validationErrors:a}={...this.state.validationErrors},s=M().cloneDeep(this.state.modMarineReceipt);a[e]=i,s[e]=t,this.setState({validationErrors:a,modMarineReceipt:s})}catch(i){console.log("MarineReceiptDetailsComposite:Error occured on handleDateTextChange",i)}},this.handleCellDataEdit=(e,t)=>{try{let a=M().cloneDeep(this.state.modAssociations),s=M().cloneDeep(this.state.modReceiptCompartment);if(a[t.rowIndex][t.field]=e,"SupplierCode"!==t.field&&"OriginTerminalCode"!==t.field&&"FinishedProductCode"!==t.field||this.getFinishedProduct(a,t),"ShareholderCode"===t.field){a[t.rowIndex].SupplierCode="",a[t.rowIndex].OriginTerminalCode="",a[t.rowIndex].FinishedProductCode="";let s=this.state.shareholderSuppliers.filter((t=>t.ShareholderCode===e));var i;if(s.length>0)i=s[0].SupplierOriginTerminalsList,this.setState({supplierDestinationOptions:i});else console.log("no suppliers identified for shareholder")}else if("SupplierCode"===t.field){let i=this.state.shareholderSuppliers.filter((e=>e.ShareholderCode===t.rowData.ShareholderCode))[0].SupplierOriginTerminalsList;void 0!==i&&null!==i&&(void 0!==i[e]&&Array.isArray(i[e])&&1===i[e].length?(a[t.rowIndex].OriginTerminalCode=i[e][0],this.getFinishedProduct(a,t)):a[t.rowIndex].OriginTerminalCode="")}else if("CompartmentSeqNoInVehicle"===t.field){let i=this.state.modVehicleDetails.vehicleCompartments.filter((t=>t.vehCompSeq.toString()===e.toString()));i.length>0&&(a[t.rowIndex].Quantity=null!==i[0].SFL&&""!==i[0].SFL?i[0].SFL.toLocaleString():null,a[t.rowIndex].TrailerCode=i[0].trailerCode,a[t.rowIndex].CompartmentCode=i[0].compCode)}else if("AdjustPlan"===t.field){let i=s.findIndex((e=>e.CompartmentSeqNoInVehicle===t.rowData.CompartmentSeqNoInVehicle));s[i][t.field]=e}else if("ForceComplete"===t.field){let e=s.findIndex((e=>e.CompartmentSeqNoInVehicle===t.rowData.CompartmentSeqNoInVehicle));s[e][t.field]=!s[e][t.field]}this.toggleExpand(a[t.rowIndex],!0,!0),this.setState({modReceiptCompartment:s,modAssociations:a})}catch(a){console.log("MarineReceiptDetailsComposite:Error occured on handleCellDataEdit",a)}},this.handleAttributeCellDataEdit=(e,t)=>{try{const i=M().cloneDeep(this.state.attributeValidationErrors);i.forEach((i=>{i.TerminalCode===e.TerminalCode&&(i.attributeValidationErrors[e.Code]=r.I5(e,t))})),this.setState({attributeValidationErrors:i}),e.DataType!==d.IB.INT&&e.DataType!==d.IB.LONG&&e.DataType!==d.IB.FLOAT&&e.DataType!==d.IB.DOUBLE||(t=r.bo(t)),e.DefaultValue=t,this.setState({attribute:e})}catch(i){console.log("MarineReceiptDetailsComposite:Error occured on handleAttributeCellDataEdit",i)}},this.handleCompAttributeCellDataEdit=(e,t)=>{let i=M().cloneDeep(this.state.modAssociations),a=i.findIndex((t=>t.SequenceNo===e.rowData.compSequenceNo));a>=0&&("Bool"===e.rowData.DataType?"true"===e.rowData.AttributeValue?i[a].AttributesforUI[e.rowData.SeqNumber-1].AttributeValue="false":i[a].AttributesforUI[e.rowData.SeqNumber-1].AttributeValue="true":i[a].AttributesforUI[e.rowData.SeqNumber-1].AttributeValue=t),this.setState({modAssociations:i}),a>=0&&this.toggleExpand(i[a],!0,!0)},this.handleTankCellDataEdit=(e,t)=>{try{let s=M().cloneDeep(this.state.modTankAssociations);if(s[t.rowIndex][t.field]=e,"ShareholderCode"===t.field)s[t.rowIndex].FinishedProductCode="",s[t.rowIndex].BaseProductCode="",s[t.rowIndex].SupplierCode="";else if("CompartmentSeqNoInVehicle"===t.field){let i=this.state.modVehicleDetails.vehicleCompartments.filter((t=>t.vehCompSeq.toString()===e.toString()));i.length>0&&(s[t.rowIndex].PlannedQuantity=null!==i[0].SFL&&""!==i[0].SFL?i[0].SFL.toLocaleString():null,s[t.rowIndex].TrailerCode=i[0].trailerCode,s[t.rowIndex].CompartmentCode=i[0].compCode)}else if("FinishedProductCode"===t.field)""===s[t.rowIndex][t.field]&&(s[t.rowIndex].BaseProductCode="",s[t.rowIndex].TankCode="");else if("BaseProductCode"===t.field){let i=this.state.tankCodeOptions;void 0!==i&&null!==i&&(void 0!==i[e]&&Array.isArray(i[e])&&1===i[e].length?s[t.rowIndex].tankCode=i[e][0]:s[t.rowIndex].tankCode="")}else if("TankCode"===t.field){var i=[],a=M().cloneDeep(g.X0);a.CompartmentCode=s[t.rowIndex].CompartmentCode,a.CompartmentSeqNoInVehicle=s[t.rowIndex].CompartmentSeqNoInVehicle,a.PlannedQuantity=r.bo(s[t.rowIndex].PlannedQuantity),a.PlanQuantityUOM=s[t.rowIndex].PlanQuantityUOM,a.ReceiptCode=s[t.rowIndex].ReceiptCode,a.TankCode=s[t.rowIndex].TankCode,i.push(a),s[t.rowIndex].ReceiptCompartmentTanks=i}else"PlannedQuantity"===t.field&&null!==s[t.rowIndex].ReceiptCompartmentTanks&&""!==s[t.rowIndex].ReceiptCompartmentTanks&&0!==s[t.rowIndex].ReceiptCompartmentTanks.length&&(s[t.rowIndex].ReceiptCompartmentTanks[0].PlannedQuantity=r.bo(s[t.rowIndex].PlannedQuantity));this.setState({modTankPlanAssociations:s,modTankAssociations:s})}catch(s){console.log("MarineReceiptDetailsComposite:Error occured on handleTankCellDataEdit",s)}},this.onTabChange=e=>{1===e&&this.setState({modTankAssociations:this.state.modTankPlanAssociations}),this.props.onTabChange(e)},this.handleTankAssociationSelectionChange=e=>{this.setState({selectedTankAssociations:e})},this.handleAssociationSelectionChange=e=>{this.setState({selectedAssociations:e})},this.handleManualEntry=()=>{this.setState({isManualEntry:!0,isReadyToRender:!1})},this.handleSave=()=>{try{if(this.state.saveEnabled){var e=M().cloneDeep(this.state.modTankAssociations),t=e.filter((e=>0!==e.ReceiptCompartmentTanks.length));if(0===(t=t.filter((e=>""!==e.ReceiptCompartmentTanks[0].TankCode))).length){this.saveMarineReceipt([])}else this.saveMarineReceipt(e);return}const i=this.handleSaveCompartmentDetailsEnabled();""!==this.state.marineReceipt.ReceiptCode&&i&&this.handleCompartmentDetailsSave()}catch(i){console.log("MarineReceiptDetailsComposite:Error occured on handleSave",i)}},this.addUpdateMarineDispatch=()=>{try{this.setState({saveEnabled:!1});let e=M().cloneDeep(this.state.tempMarineReceipt);""===this.state.marineReceipt.ReceiptCode?this.createMarineReceipt(e):this.updateMarineReceipt(e)}catch(e){console.log("MarineShipComposite : Error in addUpdateMarineDispatch")}},this.handleReset=()=>{try{let t,i=M().cloneDeep(this.state.vehicleDetails),a=[],s=[],o=[];""===this.state.marineReceipt.ReceiptCode?(t=[],a=[]):(t=this.getAssociationsFromReceipt(this.state.marineReceipt),s=M().cloneDeep(this.state.tempModTankAssociations),o=M().cloneDeep(this.state.tempModTankAssociations),i.vehicleCompartments.forEach((e=>a.push({text:e.vehCompSeq.toString(),value:e.vehCompSeq.toString()}))));var e=M().cloneDeep(this.state.marineReceipt);this.setState({modTankAssociations:s,modTankPlanAssociations:o,modMarineReceipt:e,validationErrors:[],modVehicleDetails:M().cloneDeep(this.state.vehicleDetails),modAssociations:t,compSeqOptions:a,selectedAttributeList:[],selectedAssociations:[],selectedTankAssociations:[],vesselSearchOptions:[],terminalCodes:this.props.terminalCodes},(()=>{this.props.userDetails.EntityResult.IsEnterpriseNode?(this.terminalSelectionChange(e.TerminalCodes),this.handleResetAttributeValidationError()):(this.localNodeAttribute(),this.handleResetAttributeValidationError())}))}catch(t){console.log("MarineReceiptDetailsComposite:Error occured on handleReset",t)}},this.handleDateTextChange=(e,t,i)=>{try{var a=M().cloneDeep(this.state.validationErrors),s=M().cloneDeep(this.state.modMarineReceipt);a[e]=i,s[e]=t,this.setState({validationErrors:a,modMarineReceipt:s})}catch(i){console.log("MarineReceiptDetailsComposite:Error occured on handleDateTextChange",i)}},this.handleVesselSearchChange=e=>{try{let t=this.state.vessels.filter((t=>t.value.toLowerCase().includes(e.toLowerCase())));t.length>d.bM&&(t=t.slice(0,d.bM)),this.setState({vesselSearchOptions:t})}catch(t){console.log("MarinReceiptDetailsComposite:Error occured on handleVesselSearchChange",t)}},this.onCarrierCompanyChange=e=>{try{const t=M().cloneDeep(this.state.modMarineReceipt),i=M().cloneDeep(this.state.validationErrors);t.CarrierCode=e,t.VesselCode="",this.setState({modMarineReceipt:t,modAssociations:[],modTankAssociations:[],modTankPlanAssociations:[]},(()=>this.getVesselCodeByCarrier(this.props.selectedShareholder))),this.props.userDetails.EntityResult.IsEnterpriseNode&&this.getTerminalsForCarrier(e),i.CarrierCode="",this.setState({validationErrors:i})}catch(t){console.log("ViewMarineReceiptDetailsComposite:Error occured on onCarrierCompanyChange",t)}},this.handleCarrierSearchChange=e=>{try{let t=this.state.carrierOptions.filter((t=>t.value.toLowerCase().includes(e.toLowerCase())));t.length>d.bM&&(t=t.slice(0,d.bM)),this.setState({carrierSearchOptions:t})}catch(t){console.log("ViewMarineReceiptDetailsComposite:Error occured on handleCarrierSearchChange",t)}},this.handleBack=()=>{try{this.setState({isReadyToRender:!0,viewAuditTrail:!1,isViewUnloading:!1,isManualEntry:!1})}catch(e){console.log("ViewMarineReceiptDetailsComposite:Error occured on handleBack",e)}},this.operationPermissionControl=e=>{var{operationsVisibilty:t}={...this.state};e.indexOf(d.PQ.ViewReceipt_AuthorizeToUnload)>-1&&(t.authorizeToLoad=!0),e.indexOf(d.PQ.ViewReceipt_CloseReceipt)>-1&&(t.closeReceipt=!0),e.indexOf(d.PQ.ViewReceipt_ManualEntry)>-1&&(t.manualEntry=!0),e.indexOf(d.PQ.ViewReceipt_ViewAuditTrail)>-1&&(t.viewAuditTrail=!0),e.indexOf(d.PQ.ViewReceipt_ViewTransactions)>-1&&(t.viewUnloadingDetails=!0),e.indexOf(d.PQ.ViewReceipt_PrintRAN)>-1&&(t.printRAN=!0),e.indexOf(d.PQ.ViewReceipt_ViewBOD)>-1&&(t.viewBOD=!0),e.indexOf(d.PQ.ViewReceipt_PrintBOD)>-1&&(t.printBOD=!0),e.indexOf(d.PQ.ViewReceipt_BISOutbound)>-1&&(t.bSIOutbound=!0),this.setState({operationsVisibilty:t})},this.handleCompartmentDetailsSave=()=>{try{let d=M().cloneDeep(this.state.modReceiptCompartment);for(var e=[],t=0;t<d.length;t++){var i=d[t].ReceiptCode,a=d[t].CompartmentSeqNoInVehicle,s=d[t].AdjustPlan;null!==s&&(s=r.bo(s));var o=d[t].ForceComplete,n={ShareHolderCode:this.props.selectedShareholder,keyDataCode:a,KeyCodes:[{Key:b.UB,Value:i},{Key:"CompartmentSeqNoInVehicle",Value:a},{Key:"AdjustedPlanQuantity",Value:s},{Key:"ForceComplete",Value:o}]};e.push(n)}var l={messageType:"critical",message:"Receipt_SavedStatus",messageResultDetails:[{keyFields:["Marine_ReceiptCompDetail_ShipmentNumber"],keyValues:[this.props.selectedRow.Common_Code],isSuccess:!1,errorMessage:""}]};S()(D.eBF,r.tW(e,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(l.messageType=t.IsSuccess?"success":"critical",l.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess){this.getReceiptCompartmentDetails(this.props.selectedRow);for(var i=0;i<d.length;i++)null!==d[i].AdjustPlan&&(d[i].AdjustPlan=null);this.setState({modReceiptCompartment:d}),this.props.handlePageAdd(this.state.marineReceipt)}else null!==t.ErrorList&&void 0!==t.ErrorList&&(l.messageResultDetails[0].errorMessage=t.ErrorList[0]),console.log("Error in Save Compartment Details:",t.ErrorList);(0,w.toast)((0,p.jsx)(c.A,{children:(0,p.jsx)(N.A,{notificationMessage:l})}),{autoClose:"success"===l.messageType&&1e4})})).catch((e=>{throw e}))}catch(d){console.log("ViewMarineReceiptDetailsComposite:Error occured on handleSave")}},this.handleSaveCompartmentDetailsEnabled=()=>{const{modMarineReceipt:e}=this.state,{operationsVisibilty:t}=this.state;let i=this.state.modReceiptCompartment.findIndex((e=>0!==e.ReceiptCompartmentStatus&&2!==e.ReceiptCompartmentStatus&&4!==e.ReceiptCompartmentStatus&&7!==e.ReceiptCompartmentStatus));return(e.ReceiptStatus===d.a$.PARTIALLY_UNLOADED||e.ReceiptStatus===d.a$.INTERRUPTED||e.ReceiptStatus===d.a$.MANUALLY_UNLOADED||e.ReceiptStatus===d.a$.AUTO_UNLOADED||e.ReceiptStatus===d.a$.QUEUED)&&-1!==i&&t.forceComplete&&t.adjustPlan&&!this.props.userDetails.EntityResult.IsEnterpriseNode},this.handleViewAuditTrail=()=>{try{this.setState({viewAuditTrail:!0,isReadyToRender:!1})}catch(e){console.log("ViewMarineReceiptDetailsComposite:Error occured on handleViewAuditTrail",e)}},this.handleViewUnloading=()=>{try{this.getMarineUnLoadingDetails(this.props.selectedRow)}catch(e){console.log("ViewMarineReceiptDetailsComposite:Error occured on handleViewUnloading",e)}},this.toggleExpand=function(t,i){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=e.state.expandedRows,o=s.findIndex((e=>e.CompartmentSeqNoInVehicle===t.CompartmentSeqNoInVehicle));i?a&&o>=0?(s.splice(o,1),s.push(t)):o>=0&&s.splice(o,1):o>=0?s=s.filter((e=>e.Code!==t.Code&&e.CompartmentSeqNoInVehicle!==t.CompartmentSeqNoInVehicle)):s.push(t),e.setState({expandedRows:s})},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})}}generateCompartmentCode(e){try{var t=0;return null===e||0===e.length||void 0===e?1:(e.forEach((e=>{var i=e.CompartmentCode;if((null!==i||""!==i)&&!isNaN(parseInt(i))){let e=parseInt(i);e>t&&(t=e)}})),t+1)}catch(i){return t}}componentWillReceiveProps(e){try{if(""!==this.state.marineReceipt.ReceiptCode&&void 0===e.selectedRow.Common_Code&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo){this.getMarineReceipt(!0,e.selectedRow.Common_Code);let t={...this.state.validationErrors};Object.keys(t).forEach((e=>{t[e]=""})),this.setState({validationErrors:t})}}catch(t){console.log("MarineReceiptDetailsComposite:Error occured on componentWillReceiveProps",t)}}getUoms(){S()(D.WFM,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult){let e=M().cloneDeep(this.state.shipmentUOM);if(Array.isArray(t.EntityResult.VOLUME)&&(e=r.Zj(t.EntityResult.VOLUME)),Array.isArray(t.EntityResult.MASS)){r.Zj(t.EntityResult.MASS).forEach((t=>e.push(t)))}this.setState({shipmentUOM:e})}}else console.log("Error in GetUOMList:",t.ErrorList)})).catch((e=>{console.log("Error while getting GetUOMList:",e)}))}getVessel(e,t){let i=M().cloneDeep(this.state.modMarineReceipt),a=M().cloneDeep(this.state.modVehicleDetails);i.VesselCode=e;var s=[{key:"VehicleCode",value:e},{key:b.v6,value:"MARINE"},{key:b._n,value:i.CarrierCode}],o={ShareHolderCode:this.props.selectedShareholder,keyDataCode:"VehicleCode",KeyCodes:s};S()(D.zRL,r.tW(o,this.props.tokenDetails.tokenInfo)).then((e=>{var s=e.data;if(!0===s.IsSuccess){if(null!==s.EntityResult){a.carrierCode=s.EntityResult.CarrierCompanyCode,a.vehicleCompartments=this.getCompartmentDetailsFromVehicle(s.EntityResult);let e=[];if(a.vehicleCompartments.forEach((t=>e.push({text:t.vehCompSeq.toString(),value:t.vehCompSeq.toString()}))),t){this.setState({modTankAssociations:[]});let e=this.getShipmentCompartmentFromVehicleCompartment(a.vehicleCompartments);null!=this.state.modMarineReceipt.QuantityUOM&&""!==this.state.modMarineReceipt.QuantityUOM&&e.forEach((e=>{e.QuantityUOM=this.state.modMarineReceipt.QuantityUOM})),null!==this.state.modMarineReceipt.ReceiptCode&&""!==this.state.modMarineReceipt.ReceiptCode&&e.forEach((e=>{e.ReceiptCode=this.state.modMarineReceipt.ReceiptCode})),this.setState({modAssociations:e},(()=>{var e=M().cloneDeep(this.state.modMarineReceipt.TerminalCodes);if(!1===this.props.userDetails.EntityResult.IsEnterpriseNode){var t=M().cloneDeep(this.state.compartmentAttributeMetaDataList);t.length>0&&this.formCompartmentAttributes([t[0].TerminalCode])}else void 0!==e&&null!==e&&this.formCompartmentAttributes(e)}))}if(this.setState({modMarineReceipt:i,modVehicleDetails:a,compSeqOptions:e}),this.state.marineReceipt.VehicleCode===i.VehicleCode){let e=M().cloneDeep(a);this.setState({vehicleDetails:e})}}}else console.log("Error in getVessel:",s.ErrorList)})).catch((e=>{console.log("Error in getVessel:",e)}))}getFinishedProduct(e,t){var i=M().cloneDeep(this.state.modTankPlanAssociations);try{if(null!==e[t.rowIndex].SupplierCode&&null!==e[t.rowIndex].FinishedProductCode&&null!==e[t.rowIndex].OriginTerminalCode&&null!==e[t.rowIndex].Quantity){i=i.filter((i=>i.CompartmentSeqNoInVehicle!==e[t.rowIndex].CompartmentSeqNoInVehicle));var a=[{key:b.xf,value:e[t.rowIndex].FinishedProductCode}],s={ShareHolderCode:t.rowData.ShareholderCode,keyDataCode:b.xf,KeyCodes:a};S()(D.cfM,r.tW(s,this.props.tokenDetails.tokenInfo)).then((a=>{var s=a.data;if(!0===s.IsSuccess&&0!==s.EntityResult.FinishedProductItems.length){var o=s.EntityResult.FinishedProductItems,n=0;for(let e=0;e<o.length;e++)n+=o[e].Quantity;for(let a=0;a<o.length;a++){var l=M().cloneDeep(g.DX),d=o[a];l.SequenceNo=this.state.length+a+1,l.ShareholderCode=e[t.rowIndex].ShareholderCode,l.CompartmentCode=e[t.rowIndex].CompartmentCode,l.CompartmentSeqNoInVehicle=e[t.rowIndex].CompartmentSeqNoInVehicle,l.FinishedProductCode=e[t.rowIndex].FinishedProductCode,l.BaseProductCode=null===d.AdditiveCode?d.BaseProductCode:d.AdditiveCode,l.PlannedQuantity=(r.bo(e[t.rowIndex].Quantity)*d.Quantity/n).toLocaleString(),l.PlanQuantityUOM=e[t.rowIndex].QuantityUOM,l.ReceiptCode=this.state.modMarineReceipt.ReceiptCode,i.push(l)}this.setState({length:this.state.length+o.length})}}))}this.setState({modTankPlanAssociations:i})}catch(o){console.log(o)}}getCompartmentDetailsFromVehicle(e){let t=[],i=1;return e.VehicleTrailers.forEach((e=>{if(Array.isArray(e.Trailer.Compartments))for(let a=0;a<e.Trailer.Compartments.length;a++){let s=e.Trailer.Compartments[a],o={compCode:s.Code,vehCompSeq:i,trailerCode:s.TrailerCode,trailerCompSeq:s.CompartmentSeqNoInTrailer,SFL:s.Capacity,UOM:s.UOM};t.push(o),i+=1}})),t}getShipmentCompartmentFromVehicleCompartment(e){let t=[];try{if(Array.isArray(e))for(let i=0;i<e.length;i++){let a=e[i],s={AssociatedContractItems:null,AssociatedOrderItems:null,Attributes:[],CarrierCompanyCode:null,CompartmentCode:a.compCode,CompartmentSeqNoInVehicle:a.vehCompSeq,CustomerCode:null,FinishedProductCode:null,OriginTerminalCode:null,Quantity:null!==a.SFL&&""!==a.SFL?a.SFL.toLocaleString():null,QuantityUOM:a.UOM,ReceiptCode:null,SequenceNo:a.trailerCompSeq,ShareholderCode:this.props.selectedShareholder,SupplierCode:null,TrailerCode:a.trailerCode,attributesForUI:this.state.modAssociations.attributesForUI};t.push(s)}return t}catch(i){return""}}getVesselCodeByCarrier(e){if(void 0!==this.state.modMarineReceipt.CarrierCode&&null!==this.state.modMarineReceipt.CarrierCode&&void 0!==e&&null!==e){let{carrierShareholderMap:e}=this.state;S()(D.crg+"?ShareholderCode="+e.get(this.state.modMarineReceipt.CarrierCode)+"&Transportationtype="+d.LY.MARINE+"&CarrierCode="+this.state.modMarineReceipt.CarrierCode,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){var i=[];t.EntityResult.forEach((e=>{i.push({text:e,value:e})}));let e=M().cloneDeep(i);e.length>d.bM&&(e=e.slice(0,d.bM)),this.setState({vessels:i,vesselSearchOptions:e})}}else console.log("Error in getVesselCodeByCarrier:",t.ErrorList)})).catch((e=>{console.log("Error while getting Vessel List:",e)}))}}getFinishedProductCodes(e){try{S()(D.Ypw+"?ShareholderCode="+e+"&Transportationtype="+d.LY.MARINE,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult){var i=t.EntityResult;this.setState({FinishedProducts:i})}}else console.log("Error in GetFinishedProductCodes:",t.ErrorList)})).catch((e=>{console.log("Error while GetFinishedProductCodes List:",e)}))}catch(t){console.log("GetFinishedProductCodes:Error occured on GetFinishedProductCodes",t)}}getSupplierOriginTerminals(e){S()(D._fS+"?ShareholderCode="+e+"&Transportationtype="+d.LY.MARINE,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess)if(Array.isArray(t.EntityResult)){let e=t.EntityResult;e.length>0?this.setState({shareholderSuppliers:e}):console.log("no customers identified for shareholder")}else console.log("customerdestinations not identified for shareholder");else console.log("Error in getOriginTerminals:",t.ErrorList)})).catch((e=>{console.log("Error while getOriginTerminals List:",e)}))}componentDidMount(){try{r.pJ(this.props.userDetails.EntityResult.IsArchived),this.getUoms(),this.getBaseProductList(),this.getAdditivesList(),this.getFinishedProductCodes(""),this.getSupplierOriginTerminals(""),this.getLookUpData(),this.GetReceiptStatusOperations(this.props.selectedRow),this.getReceiptCompartmentDetails(this.props.selectedRow),this.getAdjustPlanPermission(this.props.selectedRow),this.getForceCompletenPermission(this.props.selectedRow);let e=!1;void 0===this.props.selectedRow.Common_Code&&(e=!0),this.getAttributes(e),this.getCarrierList(),this.getCarrierShareholder(),this.getTransloading(),this.getBond()}catch(e){console.log("MarineReceiptDetailsComposite:Error occured on componentDidMount",e)}}getBond(){S()(D.G0M,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;if(!0===t.IsSuccess){let e=!1;"True"===t.EntityResult&&(e=!0),this.setState({isBondShow:e})}else console.log("Error in getLookUpData: ",t.ErrorList)})).catch((e=>{console.log("MarineReceiptDetailsComposite: Error occurred on getLookUpData",e)}))}getTransloading(){S()(D.xAA+"?LookUpTypeCode=Transloading",r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;if(!0===t.IsSuccess){let e=!1;"True"===t.EntityResult.MarineEnable&&(e=!0),this.setState({isTransloading:e})}else console.log("Error in getLookUpData: ",t.ErrorList)})).catch((e=>{console.log("MarineReceiptDetailsComposite: Error occurred on getLookUpData",e)}))}getLookUpData(){S()(D.xAA+"?LookUpTypeCode=HSEInspection",r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;if(!0===t.IsSuccess){let e=!1;"True"===t.EntityResult.EnableMarine&&(e=!0),this.setState({isHSEInspectionEnable:e})}else console.log("Error in getLookUpData: ",t.ErrorList)})).catch((e=>{console.log("MarineReceiptDetailsComposite: Error occurred on getLookUpData",e)}))}getAttributes(e){try{S()(D.fKH,r.tW([V.Ww,V.LP],this.props.tokenDetails.tokenInfo)).then((t=>{var i=t.data;!0===i.IsSuccess?(null!==i.EntityResult.marineReceipt&&void 0!==i.EntityResult.marineReceipt||(i.EntityResult.marineReceipt=[]),this.setState({attributeMetaDataList:M().cloneDeep(i.EntityResult.marineReceipt),attributeValidationErrors:r.Fl(i.EntityResult.marineReceipt),compartmentAttributeMetaDataList:M().cloneDeep(i.EntityResult.marineReceiptCompartmentDetail)},(()=>this.getMarineReceipt(e,this.props.selectedRow.Common_Code)))):console.log("Failed to get Attributes")}))}catch(t){console.log("Error while getting Attributes:",t)}}GetReceiptStatusOperations(e){try{S()(D.Nex+"?MarineReceiptStatus="+e.MarineReceiptByCompartmentList_ReceiptStatus,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;let i=[];Object.keys(t.EntityResult).forEach((e=>{t.EntityResult[e]&&i.push(e)})),this.operationPermissionControl(i)})).catch((e=>{console.log("Error while getting GetReceiptStatusOperations:",e)}))}catch(t){console.log(t)}}getShareholders(){return r.Zj(this.props.userDetails.EntityResult.ShareholderList)}getMarineReceipt(e,t){try{var i=this.getTransportationType();if(g.Gi.TransportationType=i,g.Gi.Active=!0,g.Gi.QuantityUOM=this.props.userDetails.EntityResult.PageAttibutes.DefaultQtyUOMForTransactionUI.MARINE,g.Gi.TerminalCodes=1===this.props.terminalCodes.length?[...this.props.terminalCodes]:[],e)return void 0!==g.Gi.TerminalCodes&&null!==g.Gi.TerminalCodes&&0!==g.Gi.TerminalCodes.length?this.getTankListForRole(g.Gi.TerminalCodes[0]):this.getTankListForRole(""),void this.setState({marineReceipt:{...g.Gi},modMarineReceipt:{...g.Gi},modAssociations:[],isReadyToRender:!0,selectedAttributeList:[],saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,x.i.add,x.au),isNewReceipt:!0},(()=>{!1===this.props.userDetails.EntityResult.IsEnterpriseNode&&this.localNodeAttribute()}));var a=[{key:b.UB,value:t},{key:b.v6,value:i}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:b.UB,KeyCodes:a};S()(D.t7V,r.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var i=[];for(let o=0;o<t.EntityResult.RailMarineReceiptCompartmentPlanList.length;o++){var a=[{key:b.xf,value:t.EntityResult.RailMarineReceiptCompartmentPlanList[o].FinishedProductCode}],s={ShareHolderCode:t.EntityResult.RailMarineReceiptCompartmentPlanList[o].ShareholderCode,keyDataCode:b.xf,KeyCodes:a};S()(D.cfM,r.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var a=e.data;if(!0===a.IsSuccess){var s=a.EntityResult.FinishedProductItems,n=0;for(let e=0;e<a.EntityResult.FinishedProductItems.length;e++)n+=a.EntityResult.FinishedProductItems[e].Quantity;for(let e=0;e<s.length;e++){var r=M().cloneDeep(g.DX);r.SequenceNo=this.state.length+e+1,r.ShareholderCode=t.EntityResult.RailMarineReceiptCompartmentPlanList[o].ShareholderCode,r.CompartmentSeqNoInVehicle=t.EntityResult.RailMarineReceiptCompartmentPlanList[o].CompartmentSeqNoInVehicle,r.FinishedProductCode=t.EntityResult.RailMarineReceiptCompartmentPlanList[o].FinishedProductCode,r.BaseProductCode=null===s[e].AdditiveCode?s[e].BaseProductCode:s[e].AdditiveCode,r.PlanQuantityUOM=t.EntityResult.RailMarineReceiptCompartmentPlanList[o].PlanQuantityUOM,r.CompartmentCode=t.EntityResult.RailMarineReceiptCompartmentPlanList[o].CompartmentCode,r.TankCode=null!==t.EntityResult.RailMarineReceiptCompartmentPlanList[o].ReceiptCompartmentTanks&&0!==t.EntityResult.RailMarineReceiptCompartmentPlanList[o].ReceiptCompartmentTanks.length?t.EntityResult.RailMarineReceiptCompartmentPlanList[o].ReceiptCompartmentTanks[e].TankCode:"",r.PlannedQuantity=null!==t.EntityResult.RailMarineReceiptCompartmentPlanList[o].ReceiptCompartmentTanks&&""!==t.EntityResult.RailMarineReceiptCompartmentPlanList[o].ReceiptCompartmentTanks&&0!==t.EntityResult.RailMarineReceiptCompartmentPlanList[o].ReceiptCompartmentTanks.length?t.EntityResult.RailMarineReceiptCompartmentPlanList[o].ReceiptCompartmentTanks[e].PlannedQuantity.toLocaleString():(t.EntityResult.RailMarineReceiptCompartmentDetailPlanList[o].Quantity*(s[e].Quantity/n)).toLocaleString();var l=[],d=M().cloneDeep(g.X0);d.CompartmentCode=t.EntityResult.RailMarineReceiptCompartmentPlanList[o].CompartmentCode,d.CompartmentSeqNoInVehicle=t.EntityResult.RailMarineReceiptCompartmentPlanList[o].CompartmentSeqNoInVehicle,d.PlannedQuantity=null!==t.EntityResult.RailMarineReceiptCompartmentPlanList[o].ReceiptCompartmentTanks&&""!==t.EntityResult.RailMarineReceiptCompartmentPlanList[o].ReceiptCompartmentTanks&&0!==t.EntityResult.RailMarineReceiptCompartmentPlanList[o].ReceiptCompartmentTanks.length?t.EntityResult.RailMarineReceiptCompartmentPlanList[o].ReceiptCompartmentTanks[e].PlannedQuantity.toLocaleString():t.EntityResult.RailMarineReceiptCompartmentPlanList[o].PlannedQuantity*(s[e].Quantity/n),d.PlanQuantityUOM=t.EntityResult.RailMarineReceiptCompartmentPlanList[o].PlanQuantityUOM,d.TankCode=0===t.EntityResult.RailMarineReceiptCompartmentPlanList[o].ReceiptCompartmentTanks.length?"":t.EntityResult.RailMarineReceiptCompartmentPlanList[o].ReceiptCompartmentTanks[e].TankCode,l.push(d),r.ReceiptCompartmentTanks=l,i.push(r)}this.setState({length:this.state.length+s.length})}else this.setState({finishedProductItems:[]})}))}let e=M().cloneDeep(t.EntityResult);e.HSEInspectionStatus=r.cd(d.sL,e.HSEInspectionStatus),this.setState({isNewReceipt:!1,isReadyToRender:!0,marineReceipt:e,modMarineReceipt:e,modAssociations:this.getAssociationsFromReceipt(t.EntityResult),modTankAssociations:i,modTankPlanAssociations:i,tempModTankAssociations:i,saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,x.i.modify,x.au)&&this.props.updateEnableForConfigure},(()=>{void 0!==e.TerminalCodes&&null!==e.TerminalCodes&&0!==e.TerminalCodes.length?this.getTankListForRole(e.TerminalCodes[0]):this.getTankListForRole(""),this.props.userDetails.EntityResult.IsEnterpriseNode?this.terminalSelectionChange(t.EntityResult.TerminalCodes):this.localNodeAttribute()})),this.getVesselCodeByCarrier(this.props.selectedShareholder),this.getVessel(t.EntityResult.VesselCode,!1),this.getKPIList(t.EntityResult.ReceiptCode)}else this.setState({isNewReceipt:!1,marineReceipt:M().cloneDeep(g.Gi),modMarineReceipt:M().cloneDeep(g.Gi),isReadyToRender:!0}),console.log("Error in getMarineReceipt:",t.ErrorList)})).catch((e=>{console.log("Error while getting marineReceipt:",e)}))}catch(o){console.log(o)}}getTerminalsForCarrier(e){if(this.props.userDetails.EntityResult.IsEnterpriseNode){const i=M().cloneDeep(this.state.modMarineReceipt);let a=[...this.state.terminalCodes];i.CarrierCode=e,i.VesselCode="",i.modAssociations=[];try{if(void 0===e)return a=[],i.TerminalCodes=[],void this.setState({terminalCodes:a,modMarineReceipt:i});let t=[{key:b._n,value:e},{key:b.v6,value:d.LY.MARINE}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:b._n,KeyCodes:t};S()(D.pm$,r.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;!0===t.IsSuccess&&null!==t.EntityResult&&null!==t.EntityResult.TerminalCodes?(a=[...t.EntityResult.TerminalCodes],this.setState({terminalCodes:a},(()=>{}))):(a=[],this.setState({terminalCodes:a}));let s={...this.state.marineReceipt};void 0!==s.ReceiptCode&&""!==s.ReceiptCode&&null!==s.ReceiptCode||(1===a.length?i.TerminalCodes=[...a]:i.TerminalCodes=[]),Array.isArray(i.TerminalCodes)&&(i.TerminalCodes=a.filter((e=>i.TerminalCodes.includes(e)))),this.setState({modMarineReceipt:i},(()=>this.terminalSelectionChange(i.TerminalCodes)))})).catch((t=>{a=[],i.TerminalCodes=[],this.setState({terminalCodes:a,modMarineReceipt:i},(()=>this.formCompartmentAttributes([]))),console.log("Error while getting Carrier:",t,e)}))}catch(t){a=[],i.TerminalCodes=[],this.setState({terminalCodes:a,modMarineReceipt:i},(()=>this.formCompartmentAttributes([]))),console.log("TrailerDetailsComposite:Error occured on handleCarrierChange",t)}}else this.formCompartmentAttributes([])}getTransportationType(){var e=d.LY.MARINE;const{genericProps:t}=this.props;return void 0!==t&&void 0!==t.transportationType&&(e=t.transportationType),e}localNodeAttribute(){try{var e=M().cloneDeep(this.state.attributeMetaDataList);if(Array.isArray(e)&&e.length>0)this.terminalSelectionChange([e[0].TerminalCode]);else{var t=M().cloneDeep(this.state.compartmentAttributeMetaDataList);Array.isArray(t)&&t.length>0&&this.formCompartmentAttributes([t[0].TerminalCode])}}catch(i){console.log("MarineReceiptDetailsComposite:Error occured on localNodeAttribute",i)}}validateSave(e){var t=M().cloneDeep(this.state.validationErrors);Object.keys(C.RU).forEach((function(i){void 0!==e[i]&&(t[i]=r.jr(C.RU[i],e[i]))})),e.Active!==this.state.marineReceipt.Active&&(null!==e.Remarks&&""!==e.Remarks||(t.Remarks="Marine_ShipmentCompDetail_RemarksRequired"));let i={messageType:"critical",message:"Receipt_SavedStatus",messageResultDetails:[]};if(Array.isArray(e.RailMarineReceiptCompartmentDetailPlanList)&&e.RailMarineReceiptCompartmentDetailPlanList.length>0?e.RailMarineReceiptCompartmentDetailPlanList.forEach((t=>{f.Mu.forEach((a=>{let s="";void 0!==a.validator&&(s=r.jr(a.validator,t[a.field])),""!==s&&i.messageResultDetails.push({keyFields:["Marine_ReceiptCompDetail_ShipmentNumber",a.displayName],keyValues:[e.ReceiptCode,t[a.field]],isSuccess:!1,errorMessage:s})}));let a=[];null!==t.AttributesforUI&&void 0!==t.AttributesforUI&&(a=t.AttributesforUI.filter((function(e){return t.Attributes.some((function(t){let i=t.ListOfAttributeData.findIndex((t=>t.AttributeCode===e.AttributeCode))>=0;return e.TerminalCode===t.TerminalCode&&i}))}))),a.forEach((e=>{let a=r.I5(e,e.AttributeValue);""!==a&&(this.props.userDetails.EntityResult.IsEnterpriseNode?i.messageResultDetails.push({keyFields:["CompAttributeComp","CompAttributeTerminal",e.AttributeName],keyValues:[t.Code,e.TerminalCode,e.AttributeValue],isSuccess:!1,errorMessage:a}):i.messageResultDetails.push({keyFields:["CompAttributeComp",e.AttributeName],keyValues:[t.Code,e.AttributeValue],isSuccess:!1,errorMessage:a}))})),this.toggleExpand(t,!0,!0)})):i.messageResultDetails.push({keyFields:[],keyValues:[],isSuccess:!1,errorMessage:"ERRMSG_MARINERECEIPT_COMP_DETAIL_PLAN_LIST_EMPTY"}),[...new Set(e.RailMarineReceiptCompartmentDetailPlanList.map((e=>e.CompartmentSeqNoInVehicle.toString())))].length!==e.RailMarineReceiptCompartmentDetailPlanList.length)return i.messageResultDetails.push({keyFields:[],keyValues:[],isSuccess:!1,errorMessage:"ERRMSG_RAILReceipt_ITEMPLAN_DUPLICATE"}),this.props.onSaved(this.state.modMarineReceipt,"update",i),!1;this.setState({validationErrors:t});var a=M().cloneDeep(this.state.attributeValidationErrors);M().cloneDeep(this.state.selectedAttributeList).forEach((e=>{a.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=r.I5(e,e.DefaultValue)}))}))})),this.setState({validationErrors:t,attributeValidationErrors:a});let s=!0;return a.forEach((e=>{if(!s)return s;s=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),s?(s=Object.values(t).every((function(e){return""===e})),i.messageResultDetails.length>0?(this.props.onSaved(this.state.modMarineReceipt,"update",i),!1):s):s}saveMarineReceipt(e){let t=M().cloneDeep(this.state.modMarineReceipt);t.RailMarineReceiptCompartmentDetailPlanList=this.getCompartmentFromAssociations(this.state.modAssociations);let i=this.fillAttributeDetails(t);if(this.validateSave(i)){t.RailMarineReceiptCompartmentDetailPlanList=t.RailMarineReceiptCompartmentDetailPlanList.map((e=>(e.Quantity=r.bo(e.Quantity),e))),t.RailMarineReceiptCompartmentPlanList=this.getTankPlanFromTankAssociations(e);let i=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,a=M().cloneDeep(t);this.setState({showAuthenticationLayout:i,tempMarineReceipt:a},(()=>{!1===i&&this.addUpdateMarineDispatch()}))}else this.setState({saveEnabled:!0})}fillAttributeDetails(e){try{let t=M().cloneDeep(this.state.selectedAttributeList);return e.Attributes=[],t.forEach((t=>{let i={ListOfAttributeData:[]};i.TerminalCode=t.TerminalCode,t.attributeMetaDataList.forEach((e=>{i.ListOfAttributeData.push({AttributeCode:e.Code,AttributeValue:e.DefaultValue})})),e.Attributes.push(i)})),e.RailMarineReceiptCompartmentDetailPlanList.forEach((t=>{let i=[];if(this.props.userDetails.EntityResult.IsEnterpriseNode)i=M().cloneDeep(e.TerminalCodes);else{var a=M().cloneDeep(this.state.compartmentAttributeMetaDataList);a.length>0&&(i=[a[0].TerminalCode])}let s=[];t.Attributes=[],void 0!==i&&null!==i&&i.forEach((e=>{null!==t.AttributesforUI&&void 0!==t.AttributesforUI&&(s=t.AttributesforUI.filter((function(t){return t.TerminalCode===e})));let i={ListOfAttributeData:[]};i.TerminalCode=e,s.forEach((e=>{""===e.AttributeValue&&!0!==e.IsMandatory||i.ListOfAttributeData.push({AttributeCode:e.AttributeCode,AttributeValue:e.AttributeValue})})),null!==i.ListOfAttributeData&&void 0!==i.ListOfAttributeData&&i.ListOfAttributeData.length>0&&t.Attributes.push(i)}))})),this.setState({modMarineReceipt:e}),e}catch(t){console.log("MarineReceiptDetailsComposite:Error occured on fillAttributeDetails",t)}}createMarineReceipt(e){this.handleAuthenticationClose(),e.RailMarineReceiptCompartmentDetailPlanList.forEach((t=>{t.QuantityUOM=e.QuantityUOM}));var t=[{key:b.UB,value:e.ReceiptCode}],i={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,keyDataCode:b.UB,KeyCodes:t,Entity:e},a={messageType:"critical",message:"Receipt_SavedStatus",messageResultDetails:[{keyFields:["Marine_ReceiptCompDetail_ShipmentNumber"],keyValues:[e.ReceiptCode],isSuccess:!1,errorMessage:""}]};S()(D.LTx,r.tW(i,this.props.tokenDetails.tokenInfo)).then((t=>{var i=t.data;a.messageType=i.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=i.IsSuccess,!0===i.IsSuccess?this.props.handlePageAdd(e):(a.messageResultDetails[0].errorMessage=i.ErrorList[0],this.setState({saveEnabled:!0}),console.log("Error in CreateMarineReceipt:",i.ErrorList)),this.props.onSaved(e,"add",a)})).catch((t=>{this.setState({saveEnabled:!0}),a.messageResultDetails[0].errorMessage=t,this.props.onSaved(e,"add",a)}))}updateMarineReceipt(e){this.handleAuthenticationClose(),e.RailMarineReceiptCompartmentDetailPlanList.forEach((t=>{t.QuantityUOM=e.QuantityUOM}));var t=[{key:b.UB,value:e.ReceiptCode}],i={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,keyDataCode:b.UB,KeyCodes:t,Entity:e},a={messageType:"critical",message:"Receipt_SavedStatus",messageResultDetails:[{keyFields:["Marine_ReceiptCompDetail_ShipmentNumber"],keyValues:[e.ReceiptCode],isSuccess:!1,errorMessage:""}]};S()(D.GjT,r.tW(i,this.props.tokenDetails.tokenInfo)).then((t=>{var i=t.data;a.messageType=i.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=i.IsSuccess,!0===i.IsSuccess?this.props.handlePageAdd(e):(this.setState({saveEnabled:!0}),a.messageResultDetails[0].errorMessage=i.ErrorList[0],console.log("Error in UpdateMarineReceipt:",i.ErrorList)),this.props.onSaved(e,"update",a)})).catch((t=>{a.messageResultDetails[0].errorMessage=t,this.props.onSaved(e,"modify",a),this.setState({saveEnabled:!0})}))}handleResetAttributeValidationError(){try{var e=M().cloneDeep(this.state.attributeMetaDataList);this.setState({attributeValidationErrors:r.Fl(e)})}catch(t){console.log("MarineReceiptDetailsComposite:Error occured on handleResetAttributeValidationError",t)}}terminalSelectionChange(e){try{if(null!==e&&void 0!==e){let s=[];var t=[],i=[];t=M().cloneDeep(this.state.attributeMetaDataList),i=M().cloneDeep(this.state.selectedAttributeList);const o=M().cloneDeep(this.state.attributeValidationErrors);var a=M().cloneDeep(this.state.modMarineReceipt);e.forEach((e=>{var o=i.find((t=>t.TerminalCode===e));void 0===o?t.forEach((function(t){if(t.TerminalCode===e){var i=a.Attributes.find((t=>t.TerminalCode===e));void 0!==i&&t.attributeMetaDataList.forEach((function(e){var t=i.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),s.push(t)}})):s.push(o)})),i=[],i=s,o.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.formCompartmentAttributes(e),this.setState({selectedAttributeList:i,attributeValidationErrors:o})}}catch(s){console.log("MarineReceiptDetailsComposite:Error occured on terminalSelectionChange",s)}}formCompartmentAttributes(e){try{let t=M().cloneDeep(this.state.compartmentAttributeMetaDataList);t=t.filter((function(t){return e.some((function(e){return t.TerminalCode===e}))}));let i=M().cloneDeep(this.state.modAssociations),a=[];t.forEach((e=>{e.attributeMetaDataList.forEach((e=>{a.push({AttributeCode:e.Code,AttributeName:e.DisplayName,AttributeValue:e.DefaultValue,TerminalCode:e.TerminalCode,IsMandatory:e.IsMandatory,DataType:e.DataType,IsReadonly:e.IsReadonly,compSequenceNo:""})}))}));let s=M().cloneDeep(a);i.forEach((t=>{if(null!==t.CompartmentCode||null!==t.AttributesforUI&&void 0!==t.AttributesforUI){null!==t.AttributesforUI&&void 0!==t.AttributesforUI?(t.AttributesforUI=t.AttributesforUI.filter((function(t){return e.some((function(e){return t.TerminalCode===e}))})),a=a.filter((function(e){return!t.AttributesforUI.some((function(t){return e.TerminalCode===t.TerminalCode}))}))):t.AttributesforUI=[];let i=M().cloneDeep(a);if(Array.isArray(t.Attributes)&&null!==t.Attributes&&void 0!==t.Attributes&&t.Attributes.length>0){t.Attributes.filter((function(t){return e.some((function(e){return t.TerminalCode===e}))})).forEach((e=>{e.ListOfAttributeData.forEach((t=>{let a=i.findIndex((i=>i.TerminalCode===e.TerminalCode&&i.AttributeCode===t.AttributeCode));a>=0&&(i[a].AttributeValue=t.AttributeValue)}))})),i.forEach((e=>{e.compSequenceNo=t.CompartmentSeqNoInVehicle,t.AttributesforUI.push(e)}))}else{M().cloneDeep(a).forEach((e=>{e.compSequenceNo=t.CompartmentSeqNoInVehicle,t.AttributesforUI.push(e)}))}}else t.AttributesforUI=[],s.forEach((e=>{e.compSequenceNo=t.SequenceNo,t.AttributesforUI.push(e)}));this.toggleExpand(t,!0,!0),t.AttributesforUI=r.Q3(t.AttributesforUI)})),this.setState({modAssociations:i})}catch(t){console.log("MarineReceiptDetailsComposite:Error in forming Compartment Attributes",t)}}getAssociationsFromReceipt(e){try{let t=[];return Array.isArray(e.RailMarineReceiptCompartmentDetailPlanList)&&e.RailMarineReceiptCompartmentDetailPlanList.forEach((e=>t.push({AssociatedContractItems:e.AssociatedContractItems,AssociatedOrderItems:e.AssociatedOrderItems,Attributes:e.Attributes,CarrierCompanyCode:e.CarrierCompanyCode,CompartmentCode:e.CompartmentCode,CompartmentSeqNoInVehicle:e.CompartmentSeqNoInVehicle,FinishedProductCode:e.FinishedProductCode,OriginTerminalCode:e.OriginTerminalCode,Quantity:null!==e.Quantity&&""!==e.Quantity?e.Quantity.toLocaleString():null,QuantityUOM:e.QuantityUOM,ReceiptCode:e.ReceiptCode,SequenceNo:e.CompartmentSeqNoInVehicle,ShareholderCode:e.ShareholderCode,SupplierCode:e.SupplierCode,TrailerCode:e.TrailerCode,IsTransloading:e.IsTransloading}))),t}catch(t){return[]}}getCompartmentFromAssociations(e){let t=[];return Array.isArray(e)&&e.forEach((e=>{(null!==e.FinishedProductCode&&""!==e.FinishedProductCode||null!==e.SupplierCode&&""!==e.SupplierCode||null!==e.OriginTerminalCode&&""!==e.OriginTerminalCode)&&t.push({AssociatedContractItems:e.AssociatedContractItems,AssociatedOrderItems:e.AssociatedOrderItems,Attributes:e.Attributes,AttributesforUI:e.AttributesforUI,CarrierCompanyCode:e.CarrierCompanyCode,CompartmentCode:e.CompartmentCode,CompartmentSeqNoInVehicle:e.CompartmentSeqNoInVehicle,CustomerCode:e.CustomerCode,FinishedProductCode:e.FinishedProductCode,OriginTerminalCode:e.OriginTerminalCode,Quantity:e.Quantity,QuantityUOM:e.QuantityUOM,ReceiptCode:this.state.modMarineReceipt.ReceiptCode,SequenceNo:e.SequenceNo,ShareholderCode:e.ShareholderCode,SupplierCode:e.SupplierCode,TrailerCode:e.TrailerCode,IsTransloading:e.IsTransloading})})),t}getTankPlanFromTankAssociations(e){return Array.isArray(e)&&e.forEach((e=>{null!==e.PlannedQuantity&&(e.PlannedQuantity=r.bo(e.PlannedQuantity)),null!==e.ReceiptCompartmentTanks&&""!==e.ReceiptCompartmentTanks&&0!==e.ReceiptCompartmentTanks.length&&(e.ReceiptCompartmentTanks[0].PlannedQuantity=r.bo(e.ReceiptCompartmentTanks[0].PlannedQuantity))})),e}getVesselSearchOptions(){let e=M().cloneDeep(this.state.vesselSearchOptions),t=this.state.modMarineReceipt.VesselCode;if(null!==t&&""!==t&&void 0!==t){void 0===e.find((e=>e.value.toLowerCase()===t.toLowerCase()))&&e.push({text:t,value:t})}return e}getCarrierList(){S()(D.Xj6+"?ShareholderCode=&Transportationtype="+d.LY.MARINE,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=r.Zj(t.EntityResult),i=M().cloneDeep(e);i.length>d.bM&&(i=i.slice(0,d.bM)),this.setState({carrierOptions:e,carrierSearchOptions:i})}}else console.log("Error in GetCarrierListForRole:",t.ErrorList)})).catch((e=>{console.log("Error while getting Carrier List:",e)}))}getCarrierShareholder(){S()(D.S4D+"?ShareholderCode=&Transportationtype="+d.LY.MARINE,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=new Map;t.EntityResult.Table.forEach((t=>{e.set(t.Common_Code,t.Common_Shareholder)})),this.setState({carrierShareholderMap:e})}else console.log("Error in getCarrierShareholder:",t.ErrorList)})).catch((e=>{console.log("Error while getting CarrierShareholder:",e)}))}getCarrierSearchOptions(){let e=M().cloneDeep(this.state.carrierSearchOptions),t=this.state.modMarineReceipt.CarrierCode;if(null!==t&&""!==t&&void 0!==t){void 0===e.find((e=>e.value.toLowerCase()===t.toLowerCase()))&&e.push({text:t,value:t})}return e}getReceiptCompartmentDetails(e){try{if(void 0===e.Common_Code)return void this.setState({receiptCompartmentDetails:[]});S()(D.ROG+"?ShareholderCode="+this.props.selectedShareholder+"&MarineReceiptCode="+e.Common_Code,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){for(var i=0;i<t.EntityResult.length;i++)t.EntityResult[i]={...t.EntityResult[i],ForceComplete:!1,AdjustPlan:null},t.EntityResult[i].AdjustedPlanQuantity=""!==t.EntityResult[i].AdjustedPlanQuantity&&null!==t.EntityResult[i].AdjustedPlanQuantity?t.EntityResult[i].AdjustedPlanQuantity.toLocaleString():"",t.EntityResult[i].PlannedQuantity=""!==t.EntityResult[i].PlannedQuantity&&null!==t.EntityResult[i].PlannedQuantity?t.EntityResult[i].PlannedQuantity.toLocaleString():"",t.EntityResult[i].UnloadedQuantity=""!==t.EntityResult[i].UnloadedQuantity&&null!==t.EntityResult[i].UnloadedQuantity?t.EntityResult[i].UnloadedQuantity.toLocaleString():"";let e=M().cloneDeep(t.EntityResult);this.setState({modReceiptCompartment:e,receiptCompartmentDetails:t.EntityResult})}else this.setState({modReceiptCompartment:[],receiptCompartmentDetails:[]}),console.log("Error in getReceiptCompartmentDetails:",t.ErrorList)})).catch((e=>{console.log("Error while getting receipt compartment details:",e)}))}catch(t){console.log(t)}}getAdjustPlanPermission(e){var t=[{key:b.UB,value:e.Common_Code},{key:"OperationName",value:"ADJUST_PLAN"}],i={keyDataCode:b.UB,KeyCodes:t};S()(D.t1Q,r.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data,{operationsVisibilty:i}={...this.state};!0===t.IsSuccess?(i.adjustPlan=e.data.IsSuccess&&r.ab(this.props.userDetails.EntityResult.FunctionsList,x.i.modify,x.fr),this.setState({operationsVisibilty:i})):(i.adjustPlan=!1,this.setState({operationsVisibilty:i}))})).catch((e=>{console.log("Error while getting operation permission:",e)}))}getForceCompletenPermission(e){var t=[{key:b.UB,value:e.Common_Code},{key:"OperationName",value:"FORCE_COMPLETE"}],i={keyDataCode:b.UB,KeyCodes:t};S()(D.t1Q,r.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data,{operationsVisibilty:i}={...this.state};!0===t.IsSuccess?(i.forceComplete=e.data.IsSuccess&&r.ab(this.props.userDetails.EntityResult.FunctionsList,x.i.modify,x.fr),this.setState({operationsVisibilty:i})):(i.forceComplete=!1,this.setState({operationsVisibilty:i}))})).catch((e=>{console.log("Error while getting operation permission:",e)}))}getMarineUnLoadingDetails(e){try{S()(D.mxm+"?ShareholderCode="+this.props.selectedShareholder+"&MarineReceiptCode="+e.Common_Code,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){this.setState({ViewUnloadingData:t.EntityResult});var{operationsVisibilty:i}={...this.state};i.add=r.ab(this.props.userDetails.EntityResult.FunctionsList,x.i.add,x.fr),i.delete=r.ab(this.props.userDetails.EntityResult.FunctionsList,x.i.remove,x.fr),i.delete=!1,i.add=!1,i.shareholder=!1,this.setState({isViewUnloading:!0,isReadyToRender:!1})}})).catch((e=>{console.log(e)})),S()(D.Exl+"?MarineReceiptCode="+e.Common_Code,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess&&this.setState({ViewUnloadingHideFields:t.EntityResult})})).catch((e=>{console.log(e)}))}catch(t){console.log(t)}}getBaseProductList(){S()(D.mD_,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&void 0!==t.EntityResult){let e=t.EntityResult;this.setState({baseProductDetails:e})}}else console.log("Error in getBaseProductList:",t.ErrorList)})).catch((e=>{console.log("Error while getting Base Product List:",e)}))}getTankCode(){var e=this.props.userDetails.EntityResult.PrimaryShareholder;S()(D.Ibp+"?ShareholderCode="+e,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){const e=r.Zj(t.EntityResult);this.setState({tankCodeOptions:e})}}else console.log("Error in getTankCode:",t.ErrorList)})).catch((e=>{console.log("Error in getTankCode:",e)}))}getTankListForRole(e){var t=this.props.userDetails.EntityResult.PrimaryShareholder;S()(D.eX4+"?ShareholderCode="+t,r.Jm(this.props.tokenDetails.tokenInfo)).then((t=>{var i=t.data;if(!0===i.IsSuccess){var a=[],s=i.EntityResult.Table;if(this.props.userDetails.EntityResult.IsEnterpriseNode)if(""===e)for(let e=0;e<s.length;e++)a.push(s[e].Common_Code);else{s=s.filter((t=>t.TerminalCode===e));for(let e=0;e<s.length;e++)a.push(s[e].Common_Code)}else for(let e=0;e<s.length;e++)a.push(s[e].Common_Code);a=r.Zj(a),this.setState({tankCodeOptions:a})}else this.setState({tankCodeOptions:[]}),console.log("Error in getTankListForRole:",i.ErrorList)})).catch((e=>{this.setState({tankCodeOptions:[]}),console.log("Error while getting TankListForRole:",e)}))}getAdditivesList(){S()(D.Oyd,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&void 0!==t.EntityResult){let e=t.EntityResult;this.setState({additiveDetails:e})}}else console.log("Error in getAdditivesList:",t.ErrorList)})).catch((e=>{console.log("Error while getting Additives List:",e)}))}getSaveEnabled(){var e=this.handleSaveCompartmentDetailsEnabled(),t=M().cloneDeep(this.state.saveEnabled);return 2===M().cloneDeep(this.props.viewTab)?e:t}getKPIList(e){if(!0===r.ab(this.props.userDetails.EntityResult.FunctionsList,x.i.view,x.bL)){let t={PageName:O.ZO,TransportationType:d.LY.MARINE,InputParameters:[{key:"ReceiptCode",value:e}]};S()(D.dxq,r.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({marineReceiptKPIList:t.EntityResult.ListKPIDetails}):(this.setState({marineReceiptKPIList:[]}),console.log("Error in pipeline KPIList:",t.ErrorList))})).catch((e=>{console.log("Error while getting PipelineDispatch KPIList:",e)}))}}render(){var e=M().cloneDeep(this.state.modMarineReceipt);const t=this.getSaveEnabled(),i=[{fieldName:"Marine_ReceiptCompDetail_LastUpdated",fieldValue:new Date(e.LastUpdatedTime).toLocaleDateString()+" "+new Date(e.LastUpdatedTime).toLocaleTimeString()},{fieldName:"Marine_ReceiptCompDetail_CreatedTime",fieldValue:new Date(e.CreatedTime).toLocaleDateString()+" "+new Date(e.CreatedTime).toLocaleTimeString()},{fieldName:"Terminal_ActiveTime",fieldValue:void 0!==e.LastActiveTime&&null!==e.LastActiveTime?new Date(e.LastActiveTime).toLocaleDateString()+" "+new Date(e.LastActiveTime).toLocaleTimeString():""}];return this.state.isReadyToRender?(0,p.jsxs)("div",{children:[(0,p.jsx)(c.A,{children:(0,p.jsx)(E.A,{entityCode:this.state.marineReceipt.ReceiptCode,newEntityName:"Marine_ReceiptCompDetail_NewShipmentByCompartment",popUpContents:i})}),(0,p.jsx)(j.A,{KPIList:this.state.marineReceiptKPIList,children:" "}),(0,p.jsx)(c.A,{children:(0,p.jsx)(u,{marineReceipt:this.state.marineReceipt,modMarineReceipt:this.state.modMarineReceipt,modAssociations:this.state.modAssociations,modTankAssociations:this.state.modTankAssociations,validationErrors:this.state.validationErrors,attributeValidationErrors:this.state.attributeValidationErrors,selectedAssociations:this.state.selectedAssociations,listOptions:{shareholders:this.state.shareholders,terminalCodes:this.state.terminalCodes,shipmentUOM:this.state.shipmentUOM,compSeqOptions:this.state.compSeqOptions,vessels:this.getVesselSearchOptions(),FinishedProducts:this.state.FinishedProducts,supplierDestinationOptions:this.state.supplierDestinationOptions,shareholderSuppliers:this.state.shareholderSuppliers,baseProductDetails:this.state.baseProductDetails,tankCodeOptions:this.state.tankCodeOptions,additiveDetails:this.state.additiveDetails,carriers:this.getCarrierSearchOptions()},onCarrierCompanyChange:this.onCarrierCompanyChange,onFieldChange:this.handleChange,onDateTextChange:this.handleDateTextChange,handleRowSelectionChange:this.handleAssociationSelectionChange,handleCellDataEdit:this.handleCellDataEdit,handleAttributeCellDataEdit:this.handleAttributeCellDataEdit,handleAddAssociation:this.handleAddAssociation,handleAddTankAssociation:this.handleAddTankAssociation,handleDeleteAssociation:this.handleDeleteAssociation,handleDeleteTankAssociation:this.handleDeleteTankAssociation,onVesselSearchChange:this.handleVesselSearchChange,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,isSlotbookinginUI:this.props.userDetails.EntityResult.ShowSlotBookedInUI,operationsVisibilty:this.state.operationsVisibilty,modReceiptCompartment:this.state.modReceiptCompartment,receiptCompartmentDetails:this.state.receiptCompartmentDetails,handleOperationButtonClick:this.props.handleOperationClick,viewTab:this.props.viewTab,onViewAuditTrailClick:this.handleViewAuditTrail,onViewUnloading:this.handleViewUnloading,onManualEntry:this.handleManualEntry,onTabChange:this.onTabChange,handleTankAssociationSelectionChange:this.handleTankAssociationSelectionChange,selectedTankAssociations:this.state.selectedTankAssociations,handleTankCellDataEdit:this.handleTankCellDataEdit,selectedAttributeList:this.state.selectedAttributeList,toggleExpand:this.toggleExpand,expandedRows:this.state.expandedRows,expandedCompDetailRows:this.state.expandedCompDetailRows,handleCompAttributeCellDataEdit:this.handleCompAttributeCellDataEdit,compartmentDetailsPageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,isHSEInspectionEnable:this.state.isHSEInspectionEnable,isBondShow:this.state.isBondShow,onCarrierSearchChange:this.handleCarrierSearchChange,isTransloading:this.state.isTransloading,compDetailsTab:this.state.isNewReceipt?[]:[""],updateEnableForConfigure:this.props.updateEnableForConfigure})}),(0,p.jsx)(c.A,{children:(0,p.jsx)(m.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:t})}),this.state.showAuthenticationLayout?(0,p.jsx)(U.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.marineReceipt.ReceiptCode?x.i.add:x.i.modify,functionGroup:x.au,handleOperation:this.addUpdateMarineDispatch,handleClose:this.handleAuthenticationClose}):null]}):!0===this.state.isManualEntry?(0,p.jsx)(c.A,{children:(0,p.jsx)(L.default,{handleBack:this.handleBack,ReceiptCode:this.state.modMarineReceipt.ReceiptCode,ReceiptStatus:this.state.modMarineReceipt.ReceiptStatus,QuantityUOM:this.state.modMarineReceipt.QuantityUOM,ActualTerminalCode:this.state.modMarineReceipt.ActualTerminalCode})}):!0===this.state.viewAuditTrail?(0,p.jsx)(c.A,{children:(0,p.jsx)(k.default,{receiptCode:this.props.selectedRow.Common_Code,selectedShareholder:this.state.selectedShareholder,handleBack:this.handleBack})}):!0===this.state.isViewUnloading?(0,p.jsx)(c.A,{children:(0,p.jsx)(P.A,{tableData:this.state.ViewUnloadingData.Table,loadingDetailsHideFields:this.state.ViewUnloadingHideFields,setValid:this.props.setValid,handleBack:this.handleBack,isWebPortalUser:this.props.userDetails.EntityResult.IsWebPortalUser})}):(0,p.jsx)(I.A,{message:"Loading"})}}const Q=(0,A.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})),(e=>({userActions:(0,T.zH)(y,e)})))(_)},12577:(e,t,i)=>{i.r(t),i.d(t,{default:()=>v});var a=i(65043),s=i(78374),o=i(67907),n=i(72711),r=i(40854),l=i.n(r),d=i(7523),c=i(72067),h=i(69062),p=i(50805),u=i(9966),m=i(97508),C=i(53536),g=i.n(C),R=i(46100),S=i(45127),D=i(728),y=i(15417),T=i(70579);D.setLicenseKey(d.yQ);class A extends a.Component{constructor(){super(...arguments),this.state={receiptViewAuditTrailData:[],modReceiptViewAuditTrailData:[],openPrint:!1,auditTrailAttributeMetaDataList:[],compartmentDetailsPageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,ViewAuditTrailList:[]},this.handlePrint=()=>{try{this.setState({openPrint:!0},(()=>{}))}catch(e){console.log("MarineReceiptViewAuditTrailDetailsComposite:Error occured on handlePrint",e)}}}getReceiptViewAuditTrail(e){void 0!==e?l()(c.k9J+"?ShareholderCode="+this.props.userDetails.EntityResult.PrimaryShareholder+"&MarineReceiptCode="+e,h.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({receiptViewAuditTrailData:g().cloneDeep(t.EntityResult),modReceiptViewAuditTrailData:g().cloneDeep(t.EntityResult)}):this.setState({receiptViewAuditTrailData:g().cloneDeep(R.Gi),modReceiptViewAuditTrailData:g().cloneDeep(R.Gi)});var i=g().cloneDeep(this.state.modReceiptViewAuditTrailData),a=g().cloneDeep(this.state.receiptViewAuditTrailData);for(let o=0;o<i.length;o++){let e=i[o].ReceiptStatus;e===d.oO.AUTO_UNLOADED?e=d.cG.AUTO_UNLOADED:e===d.oO.CLOSED?e=d.cG.CLOSED:e===d.oO.INTERRUPTED?e=d.cG.INTERRUPTED:e===d.oO.UNLOADING?e=d.cG.UNLOADING:e===d.oO.MANUALLY_UNLOADED?e=d.cG.MANUALLY_UNLOADED:e===d.oO.PARTIALLY_UNLOADED?e=d.cG.PARTIALLY_UNLOADED:e===d.oO.QUEUED?e=d.cG.QUEUED:e===d.oO.READY&&(e=d.cG.READY),i[o].ReceiptStatus=e,i[o].UpdatedTime=new Date(i[o].UpdatedTime).toLocaleDateString()+" "+new Date(i[o].UpdatedTime).toLocaleTimeString(),this.setState({receiptViewAuditTrailData:a,modReceiptViewAuditTrailData:i})}var s=g().cloneDeep(this.state.receiptViewAuditTrailData);for(let o=0;o<s.length;o++)s[o].AttributesforUI=this.formReadonlyCompAttributes(s[o].Attributes,this.state.auditTrailAttributeMetaDataList);this.setState({ViewAuditTrailList:s})})).catch((e=>{console.log("Error while getting MarineReceiptViewAuditTrail:",e)})):this.setState({receiptViewAuditTrailData:[],modReceiptViewAuditTrailData:[]})}formReadonlyCompAttributes(e,t){let i=[];return null!==t&&void 0!==t&&t.length>0&&t.forEach((e=>{e.attributeMetaDataList.forEach((e=>{i.push({AttributeCode:e.Code,AttributeName:e.DisplayName?e.DisplayName:e.Code,AttributeValue:e.DefaultValue,TerminalCode:e.TerminalCode,IsMandatory:e.IsMandatory,DataType:e.DataType,IsReadonly:e.IsReadonly,MinValue:e.MinValue,MaxValue:e.MaxValue,ValidationFormat:e.ValidationFormat,compSequenceNo:""})}))})),null!==e&&void 0!==e&&e.length>0&&e.forEach((e=>{i.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.ListOfAttributeData.forEach((e=>{t.AttributeCode===e.AttributeCode&&(t.AttributeValue=e.AttributeValue)}))}))})),i}componentDidMount(){try{h.pJ(this.props.userDetails.EntityResult.IsArchived),this.getAttributes()}catch(e){console.log("MarineReceiptViewAuditTrailDetailsComposite:Error occured on componentDidMount",e)}}getAttributes(){try{l()(c.fKH,h.tW([y.Gj],this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?(null!==t.EntityResult.MARINERECEIPTSTATUSTIME&&void 0!==t.EntityResult.MARINERECEIPTSTATUSTIME||(t.EntityResult.MARINERECEIPTSTATUSTIME=[]),this.setState({auditTrailAttributeMetaDataList:g().cloneDeep(t.EntityResult.MARINERECEIPTSTATUSTIME)},(()=>{this.getReceiptViewAuditTrail(this.props.receiptCode)}))):console.log("Failed to get Attributes")}))}catch(e){console.log("Error while getting Attributes:",e)}}displayTMModalforPrintConfirm(){return(0,T.jsx)(o.TranslationConsumer,{children:e=>(0,T.jsx)(n.Modal,{onClose:()=>this.setState({openPrint:!1}),open:this.state.openPrint,className:"marineModalPrint",closeOnDimmerClick:!1,children:(0,T.jsxs)(n.Modal.Content,{children:[(0,T.jsx)("div",{className:"col col-md-8 col-lg-9 col col-xl-9",children:(0,T.jsx)("h3",{children:e("ViewMarineReceiptAuditTrail_ViewAuditTrailForMarineReceipt")+" : "+this.props.receiptCode})}),(0,T.jsx)("div",{className:"col-md-10 container-fluid",children:(0,T.jsxs)(S.IO,{itemsSource:this.state.modReceiptViewAuditTrailData,chartType:"Line",bindingX:"UpdatedTime",palette:["red"],style:{width:"100%",height:"450px"},children:[(0,T.jsx)(S.tN,{position:"Bottom"}),(0,T.jsx)(S.vc,{wjProperty:"axisY",majorUnit:1,max:7,min:0,itemFormatter:b,axisLine:!0}),(0,T.jsx)(S.t3,{binding:"ReceiptStatus",name:e("ReceiptStatus")})]})}),(0,T.jsx)("div",{className:"col-12 detailsTable",id:"printTable",children:(0,T.jsxs)(s.bQ,{data:this.state.ViewAuditTrailList,children:[(0,T.jsx)(s.bQ.Column,{className:"compColHeight",field:"ReceiptStatus",header:e("ReceiptStatus"),editable:!1,editFieldType:"text"},"ReceiptStatus"),(0,T.jsx)(s.bQ.Column,{className:"compColHeight",field:"UpdatedTime",renderer:e=>E(e.rowData.UpdatedTime),header:e("SAAuditTrial_UpdatedTime"),editable:!1,editFieldType:"text"},"UpdatedTime"),(0,T.jsx)(s.bQ.Column,{className:"compColHeight",field:"CompartmentSeqNoInVehicle",header:e("ViewMarineReceiptAuditTrail_ReceiptCompartmentSeq"),editable:!1,editFieldType:"text"},"CompartmentSeqNoInVehicle"),(0,T.jsx)(s.bQ.Column,{className:"compColHeight",field:"ReceiptCompartmentStatus",renderer:e=>x(e.rowData.ReceiptCompartmentStatus),header:e("ViewMarineReceiptAuditTrail_ReceiptCompartmentStatus"),editable:!1,editFieldType:"text"},"ReceiptCompartmentStatus"),(0,T.jsx)(s.bQ.Column,{className:"compColHeight",field:"UserPIN",header:e("PIN"),editable:!1,editFieldType:"text"},"UserPIN"),(0,T.jsx)(s.bQ.Column,{className:"compColHeight",field:"OfficerName",header:e("ViewAuditTrail_OfficerName"),editable:!1,editFieldType:"text"},"OfficerName"),void 0!==this.state.ViewAuditTrailList&&this.state.ViewAuditTrailList.length>0?this.state.ViewAuditTrailList[0].AttributesforUI.map((t=>(0,T.jsx)(s.bQ.Column,{className:"compColHeight",header:e(t.AttributeName),editable:!1,renderer:f}))):[]]})}),(0,T.jsx)(n.Modal.Footer,{children:(0,T.jsxs)("div",{className:"viewPrint",children:[(0,T.jsx)(n.Button,{type:"secondary",size:"small",content:e("MarineEOD_Close"),onClick:()=>{this.setState({openPrint:!1})}}),(0,T.jsx)(n.Button,{type:"primary",size:"small",content:e("EOD_Print"),onClick:()=>{let t=window.document.getElementById("printTable").innerHTML;const i=window.document.createElement("IFRAME");let a=null;window.document.body.appendChild(i),a=i.contentWindow.document;const s=t.substring(0,t.indexOf("<table")+6),o=t.substring(t.indexOf("<table")+6,t.length);t=e("ViewMarineReceiptAuditTrail_ViewAuditTrailForMarineReceipt")+" : "+this.props.receiptCode+s+' border="1" cellspacing="0"'+o,t=t.replace('<tfoot class="p-datatable-tfoot">',""),t=t.replace('<tr><td class="compColHeight"></td><td class="compColHeight"></td><td class="compColHeight"></td><td class="compColHeight"></td><td class="compColHeight"></td><td class="compColHeight"></td></tr>',""),a.write(t),console.info(t),a.close(),i.contentWindow.focus(),i.contentWindow.print(),setTimeout((()=>{document.body.removeChild(i)}),2e3)}})]})})]})})})}render(){return(0,T.jsxs)("div",{children:[(0,T.jsx)(o.TranslationConsumer,{children:e=>(0,T.jsx)("div",{children:(0,T.jsxs)("div",{className:"detailsContainer",children:[(0,T.jsx)("div",{className:"row",children:(0,T.jsx)("div",{className:"col-12",children:(0,T.jsx)("h3",{children:e("ViewMarineReceiptAuditTrail_ViewAuditTrailForMarineReceipt")+" : "+this.props.receiptCode})})}),(0,T.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,T.jsx)("div",{className:"col-12 container-fluid",children:(0,T.jsxs)(S.IO,{itemsSource:this.state.modReceiptViewAuditTrailData,chartType:"Line",bindingX:"UpdatedTime",palette:["red"],style:{width:"100%",minWidth:"800px",height:"450px"},children:[(0,T.jsx)(S.tN,{position:"Bottom"}),(0,T.jsx)(S.vc,{wjProperty:"axisY",majorUnit:1,max:7,min:0,itemFormatter:b,axisLine:!0}),(0,T.jsx)(S.t3,{binding:"ReceiptStatus",name:e("ReceiptStatus")})]})})}),(0,T.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,T.jsx)("div",{className:"col-12 detailsTable",children:(0,T.jsxs)(s.bQ,{data:this.state.ViewAuditTrailList,children:[(0,T.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"ReceiptStatus",header:e("ReceiptStatus"),editable:!1,editFieldType:"text"},"ReceiptStatus"),(0,T.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"UpdatedTime",renderer:e=>E(e.rowData.UpdatedTime),header:e("SAAuditTrial_UpdatedTime"),editable:!1,editFieldType:"text"},"UpdatedTime"),(0,T.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"CompartmentSeqNoInVehicle",header:e("ViewMarineReceiptAuditTrail_ReceiptCompartmentSeq"),editable:!1,editFieldType:"text"},"CompartmentSeqNoInVehicle"),(0,T.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"ReceiptCompartmentStatus",renderer:e=>x(e.rowData.ReceiptCompartmentStatus),header:e("ViewMarineReceiptAuditTrail_ReceiptCompartmentStatus"),editable:!1,editFieldType:"text"},"ReceiptCompartmentStatus"),(0,T.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"UserPIN",header:e("PIN"),editable:!1,editFieldType:"text"},"UserPIN"),(0,T.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",field:"OfficerName",header:e("ViewAuditTrail_OfficerName"),editable:!1,editFieldType:"text"},"OfficerName"),void 0!==this.state.ViewAuditTrailList&&this.state.ViewAuditTrailList.length>0?this.state.ViewAuditTrailList[0].AttributesforUI.map((t=>(0,T.jsx)(s.bQ.Column,{className:"compColHeight colminWidth",header:e(t.AttributeName),editable:!1,renderer:f}))):[]]})})}),(0,T.jsxs)("div",{className:"row",children:[(0,T.jsx)("div",{className:"col-12 col-sm-6 col-lg-8",children:(0,T.jsx)(n.Button,{className:"backButton",onClick:this.props.handleBack,content:e("Back")})}),this.props.userDetails.EntityResult.IsWebPortalUser?[]:(0,T.jsx)("div",{className:"col-12 col-sm-6 col-lg-4",style:{textAlign:"right"},children:(0,T.jsx)(n.Button,{className:"printButton",onClick:this.handlePrint,content:e("ViewEAAuditTrail_PrintAuditTrail")})})]})]})})}),this.displayTMModalforPrintConfirm()]})}}const E=e=>{try{return null==e||""===e||void 0===e?"":new Date(e).toLocaleDateString()+" "+new Date(e).toLocaleTimeString()}catch(t){return""}},b=(e,t)=>(t.cls=null,e.fontSize="7px",t.val===d.cG.AUTO_UNLOADED?t.text=d.oO.AUTO_UNLOADED:t.val===d.cG.CLOSED?t.text=d.oO.CLOSED:t.val===d.cG.INTERRUPTED?t.text=d.oO.INTERRUPTED:t.val===d.cG.UNLOADING?t.text=d.oO.UNLOADING:t.val===d.cG.MANUALLY_UNLOADED?t.text=d.oO.MANUALLY_UNLOADED:t.val===d.cG.PARTIALLY_UNLOADED?t.text=d.oO.PARTIALLY_UNLOADED:t.val===d.cG.QUEUED?t.text=d.oO.QUEUED:t.val===d.cG.READY&&(t.text=d.oO.READY),t),x=e=>{try{return 0===e&&null!==e?d.gB.COMPLETED.toLocaleString():1===e&&null!==e?d.gB.EMPTY.toLocaleString():2===e&&null!==e?d.gB.FORCE_COMPLETED.toLocaleString():3===e&&null!==e?d.gB.INTERRUPTED.toLocaleString():4===e&&null!==e?d.gB.OVER_UNLOADED.toLocaleString():5===e&&null!==e?d.gB.PART_UNLOADED.toLocaleString():6===e&&null!==e?d.gB.UNLOAD_NOTSTARTED.toLocaleString():7===e&&null!==e?d.gB.UNLOADING.toLocaleString():e}catch(t){return e}},f=e=>{try{const t=e.rowData.AttributesforUI.filter((t=>t.AttributeName===e.name))[0];return t.DataType.toLowerCase()===d.pe.STRING.toLowerCase()||t.DataType.toLowerCase()===d.pe.INT.toLowerCase()||t.DataType.toLowerCase()===d.pe.LONG.toLowerCase()||t.DataType.toLowerCase()===d.pe.FLOAT.toLowerCase()?(0,T.jsx)("label",{children:t.AttributeValue}):t.DataType.toLowerCase()===d.pe.BOOL.toLowerCase()?(0,T.jsx)(n.Checkbox,{checked:"true"===t.AttributeValue.toString().toLowerCase(),disabled:!0}):(0,T.jsx)("label",{children:new Date(t.AttributeValue).toLocaleDateString()})}catch(t){return""}},v=(0,m.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})),(e=>({userActions:(0,p.zH)(u,e)})))(A)},38044:(e,t,i)=>{i.d(t,{A:()=>c});var a=i(65043),s=i(78374),o=i(67907),n=i(72711),r=i(69062),l=i(80312),d=i(70579);function c(e){let{tableData:t,loadingDetailsHideFields:i,setValid:c,handleBack:h,onSaved:p,userDetails:u,status:m,isWebPortalUser:C}=e;const[g]=(0,o.useTranslation)(),[R,S]=(0,a.useState)(!1),[D,y]=(0,a.useState)({});const T=e=>{if(r.pJ(u.EntityResult.IsArchived),r.ab(u.EntityResult.FunctionsList,l.i.modify,l.r6))S(!0),y(e);else{p([],"Permission",{messageType:"critical",message:"ReceiptCompDetail_Permission",messageResultDetails:[{keyFields:"",keyValues:"",isSuccess:!1,errorMessage:"ReceiptCompDetail_UnloadingDetailsPermission"}]})}},A=e=>{const{value:t}=e;try{return null==t||0===t.length||""===t?"":new Date(t).toLocaleDateString()+" "+new Date(t).toLocaleTimeString()}catch(i){return t}},E=e=>{const{value:t}=e;try{if(null!=t&&""!==t){var i=t.indexOf(" ");if(0===i)return"";var a=t.substr(0,i),s=t.substr(i+1,t.length-i-1);return parseFloat(a).toLocaleString()+" "+s}}catch(o){return t}return""},b=e=>{const{value:t}=e;try{if(null!=t&&""!==t)return t.toLocaleString()}catch(i){return t}return""};return(0,d.jsx)("div",{children:(0,d.jsxs)("div",{className:"detailsContainer",children:[(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col col-md-8 col-lg-9 col col-xl-9",children:(0,d.jsx)("h3",{children:g("ViewMarineUnloadingDetails_Title")})}),(0,d.jsx)("div",{className:"col col-md-8 col-lg-9 col col-xl-9",children:(0,d.jsx)("h4",{children:g("ViewMarineUnloadingDetails_Header")})}),(0,d.jsx)("div",{className:"detailsTable loadingTable",children:(0,d.jsxs)(s.bQ,{data:t,scrollable:!0,scrollWidth:"100%",resizableColumns:!0,children:[i.indexOf("IsInvalid")>-1||C?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"IsInvalid",header:g("ViewMarineUnloadingDetails_Valid"),initialWidth:"90px",editable:!1,editFieldType:"text",renderer:e=>(e=>{if(null==e.rowData.BaseProductCode||0===e.rowData.BaseProductCode.toString().length)return e.rowData.IsInvalid?(0,d.jsx)("span",{children:g("ViewMarineUnloadingDetails_Invalid")}):"CLOSED"!==m?(0,d.jsx)("button",{className:"ValidBtn",onClick:()=>T(e),children:g("ViewMarineUnloadingDetails_Valid")}):(0,d.jsx)("span",{children:g("ViewMarineLoadingDetails_Valid")})})(e)},"IsInvalid"),i.indexOf("CompartmentSeqNoInVehicle")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"CompartmentSeqNoInVehicle",header:g("ViewMarineUnloadingDetails_CompartmentSeqNo"),initialWidth:"130px",editable:!1,editFieldType:"text",renderer:e=>b(e)},"CompartmentSeqNoInVehicle"),i.indexOf("ProductCode")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"ProductCode",header:g("ViewMarineUnloadingDetails_ProductCode"),initialWidth:"130px",editable:!1,editFieldType:"text",renderer:e=>(e=>{const{value:t}=e;return t.replace(/&nbsp;/g," ")})(e)},"ProductCode"),i.indexOf("BaseProductCode")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"BaseProductCode",header:g("ViewMarineUnloadingDetails_BaseProductCode"),initialWidth:"170px",editable:!1,editFieldType:"text"},"BaseProductCode"),i.indexOf("TankCode")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"TankCode",header:g("ViewMarineUnloadingDetails_TankCode"),initialWidth:"130px",editable:!1,editFieldType:"text"},"TankCode"),i.indexOf("BayCode")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"BayCode",header:g("ViewMarineUnloadingDetails_BayCode"),initialWidth:"130px",editable:!1,editFieldType:"text"},"BayCode"),i.indexOf("BCUCode")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"BCUCode",header:g("ViewMarineUnloadingDetails_BCUCode"),initialWidth:"130px",editable:!1,editFieldType:"text"},"BCUCode"),i.indexOf("MeterCode")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"MeterCode",header:g("ViewMarineUnloadingDetails_MeterCode"),initialWidth:"120px",editable:!1,editFieldType:"text"},"MeterCode"),i.indexOf("GrossQuantity")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"GrossQuantity",header:g("ViewMarineUnloadingDetails_GrossQuantity"),initialWidth:"130px",editable:!1,editFieldType:"text",renderer:e=>E(e)},"GrossQuantity"),i.indexOf("NetQuantity")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"NetQuantity",header:g("ViewMarineUnloadingDetails_NetQuantity"),initialWidth:"120px",editable:!1,editFieldType:"text",renderer:e=>E(e)},"NetQuantity"),i.indexOf("Density")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"Density",header:g("ViewMarineUnloadingDetails_ProductDensity"),initialWidth:"140px",editable:!1,editFieldType:"text",renderer:e=>E(e)},"Density"),i.indexOf("Pressure")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"Pressure",header:g("ViewMarineUnloadingDetails_Pressure"),initialWidth:"100px",editable:!1,editFieldType:"text",renderer:e=>E(e)},"Pressure"),i.indexOf("Temperature")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"Temperature",header:g("ViewMarineUnloadingDetails_Temperature"),initialWidth:"120px",editable:!1,editFieldType:"text",renderer:e=>E(e)},"Temperature"),i.indexOf("StartTime")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"StartTime",header:g("ViewMarineUnloadingDetails_StartTime"),initialWidth:"200px",editable:!1,editFieldType:"text",renderer:e=>A(e)},"StartTime"),i.indexOf("EndTime")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"EndTime",header:g("ViewMarineUnloadingDetails_EndTime"),initialWidth:"200px",editable:!1,editFieldType:"text",renderer:e=>A(e)},"EndTime"),i.indexOf("StartTotalizer")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"StartTotalizer",header:g("ViewMarineUnloadingDetails_StartTotalizer"),initialWidth:"130px",editable:!1,editFieldType:"text",renderer:e=>b(e)},"StartTotalizer"),i.indexOf("EndTotalizer")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"EndTotalizer",header:g("ViewMarineUnloadingDetails_EndTotalizer"),initialWidth:"120px",editable:!1,editFieldType:"text",renderer:e=>b(e)},"EndTotalizer"),i.indexOf("NetStartTotalizer")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"NetStartTotalizer",header:g("ViewMarineUnloadingDetails_netstarttotalizer"),initialWidth:"150px",editable:!1,editFieldType:"text",renderer:e=>b(e)},"NetStartTotalizer"),i.indexOf("NetEndtoTalizer")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"NetEndtoTalizer",header:g("ViewMarineUnloadingDetails_netendtotalizer"),initialWidth:"140px",editable:!1,editFieldType:"text",renderer:e=>b(e)},"NetEndtoTalizer"),i.indexOf("TransactionID")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"TransactionID",header:g("ViewMarineUnloadingDetails_TransactionNo"),initialWidth:"170px",editable:!1,editFieldType:"text",renderer:e=>b(e)},"TransactionID"),i.indexOf("Mass")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"Mass",header:g("ViewMarineUnloadingDetails_Mass"),initialWidth:"100px",editable:!1,editFieldType:"text"},"Mass"),i.indexOf("WeightInAir")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"WeightInAir",header:g("ViewMarineUnloadingDetails_WeightInAir"),initialWidth:"100px",editable:!1,editFieldType:"text"},"WeightInAir"),i.indexOf("WeightInVacuum")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"WeightInVacuum",header:g("ViewMarineUnloadingDetails_WeightInVacuum"),initialWidth:"100px",editable:!1,editFieldType:"text"},"WeightInVacuum"),i.indexOf("TankStartGrossQuantity")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"TankStartGrossQuantity",header:g("ViewMarineUnloadingDetails_TankStartGrossQuantity"),initialWidth:"200px",editable:!1,editFieldType:"text",renderer:e=>E(e)},"TankStartGrossQuantity"),i.indexOf("TankEndGrossQuantity")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"TankEndGrossQuantity",header:g("ViewMarineUnloadingDetails_TankEndGrossQuantity"),initialWidth:"200px",editable:!1,editFieldType:"text",renderer:e=>E(e)},"TankEndGrossQuantity"),i.indexOf("TankStartNetQuantity")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"TankStartNetQuantity",header:g("ViewMarineUnloadingDetails_TankStartNetQuantity"),initialWidth:"200px",editable:!1,editFieldType:"text",renderer:e=>E(e)},"TankStartNetQuantity"),i.indexOf("TankEndNetQuantity")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"TankEndNetQuantity",header:g("ViewMarineUnloadingDetails_TankEndNetQuantity"),initialWidth:"200px",editable:!1,editFieldType:"text",renderer:e=>E(e)},"TankEndNetQuantity"),i.indexOf("TankStartGrossMass")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"TankStartGrossMass",header:g("ViewMarineUnloadingDetails_TankStartGrossMass"),initialWidth:"180px",editable:!1,editFieldType:"text"},"TankStartGrossMass"),i.indexOf("TankEndGrossMass")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"TankEndGrossMass",header:g("ViewMarineUnloadingDetails_TankEndGrossMass"),initialWidth:"180px",editable:!1,editFieldType:"text"},"TankEndGrossMass"),i.indexOf("StartTemperature")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"StartTemperature",header:g("ViewMarineUnloadingDetails_StartTemperature"),initialWidth:"130px",editable:!1,editFieldType:"text"},"StartTemperature"),i.indexOf("EndTemperature")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"EndTemperature",header:g("ViewMarineUnloadingDetails_EndTemperature"),initialWidth:"130px",editable:!1,editFieldType:"text"},"EndTemperature"),i.indexOf("StartPressure")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"StartPressure",header:g("ViewMarineUnloadingDetails_StartPressure"),initialWidth:"130px",editable:!1,editFieldType:"text"},"StartPressure"),i.indexOf("EndPressure")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"EndPressure",header:g("ViewMarineUnloadingDetails_EndPressure"),initialWidth:"120px",editable:!1,editFieldType:"text"},"EndPressure"),i.indexOf("ReferenceDensity")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"ReferenceDensity",header:g("ViewMarineUnloadingDetails_ReferenceDensity"),initialWidth:"130px",editable:!1,editFieldType:"text"},"ReferenceDensity"),i.indexOf("StartProductDensity")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"StartProductDensity",header:g("ViewMarineUnloadingDetails_StartProductDensity"),initialWidth:"130px",editable:!1,editFieldType:"text"},"StartProductDensity"),i.indexOf("EndProductDensity")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"EndProductDensity",header:g("ViewMarineUnloadingDetails_EndProductDensity"),initialWidth:"130px",editable:!1,editFieldType:"text"},"EndProductDensity"),i.indexOf("StartWeightInAir")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"StartWeightInAir",header:g("ViewMarineUnloadingDetails_StartWeightInAir"),initialWidth:"130px",editable:!1,editFieldType:"text"},"StartWeightInAir"),i.indexOf("EndWeightInAir")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"EndWeightInAir",header:g("ViewMarineUnloadingDetails_EndWeightInAir"),initialWidth:"120px",editable:!1,editFieldType:"text"},"EndWeightInAir"),i.indexOf("Remarks")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"Remarks",header:g("ViewMarineUnloadingDetails_Remarks"),initialWidth:"100px",editable:!1,editFieldType:"text"},"Remarks"),i.indexOf("PresetQuantity")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"PresetQuantity",header:g("ViewMarineUnloadingDetails_PresetQuantity"),initialWidth:"130px",editable:!1,editFieldType:"text",renderer:e=>E(e)},"PresetQuantity"),i.indexOf("resetQuantity")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"resetQuantity",header:g("ViewMarineUnloadingDetails_resetQuantity"),initialWidth:"130px",editable:!1,editFieldType:"text",renderer:e=>E(e)},"resetQuantity"),i.indexOf("CalculatedGross")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"CalculatedGross",header:g("ViewMarineUnloadingDetails_CalculatedGross"),initialWidth:"130px",editable:!1,editFieldType:"text"},"CalculatedGross"),i.indexOf("CalculatedNet")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"CalculatedNet",header:g("ViewMarineUnloadingDetails_CalculatedNet"),initialWidth:"120px",editable:!1,editFieldType:"text"},"CalculatedNet"),i.indexOf("CalculatedValueUOM")>-1?"":(0,d.jsx)(s.bQ.Column,{className:"compColHeight",field:"CalculatedValueUOM",header:g("ViewMarineUnloadingDetails_CalculatedValueUOM"),initialWidth:"130px",editable:!1,editFieldType:"text"},"CalculatedValueUOM")]})}),(0,d.jsx)(o.TranslationConsumer,{children:e=>(0,d.jsxs)(n.Modal,{open:R,size:"small",children:[(0,d.jsx)(n.Modal.Content,{children:(0,d.jsx)("div",{children:(0,d.jsx)("b",{children:e("InValid_Confirm")})})}),(0,d.jsxs)(n.Modal.Footer,{children:[(0,d.jsx)(n.Button,{type:"secondary",content:e("Cancel"),onClick:()=>{S(!1),y({})}}),(0,d.jsx)(n.Button,{type:"primary",content:e("Confirm"),onClick:()=>{S(!1),y({}),c(D.rowData.fptransactionid,D.rowData.ProductCategoryType)}})]})]})})]}),(0,d.jsx)("div",{className:"row",style:{paddingTop:"15px"},children:(0,d.jsx)("div",{className:"col col-lg-8",children:(0,d.jsx)(n.Button,{className:"backButton",onClick:h,content:g("Back")})})})]})})}c.defaultProps={}}}]);
//# sourceMappingURL=8714.3503aac3.chunk.js.map