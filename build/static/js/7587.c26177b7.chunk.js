"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[7587,6001,8382,735,3116,3235,5973,8354],{77587:(e,t,s)=>{s.r(t),s.d(t,{default:()=>H});var a=s(65043),r=s(69062),i=s(40854),o=s.n(i),l=s(72067),n=s(9256),d=s(97508),c=(s(38726),s(65187)),h=s(43503),u=s(93779),m=s(40252),E=s(72711),g=s(67907),A=s(78374),C=s(7523),p=s(85800),S=s(35861),R=s(70579);function D(e){let{isBonded:t,modExchangeAgrement:s,exchangeAgreement:a,modExchangeAgreementItems:r,listOptions:i,onFieldChange:o,selectedAssociations:l,handleAssociationSelectionChange:n,handleCellDataEdit:d,handleAddAssociation:h,handleDeleteAssociation:u,onDateTextChange:m,validationErrors:D,handleViewAuditTrail:T,GetExchangeAgreementShipmentItemDetails:x,UpdateExchangeAgreementStatus:y,selectedAttributeList:I,attributeValidationErrors:v,handleCellAttrinuteDataEdit:N,isEnterpriseNode:b,selectedShareholder:f,btnCreatePTAgreement:P,btnFroceClose:L}=e;const w=e=>(0,R.jsx)(E.DatePicker,{fluid:!0,value:null===r[e.rowIndex][e.field]?"":new Date(r[e.rowIndex][e.field]),type:"date",displayFormat:(0,S.F1)(),indicator:"required",onChange:t=>d(t,e),onTextChange:(t,s)=>{m(e,t,s)},reserveSpace:!1}),j=e=>{const{value:t}=e;return null!==t?new Date(t).toLocaleDateString():""},O=e=>{const{value:t}=e;return"number"===typeof t?t.toLocaleString():t},_=(e,t)=>{let s=[];return s=e.find((e=>e.TerminalCode===t)),s.attributeValidationErrors},[H]=(0,g.useTranslation)();return(0,R.jsxs)("div",{className:"detailsContainer",children:[(0,R.jsxs)("div",{className:"row",children:[(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E.Input,{fluid:!0,value:""!==s.RequestCode?s.RequestCode:"",label:H("ExchangeAgreementDetails_RequestCode"),indicator:"required",onChange:e=>o("RequestCode",e),disabled:""!==a.RequestCode,reserveSpace:!1,error:H(D.RequestCode)})}),s.LenderShareholderCode===f||s.RequestStatus===C.wH.ACCEPTED||s.RequestStatus===C.wH.OFFER_REJECTED?(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E.Select,{fluid:!0,value:null==s.RequestStatus?"":s.RequestStatus,placeholder:H("FinishedProductInfo_Select"),label:H("ProductTransferAgreementDetails_Status"),options:i.currentShareholderAgreementStatusList,onChange:e=>o("RequestStatus",e),indicator:"required"})}):(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E.Input,{fluid:!0,value:null==s.RequestStatus?"":s.RequestStatus,label:H("ExchangeAgreementDetails_Status"),disabled:!0})}),(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E.Select,{fluid:!0,value:s.LenderShareholderCode,placeholder:H("FinishedProductInfo_Select"),label:H("ExchangeAgreementDetails_lenderShareHolder"),options:i.shareholders,onChange:e=>o("LenderShareholderCode",e),indicator:"required",disabled:""!==a.RequestCode})}),(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4 planneddate",children:(0,R.jsx)(E.DatePicker,{fluid:!0,value:s.StartDate,initialWidth:"160px",label:H("ExchangeAgreementDetails_StartDate"),displayFormat:(0,S.F1)(),type:"date",showYearSelector:"true",indicator:"required",onChange:e=>o("StartDate",e),reserveSpace:!1,error:H(D.StartDate)})}),(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4 planneddate",children:(0,R.jsx)(E.DatePicker,{fluid:!0,value:s.EndDate,initialWidth:"160px",label:H("ExchangeAgreementDetailsItem_EndDate"),displayFormat:(0,S.F1)(),type:"date",showYearSelector:"true",indicator:"required",onChange:e=>o("EndDate",e),reserveSpace:!1,error:H(D.EndDate)})}),(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E.Input,{fluid:!0,value:s.Remarks,label:H("ExchangeAgreementDetails_Comments"),reserveSpace:!1,onChange:e=>o("Remarks",e),indicator:""!==a.RequestCode?"required":"",error:H(D.Remarks)})}),t?(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4 ddlSelectAll",children:(0,R.jsx)(E.Checkbox,{label:H("TankInfo_Bonded"),checked:s.IsBonded,onChange:e=>o("IsBonded",e)})}):"",I.length>0?I.map((e=>(0,R.jsx)(c.A,{children:(0,R.jsx)(E.Accordion,{children:(0,R.jsx)(E.Accordion.Content,{className:"attributeAccordian",title:b?e.TerminalCode+" - "+H("Attributes_Header"):H("Attributes_Header"),children:(0,R.jsx)(p.n,{selectedAttributeList:e.attributeMetaDataList,handleCellDataEdit:N,attributeValidationErrors:_(v,e.TerminalCode)})})})}))):null]}),(0,R.jsxs)("div",{className:"row compartmentRow",children:[(0,R.jsxs)("h3",{children:[H("ExchangeAgreementDetails_ExchangeAgreementItem")," "]}),(0,R.jsx)("div",{className:"col",children:(0,R.jsxs)("div",{className:"compartmentIconContainer",children:[(0,R.jsxs)("div",{onClick:h,className:"compartmentIcon",children:[(0,R.jsx)("div",{children:(0,R.jsx)(E.Icon,{root:"common",name:"badge-plus",size:"medium"})}),(0,R.jsx)("div",{className:"margin_l10",children:(0,R.jsx)("h5",{className:"font14",children:H("TrailerInfo_Add")})})]}),(0,R.jsxs)("div",{onClick:u,className:"compartmentIcon margin_l30",children:[(0,R.jsx)("div",{children:(0,R.jsx)(E.Icon,{root:"common",name:"delete",size:"medium"})}),(0,R.jsx)("div",{className:"margin_l10",children:(0,R.jsx)("h5",{className:"font14",children:H("TrailerInfo_Delete")})})]})]})}),(0,R.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,R.jsx)("div",{className:"col-12 detailsTable",children:(0,R.jsxs)(A.bQ,{data:r,selectionMode:"multiple",selection:l,onSelectionChange:n,scrollable:!0,scrollHeight:"320px",children:[(0,R.jsx)(A.bQ.Column,{className:"compColHeight colminWidth",field:"BaseProductCode",header:(0,S.i7)(H("ExchangeAgreementDetailsItem_Product")),editFieldType:"text",editable:!0,renderer:e=>O(e),customEditRenderer:e=>((e,t)=>(0,R.jsx)(E.Select,{className:"selectDropwdown",value:r[e.rowIndex][e.field],fluid:!0,options:t,onChange:t=>d(t,e),indicator:"required",reserveSpace:!1,search:!0,noResultsMessage:H("noResultsMessage")}))(e,i.baseProductOptions)},"BaseProductCode"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight colminWidth",field:"StartDate",header:(0,S.i7)(H("ExchangeAgreementDetailsItem_StartDate")),editable:!0,editFieldType:"text",renderer:e=>j(e),customEditRenderer:e=>w(e)},"StartDate"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight colminWidth",field:"EndDate",header:(0,S.i7)(H("ExchangeAgreementDetailsItem_EndDate")),editFieldType:"text",editable:!0,renderer:e=>j(e),customEditRenderer:e=>w(e)},"EndDate"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight colminWidth",field:"Quantity",header:H("ExchangeAgreementDetailsItem_Qty"),editable:!0,editFieldType:"text",renderer:e=>O(e),customEditRenderer:e=>(0,R.jsx)(E.Input,{fluid:!0,value:r[e.rowIndex][e.field],onChange:t=>d(t,e),reserveSpace:!1})},"Quantity"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight colminWidth",field:"AcceptQuantity",header:H("ExchangeAgreementDetailsItem_AcceptQty"),editable:!1},"AcceptQuantity"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight colminWidth",field:"QuantityUOM",header:(0,S.i7)(H("ExchangeAgreementDetailsItem_UOM")),editable:!0,editFieldType:"text",customEditRenderer:e=>{let t=[];return"QuantityUOM"===e.field&&(t=[...i.UOMOptions]),(0,R.jsx)(E.Select,{className:"selectDropwdown",placeholder:H("Common_Select"),value:r[e.rowIndex][e.field],fluid:!0,options:t,onChange:t=>d(t,e),reserveSpace:!1,search:!0,noResultsMessage:H("noResultsMessage")})}},"QuantityUOM"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight colminWidth",field:"ConsumedQuantity",header:H("ExchangeAgreementDetailsItem_ConsumedQty"),editable:!1},"ConsumedQuantity"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight colminWidth",field:"RemainingQuantity",header:H("ExchangeAgreementDetailsItem_RemainQty"),editable:!1},"RemainingQuantity")]})})})]}),(0,R.jsx)("div",{className:"row",children:(0,R.jsxs)("div",{className:"col col-md-8 col-lg-9 col col-xl-12",style:{textAlign:"right"},children:[(0,R.jsx)(E.Button,{content:H("SharholderAgreement_ViewAuditTrail"),onClick:T,disabled:""===a.RequestCode}),(0,R.jsx)(E.Button,{content:H("ExchangeAgreementDetails_ViewExagShipmentDetails"),onClick:x,disabled:""===a.RequestCode}),(0,R.jsx)(E.Button,{type:"primary",onClick:()=>y("FORCECLOSED"),disabled:!L,content:H("ShipmentOrder_BtnForceClose")}),(0,R.jsx)(E.Button,{content:H("ExchangeAgreementDetails_btnCreateAgreement"),onClick:()=>y("CREATEEA"),disabled:!P})]})})]})}D.defaultProps={listOptions:{shareholders:[],UOMOptions:[],currentShareholderAgreementStatusList:[]},isEnterpriseNode:!1,isBonded:!1};var T=s(53536),x=s.n(T);function y(e){let{isBonded:t,modProductAgreementItem:s,modExchangeAgrement:a,onFieldChange:r,listOptions:i,validationErrors:o,handleViewAuditTrail:l,exchangeAgreement:n,UpdateProductTransferAgreementStatus:d,selectedAttributeList:h,attributeValidationErrors:u,handleCellAttrinuteDataEdit:m,isEnterpriseNode:D,selectedShareholder:T,btnCreatePTAgreement:x,tankShareholderDetails:y,handleAssociationSelectionChange:I,selectedAssociations:v,btnFroceClose:N,btncompltAgreement:b,isfieldEnable:f,handleCreateAgrement:P}=e;const[L]=(0,g.useTranslation)();console.log(y);const w=(e,t)=>{let s=[];return s=e.find((e=>e.TerminalCode===t)),s.attributeValidationErrors};return(0,R.jsxs)("div",{className:"detailsContainer",children:[(0,R.jsxs)("div",{className:"row",children:[(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E.Input,{fluid:!0,label:L("ProductTransferAgreementDetails_RequestCode"),value:""!==a.RequestCode?a.RequestCode:"",indicator:"required",onChange:e=>r("RequestCode",e),disabled:""!==n.RequestCode,reserveSpace:!1,error:L(o.RequestCode)})}),a.LenderShareholderCode===T||a.RequestStatus===C.wH.ACCEPTED||a.RequestStatus===C.wH.OFFER_REJECTED?(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E.Select,{fluid:!0,value:null==a.RequestStatus?"":a.RequestStatus,placeholder:L("FinishedProductInfo_Select"),label:L("ProductTransferAgreementDetails_Status"),options:i.currentShareholderAgreementStatusList,onChange:e=>r("RequestStatus",e),indicator:"required"})}):(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E.Input,{fluid:!0,value:null==a.RequestStatus?"":a.RequestStatus,label:L("ProductTransferAgreementDetails_Status"),disabled:!0})}),(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E.Input,{fluid:!0,value:""===a.RequestType?C.yC.PRODUCT_TRANSFER_AGREEMENT:a.RequestType,label:L("ProductTransferAgreementDetails_RequestType"),disabled:!0})}),(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E.Select,{fluid:!0,value:a.LenderShareholderCode,placeholder:L("FinishedProductInfo_Select"),label:L("ProductTransferAgreementDetails_PreferredShareHolder"),options:i.shareholders,onChange:e=>r("LenderShareholderCode",e),indicator:"required",disabled:""!==n.RequestCode})}),(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E.Select,{fluid:!0,value:s.RequestorTankCode,placeholder:L("FinishedProductInfo_Select"),label:L("ProductTransferAgreementDetails_RequestorTankcode"),options:i.tankCodeOptions,onChange:e=>r("RequestorTankCode",e),indicator:"required"})}),(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E.Input,{fluid:!0,value:s.TankBaseProductCode,label:L("ProductTransferAgreementDetails_ProductCode"),reserveSpace:!1,disabled:!0})}),(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E.Input,{fluid:!0,value:s.RequestedQuantity,label:L("ProductTransferAgreementDetails_RequestedQuantity"),indicator:"required",reserveSpace:!1,onChange:e=>r("RequestedQuantity",e)})}),(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E.Select,{fluid:!0,value:s.QuantityUOM,placeholder:L("FinishedProductInfo_Select"),label:L("ProductTransferAgreementDetails_ProductQuantityUOM"),options:i.UOMOptions,onChange:e=>r("QuantityUOM",e),indicator:"required",error:L(o.QuantityUOM)})}),(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4 planneddate",children:(0,R.jsx)(E.DatePicker,{fluid:!0,value:new Date(s.RequestedCutOff_Date),initialWidth:"160px",label:L("ProductTransferAgreementDetails_Cut-offDate"),displayFormat:(0,S.F1)(),type:"date",showYearSelector:"true",indicator:"required",onChange:e=>r("RequestedCutOff_Date",e),reserveSpace:!1})}),(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E.Input,{fluid:!0,value:a.Remarks,label:L("ExchangeAgreementDetails_Comments"),reserveSpace:!1,onChange:e=>r("Remarks",e),indicator:""!==n.RequestCode?"required":"",error:L(o.Remarks)})}),t?(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4 ddlSelectAll",children:(0,R.jsx)(E.Checkbox,{label:L("TankInfo_Bonded"),checked:!!a.IsBonded,onChange:e=>r("IsBonded",e)})}):"",a.RequestStatus===C.wH.ACCEPTED||a.RequestStatus===C.wH.COMPLETED||a.RequestStatus===C.wH.REQUEST_REJECTED&&a.LenderShareholderCode===T?(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E.Input,{fluid:!0,value:s.AcceptedQuantity,label:L("ProductTransferAgreementDetails_AcceptedQuantity"),indicator:"required",reserveSpace:!1,onChange:e=>r("AcceptedQuantity",e),error:L(o.AcceptedQuantity)})}):"",a.LenderShareholderCode===T&&0!==s.AcceptedQuantity&&null!==s.AcceptedQuantity&&void 0!==s.AcceptedQuantity||a.RequestStatus===C.wH.COMPLETED?(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E.Input,{fluid:!0,value:s.LenderTankCode,label:L("ProductTransferAgreementDetails_LenderTankcode"),indicator:"required",reserveSpace:!1,disabled:!0})}):"",f?(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E.Input,{fluid:!0,value:s.ReceivedGrossQty,label:L("ProductTransferAgreementDetails_ReceivedGrossQuantity"),indicator:"required",reserveSpace:!1,onChange:e=>r("ReceivedGrossQty",e),disabled:a.RequestStatus===C.wH.COMPLETED,error:L(o.ReceivedGrossQty)})}):"",f?(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E.Input,{fluid:!0,value:s.ReceivedNetQty,label:L("ProductTransferAgreementDetails_ReceivedNetQuantity"),indicator:"required",reserveSpace:!1,onChange:e=>r("ReceivedNetQty",e),disabled:a.RequestStatus===C.wH.COMPLETED,error:L(o.ReceivedNetQty)})}):"",f?(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4 planneddate",children:(0,R.jsx)(E.DatePicker,{fluid:!0,value:new Date(s.ReceivedDate),initialWidth:"160px",label:L("ProductTransferAgreementDetails_CompletedDate"),displayFormat:(0,S.F1)(),type:"date",showYearSelector:"true",indicator:"required",onChange:e=>r("ReceivedDate",e),reserveSpace:!1,disabled:a.RequestStatus===C.wH.COMPLETED,error:L(o.ReceivedDate)})}):"",a.LenderShareholderCode===T&&"ACCEPTED"===a.RequestStatus?(0,R.jsxs)("div",{className:"row col-12 detailsTable",children:[(0,R.jsx)("h5",{children:L("ProductTransferAgreementDetails_TankShDetails")}),(0,R.jsxs)(A.bQ,{data:y,selectionMode:"multiple",onSelectionChange:I,selection:v,scrollable:!0,scrollHeight:"320px",children:[(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"TankCode",header:L("AtgConfigure_TankCode"),initialWidth:"120px"},"TankCode"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"CalculatedGrossVolume",header:L("TankShareholderAssn_CalculatedGrossQuantity")},"CalculatedGrossVolume"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"CalculatedNetVolume",header:L("TankShareholderAssn_CalculatedNetQuantity")},"CalculatedNetVolume"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"VolumeUOM",header:L("ViewShipmentStatus_QuantityUOM"),initialWidth:"80px"},"VolumeUOM"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"IsBonded",header:L("ViewShipmentStatus_ShipmentBond")},"IsBonded")]})]}):"",h.length>0?h.map((e=>(0,R.jsx)(c.A,{children:(0,R.jsx)(E.Accordion,{children:(0,R.jsx)(E.Accordion.Content,{className:"attributeAccordian",title:D?e.TerminalCode+" - "+L("Attributes_Header"):L("Attributes_Header"),children:(0,R.jsx)(p.n,{selectedAttributeList:e.attributeMetaDataList,handleCellDataEdit:m,attributeValidationErrors:w(u,e.TerminalCode)})})})}))):null]}),(0,R.jsx)("div",{className:"row",children:(0,R.jsxs)("div",{className:"col col-md-8 col-lg-9 col col-xl-12",style:{textAlign:"right"},children:[(0,R.jsx)(E.Button,{content:L("SharholderAgreement_ViewAuditTrail"),onClick:l,disabled:""===n.RequestCode}),(0,R.jsx)(E.Button,{content:L("ProductTransferAgreementDetails_btnCompletePTA"),disabled:!b,onClick:()=>d(a,"COMPLETEPTA")}),(0,R.jsx)(E.Button,{type:"primary",onClick:()=>P("CREATEPTA"),disabled:!x,content:L("ExchangeAgreementDetails_btnCreateAgreement")}),(0,R.jsx)(E.Button,{content:L("ExchangeAgreementDetails_btnForceClose"),disabled:!N,onClick:()=>d(a,"FORCECLOSED")})]})})]})}y.defaultProps={listOptions:{shareholders:[],UOMOptions:[],tankCodeOptions:[],currentShareholderAgreementStatusList:[]},isEnterpriseNode:!1};var I=s(80312),v=s(44192),N=s(28882),b=s(11981),f=s(14159),P=s(46100);function L(e){let{handleBack:t,modViewAuditTrail:s,RequestCode:r}=e;const[i,o]=(0,a.useState)(!1);return(0,R.jsxs)("div",{children:[(0,R.jsx)(g.TranslationConsumer,{children:e=>(0,R.jsx)("div",{children:(0,R.jsxs)("div",{className:"detailsContainer",children:[(0,R.jsxs)("div",{id:"printTable",children:[(0,R.jsx)("div",{className:"row",children:(0,R.jsx)("div",{className:"col-12",children:(0,R.jsx)("h3",{children:e("ViewEAAuditTrail_ViewAuditTrailForEA")+" : "+r})})}),(0,R.jsx)("div",{className:"row marginRightZero tableScroll",children:(0,R.jsx)("div",{className:"col-12 detailsTable",children:(0,R.jsxs)(A.bQ,{data:s,children:[(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"RequestCode",header:e("ViewEAAuditTrail_EACode")},"RequestCode"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"UpdatedTime",header:e("ViewEAAuditTrail_UpdatedTime")},"UpdatedTime"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"ShareholderAgreementStatus",header:e("ViewEAAuditTrail_Status")},"ShareholderAgreementStatus"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"LenderShareholderCode",header:e("ViewEAAuditTrail_LenderShareholderCode")},"LenderShareholderCode"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"RequestorShareholderCode",header:e("ViewEAAuditTrail_RequestorShareholderCode")},"RequestorShareholderCode"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"LastUpdatedBy",header:e("ViewEAAuditTrail_LastUpdatedBy")},"LastUpdatedBy")]})})})]}),(0,R.jsxs)("div",{className:"row",children:[(0,R.jsx)("div",{className:"col-12 col-sm-6 col-lg-8",children:(0,R.jsx)(E.Button,{className:"backButton",onClick:t,content:e("ViewEAAuditTrail_Back")})}),(0,R.jsx)("div",{className:"col-12 col-sm-6 col-lg-4",style:{textAlign:"right"},children:(0,R.jsx)(E.Button,{className:"printButton",onClick:()=>{o(!0)},content:e("ViewAuditTrail_PrintAuditTrail")})})]})]})})}),(0,R.jsx)(g.TranslationConsumer,{children:e=>(0,R.jsx)(E.Modal,{open:i,className:"marineModalPrint",children:(0,R.jsxs)(E.Modal.Content,{children:[(0,R.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,R.jsx)("div",{className:"col col-lg-8",children:(0,R.jsx)("h3",{children:e("ViewEAAuditTrail_ViewAuditTrailForEA")+" : "+r})}),(0,R.jsx)("div",{className:"col col-lg-4",style:{textAlign:"right"},children:(0,R.jsx)("div",{onClick:()=>{o(!1)},children:(0,R.jsx)(E.Icon,{root:"common",name:"close"})})})]}),(0,R.jsx)("div",{className:"col-12 detailsTable",children:(0,R.jsxs)(A.bQ,{data:s,children:[(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"RequestCode",header:e("ViewEAAuditTrail_EACode")},"RequestCode"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"UpdatedTime",header:e("ViewEAAuditTrail_UpdatedTime")},"UpdatedTime"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"ShareholderAgreementStatus",header:e("ViewEAAuditTrail_Status")},"ShareholderAgreementStatus"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"LenderShareholderCode",header:e("ViewEAAuditTrail_LenderShareholderCode")},"LenderShareholderCode"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"RequestorShareholderCode",header:e("ViewEAAuditTrail_RequestorShareholderCode")},"RequestorShareholderCode"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"LastUpdatedBy",header:e("ViewEAAuditTrail_LastUpdatedBy")},"LastUpdatedBy")]})}),(0,R.jsxs)(E.Modal.Footer,{children:[(0,R.jsx)(E.Button,{type:"primary",size:"small",content:e("ViewEAAuditTrail_Print"),onClick:()=>{let e=window.document.getElementById("printTable").innerHTML;const t=window.document.createElement("IFRAME");let s=null;window.document.body.appendChild(t),s=t.contentWindow.document;const a=e.substring(0,e.indexOf("<table")+6),r=e.substring(e.indexOf("<table")+6,e.length);e=a+' border="1" cellspacing="1"'+r,s.write(e),s.close(),t.contentWindow.focus(),t.contentWindow.print(),setTimeout((()=>{window.document.body.removeChild(t)}),2e3)}}),(0,R.jsx)(E.Button,{type:"primary",size:"small",content:e("MarineEOD_Close"),onClick:()=>{o(!1)}})]})]})})})]})}function w(e){let{handleBack:t,modEAShipmentDetails:s}=e;const[a]=(0,g.useTranslation)();return(0,R.jsxs)("div",{className:"detailsContainer",children:[(0,R.jsx)("div",{className:"row",children:(0,R.jsx)("div",{className:"col-12",children:(0,R.jsx)("h3",{children:a("ExagShipment_HeaderText")})})}),(0,R.jsxs)("div",{className:"row marginRightZero tableScroll",children:[(0,R.jsx)("h5",{children:a("ExagShipment_ExAgDetails")}),(0,R.jsx)("div",{className:"detailsTable loadingTable",children:(0,R.jsxs)(A.bQ,{data:s.EADetails,scrollable:!0,bAutoWidth:!0,scrollHeight:"450px",resizableColumns:!0,children:[(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"trailercode",initialWidth:"125px",header:a("ExagItem_Product")},"trailercode "),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"CompartmentSeqNoInVehicle",initialWidth:"146px",header:a("ExagItem_RequestQty")},"CompartmentSeqNoInVehicle"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"compartmentcode",initialWidth:"165px",header:a("ExagItem_ConsumedQty")},"compartmentcode"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"FinishedProductcode",initialWidth:"130px",header:a("ExagItem_RemainingQty")},"FinishedProductcode"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"baseProductcode",initialWidth:"155px",header:a("ExagItem_UOM")},"baseProductcode")]})})]}),(0,R.jsxs)("div",{className:"row marginRightZero tableScroll",children:[(0,R.jsx)("h5",{children:a("ExagShipment_ExAgShipmentDetails")}),(0,R.jsx)("div",{className:"detailsTable loadingTable",children:(0,R.jsxs)(A.bQ,{data:s.EALoadedShipments,scrollable:!0,bAutoWidth:!0,scrollHeight:"450px",resizableColumns:!0,children:[(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"trailercode",initialWidth:"125px",header:a("ExagShipment_TransportationType")},"trailercode "),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"CompartmentSeqNoInVehicle",initialWidth:"146px",header:a("ExagShipment_ShipmentCode")},"CompartmentSeqNoInVehicle"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"compartmentcode",initialWidth:"165px",header:a("ExagShipment_ConsumedDate")},"compartmentcode"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"FinishedProductcode",initialWidth:"130px",header:a("ExagShipment_ProductCode")},"FinishedProductcode"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"baseProductcode",initialWidth:"155px",header:a("ExagShipment_GrossQty")},"baseProductcode"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"Unloadingdetailstype",initialWidth:"190px",header:a("ExagShipment_NetQty")},"Unloadingdetailstype"),(0,R.jsx)(A.bQ.Column,{className:"compColHeight",field:"TankCode",initialWidth:"105px",header:a("ExagShipment_UOM")},"TankCode")]})})]}),(0,R.jsx)("div",{className:"col col-lg-8",children:(0,R.jsx)(E.Button,{className:"backButton",onClick:t,content:a("Back")})})]})}var j=s(62900),O=s(15417);class _ extends a.Component{constructor(){super(...arguments),this.state={isReadyToRender:!0,validationErrors:r.Th(v.eX),modExchangeAgrement:{},saveEnabled:!1,exchangeAgreement:{...P.x2},modExchangeAgreementItems:[],modProductAgreementItem:{},selectedAssociations:[],baseProductOptions:[],UOMOptions:[],isViewAuditTrail:!1,modViewAuditTrail:[],auditTrailList:[],modEAShipmentDetails:[],isViewShipmentDetails:!1,tankOptions:[],isBonded:!1,isCloseReceipt:!0,attributeMetaDataList:[],attributeValidationErrors:[],selectedAttributeList:[],tankShareholderDetails:[],shareholderStatus:[],btnCreatePTAgreement:!1,btnFroceClose:!1,btncompltAgreement:!1,isfieldEnable:!1,currentShareholderAgreementStatusList:[],showAuthenticationLayout:!1,tempShareholderAgreementInfo:{}},this.handleCellAttrinuteDataEdit=(e,t)=>{try{e.DefaultValue=t,this.setState({attribute:e});const s=x().cloneDeep(this.state.attributeValidationErrors);s.forEach((s=>{s.TerminalCode===e.TerminalCode&&(s.attributeValidationErrors[e.Code]=r.I5(e,t))})),this.setState({attributeValidationErrors:s})}catch(s){console.log("ShareholderAgrementDetailsComposite:Error occured on handleCellDataEdit",s)}},this.handleChange=(e,t)=>{try{const s=x().cloneDeep(this.state.modExchangeAgrement);s[e]=t;const a=this.state.modProductAgreementItem;a[e]=t,this.setState({modExchangeAgrement:s,modProductAgreementItem:a}),"RequestStatus"===e&&this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.modify,I.G9)});const i=x().cloneDeep(this.state.validationErrors);void 0!==v.eX[e]&&(i[e]=r.jr(v.eX[e],t),this.setState({validationErrors:i}))}catch(s){console.log("ExchnageAgrementDetailsComposite:Error occured on handleChange",s)}},this.handleDateTextChange=(e,t,s)=>{try{var a=x().cloneDeep(this.state.modExchangeAgreementItems);let s=a.findIndex((t=>t.sequenceNo===e.rowData.sequenceNo));s>=0&&(a[s][e.field]=""===t?null:t,this.setState({modExchangeAgreementItems:a}))}catch(s){console.log("Error in DateTextChange : Error occured on handleDateTextChange",s)}},this.handleAssociationSelectionChange=e=>{try{this.setState({selectedAssociations:e})}catch(t){console.log("error in handlAssociationselectionchange",t)}},this.handleCellDataEdit=(e,t)=>{try{let s=x().cloneDeep(this.state.modExchangeAgrement),a=x().cloneDeep(this.state.modExchangeAgreementItems);a[t.rowIndex][t.field]=e,this.setState({modExchangeAgrement:s,modExchangeAgreementItems:a})}catch(s){console.log("Error in handleCellDataEdit",s)}},this.handleAddAssociation=()=>{try{if(!this.props.userDetails.EntityResult.IsArchived)try{let e=x().cloneDeep(this.state.modExchangeAgreementItems),t={BaseProductCode:"",Quantity:0,QuantityUOM:"",StartDate:null,EndDate:null,AcceptQuantity:null,RemainingQuantity:null,ConsumedQuantity:null};e.push(t),this.setState({modExchangeAgreementItems:e,selectedAssociations:[]})}catch(e){console.log("ExchnageAgrementDetailsComposite:Error occured on handleAddAssociation",e)}}catch(e){console.log("ExchnageAgrementDetailsComposite: Error occured on handleAddAssociation",e)}},this.handleDeleteAssociation=()=>{try{if(!this.props.userDetails.EntityResult.IsArchived)try{if(null!=this.state.selectedAssociations&&this.state.selectedAssociations.length>0&&this.state.modExchangeAgreementItems.length>0){let e=x().cloneDeep(this.state.modExchangeAgreementItems);this.state.selectedAssociations.forEach(((t,s)=>{e=e.filter(((e,s)=>e.BaseProductCode!==t.BaseProductCode))})),this.setState({modExchangeAgreementItems:e})}this.setState({selectedAssociations:[]})}catch(e){console.log("ExchnageAgrementDetailsComposite:Error occured on handleDeleteAssociation",e)}}catch(e){console.log("error in handle Delete Association",e)}},this.addUpdateShareholderAgreement=()=>{try{this.setState({saveEnabled:!1});let e=x().cloneDeep(this.state.tempShareholderAgreementInfo);""===this.state.exchangeAgreement.RequestCode?this.props.agreementType===C.yC.EXCHANGE_AGREEMENT?this.CreateExchangeAgreement(e):this.CreateProductTransferAgreement(e):this.props.selectedRow.ShareholderAgreement_RequestType===C.yC.EXCHANGE_AGREEMENT?this.UpdateExchangeAgreement(e):this.UpdateProductTransferAgreement(e)}catch(e){console.log("Shareholder agreement Details Composite : Error in addUpdateShareholderAgreement")}},this.handleSave=()=>{try{let e=this.fillDetails(),t=r.pI(this.state.selectedAttributeList);if(this.validateSave(e,t)){e=this.convertStringtoDecimal(e,t);let s=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,a=x().cloneDeep(e);this.setState({showAuthenticationLayout:s,tempShareholderAgreementInfo:a},(()=>{!1===s&&this.addUpdateShareholderAgreement()}))}else this.setState({saveEnabled:!0})}catch(e){console.log("shareholderAgreementDetailsComposite:Error occured on handleSave",e)}},this.GetProductTransferAgreement=e=>{try{if(void 0===e.Common_Code){let e=x().cloneDeep(this.state.modProductAgreementItem);return P.x2.RequestorShareholderCode=this.props.selectedShareholder,e.AcceptedQuantity="0",e.LenderTankCode=null,e.QuantityUOM=null,e.RequestedCutOff_Date=new Date,e.RequestedQuantity="0",e.RequestorTankCode=null,e.TankBaseProductCode="",void this.setState({exchangeAgreement:x().cloneDeep(P.x2),modExchangeAgrement:{...P.x2},modProductAgreementItem:e,isReadyToRender:!0,selectedAttributeList:[],saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.add,I.G9),isReadyToRender:!0,btnCreatePTAgreement:!1,btnFroceClose:!1,btncompltAgreement:!1,isfieldEnable:!1},(()=>this.localNodeAttribute()))}var t=[{key:u.gN,value:e.Common_Code}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:u.gN,KeyCodes:t};o()(l.FD$,r.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;let s=t.EntityResult;if(s.LenderShareholderCode===this.props.selectedShareholder?this.setState({saveEnabled:!1}):this.setState({saveEnabled:s.RequestStatus!==C.wH.ACCEPTED&&s.RequestStatus!==C.wH.COMPLETED&&s.RequestStatus!==C.wH.FORCE_CLOSED&&r.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.modify,I.G9)}),!0===t.IsSuccess){let e=[];if(s.LenderShareholderCode===this.props.selectedShareholder){x().cloneDeep(this.state.shareholderStatus).forEach((t=>{s.RequestStatus===C.wH.SUBMITTED&&(t.value!==C.wH.SUBMITTED&&t.value!==C.wH.ACCEPTED&&t.value!==C.wH.REQUEST_REJECTED||e.push(t)),s.RequestStatus===C.wH.ACCEPTED&&t.value===C.wH.ACCEPTED&&e.push(t),s.RequestStatus===C.wH.COMPLETED&&t.value===C.wH.COMPLETED&&e.push(t),s.RequestStatus===C.wH.REQUEST_REJECTED&&t.value===C.wH.REQUEST_REJECTED&&e.push(t),s.RequestStatus===C.wH.IN_PROGRESS&&t.value===C.wH.IN_PROGRESS&&e.push(t),s.RequestStatus===C.wH.FORCE_CLOSED&&t.value===C.wH.FORCE_CLOSED&&e.push(t),s.RequestStatus===C.wH.OFFER_REJECTED&&t.value===C.wH.OFFER_REJECTED&&e.push(t)}))}if(s.RequestorShareholderCode===this.props.selectedShareholder){x().cloneDeep(this.state.shareholderStatus).forEach((t=>{s.RequestStatus===C.wH.ACCEPTED&&(t.value!==C.wH.ACCEPTED&&t.value!==C.wH.OFFER_REJECTED||e.push(t)),s.RequestStatus===C.wH.OFFER_REJECTED&&t.value===C.wH.OFFER_REJECTED&&e.push(t)}))}this.setState({isReadyToRender:!0,exchangeAgreement:x().cloneDeep(t.EntityResult),modExchangeAgrement:s,modProductAgreementItem:s.ProductTransferAgreement,currentShareholderAgreementStatusList:e},(()=>{this.controlerForRequestorShareholder(s),this.localNodeAttribute(),this.GetTankShareholderAssociation(s.ProductTransferAgreement)}))}else this.setState({exchangeAgreement:x().cloneDeep(P.x2),modExchangeAgrement:{},isReadyToRender:!0}),console.log("Error in Getproductransfer:",t.ErrorList)})).catch((t=>{console.log("Error while Getproductransfer:",t,e)}))}catch(a){console.log("error while getproductagreement",a)}},this.UpdateProductTransferAgreement=e=>{try{this.handleAuthenticationClose();let t=[{key:u.X3,value:e.RequestCode}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:u.X3,KeyCodes:t,Entity:e},a={messageType:"critical",message:"ProductTransferAgreement_savedSucess",messageResultDetails:[{keyFields:["ExchangeAgreementDetails_RequestCode"],keyValues:[e.RequestCode],isSuccess:!1,errorMessage:""}]};o()(l.Qxo,r.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{let s=t.data;a.messageType=s.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.modify,I.G9)},(()=>this.GetProductTransferAgreement({Common_Code:e.RequestCode}))):(a.messageResultDetails[0].errorMessage=s.ErrorList[0],this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.modify,I.G9)}),console.log("Error in update ProductTransfer:",s.ErrorList)),this.props.onSaved(this.state.modProdAggrement,"update",a)})).catch((e=>{this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.modify,I.G9)}),a.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modExchangeAgrement,"modify",a)}))}catch(t){console.log("Error while UpdateProductAgreement",t)}},this.handleViewAuditTrail=()=>{try{o()(l.Ijb+"?exchangeAgreementCode="+this.state.modExchangeAgrement.RequestCode+"&requestorShareholder="+this.props.selectedShareholder,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data.EntityResult;for(let s=0;s<t.length;s++)t[s].UpdatedTime=new Date(t[s].UpdatedTime).toLocaleDateString();this.setState({modViewAuditTrail:t,isViewAuditTrail:!0})})).catch((e=>{console.log("Error while getting handleViewAuditTrail:",e)}))}catch(e){console.log("error in view audittrail",e)}},this.GetExchangeAgreementShipmentItemDetails=()=>{try{o()(l.Pyu+"?shareholderCode="+this.props.selectedShareholder+"&exchangeAgreementCode="+this.state.modExchangeAgrement.RequestCode,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;this.setState({modEAShipmentDetails:t.EntityResult,isViewShipmentDetails:!0})})).catch((e=>{console.log("Error while exchnageagreementshipment details:",e)}))}catch(e){console.log("error while getting exchnageagreementshipment details",e)}},this.UpdateExchangeAgreementStatus=e=>{let t=e;try{let e={messageType:"critical",message:"ExchnageAgreement_StatusSucess",messageResultDetails:[{keyFields:["RequestCode"],keyValues:[this.state.modExchangeAgrement.RequestCode],isSuccess:!1,errorMessage:""}]};var s=[{key:u.QV,value:this.state.modExchangeAgrement.LenderShareholderCode},{key:u.mm,value:this.props.selectedShareholder},{key:u.wH,value:t},{key:u.gN,value:this.state.modExchangeAgrement.RequestCode}],a={ShareHolderCode:this.props.selectedShareholder,keyDataCode:u.ll,KeyCodes:s};o()(l.nJY,r.tW(a,this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data;e.messageType=s.IsSuccess?"success":"critical",e.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.setState({saveEnabled:!1},(()=>this.GetExchangeAgreement({Common_Code:this.state.modExchangeAgrement.RequestCode}))):e.messageResultDetails[0].errorMessage=s.ErrorList[0],(0,f.toast)((0,R.jsx)(c.A,{children:(0,R.jsx)(b.A,{notificationMessage:e})}),{autoClose:"success"===e.messageType&&1e4})})).catch((e=>{console.log("Error while ReceiptClose:",e)}))}catch(i){console.log("Error while closing the shipment:",i)}},this.handleReset=()=>{try{const{validationErrors:e}={...this.state},t=x().cloneDeep(this.state.exchangeAgreement);Object.keys(e).forEach((function(t){e[t]=""})),this.setState({modExchangeAgrement:{...t},exchangeAgrementComps:[],validationErrors:e})}catch(e){console.log("ExchangeAgrementDetailsComposite:Error occured on handleReset",e)}},this.onBack=()=>{this.setState({saveEnabled:!1,isViewAuditTrail:!1,isViewShipmentDetails:!1}),this.GetExchangeAgreement({Common_Code:this.state.modExchangeAgrement.RequestCode})},this.handleCreateAgrement=e=>{let t=this.fillDetails(),s=r.pI(this.state.selectedAttributeList);this.validateSave(t,s)?(t=this.convertStringtoDecimal(t,s),this.UpdateProductTransferAgreementStatus(t,e)):console.log("Error while UpdateProductAgreementstatus")},this.UpdateProductTransferAgreementStatus=(e,t)=>{let s=t;try{let t=[{key:u.X3,value:e.RequestCode},{key:u.wH,value:s}],a={ShareHolderCode:this.props.selectedShareholder,keyDataCode:u.X3,KeyCodes:t,Entity:e},i={messageType:"critical",message:"ProductTransferAgreement_StatusSucess",messageResultDetails:[{keyFields:["ExchangeAgreementDetails_RequestCode"],keyValues:[e.RequestCode],isSuccess:!1,errorMessage:""}]};o()(l.e9R,r.tW(a,this.props.tokenDetails.tokenInfo)).then((t=>{let s=t.data;i.messageType=s.IsSuccess?"success":"critical",i.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.setState({saveEnabled:!1},(()=>this.GetProductTransferAgreement({Common_Code:e.RequestCode}))):(i.messageResultDetails[0].errorMessage=s.ErrorList[0],this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.modify,I.G9)}),console.log("Error in update ProductTransfer:",s.ErrorList)),this.props.onSaved(e,"update",i)})).catch((t=>{this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.modify,I.G9)}),i.messageResultDetails[0].errorMessage=t,this.props.onSaved(e,"modify",i)}))}catch(a){console.log("Error while UpdateProductAgreement",a)}},this.GetShareholderAgreementStatus=()=>{try{o()(l.oC1,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=r.Zj(t.EntityResult);this.setState({shareholderStatus:e,isReadyToRender:!0})}else this.setState({shareholderStatus:[],isReadyToRender:!0}),console.log("Error in getshareholderagreement:",t.ErrorList)})).catch((e=>{this.setState({shareholderStatus:[],isReadyToRender:!0}),console.log("Error while getting shareholderagreement:",e)}))}catch(e){console.log("error while getting shareholderagreement",e)}},this.controlerForRequestorShareholder=e=>{e.RequestorShareholderCode===this.props.selectedShareholder?e.RequestStatus.toUpperCase()===C.wH.SUBMITTED?this.setState({saveEnabled:!0,btnCreatePTAgreement:!1,btnFroceClose:!0,btncompltAgreement:!1,isfieldEnable:!1}):e.RequestStatus.toUpperCase()===C.wH.ACCEPTED?this.setState({saveEnabled:!1,btnCreatePTAgreement:!0,btnFroceClose:!0,btncompltAgreement:!1,isfieldEnable:!0}):e.RequestStatus.toUpperCase()===C.wH.COMPLETED?this.setState({saveEnabled:!1,btnCreatePTAgreement:!1,btnFroceClose:!1,btncompltAgreement:!1,isfieldEnable:!0}):e.RequestStatus.toUpperCase()===C.wH.IN_PROGRESS?this.setState({saveEnabled:!0,btnCreatePTAgreement:!1,btnFroceClose:!0,btncompltAgreement:!0,isfieldEnable:!0}):e.RequestStatus.toUpperCase()===C.wH.OFFER_REJECTED?this.setState({saveEnabled:!1,btnCreatePTAgreement:!1,btnFroceClose:!1,btncompltAgreement:!1,isfieldEnable:!0}):e.RequestStatus.toUpperCase()!==C.wH.FORCE_CLOSED&&e.RequestStatus.toUpperCase()!==C.wH.REQUEST_REJECTED||this.setState({saveEnabled:!1,btnCreatePTAgreement:!1,btnFroceClose:!1,btncompltAgreement:!1,isfieldEnable:!1}):e.LenderShareholderCode===this.props.selectedShareholder&&(e.RequestStatus.toUpperCase()===C.wH.SUBMITTED||e.RequestStatus.toUpperCase()===C.wH.ACCEPTED||e.RequestStatus.toUpperCase()===C.wH.OFFER_REJECTED?this.setState({saveEnabled:!1,btnCreatePTAgreement:!1,btnFroceClose:!1,btncompltAgreement:!1,isfieldEnable:!1}):e.RequestStatus.toUpperCase()===C.wH.COMPLETED?this.setState({saveEnabled:!1,btnCreatePTAgreement:!1,btnFroceClose:!1,btncompltAgreement:!1,isfieldEnable:!0}):e.RequestStatus.toUpperCase()===C.wH.FORCE_CLOSED&&this.setState({saveEnabled:!1,btnCreatePTAgreement:!1,btnFroceClose:!1,btncompltAgreement:!1,isfieldEnable:!1}))},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})}}componentDidMount(){try{r.pJ(this.props.userDetails.EntityResult.IsArchived),this.getAttributes(this.props.selectedRow),this.IsBonded(),this.getTank(""),this.getBaseProducts(),this.getUOMList(),this.GetShareholderAgreementStatus()}catch(e){console.log("ShareholderAgreementDetailsComposite:Error occured on componentDidMount",e)}}componentWillReceiveProps(e){try{if(void 0===e.selectedRow.Common_Code&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo&&this.props.selectedRow.ShareholderAgreement_RequestType&&this.props.agreementType===C.yC.EXCHANGE_AGREEMENT){this.GetExchangeAgreement(e.selectedRow);let t={...this.state.validationErrors};Object.keys(t).forEach((e=>{t[e]=""})),this.setState({validationErrors:t})}else this.GetProductTransferAgreement(e.selectedRow)}catch(t){console.log("ShareholderAgreementDetailsComposite:Error occured on componentWillReceiveProps",t)}}getAttributes(e){try{o()(l.fKH,r.tW([O.i6],this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data;!0===s.IsSuccess?this.setState({attributeMetaDataList:x().cloneDeep(s.EntityResult),attributeValidationErrors:r.Fl(s.EntityResult.SHAREHOLDERAGREEMENT)},(()=>{this.props.selectedRow.ShareholderAgreement_RequestType&&this.props.agreementType===C.yC.EXCHANGE_AGREEMENT?this.GetExchangeAgreement(e):this.GetProductTransferAgreement(e)})):console.log("Failed to get Attributes")}))}catch(t){console.log("Error while getting Attributes:",t)}}localNodeAttribute(){try{var e=x().cloneDeep(this.state.attributeMetaDataList);Array.isArray(e.SHAREHOLDERAGREEMENT)&&e.SHAREHOLDERAGREEMENT.length>0&&this.terminalSelectionChange([e.SHAREHOLDERAGREEMENT[0].TerminalCode])}catch(t){console.log("ShareholderAgrementDetailsComposite:Error occured on localNodeAttribute",t)}}terminalSelectionChange(e){try{if(void 0!==e&&null!==e){let i=[];var t=[],s=[];t=x().cloneDeep(this.state.attributeMetaDataList),s=x().cloneDeep(this.state.selectedAttributeList);const o=x().cloneDeep(this.state.attributeValidationErrors);var a=x().cloneDeep(this.state.modExchangeAgrement);e.forEach((e=>{var r=s.find((t=>t.TerminalCode===e));void 0===r?t.SHAREHOLDERAGREEMENT.forEach((function(t){if(t.TerminalCode===e){var s=a.Attributes.find((t=>t.TerminalCode===e));void 0!==s&&t.attributeMetaDataList.forEach((function(e){var t=s.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),i.push(t)}})):i.push(r)})),s=[],s=i,s=r.nQ(s),o.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.setState({selectedAttributeList:s,attributeValidationErrors:o})}}catch(i){console.log("ShareholderAgreeemntDetailsComposite:Error occured on terminalSelectionChange",i)}}IsBonded(){try{o()(l.xAA+"?LookUpTypeCode=Bonding",r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;if(!0===t.IsSuccess){let e=t.EntityResult["EnableBondingNon-Bonding"];this.setState({isBonded:"TRUE"===e.toUpperCase()})}else this.setState({isBonded:!1}),console.log("Error in get IsBonded: ",t.ErrorList)})).catch((e=>{this.setState({isBonded:!1}),console.log("ShareholderAgreementDetailsComposite: Error occurred on get IsBonded",e)}))}catch(e){console.log("error is getting isbonded",e)}}getUOMList(){try{o()(l.WFM,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult){let e=[],s=[];Array.isArray(t.EntityResult.VOLUME)&&Array.isArray(t.EntityResult.MASS)&&(s=t.EntityResult.VOLUME.concat(t.EntityResult.MASS)),s.forEach((t=>{e.push({text:t,value:t})})),this.setState({UOMOptions:e})}}else console.log("Error in GetUOMList:",t.ErrorList)}))}catch(e){console.log("LoadingArmDetailsComposite:Error while getting GetUOMList")}}getBaseProducts(){o()(l.Odh+"?TerminalCode=",r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=r.Zj(t.EntityResult);this.setState({baseProductOptions:e})}}else console.log("Error in getBaseProducts:",t.ErrorList)})).catch((e=>{console.log("Error while getting BaseProducts:",e)}))}GetExchangeAgreement(e){try{if(void 0===e.Common_Code)return P.x2.StartDate=new Date,P.x2.EndDate=new Date,P.x2.RequestorShareholderCode=this.props.selectedShareholder,void this.setState({exchangeAgreement:x().cloneDeep(P.x2),modExchangeAgrement:{...P.x2},modExchangeAgreementItems:[],isReadyToRender:!0,selectedAttributeList:[],saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.add,I.G9)},(()=>{this.localNodeAttribute()}));o()(l.EmL+"?shareholderCode="+this.props.selectedShareholder+"&exchangeAgreementCode="+e.Common_Code,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult){let e=t.EntityResult;if(e.LenderShareholderCode===this.props.selectedShareholder?this.setState({saveEnabled:!1}):this.setState({saveEnabled:e.RequestStatus!==C.wH.ACCEPTED&&e.RequestStatus!==C.wH.COMPLETED&&e.RequestStatus!==C.wH.FORCE_CLOSED&&r.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.modify,I.G9)}),e.StartDate=""===e.StartDate||null===e.StartDate?new Date:new Date(e.StartDate).toLocaleDateString(),e.EndDate=""===e.EndDate||null===e.EndDate?new Date:new Date(e.EndDate).toLocaleDateString(),Array.isArray(e.ExchangeAgreementItems))for(let t=0;t<e.ExchangeAgreementItems.length;t++)e.ExchangeAgreementItems[t].StartDate=new Date(e.ExchangeAgreementItems[t].StartDate).toLocaleDateString(),e.ExchangeAgreementItems[t].EndDate=new Date(e.ExchangeAgreementItems[t].EndDate).toLocaleDateString();let s=[];if(e.LenderShareholderCode===this.props.selectedShareholder){x().cloneDeep(this.state.shareholderStatus).forEach((t=>{e.RequestStatus===C.wH.SUBMITTED&&(t.value!==C.wH.SUBMITTED&&t.value!==C.wH.ACCEPTED&&t.value!==C.wH.REQUEST_REJECTED||s.push(t)),e.RequestStatus===C.wH.ACCEPTED&&t.value===C.wH.ACCEPTED&&s.push(t),e.RequestStatus===C.wH.COMPLETED&&t.value===C.wH.COMPLETED&&s.push(t),e.RequestStatus===C.wH.REQUEST_REJECTED&&t.value===C.wH.REQUEST_REJECTED&&s.push(t),e.RequestStatus!==C.wH.IN_PROGRESS&&e.RequestStatus!==C.wH.SUSPENDED||t.value!==C.wH.IN_PROGRESS&&t.value!==C.wH.SUSPENDED||s.push(t),e.RequestStatus===C.wH.FORCE_CLOSED&&t.value===C.wH.FORCE_CLOSED&&s.push(t),e.RequestStatus===C.wH.OFFER_REJECTED&&t.value===C.wH.OFFER_REJECTED&&s.push(t),e.RequestStatus===C.wH.DEACTIVATED&&t.value===C.wH.DEACTIVATED&&s.push(t)}))}if(e.RequestorShareholderCode===this.props.selectedShareholder){x().cloneDeep(this.state.shareholderStatus).forEach((t=>{e.RequestStatus===C.wH.ACCEPTED&&(t.value!==C.wH.ACCEPTED&&t.value!==C.wH.OFFER_REJECTED||s.push(t)),e.RequestStatus===C.wH.OFFER_REJECTED&&t.value===C.wH.OFFER_REJECTED&&s.push(t),e.RequestStatus===C.wH.REQUEST_REJECTED&&t.value===C.wH.REQUEST_REJECTED&&s.push(t)}))}this.setState({isReadyToRender:!0,exchangeAgreement:x().cloneDeep(t.EntityResult),modExchangeAgrement:e,modExchangeAgreementItems:e.ExchangeAgreementItems,currentShareholderAgreementStatusList:s},(()=>{this.localNodeAttribute(),this.controlerForRequestorShareholder(e)}))}}else this.setState({exchangeAgreement:x().cloneDeep(P.x2),modExchangeAgrement:{},isReadyToRender:!0}),console.log("Error in getExchangeAgrement:",t.ErrorList)})).catch((t=>{console.log("Error while getExchangeAgrement:",t,e)}))}catch(t){console.log("error while getting getexchange agreement",t)}}fillDetails(){let{modExchangeAgrement:e,modExchangeAgreementItems:t,modProductAgreementItem:s,exchangeAgreement:a}={...this.state};try{e.RequestType=this.props.selectedRow.ShareholderAgreement_RequestType===C.yC.EXCHANGE_AGREEMENT||this.props.agreementType===C.yC.EXCHANGE_AGREEMENT?C.yC.EXCHANGE_AGREEMENT:C.yC.PRODUCT_TRANSFER_AGREEMENT,e.RequestorShareholderCode===this.props.selectedShareholder&&""===a.RequestCode?(e.RequestStatus=C.wH.SUBMITTED,e.RequestorShareholderCode=this.props.selectedShareholder,this.setState({modExchangeAgrement:e})):(e.LenderShareholderCode,this.props.selectedShareholder,this.setState({modExchangeAgrement:e}));let i=[];Array.isArray(t)&&t.forEach((t=>{(null!==t.BaseProductCode&&""!==t.BaseProductCode||null!==t.Quantity&&""!==t.Quantity)&&(t.Quantity=r.bo(t.Quantity),t.StartDate=null===t.StartDate?e.StartDate:t.StartDate,t.EndDate=null===t.EndDate?e.EndDate:t.EndDate,i.push(t))}));let o={QuantityUOM:s.QuantityUOM,RequestedQuantity:s.RequestedQuantity,LenderShareholderCode:s.LenderShareholderCode,AcceptedQuantity:s.AcceptedQuantity,RequestorTankCode:s.RequestorTankCode,RequestedCutOff_Date:new Date(s.RequestedCutOff_Date).toLocaleDateString(),ReceivedGrossQty:s.ReceivedGrossQty,ReceivedNetQty:s.ReceivedNetQty,ReceivedDate:s.ReceivedDate,LenderTankCode:s.RequestorTankCode};e.ExchangeAgreementItems=i,e.ProductTransferAgreement=o}catch(i){console.log("Error in fillDetails",i)}return e}validateSave(e,t){let s=x().cloneDeep(this.state.modProductAgreementItem),a=x().cloneDeep(this.state.tankShareholderDetails),i=x().cloneDeep(this.state.selectedAssociations);try{let n={messageType:"critical",message:"ExchangeAgreement_savedSucess",messageResultDetails:[]};var o=x().cloneDeep(this.state.validationErrors);Object.keys(v.eX).forEach((function(t){o[t]=r.jr(v.eX[t],e[t])})),""!==this.state.exchangeAgreement.RequestCode&&(null!==e.Remarks&&""!==e.Remarks||(o.Remarks="OriginTerminal_RemarksRequired")),this.state.exchangeAgreement.RequestType===C.yC.EXCHANGE_AGREEMENT&&(null!=e.StartDate&&""!==e.StartDate||(o.StartDate="ExchangeAgreement_StartDateRequired"),null!=e.EndDate&&""!==e.EndDate||(o.EndDate="ExchangeAgreement_EndDateRequired")),this.state.exchangeAgreement.RequestType!==C.yC.PRODUCT_TRANSFER_AGREEMENT&&this.props.agreementType!==C.yC.PRODUCT_TRANSFER_AGREEMENT||null!==s.QuantityUOM&&""!==s.QuantityUOM&&void 0!==s.QuantityUOM||(o.QuantityUOM="MarineReceiptManualEntry_MandatoryQuantityUOM"),this.state.modExchangeAgrement.LenderShareholderCode===this.props.selectedShareholder&&this.state.modExchangeAgrement.RequestStatus===C.wH.ACCEPTED&&this.state.exchangeAgreement.RequestType===C.yC.PRODUCT_TRANSFER_AGREEMENT&&(""!==s.AcceptedQuantity&&null!==s.AcceptedQuantity&&0!==s.AcceptedQuantity||(o.AcceptedQuantity="ProductTranferAgreementDetails_AcceptedQtyError"),Array.isArray(a)&&a.length>0&&i.length<0&&n.messageResultDetails.push({keyFields:["selectedAssociations"],isSuccess:!1,errorMessage:"ProductTranferAgreementDetails_LenderTankError"})),this.state.modExchangeAgrement.LenderShareholderCode!==this.props.selectedShareholder&&this.state.modExchangeAgrement.RequestStatus===C.wH.ACCEPTED&&(""!==s.ReceivedGrossQty&&null!==s.ReceivedGrossQty||(o.ReceivedGrossQty="ProductTranferAgreementDetails_EnterReceivedQty"),""!==s.ReceivedNetQty&&null!==s.ReceivedNetQty||(o.ReceivedNetQty="ProductTranferAgreementDetails_EnterReceivedQty"),s.ReceivedGrossQty<=0&&(o.ReceivedGrossQty="ProductTranferAgreementDetails_ReceivedQtyError"),s.ReceivedNetQty<=0&&(o.ReceivedNetQty="ProductTranferAgreementDetails_ReceivedQtyError"),null!==s.ReceivedDate&&void 0!==s.ReceivedDate||(o.ReceivedDate="ProductTranferAgreementDetails_ReceivedDateNeeded"),new Date(s.ReceivedDate).getDate()>new Date(s.RequestedCutOff_Date).getDate()&&(o.ReceivedDate="ProductTranferAgreementDetails_ReceivedDateCutOffError"));var l=x().cloneDeep(this.state.attributeValidationErrors);t.forEach((e=>{l.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=r.I5(e,e.DefaultValue)}))}))})),this.setState({validationErrors:o,attributeValidationErrors:l});let d=!0;if(d&&(d=Object.values(o).every((function(e){return""===e}))),d){if(this.state.exchangeAgreement.RequestType!==C.yC.EXCHANGE_AGREEMENT&&this.props.selectedRow.ShareholderAgreement_RequestType!==C.yC.EXCHANGE_AGREEMENT)return d;Array.isArray(e.ExchangeAgreementItems)&&e.ExchangeAgreementItems.length>0?e.ExchangeAgreementItems.forEach((e=>{N.U9.forEach((t=>{let s="";void 0!==t.validator&&(s=r.jr(t.validator,e[t.field])),""!==s&&n.messageResultDetails.push({keyFields:["ExchangeAgreementDetailsItem_Product",t.displayName],keyValues:[e.BaseProductCode,e[t.field]],isSuccess:!1,errorMessage:s})}))})):n.messageResultDetails.push({keyFields:[],keyValues:[],isSuccess:!1,errorMessage:"Shipment_Compartment_Association_Require"})}return n.messageResultDetails.length>0?(this.props.onSaved(e,"update",n),!1):d}catch(n){console.log("error in validate save",n)}}fillAttributeDetails(e,t){try{return t=r.SC(t),e.Attributes=[],t.forEach((t=>{let s={ListOfAttributeData:[]};s.TerminalCode=t.TerminalCode,t.attributeMetaDataList.forEach((e=>{s.ListOfAttributeData.push({AttributeCode:e.Code,AttributeValue:e.DefaultValue})})),e.Attributes.push(s)})),this.setState({ShareholderAgreementInfo:e}),e}catch(s){console.log("ShareholderAgrementDetailsComposite:Error occured on fillAttributeDetails",s)}}convertStringtoDecimal(e,t){try{return e=this.fillAttributeDetails(e,t)}catch(s){console.log("convertStringtoDecimal error ShareholderAgrement Details",s)}}CreateExchangeAgreement(e){try{this.handleAuthenticationClose();let t=[{key:u.X3,value:e.RequestCode}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:u.X3,KeyCodes:t,Entity:e},a={messageType:"critical",message:"ExchangeAgreement_savedSucess",messageResultDetails:[{keyFields:["ExchangeAgreementDetails_RequestCode"],keyValues:[e.RequestCode],isSuccess:!1,errorMessage:""}]};o()(l.WA0,r.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{let s=t.data;a.messageType=s.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.setState({},(()=>this.GetExchangeAgreement({Common_Code:e.RequestCode}))):(a.messageResultDetails[0].errorMessage=s.ErrorList[0],this.setState({saveEnabled:!0}),console.log("Error in ExchangeAgrement:",s.ErrorList)),this.props.onSaved(e,"add",a)})).catch((t=>{this.setState({saveEnabled:!0}),a.messageResultDetails[0].errorMessage=t,this.props.onSaved(e,"add",a)}))}catch(t){console.log("Error in ExchangeAgrement:",t)}}UpdateExchangeAgreement(e){try{this.handleAuthenticationClose();let t=[{key:u.X3,value:e.RequestCode}],s={keyDataCode:u.X3,KeyCodes:t,Entity:e},a={messageType:"critical",message:"ExchangeAgreement_savedSucess",messageResultDetails:[{keyFields:["ExchangeAgreementDetails_RequestCode"],keyValues:[e.RequestCode],isSuccess:!1,errorMessage:""}]};o()(l.bes,r.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{let s=t.data;a.messageType=s.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.GetExchangeAgreement({Common_Code:e.RequestCode}):(a.messageResultDetails[0].errorMessage=s.ErrorList[0],this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.modify,I.G9)}),console.log("Error in update exchangeagreement:",s.ErrorList)),this.props.onSaved(this.state.modExchangeAgrement,"update",a)})).catch((e=>{this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.modify,I.G9)}),a.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modExchangeAgrement,"modify",a)}))}catch(t){console.log("Error while UpdateExchangeAgreement",t)}}getTank(e){try{var t=this.props.selectedShareholder;o()(l.eX4+"?ShareholderCode="+t,r.Jm(this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data;if(!0===s.IsSuccess){var a=[],i=s.EntityResult.Table;if(null!==i&&Array.isArray(i))if(this.props.userDetails.EntityResult.IsEnterpriseNode){i=i.filter((t=>t.TerminalCode===e));for(let e=0;e<i.length;e++)a.push(i[e].Common_Code)}else for(let e=0;e<i.length;e++)a.push(i[e].Common_Code);if(null!==a&&Array.isArray(a)){let e=r.Zj(a);this.setState({tankOptions:e})}}else console.log("Error in getTankList:",s.ErrorList)})).catch((e=>{console.log("Error in getTankList:",e)}))}catch(s){console.log("Error in getTankList:",s)}}CreateProductTransferAgreement(e){try{this.handleAuthenticationClose();let t=[{key:u.X3,value:e.RequestCode}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:u.X3,KeyCodes:t,Entity:e},a={messageType:"critical",message:"ProductTransferAgreement_savedSucess",messageResultDetails:[{keyFields:["ExchangeAgreementDetails_RequestCode"],keyValues:[e.RequestCode],isSuccess:!1,errorMessage:""}]};o()(l.TPf,r.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{let s=t.data;a.messageType=s.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.GetProductTransferAgreement({Common_Code:e.RequestCode}):(a.messageResultDetails[0].errorMessage=s.ErrorList[0],this.setState({saveEnabled:!0}),console.log("Error in create ProductTransfer:",s.ErrorList)),this.props.onSaved(e,"add",a)})).catch((t=>{this.setState({saveEnabled:!0}),a.messageResultDetails[0].errorMessage=t,this.props.onSaved(e,"add",a)}))}catch(t){console.log("Error in create ProductTransfer:",t)}}getShareholders(){try{return r.Zj(this.props.userDetails.EntityResult.ShareholderList)}catch(e){console.log("ShareholderagreementDetailsComposite:Error occured on getShareholders",e)}}GetTankShareholderAssociation(e){try{let t=[{key:u.E7,value:e.RequestorTankCode}],s={ShareHolderCode:this.props.selectedShareholder,keyDataCode:u.E7,KeyCodes:t,Enity:e};o()(l.V99,r.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(Array.isArray(t.EntityResult)&&t.EntityResult.length>0){let e=x().cloneDeep(t.EntityResult).filter((e=>e.ShareholderCode==this.props.selectedShareholder));this.setState({tankShareholderDetails:e,isDetails:!0})}}else this.setState({tankShareholderDetails:[],isDetails:!1,saveEnabled:!1}),console.log("Error in getTankShareholderAssociationDetails:",t.ErrorList)})).catch((e=>{this.setState({tankShareholderDetails:[],isDetails:!1}),console.log("Error while getting TankShareholderAssociationDetails:",e)}))}catch(t){console.log("TankShareholderAssociationComposite: Error in GetTankShareholderAssociation")}}render(){const e={shareholders:this.getShareholders(),baseProductOptions:this.state.baseProductOptions,UOMOptions:this.state.UOMOptions,tankCodeOptions:this.state.tankOptions,currentShareholderAgreementStatusList:this.state.currentShareholderAgreementStatusList},t=[{fieldName:"ExchangeAgreementDetails_CreatedDate",fieldValue:new Date(this.state.modExchangeAgrement.CreatedTime).toLocaleDateString()+" "+new Date(this.state.modExchangeAgrement.CreatedTime).toLocaleTimeString()},{fieldName:"ExchangeAgreementDetails_LastUpdatedDate",fieldValue:void 0!==this.state.modExchangeAgrement.LastUpdatedTime&&null!==this.state.modExchangeAgrement.LastUpdatedTime?new Date(this.state.modExchangeAgrement.LastUpdatedTime).toLocaleDateString()+" "+new Date(this.state.modExchangeAgrement.LastUpdatedTime).toLocaleTimeString():""},{fieldName:"ExchangeAgreementDetails_StatuschangedDate",fieldValue:new Date(this.state.modExchangeAgrement.CreatedTime).toLocaleDateString()+" "+new Date(this.state.modExchangeAgrement.CreatedTime).toLocaleTimeString()}];return this.state.isReadyToRender?(0,R.jsxs)("div",{children:[this.state.isViewAuditTrail?(0,R.jsx)(c.A,{children:(0,R.jsx)(L,{modViewAuditTrail:this.state.modViewAuditTrail,handleBack:this.onBack,RequestCode:this.state.modExchangeAgrement.RequestCode})}):this.state.isViewShipmentDetails?(0,R.jsx)(c.A,{children:(0,R.jsx)(w,{modEAShipmentDetails:this.state.modEAShipmentDetails,handleBack:this.onBack})}):(0,R.jsxs)("div",{children:[(0,R.jsx)(c.A,{children:(0,R.jsx)(h.A,{entityCode:this.state.exchangeAgreement.RequestCode,newEntityName:this.props.selectedRow.ShareholderAgreement_RequestType===C.yC.EXCHANGE_AGREEMENT||this.props.agreementType===C.yC.EXCHANGE_AGREEMENT?"ExchangeAgreementDetails_Title":"ProductTransferAgreementDetails_Title",popUpContents:t})}),(0,R.jsx)(c.A,{children:this.props.selectedRow.ShareholderAgreement_RequestType===C.yC.EXCHANGE_AGREEMENT||this.props.agreementType===C.yC.EXCHANGE_AGREEMENT?(0,R.jsx)(D,{isBonded:this.state.isBonded,listOptions:e,modExchangeAgrement:this.state.modExchangeAgrement,exchangeAgreement:this.state.exchangeAgreement,modExchangeAgreementItems:this.state.modExchangeAgreementItems,selectedAssociations:this.state.selectedAssociations,handleAssociationSelectionChange:this.handleAssociationSelectionChange,selectedShareholder:this.props.selectedShareholder,handleCellDataEdit:this.handleCellDataEdit,handleAddAssociation:this.handleAddAssociation,handleDeleteAssociation:this.handleDeleteAssociation,onFieldChange:this.handleChange,onDateTextChange:this.handleDateTextChange,validationErrors:this.state.validationErrors,handleViewAuditTrail:this.handleViewAuditTrail,UpdateExchangeAgreementStatus:this.UpdateExchangeAgreementStatus,GetExchangeAgreementShipmentItemDetails:this.GetExchangeAgreementShipmentItemDetails,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,attributeValidationErrors:this.state.attributeValidationErrors,selectedAttributeList:this.state.selectedAttributeList,handleCellAttrinuteDataEdit:this.handleCellAttrinuteDataEdit,btnCreatePTAgreement:this.state.btnCreatePTAgreement,btnFroceClose:this.state.btnFroceClose}):(0,R.jsx)(y,{selectedShareholder:this.props.selectedShareholder,isBonded:this.state.isBonded,modExchangeAgrement:this.state.modExchangeAgrement,onFieldChange:this.handleChange,exchangeAgreement:this.state.exchangeAgreement,onDateTextChange:this.handleDateTextChange,listOptions:e,modProductAgreementItem:this.state.modProductAgreementItem,handleViewAuditTrail:this.handleViewAuditTrail,validationErrors:this.state.validationErrors,tankShareholderDetails:this.state.tankShareholderDetails,UpdateProductTransferAgreementStatus:this.UpdateProductTransferAgreementStatus,handleCreateAgrement:this.handleCreateAgrement,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,attributeValidationErrors:this.state.attributeValidationErrors,selectedAttributeList:this.state.selectedAttributeList,handleCellAttrinuteDataEdit:this.handleCellAttrinuteDataEdit,btnCreatePTAgreement:this.state.btnCreatePTAgreement,btnFroceClose:this.state.btnFroceClose,btncompltAgreement:this.state.btncompltAgreement,handleAssociationSelectionChange:this.handleAssociationSelectionChange,selectedAssociations:this.state.selectedAssociations,isfieldEnable:this.state.isfieldEnable})}),(0,R.jsx)(c.A,{children:(0,R.jsx)(n.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})})]}),this.state.showAuthenticationLayout?(0,R.jsx)(j.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.exchangeAgreement.RequestCode?I.i.add:I.i.modify,functionGroup:I.G9,handleOperation:this.addUpdateShareholderAgreement,handleClose:this.handleAuthenticationClose}):null]}):(0,R.jsx)(m.A,{message:"Loading"})}}const H=(0,d.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(_)},43503:(e,t,s)=>{s.d(t,{A:()=>l});s(65043);var a=s(67907),r=s(72711),i=s(70579);function o(e){let{entityCode:t,newEntityName:s,popUpContents:o}=e;return(0,i.jsx)(a.TranslationConsumer,{children:e=>(0,i.jsx)("div",{className:"headerContainer",children:(0,i.jsxs)("div",{className:"row headerSpacing",children:[(0,i.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,i.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(s):t})}),""!==t&&void 0!==t&&o.length>0?(0,i.jsx)("div",{className:"headerItemRight",children:(0,i.jsx)(r.Popup,{element:(0,i.jsxs)("div",{children:[e(o[0].fieldName)+" ",":"," "+o[0].fieldValue,(0,i.jsx)(r.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,i.jsx)(r.List,{className:"detailsHeaderPopUp",children:o.map((t=>(0,i.jsxs)(r.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}o.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const l=o},9256:(e,t,s)=>{s.d(t,{q:()=>o});s(65043);var a=s(72711),r=s(67907),i=s(70579);function o(e){let{handleBack:t,handleSave:s,handleReset:o,saveEnabled:l}=e;return(0,i.jsx)(r.TranslationConsumer,{children:e=>(0,i.jsxs)("div",{className:"row userActionPosition",children:[(0,i.jsx)("div",{className:"col-12 col-md-3 col-lg-4",children:(0,i.jsx)(a.Button,{className:"backButton",onClick:t,content:e("Back")})}),(0,i.jsx)("div",{className:"col-12 col-md-9 col-lg-8",children:(0,i.jsxs)("div",{style:{float:"right"},children:[(0,i.jsx)(a.Button,{content:e("LookUpData_btnReset"),className:"cancelButton",onClick:o}),(0,i.jsx)(a.Button,{content:e("Save"),disabled:!l,onClick:s})]})})]})})}o.defaultProps={saveEnabled:!1}},85800:(e,t,s)=>{s.d(t,{n:()=>n});s(65043);var a=s(72711),r=s(67907),i=s(7523),o=s(35861),l=s(70579);function n(e){let{selectedAttributeList:t,handleCellDataEdit:s,attributeValidationErrors:n}=e;const d=e=>{if("0000-00-00"===e.DefaultValue)return c(e,new Date),new Date;var t=e.DefaultValue.split("-");return new Date(t[0],t[1]-1,t[2])},c=(e,t)=>{var a=new Date(t);t=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2),s(e,t)};return(0,l.jsx)(r.TranslationConsumer,{children:e=>(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-md-12 attributeDetails-wrap",children:(0,l.jsx)("div",{className:"row",children:t.map((t=>t.DataType.toLowerCase()===i.pe.STRING.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(n[t.Code]),reserveSpace:!1})}):t.DataType.toLowerCase()!==i.pe.INT.toLowerCase()&&t.DataType.toLowerCase()!==i.pe.LONG.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()!==i.pe.FLOAT.toLowerCase()&&t.DataType.toLowerCase()!==i.pe.DOUBLE.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()===i.pe.BOOL.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.Checkbox,{className:"deviceCheckBox customDeviceCheckBox",label:e(t.DisplayName),checked:null===t.DefaultValue?"":"true"===t.DefaultValue.toString().toLowerCase(),disabled:!0===t.IsReadonly,onChange:e=>s(t,e)})}):t.DataType.toLowerCase()===i.pe.DATETIME.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.DatePicker,{fluid:!0,value:null===t.DefaultValue||""===t.DefaultValue?"":d(t),label:e(t.DisplayName),displayFormat:(0,o.F1)(),showYearSelector:"true",indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>c(t,e),onTextChange:e=>{c(t,e)},error:e(n[t.Code]),reserveSpace:!1})}):null:(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue||""===t.DefaultValue?"":t.DefaultValue.toLocaleString(),indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(n[t.Code]),reserveSpace:!1})}):(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(n[t.Code]),reserveSpace:!1})})))})})})})}},15417:(e,t,s)=>{s.d(t,{$7:()=>P,AN:()=>se,AU:()=>N,Ak:()=>Ge,Ao:()=>a,B6:()=>X,C4:()=>qe,CG:()=>Z,Ct:()=>W,Cw:()=>_,EY:()=>I,G$:()=>Xe,G6:()=>ze,GF:()=>me,GJ:()=>O,Gj:()=>he,Gl:()=>ie,H9:()=>Je,HB:()=>ve,HP:()=>y,Hr:()=>Ie,II:()=>rt,IQ:()=>R,Jr:()=>F,Jx:()=>Se,Ki:()=>te,LP:()=>re,Lv:()=>i,MK:()=>C,MX:()=>ee,Mx:()=>B,N4:()=>je,NH:()=>pe,OF:()=>Ye,Ps:()=>M,Q7:()=>We,QY:()=>q,SF:()=>o,Sq:()=>xe,Sw:()=>le,TQ:()=>$,U7:()=>v,UH:()=>A,UO:()=>oe,V_:()=>fe,Vy:()=>ke,W9:()=>de,WN:()=>S,Wr:()=>r,Ww:()=>z,XP:()=>be,Xk:()=>J,Yb:()=>Te,Yy:()=>E,Z2:()=>Oe,ZN:()=>L,ZO:()=>De,Zu:()=>Fe,_G:()=>V,_N:()=>h,_u:()=>ce,ad:()=>ne,al:()=>Re,ao:()=>k,bK:()=>G,bN:()=>p,cf:()=>w,dO:()=>Pe,dU:()=>m,dv:()=>l,eE:()=>K,g:()=>x,gG:()=>n,gS:()=>Ne,gT:()=>st,gW:()=>Y,gZ:()=>$e,go:()=>b,gp:()=>U,hq:()=>we,i6:()=>et,ip:()=>ue,k9:()=>g,kI:()=>D,l4:()=>_e,l5:()=>T,lA:()=>j,lU:()=>Ze,mD:()=>Ue,mY:()=>H,mq:()=>d,n$:()=>at,n7:()=>u,nZ:()=>Le,rA:()=>He,s$:()=>Me,s8:()=>Qe,se:()=>Ce,tA:()=>ye,vK:()=>tt,vs:()=>Ae,w2:()=>Ke,w4:()=>ge,wT:()=>c,wY:()=>f,wf:()=>Ee,wk:()=>ae,xW:()=>Q,yM:()=>Ve,yO:()=>Be});const a="driver",r="carriercompany",i="shareholder",o="baseProduct",l="TRAILER",n="TRAILERCOMPARTMENT",d="terminal",c="customer",h="destination",u="finishedproduct",m="tank",E="marine_vessel",g="marine_trailercompartment",A="supplier",C="vehicle",p="vehicletrailer",S="originterminal",R="bay",D="loadingArm",T="cardreader",x="vehicleprimemover",y="meter",I="SHIPMENT",v="SHIPMENTCOMPARTMENT",N="SHIPMENTDESTINATIONCOMPARTMENT",b="SHIPMENTDETAILS",f="SHIPMENTTRAILERWEIGHBRIDGE",P="SHIPMENTTRAILER",L="SHIPMENTSTATUSTIME",w="MARINEDISPATCH",j="MARINEDISPATCHCOMPARTMENTDETAIL",O="railwagon",_="primemover",H="bcu",q="RAILRECEIPTPLAN",M="RAILRECEIPTWAGONDETAILPLAN",k="RAILUNLOADINGDETAILSFP",U="RAILUNLOADINGDETAILSBP",Q="RAILUNLOADINGDETAILSADDITIVE",F="RAILDISPATCHPLAN",G="RAILDISPATCHITEM",V="RAILDISPATCHSTATUSCHANGE",B="RAILDISPATCHWAGON",W="RAILDISPATCHWAGONDETAILPLAN",J="RAILDISPATCHWAGONWEIGHBRIDGE",X="RAILDISPATCHWAGONCOMPARTMENT",K="RAILLOADINGDETAILSFP",Z="RAILLOADINGDETAILSBP",Y="RAILLOADINGDETAILSADDITIVE",z="marineReceipt",$="UNACCOUNTEDMETERTRANSACTION",ee="UNACCOUNTEDTANKTRANSACTION",te="marineLoadingDetailsFP",se="marineLoadingDetailsAdditive",ae="marineLoadingDetailsBP",re="marineReceiptCompartmentDetail",ie="marineUnloadingDetailsFP",oe="marineUnloadingDetailsBP",le="accessCard",ne="LOADINGDETAILSFP",de="LOADINGDETAILSBP",ce="LOADINGDETAILSADDITIVE",he="MARINERECEIPTSTATUSTIME",ue="MARINEDISPATCHSTATUSTIME",me="RECEIPT",Ee="UNLOADINGTRANSACTIONS",ge="ORDER",Ae="ORDERITEM",Ce="CONTRACT",pe="CONTRACT_ITEM",Se="RECEIPTORIGINTERMINALCOMPARTMENT",Re="GeneralTMUser_CAPTAIN",De="weighbridge",Te="deu",xe="GeneralTMUser_STAFF",ye="GeneralTMUser_VISITOR",Ie="PIPELINEHEADER",ve="SEALMASTER",Ne="PIPELINERECEIPT",be="ROADSHIPMENTSLOTINFO",fe="ROADRECEIPTSLOTINFO",Pe="MARINESHIPMENTSLOTINFO",Le="MARINERECEIPTSLOTINFO",we="PIPELINEDISPATCH",je="PIPELINETRANSACTIONS",Oe="PIPELINEDISPATCHSTATUSTIME",_e="PIPELINERECEIPTSTATUSTIME",He="PROCESSCONFIG",qe="PRODUCTALLOCATIONITEM",Me="HSEINSPECTIONSHIPMENTRIGIDTRUCK",ke="HSEINSPECTIONSHIPMENTTRAILER",Ue="HSEINSPECTIONSHIPMENTPRIMEMOVER",Qe="HSEINSPECTIONSHIPMENTNONFILLINGVEHICLE",Fe="HSEINSPECTIONMARINESHIPMENTBARGE",Ge="HSEINSPECTIONMARINESHIPMENTSHIP",Ve="HSEINSPECTIONSHIPMENTRAILWAGON",Be="HSEINSPECTIONSHIPMENTPIPELINE",We="HSEINSPECTIONRECEIPTRIGIDTRUCK",Je="HSEINSPECTIONRECEIPTTRAILER",Xe="HSEINSPECTIONRECEIPTPRIMEMOVER",Ke="HSEINSPECTIONRECEIPTNONFILLINGVEHICLE",Ze="HSEINSPECTIONMARINERECEIPTBARGE",Ye="HSEINSPECTIONMARINERECEIPTSHIP",ze="HSEINSPECTIONRECEIPTRAILWAGON",$e="HSEINSPECTIONRECEIPTPIPELINE",et="SHAREHOLDERAGREEMENT",tt="COATEMPLATE",st="COAMANAGEMENT",at="COACUSTOMER",rt="COAASSIGNMENT"},35861:(e,t,s)=>{s.d(t,{F1:()=>l,i7:()=>n,r4:()=>o});var a=s(86178),r=s.n(a),i=(s(15660),s(65043),s(70579));function o(e,t){if(Array.isArray(e)){0===e.filter((e=>e.text===t)).length&&e.unshift({value:null,text:t})}return e}function l(){let e=window.navigator.userLanguage||window.navigator.language;return r().locale(e),r().localeData().longDateFormat("L")}function n(e){return(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{children:e}),(0,i.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]})}}}]);
//# sourceMappingURL=7587.c26177b7.chunk.js.map