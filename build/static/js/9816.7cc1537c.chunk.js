"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[9816],{69816:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var i=a(65043),s=a(67907),r=a(78374),o=a(70579);function n(e){let{batchDetailsList:t}=e;return(0,o.jsx)(s.TranslationConsumer,{children:e=>(0,o.jsx)("div",{className:"detailsContainer",children:(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("div",{className:"col-12 detailsTable",children:(0,o.jsxs)(r.bQ,{data:t,children:[(0,o.jsx)(r.bQ.Column,{className:"compColHeight",field:"ProductCode",header:e("ContractInfo_Product")},"ProductCode"),(0,o.jsx)(r.bQ.Column,{className:"compColHeight",field:"ProductType",header:e("ProductType_Title"),renderer:a=>e(t[a.rowIndex][a.field])},"ProductType"),(0,o.jsx)(r.bQ.Column,{className:"compColHeight",field:"MeterCode",header:e("Meter_Code")},"MeterCode"),(0,o.jsx)(r.bQ.Column,{className:"compColHeight",field:"GrossQuantity",header:e("GrossQuantity")},"GrossQuantity"),(0,o.jsx)(r.bQ.Column,{className:"compColHeight",field:"NetQuantity",header:e("NetQuantity")},"NetQuantity"),(0,o.jsx)(r.bQ.Column,{className:"compColHeight",field:"StartTotalizer",header:e("StartTotalizer")},"StartTotalizer"),(0,o.jsx)(r.bQ.Column,{className:"compColHeight",field:"EndTotalizer",header:e("EndTotalizer")},"EndTotalizer"),(0,o.jsx)(r.bQ.Column,{className:"compColHeight",field:"Density",header:e("Density")},"Density"),(0,o.jsx)(r.bQ.Column,{className:"compColHeight",field:"Pressure",header:e("Pressure")},"Pressure"),(0,o.jsx)(r.bQ.Column,{className:"compColHeight",field:"Temperature",header:e("Temperature")},"Temperature"),(0,o.jsx)(r.bQ.Column,{className:"compColHeight",field:"StartTime",header:e("StartTime"),renderer:e=>{if(t[e.rowIndex][e.field])return new Date(t[e.rowIndex][e.field]).toLocaleString()}},"StartTime"),(0,o.jsx)(r.bQ.Column,{className:"compColHeight",field:"EndTime",header:e("EndTime"),renderer:e=>{if(t[e.rowIndex][e.field])return new Date(t[e.rowIndex][e.field]).toLocaleString()}},"EndTime")]})})})})})}n.defaultProps={batchDetailsList:[]};var l=a(69062),d=a(40854),c=a.n(d),h=a(72067),u=a(97508),m=(a(38726),a(65187)),p=a(43503),g=a(93779),C=a(53536),y=a.n(C),T=a(40252),D=a(72711);class f extends i.Component{constructor(){super(...arguments),this.state={batchDetailsList:[],isReadyToRender:!1,transportationTypeOptions:[]},this.handleChange=(e,t)=>{try{y().cloneDeep(this.state.localData)[e]=t}catch(a){console.log("UnmatchedLocalTransactionsDetailsComposite: Error occurred on handleChange",a)}}}componentDidMount(){try{l.pJ(this.props.userDetails.EntityResult.IsArchived),this.getBatchDetails(this.props.selectedRow)}catch(e){console.log("RailDispatchDetailsComposite:Error occurred on componentDidMount",e)}}getBatchDetails(e){const t=[{key:g.wX,value:e.BCU_Code},{key:g.gO,value:e.RailDispatchManualEntry_TransactionNo},{key:g.Ui,value:e.UnmatchedLocalTrans_BatchNo}],a={ShareHolderCode:this.props.selectedShareholder,KeyCodes:t};c()(h.BKo,l.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;if(!0===t.IsSuccess){const e=this.getBatchDetailsForUI(t.EntityResult);this.setState({batchDetailsList:e,isReadyToRender:!0})}else this.setState({batchDetailsList:[],isReadyToRender:!0})})).catch((e=>{console.log("Error while getting GetLocalTransactions:",e)}))}getBatchDetailsForUI(e){let t=[];try{let a=1;e.forEach((e=>{t.push(this.getBatchInfoFromLoadingDetails(e.LoadingDetailFPinfo,0,a++)),null!==e.ArrLoadingDetailBP&&void 0!==e.ArrLoadingDetailBP&&Array.isArray(e.ArrLoadingDetailBP)&&e.ArrLoadingDetailBP.forEach((e=>{t.push(this.getBatchInfoFromLoadingDetails(e,1,a++))})),null!==e.ArrLoadingDetailAdditive&&void 0!==e.ArrLoadingDetailAdditive&&Array.isArray(e.ArrLoadingDetailAdditive)&&e.ArrLoadingDetailAdditive.forEach((e=>{t.push(this.getBatchInfoFromLoadingDetails(e,2,a++))}))}))}catch(a){console.log("Error while getting GetBatchDetailsForUI:",a)}return t}getBatchInfoFromLoadingDetails(e,t,a){const i={ID:a,ProductCode:"",ProductType:"",TankCode:"",MeterCode:e.MeterCode,GrossQuantity:null===e.GrossQuantity?"0 "+e.QuantityUOM:e.GrossQuantity.toLocaleString()+" "+e.QuantityUOM,NetQuantity:null===e.NetQuantity?"0 "+e.QuantityUOM:e.NetQuantity.toLocaleString()+" "+e.QuantityUOM,StartTotalizer:null===e.StartTotalizer?"":e.StartTotalizer.toLocaleString(),EndTotalizer:null===e.EndTotalizer?"":e.EndTotalizer.toLocaleString(),Density:null===e.ProductDensity?"":e.ProductDensity.toLocaleString()+" "+e.ProductDensityUOM,Pressure:null===e.Pressure?"":e.Pressure.toLocaleString()+" "+e.PressureUOM,Temperature:null===e.Temperature?"":e.Temperature.toLocaleString()+" "+e.TemperatureUOM,StartTime:e.StartTime,EndTime:e.EndTime};switch(t){case 0:i.ProductCode=e.FinishedProductCode,i.ProductType="RailDispatchManualEntry_FinishedProduct";break;case 1:i.ProductCode=e.BaseProductCode,i.ProductType="Report_BaseProduct";break;case 2:i.ProductCode=e.AdditiveProductCode,i.ProductType="ViewShipment_Additive"}return i}render(){return this.state.isReadyToRender?(0,o.jsxs)("div",{children:[(0,o.jsx)(m.A,{children:(0,o.jsx)(p.A,{newEntityName:"LocalTransactions_BatchDetails"})}),(0,o.jsx)(m.A,{children:(0,o.jsx)(n,{batchDetailsList:this.state.batchDetailsList})}),(0,o.jsx)(s.TranslationConsumer,{children:e=>(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("div",{className:"col col-lg-8",children:(0,o.jsx)(D.Button,{className:"backButton",onClick:this.props.onBack,content:e("Back")})})})})]}):(0,o.jsx)(T.A,{message:"Loading"})}}const x=(0,u.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(f)},43503:(e,t,a)=>{a.d(t,{A:()=>n});a(65043);var i=a(67907),s=a(72711),r=a(70579);function o(e){let{entityCode:t,newEntityName:a,popUpContents:o}=e;return(0,r.jsx)(i.TranslationConsumer,{children:e=>(0,r.jsx)("div",{className:"headerContainer",children:(0,r.jsxs)("div",{className:"row headerSpacing",children:[(0,r.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,r.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(a):t})}),""!==t&&void 0!==t&&o.length>0?(0,r.jsx)("div",{className:"headerItemRight",children:(0,r.jsx)(s.Popup,{element:(0,r.jsxs)("div",{children:[e(o[0].fieldName)+" ",":"," "+o[0].fieldValue,(0,r.jsx)(s.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,r.jsx)(s.List,{className:"detailsHeaderPopUp",children:o.map((t=>(0,r.jsxs)(s.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}o.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const n=o}}]);
//# sourceMappingURL=9816.7cc1537c.chunk.js.map