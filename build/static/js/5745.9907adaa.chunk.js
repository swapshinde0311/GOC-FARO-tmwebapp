"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[5745,6001,8382,735,3116,3235,5973,8354],{95745:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var s=a(65043),l=a(67907),i=a(69062),o=a(78374),r=a(72711),n=a(85800),d=a(65187),c=a(35861),m=a(70579);function p(e){let{coaTemplate:t,modCOATemplate:a,validationErrors:s,listOptions:p,onFieldChange:h,onTankCodeChange:T,onFromTemplateChange:u,onActiveStatusChange:C,isEnterpriseNode:A,onAvailableTemplateSelection:E,pageSize:I,onTemplateAssociation:D,onAssociatedTemplateSelection:S,onTemplateDisassociation:v,handleCellDataEdit:N,modAttributeMetaDataList:g,attributeValidationErrors:R,onAttributeDataChange:b}=e;const O=(e,t)=>{let a=[];return a=e.find((e=>e.TerminalCode===t)),a.attributeValidationErrors},L=e=>(0,m.jsx)(r.Input,{fluid:!0,value:e.rowData[e.field],onChange:t=>N(t,e),reserveSpace:!1});return(0,m.jsx)(l.TranslationConsumer,{children:e=>(0,m.jsxs)("div",{className:"detailsContainer",children:[(0,m.jsxs)("div",{className:"row",style:{"align-items":"initial"},children:[(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(r.Input,{fluid:!0,value:a.COATemplateCode,label:e("COATemplateCode"),indicator:"required",disabled:""!==t.COATemplateCode,onChange:e=>h("COATemplateCode",e),error:e(s.COATemplateCode),reserveSpace:!1})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(r.Select,{fluid:!0,placeholder:"Select",value:a.TankCode,label:e("COATemplateTankCode"),indicator:"required",options:i.Zj(p.templateTankCodes),onChange:e=>T(e),error:e(s.TankCode),disabled:null!==t.TankCode,multiple:!1,reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage")})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(r.Input,{fluid:!0,value:a.BaseProductCode,label:e("COATemplateBaseProductCode"),disabled:!0,reserveSpace:!1})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(r.Select,{fluid:!0,placeholder:"Select",value:a.UseType,label:e("COATemplateUseType"),indicator:"required",options:i.Zj(p.templateUseType),onChange:e=>h("UseType",e),error:e(s.UseType),disabled:null!==t.UseType,multiple:!1,reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage")})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(r.Select,{fluid:!0,placeholder:"Select",value:a.FromTemplate,label:e("COAFromTemplate"),options:(0,c.r4)(i.Zj(p.templateFromTemplate),e("Common_Select")),onChange:e=>u(e),disabled:!1,multiple:!1,reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage")})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(r.Select,{fluid:!0,placeholder:"Select",label:e("COATemplate_IsActive"),value:a.IsActive,options:[{text:e("ViewShipment_Ok"),value:!0},{text:e("ViewShipmentStatus_Inactive"),value:!1}],onChange:e=>C(e)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(r.Input,{fluid:!0,value:null===a.Remarks?"":a.Remarks,label:e("COATemplate_Remarks"),onChange:e=>h("Remarks",e),indicator:a.IsActive!==t.IsActive?"required":"",error:e(s.Remarks),reserveSpace:!1})})]}),g.length>0?g.map((t=>(0,m.jsx)(d.A,{children:(0,m.jsx)(r.Accordion,{children:(0,m.jsx)(r.Accordion.Content,{className:"attributeAccordian",title:e("Attributes_Header"),children:(0,m.jsx)(n.n,{selectedAttributeList:t.attributeMetaDataList,handleCellDataEdit:b,attributeValidationErrors:O(R,t.TerminalCode)})})})}))):null,(0,m.jsxs)("div",{className:"row",style:{"align-items":"initial"},children:[(0,m.jsxs)("div",{className:"col-12 col-md-5 col-lg-7",children:[(0,m.jsx)("h4",{children:e("COATemplate_Configuration")}),(0,m.jsx)("div",{className:"detailsTable",children:(0,m.jsxs)(o.bQ,{data:p.availableTemplates,search:!0,selectionMode:"multiple",selection:p.selectedAvailableTemplates,onSelectionChange:E,rows:I,searchPlaceholder:e("LoadingDetailsView_SearchGrid"),children:[(0,m.jsx)(o.bQ.Column,{className:"compColHeight",field:"ParameterName",header:e("COATemplateDetail_ParameterName"),editFieldType:"text"},"ParameterName"),(0,m.jsx)(o.bQ.Column,{className:"compColHeight",field:"Specification",header:e("COATemplateDetail_Specification"),editFieldType:"text",editable:!0,customEditRenderer:e=>L(e)},"Specification"),(0,m.jsx)(o.bQ.Column,{className:"compColHeight",field:"Method",header:e("COATemplateDetail_Method"),editFieldType:"text",editable:!0,customEditRenderer:e=>L(e)},"Method"),(0,m.jsx)(o.bQ.Column,{className:"compColHeight",field:"SortIndex",header:e("COATemplateDetail_SortIndex"),editFieldType:"text",editable:!0,customEditRenderer:e=>L(e)},"SortIndex"),Array.isArray(p.availableTemplates)&&p.availableTemplates.length>I?(0,m.jsx)(o.bQ.Pagination,{}):""]})})]}),(0,m.jsxs)("div",{className:"col-12 col-md-2 col-lg-2",children:[(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsxs)("div",{style:{textAlign:"center"},children:[(0,m.jsx)(r.Button,{type:"primary",icon:(0,m.jsx)(r.Icon,{name:"caret-right",root:"common"}),content:"",iconPosition:"right",onClick:D,disabled:!(p.availableTemplates.length>0)}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)(r.Button,{type:"primary",icon:(0,m.jsx)(r.Icon,{name:"caret-left",root:"common"}),content:"",iconPosition:"right",onClick:v,disabled:!(p.associatedTemplates.length>0)})]})]}),(0,m.jsxs)("div",{className:"col-12 col-md-5 col-lg-3",children:[(0,m.jsx)("h4",{children:e("COATemplate_Configuration_AvailableParameter")}),(0,m.jsx)("div",{className:"detailsTable",children:(0,m.jsxs)(o.bQ,{data:p.associatedTemplates,search:!0,selectionMode:"multiple",selection:p.selectedAssociatedTemplates,onSelectionChange:S,rows:I,searchPlaceholder:e("LoadingDetailsView_SearchGrid"),children:[(0,m.jsx)(o.bQ.Column,{className:"compColHeight",field:"ParameterName",header:e("COATemplateDetail_DisableParameterName")},"ParameterName"),Array.isArray(p.associatedTemplates)&&p.associatedTemplates.length>I?(0,m.jsx)(o.bQ.Pagination,{}):""]})})]}),(0,m.jsx)("div",{})]})]})})}p.defaultProps={isEnterpriseNode:!1,availableTemplates:[],selectedAvailableTemplates:[],associatedTemplates:[],selectedAssociatedTemplates:[]};var h=a(9256),T=a(44192),u=a(46100),C=a(40854),A=a.n(C),E=a(72067),I=a(97508),D=(a(38726),a(43503)),S=a(93779),v=a(80312),N=a(53536),g=a.n(N),R=a(40252),b=a(62900),O=a(15417);class L extends s.Component{constructor(){super(...arguments),this.state={coaTemplate:g().cloneDeep(u.f5),modCOATemplate:{},validationErrors:i.Th(T.u1),isReadyToRender:!1,saveEnabled:!1,showAuthenticationLayout:!1,tempCOATemplate:{},templateTankCodes:[],templateBaseProductCodes:[],templateUseType:["ALL","TANK","CUSTOMER"],templateFromTemplate:[],initavailableTemplates:[],availableTemplates:[],selectedAvailableTemplates:[],associatedTemplates:[],selectedAssociatedTemplates:[],attributeMetaDataList:[],modAttributeMetaDataList:[],attributeValidationErrors:[],allParameters:[]},this.handleAttributeDataChange=(e,t)=>{try{let a=[],s=g().cloneDeep(this.state.modAttributeMetaDataList),l=s.filter((t=>t.TerminalCode===e.TerminalCode));l.length>0&&Array.isArray(l[0].attributeMetaDataList)&&(a=l[0].attributeMetaDataList.filter((t=>t.Code===e.Code))),a.length>0&&(a[0].DefaultValue=t);const o=g().cloneDeep(this.state.attributeValidationErrors);o.forEach((a=>{a.attributeValidationErrors[e.Code]=i.I5(e,t)})),this.setState({attributeValidationErrors:o,modAttributeMetaDataList:s})}catch(a){console.log("DetailsComposite:Error occured on handleAttributeDataChange",a)}},this.handleTankCodeChange=e=>{try{const s=g().cloneDeep(this.state.modCOATemplate),l=g().cloneDeep(this.state.validationErrors);if(s.TankCode=e,this.setState({modCOATemplate:s}),void 0!==T.u1.TankCode&&(l.TankCode=i.jr(T.u1.TankCode,e),this.setState({validationErrors:l})),""!=l.TankCode)return;var t=[{key:S.E7,value:e},{key:S.uw,value:this.props.userDetails.EntityResult.TerminalCode}],a={keyDataCode:S.E7,KeyCodes:t};A()(E.vQz,i.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;if(t.IsSuccess){let e=t.EntityResult;s.BaseProductCode=e.BaseProductCode,this.setState({modCOATemplate:s})}})).catch((e=>{console.log("COATemplateDetails : Error while getting Tank Code",e)}))}catch(s){console.log("COATemplateDetailsComposite:Error occured on handleTankCodeChange",s)}},this.handleFromTemplateChange=e=>{try{const s=g().cloneDeep(this.state.modCOATemplate),l=g().cloneDeep(this.state.validationErrors);if(s.FromTemplate=e,this.setState({modCOATemplate:s}),null==e)return s.FromTemplate=null,void this.setState({availableTemplates:[],modCOATemplate:s,validationErrors:l,isReadyToRender:!0,associatedTemplates:g().cloneDeep(this.state.allParameters)});var t=[{key:S.$L,value:e}],a={keyDataCode:S.$L,KeyCodes:t};A()(E.OvO,i.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({isReadyToRender:!1},(()=>{let e=t.EntityResult.COATemplateDetailsList;var a=[];e.forEach((e=>{var t={ParameterName:e.ParameterName,Specification:e.Specification,Method:e.Method,SortIndex:e.SortIndex};a.push(t)}));let s=g().cloneDeep(this.state.allParameters).filter((e=>!a.some((t=>t.ParameterName===e.ParameterName))));this.setState({availableTemplates:a,initavailableTemplates:a,associatedTemplates:s,isReadyToRender:!0})})):(this.setState({coaTemplate:g().cloneDeep(u.f5),modCOATemplate:g().cloneDeep(u.f5),isReadyToRender:!0},(()=>{})),console.log("Error in getCOATemplate:",t.ErrorList))})).catch((t=>{console.log("Error while getting coaTemplate:",t,e)}))}catch(s){console.log("COATemplateDetailsComposite:Error occured on handleFromTemplateChange",s)}},this.handleChange=(e,t)=>{try{const a=g().cloneDeep(this.state.modCOATemplate),s=g().cloneDeep(this.state.validationErrors);a[e]=t,this.setState({modCOATemplate:a}),void 0!==T.u1[e]&&(s[e]=i.jr(T.u1[e],t),this.setState({validationErrors:s}))}catch(a){console.log("COATemplateDetailsComposite:Error occured on handleChange",a)}},this.handleAvailableTemplateSelection=e=>{this.setState({selectedAvailableTemplates:e})},this.handleAssociatedTemplateSelection=e=>{this.setState({selectedAssociatedTemplates:e})},this.handleTemplateAssociation=()=>{try{this.setState({isReadyToRender:!1},(()=>{const e=g().cloneDeep(this.state.selectedAvailableTemplates);let t=g().cloneDeep(this.state.availableTemplates),a=g().cloneDeep(this.state.associatedTemplates);e.forEach((e=>{a.push(e),t=t.filter((t=>t.ParameterName!==e.ParameterName))})),this.setState({associatedTemplates:a,selectedAvailableTemplates:[],availableTemplates:t,isReadyToRender:!0})}))}catch(e){console.log("ProcessConfigDetailsComposite:Error occured on handleTemplateAssociation",e)}},this.handleTemplateDisassociation=()=>{try{this.setState({isReadyToRender:!1},(()=>{const e=g().cloneDeep(this.state.selectedAssociatedTemplates);let t=g().cloneDeep(this.state.availableTemplates),a=g().cloneDeep(this.state.associatedTemplates);e.forEach((e=>{t.push(e),a=a.filter((t=>t.ParameterName!==e.ParameterName))})),this.setState({associatedTemplates:a,selectedAssociatedTemplates:[],availableTemplates:t,isReadyToRender:!0})}))}catch(e){console.log("ProcessConfigDetailsComposite:Error occured on handleTemplateDisassociation",e)}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})},this.saveCOATemplate=()=>{try{this.setState({saveEnabled:!1});let e=g().cloneDeep(this.state.tempCOATemplate),t=g().cloneDeep(this.state.availableTemplates);e.COATemplateDetailsList=[],t.forEach((t=>{var a={ParameterName:t.ParameterName,Specification:t.Specification,Method:t.Method,SortIndex:t.SortIndex};e.COATemplateDetailsList.push(a)})),e.Code=e.COATemplateCode;let a=i.pI(this.state.modAttributeMetaDataList);a=i.SC(a),e.Attributes=i.Gh(a),""===this.state.coaTemplate.COATemplateCode?this.createCOATemplate(e):this.updateCOATemplate(e)}catch(e){console.log("COATemplateDetailsComposite : Error in saveCOATemplate")}},this.handleSave=()=>{try{let e=g().cloneDeep(this.state.modCOATemplate),t=i.pI(this.state.modAttributeMetaDataList);if(this.validateSave(t)){let t=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,a=g().cloneDeep(e);this.setState({showAuthenticationLayout:t,tempCOATemplate:a},(()=>{!1===t&&this.saveCOATemplate()}))}else this.setState({saveEnabled:!0})}catch(e){console.log("COATemplateDetailsComposite:Error occured on handleSave",e)}},this.handleReset=()=>{try{const e={...this.state.validationErrors},t=g().cloneDeep(this.state.coaTemplate),a=g().cloneDeep(this.state.allParameters);if(Object.keys(e).forEach((function(t){e[t]=""})),""===this.state.coaTemplate.COATemplateCode)this.setState({availableTemplates:[],associatedTemplates:a,selectedAvailableTemplates:[],selectedAssociatedTemplates:[],modCOATemplate:{...t},validationErrors:e,modAttributeMetaDataList:[],isReadyToRender:!1},(()=>{this.props.userDetails.EntityResult.IsEnterpriseNode||this.localNodeAttribute(),this.handleResetAttributeValidationError(),this.setState({isReadyToRender:!0})}));else{const s=g().cloneDeep(this.state.initavailableTemplates);let l=a.filter((e=>!s.some((t=>t.ParameterName===e.ParameterName))));this.setState({selectedAvailableTemplates:[],selectedAssociatedTemplates:[],modCOATemplate:{...t},validationErrors:e,modAttributeMetaDataList:[],availableTemplates:s,associatedTemplates:l,isReadyToRender:!1},(()=>{this.props.userDetails.EntityResult.IsEnterpriseNode||this.localNodeAttribute(),this.handleResetAttributeValidationError(),this.setState({isReadyToRender:!0})}))}}catch(e){console.log("COATemplateDetailsComposite:Error occured on handleReset",e)}},this.handleCellDataEdit=(e,t)=>{try{let a=g().cloneDeep(this.state.availableTemplates);a.find((e=>e.ParameterName===t.rowData.ParameterName))[t.field]=e,this.setState({availableTemplates:a})}catch(a){console.log(":Error occured on handleCellDataEdit",a)}},this.handleActiveStatusChange=e=>{try{let t=g().cloneDeep(this.state.modCOATemplate);t.IsActive=e,t.IsActive!==this.state.coaTemplate.IsActive&&(t.Remarks=""),this.setState({modCOATemplate:t})}catch(t){console.log(t)}}}localNodeAttribute(){try{var e=g().cloneDeep(this.state.attributeMetaDataList);Array.isArray(e.COATEMPLATE)&&e.COATEMPLATE.length>0&&this.terminalSelectionChange([e.COATEMPLATE[0].TerminalCode])}catch(t){console.log("COATEMPLATEDetailsComposite:Error occured on localNodeAttribute",t)}}terminalSelectionChange(e){try{let l=[];var t=[],a=[];t=g().cloneDeep(this.state.attributeMetaDataList),a=g().cloneDeep(this.state.modAttributeMetaDataList);const o=g().cloneDeep(this.state.attributeValidationErrors);var s=g().cloneDeep(this.state.modCOATemplate);e.forEach((e=>{var i=a.find((t=>t.TerminalCode===e));void 0===i?t.COATEMPLATE.forEach((function(t){if(t.TerminalCode===e){var a=s.Attributes.find((t=>t.TerminalCode===e));void 0!==a&&t.attributeMetaDataList.forEach((function(e){var t=a.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),l.push(t)}})):l.push(i)})),a=[],a=l,a=i.nQ(a),o.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.setState({modAttributeMetaDataList:a,attributeValidationErrors:o})}catch(l){console.log("coaTemplateDetailsComposite:Error occured on terminalSelectionChange",l)}}handleResetAttributeValidationError(){try{var e=g().cloneDeep(this.state.attributeMetaDataList);this.setState({attributeValidationErrors:i.Fl(e.coaTemplate)})}catch(t){console.log("handleAttributeValidationError:Error occured on handleReset",t)}}GetTemplateFromTemplate(){try{A()(E.pR$,i.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult,s=g().cloneDeep(this.state.associatedTemplates),l=[];a.forEach((e=>{l.push(e.Code)})),this.setState({templateFromTemplate:l,associatedTemplates:s})}else console.log("Error in gettemplateFromTemplate:",t.ErrorList)})).catch((e=>{console.log("Error while getting Template FromTemplate List:",e)}))}catch(e){console.log("Error while getting Template FromTemplate List:",e)}}getTemplateTankCodes(){try{A()(E.Ibp+"?ShareholderCode=",i.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){var a=t.EntityResult,s=[];a.forEach((e=>{s.push(e)})),this.setState({templateTankCodes:s})}}else console.log("Error in getTankCode:",t.ErrorList)})).catch((e=>{console.log("Error in getTankCode:",e)}))}catch(e){console.log("Error in getTankCode:",e)}}componentWillReceiveProps(e){try{""!==this.state.coaTemplate.Name&&void 0===e.selectedRow.Common_Name&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo&&this.getCOATemplate(e.selectedRow)}catch(t){console.log("COATemplateDetailsComposite:Error occured on componentWillReceiveProps",t)}}componentDidMount(){try{i.pJ(this.props.userDetails.EntityResult.IsArchived),this.getAllParameters(),this.getTemplateTankCodes(),this.GetTemplateFromTemplate(),this.getAttributes(this.props.selectedRow)}catch(e){console.log("COATemplateDetailsComposite:Error occured on componentDidMount",e)}}getAllParameters(){try{var e={keyDataCode:S.$L,KeyCodes:[]};A()(E._dq,i.tW(e,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=t.EntityResult;var a=[];e.forEach((e=>{var t={ParameterName:e.ParameterName,Specification:e.Specification,Method:e.Method,SortIndex:e.SortIndex};a.push(t)})),this.setState({allParameters:a})}else this.setState({allParameters:[]}),console.log("Error in GetAllParameters:",t.ErrorList)})).catch((e=>{console.log("Error while GetAllParameters:",e)}))}catch(t){console.log("Error while GetAllParameters:",t)}}getAttributes(e){try{A()(E.fKH,i.tW([O.vK],this.props.tokenDetails.tokenInfo)).then((t=>{var a=t.data;if(!0===a.IsSuccess){var s=g().cloneDeep(this.state.associatedTemplates);this.setState({attributeMetaDataList:g().cloneDeep(a.EntityResult),attributeValidationErrors:i.Fl(a.EntityResult.COATEMPLATE),associatedTemplates:s},(()=>this.getCOATemplate(e)))}else console.log("Error in getAttributes:")}))}catch(t){console.log("Error while getAttributes:",t)}}getCOATemplate(e){try{if(void 0===e.COATemplateCode)return void this.setState({isReadyToRender:!1},(()=>{this.setState({coaTemplate:g().cloneDeep(u.f5),modCOATemplate:g().cloneDeep(u.f5),isReadyToRender:!0,saveEnabled:i.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.add,v._S),availableTemplates:[],modAttributeMetaDataList:[],associatedTemplates:g().cloneDeep(this.state.allParameters)},(()=>{this.localNodeAttribute()}))}));var t=[{key:S.$L,value:e.COATemplateCode}],a={keyDataCode:S.$L,KeyCodes:t};A()(E.OvO,i.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=t.EntityResult.COATemplateDetailsList;var a=[];e.forEach((e=>{var t={ParameterName:e.ParameterName,Specification:e.Specification,Method:e.Method,SortIndex:e.SortIndex};a.push(t)})),t.EntityResult.COATemplateCode=t.EntityResult.Code;let s=g().cloneDeep(this.state.allParameters).filter((e=>!a.some((t=>t.ParameterName===e.ParameterName))));this.setState({isReadyToRender:!0,coaTemplate:g().cloneDeep(t.EntityResult),modCOATemplate:g().cloneDeep(t.EntityResult),availableTemplates:a,initavailableTemplates:a,associatedTemplates:s,saveEnabled:i.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v._S)},(()=>{this.localNodeAttribute()}))}else this.setState({coaTemplate:g().cloneDeep(u.f5),modCOATemplate:g().cloneDeep(u.f5),isReadyToRender:!0},(()=>{})),console.log("Error in getCOATemplate:",t.ErrorList)})).catch((t=>{console.log("Error while getting coaTemplate:",t,e)}))}catch(s){console.log("Error while getting coaTemplate:",s,e)}}validateSave(e){try{const{modCOATemplate:l}=this.state;var t=g().cloneDeep(this.state.validationErrors);Object.keys(T.u1).forEach((function(e){t[e]=i.jr(T.u1[e],l[e])})),l.IsActive!==this.state.coaTemplate.IsActive&&(null!==l.Remarks&&""!==l.Remarks||(t.Remarks="COA_RemarksRequired")),this.setState({validationErrors:t});var a=g().cloneDeep(this.state.attributeValidationErrors);e.forEach((e=>{a.forEach((t=>{e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=i.I5(e,e.DefaultValue)}))}))})),this.setState({validationErrors:t,attributeValidationErrors:a});var s=!0;return a.forEach((e=>{if(!s)return s;s=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),s&&(s=Object.values(t).every((function(e){return""===e}))),s}catch(l){console.log("COATemplateDetailsComposite : Error in validateSave")}}createCOATemplate(e){try{var t=[{key:S.$L,value:e.COATemplateCode}],a={keyDataCode:S.$L,KeyCodes:t,Entity:e},s={messageType:"critical",message:"COATemplateDetails_SavedStatus",messageResultDetails:[{keyFields:["COATemplateCode"],keyValues:[e.COATemplateCode],isSuccess:!1,errorMessage:""}]};A()(E.qgR,i.tW(a,this.props.tokenDetails.tokenInfo)).then((t=>{var a=t.data;s.messageType=a.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=a.IsSuccess,!0===a.IsSuccess?this.setState({saveEnabled:i.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v._S),showAuthenticationLayout:!1},(()=>this.getCOATemplate({COATemplateCode:e.COATemplateCode}))):(s.messageResultDetails[0].errorMessage=a.ErrorList[0],this.setState({saveEnabled:i.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.add,v._S),showAuthenticationLayout:!1}),console.log("Error in createCOATemplate:",a.ErrorList)),this.props.onSaved(e,"add",s)})).catch((t=>{this.setState({saveEnabled:i.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.add,v._S),showAuthenticationLayout:!1}),s.messageResultDetails[0].errorMessage=t,this.props.onSaved(e,"add",s)}))}catch(l){console.log("Error in createCOATemplate")}}updateCOATemplate(e){try{let t=[{key:S.$L,value:e.COATemplateCode}];null==e.CreatedBy&&(e.CreatedBy=""),null==e.LastUpdatedBy&&(e.LastUpdatedBy="");let a={keyDataCode:S.$L,KeyCodes:t,Entity:e},s={messageType:"critical",message:"COATemplateDetails_SavedStatus",messageResultDetails:[{keyFields:["COATemplateCode"],keyValues:[e.COATemplateCode],isSuccess:!1,errorMessage:""}]};A()(E.trR,i.tW(a,this.props.tokenDetails.tokenInfo)).then((t=>{var a=t.data;s.messageType=a.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=a.IsSuccess,!0===a.IsSuccess?this.setState({saveEnabled:i.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v._S),showAuthenticationLayout:!1},(()=>this.getCOATemplate({COATemplateCode:e.COATemplateCode}))):(s.messageResultDetails[0].errorMessage=a.ErrorList[0],this.setState({saveEnabled:i.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v._S),showAuthenticationLayout:!1}),console.log("Error in updateCOATemplate:",a.ErrorList)),this.props.onSaved(e,"update",s)})).catch((t=>{s.messageResultDetails[0].errorMessage=t,this.props.onSaved(e,"modify",s),this.setState({saveEnabled:i.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v._S),showAuthenticationLayout:!1})}))}catch(t){console.log("Error in updateCOATemplate:")}}render(){const e={templateTankCodes:this.state.templateTankCodes,templateBaseProductCodes:this.state.templateBaseProductCodes,templateUseType:this.state.templateUseType,templateFromTemplate:this.state.templateFromTemplate,availableTemplates:this.state.availableTemplates,selectedAvailableTemplates:this.state.selectedAvailableTemplates,associatedTemplates:this.state.associatedTemplates,selectedAssociatedTemplates:this.state.selectedAssociatedTemplates},t=[{fieldName:"COATemplate_LastUpDt",fieldValue:new Date(this.state.modCOATemplate.LastUpdatedTime).toLocaleDateString()+" "+new Date(this.state.modCOATemplate.LastUpdatedTime).toLocaleTimeString()},{fieldName:"COATemplate_LastUpdatedBy",fieldValue:this.state.modCOATemplate.LastUpdatedBy}];return this.state.isReadyToRender?(0,m.jsxs)("div",{children:[(0,m.jsx)(d.A,{children:(0,m.jsx)(D.A,{entityCode:this.state.coaTemplate.COATemplateCode,newEntityName:"COATemplate_Title",popUpContents:t})}),(0,m.jsx)(d.A,{children:(0,m.jsx)(p,{coaTemplate:this.state.coaTemplate,modCOATemplate:this.state.modCOATemplate,validationErrors:this.state.validationErrors,listOptions:e,onFieldChange:this.handleChange,onTankCodeChange:this.handleTankCodeChange,onFromTemplateChange:this.handleFromTemplateChange,onActiveStatusChange:this.handleActiveStatusChange,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,onAvailableTemplateSelection:this.handleAvailableTemplateSelection,pageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,onTemplateAssociation:this.handleTemplateAssociation,onAssociatedTemplateSelection:this.handleAssociatedTemplateSelection,onTemplateDisassociation:this.handleTemplateDisassociation,handleCellDataEdit:this.handleCellDataEdit,attributeValidationErrors:this.state.attributeValidationErrors,modAttributeMetaDataList:this.state.modAttributeMetaDataList,attributeMetaDataList:this.state.attributeMetaDataList,onAttributeDataChange:this.handleAttributeDataChange,associatedTemplates:this.state.associatedTemplates})}),(0,m.jsx)(d.A,{children:(0,m.jsx)(h.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.showAuthenticationLayout?(0,m.jsx)(b.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.coaTemplate.COATemplateCode?v.i.add:v.i.modify,functionGroup:v._S,handleOperation:this.saveCOATemplate,handleClose:this.handleAuthenticationClose}):null]}):(0,m.jsx)(R.A,{message:"Loading"})}}const y=(0,I.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(L)},43503:(e,t,a)=>{a.d(t,{A:()=>r});a(65043);var s=a(67907),l=a(72711),i=a(70579);function o(e){let{entityCode:t,newEntityName:a,popUpContents:o}=e;return(0,i.jsx)(s.TranslationConsumer,{children:e=>(0,i.jsx)("div",{className:"headerContainer",children:(0,i.jsxs)("div",{className:"row headerSpacing",children:[(0,i.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,i.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(a):t})}),""!==t&&void 0!==t&&o.length>0?(0,i.jsx)("div",{className:"headerItemRight",children:(0,i.jsx)(l.Popup,{element:(0,i.jsxs)("div",{children:[e(o[0].fieldName)+" ",":"," "+o[0].fieldValue,(0,i.jsx)(l.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,i.jsx)(l.List,{className:"detailsHeaderPopUp",children:o.map((t=>(0,i.jsxs)(l.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}o.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const r=o},9256:(e,t,a)=>{a.d(t,{q:()=>o});a(65043);var s=a(72711),l=a(67907),i=a(70579);function o(e){let{handleBack:t,handleSave:a,handleReset:o,saveEnabled:r}=e;return(0,i.jsx)(l.TranslationConsumer,{children:e=>(0,i.jsxs)("div",{className:"row userActionPosition",children:[(0,i.jsx)("div",{className:"col-12 col-md-3 col-lg-4",children:(0,i.jsx)(s.Button,{className:"backButton",onClick:t,content:e("Back")})}),(0,i.jsx)("div",{className:"col-12 col-md-9 col-lg-8",children:(0,i.jsxs)("div",{style:{float:"right"},children:[(0,i.jsx)(s.Button,{content:e("LookUpData_btnReset"),className:"cancelButton",onClick:o}),(0,i.jsx)(s.Button,{content:e("Save"),disabled:!r,onClick:a})]})})]})})}o.defaultProps={saveEnabled:!1}},85800:(e,t,a)=>{a.d(t,{n:()=>n});a(65043);var s=a(72711),l=a(67907),i=a(7523),o=a(35861),r=a(70579);function n(e){let{selectedAttributeList:t,handleCellDataEdit:a,attributeValidationErrors:n}=e;const d=e=>{if("0000-00-00"===e.DefaultValue)return c(e,new Date),new Date;var t=e.DefaultValue.split("-");return new Date(t[0],t[1]-1,t[2])},c=(e,t)=>{var s=new Date(t);t=s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2),a(e,t)};return(0,r.jsx)(l.TranslationConsumer,{children:e=>(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12 attributeDetails-wrap",children:(0,r.jsx)("div",{className:"row",children:t.map((t=>t.DataType.toLowerCase()===i.pe.STRING.toLowerCase()&&!0===t.IsVisible?(0,r.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,r.jsx)(s.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>a(t,e),error:e(n[t.Code]),reserveSpace:!1})}):t.DataType.toLowerCase()!==i.pe.INT.toLowerCase()&&t.DataType.toLowerCase()!==i.pe.LONG.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()!==i.pe.FLOAT.toLowerCase()&&t.DataType.toLowerCase()!==i.pe.DOUBLE.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()===i.pe.BOOL.toLowerCase()&&!0===t.IsVisible?(0,r.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,r.jsx)(s.Checkbox,{className:"deviceCheckBox customDeviceCheckBox",label:e(t.DisplayName),checked:null===t.DefaultValue?"":"true"===t.DefaultValue.toString().toLowerCase(),disabled:!0===t.IsReadonly,onChange:e=>a(t,e)})}):t.DataType.toLowerCase()===i.pe.DATETIME.toLowerCase()&&!0===t.IsVisible?(0,r.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,r.jsx)(s.DatePicker,{fluid:!0,value:null===t.DefaultValue||""===t.DefaultValue?"":d(t),label:e(t.DisplayName),displayFormat:(0,o.F1)(),showYearSelector:"true",indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>c(t,e),onTextChange:e=>{c(t,e)},error:e(n[t.Code]),reserveSpace:!1})}):null:(0,r.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,r.jsx)(s.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue||""===t.DefaultValue?"":t.DefaultValue.toLocaleString(),indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>a(t,e),error:e(n[t.Code]),reserveSpace:!1})}):(0,r.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,r.jsx)(s.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>a(t,e),error:e(n[t.Code]),reserveSpace:!1})})))})})})})}},15417:(e,t,a)=>{a.d(t,{$7:()=>P,AN:()=>ae,AU:()=>O,Ak:()=>Be,Ao:()=>s,B6:()=>$,C4:()=>He,CG:()=>Y,Ct:()=>K,Cw:()=>k,EY:()=>R,G$:()=>$e,G6:()=>ze,GF:()=>he,GJ:()=>j,Gj:()=>me,Gl:()=>ie,H9:()=>Qe,HB:()=>be,HP:()=>g,Hr:()=>Re,II:()=>lt,IQ:()=>D,Jr:()=>_,Jx:()=>Ie,Ki:()=>te,LP:()=>le,Lv:()=>i,MK:()=>A,MX:()=>ee,Mx:()=>q,N4:()=>xe,NH:()=>Ee,OF:()=>Je,Ps:()=>V,Q7:()=>Ke,QY:()=>H,SF:()=>o,Sq:()=>Ne,Sw:()=>re,TQ:()=>X,U7:()=>b,UH:()=>C,UO:()=>oe,V_:()=>ye,Vy:()=>Fe,W9:()=>de,WN:()=>I,Wr:()=>l,Ww:()=>z,XP:()=>Le,Xk:()=>Q,Yb:()=>ve,Yy:()=>T,Z2:()=>je,ZN:()=>f,ZO:()=>Se,Zu:()=>_e,_G:()=>W,_N:()=>m,_u:()=>ce,ad:()=>ne,al:()=>De,ao:()=>F,bK:()=>B,bN:()=>E,cf:()=>M,dO:()=>Pe,dU:()=>h,dv:()=>r,eE:()=>Z,g:()=>N,gG:()=>n,gS:()=>Oe,gT:()=>at,gW:()=>J,gZ:()=>Xe,go:()=>L,gp:()=>U,hq:()=>Me,i6:()=>et,ip:()=>pe,k9:()=>u,kI:()=>S,l4:()=>ke,l5:()=>v,lA:()=>x,lU:()=>Ye,mD:()=>Ue,mY:()=>w,mq:()=>d,n$:()=>st,n7:()=>p,nZ:()=>fe,rA:()=>we,s$:()=>Ve,s8:()=>Ge,se:()=>Ae,tA:()=>ge,vK:()=>tt,vs:()=>Ce,w2:()=>Ze,w4:()=>ue,wT:()=>c,wY:()=>y,wf:()=>Te,wk:()=>se,xW:()=>G,yM:()=>We,yO:()=>qe});const s="driver",l="carriercompany",i="shareholder",o="baseProduct",r="TRAILER",n="TRAILERCOMPARTMENT",d="terminal",c="customer",m="destination",p="finishedproduct",h="tank",T="marine_vessel",u="marine_trailercompartment",C="supplier",A="vehicle",E="vehicletrailer",I="originterminal",D="bay",S="loadingArm",v="cardreader",N="vehicleprimemover",g="meter",R="SHIPMENT",b="SHIPMENTCOMPARTMENT",O="SHIPMENTDESTINATIONCOMPARTMENT",L="SHIPMENTDETAILS",y="SHIPMENTTRAILERWEIGHBRIDGE",P="SHIPMENTTRAILER",f="SHIPMENTSTATUSTIME",M="MARINEDISPATCH",x="MARINEDISPATCHCOMPARTMENTDETAIL",j="railwagon",k="primemover",w="bcu",H="RAILRECEIPTPLAN",V="RAILRECEIPTWAGONDETAILPLAN",F="RAILUNLOADINGDETAILSFP",U="RAILUNLOADINGDETAILSBP",G="RAILUNLOADINGDETAILSADDITIVE",_="RAILDISPATCHPLAN",B="RAILDISPATCHITEM",W="RAILDISPATCHSTATUSCHANGE",q="RAILDISPATCHWAGON",K="RAILDISPATCHWAGONDETAILPLAN",Q="RAILDISPATCHWAGONWEIGHBRIDGE",$="RAILDISPATCHWAGONCOMPARTMENT",Z="RAILLOADINGDETAILSFP",Y="RAILLOADINGDETAILSBP",J="RAILLOADINGDETAILSADDITIVE",z="marineReceipt",X="UNACCOUNTEDMETERTRANSACTION",ee="UNACCOUNTEDTANKTRANSACTION",te="marineLoadingDetailsFP",ae="marineLoadingDetailsAdditive",se="marineLoadingDetailsBP",le="marineReceiptCompartmentDetail",ie="marineUnloadingDetailsFP",oe="marineUnloadingDetailsBP",re="accessCard",ne="LOADINGDETAILSFP",de="LOADINGDETAILSBP",ce="LOADINGDETAILSADDITIVE",me="MARINERECEIPTSTATUSTIME",pe="MARINEDISPATCHSTATUSTIME",he="RECEIPT",Te="UNLOADINGTRANSACTIONS",ue="ORDER",Ce="ORDERITEM",Ae="CONTRACT",Ee="CONTRACT_ITEM",Ie="RECEIPTORIGINTERMINALCOMPARTMENT",De="GeneralTMUser_CAPTAIN",Se="weighbridge",ve="deu",Ne="GeneralTMUser_STAFF",ge="GeneralTMUser_VISITOR",Re="PIPELINEHEADER",be="SEALMASTER",Oe="PIPELINERECEIPT",Le="ROADSHIPMENTSLOTINFO",ye="ROADRECEIPTSLOTINFO",Pe="MARINESHIPMENTSLOTINFO",fe="MARINERECEIPTSLOTINFO",Me="PIPELINEDISPATCH",xe="PIPELINETRANSACTIONS",je="PIPELINEDISPATCHSTATUSTIME",ke="PIPELINERECEIPTSTATUSTIME",we="PROCESSCONFIG",He="PRODUCTALLOCATIONITEM",Ve="HSEINSPECTIONSHIPMENTRIGIDTRUCK",Fe="HSEINSPECTIONSHIPMENTTRAILER",Ue="HSEINSPECTIONSHIPMENTPRIMEMOVER",Ge="HSEINSPECTIONSHIPMENTNONFILLINGVEHICLE",_e="HSEINSPECTIONMARINESHIPMENTBARGE",Be="HSEINSPECTIONMARINESHIPMENTSHIP",We="HSEINSPECTIONSHIPMENTRAILWAGON",qe="HSEINSPECTIONSHIPMENTPIPELINE",Ke="HSEINSPECTIONRECEIPTRIGIDTRUCK",Qe="HSEINSPECTIONRECEIPTTRAILER",$e="HSEINSPECTIONRECEIPTPRIMEMOVER",Ze="HSEINSPECTIONRECEIPTNONFILLINGVEHICLE",Ye="HSEINSPECTIONMARINERECEIPTBARGE",Je="HSEINSPECTIONMARINERECEIPTSHIP",ze="HSEINSPECTIONRECEIPTRAILWAGON",Xe="HSEINSPECTIONRECEIPTPIPELINE",et="SHAREHOLDERAGREEMENT",tt="COATEMPLATE",at="COAMANAGEMENT",st="COACUSTOMER",lt="COAASSIGNMENT"},35861:(e,t,a)=>{a.d(t,{F1:()=>r,i7:()=>n,r4:()=>o});var s=a(86178),l=a.n(s),i=(a(15660),a(65043),a(70579));function o(e,t){if(Array.isArray(e)){0===e.filter((e=>e.text===t)).length&&e.unshift({value:null,text:t})}return e}function r(){let e=window.navigator.userLanguage||window.navigator.language;return l().locale(e),l().localeData().longDateFormat("L")}function n(e){return(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{children:e}),(0,i.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]})}}}]);
//# sourceMappingURL=5745.9907adaa.chunk.js.map