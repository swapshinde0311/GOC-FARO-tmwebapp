"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[4427,9158,6001,6777,8382,735,3116,4629,3920,3235,5973,8354],{40510:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(65043),i=r(80297),s=r(65187),o=r(67907),l=r(70579);function n(e){let{KPIList:t,pageName:r,rowHeight:n,widgetHeight:d,isDraggable:c,isResizable:h,kpiDisplayTopBreakpoint:u}=e;const[C,m]=(0,a.useState)(1),p=a.useRef(null),E=()=>{let e=window.pageYOffset,t=C;if(p.current&&p.current.getBoundingClientRect().top<u)t=0;else{if(0!==e)return;t=1}m(t)};return(0,a.useEffect)((()=>{"undefined"!==typeof window&&window.addEventListener("scroll",E)})),(0,a.useEffect)((()=>()=>{window.removeEventListener("scroll",E)}),[]),(0,l.jsx)("div",{ref:p,children:1===C?(0,l.jsx)(o.TranslationConsumer,{children:e=>(0,l.jsx)("div",{style:{marginTop:"6px"},children:(0,l.jsx)(s.A,{children:(0,l.jsx)(i.A,{kpiList:t,isDraggable:c,isResizable:h,rowHeight:n,widgetHeight:d,pageName:r})})})}):""})}n.defaultProps={kpiDisplayTopBreakpoint:100}},4427:(e,t,r)=>{r.r(t),r.d(t,{default:()=>O});var a=r(65043),i=r(72711),s=r(7523),o=r(67907),l=r(24904),n=r(85800),d=r(35861),c=r(65187),h=r(69062),u=r(70579);function C(e){let{carrier:t,modCarrier:r,validationErrors:a,attributeValidationErrors:C,modAttributeMetaDataList:m,listOptions:p,genericProps:E,onFieldChange:D,onDateTextChange:I,onCarrierIdentifierChange:g,onShareholderChange:S,onAllTerminalsChange:T,onActiveStatusChange:A,isEnterpriseNode:v,onAttributeDataChange:N}=e;const y=(e,t)=>{let r=[];return r=e.find((e=>e.TerminalCode===t)),r.attributeValidationErrors};var L=void 0===E.transportationType?s.LY.ROAD:E.transportationType;function R(e){var t=e;void 0!==e&&""!==e&&null!==e||(t="000000000U");var r=t[t.length-1];return"U"!==r&&"F"!==r&&"S"!==r&&(r="U"),r}function b(e){var t=e;return void 0!==e&&""!==e&&null!==e||(t="000000000U"),t.substring(0,t.length-1)}return(0,u.jsx)(o.TranslationConsumer,{children:e=>(0,u.jsxs)("div",{className:"detailsContainer",children:[(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,u.jsx)(i.Input,{fluid:!0,value:r.Code,indicator:"required",disabled:""!==t.Code,onChange:e=>D("Code",e),label:e("CarrierDetails_CarrierCode"),error:e(a.Code),reserveSpace:!1})}),(0,u.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,u.jsx)(i.Input,{fluid:!0,value:r.Name,onChange:e=>D("Name",e),indicator:"required",label:e("CarrierDetails_Name"),error:e(a.Name),reserveSpace:!1})}),L===s.LY.ROAD?(0,u.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,u.jsx)(i.Select,{fluid:!0,placeholder:e("Common_Select"),label:e("CarrierDetails_ShareHolder"),value:r.ShareholderCode,options:p.shareholders,onChange:e=>{S([e],"ShareholderCode")},indicator:"required",error:e(a.ShareholderCode),reserveSpace:!1,disabled:""!==t.Code,search:!0,noResultsMessage:e("noResultsMessage")})}):(0,u.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,u.jsx)(i.Select,{fluid:!0,placeholder:e("Common_Select"),label:e("CarrierDetails_ShareHolder"),value:r.ShareholderCodes,multiple:!0,options:p.shareholders,onChange:e=>{S(e,"ShareholderCodes")},indicator:"required",error:e(a.ShareholderCodes),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage")})}),(0,u.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,u.jsx)(i.Input,{fluid:!0,value:null===r.PermitNumber?"":r.PermitNumber,onChange:e=>D("PermitNumber",e),label:e("CarrierDetails_PermitNumber"),error:e(a.PermitNumber),reserveSpace:!1})}),(0,u.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,u.jsx)(i.DatePicker,{fluid:!0,value:null===r.PermitExpiryDate?"":h.OL(r.PermitExpiryDate),displayFormat:(0,d.F1)(),label:e("CarrierDetails_PermitExpiry"),showYearSelector:"true",disablePast:!0,indicator:"required",onChange:e=>D("PermitExpiryDate",e),onTextChange:(e,t)=>{I("PermitExpiryDate",e,t)},error:e(a.PermitExpiryDate),reserveSpace:!1})}),(0,u.jsxs)("div",{className:"col-12 col-md-6 col-lg-4",children:[(0,u.jsx)(i.InputLabel,{label:e("Carrier_Identification_Number")}),(0,u.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,u.jsx)("div",{style:{width:"48%"},children:(0,u.jsx)(i.Select,{fluid:!0,value:R(r.IdentityNumber),options:s.r0,onChange:e=>g("IdentityNumber","identifier",e),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage")})}),(0,u.jsx)("div",{style:{width:"48%"},children:(0,u.jsx)(i.Input,{placeholder:"Input",fluid:!0,value:b(r.IdentityNumber),onChange:e=>g("IdentityNumber","IdentifierNumber",e),disabled:"U"===R(r.IdentityNumber)})})]}),""!==a.IdentityNumber?(0,u.jsx)("div",{className:"below-text",children:(0,u.jsx)("span",{className:"ui error-message",children:e(a.IdentityNumber)})}):""]}),(0,u.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,u.jsx)(i.Input,{fluid:!0,value:null===r.ContactPerson?"":r.ContactPerson,onChange:e=>D("ContactPerson",e),label:e("CarrierDetails_ContactPerson"),error:e(a.ContactPerson),reserveSpace:!1})}),(0,u.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,u.jsx)(i.Input,{fluid:!0,value:null===r.Address?"":r.Address,onChange:e=>D("Address",e),label:e("CarrierDetails_Address"),error:e(a.Address),reserveSpace:!1})}),(0,u.jsxs)("div",{className:"col-12 col-md-6 col-lg-4 checkboxSelect",children:[(0,u.jsx)(i.Checkbox,{label:e("CarrierDetails_AllowWeighIn"),checked:r.AllowOnlyWeighIn,onChange:e=>D("AllowOnlyWeighIn",e)}),(0,u.jsx)(i.Checkbox,{label:e("CarrierDetails_EnforceSeq"),checked:r.EnforceSequence,onChange:e=>D("EnforceSequence",e)})]}),(0,u.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,u.jsx)(i.Input,{fluid:!0,value:null===r.Phone?"":r.Phone,onChange:e=>D("Phone",e),label:e("CarrierDetails_Phone"),error:e(a.Phone),reserveSpace:!1})}),(0,u.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,u.jsx)(i.Input,{fluid:!0,value:null===r.Mobile?"":r.Mobile,onChange:e=>D("Mobile",e),label:e("CarrierDetails_MobileNumber"),error:e(a.Mobile),reserveSpace:!1})}),(0,u.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,u.jsx)(i.Input,{fluid:!0,value:null===r.Email?"":r.Email,onChange:e=>D("Email",e),label:e("CarrierDetails_Email"),error:e(a.Email),reserveSpace:!1})}),(0,u.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,u.jsx)(i.Input,{fluid:!0,value:null===r.Description?"":r.Description,onChange:e=>D("Description",e),label:e("CarrierDetails_Desc"),error:e(a.Description),reserveSpace:!1})}),(0,u.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,u.jsx)(i.Select,{fluid:!0,placeholder:e("FinishedProductInfo_Select"),label:e("DriverInfo_Status"),value:r.Status,options:[{text:e("ViewShipment_Ok"),value:!0},{text:e("ViewShipmentStatus_Inactive"),value:!1}],onChange:e=>A(e)})}),(0,u.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,u.jsx)(i.Input,{fluid:!0,value:null===r.Remarks?"":r.Remarks,label:e("DriverInfo_Remarks"),onChange:e=>D("Remarks",e),indicator:r.Status!==t.Status?"required":"",error:e(a.Remarks),reserveSpace:!1})}),v?(0,u.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,u.jsx)(l.y,{terminalList:p.terminalCodes,selectedTerminal:r.TerminalCodes,error:a.TerminalCodes,onFieldChange:D,onCheckChange:T})}):""]}),m.length>0?m.map((t=>(0,u.jsx)(c.A,{children:(0,u.jsx)(i.Accordion,{children:(0,u.jsx)(i.Accordion.Content,{className:"attributeAccordian",title:v?t.TerminalCode+" - "+e("Attributes_Header"):e("Attributes_Header"),children:(0,u.jsx)(n.n,{selectedAttributeList:t.attributeMetaDataList,handleCellDataEdit:N,attributeValidationErrors:y(C,t.TerminalCode)})})})}))):null]})})}C.defaultProps={genericProps:{transportationType:"ROAD"},isEnterpriseNode:!1};var m=r(9256),p=r(44192),E=r(46100),D=r(40854),I=r.n(D),g=r(72067),S=r(97508),T=(r(38726),r(43503)),A=r(93779),v=r(80312),N=r(53536),y=r.n(N),L=r(15417),R=r(40252),b=r(97105),P=r(40510),f=r(39424),x=r(62900);class M extends a.Component{constructor(){super(...arguments),this.state={carrier:y().cloneDeep(E.A),modCarrier:{},validationErrors:h.Th(p.fm),isReadyToRender:!1,listOptions:{shareholders:this.getShareholders(),terminalCodes:[]},saveEnabled:!1,attributeMetaDataList:[],modAttributeMetaDataList:[],attributeValidationErrors:[],carrierCompanyKPIList:[],showAuthenticationLayout:!1,tempCarrier:{}},this.handleChange=(e,t)=>{try{const r=y().cloneDeep(this.state.modCarrier),a=y().cloneDeep(this.state.validationErrors);r[e]=t,this.setState({modCarrier:r}),void 0!==p.fm[e]&&(a[e]=h.jr(p.fm[e],t),this.setState({validationErrors:a})),"TerminalCodes"===e&&this.terminalSelectionChange(t)}catch(r){console.log("CarrierCompanyComposite:Error occured on componentWillReceiveProps",r)}},this.handleshareholderChange=(e,t)=>{var r=y().cloneDeep(this.state.modCarrier);try{"ShareholderCodes"===t?r[t]=e:e.length>0&&(r[t]=e[0]),this.setState({modCarrier:r},this.getTerminalsList(e))}catch(a){console.log("CarrierDetailyComposite:Error occured on handleshareholderChange",a)}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})},this.saveCarrier=()=>{try{this.setState({saveEnabled:!1});let e=y().cloneDeep(this.state.tempCarrier),t=h.pI(this.state.modAttributeMetaDataList);t=h.SC(t),e.Attributes=h.Gh(t),e=h.pC(b.S.CarrierCompany,e),""===this.state.carrier.Code?this.createCarrier(e):this.updateCarrier(e)}catch(e){console.log("CarrierDetailsComposite : Error in saveBaseProduct")}},this.handleSave=()=>{try{let e=y().cloneDeep(this.state.modCarrier),t=h.pI(this.state.modAttributeMetaDataList);if(this.validateSave(e,t)){let t=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,r=y().cloneDeep(e);this.setState({showAuthenticationLayout:t,tempCarrier:r},(()=>{!1===t&&this.saveCarrier()}))}else this.setState({saveEnabled:!0})}catch(e){console.log("CarrierDetailyComposite:Error occured on handleSave",e)}},this.handleReset=()=>{try{var e=y().cloneDeep(this.state.carrier);const r={...this.state.validationErrors},a=y().cloneDeep(this.state.carrier);var t=this.getTransportationType();Object.keys(r).forEach((function(e){r[e]=""})),this.setState({modCarrier:{...a},validationErrors:r,modAttributeMetaDataList:[]},(()=>{this.props.userDetails.EntityResult.IsEnterpriseNode?(this.terminalSelectionChange(e.TerminalCodes),this.handleResetAttributeValidationError()):(this.localNodeAttribute(),this.handleResetAttributeValidationError()),this.getTerminalsList(t===s.LY.ROAD?[a.ShareholderCode]:a.ShareholderCodes)}))}catch(r){console.log("CarrierDetailyComposite:Error occured on handleReset",r)}},this.handleDateTextChange=(e,t,r)=>{try{var a={...this.state.validationErrors},i=y().cloneDeep(this.state.modCarrier);a[e]=r,i[e]=t,this.setState({validationErrors:a,modCarrier:i})}catch(r){console.log("CarrierDetailyComposite:Error occured on handleDateTextChange",r)}},this.handleCarrierIdentityChange=(e,t,r)=>{try{var a={...this.state.validationErrors},i=y().cloneDeep(this.state.modCarrier);const l="000000000U",n="^[0-9]+$";var s=i[e];void 0!==s&&""!==s&&null!==s||(s=l);var o="";"identifier"===t?"U"===r?(o=l,a[e]=""):o=s.substring(0,s.length-1)+r:(r.length>9?a[e]="CarrierDetails_MaxLengthExceeded":r.match(n)?a[e]="":a[e]="CarrierDetails_regMobile",o=r+s[s.length-1]),i[e]=o,this.setState({modCarrier:i,validationErrors:a})}catch(l){console.log("CarrierDetailyComposite:Error occured on handleCarrierIdentityChange",l)}},this.handleAllTerminalsChange=e=>{try{var t={...this.state.listOptions},r=y().cloneDeep(this.state.modCarrier);r.TerminalCodes=e?[...t.terminalCodes]:[],this.setState({modCarrier:r}),this.terminalSelectionChange(r.TerminalCodes)}catch(a){console.log("CarrierDetailyComposite:Error occured on handleAllTerminasChange",a)}},this.handleActiveStatusChange=e=>{try{let t=y().cloneDeep(this.state.modCarrier);t.Status=e,t.Status!==this.state.carrier.Active&&(t.Remarks=""),this.setState({modCarrier:t})}catch(t){console.log(t)}},this.handleAttributeDataChange=(e,t)=>{try{let r=[],a=y().cloneDeep(this.state.modAttributeMetaDataList),i=a.filter((t=>t.TerminalCode===e.TerminalCode));i.length>0&&Array.isArray(i[0].attributeMetaDataList)&&(r=i[0].attributeMetaDataList.filter((t=>t.Code===e.Code))),r.length>0&&(r[0].DefaultValue=t);const s=y().cloneDeep(this.state.attributeValidationErrors);s.forEach((r=>{r.TerminalCode===e.TerminalCode&&(r.attributeValidationErrors[e.Code]=h.I5(e,t))})),this.setState({attributeValidationErrors:s,modAttributeMetaDataList:a})}catch(r){console.log("CarrierDetailsComposite:Error occured on handleAttributeDataChange",r)}}}terminalSelectionChange(e){try{let i=[];var t=[],r=[];t=y().cloneDeep(this.state.attributeMetaDataList),r=y().cloneDeep(this.state.modAttributeMetaDataList);const s=y().cloneDeep(this.state.attributeValidationErrors);var a=y().cloneDeep(this.state.modCarrier);e.forEach((e=>{var s=r.find((t=>t.TerminalCode===e));void 0===s?t.carriercompany.forEach((function(t){if(t.TerminalCode===e){var r=a.Attributes.find((t=>t.TerminalCode===e));void 0!==r&&t.attributeMetaDataList.forEach((function(e){var t=r.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),i.push(t)}})):i.push(s)})),r=[],r=i,r=h.nQ(r),s.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.setState({modAttributeMetaDataList:r,attributeValidationErrors:s})}catch(i){console.log("CarrierDetailsComposite:Error occured on terminalSelectionChange",i)}}localNodeAttribute(){try{var e=y().cloneDeep(this.state.attributeMetaDataList);Array.isArray(e.carriercompany)&&e.carriercompany.length>0&&this.terminalSelectionChange([e.carriercompany[0].TerminalCode])}catch(t){console.log("CarrierDetailsComposite:Error occured on localNodeAttribute",t)}}componentWillReceiveProps(e){try{""!==this.state.carrier.Code&&void 0===e.selectedRow.Common_Code&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo&&this.getCarrierCompany(e)}catch(t){console.log("CarrierDetailyComposite:Error occured on componentWillReceiveProps",t)}}componentDidMount(){try{h.pJ(this.props.userDetails.EntityResult.IsArchived),this.getAttributes(this.props)}catch(e){console.log("CarrierCompanyComposite:Error occured on componentDidMount",e)}}getAttributes(e){try{I()(g.fKH,h.tW([L.Wr],this.props.tokenDetails.tokenInfo)).then((t=>{var r=t.data;!0===r.IsSuccess?this.setState({attributeMetaDataList:y().cloneDeep(r.EntityResult),attributeValidationErrors:h.Fl(r.EntityResult.carriercompany)},(()=>this.getCarrierCompany(e))):console.log("Error in getAttributes:")}))}catch(t){console.log("Error while getAttributes:",t)}}getShareholders(){return h.Zj(this.props.userDetails.EntityResult.ShareholderList)}getCarrierCompany(e){var t=this.getTransportationType();let r=e.selectedRow;E.A.TransportationType=t;var a=y().cloneDeep(this.state.listOptions);if(void 0===r.Common_Code)return a.terminalCodes=[],void this.setState({carrier:y().cloneDeep(E.A),modCarrier:y().cloneDeep(E.A),listOptions:a,modAttributeMetaDataList:[],carrierCompanyKPIList:[],isReadyToRender:!0,saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.add,v.go)},(()=>{!1===this.props.userDetails.EntityResult.IsEnterpriseNode&&this.localNodeAttribute()}));var i=[{key:A._n,value:r.Common_Code},{key:A.v6,value:t}],o={ShareHolderCode:r.Common_Shareholder,keyDataCode:A._n,KeyCodes:i};I()(g.pm$,h.tW(o,this.props.tokenDetails.tokenInfo)).then((e=>{var r=e.data;!0===r.IsSuccess?this.setState({isReadyToRender:!0,carrier:y().cloneDeep(r.EntityResult),modCarrier:y().cloneDeep(r.EntityResult),saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.go)},(()=>{this.getKPIList(r.EntityResult.ShareholderCode,r.EntityResult.Code),this.props.userDetails.EntityResult.IsEnterpriseNode?this.terminalSelectionChange(r.EntityResult.TerminalCodes):this.localNodeAttribute(),this.getTerminalsList(t===s.LY.ROAD?[r.EntityResult.ShareholderCode]:r.EntityResult.ShareholderCodes)})):(this.setState({carrier:y().cloneDeep(E.A),modCarrier:y().cloneDeep(E.A),isReadyToRender:!0}),console.log("Error in GetCarrier:",r.ErrorList))})).catch((t=>{console.log("Error while getting Carrier:",t,e)}))}getTerminalsList(e){try{if(null!==e&&e.length>0&&void 0!==e[0]&&""!==e[0])I()(g.Oqv,h.tW(e,this.props.tokenDetails.tokenInfo)).then((e=>{if(e.data.IsSuccess){var t=y().cloneDeep(this.state.listOptions),r=y().cloneDeep(this.state.carrier),a=y().cloneDeep(this.state.modCarrier);t.terminalCodes=e.data.EntityResult,this.setState({listOptions:t}),void 0!==r.Code&&""!==r.Code&&null!==r.Code||(1===t.terminalCodes.length?a.TerminalCodes=[...t.terminalCodes]:a.TerminalCodes=[]),Array.isArray(a.TerminalCodes)&&(a.TerminalCodes=t.terminalCodes.filter((e=>a.TerminalCodes.includes(e)))),this.setState(a)}}));else{var t=y().cloneDeep(this.state.listOptions),r=y().cloneDeep(this.state.modCarrier);r.TerminalCodes=[],t.terminalCodes=[],this.setState({modCarrier:r,listOptions:t})}}catch(a){console.log("CarrierDetailyComposite:Error occured on getTerminalsList",a)}}getTransportationType(){var e=s.LY.ROAD;const{genericProps:t}=this.props;return void 0!==t&&void 0!==t.transportationType&&(e=t.transportationType),e}validateSave(e,t){var r=this.getTransportationType(),a=y().cloneDeep(this.state.validationErrors);Object.keys(p.fm).forEach((function(t){a[t]=h.jr(p.fm[t],e[t])})),e.Status!==this.state.carrier.Status&&(null!==e.Remarks&&""!==e.Remarks||(a.Remarks="OriginTerminal_RemarksRequired")),r===s.LY.ROAD?null!==e.ShareholderCode&&""!==e.ShareholderCode.trim()||(a.ShareholderCode="MarineReceipt_MandatoryShareholder"):null!==e.ShareholderCodes&&0!==e.ShareholderCodes.length||(a.ShareholderCodes="MarineReceipt_MandatoryShareholder");const i=e.IdentityNumber;if(void 0!==i&&""!==i&&null!==i){const e=i.substring(0,i.length-1);e.length>9?a.IdentityNumber="CarrierDetails_MaxLengthExceeded":e.match("^[0-9]+$")?a.IdentityNumber="":a.IdentityNumber="CarrierDetails_regMobile"}var o=y().cloneDeep(this.state.attributeValidationErrors);t.forEach((e=>{o.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=h.I5(e,e.DefaultValue)}))}))})),this.setState({validationErrors:a,attributeValidationErrors:o});var l=!0;return o.forEach((e=>{if(!l)return l;l=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),l&&(l=Object.values(a).every((function(e){return""===e}))),l}createCarrier(e){var t=[{key:A._n,value:e.Code}],r={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,keyDataCode:A._n,KeyCodes:t,Entity:e},a={messageType:"critical",message:"CarrierDetails_SavedStatus",messageResultDetails:[{keyFields:["CarrierDetails_CarrierCode"],keyValues:[this.state.modCarrier.Code],isSuccess:!1,errorMessage:""}]};I()(g.hj,h.tW(r,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;a.messageType=t.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?this.setState({carrier:y().cloneDeep(this.state.modCarrier),saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.go),showAuthenticationLayout:!1}):(a.messageResultDetails[0].errorMessage=t.ErrorList[0],this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.add,v.go),showAuthenticationLayout:!1}),console.log("Error in CreateCarrier:",t.ErrorList)),this.props.onSaved(this.state.modCarrier,"add",a)})).catch((e=>{this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.add,v.go),showAuthenticationLayout:!1}),a.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modCarrier,"add",a)}))}updateCarrier(e){var t=[{key:A._n,value:e.Code}],r={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,keyDataCode:A._n,KeyCodes:t,Entity:e},a={messageType:"critical",message:"CarrierDetails_SavedStatus",messageResultDetails:[{keyFields:["CarrierDetails_CarrierCode"],keyValues:[this.state.modCarrier.Code],isSuccess:!1,errorMessage:""}]};I()(g.eQ1,h.tW(r,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;a.messageType=t.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?(this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.go),showAuthenticationLayout:!1}),this.getCarrierCompany({selectedRow:{Common_Code:this.state.modCarrier.Code,Common_Shareholder:this.state.modCarrier.ShareholderCode}})):(this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.go),showAuthenticationLayout:!1}),a.messageResultDetails[0].errorMessage=t.ErrorList[0],console.log("Error in UpdateCarrier:",t.ErrorList)),this.props.onSaved(this.state.modCarrier,"update",a)})).catch((e=>{a.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modCarrier,"modify",a),this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.go),showAuthenticationLayout:!1})}))}handleResetAttributeValidationError(){try{var e=y().cloneDeep(this.state.attributeMetaDataList);this.setState({attributeValidationErrors:h.Fl(e.carriercompany)})}catch(t){console.log("handleAttributeValidationError:Error occured on handleReset",t)}}getKPIList(e,t){if(!0===h.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.view,v.bL)){var r=this.getTransportationType();let a=r===s.LY.ROAD?[{key:"ShareholderCode",value:e},{key:"CarrierCode",value:t}]:[{key:"CarrierCode",value:t}],i={PageName:f.cO,TransportationType:r,InputParameters:a};I()(g.dxq,h.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({carrierCompanyKPIList:t.EntityResult.ListKPIDetails}):(this.setState({carrierCompanyKPIList:[]}),console.log("Error in vehicle KPIList:",t.ErrorList))})).catch((e=>{console.log("Error while getting Vehicle KPIList:",e)}))}}render(){const e=[{fieldName:"CarrierDetails_LastUpdatedDateTime",fieldValue:new Date(this.state.modCarrier.LastUpdatedDate).toLocaleDateString()+" "+new Date(this.state.modCarrier.LastUpdatedDate).toLocaleTimeString()},{fieldName:"AccessCardInfo_LastActive",fieldValue:new Date(this.state.modCarrier.LastActiveDate).toLocaleDateString()+" "+new Date(this.state.modCarrier.LastActiveDate).toLocaleTimeString()},{fieldName:"CarrierDetails_CreatedDateTime",fieldValue:new Date(this.state.modCarrier.CreatedDate).toLocaleDateString()+" "+new Date(this.state.modCarrier.CreatedDate).toLocaleTimeString()}];return this.state.isReadyToRender?(0,u.jsxs)("div",{children:[(0,u.jsx)(c.A,{children:(0,u.jsx)(T.A,{entityCode:this.state.carrier.Code,newEntityName:"CarrierDetails_CarrierHeader",popUpContents:e})}),(0,u.jsx)(P.A,{KPIList:this.state.carrierCompanyKPIList,children:" "}),(0,u.jsx)(c.A,{children:(0,u.jsx)(C,{modAttributeMetaDataList:this.state.modAttributeMetaDataList,attributeMetaDataList:this.state.attributeMetaDataList,carrier:this.state.carrier,modCarrier:this.state.modCarrier,validationErrors:this.state.validationErrors,attributeValidationErrors:this.state.attributeValidationErrors,listOptions:this.state.listOptions,genericProps:this.props.genericProps,onFieldChange:this.handleChange,onDateTextChange:this.handleDateTextChange,onCarrierIdentifierChange:this.handleCarrierIdentityChange,onShareholderChange:this.handleshareholderChange,onAllTerminalsChange:this.handleAllTerminalsChange,onActiveStatusChange:this.handleActiveStatusChange,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,onAttributeDataChange:this.handleAttributeDataChange})}),(0,u.jsx)(c.A,{children:(0,u.jsx)(m.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.showAuthenticationLayout?(0,u.jsx)(x.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.carrier.Code?v.i.add:v.i.modify,functionGroup:v.go,handleOperation:this.saveCarrier,handleClose:this.handleAuthenticationClose}):null]}):(0,u.jsx)(R.A,{message:"Loading"})}}const O=(0,S.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(M)},24904:(e,t,r)=>{r.d(t,{y:()=>l});r(65043);var a=r(67907),i=r(72711),s=r(69062),o=r(70579);function l(e){let{terminalList:t,selectedTerminal:r,validationError:l,onFieldChange:n,onCheckChange:d}=e;return null===r&&(r=[]),(0,o.jsx)(a.TranslationConsumer,{children:e=>(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,o.jsx)("div",{style:{width:"80%"},children:(0,o.jsx)(i.Select,{fluid:!0,placeholder:e("Common_Select"),label:e("TerminalCodes"),value:r,multiple:!0,options:s.Zj(t),onChange:e=>n("TerminalCodes",e),error:e(l),disabled:0===t.length,reserveSpace:!1})}),(0,o.jsx)("div",{className:"ddlSelectAll",children:(0,o.jsx)(i.Checkbox,{label:e("Common_All"),checked:Array.isArray(r)&&r.length===t.length,onChange:e=>d(e)})})]})})}l.defaultProps={terminalList:[],selectedTerminal:[],validationError:""}},43503:(e,t,r)=>{r.d(t,{A:()=>l});r(65043);var a=r(67907),i=r(72711),s=r(70579);function o(e){let{entityCode:t,newEntityName:r,popUpContents:o}=e;return(0,s.jsx)(a.TranslationConsumer,{children:e=>(0,s.jsx)("div",{className:"headerContainer",children:(0,s.jsxs)("div",{className:"row headerSpacing",children:[(0,s.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,s.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(r):t})}),""!==t&&void 0!==t&&o.length>0?(0,s.jsx)("div",{className:"headerItemRight",children:(0,s.jsx)(i.Popup,{element:(0,s.jsxs)("div",{children:[e(o[0].fieldName)+" ",":"," "+o[0].fieldValue,(0,s.jsx)(i.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,s.jsx)(i.List,{className:"detailsHeaderPopUp",children:o.map((t=>(0,s.jsxs)(i.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}o.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const l=o},9256:(e,t,r)=>{r.d(t,{q:()=>o});r(65043);var a=r(72711),i=r(67907),s=r(70579);function o(e){let{handleBack:t,handleSave:r,handleReset:o,saveEnabled:l}=e;return(0,s.jsx)(i.TranslationConsumer,{children:e=>(0,s.jsxs)("div",{className:"row userActionPosition",children:[(0,s.jsx)("div",{className:"col-12 col-md-3 col-lg-4",children:(0,s.jsx)(a.Button,{className:"backButton",onClick:t,content:e("Back")})}),(0,s.jsx)("div",{className:"col-12 col-md-9 col-lg-8",children:(0,s.jsxs)("div",{style:{float:"right"},children:[(0,s.jsx)(a.Button,{content:e("LookUpData_btnReset"),className:"cancelButton",onClick:o}),(0,s.jsx)(a.Button,{content:e("Save"),disabled:!l,onClick:r})]})})]})})}o.defaultProps={saveEnabled:!1}},85800:(e,t,r)=>{r.d(t,{n:()=>n});r(65043);var a=r(72711),i=r(67907),s=r(7523),o=r(35861),l=r(70579);function n(e){let{selectedAttributeList:t,handleCellDataEdit:r,attributeValidationErrors:n}=e;const d=e=>{if("0000-00-00"===e.DefaultValue)return c(e,new Date),new Date;var t=e.DefaultValue.split("-");return new Date(t[0],t[1]-1,t[2])},c=(e,t)=>{var a=new Date(t);t=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2),r(e,t)};return(0,l.jsx)(i.TranslationConsumer,{children:e=>(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-md-12 attributeDetails-wrap",children:(0,l.jsx)("div",{className:"row",children:t.map((t=>t.DataType.toLowerCase()===s.pe.STRING.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>r(t,e),error:e(n[t.Code]),reserveSpace:!1})}):t.DataType.toLowerCase()!==s.pe.INT.toLowerCase()&&t.DataType.toLowerCase()!==s.pe.LONG.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()!==s.pe.FLOAT.toLowerCase()&&t.DataType.toLowerCase()!==s.pe.DOUBLE.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()===s.pe.BOOL.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.Checkbox,{className:"deviceCheckBox customDeviceCheckBox",label:e(t.DisplayName),checked:null===t.DefaultValue?"":"true"===t.DefaultValue.toString().toLowerCase(),disabled:!0===t.IsReadonly,onChange:e=>r(t,e)})}):t.DataType.toLowerCase()===s.pe.DATETIME.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.DatePicker,{fluid:!0,value:null===t.DefaultValue||""===t.DefaultValue?"":d(t),label:e(t.DisplayName),displayFormat:(0,o.F1)(),showYearSelector:"true",indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>c(t,e),onTextChange:e=>{c(t,e)},error:e(n[t.Code]),reserveSpace:!1})}):null:(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue||""===t.DefaultValue?"":t.DefaultValue.toLocaleString(),indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>r(t,e),error:e(n[t.Code]),reserveSpace:!1})}):(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(a.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>r(t,e),error:e(n[t.Code]),reserveSpace:!1})})))})})})})}},15417:(e,t,r)=>{r.d(t,{$7:()=>f,AN:()=>re,AU:()=>R,Ak:()=>We,Ao:()=>a,B6:()=>Z,C4:()=>He,CG:()=>z,Ct:()=>q,Cw:()=>w,EY:()=>y,G$:()=>Ze,G6:()=>Je,GF:()=>Ce,GJ:()=>j,Gj:()=>he,Gl:()=>se,H9:()=>Ye,HB:()=>Le,HP:()=>N,Hr:()=>ye,II:()=>it,IQ:()=>S,Jr:()=>F,Jx:()=>ge,Ki:()=>te,LP:()=>ie,Lv:()=>s,MK:()=>D,MX:()=>ee,Mx:()=>K,N4:()=>Oe,NH:()=>Ie,OF:()=>Qe,Ps:()=>V,Q7:()=>qe,QY:()=>H,SF:()=>o,Sq:()=>ve,Sw:()=>le,TQ:()=>X,U7:()=>L,UH:()=>E,UO:()=>oe,V_:()=>Pe,Vy:()=>_e,W9:()=>de,WN:()=>g,Wr:()=>i,Ww:()=>J,XP:()=>be,Xk:()=>Y,Yb:()=>Ae,Yy:()=>m,Z2:()=>je,ZN:()=>x,ZO:()=>Te,Zu:()=>Fe,_G:()=>B,_N:()=>h,_u:()=>ce,ad:()=>ne,al:()=>Se,ao:()=>_,bK:()=>W,bN:()=>I,cf:()=>M,dO:()=>fe,dU:()=>C,dv:()=>l,eE:()=>$,g:()=>v,gG:()=>n,gS:()=>Re,gT:()=>rt,gW:()=>Q,gZ:()=>Xe,go:()=>b,gp:()=>U,hq:()=>Me,i6:()=>et,ip:()=>ue,k9:()=>p,kI:()=>T,l4:()=>we,l5:()=>A,lA:()=>O,lU:()=>ze,mD:()=>Ue,mY:()=>k,mq:()=>d,n$:()=>at,n7:()=>u,nZ:()=>xe,rA:()=>ke,s$:()=>Ve,s8:()=>Ge,se:()=>De,tA:()=>Ne,vK:()=>tt,vs:()=>Ee,w2:()=>$e,w4:()=>pe,wT:()=>c,wY:()=>P,wf:()=>me,wk:()=>ae,xW:()=>G,yM:()=>Be,yO:()=>Ke});const a="driver",i="carriercompany",s="shareholder",o="baseProduct",l="TRAILER",n="TRAILERCOMPARTMENT",d="terminal",c="customer",h="destination",u="finishedproduct",C="tank",m="marine_vessel",p="marine_trailercompartment",E="supplier",D="vehicle",I="vehicletrailer",g="originterminal",S="bay",T="loadingArm",A="cardreader",v="vehicleprimemover",N="meter",y="SHIPMENT",L="SHIPMENTCOMPARTMENT",R="SHIPMENTDESTINATIONCOMPARTMENT",b="SHIPMENTDETAILS",P="SHIPMENTTRAILERWEIGHBRIDGE",f="SHIPMENTTRAILER",x="SHIPMENTSTATUSTIME",M="MARINEDISPATCH",O="MARINEDISPATCHCOMPARTMENTDETAIL",j="railwagon",w="primemover",k="bcu",H="RAILRECEIPTPLAN",V="RAILRECEIPTWAGONDETAILPLAN",_="RAILUNLOADINGDETAILSFP",U="RAILUNLOADINGDETAILSBP",G="RAILUNLOADINGDETAILSADDITIVE",F="RAILDISPATCHPLAN",W="RAILDISPATCHITEM",B="RAILDISPATCHSTATUSCHANGE",K="RAILDISPATCHWAGON",q="RAILDISPATCHWAGONDETAILPLAN",Y="RAILDISPATCHWAGONWEIGHBRIDGE",Z="RAILDISPATCHWAGONCOMPARTMENT",$="RAILLOADINGDETAILSFP",z="RAILLOADINGDETAILSBP",Q="RAILLOADINGDETAILSADDITIVE",J="marineReceipt",X="UNACCOUNTEDMETERTRANSACTION",ee="UNACCOUNTEDTANKTRANSACTION",te="marineLoadingDetailsFP",re="marineLoadingDetailsAdditive",ae="marineLoadingDetailsBP",ie="marineReceiptCompartmentDetail",se="marineUnloadingDetailsFP",oe="marineUnloadingDetailsBP",le="accessCard",ne="LOADINGDETAILSFP",de="LOADINGDETAILSBP",ce="LOADINGDETAILSADDITIVE",he="MARINERECEIPTSTATUSTIME",ue="MARINEDISPATCHSTATUSTIME",Ce="RECEIPT",me="UNLOADINGTRANSACTIONS",pe="ORDER",Ee="ORDERITEM",De="CONTRACT",Ie="CONTRACT_ITEM",ge="RECEIPTORIGINTERMINALCOMPARTMENT",Se="GeneralTMUser_CAPTAIN",Te="weighbridge",Ae="deu",ve="GeneralTMUser_STAFF",Ne="GeneralTMUser_VISITOR",ye="PIPELINEHEADER",Le="SEALMASTER",Re="PIPELINERECEIPT",be="ROADSHIPMENTSLOTINFO",Pe="ROADRECEIPTSLOTINFO",fe="MARINESHIPMENTSLOTINFO",xe="MARINERECEIPTSLOTINFO",Me="PIPELINEDISPATCH",Oe="PIPELINETRANSACTIONS",je="PIPELINEDISPATCHSTATUSTIME",we="PIPELINERECEIPTSTATUSTIME",ke="PROCESSCONFIG",He="PRODUCTALLOCATIONITEM",Ve="HSEINSPECTIONSHIPMENTRIGIDTRUCK",_e="HSEINSPECTIONSHIPMENTTRAILER",Ue="HSEINSPECTIONSHIPMENTPRIMEMOVER",Ge="HSEINSPECTIONSHIPMENTNONFILLINGVEHICLE",Fe="HSEINSPECTIONMARINESHIPMENTBARGE",We="HSEINSPECTIONMARINESHIPMENTSHIP",Be="HSEINSPECTIONSHIPMENTRAILWAGON",Ke="HSEINSPECTIONSHIPMENTPIPELINE",qe="HSEINSPECTIONRECEIPTRIGIDTRUCK",Ye="HSEINSPECTIONRECEIPTTRAILER",Ze="HSEINSPECTIONRECEIPTPRIMEMOVER",$e="HSEINSPECTIONRECEIPTNONFILLINGVEHICLE",ze="HSEINSPECTIONMARINERECEIPTBARGE",Qe="HSEINSPECTIONMARINERECEIPTSHIP",Je="HSEINSPECTIONRECEIPTRAILWAGON",Xe="HSEINSPECTIONRECEIPTPIPELINE",et="SHAREHOLDERAGREEMENT",tt="COATEMPLATE",rt="COAMANAGEMENT",at="COACUSTOMER",it="COAASSIGNMENT"},97105:(e,t,r)=>{r.d(t,{S:()=>a});const a={Driver:["License1ExpiryDate","License1IssueDate","License2IssueDate","License2ExpiryDate","License3IssueDate","License3ExpiryDate","HazardousLicenseExpiry"],CarrierCompany:["PermitExpiryDate"],PrimeMover:["RoadTaxNoIssueDate","RoadTaxNoExpiryDate","licenseExpiryDate"],Wagon:["LicenseExpiryDate"],Vehicle:["LicenseNoIssueDate","LicenseNoExpiryDate","RoadTaxNoIssueDate","RoadTaxNoExpiryDate","Bondexpirydate","HazardousLicenseExpiry"],Contract:["StartDate","EndDate"],ContractItem:["StartDate","EndDate"],Order:["OrderStartDate","OrderEndDate","OrderDate","DeliveryDate"],AccessCard:["ExpiryDate","IssueDate","PasswordExpiryDate"],Trailer:["HazardousLicenseExpiry"]}},35861:(e,t,r)=>{r.d(t,{F1:()=>l,i7:()=>n,r4:()=>o});var a=r(86178),i=r.n(a),s=(r(15660),r(65043),r(70579));function o(e,t){if(Array.isArray(e)){0===e.filter((e=>e.text===t)).length&&e.unshift({value:null,text:t})}return e}function l(){let e=window.navigator.userLanguage||window.navigator.language;return i().locale(e),i().localeData().longDateFormat("L")}function n(e){return(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{children:e}),(0,s.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]})}}}]);
//# sourceMappingURL=4427.4971229b.chunk.js.map