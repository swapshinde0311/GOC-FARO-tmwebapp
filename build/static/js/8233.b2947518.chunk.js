"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[8233],{40510:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(65043),o=s(80297),i=s(65187),r=s(67907),l=s(70579);function n(e){let{KPIList:t,pageName:s,rowHeight:n,widgetHeight:d,isDraggable:c,isResizable:u,kpiDisplayTopBreakpoint:p}=e;const[h,y]=(0,a.useState)(1),m=a.useRef(null),g=()=>{let e=window.pageYOffset,t=h;if(m.current&&m.current.getBoundingClientRect().top<p)t=0;else{if(0!==e)return;t=1}y(t)};return(0,a.useEffect)((()=>{"undefined"!==typeof window&&window.addEventListener("scroll",g)})),(0,a.useEffect)((()=>()=>{window.removeEventListener("scroll",g)}),[]),(0,l.jsx)("div",{ref:m,children:1===h?(0,l.jsx)(r.TranslationConsumer,{children:e=>(0,l.jsx)("div",{style:{marginTop:"6px"},children:(0,l.jsx)(i.A,{children:(0,l.jsx)(o.A,{kpiList:t,isDraggable:c,isResizable:u,rowHeight:n,widgetHeight:d,pageName:s})})})}):""})}n.defaultProps={kpiDisplayTopBreakpoint:100}},28233:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var a=s(65043),o=s(69062),i=s(40854),r=s.n(i),l=s(72067),n=s(9256),d=s(97508),c=s(46100),u=s(44192),p=(s(38726),s(65187)),h=s(43503),y=s(93779),m=s(40252),g=s(53536),b=s.n(g),v=s(80312),G=s(72711),B=s(67907),E=s(78374),L=s(70579);function D(e){let{bayGroup:t,modBayGroup:s,validationErrors:a,onFieldChange:o,modAvailablebayList:i,handleBaySelectionChange:r,selectedbays:l}=e;return(0,L.jsx)(B.TranslationConsumer,{children:(e,n)=>(0,L.jsx)("div",{className:"detailsContainer",children:(0,L.jsxs)("div",{className:"row",children:[(0,L.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,L.jsx)(G.Input,{fluid:!0,value:s.GroupName,indicator:"required",disabled:""!==t.GroupName,onChange:e=>o("GroupName",e),label:e("BayGroupList_Name"),error:e(a.GroupName),reserveSpace:!1},n)}),(0,L.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,L.jsx)(G.Input,{fluid:!0,value:s.Description,onChange:e=>o("Description",e),label:e("BayGroupList_Description"),error:e(a.Description),reserveSpace:!1},n)}),(0,L.jsxs)("div",{className:"col-12 bayGroupList tableScroll",children:[(0,L.jsx)("span",{children:e("BayGroupDetails_AssociatedBays")}),(0,L.jsx)("div",{class:"ui red circular empty label badge  circle-padding"}),(0,L.jsxs)(E.bQ,{data:i,selectionMode:"multiple",selection:l,onSelectionChange:r,scrollable:!0,scrollHeight:"320px",children:[(0,L.jsx)(E.bQ.Column,{className:"compColHeight",field:"BayCode",header:e("BayGroupList_BayCode")},"BayCode"),(0,L.jsx)(E.bQ.Column,{className:"compColHeight",field:"Description",header:e("BayGroupList_Description")},"Description"),(0,L.jsx)(E.bQ.Column,{className:"compColHeight",field:"LoadingType",header:e("BayGroupList_LoadingType")},"LoadingType"),(0,L.jsx)(E.bQ.Column,{className:"compColHeight",field:"MaximumQueue",header:e("BayGroupList_MaximumQueue")},"MaximumQueue"),(0,L.jsx)(E.bQ.Column,{className:"compColHeight",field:"Active",header:e("BayGroupList_Active"),renderer:e=>function(e){const{value:t,field:s}=e;if("boolean"===typeof t||"Active"===s)return t?(0,L.jsx)(G.Icon,{name:"check",size:"small",color:"green"}):(0,L.jsx)(G.Icon,{name:"close",size:"small",color:"red"})}(e)},"Active")]})]})]})})})}D.defaultProps={isEnterpriseNode:!1};var f=s(40510),S=s(39424),C=s(62900);class N extends a.Component{constructor(){super(...arguments),this.state={bayGroup:{},modBayGroup:{},validationErrors:o.Th(u.QV),isReadyToRender:!1,saveEnabled:!1,lookUpData:null,isEnable:!0,modAvailablebayList:[],selectedbays:[],checkedBays:[],bayGroupKPIList:[],tempBayGroup:{}},this.handleBaySelectionChange=e=>{this.setState({selectedbays:e})},this.handleChange=(e,t)=>{try{const s=b().cloneDeep(this.state.modBayGroup);s[e]=t,this.setState({modBayGroup:s});const a=b().cloneDeep(this.state.validationErrors);void 0!==u.QV[e]&&(a[e]=o.jr(u.QV[e],t),this.setState({validationErrors:a}))}catch(s){console.log("BayGroupDetailsComposite:Error occured on handleChange",s)}},this.handleReset=()=>{try{const{validationErrors:e}={...this.state},t=b().cloneDeep(this.state.bayGroup);if(Object.keys(e).forEach((function(t){e[t]=""})),t.BayList.length>0&&""!==t.BayList){let s=[];t.BayList.forEach((e=>{var t=this.state.modAvailablebayList.find((t=>t.BayCode===e.BayCode));s.push(t)})),this.setState({modBayGroup:{...t},selectedbays:s,validationErrors:e})}else this.setState({modBayGroup:{...t},validationErrors:e})}catch(e){console.log("bayGroupDetailsComposite:Error occured on handleReset",e)}},this.saveBayGroup=()=>{try{this.setState({saveEnabled:!1});let e=b().cloneDeep(this.state.tempBayGroup);""===this.state.bayGroup.GroupName?this.CreateBayGroup(e):this.updateBayGroup(e)}catch(e){console.log("BayGroupDetails Composite : Error in saveBayGroup")}},this.handleSave=()=>{try{this.handleAuthenticationClose();let e=b().cloneDeep(this.state.modBayGroup);if(e.BayList=b().cloneDeep(this.state.selectedbays),this.validateSave(e)){let t=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,s=b().cloneDeep(e);this.setState({showAuthenticationLayout:t,tempBayGroup:s},(()=>{!1===t&&this.saveBayGroup()}))}else this.setState({saveEnabled:!0})}catch(e){console.log("BayGroupDetailsComposite:Error occured on handleSave",e)}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})}}componentDidMount(){try{o.pJ(this.props.userDetails.EntityResult.IsArchived),this.GetBayList()}catch(e){console.log("BaygroupDetailsComposite:Error occured on componentDidMount",e)}}componentWillReceiveProps(e){try{if(""!==this.state.bayGroup.GroupName&&void 0===e.selectedRow.GroupName&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo){this.getBayGroup(e.selectedRow);let t={...this.state.validationErrors};Object.keys(t).forEach((e=>{t[e]=""})),this.setState({validationErrors:t})}}catch(t){console.log("baygroupDetailsComposite:Error occured on componentWillReceiveProps",t)}}getBayGroup(e){try{if(c.tA.BayList=this.state.modAvailablebayList,void 0===e.GroupName)return void this.setState({bayGroup:b().cloneDeep(c.tA),modBayGroup:b().cloneDeep(c.tA),isReadyToRender:!0,modAvailablebayList:b().cloneDeep(c.tA.BayList),checkedBays:[],selectedbays:[],bayGroupKPIList:[],saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.add,v.ke)});r()(l.Ut2+"?bayGroupName="+e.GroupName,o.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess&&t.EntityResult.length>0){let e=[];t.EntityResult[0].BayList.forEach((t=>{var s=this.state.modAvailablebayList.find((e=>e.BayCode===t.BayCode));e.push(s)})),this.setState({isReadyToRender:!0,bayGroup:b().cloneDeep(t.EntityResult[0]),modBayGroup:b().cloneDeep(t.EntityResult[0]),selectedbays:e,saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.ke)},(()=>this.getKPIList(this.props.selectedShareholder,t.EntityResult[0].bayGroupCode)))}else this.setState({bayGroup:b().cloneDeep(c.tA),modBayGroup:b().cloneDeep(c.tA),isReadyToRender:!0,modAvailablebayList:b().cloneDeep(c.tA.BayList),selectedbays:[]}),console.log("Error in getbaygroup:",t.ErrorList)}))}catch(t){console.log("Error while getbaygroup:",t,e)}}GetBayList(){try{r()(l.xmm,o.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?Array.isArray(t.EntityResult.Table)&&t.EntityResult.Table.length>=0&&this.setState({modAvailablebayList:t.EntityResult.Table},(()=>{this.getBayGroup(this.props.selectedRow)})):(this.setState({modAvailablebayList:[]}),console.log("Error in getbayList:",t.ErrorList))})).catch((e=>{this.setState({modAvailablebayList:[]}),console.log("Error while getting getbayList:",e)}))}catch(e){console.log("Error while getbayList:",e)}}validateSave(e){try{var t=b().cloneDeep(this.state.validationErrors);Object.keys(u.QV).forEach((function(s){t[s]=o.jr(u.QV[s],e[s])}));let a={messageType:"critical",message:["BayGroup_Saved_Status"],messageResultDetails:[]};0===e.BayList.length&&a.messageResultDetails.push({keyFields:["Groupname"],keyValues:[e.GroupName],isSuccess:!1,errorMessage:"BayGroup_PleaseSelectAtleastOneBay"}),this.setState({validationErrors:t});var s=!0;return s&&(s=Object.values(t).every((function(e){return""===e}))),a.messageResultDetails.length>0?(this.props.onSaved(this.state.modBayGroup,"update",a),!1):s}catch(a){console.log("Error while Validate Save",a)}}CreateBayGroup(e){try{this.handleAuthenticationClose();let t=[{key:y.Ae,value:e.GroupName}],s={keyDataCode:y.Ae,KeyCodes:t,Entity:e},a={messageType:"critical",message:"BayGroup_Saved_Status",messageResultDetails:[{keyFields:["BayGroupList_Name"],keyValues:[e.GroupName],isSuccess:!1,errorMessage:""}]};r()(l.UIR,o.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{let s=t.data;a.messageType=s.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.ke)},(()=>this.getBayGroup({GroupName:e.GroupName}))):(a.messageResultDetails[0].errorMessage=s.ErrorList[0],this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.add,v.ke)}),console.log("Error in BayGroup:",s.ErrorList)),this.props.onSaved(this.state.modBayGroup,"add",a)})).catch((e=>{this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.add,v.ke)}),a.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modBayGroup,"add",a)}))}catch(t){console.log("Error while createbaygroup",t)}}updateBayGroup(e){try{this.handleAuthenticationClose();let t=[{key:y.Ae,value:e.GroupName}],s={keyDataCode:y.Ae,KeyCodes:t,Entity:e},a={messageType:"critical",message:"BayGroup_SavedSuccess",messageResultDetails:[{keyFields:["BayGroupList_Name"],keyValues:[e.GroupName],isSuccess:!1,errorMessage:""}]};r()(l.HCt,o.tW(s,this.props.tokenDetails.tokenInfo)).then((t=>{let s=t.data;a.messageType=s.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.ke)},(()=>this.getBayGroup({GroupName:e.GroupName}))):(a.messageResultDetails[0].errorMessage=s.ErrorList[0],this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.ke)}),console.log("Error in update BayGroup:",s.ErrorList)),this.props.onSaved(this.state.modBayGroup,"update",a)})).catch((e=>{this.setState({saveEnabled:o.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.ke)}),a.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modBayGroup,"modify",a)}))}catch(t){console.log("Error while updatebaygroup",t)}}getKPIList(e){if(!0===o.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.view,v.bL)){let t={PageName:S.jQ,InputParameters:[{key:"BayGroupCode",value:e}]};r()(l.dxq,o.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({bayGroupKPIList:t.EntityResult.ListKPIDetails}):(this.setState({bayGroupKPIList:[]}),console.log("Error in baygroup KPIList:",t.ErrorList))})).catch((e=>{console.log("Error while getting baygroup KPIList:",e)}))}}render(){const e=[{fieldName:"BayGroupList_LastUpdated",fieldValue:new Date(this.state.modBayGroup.LastUpdatedTime).toLocaleDateString()+" "+new Date(this.state.modBayGroup.LastUpdatedTime).toLocaleTimeString()},{fieldName:"BayGroupList_CreatedTime",fieldValue:new Date(this.state.modBayGroup.CreatedTime).toLocaleDateString()+" "+new Date(this.state.modBayGroup.CreatedTime).toLocaleTimeString()}];return this.state.isReadyToRender?(0,L.jsxs)("div",{children:[(0,L.jsx)(p.A,{children:(0,L.jsx)(h.A,{entityCode:this.state.bayGroup.GroupName,newEntityName:"BayGroupDetails_NewBayGroup",popUpContents:e})}),(0,L.jsx)(f.A,{KPIList:this.state.bayGroupKPIList,children:" "}),(0,L.jsx)(p.A,{children:(0,L.jsx)(D,{bayGroup:this.state.bayGroup,modBayGroup:this.state.modBayGroup,modAvailablebayList:this.state.modAvailablebayList,validationErrors:this.state.validationErrors,selectedbays:this.state.selectedbays,onFieldChange:this.handleChange,handleBaySelectionChange:this.handleBaySelectionChange,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode})}),(0,L.jsx)(p.A,{children:(0,L.jsx)(n.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.showAuthenticationLayout?(0,L.jsx)(C.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.bayGroup.GroupName?v.i.add:v.i.modify,functionGroup:v.ke,handleOperation:this.saveBayGroup,handleClose:this.handleAuthenticationClose}):null]}):(0,L.jsx)(m.A,{message:"Loading"})}}const k=(0,d.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(N)},43503:(e,t,s)=>{s.d(t,{A:()=>l});s(65043);var a=s(67907),o=s(72711),i=s(70579);function r(e){let{entityCode:t,newEntityName:s,popUpContents:r}=e;return(0,i.jsx)(a.TranslationConsumer,{children:e=>(0,i.jsx)("div",{className:"headerContainer",children:(0,i.jsxs)("div",{className:"row headerSpacing",children:[(0,i.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,i.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(s):t})}),""!==t&&void 0!==t&&r.length>0?(0,i.jsx)("div",{className:"headerItemRight",children:(0,i.jsx)(o.Popup,{element:(0,i.jsxs)("div",{children:[e(r[0].fieldName)+" ",":"," "+r[0].fieldValue,(0,i.jsx)(o.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,i.jsx)(o.List,{className:"detailsHeaderPopUp",children:r.map((t=>(0,i.jsxs)(o.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}r.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const l=r},9256:(e,t,s)=>{s.d(t,{q:()=>r});s(65043);var a=s(72711),o=s(67907),i=s(70579);function r(e){let{handleBack:t,handleSave:s,handleReset:r,saveEnabled:l}=e;return(0,i.jsx)(o.TranslationConsumer,{children:e=>(0,i.jsxs)("div",{className:"row userActionPosition",children:[(0,i.jsx)("div",{className:"col-12 col-md-3 col-lg-4",children:(0,i.jsx)(a.Button,{className:"backButton",onClick:t,content:e("Back")})}),(0,i.jsx)("div",{className:"col-12 col-md-9 col-lg-8",children:(0,i.jsxs)("div",{style:{float:"right"},children:[(0,i.jsx)(a.Button,{content:e("LookUpData_btnReset"),className:"cancelButton",onClick:r}),(0,i.jsx)(a.Button,{content:e("Save"),disabled:!l,onClick:s})]})})]})})}r.defaultProps={saveEnabled:!1}}}]);
//# sourceMappingURL=8233.b2947518.chunk.js.map