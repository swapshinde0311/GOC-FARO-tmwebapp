"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[6624],{46624:(e,t,i)=>{i.r(t),i.d(t,{default:()=>M});var s=i(65043),a=i(41637),l=i(31045),r=i(72711),o=i(78374),n=i(46100),h=i(69062),c=i(93779),d=i(72067),u=i(7523),p=i(53536),m=i.n(p),g=i(97508),C=i(40854),T=i.n(C),v=i(65187),y=i(44192),D=i(80312),S=i(96935),V=i(9256),E=i(43503),x=i(67907),b=i(40252),R=i(15417),L=i(85800),A=i(97105),N=i(62900),f=i(70579);let k=null,j=null,I=[];class O extends s.Component{constructor(){super(...arguments),this.state={isReadyToRender:!1,vehicle:{},modVehicle:{},validationErrors:h.Th(y.zA),carrierOptions:[],terminalOptions:[],volumeUOMOptions:[],weightUOMOptions:[],lengthUOMOptions:[],productTypeOptions:[],step1Active:void 0===this.props.selectedRow.Common_Code,step2Active:!1,step3Active:void 0!==this.props.selectedRow.Common_Code,rigidTruckSelection:[],trailerSelection:[],attributeMetaDataList:[],modVehicleAttributeMetaDataList:[],vehicleAttributeValidationErrors:[],modVehicleTrailerAttributeMetaDataList:[],vehicleTrailerAttributeValidationErrors:[],isBonded:!1,isRigidLoaded:!1,isTrailerLoaded:!1,maxNumberOfCompartments:12,showAuthenticationLayout:!1,tempVehicle:{}},this.handleReset=()=>{try{if(this.setState({modVehicle:m().cloneDeep(this.state.vehicle),modVehicleAttributeMetaDataList:[],modVehicleTrailerAttributeMetaDataList:[]},(()=>{this.props.userDetails.EntityResult.IsEnterpriseNode?(this.terminalSelectionChange(this.state.modVehicle.TerminalCodes),this.handleResetAttributeValidationError()):(this.localNodeAttribute(),this.handleResetAttributeValidationError())})),""===this.state.vehicle.Code){let e=[];this.setState({terminalOptions:e})}I=m().clone(this.state.vehicle.VehicleTrailers);let e={...this.state.validationErrors};Object.keys(e).forEach((t=>{e[t]=""})),this.setState({validationErrors:e})}catch(e){console.log("TractorWithTrailerDetailsComposite:Error occured on handleReset",e)}},this.handleCarrierChange=e=>{if(this.props.userDetails.EntityResult.IsEnterpriseNode)this.getTerminalsForCarrier(e);else{const t=m().cloneDeep(this.state.modVehicle);t.CarrierCompanyCode=e;const i=[];t.TerminalCodes=[],this.setState({terminalOptions:i,modVehicle:t})}if(void 0!==y.zA.CarrierCompanyCode){const t={...this.state.validationErrors};t.CarrierCompanyCode=h.jr(y.zA.CarrierCompanyCode,e),this.setState({validationErrors:t})}},this.handleActiveStatusChange=e=>{try{let t=m().cloneDeep(this.state.modVehicle);t.Active=e,t.Active!==this.state.vehicle.Active&&(t.Remarks=""),this.setState({modVehicle:t})}catch(t){console.log("TractorWithTrailerDetailsComposite:Error occured in handleActiveStatusChange",t)}},this.handleChange=(e,t)=>{let i=m().cloneDeep(this.state.modVehicle);try{i[e]=t;const s={...this.state.validationErrors};i.Active===this.state.vehicle.Active&&(this.state.vehicle.Remarks!==i.Remarks&&""!==i.Remarks||this.state.vehicle.IsBonded===i.IsBonded&&this.state.isBonded&&(s.Remarks=""),""===i.Remarks&&(i.Remarks=this.state.vehicle.Remarks)),"IsBonded"===e&&(i.VehicleCustomsBondNo=null,i.BondExpiryDate=null,s.VehicleCustomsBondNo="",s.BondExpiryDate=""),"RoadTaxNo"!==e&&"RoadTaxNoIssueDate"!==e&&"RoadTaxNoExpiryDate"!==e||(s.RoadTaxNo="",s.RoadTaxNoExpiryDate="",s.RoadTaxNoIssueDate=""),"Height"!==e&&"Length"!==e&&"Width"!==e&&"LWHUOM"!==e||(s.LWHUOM=""),void 0!==y.zA[e]&&(s[e]=h.jr(y.zA[e],t)),this.setState({validationErrors:s,modVehicle:i}),"TerminalCodes"===e&&this.terminalSelectionChange(t)}catch(s){console.log("TractorWithTrailerDetailsComposite:Error occured on handleChange",s)}},this.handleAllTerminalsChange=e=>{try{let t=m().cloneDeep(this.state.modVehicle),i=[...this.state.terminalOptions];t.TerminalCodes=e?i:[],this.setState({modVehicle:t}),this.terminalSelectionChange(t.TerminalCodes)}catch(t){console.log("TractorWithTrailerDetailsComposite:Error occured on handleAllTerminalsChange",t)}},this.saveVehicle=()=>{try{this.setState({saveEnabled:!1});let e=m().cloneDeep(this.state.tempVehicle);""===this.state.vehicle.Code?this.createVehicle(e):this.updateVehicle(e)}catch(e){console.log("RigidTruckWithTrailerComposite : Error in save Rigid truck with trailer")}},this.handleSave=()=>{try{if(Object.values(this.state.validationErrors).every((function(e){return""===e}))){let e=this.fillDetails(),t=[],i=h.pI(this.state.modVehicleAttributeMetaDataList),s=h.pI(this.state.modVehicleTrailerAttributeMetaDataList);if(t.push({vehilceAttributeList:i}),t.push({vehicleTrailerAttributeList:s}),this.validateSave(e,t)){e=this.convertStringtoDecimal(e,t),e=h.pC(A.S.Vehicle,e),e.VehiclePrimeMovers.forEach((e=>e.Primemover=h.pC(A.S.PrimeMover,e.Primemover)));let i=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,s=m().cloneDeep(e);this.setState({showAuthenticationLayout:i,tempVehicle:s},(()=>{!1===i&&this.saveVehicle()}))}else this.setState({saveEnabled:!0})}}catch(e){console.log("Tractor With Trailer DetailsComposite:Error occured on handleSave",e)}},this.handleNextClick=(e,t,i)=>{"rigidTruck"===e&&(this.setState({step1Active:!1,step2Active:!0}),k=i),"trailer"===e&&(this.setState({step2Active:!1,step3Active:!0}),j=i)},this.handleSelectClick=(e,t,i)=>{"rigidTruck"===e&&(this.setState({rigidTruckSelection:[...t]}),k=i),"trailer"===e&&(this.setState({trailerSelection:[...t]}),j=i)},this.handleRigidTruckList=(e,t)=>{k=t,this.setState({rigidTruckSelection:e,isRigidLoaded:!0})},this.handleTrailerList=(e,t)=>{j=t,this.setState({trailerSelection:e,isTrailerLoaded:!0})},this.handleDateTextChange=(e,t,i)=>{try{let s={...this.state.validationErrors},a=m().cloneDeep(this.state.modVehicle);s[e]=i,a[e]=t,this.setState({validationErrors:s,modVehicle:a})}catch(i){console.log("RigidTruckWithTrailerDetailsComposite:Error occured on handleDateTextChange",i)}},this.handleVehicleAttributeDataChange=(e,t)=>{try{let i=[],s=m().cloneDeep(this.state.modVehicleAttributeMetaDataList),a=s.filter((t=>t.TerminalCode===e.TerminalCode));a.length>0&&Array.isArray(a[0].attributeMetaDataList)&&(i=a[0].attributeMetaDataList.filter((t=>t.Code===e.Code))),i.length>0&&(i[0].DefaultValue=t);const l=m().cloneDeep(this.state.vehicleAttributeValidationErrors);l.forEach((i=>{i.TerminalCode===e.TerminalCode&&(i.attributeValidationErrors[e.Code]=h.I5(e,t))})),this.setState({vehicleAttributeValidationErrors:l,modVehicleAttributeMetaDataList:s})}catch(i){console.log("RigidTruckWithTrailerDetailsComposite:Error occured on handleVehicleAttributeDataChange",i)}},this.handleVehicleTrailerAttributeDataChange=(e,t)=>{try{let i=[],s=m().cloneDeep(this.state.modVehicleTrailerAttributeMetaDataList),a=s.filter((t=>t.TerminalCode===e.TerminalCode));a.length>0&&Array.isArray(a[0].attributeMetaDataList)&&(i=a[0].attributeMetaDataList.filter((t=>t.Code===e.Code))),i.length>0&&(i[0].DefaultValue=t);const l=m().cloneDeep(this.state.vehicleTrailerAttributeValidationErrors);l.forEach((i=>{i.TerminalCode===e.TerminalCode&&(i.attributeValidationErrors[e.Code]=h.I5(e,t))})),this.setState({vehicleTrailerAttributeValidationErrors:l,modVehicleTrailerAttributeMetaDataList:s})}catch(i){console.log("RigidTruckWithTrailerDetailsComposite:Error occured on handleVehicleTrailerAttributeDataChange",i)}},this.handleValidationErrorFilter=(e,t)=>{let i=[];return i=e.find((e=>e.TerminalCode===t)),i.attributeValidationErrors},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})}}componentDidMount(){try{h.pJ(this.props.userDetails.EntityResult.IsArchived);let e=!1;void 0===this.props.selectedRow.Common_Code&&(e=!0),this.getAttributes(e),this.getCarrierList(this.props.selectedShareholder),this.getUOMList(),this.IsBonded(),this.getProductTypes()}catch(e){console.log("TractorWithTrailerDetailsComposite:Error occured on componentDidMount",e)}}IsBonded(){T()(d.xAA+"?LookUpTypeCode=Bonding",h.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;if(!0===t.IsSuccess){let e=t.EntityResult["EnableBondingNon-Bonding"];this.setState({isBonded:"TRUE"===e.toUpperCase()})}else this.setState({isBonded:!1}),console.log("Error in get IsBonded: ",t.ErrorList)})),T()(d.xAA+"?LookUpTypeCode=VirtualPreset",h.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess&&(isNaN(parseInt(t.EntityResult.RoadMaximumNumberOfCompartments))||this.setState({maxNumberOfCompartments:parseInt(t.EntityResult.RoadMaximumNumberOfCompartments)}))})).catch((e=>{this.setState({isBonded:!1}),console.log("SealMasterDetailsComposite: Error occurred on get IsBonded",e)}))}getProductTypes(){T()(d.YG_,h.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=h.Zj(t.EntityResult);this.setState({productTypeOptions:e})}}else console.log("Error in getProductTypes:",t.ErrorList)})).catch((e=>{console.log("Error while getting getProductTypes:",e)}))}getUOMList(){T()(d.WFM,h.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult){let e=t.EntityResult.MASS,i=[];e.forEach((e=>{i.push({text:e,value:e})}));let s=t.EntityResult.VOLUME,a=[];s.forEach((e=>{a.push({text:e,value:e})}));let l=t.EntityResult.LENGTH,r=[];l.forEach((e=>{r.push({text:e,value:e})})),this.setState({volumeUOMOptions:a,weightUOMOptions:i,lengthUOMOptions:r})}}else console.log("Error in getUOM:",t.ErrorList)})).catch((e=>{console.log("Error while getting getUOM:",e)}))}getCarrierList(e){T()(d.Xj6+"?ShareholderCode="+e+"&Transportationtype="+u.LY.ROAD,h.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=h.Zj(t.EntityResult);this.setState({carrierOptions:e})}}else console.log("Error in GetCarrierListForRole:",t.ErrorList)})).catch((e=>{console.log("Error while getting Carrier List:",e)}))}componentWillReceiveProps(e){try{if(""!==this.state.vehicle.Code&&void 0===e.selectedRow.Common_Code&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo){this.getVehicle(!0);let e={...this.state.validationErrors};Object.keys(e).forEach((t=>{e[t]=""})),this.setState({validationErrors:e})}}catch(t){console.log("TractorWithTrailerDetailsComposite:Error occured on componentWillReceiveProps",t)}}displayValues(e,t){const{value:i,field:s}=e;return"boolean"===typeof i||"Active"===s?i?(0,f.jsx)(r.Icon,{name:"check",size:"small",color:"green"}):(0,f.jsx)(r.Icon,{name:"close",size:"small",color:"red"}):""===i||null===i||void 0===i?i:"TerminalCodes"===s&&null!==i?this.terminalPopOver(i):void 0!==t&&null!==t&&void 0!==t.DataType&&"DateTime"===t.DataType?new Date(i).toLocaleDateString()+" "+new Date(i).toLocaleTimeString():void 0!==t&&null!==t&&void 0!==t.DataType&&"Date"===t.DataType?new Date(i).toLocaleDateString():i}terminalPopOver(e){return e.split(",").length>2?(0,f.jsx)(r.Popup,{className:"popup-theme-wrap",on:"hover",element:(0,f.jsx)("span",{children:e.split(",").length}),children:(0,f.jsx)(r.Card,{children:(0,f.jsx)(r.Card.Content,{children:e})})}):(0,f.jsx)("span",{children:e})}getAttributes(e){try{T()(d.fKH,h.tW([R.MK,R.bN],this.props.tokenDetails.tokenInfo)).then((t=>{var i=t.data;!0===i.IsSuccess?this.setState({attributeMetaDataList:m().cloneDeep(i.EntityResult),vehicleAttributeValidationErrors:h.Fl(i.EntityResult.vehicle),vehicleTrailerAttributeValidationErrors:h.Fl(i.EntityResult.vehicletrailer)},(()=>this.getVehicle(e))):console.log("Error in getAttributes:")}))}catch(t){console.log("Error while getAttributes:",t)}}getVehicle(e){if(e){let e=[];return I=[],n.ul.VehicleType=u.$O.RigidTruckWithTrailer,void this.setState({vehicle:m().cloneDeep(n.ul),modVehicle:m().cloneDeep(n.ul),trailerSelection:[],rigidTruckSelection:[],isReadyToRender:!0,terminalOptions:e,modVehicleAttributeMetaDataList:[],modVehicleTrailerAttributeMetaDataList:[],saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.add,D.PE)},(()=>{this.props.userDetails.EntityResult.IsEnterpriseNode?this.terminalSelectionChange([]):this.localNodeAttribute()}))}let t=[{key:c.ok,value:void 0===this.props.selectedRow.Common_Code?this.state.modVehicle.Code:this.props.selectedRow.Common_Code}],i={ShareHolderCode:this.props.selectedShareholder,keyDataCode:c.ok,KeyCodes:t};T()(d.jvS,h.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;!0===t.IsSuccess?(null!==t.EntityResult&&(t.EntityResult.MaxLoadableWeight=t.EntityResult.MaxLoadableWeight+t.EntityResult.TareWeight,I=t.EntityResult.VehicleTrailers),this.setState({isReadyToRender:!0,vehicle:m().cloneDeep(t.EntityResult),modVehicle:m().cloneDeep(t.EntityResult),saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.modify,D.PE)},(()=>{this.getTerminalsForCarrier(t.EntityResult.CarrierCompanyCode),this.props.userDetails.EntityResult.IsEnterpriseNode?this.terminalSelectionChange(t.EntityResult.TerminalCodes):this.localNodeAttribute()}))):(n.ul.ShareholderCode=this.props.selectedShareholder,this.setState({modVehicle:m().cloneDeep(n.ul),vehicle:m().cloneDeep(n.ul),isReadyToRender:!0}),console.log("Error in GetVehicle:",t.ErrorList))})).catch((e=>{console.log("Error while getting Vehicle:",e)}))}terminalSelectionChange(e){try{if(void 0!==e&&null!==e){let a=[];var t=[],i=[];t=m().cloneDeep(this.state.attributeMetaDataList),i=m().cloneDeep(this.state.modVehicleAttributeMetaDataList);const l=m().cloneDeep(this.state.vehicleAttributeValidationErrors);var s=m().cloneDeep(this.state.modVehicle);e.forEach((e=>{var l=i.find((t=>t.TerminalCode===e));void 0===l?t.vehicle.forEach((function(t){if(t.TerminalCode===e){var i=s.Attributes.find((t=>t.TerminalCode===e));void 0!==i&&t.attributeMetaDataList.forEach((function(e){var t=i.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),a.push(t)}})):a.push(l)})),i=[],i=a,i=h.nQ(i),l.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.setState({modVehicleAttributeMetaDataList:i,vehicleAttributeValidationErrors:l}),this.setVehicleTrailerAttributes(e)}}catch(a){console.log("RigidTruckWithTrailerDetailsComposite:Error occured on terminalSelectionChange",a)}}setVehicleTrailerAttributes(e){try{let a=[];var t=[],i=[];t=m().cloneDeep(this.state.attributeMetaDataList),i=m().cloneDeep(this.state.modVehicleTrailerAttributeMetaDataList);const l=m().cloneDeep(this.state.vehicleTrailerAttributeValidationErrors);var s=m().cloneDeep(this.state.modVehicle);e.forEach((e=>{var l=i.find((t=>t.TerminalCode===e));void 0===l?t.vehicletrailer.forEach((function(t){if(t.TerminalCode===e){if(null!==s.VehicleTrailers&s.VehicleTrailers.length>0){var i=s.VehicleTrailers[0].Attributes.find((t=>t.TerminalCode===e));void 0!==i&&t.attributeMetaDataList.forEach((function(e){var t=i.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)}))}a.push(t)}})):a.push(l)})),i=[],i=a,i=h.nQ(i),l.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationErrors).forEach((e=>t.attributeValidationErrors[e]=""))})),this.setState({modVehicleTrailerAttributeMetaDataList:i,vehicleTrailerAttributeValidationErrors:l})}catch(a){console.log("RigidTruckWithTrailerDetailsComposite:Error occured on setVehicleTrailerAttributes",a)}}localNodeAttribute(){try{var e=m().cloneDeep(this.state.attributeMetaDataList);Array.isArray(e.vehicle)&&e.vehicle.length>0&&this.terminalSelectionChange([e.vehicle[0].TerminalCode])}catch(t){console.log("RigidTruckWithTrailerDetailsComposite:Error occured on localNodeAttribute",t)}}handleResetAttributeValidationError(){try{var e=m().cloneDeep(this.state.attributeMetaDataList);this.setState({vehicleAttributeValidationErrors:h.Fl(e.vehicle),vehicleTrailerAttributeValidationErrors:h.Fl(e.vehicletrailer)})}catch(t){console.log("RigidTruckWithTrailerDetailsComposite:Error occured on handleReset",t)}}getTerminalsForCarrier(e){if(this.props.userDetails.EntityResult.IsEnterpriseNode){const i=m().cloneDeep(this.state.modVehicle);let s=[...this.state.terminalOptions];i.CarrierCompanyCode=e;try{if(void 0===e)return s=[],i.TerminalCodes=[],this.setState({terminalOptions:s,modVehicle:i}),void this.terminalSelectionChange([]);let t=[{key:c._n,value:e},{key:c.v6,value:u.LY.ROAD}],a={ShareHolderCode:this.props.selectedShareholder,keyDataCode:c._n,KeyCodes:t};T()(d.pm$,h.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;!0===t.IsSuccess&&null!==t.EntityResult&&null!==t.EntityResult.TerminalCodes?(s=[...t.EntityResult.TerminalCodes],this.setState({terminalOptions:s})):(s=[],this.setState({terminalOptions:s}),console.log("Error in GetCarrier:",t.ErrorList));let a={...this.state.vehicle};void 0!==a.Code&&""!==a.Code&&null!==a.Code||(1===s.length?(i.TerminalCodes=[...s],this.terminalSelectionChange(i.TerminalCodes)):(i.TerminalCodes=[],this.terminalSelectionChange([]))),Array.isArray(i.TerminalCodes)&&(i.TerminalCodes=s.filter((e=>i.TerminalCodes.includes(e)))),this.setState({modVehicle:i})})).catch((t=>{s=[],i.TerminalCodes=[],this.setState({terminalOptions:s,modVehicle:i}),console.log("Error while getting Carrier:",t,e)}))}catch(t){s=[],i.TerminalCodes=[],this.setState({terminalOptions:s,modVehicle:i}),console.log("TractowWithTrailerDetailsComposite:Error occured on handleCarrierChange",t)}}else{const t=m().cloneDeep(this.state.modVehicle);t.CarrierCompanyCode=e;const i=[];this.setState({terminalOptions:i,modVehicle:t})}}validateSave(e,t){const i={...this.state.validationErrors};Object.keys(y.zA).forEach((function(t){void 0!==e[t]&&(i[t]=h.jr(y.zA[t],e[t]))})),e.Active!==this.state.vehicle.Active&&""===e.Remarks&&(i.Remarks="Vehicle_RemarksRequired"),this.state.isBonded&&e.IsBonded&&(""!==e.VehicleCustomsBondNo&&null!==e.VehicleCustomsBondNo||(i.VehicleCustomsBondNo="VehicleInfo_VehicleCustomsBondNoError"),""!==e.BondExpiryDate&&null!==e.BondExpiryDate||(i.BondExpiryDate="VehicleInfo_BondExpiryDateError"),e.IsBonded!==this.state.vehicle.IsBonded&&""!==this.state.vehicle.Code&&""===e.Remarks&&(i.Remarks="Vehicle_RemarksRequired")),(null===e.RoadTaxNo||""===e.RoadTaxNo)&&isNaN(Date.parse(e.RoadTaxNoIssueDate))&&isNaN(Date.parse(e.RoadTaxNoExpiryDate))||(null!==e.RoadTaxNo&&""!==e.RoadTaxNo||(i.RoadTaxNo="Vehicle_RoadTaxNoRequired"),isNaN(Date.parse(e.RoadTaxNoIssueDate))&&(i.RoadTaxNoIssueDate="Vehicle_RoadTaxIssRequired"),isNaN(Date.parse(e.RoadTaxNoExpiryDate))&&(i.RoadTaxNoExpiryDate="Vehicle_RoadTaxExpRequired"));let s={messageType:"critical",message:"VehicleInfo_SavedStatus",messageResultDetails:[]};null===e.Height&&null==e.Width&&null===e.Length||null!==e.LWHUOM||(i.LWHUOM="PrimeMover_UOMRequired");let a=0;this.state.rigidTruckSelection.length<=0?s.messageResultDetails.push({keyFields:["Vehicle_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:"Vehicle_RigTrRequired"}):a=this.state.rigidTruckSelection[0].CompCount,this.state.trailerSelection.length<=0?s.messageResultDetails.push({keyFields:["Vehicle_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:"Vehicle_TrailerRequired"}):this.state.trailerSelection.map((e=>{a+=e.CompCount})),this.state.maxNumberOfCompartments<a&&s.messageResultDetails.push({keyFields:["Vehicle_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:"Compartment_limit_Exceeded"});var l=m().cloneDeep(this.state.vehicleAttributeValidationErrors);t.find((function(e){return void 0!==e.vehilceAttributeList})).vehilceAttributeList.forEach((e=>{l.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=h.I5(e,e.DefaultValue)}))}))}));var r=m().cloneDeep(this.state.vehicleTrailerAttributeValidationErrors);t.find((function(e){return void 0!==e.vehicleTrailerAttributeList})).vehicleTrailerAttributeList.forEach((e=>{r.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=h.I5(e,e.DefaultValue)}))}))})),this.setState({validationErrors:i,vehicleAttributeValidationErrors:l,vehicleTrailerAttributeValidationErrors:r});var o=!0;return l.forEach((e=>{if(!o)return o;o=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),o&&r.forEach((e=>{if(!o)return o;o=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),o?(o=Object.values(i).every((function(e){return""===e})),s.messageResultDetails.length>0?(this.props.onSaved(this.state.modVehicle,"update",s),!1):o):o}convertStringtoDecimal(e,t){try{return null!==e.Height&&""!==e.Height&&(e.Height=h.bo(e.Height)),null!==e.Length&&""!==e.Length&&(e.Length=h.bo(e.Length)),null!==e.Width&&""!==e.Width&&(e.Width=h.bo(e.Width)),e=this.fillAttributeDetails(e,t)}catch(i){console.log("convertStringtoDecimal error rigidtruckwithtrailer details",i)}}createVehicle(e){let t=[{key:c.ok,value:e.Code}],i={ShareHolderCode:this.props.selectedShareholder,keyDataCode:c.ok,KeyCodes:t,Entity:e},s={messageType:"critical",message:"VehicleInfo_SavedStatus",messageResultDetails:[{keyFields:["Vehicle_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:""}]};T()(d.h1s,h.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;s.messageType=t.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?(this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.modify,D.PE),showAuthenticationLayout:!1}),this.getVehicle(!1)):(s.messageResultDetails[0].errorMessage=t.ErrorList[0],this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.add,D.PE),showAuthenticationLayout:!1}),console.log("Error in CreateVehicle:",t.ErrorList)),this.props.onSaved(this.state.modVehicle,"add",s)})).catch((e=>{this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.add,D.PE),showAuthenticationLayout:!1}),s.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modVehicle,"add",s)}))}updateVehicle(e){let t=[{key:c.ok,value:e.Code}],i={ShareHolderCode:this.props.selectedShareholder,keyDataCode:c.ok,KeyCodes:t,Entity:e},s={messageType:"critical",message:"VehicleInfo_SavedStatus",messageResultDetails:[{keyFields:["Vehicle_Code"],keyValues:[e.Code],isSuccess:!1,errorMessage:""}]};T()(d.Kas,h.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;s.messageType=t.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?(this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.modify,D.PE),showAuthenticationLayout:!1}),this.getVehicle(!1)):(this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.modify,D.PE),showAuthenticationLayout:!1}),s.messageResultDetails[0].errorMessage=t.ErrorList[0],console.log("Error in UpdateVehicle:",t.ErrorList)),this.props.onSaved(this.state.modVehicle,"update",s)})).catch((e=>{s.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modVehicle,"modify",s),this.setState({saveEnabled:h.ab(this.props.userDetails.EntityResult.FunctionsList,D.i.modify,D.PE),showAuthenticationLayout:!1})}))}fillDetails(){try{let t=m().cloneDeep(this.state.modVehicle);t.ShareholderCode=this.props.selectedShareholder,t.VehicleType=u.$O.RigidTruckWithTrailer,""===t.Height&&(t.Height=null),""===t.Length&&(t.Length=null),""===t.Width&&(t.Width=null),null!==t.Height&&""!==t.Height&&(t.Height=t.Height.toLocaleString()),null!==t.Length&&""!==t.Length&&(t.Length=t.Length.toLocaleString()),null!==t.Width&&""!==t.Width&&(t.Width=t.Width.toLocaleString()),t.TransportationType=u.LY.ROAD;var e=new Date;t.LicenseNoIssueDate=e.getUTCDate(),t.VehicleTrailers=[];let i=0;return this.state.rigidTruckSelection.length>0&&this.state.rigidTruckSelection.forEach((e=>{let s={TrailerCode:null,VehicleCode:null,ShareholderCode:null,CarrierCompanyCode:null,TrailerSeq:null,Trailer:{}};s.TrailerCode=e.Common_Code,s.VehicleCode=t.Code,s.ShareholderCode=t.ShareholderCode,s.CarrierCompanyCode=t.CarrierCompanyCode,s.TrailerSeq=++i,s.Trailer.Code=e.Common_Code,s.Trailer.Name=e.Common_Name,s.Trailer.ShareholderCode=t.ShareholderCode,s.Trailer.TransportationType=u.LY.ROAD,s.Trailer.CarrierCompanyCode=t.CarrierCompanyCode,s.Trailer.TrailerType=u.YH.RIGID_TRAILER,t.VehicleTrailers.push(s)})),this.state.trailerSelection.length>0&&this.state.trailerSelection.forEach((e=>{let s={TrailerCode:null,VehicleCode:null,ShareholderCode:null,CarrierCompanyCode:null,TrailerSeq:null,Trailer:{}};s.TrailerCode=e.Common_Code,s.VehicleCode=t.Code,s.ShareholderCode=t.ShareholderCode,s.CarrierCompanyCode=t.CarrierCompanyCode,s.TrailerSeq=++i,s.Trailer.Code=e.Common_Code,s.Trailer.Name=e.Common_Name,s.Trailer.ShareholderCode=t.ShareholderCode,s.Trailer.TransportationType=u.LY.ROAD,s.Trailer.CarrierCompanyCode=t.CarrierCompanyCode,s.Trailer.TrailerType=u.YH.NON_RIGID_TRAILER,t.VehicleTrailers.push(s)})),t}catch(t){console.log("TractorWithTrailerDetailsComposite:Error occured on fillDetails",t)}}fillAttributeDetails(e,t){try{let i=t.find((function(e){return void 0!==e.vehilceAttributeList})),s=t.find((function(e){return void 0!==e.vehicleTrailerAttributeList})),a=h.SC(i.vehilceAttributeList);e.Attributes=h.Gh(a);let l=h.SC(s.vehicleTrailerAttributeList);return null!==e.VehicleTrailers&e.VehicleTrailers.length>0&&e.VehicleTrailers.forEach((e=>{e.Attributes=h.Gh(l)})),e}catch(i){console.log("RigidTruckWithTrailerDetailsComposite:Error occured on fillAttributeDetails",i)}}render(){const e={carriers:this.state.carrierOptions,productType:this.state.productTypeOptions,unitOfWeight:this.state.weightUOMOptions,unitOfVolume:this.state.volumeUOMOptions,unitOfDimension:this.state.lengthUOMOptions,terminalCodes:this.state.terminalOptions},t=[{fieldName:"Vehicle_LastUpdated",fieldValue:new Date(this.state.modVehicle.LastUpdateTime).toLocaleDateString()+" "+new Date(this.state.modVehicle.LastUpdateTime).toLocaleTimeString()},{fieldName:"Vehicle_LastActiveTime",fieldValue:void 0!==this.state.modVehicle.LastActiveTime&&null!==this.state.modVehicle.LastActiveTime?new Date(this.state.modVehicle.LastActiveTime).toLocaleDateString()+" "+new Date(this.state.modVehicle.LastActiveTime).toLocaleTimeString():""},{fieldName:"Vehicle_CreateTime",fieldValue:new Date(this.state.modVehicle.CreatedTime).toLocaleDateString()+" "+new Date(this.state.modVehicle.CreatedTime).toLocaleTimeString()}];return this.state.isReadyToRender?(0,f.jsx)(x.TranslationConsumer,{children:i=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(r.Accordion,{children:(0,f.jsx)(r.Accordion.Content,{title:i("Step1_RigidTruck"),active:this.state.step1Active,onClick:()=>this.setState({step1Active:!this.state.step1Active}),children:(0,f.jsx)("div",{className:"borderTable",children:(0,f.jsx)(a.default,{rigidTruckWithTrailer:true,rigidTruckSelection:I,handleNextClick:this.handleNextClick,getRigidTruckList:this.handleRigidTruckList,handleSelectClick:this.handleSelectClick,rigidTruckShareholder:this.props.selectedShareholder},"rigidTruck")})})}),this.state.rigidTruckSelection.length>0&&!this.state.step1Active?(0,f.jsx)(o.bQ,{data:this.state.rigidTruckSelection,selection:this.state.rigidTruckSelection,selectionMode:"multiple",showHeader:!0,children:k.map((e=>(0,f.jsx)(o.bQ.Column,{initialWidth:e.Width,field:e.Name,header:i(e.Name),renderer:t=>this.displayValues(t,e)},e.Name)))}):"",""===this.state.vehicle.Code||this.state.isRigidLoaded?"":(0,f.jsx)("div",{className:"authLoading",style:{height:"80px"},children:(0,f.jsx)(r.Loader,{style:{top:"10px"},text:" "})}),(0,f.jsx)(r.Accordion,{children:(0,f.jsx)(r.Accordion.Content,{title:i("Step2_Trailer"),active:this.state.step2Active,onClick:()=>this.setState({step2Active:!this.state.step2Active}),children:(0,f.jsx)("div",{className:"borderTable",children:(0,f.jsx)(l.default,{vehicleWithTrailer:true,handleNextClick:this.handleNextClick,getTrailerList:this.handleTrailerList,trailerSelection:I,vehicleShareholder:this.props.selectedShareholder,handleSelectClick:this.handleSelectClick})})})}),this.state.trailerSelection.length>0&&!this.state.step2Active?(0,f.jsx)(o.bQ,{data:this.state.trailerSelection,selection:this.state.trailerSelection,selectionMode:"multiple",showHeader:!0,children:j.map((e=>(0,f.jsx)(o.bQ.Column,{initialWidth:e.Width,field:e.Name,header:i(e.Name),renderer:t=>this.displayValues(t,e)},e.Name)))}):"",""===this.state.vehicle.Code||this.state.isTrailerLoaded?"":(0,f.jsx)("div",{className:"authLoading",style:{height:"80px"},children:(0,f.jsx)(r.Loader,{style:{top:"10px"},text:" "})}),(0,f.jsx)(r.Accordion,{children:(0,f.jsx)(r.Accordion.Content,{title:i("Step3_Vehicle"),active:this.state.step3Active,onClick:()=>this.setState({step3Active:!this.state.step3Active}),children:(0,f.jsx)("div",{className:"borderTable",children:(0,f.jsxs)("div",{children:[(0,f.jsx)(v.A,{children:(0,f.jsx)(E.A,{entityCode:this.state.vehicle.Code,newEntityName:"VehicleList_title",popUpContents:t})}),(0,f.jsx)(v.A,{children:(0,f.jsx)("div",{className:"detailsContainer",children:(0,f.jsxs)("div",{className:"row",children:[(0,f.jsx)(S.A,{data:this.state.vehicle,modData:this.state.modVehicle,validationErrors:this.state.validationErrors,listOptions:e,onFieldChange:this.handleChange,onDateTextChange:this.handleDateTextChange,onAllTerminalsChange:this.handleAllTerminalsChange,onCarrierChange:this.handleCarrierChange,onActiveStatusChange:this.handleActiveStatusChange,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,attributeValidationErrors:this.state.vehicleAttributeValidationErrors,modAttributeMetaDataList:this.state.modVehicleAttributeMetaDataList,onAttributeDataChange:this.handleVehicleAttributeDataChange,isBonded:this.state.isBonded}),this.state.modVehicleTrailerAttributeMetaDataList.length>0?(0,f.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,f.jsx)(r.Accordion,{children:(0,f.jsx)(r.Accordion.Content,{className:"attributeAccordian",title:i("VEHICLETRAILER_Attributes"),children:this.state.modVehicleTrailerAttributeMetaDataList.length>0?this.state.modVehicleTrailerAttributeMetaDataList.map((e=>(0,f.jsx)(v.A,{children:(0,f.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,f.jsx)(r.Accordion,{children:(0,f.jsx)(r.Accordion.Content,{className:"attributeAccordian",title:this.props.userDetails.EntityResult.IsEnterpriseNode?e.TerminalCode+" - "+i("Attributes_Header"):i("Attributes_Header"),children:(0,f.jsx)(L.n,{selectedAttributeList:e.attributeMetaDataList,handleCellDataEdit:this.handleVehicleTrailerAttributeDataChange,attributeValidationErrors:this.handleValidationErrorFilter(this.state.vehicleTrailerAttributeValidationErrors,e.TerminalCode)})})})})}))):null})})}):null]})})}),(0,f.jsx)(v.A,{children:(0,f.jsx)(V.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.showAuthenticationLayout?(0,f.jsx)(N.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.vehicle.Code?D.i.add:D.i.modify,functionGroup:D.PE,handleOperation:this.saveVehicle,handleClose:this.handleAuthenticationClose}):null]})})})}),this.state.step3Active?"":(0,f.jsx)("div",{className:"vehicleBackbtn",children:(0,f.jsx)(r.Button,{className:"backButton",content:i("Back"),onClick:this.props.onBack})})]})}):(0,f.jsx)(b.A,{message:"Loading"})}}const M=(0,g.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(O)},31045:(e,t,i)=>{i.r(t),i.d(t,{default:()=>L});var s=i(65043),a=i(66554),l=i(19380),r=i(70579);function o(e){let{tableData:t,columnDetails:i,pageSize:s,exportRequired:a,exportFileName:o,columnPickerRequired:n,columnGroupingRequired:h,selectionRequired:c,terminalsToShow:d,selectedItems:u,onSelectionChange:p,onRowClick:m,parentComponent:g}=e;return(0,r.jsx)(l.A,{data:t,columns:i,rowsPerPage:s,exportRequired:a,exportFileName:o,columnPickerRequired:n,columnGroupingRequired:h,selectionRequired:c,selectedItems:u,onSelectionHandle:p,onRowClick:m,parentComponent:g,terminalsToShow:d})}var n=i(40854),h=i.n(n),c=i(7523),d=i(72067),u=i(72711),p=i(14159),m=i(11981),g=i(69062),C=i(65187),T=i(97508),v=i(93779),y=i(80312),D=i(48754),S=(i(92342),i(67907)),V=i(40252),E=i(80297),x=i(39424),b=i(62900);class R extends s.PureComponent{constructor(){super(...arguments),this.state={isDetails:!1,isReadyToRender:!1,isDetailsModified:!1,operationsVisibilty:{add:!1,delete:!1,shareholder:!0},selectedRow:{},selectedItems:[],data:{},trailerKPIList:[],showAuthenticationLayout:!1},this.componentName=(this.props.vehicleWithTrailer?"vehicleWithTrailer":"")+"TrailerComponent",this.handleAdd=()=>{try{let e={...this.state.operationsVisibilty};e.delete=!1,e.add=!1,e.shareholder=!1,this.setState({isDetails:!0,selectedRow:{},operationsVisibilty:e})}catch(e){console.log("TrailerComposite:Error occured on handleAdd",e)}},this.handleShareholderSelectionChange=e=>{try{let{operationsVisibilty:t}={...this.state};t.delete=!1,this.setState({selectedShareholder:e,isReadyToRender:!1,selectedItems:[],operationsVisibilty:t}),this.getTrailerList(e),void 0!==this.props.vehicleWithTrailer&&!1!==this.props.vehicleWithTrailer||this.getKPIList(e)}catch(t){console.log("TrailerComposite:Error occured on handleShareholderSelectionChange",t)}},this.handleDelete=()=>{try{let i={...this.state.operationsVisibilty};i.delete=!1,this.setState({operationsVisibilty:i});for(var e=[],t=0;t<this.state.selectedItems.length;t++){let i=this.state.selectedShareholder,s=this.state.selectedItems[t].Common_Code,a=this.state.selectedItems[t].TrailerList_Carrier,l={keyDataCode:0,ShareHolderCode:i,KeyCodes:[{Key:v.UT,Value:s},{key:v._n,Value:a}]};e.push(l)}h()(d.jt2,g.tW(e,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data,s=t.IsSuccess;if(null!==t.ResultDataList&&void 0!==t.ResultDataList){s=t.ResultDataList.filter((function(e){return!e.IsSuccess})).length!==t.ResultDataList.length}let a=g.Cy(t,"TrailerDetails_DeleteStatus",["TrailerCode"]);s?(this.setState({isReadyToRender:!1,showAuthenticationLayout:!1}),this.getTrailerList(this.state.selectedShareholder),void 0!==this.props.vehicleWithTrailer&&!1!==this.props.vehicleWithTrailer||this.getKPIList(this.state.selectedShareholder),i.delete=!1,this.setState({selectedItems:[],operationsVisibilty:i,selectedRow:{},showAuthenticationLayout:!1})):(i.delete=!0,this.setState({operationsVisibilty:i,showAuthenticationLayout:!1})),a.messageResultDetails.forEach((e=>{e.keyFields.length>0&&(e.keyFields[0]="Trailer_Code")})),(0,p.toast)((0,r.jsx)(C.A,{children:(0,r.jsx)(m.A,{notificationMessage:a})}),{autoClose:"success"===a.messageType&&1e4})})).catch((e=>{throw e}))}catch(i){console.log("TrailerComposite:Error occured on handleDelet",i)}},this.handleRowClick=e=>{try{if(void 0===this.props.vehicleWithTrailer){let t={...this.state.operationsVisibilty};t.add=g.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.add,y.eQ),t.delete=g.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.remove,y.eQ),t.shareholder=!1,this.setState({isDetails:!0,selectedRow:e,selectedItems:[e],operationsVisibilty:t})}}catch(t){console.log("TrailerComposite:Error occured on Row click",t)}},this.handleSelection=e=>{try{let t={...this.state.operationsVisibilty};t.delete=e.length>0&&g.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.remove,y.eQ),this.setState({selectedItems:e,operationsVisibilty:t},(()=>{!0===this.props.vehicleWithTrailer&&this.props.handleSelectClick("trailer",this.state.selectedItems,this.state.data.Column)}))}catch(t){console.log("TrailerComposite:Error occured on handleSelection",t)}},this.savedEvent=(e,t,i)=>{try{let a={...this.state.operationsVisibilty};if("success"===i.messageType&&(a.add=g.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.add,y.eQ),a.delete=g.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.remove,y.eQ),this.setState({isDetailsModified:!0,operationsVisibilty:a})),"success"===i.messageType&&"add"===t){var s=[{Common_Code:e.Code,TrailerList_Carrier:e.CarrierCompanyCode,Common_Status:e.Active,Common_Shareholder:e.ShareholderCode}];this.setState({selectedItems:s})}(0,p.toast)((0,r.jsx)(C.A,{children:(0,r.jsx)(m.A,{notificationMessage:i})}),{autoClose:"success"===i.messageType&&1e4})}catch(a){console.log("TrailerComposite:Error occured on savedEvent",a)}},this.handleBack=()=>{try{let e={...this.state.operationsVisibilty};e.add=g.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.add,y.eQ),e.delete=!1,e.shareholder=!0,this.setState({isDetails:!1,selectedRow:{},selectedItems:[],operationsVisibilty:e,isReadyToRender:!1}),this.getTrailerList(this.state.selectedShareholder),void 0!==this.props.vehicleWithTrailer&&!1!==this.props.vehicleWithTrailer||this.getKPIList(this.state.selectedShareholder)}catch(e){console.log("TrailerComposite:Error occured on Back click",e)}},this.componentWillUnmount=()=>{g.D6(this.componentName+"GridState"),window.removeEventListener("beforeunload",(()=>g.D6(this.componentName+"GridState")))},this.handleNextClick=()=>{this.props.handleNextClick("trailer",this.state.selectedItems,this.state.data.Column)},this.authenticateDelete=()=>{try{let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showAuthenticationLayout:e}),!1===e&&this.handleDelete()}catch(e){console.log("TrailerComposite : Error in authenticateDelete")}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})}}getKPIList(e){if(!0===g.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.view,y.bL)){var t={message:"",messageType:"critical",messageResultDetails:[]};let i={PageName:x.WK,InputParameters:[{key:"ShareholderCode",value:e}]};h()(d.dxq,g.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{var i=e.data;!0===i.IsSuccess?this.setState({trailerKPIList:i.EntityResult.ListKPIDetails}):(this.setState({trailerKPIList:[]}),console.log("Error in Trailer KPIList:",i.ErrorList),t.messageResultDetails.push({keyFields:[],keyValues:[],isSuccess:!1,errorMessage:i.ErrorList[0]})),t.messageResultDetails.length>0&&(0,p.toast)((0,r.jsx)(C.A,{children:(0,r.jsx)(m.A,{notificationMessage:t})}),{autoClose:"success"===t.messageType&&1e4})})).catch((e=>{console.log("Error while getting trailer KPIList:",e)}))}}getTrailerList(e){let t=c.LY.ROAD;h()(d.nxy+"?ShareholderCode="+e+"&Transportationtype="+t,g.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;if(!0===t.IsSuccess){if(this.setState({data:t.EntityResult,isReadyToRender:!0}),!0===this.props.vehicleWithTrailer&&this.props.trailerSelection.length>0){let e=this.props.trailerSelection;if(e.length>0){let i=[];e.forEach((e=>{let s=t.EntityResult.Table.find((t=>t.Common_Code===e.Trailer.Code));void 0!==s&&i.push(s)})),this.setState({selectedItems:i}),this.props.getTrailerList(i,t.EntityResult.Column)}}}else this.setState({data:{},isReadyToRender:!0}),console.log("Error in GetTrailerListForRole:",t.ErrorList)})).catch((e=>{this.setState({data:{},isReadyToRender:!0}),console.log("Error while getting Trailer List:",e)}))}componentDidMount(){window.addEventListener("beforeunload",(()=>g.D6(this.componentName+"GridState")));try{g.pJ(this.props.userDetails.EntityResult.IsArchived);let e={...this.state.operationsVisibilty};e.add=g.ab(this.props.userDetails.EntityResult.FunctionsList,y.i.add,y.eQ);let t=this.props.userDetails.EntityResult.PrimaryShareholder;!0===this.props.vehicleWithTrailer&&(t=this.props.vehicleShareholder),this.setState({operationsVisibilty:e,selectedShareholder:t}),this.getTrailerList(t),void 0!==this.props.vehicleWithTrailer&&!1!==this.props.vehicleWithTrailer||this.getKPIList(t)}catch(e){console.log("TrailerComposite:Error occured on ComponentDidMount",e)}}componentWillReceiveProps(e){if(!0===e.vehicleWithTrailer&&e.trailerSelection.length>0){let t=e.trailerSelection;if(t.length>0){let e=[];t.forEach((t=>{let i=this.state.data.Table.find((e=>e.Common_Code===t.Trailer.Code));void 0!==i&&e.push(i)})),this.setState({selectedItems:e}),this.props.getTrailerList(e,this.state.data.Column)}}else!0===e.vehicleWithTrailer&&0===e.trailerSelection.length&&this.setState({selectedItems:[]})}render(){let e=!0,t="globalLoader";return!0===this.props.vehicleWithTrailer&&(e=!1,t="nestedList"),(0,r.jsx)(S.TranslationConsumer,{children:i=>(0,r.jsxs)("div",{children:[(0,r.jsx)(C.A,{children:void 0===this.props.vehicleWithTrailer?(0,r.jsx)(a.$,{operationsVisibilty:this.state.operationsVisibilty,breadcrumbItem:this.props.activeItem,shareholders:this.props.userDetails.EntityResult.ShareholderList,selectedShareholder:this.state.selectedShareholder,onShareholderChange:this.handleShareholderSelectionChange,onDelete:this.authenticateDelete,onAdd:this.handleAdd,handleBreadCrumbClick:this.props.handleBreadCrumbClick}):(0,r.jsx)(r.Fragment,{children:this.state.isDetails?"":(0,r.jsxs)("div",{className:"vehicleDataTableHeading",children:[(0,r.jsx)("div",{className:"col col-lg-10 dataTableHeadingPadding",children:(0,r.jsx)("h5",{children:i("Select_Trailers")})}),(0,r.jsx)("div",{className:"col col-lg-1 vehicleDataTableIcon",children:(0,r.jsx)("div",{className:(this.state.operationsVisibilty.add?"iconCircle ":"iconCircleDisable ")+"iconblock",onClick:()=>{this.state.operationsVisibilty.add&&this.handleAdd()},children:(0,r.jsx)(u.Icon,{root:"common",name:"badge-plus",size:"small",color:"white"})})})]})})}),this.state.isDetails?(0,r.jsx)(C.A,{children:(0,r.jsx)(D.default,{selectedRow:this.state.selectedRow,onBack:this.handleBack,onSaved:this.savedEvent,selectedShareholder:this.state.selectedShareholder},"TrailerDetails")}):this.state.isReadyToRender?(0,r.jsxs)("div",{children:[!0===this.props.vehicleWithTrailer?"":(0,r.jsx)(C.A,{children:(0,r.jsx)("div",{className:"kpiSummaryContainer",children:(0,r.jsx)(E.A,{kpiList:this.state.trailerKPIList,pageName:"Trailer"})})}),(0,r.jsxs)(C.A,{children:[(0,r.jsx)(o,{tableData:this.state.data.Table,columnDetails:this.state.data.Column,pageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,exportRequired:!this.props.vehicleWithTrailer,exportFileName:"TrailerList.xlsx",columnPickerRequired:!this.props.vehicleWithTrailer,columnGroupingRequired:!this.props.vehicleWithTrailer,selectionRequired:!0,terminalsToShow:this.props.userDetails.EntityResult.PageAttibutes.NoOfTerminalsToShow,selectedItems:this.state.selectedItems,onRowClick:this.handleRowClick,onSelectionChange:this.handleSelection,fillPage:e,parentComponent:this.componentName}),!0===this.props.vehicleWithTrailer?(0,r.jsx)("div",{className:"vehicleNextButton",children:(0,r.jsx)(u.Button,{onClick:this.handleNextClick,children:i("Common_Next")})}):""]})]}):(0,r.jsx)(V.A,{loadingClass:t,message:"Loading"}),this.state.showAuthenticationLayout?(0,r.jsx)(b.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:y.i.remove,functionGroup:y.eQ,handleClose:this.handleAuthenticationClose,handleOperation:this.handleDelete}):null,!0===this.props.vehicleWithTrailer?"":(0,r.jsx)(C.A,{children:(0,r.jsx)(p.ToastContainer,{hideProgressBar:!0,closeOnClick:!1,closeButton:!0,newestOnTop:!0,position:"bottom-right",toastClassName:"toast-notification-wrap"})})]})})}}const L=(0,T.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(R)},96935:(e,t,i)=>{i.d(t,{A:()=>u});i(65043);var s=i(72711),a=i(67907),l=i(24904),r=i(7523),o=i(35861),n=i(65187),h=i(85800),c=i(69062),d=i(70579);function u(e){let{data:t,modData:i,onFieldChange:u,validationErrors:p,listOptions:m,onDateTextChange:g,onAllTerminalsChange:C,onActiveStatusChange:T,onCarrierChange:v,children:y,isEnterpriseNode:D,modAttributeMetaDataList:S,attributeValidationErrors:V,onAttributeDataChange:E,isBonded:x,hazardousEnabled:b}=e;const R=(e,t)=>{let i=[];return i=e.find((e=>e.TerminalCode===t)),i.attributeValidationErrors},[L]=(0,a.useTranslation)();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:i.Code,label:L("Vehicle_Code"),indicator:"required",disabled:""!==t.Code,onChange:e=>u("Code",e),error:L(p.Code),reserveSpace:!1})}),(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:i.Name,label:L("Vehicle_Name"),indicator:"required",onChange:e=>u("Name",e),error:L(p.Name,{label:L("Vehicle_Name")}),reserveSpace:!1})}),(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.Description?"":i.Description,label:L("Vehicle_Desc"),onChange:e=>u("Description",e),error:L(p.Description),reserveSpace:!1})}),(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("Vehicle_CarrierCompany"),value:i.CarrierCompanyCode,options:m.carriers,onChange:e=>{v(e)},indicator:"required",error:L(p.CarrierCompanyCode),reserveSpace:!1,disabled:""!==t.Code,search:!0,noResultsMessage:L("noResultsMessage")})}),i.VehicleType!==r.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("Vehicle_ProductType"),value:i.ProductType,options:m.productType,onChange:e=>{u("ProductType",e)},indicator:"required",error:L(p.ProductType),reserveSpace:!1,search:!0,noResultsMessage:L("noResultsMessage")})}):"",y,(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.LicenseNo?"":i.LicenseNo,label:L("Vehicle_LicenseNo"),indicator:i.VehicleType!==r.$O.NonFillingVehicle?"required":"",onChange:e=>u("LicenseNo",e),error:L(p.LicenseNo),reserveSpace:!1})}),(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.DatePicker,{fluid:!0,value:null===i.LicenseNoExpiryDate?"":(0,c.OL)(i.LicenseNoExpiryDate),displayFormat:(0,o.F1)(),label:L("Vehicle_LicenseExpiry"),showYearSelector:"true",indicator:i.VehicleType!==r.$O.NonFillingVehicle||i.VehicleType===r.$O.NonFillingVehicle&&null!==i.LicenseNo&&""!==i.LicenseNo.trim()?"required":"",disablePast:!0,onChange:e=>u("LicenseNoExpiryDate",e),onTextChange:(e,t)=>{g("LicenseNoExpiryDate",e,t)},error:L(p.LicenseNoExpiryDate),reserveSpace:!1})}),(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.RoadTaxNo?"":i.RoadTaxNo,label:L("Vehicle_RoadTaxNo"),indicator:null!==i.RoadTaxNo&&""!==i.RoadTaxNo.trim()||!isNaN(Date.parse(i.RoadTaxNoIssueDate))||!isNaN(Date.parse(i.RoadTaxNoExpiryDate))?"required":"",onChange:e=>u("RoadTaxNo",e),error:L(p.RoadTaxNo),reserveSpace:!1})}),(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.DatePicker,{fluid:!0,value:null===i.RoadTaxNoIssueDate?"":(0,c.OL)(i.RoadTaxNoIssueDate),displayFormat:(0,o.F1)(),label:L("Vehicle_RoadTaxIssue"),showYearSelector:"true",indicator:null!==i.RoadTaxNo&&""!==i.RoadTaxNo.trim()||!isNaN(Date.parse(i.RoadTaxNoIssueDate))||!isNaN(Date.parse(i.RoadTaxNoExpiryDate))?"required":"",onChange:e=>u("RoadTaxNoIssueDate",e),onTextChange:(e,t)=>{g("RoadTaxNoIssueDate",e,t)},error:L(p.RoadTaxNoIssueDate),reserveSpace:!1})}),(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.DatePicker,{fluid:!0,value:null===i.RoadTaxNoExpiryDate?"":(0,c.OL)(i.RoadTaxNoExpiryDate),displayFormat:(0,o.F1)(),label:L("Vehicle_RoadTaxExpiry"),showYearSelector:"true",indicator:null!==i.RoadTaxNo&&""!==i.RoadTaxNo.trim()||!isNaN(Date.parse(i.RoadTaxNoIssueDate))||!isNaN(Date.parse(i.RoadTaxNoExpiryDate))?"required":"",disablePast:!0,onChange:e=>u("RoadTaxNoExpiryDate",e),onTextChange:(e,t)=>{g("RoadTaxNoExpiryDate",e,t)},error:L(p.RoadTaxNoExpiryDate),reserveSpace:!1})}),(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.Owner?"":i.Owner,label:L("Vehicle_owner"),onChange:e=>u("Owner",e),error:L(p.Owner),reserveSpace:!1})}),i.VehicleType!==r.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.TareWeight?"":i.TareWeight.toLocaleString(),label:L("Vehicle_Tareweight"),indicator:i.VehicleType!==r.$O.RigidTruck?null:"required",onChange:e=>u("TareWeight",e),error:L(p.TareWeight,{label:L("Vehicle_Tareweight")}),disabled:i.VehicleType!==r.$O.RigidTruck,reserveSpace:!1})}):"",i.VehicleType!==r.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.MaxLoadableWeight?"":i.MaxLoadableWeight.toLocaleString(),label:L("Vehicle_MaxLoadWeight"),indicator:i.VehicleType!==r.$O.RigidTruck?null:"required",onChange:e=>u("MaxLoadableWeight",e),error:L(p.MaxLoadableWeight,{label:L("Vehicle_MaxLoadWeight")}),disabled:i.VehicleType!==r.$O.RigidTruck,reserveSpace:!1})}):"",i.VehicleType!==r.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("Vehicle_UOMWeight"),value:i.WeightUOM,options:m.unitOfWeight,onChange:e=>{u("WeightUOM",e)},indicator:i.VehicleType!==r.$O.RigidTruck?null:"required",error:L(p.WeightUOM),reserveSpace:!1,search:!0,noResultsMessage:L("noResultsMessage"),disabled:i.VehicleType!==r.$O.RigidTruck})}):"",i.VehicleType!==r.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.Height?"":i.Height.toLocaleString(),label:L("Vehicle_height"),onChange:e=>u("Height",e),error:L(p.Height,{label:L("Vehicle_height")}),reserveSpace:!1})}):"",i.VehicleType!==r.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.Width?"":i.Width.toLocaleString(),label:L("Vehicle_Width"),onChange:e=>u("Width",e),error:L(p.Width,{label:L("Vehicle_Width")}),reserveSpace:!1})}):"",i.VehicleType!==r.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.Length?"":i.Length.toLocaleString(),label:L("Vehicle_Length"),onChange:e=>u("Length",e),error:L(p.Length,{label:L("Vehicle_Length")}),reserveSpace:!1})}):"",i.VehicleType!==r.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("Vehicle_UOMDimemsion"),value:i.LWHUOM,options:(0,o.r4)(m.unitOfDimension,L("Common_Select")),onChange:e=>{u("LWHUOM",e)},error:L(p.LWHUOM),reserveSpace:!1,search:!0,noResultsMessage:L("noResultsMessage")})}):"",i.VehicleType!==r.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.MaxLoadableVolume?"":i.MaxLoadableVolume.toLocaleString(),label:L("Vehicle_MaxLoadVolume"),onChange:e=>u("MaxLoadableVolume",e),error:L(p.MaxLoadableVolume),reserveSpace:!1,disabled:!0})}):"",i.VehicleType!==r.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("Vehicle_UOMVolume"),value:i.VolumeUOM,options:m.unitOfVolume,onChange:e=>{u("VolumeUOM",e)},error:L(p.VolumeUOM),reserveSpace:!1,disabled:!0})}):"",x&&i.VehicleType!==r.$O.NonFillingVehicle?(0,d.jsxs)("div",{className:"col-12 col-md-6 col-lg-4",children:[(0,d.jsxs)("div",{className:"ui single-input fluid disabled",style:{width:"30%",float:"left"},children:[(0,d.jsx)("div",{class:"ui input-label",children:(0,d.jsx)("span",{className:"input-label-message",children:L("VehicleInfo_Bonded")})}),(0,d.jsx)("div",{className:"input-wrap",children:(0,d.jsx)(s.Checkbox,{onChange:e=>u("IsBonded",e),checked:i.IsBonded})})]}),i.IsBonded&&i.VehicleType!==r.$O.NonFillingVehicle?(0,d.jsx)("div",{style:{width:"70%",float:"right"},children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.VehicleCustomsBondNo?"":i.VehicleCustomsBondNo,onChange:e=>u("VehicleCustomsBondNo",e),label:L("VehicleInfo_VehicleCustomsBondNo"),reserveSpace:!1,error:L(p.VehicleCustomsBondNo),indicator:i.IsBonded?"required":""})}):""]}):"",i.IsBonded&&i.VehicleType!==r.$O.NonFillingVehicle?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.DatePicker,{fluid:!0,value:null===i.BondExpiryDate?"":(0,c.OL)(i.BondExpiryDate),displayFormat:(0,o.F1)(),label:L("VehicleInfo_BondExpiryDate"),showYearSelector:"true",indicator:i.IsBonded?"required":"",disablePast:!0,onChange:e=>u("BondExpiryDate",e),onTextChange:(e,t)=>{g("BondExpiryDate",e,t)},error:L(p.BondExpiryDate),reserveSpace:!1})}):"",b&&i.VehicleType===r.$O.RigidTruck?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,d.jsx)("div",{style:{width:"48%"},children:(0,d.jsx)(s.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("FP_HazardousCategory"),value:null===i.HazardousCategory?"":i.HazardousCategory,options:(0,o.r4)(m.hazardousTankerCategoryOptions,L("Common_Select")),onChange:e=>u("HazardousCategory",e),reserveSpace:!1,search:!0,noResultsMessage:L("noResultsMessage"),error:L(p.HazardousCategory)})}),(0,d.jsx)("div",{style:{width:"48%"},children:(0,d.jsx)(s.DatePicker,{fluid:!0,value:null===i.HazardousLicenseExpiry?"":(0,c.OL)(i.HazardousLicenseExpiry),displayFormat:(0,o.F1)(),label:L("DriverInfo_HazardousLicExpiry"),disablePast:!0,showYearSelector:"true",onChange:e=>u("HazardousLicenseExpiry",e),onTextChange:(e,t)=>{g("HazardousLicenseExpiry",e,t)},error:L(p.HazardousLicenseExpiry),reserveSpace:!1})})]})}):"",(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Select,{fluid:!0,placeholder:L("Common_Select"),label:L("Vehicle_Status"),value:i.Active,options:[{text:L("ViewShipment_Ok"),value:!0},{text:L("ViewShipmentStatus_Inactive"),value:!1}],onChange:e=>T(e)})}),(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(s.Input,{fluid:!0,value:null===i.Remarks?"":i.Remarks,label:L("Vehicle_Remarks"),onChange:e=>u("Remarks",e),indicator:i.Active!==t.Active||""!==t.Code&&x&&i.IsBonded&&i.IsBonded!==t.IsBonded?"required":"",error:L(p.Remarks),reserveSpace:!1})}),D?(0,d.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,d.jsx)(l.y,{terminalList:m.terminalCodes,selectedTerminal:i.TerminalCodes,error:L(p.TerminalCodes),onFieldChange:u,onCheckChange:C})}):"",i.VehicleType!==r.$O.NonFillingVehicle?(0,d.jsx)("div",{}):"",i.VehicleType===r.$O.NonFillingVehicle?S.length>0?S.map((e=>(0,d.jsx)(n.A,{children:(0,d.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,d.jsx)(s.Accordion,{children:(0,d.jsx)(s.Accordion.Content,{className:"attributeAccordian",title:D?e.TerminalCode+" - "+L("Attributes_Header"):L("Attributes_Header"),children:(0,d.jsx)(h.n,{selectedAttributeList:e.attributeMetaDataList,handleCellDataEdit:E,attributeValidationErrors:R(V,e.TerminalCode)})})})})}))):null:S.length>0?(0,d.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,d.jsx)(s.Accordion,{children:(0,d.jsx)(s.Accordion.Content,{className:"attributeAccordian",title:L("VEHICLE_Attributes"),children:S.length>0?S.map((e=>(0,d.jsx)(n.A,{children:(0,d.jsx)("div",{className:"col-12 col-md-12 col-lg-12",children:(0,d.jsx)(s.Accordion,{children:(0,d.jsx)(s.Accordion.Content,{className:"attributeAccordian",title:D?e.TerminalCode+" - "+L("Attributes_Header"):L("Attributes_Header"),children:(0,d.jsx)(h.n,{selectedAttributeList:e.attributeMetaDataList,handleCellDataEdit:E,attributeValidationErrors:R(V,e.TerminalCode)})})})})}))):null})})}):null]})}u.defaultProps={listOptions:{carriers:[],productType:[],unitOfWeight:[],unitOfVolume:[],unitOfDimension:[],terminalCodes:[],hazardousTankerCategoryOptions:[]},isEnterpriseNode:!1,hazardousEnabled:!1}}}]);
//# sourceMappingURL=6624.69a28500.chunk.js.map