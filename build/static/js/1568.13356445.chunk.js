"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[1568,3235],{21568:(e,t,s)=>{s.r(t),s.d(t,{default:()=>V});var i=s(65043),o=s(72711),a=s(67907),n=s(65187),l=s(7523),r=s(70579);class c extends i.Component{constructor(){super(...arguments),this.state={isFolded:!1},this.switchFold=()=>{this.setState({isFolded:!this.state.isFolded})}}render(){let e="hse-inspection-drawer-header";this.props.status===l.P6.PASS?e+=" hse-inspection-drawer-header-pass":this.props.status===l.P6.FAIL&&(e+=" hse-inspection-drawer-header-failure");const t=[];for(let i of this.props.inspectedItems)t.push((0,r.jsx)(a.TranslationConsumer,{children:e=>(0,r.jsxs)("div",{className:"hse-inspection-drawer-question",children:[(0,r.jsx)("div",{className:"hse-inspection-drawer-question-severity \n              ".concat("0"===i.Severity?"severity-0":"severity-1")}),(0,r.jsx)("div",{className:"hse-inspection-drawer-question-block-1",children:(0,r.jsx)(o.Checkbox,{checked:i.Status,onChange:e=>this.props.onChange(i.ID,"Status",e),disabled:!this.props.isEditable})}),(0,r.jsxs)("div",{className:"hse-inspection-drawer-question-block-2"+(""===i.LastUpdatedTime?" hse-inspection-drawer-question-block-2-no-time":""),children:[(0,r.jsx)("div",{children:i.LocalizedText}),(0,r.jsx)(o.Input,{placeholder:e("Vehicle_Remarks"),value:i.Remarks,onChange:e=>this.props.onChange(i.ID,"Remarks",e),disabled:!this.props.isEditable})]}),""===i.LastUpdatedTime?null:(0,r.jsxs)("div",{className:"hse-inspection-drawer-question-block-3",children:[(0,r.jsx)("div",{className:"hse-inspection-drawer-question-last-updated",children:(0,r.jsx)(o.Icon,{root:"Common",name:"calendar",size:"large"})}),(0,r.jsxs)("div",{className:"hse-inspection-drawer-question-last-updated",children:[(0,r.jsx)("div",{children:e("Common_LastUpdated")}),(0,r.jsx)("div",{children:new Date(i.LastUpdatedTime).toLocaleString()})]})]})]})},i.ID));let s;switch(this.props.transportationType){case l.LY.ROAD:s=" icon-Road";break;case l.LY.MARINE:s=" icon-Marine";break;case l.LY.RAIL:s=" icon-Rail";break;case l.LY.PIPELINE:s=" icon-Pipeline";break;default:s=""}return(0,r.jsx)(a.TranslationConsumer,{children:i=>(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:e,children:[(0,r.jsx)("span",{className:"hse-inspection-drawer-header-icon".concat(s),root:"common"}),(0,r.jsx)("span",{className:"hse-inspection-drawer-header-text",children:this.props.title+" HSE Inspection"}),(0,r.jsx)("div",{className:"hse-inspection-drawer-header-button",onClick:this.switchFold,children:(0,r.jsx)(o.Icon,{root:"Building",name:this.state.isFolded?"caret-down":"caret-up",size:"large"})})]}),this.state.isFolded?null:(0,r.jsx)("div",{className:"hse-inspection-drawer-content",children:t}),(0,r.jsx)("div",{className:"hse-inspection-drawer-footer"})]})})}}const p=c;var d=s(85800),h=s(35861);function E(e){let t,{HSEInspection:s,modHSEInspection:i,modAssociations:c,validationErrors:E,modAttributeList:u,attributeValidationErrors:C,handleCellDataEdit:S,listOptions:I,cardReader:T,railWagon:R,roadTransportationUnit:y,onFieldChange:m,onInspectionItemChange:A,onDetectVehicle:D,onCancelDetect:g,transportationType:L,dispatchReceiptLabel:N,isManualEntry:H,handleUpdate:O,displayTransportationUnit:v,onDispatchReceiptSearchChange:P,handleOpenAttachmentsModal:b,numberOfAttachments:M,onVehicleSearchChange:f}=e;t=L===l.LY.ROAD||L===l.LY.MARINE?i.VehicleCode:i.DispatchReceiptCode;const V=(e,t)=>{let s=[];return s=e.find((e=>e.TerminalCode===t)),s.attributeValidationErrors};return(0,r.jsx)(a.TranslationConsumer,{children:e=>(0,r.jsxs)("div",{className:"detailsContainer",children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,r.jsx)(o.Select,{fluid:!0,indicator:"required",placeholder:e("Common_Select"),label:e("HSE_TransactionType"),value:i.TransactionType,onChange:e=>m("TransactionType",e),error:e(E.TransactionType),options:I.transactionType,reserveSpace:!1,disabled:null!==s.OverAllHSEInspectionStatus||!1===H,noResultsMessage:e("noResultsMessage")})}),L===l.LY.PIPELINE?null:(0,r.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,r.jsx)(o.Select,{fluid:!0,indicator:"required",placeholder:e("Common_Select"),label:e("PrinterConfig_LocationCode"),value:i.LocationCode,onChange:e=>m("LocationCode",e),error:e(E.LocationCode),options:I.locationCode,reserveSpace:!1,disabled:null!==s.OverAllHSEInspectionStatus,noResultsMessage:e("noResultsMessage")})}),L===l.LY.ROAD?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,r.jsx)(o.Select,{fluid:!0,placeholder:e("Common_Select"),label:e("CardReader_Title"),value:T,onChange:e=>m("CardReader",e),error:e(E.CardReader),options:I.cardReaderCode,reserveSpace:!1,disabled:null!==s.OverAllHSEInspectionStatus||!1===H||0===I.cardReaderCode.length,noResultsMessage:e("noResultsMessage")})}),(0,r.jsxs)("div",{className:"col-12 col-md-6 col-lg-4",children:[(0,r.jsx)(o.Button,{className:"hse-inspection-card-reader-button",content:e("VehHSE_DetectVehicle"),disabled:null!==s.OverAllHSEInspectionStatus||!1===H||0===I.cardReaderCode.length,onClick:D}),(0,r.jsx)(o.Button,{className:null!==s.OverAllHSEInspectionStatus||!1===H||0===I.cardReaderCode.length?"hse-inspection-card-reader-button":"hse-inspection-card-reader-button cancelButton",content:e("LookUpInfo_Cancel"),disabled:null!==s.OverAllHSEInspectionStatus||!1===H||0===I.cardReaderCode.length,onClick:g})]})]}):null,L===l.LY.ROAD||L===l.LY.MARINE?(0,r.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,r.jsx)(o.Select,{fluid:!0,indicator:"required",placeholder:e("Common_Select"),label:e(L===l.LY.MARINE?"Vessel_Code":"Vehicle_Code"),value:i.VehicleCode,onChange:e=>m("VehicleCode",e),error:e(E.VehicleCode),options:I.vehicleCode,reserveSpace:!1,disabled:null!==s.OverAllHSEInspectionStatus||!1===H,noResultsMessage:e("noResultsMessage"),search:!0,onSearch:f})}):null,(0,r.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,r.jsx)(o.Select,{fluid:!0,indicator:L===l.LY.RAIL||L===l.LY.PIPELINE?"required":"",placeholder:e("Common_Select"),label:e(N),value:i.DispatchReceiptCode,onChange:e=>m("DispatchReceiptCode",e),error:e(E.DispatchReceiptCode),options:(0,h.r4)(I.dispatchReceiptCode,e("Common_Select")),reserveSpace:!1,disabled:null!==s.OverAllHSEInspectionStatus||!1===H,noResultsMessage:e("noResultsMessage"),search:!0,onSearch:P})}),L===l.LY.ROAD&&!0===v?(0,r.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,r.jsx)(o.Select,{fluid:!0,indicator:"required",placeholder:e("Common_Select"),label:e("HSE_TransportationUnit"),value:y,onChange:e=>m("transportationUnit",e),error:e(E.TransportationUnit),options:I.roadTransportationUnit,reserveSpace:!1,noResultsMessage:e("noResultsMessage")})}):null,L===l.LY.RAIL?(0,r.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,r.jsx)(o.Select,{fluid:!0,indicator:"required",placeholder:e("Common_Select"),label:e("Report_WagonCode"),value:R,onChange:e=>m("railWagon",e),error:e(E.VehicleCode),options:I.railWagonCode,reserveSpace:!1,noResultsMessage:e("noResultsMessage")})}):null,(0,r.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,r.jsx)(o.Input,{fluid:!0,value:i.Remarks,onChange:e=>m("Remarks",e),label:e("AccessCardInfo_Remarks"),error:e(E.Remarks),reserveSpace:!1})}),(0,r.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,r.jsx)(o.Button,{className:"hse-inspection-attachment",type:"primary",content:e("Attachments")+(M>0?" (".concat(M,")"):""),onClick:b})})]}),u.length>0?u.map((t=>(0,r.jsx)(n.A,{children:(0,r.jsx)(o.Accordion,{children:(0,r.jsx)(o.Accordion.Content,{className:"attributeAccordian",title:e("Attributes_Header"),children:(0,r.jsx)(d.n,{selectedAttributeList:t.attributeMetaDataList,handleCellDataEdit:S,attributeValidationErrors:V(C,t.TerminalCode)})})})}))):null,0===c.length?null:(0,r.jsx)(p,{title:t,inspectedItems:c,onChange:A,isEditable:3===i.HSEInspectionStatus||null===i.HSEInspectionStatus,handleUpdate:O,transportationType:L,status:i.HSEInspectionStatus})]})})}var u=s(44192),C=s(69062),S=s(46100),I=s(40854),T=s.n(I),R=s(72067),y=s(9966),m=s(50805),A=s(97508),D=(s(38726),s(43503)),g=s(93779),L=s(80312),N=s(53536),H=s.n(N),O=s(40252),v=s(14159),P=(s(92342),s(11981)),b=s(15417),M=s(62900);class f extends i.Component{constructor(){super(...arguments),this.cardReaderTimer=null,this.state={HSEInspection:H().cloneDeep(S.Yz),modHSEInspection:{},associations:[],modAssociations:[],validationErrors:C.Th(u.h2),isReadyToRender:!1,cardReaderMap:{},cardReaderCodeOptions:[],cardReader:"",vehicleCodeOptions:[],vehicleTypeOptions:[],transactionTypeOptions:[],locationCodeOptions:[],locationTypeMap:{},dispatchReceiptCodeMap:{},dispatchReceiptCodeOptions:[],dispatchReceiptCodeSearchOptions:[],roadTransportationUnitOptions:[],roadTransportationUnit:"",railWagonCodeOptions:[],railWagonCarrierCompanyMap:{},railWagon:"",dispatchReceiptLabel:"",isManualEntry:!1,saveEnabled:!1,passFailAllEnabled:!1,displayTransportationUnit:!1,displayOverAllInspection:!1,modalOpen:{pass:!1,fail:!1,passAll:!1,failAll:!1,attachments:!1},attachments:[],addFileEnabled:!0,attachmentFileSetting:{FileTypesAllowedToUpload:[".jpeg",".jpg",".pdf",".png",".gif",".xlsx",".xls",".docx",".doc",".ppt",".pptx"],MaximumFileSize:2048,NoOfFilesAllowedToUpload:5},isOverAllInspection:!1,ReadStartTime:null,vehicleCodeSearchOptions:[],modAttributeList:[],attributeValidationErrors:[],hseUnitInspectionType:"",showAuthenticationLayout:!1,showUpdateAuthenticationLayout:!1,tempHSEInspection:{},tempHSEInspectionStatus:0,tempIsOverAllInspection:!1},this.handleDetectVehicle=()=>{try{const t=H().cloneDeep(this.state.validationErrors);if(null===this.state.modHSEInspection.TransactionType||""===this.state.modHSEInspection.TransactionType?t.TransactionType=C.jr(u.h2.TransactionType,this.state.modHSEInspection.TransactionType):t.TransactionType="",null===this.state.modHSEInspection.LocationCode||""===this.state.modHSEInspection.LocationCode?t.LocationCode=C.jr(u.h2.LocationCode,this.state.modHSEInspection.LocationCode):t.LocationCode="",null===this.state.cardReader||""===this.state.cardReader?t.CardReader=C.jr(u.h2.CardReader,this.state.cardReader):t.CardReader="",this.setState({validationErrors:t}),""!==t.TransactionType||""!==t.LocationCode||""!==t.CardReader)return;var e=this.state.ReadStartTime;e=new Date,this.setState({ReadStartTime:e}),null===this.cardReaderTimer&&(this.cardReaderTimer=setInterval((()=>{this.readCardData()}),3e3))}catch(t){console.log("HSEInspectionDetailsComposite: Error occurred on handleDetectVehicle",t)}},this.handleCancelDetect=()=>{try{null!==this.cardReaderTimer&&(clearInterval(this.cardReaderTimer),this.cardReaderTimer=null)}catch(e){console.log("HSEInspectionDetailsComposite: Error occurred on handleCancelDetect",e)}},this.handleChange=(e,t)=>{try{const s=H().cloneDeep(this.state.modHSEInspection),i=H().cloneDeep(this.state.validationErrors);let o=this.state.roadTransportationUnit,a=this.state.railWagon;if("CardReader"===e)return void this.setState({cardReader:t});if("transportationUnit"===e){if(o=t,this.setState({roadTransportationUnit:o}),null!==s.OverAllHSEInspectionStatus)return this.getVehicleDetail(s,(e=>{const t=o.split(" - ");this.getRoadHSEInspectionResult(s,e.EntityResult.VehicleType,t[0],t[1])})),void this.getAttributesMetaData()}else if("railWagon"===e){if(a=t,this.setState({railWagon:a}),null!==s.OverAllHSEInspectionStatus)return void this.getRailWagonDetail(a,(e=>{this.getRailHSEInspectionResult(s,e.RailWagonCategory,a)}))}else s[e]=t;if("TransactionType"===e?(s.DispatchReceiptCode=null,a="",this.setState({railWagon:a,railWagonCodeOptions:[]}),this.setDispatchReceiptLabel(s),"DISPATCH"===t?this.getDispatchReceiptCode("SHIPMENT"):this.getDispatchReceiptCode(t)):"LocationCode"===e&&this.mapCardReader(t,i),void 0!==u.h2[e]&&(i[e]=C.jr(u.h2[e],t)),this.setState({modHSEInspection:s,validationErrors:i}),"Remarks"===e)return;if("VehicleCode"===e&&(this.getDispatchReceiptCodeByVehicle(t,s.TransactionType),s.DispatchReceiptCode=null),s.TransportationType===l.LY.ROAD)if("VehicleCode"===e)this.getVehicleDetail(s,(e=>{e.EntityResult.VehicleType===l.$O.RigidTruckWithTrailer||e.EntityResult.VehicleType===l.$O.TractorWithTrailer?(this.setRoadTransportationUnit(e),this.setState({displayTransportationUnit:!0,displayOverAllInspection:!0,passFailAllEnabled:!1,saveEnabled:!1,associations:[],modAssociations:[]})):(this.setState({displayTransportationUnit:!1,displayOverAllInspection:!1,passFailAllEnabled:!1}),null!==s.TransactionType&&null!==s.LocationCode&&null!==s.VehicleCode&&this.getHSEInspectionItems(s,e.EntityResult.VehicleType))}));else if(!0===this.state.displayTransportationUnit)if(null!==s.TransactionType&&null!==s.LocationCode&&null!==s.VehicleCode&&""!==o){const e=o.split(" - ");this.getHSEInspectionItems(s,e[0])}else this.setState({associations:[],modAssociations:[]});else null!==s.TransactionType&&null!==s.LocationCode&&null!==s.VehicleCode&&(void 0!==this.props.selectedRow.VehicleType?this.getHSEInspectionItems(s,this.props.selectedRow.VehicleType):this.getVehicleDetail(s,(e=>{this.getHSEInspectionItems(s,e.EntityResult.VehicleType)})));else s.TransportationType===l.LY.MARINE?null!==s.TransactionType&&null!==s.LocationCode&&null!==s.VehicleCode&&(void 0!==this.props.selectedRow.VehicleType?this.getHSEInspectionItems(s,this.props.selectedRow.VehicleType):this.getVehicleDetail(s,(e=>{this.getHSEInspectionItems(s,e.EntityResult.VehicleType)}))):s.TransportationType===l.LY.RAIL?null!==s.TransactionType&&null!==s.LocationCode&&null!==s.DispatchReceiptCode&&""!==a?this.getRailWagonDetail(a,(e=>{this.getHSEInspectionItems(s,e.RailWagonCategory)})):"DispatchReceiptCode"===e&&(null!==t&&""!==t?this.getRailWagonCode(s):(a="",this.setState({railWagon:a,railWagonCodeOptions:[]}))):s.TransportationType===l.LY.PIPELINE&&null!==s.TransactionType&&null!==s.DispatchReceiptCode&&this.getHSEInspectionItems(s,"PIPELINE")}catch(s){console.log("HSEInspectionDetailsComposite: Error occurred on handleChange",s)}},this.handleInspectionItemChange=(e,t,s)=>{const i=H().cloneDeep(this.state.modAssociations);i[e][t]=s,this.setState({modAssociations:i})},this.saveHSEInspection=()=>{try{this.setState({saveEnabled:!1});let e=H().cloneDeep(this.state.tempHSEInspection);if(this.props.transportationType===l.LY.ROAD){let t=this.getEntityAndShareholder(e.VehicleCode);if(e.VehicleCode=t.entityCode,e.ShareholderCode=t.ShareHolderCode,null!==e.ShipmentCode){let t=this.getEntityAndShareholder(e.ShipmentCode);e.ShipmentCode=t.entityCode}if(null!==e.DispatchReceiptCode){let t=this.getEntityAndShareholder(e.DispatchReceiptCode);e.DispatchReceiptCode=t.entityCode}if(null!==e.TransportationUnitTypeCode){let t=this.getEntityAndShareholder(e.TransportationUnitTypeCode);e.TransportationUnitTypeCode=t.entityCode}if(this.state.displayTransportationUnit){const t=this.state.roadTransportationUnit.split(" - ");this.setTransportationUnit(e,t[0],t[1]),this.updateHSEInspection(e,3,!1)}else this.getVehicleDetail(e,(t=>{this.setTransportationUnit(e,t.EntityResult.VehicleType,e.VehicleCode),this.updateHSEInspection(e,3,!1)}))}else this.props.transportationType===l.LY.RAIL?this.getRailWagonDetail(this.state.railWagon,(t=>{this.setTransportationUnit(e,t.RailWagonCategory),this.updateHSEInspection(e,3,!1,[{key:"CarrierCode",value:t.CarrierCompanyCode}])})):this.props.transportationType===l.LY.MARINE?this.getVehicleDetail(e,(t=>{this.setTransportationUnit(e,t.EntityResult.VehicleType),this.updateHSEInspection(e,3,!1)})):(this.setTransportationUnit(e),this.updateHSEInspection(e,3,!1))}catch(e){console.log("PrimeMoversComposite : Error in savePrimeMover")}},this.handleSave=()=>{try{const e=H().cloneDeep(this.state.modHSEInspection),t=H().cloneDeep(this.state.modAssociations);e.LastUpdatedTime=new Date,e.LastInspectedTime=new Date,e.TerminalCode=this.props.selectedTerminal;let s=C.pI(this.state.modAttributeList);if(e.InspectedItems=this.getXMLStringFromAssociations(t,e.LastUpdatedTime),!this.validateSave(e,s))return void this.setState({saveEnabled:!0});let i=this.convertStringtoDecimal(e,s);e.Attributes=i.Attributes;let o=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,a=H().cloneDeep(e);this.setState({showAuthenticationLayout:o,tempHSEInspection:a},(()=>{!1===o&&this.saveHSEInspection()}))}catch(e){console.log("HSEInspectionDetailsComposite: Error occurred on handleSave",e)}},this.updateHSE=(e,t)=>{let s=!0!==this.props.userDetails.EntityResult.IsWebPortalUser,i=e,o=t;this.setState({showUpdateAuthenticationLayout:s,tempHSEInspection:i,tempIsOverAllInspection:o},(()=>{!1===s&&this.handleUpdate()}))},this.handleUpdate=()=>{try{this.setState({showUpdateAuthenticationLayout:!1});const e=H().cloneDeep(this.state.tempHSEInspection),t=H().cloneDeep(this.state.tempIsOverAllInspection),s=H().cloneDeep(this.state.modHSEInspection),i=H().cloneDeep(this.state.modAssociations);if(s.LastUpdatedTime=new Date,s.LastInspectedTime=new Date,this.props.transportationType===l.LY.ROAD){if(null!==s.DispatchReceiptCode){let e=this.getEntityAndShareholder(s.DispatchReceiptCode);s.DispatchReceiptCode=e.entityCode}if(null!==s.ShipmentCode){let e=this.getEntityAndShareholder(s.ShipmentCode);s.ShipmentCode=e.entityCode}if(null!==s.VehicleCode){let e=this.getEntityAndShareholder(s.VehicleCode);s.VehicleCode=e.entityCode,s.ShareholderCode=e.ShareHolderCode}}let o=C.pI(this.state.modAttributeList);if(s.InspectedItems=this.getXMLStringFromAssociations(i,s.LastUpdatedTime),!this.validateSave(s,o))return void this.setState({saveEnabled:!0});let a=this.convertStringtoDecimal(s,o);if(s.Attributes=a.Attributes,t?(s.OverAllHSEInspectionStatus=e,s.HSEInspectionStatus!==l.P6.PASS&&s.HSEInspectionStatus!==l.P6.FAIL&&(s.HSEInspectionStatus=e)):s.HSEInspectionStatus=e,this.props.transportationType===l.LY.ROAD)if(this.state.displayTransportationUnit){const i=this.state.roadTransportationUnit.split(" - ");this.setTransportationUnit(s,i[0],i[1]),this.updateHSEInspection(s,e,t)}else this.getVehicleDetail(s,(i=>{this.setTransportationUnit(s,i.EntityResult.VehicleType,s.VehicleCode),this.updateHSEInspection(s,e,t)}));else this.props.transportationType===l.LY.RAIL?this.getRailWagonDetail(this.state.railWagon,(i=>{this.setTransportationUnit(s,i.RailWagonCategory),this.updateHSEInspection(s,e,t,[{key:"CarrierCode",value:i.CarrierCompanyCode}])})):this.props.transportationType===l.LY.MARINE?this.getVehicleDetail(s,(i=>{this.setTransportationUnit(s,i.EntityResult.VehicleType),this.updateHSEInspection(s,e,t)})):(this.setTransportationUnit(s),this.updateHSEInspection(s,e,t))}catch(e){console.log("HSEInspectionDetailsComposite: Error occurred on handleUpdate",e)}},this.handleDispatchReceiptSearchChange=e=>{try{let t=this.state.dispatchReceiptCodeOptions.filter((t=>t.value.toLowerCase().includes(e.toLowerCase())));t.length>l.bM&&(t=t.slice(0,l.bM)),this.setState({dispatchReceiptCodeSearchOptions:t})}catch(t){console.log("HSEInspectionDetailsComposite:Error occurred on handleDispatchReceiptSearchChange",t)}},this.handleVehicleSearchChange=e=>{try{let t=this.state.vehicleCodeOptions.filter((t=>t.value.toLowerCase().includes(e.toLowerCase())));t.length>l.bM&&(t=t.slice(0,l.bM)),this.setState({vehicleCodeSearchOptions:t})}catch(t){console.log("HSEInspectionDetailsComposite:Error occurred on handleVehicleSearchChange",t)}},this.handleOpenAttachmentsModal=()=>{try{const e=this.state.modalOpen;e.attachments=!0,this.setState({modalOpen:e})}catch(e){console.log("HSEInspectionDetailsComposite:Error occurred on handleOpenAttachmentsModal",e)}},this.handleAddAttachment=e=>{try{const t=new FileReader;t.readAsDataURL(e),t.onload=()=>{let s,i;[s,i]=t.result.split(";",2),s=s.split(":")[1],i=i.split(",")[1];const o=e.name.split("."),a="."+o[o.length-1].toLowerCase();if(-1!==this.state.attachmentFileSetting.FileTypesAllowedToUpload.indexOf(a)){let t=e.name,o=t+l.uV+s;for(;this.checkFileName(o);){let e=t.split(".");e.length>1?e[e.length-2]+="_new":e[0]+="_new",t=e.join("."),o=t+l.uV+s}if(t.length>40){const e={messageType:"critical",message:"HSE_Inspection_UpdateStatus",messageResultDetails:[{keyFields:[],keyValues:[],isSuccess:!1,errorMessage:"FileNameTooLong"}]};return void(0,v.toast)((0,r.jsx)(n.A,{children:(0,r.jsx)(P.A,{notificationMessage:e})}),{autoClose:"success"===e.messageType&&1e4})}const a={blob:this.base64ToBlob(i,s),doc:{FileMode:l.Sm.ADD,FileName:o,FileContent:i}},c=H().cloneDeep(this.state.attachments);c.push(a);let p=this.state.addFileEnabled;this.checkAttachmentsNumber(c)>=this.state.attachmentFileSetting.NoOfFilesAllowedToUpload&&(p=!1),this.setState({attachments:c,addFileEnabled:p})}}}catch(t){console.log("HSEInspectionDetailsComposite:Error occurred on handleAddAttachment",t)}},this.handleDeleteAttachments=e=>{try{if(!this.state.saveEnabled)return;let t;if(null===e.doc.FileMode){t=H().cloneDeep(this.state.attachments);for(let s=0;s<t.length;s++)t[s].doc.FileName===e.doc.FileName&&(t[s].doc.FileMode=l.Sm.DELETE)}else t=this.state.attachments.filter((t=>t.doc.FileName!==e.doc.FileName));let s=this.state.addFileEnabled;this.checkAttachmentsNumber(t)<this.state.attachmentFileSetting.NoOfFilesAllowedToUpload&&(s=!0),this.setState({attachments:t,addFileEnabled:s})}catch(t){console.log("HSEInspectionDetailsComposite:Error occurred on handleDeleteAttachments",t)}},this.handleResetAttachments=()=>{try{const e=H().cloneDeep(this.state.attachments),t=[];for(let s of e)null===s.doc.FileMode&&(s.doc.FileMode=l.Sm.DELETE,t.push(s));this.setState({attachments:t,addFileEnabled:!0})}catch(e){console.log("HSEInspectionDetailsComposite:Error occurred on handleResetAttachments",e)}},this.handleOpenAttachment=e=>{const t=e.doc.FileName.split(l.uV,2);null===e.blob?this.getHSEInspectionResultsDoc(this.state.modHSEInspection.ID,e.doc.FileName,(s=>{const i=this.base64ToBlob(s.EntityResult.FileContent,t[1]),o=H().cloneDeep(this.state.attachments);for(let t=0;t<o.length;t++)o[t].doc.FileName===e.doc.FileName&&(o[t].blob=i);this.setState({attachments:o}),this.downloadBlob(i,t[0])})):this.downloadBlob(e.blob,t[0])},this.handleCellDataEdit=(e,t)=>{try{e.DefaultValue=t,this.setState({attribute:e});const s=H().cloneDeep(this.state.attributeValidationErrors);s.forEach((s=>{s.TerminalCode===e.TerminalCode&&(s.attributeValidationErrors[e.Code]=C.I5(e,t))})),this.setState({attributeValidationErrors:s})}catch(s){console.log("HseInspectionDetailsComposite:Error occured on handleCellDataEdit",s)}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1,showUpdateAuthenticationLayout:!1})}}componentWillReceiveProps(e){try{this.getHSEInspectionResult(e.selectedRow)}catch(t){console.log("HSEInspectionDetailsComposite: Error occurred on componentWillReceiveProps",t)}}componentDidMount(){try{this.setLookUpData(this.props.lookUpData),this.getTransactionTypes(),this.props.transportationType!==l.LY.PIPELINE&&this.getLocations(),this.getHSEInspectionResult(this.props.selectedRow)}catch(e){console.log("HSEInspectionDetailsComposite: Error occurred on componentDidMount",e)}}getAttributeEntityKey(){let e="",t=H().cloneDeep(this.state.modHSEInspection);if(void 0===t)return e;if("ROAD"===t.TransportationType.toUpperCase()){const s=this.state.roadTransportationUnit.split(" - ");if("SHIPMENT"===t.TransactionType.toUpperCase()){if(0===s.length)return e;let i=s[0];""===i&&(i=t.TransportationUnit),"RIGID_TRUCK"===this.state.hseUnitInspectionType||"RIGID_TRUCK"===i?e=b.s$:"TRAILER"===i?e=b.Vy:"PRIMEMOVER"===i?e=b.mD:"NON_FILLING_VEHICLE"===i&&(e=b.s8)}else if("RECEIPT"===t.TransactionType.toUpperCase()){if(0===s.length)return e;let i=s[0];""===i&&(i=t.TransportationUnit),"RIGID_TRUCK"===this.state.hseUnitInspectionType||"RIGID_TRUCK"===i?e=b.Q7:"TRAILER"===i?e=b.H9:"PRIMEMOVER"===i?e=b.G$:"NON_FILLING_VEHICLE"===i&&(e=b.w2)}}else"MARINE"===t.TransportationType.toUpperCase()?"SHIPMENT"===t.TransactionType.toUpperCase()||"DISPATCH"===t.TransactionType.toUpperCase()?"BARGE"===this.state.hseUnitInspectionType||"BARGE"===t.TransportationUnitType?e=b.Zu:"SHIP"!==this.state.hseUnitInspectionType&&"SHIP"!==t.TransportationUnitType||(e=b.Ak):"RECEIPT"===t.TransactionType.toUpperCase()&&("BARGE"===this.state.hseUnitInspectionType||"BARGE"===t.TransportationUnitType?e=b.lU:"SHIP"!==this.state.hseUnitInspectionType&&"SHIP"!==t.TransportationUnitType||(e=b.OF)):"RAIL"===t.TransportationType.toUpperCase()?"SHIPMENT"===t.TransactionType.toUpperCase()||"DISPATCH"===t.TransactionType.toUpperCase()?e=b.yM:"RECEIPT"===t.TransactionType.toUpperCase()&&(e=b.G6):"PIPELINE"===t.TransportationType.toUpperCase()&&("SHIPMENT"===t.TransactionType.toUpperCase()||"DISPATCH"===t.TransactionType.toUpperCase()?e=b.yO:"RECEIPT"===t.TransactionType.toUpperCase()&&(e=b.gZ));return e}getAttributesMetaData(){try{this.setState({modAttributeList:[]});let e="";if(e=this.getAttributeEntityKey(),""===e)return;T()(R.fKH,C.tW([e],this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data;if(!0===s.IsSuccess){let t=H().cloneDeep(this.state.modHSEInspection),i=[];e===b.s$?i=H().cloneDeep(s.EntityResult.HSEINSPECTIONSHIPMENTRIGIDTRUCK):e===b.Vy?i=H().cloneDeep(s.EntityResult.HSEINSPECTIONSHIPMENTTRAILER):e===b.mD?i=H().cloneDeep(s.EntityResult.HSEINSPECTIONSHIPMENTPRIMEMOVER):e===b.s8?i=H().cloneDeep(s.EntityResult.HSEINSPECTIONSHIPMENTNONFILLINGVEHICLE):e===b.Zu?i=H().cloneDeep(s.EntityResult.HSEINSPECTIONMARINESHIPMENTBARGE):e===b.Ak?i=H().cloneDeep(s.EntityResult.HSEINSPECTIONMARINESHIPMENTSHIP):e===b.yM?i=H().cloneDeep(s.EntityResult.HSEINSPECTIONSHIPMENTRAILWAGON):e===b.yO?i=H().cloneDeep(s.EntityResult.HSEINSPECTIONSHIPMENTPIPELINE):e===b.Q7?i=H().cloneDeep(s.EntityResult.HSEINSPECTIONRECEIPTRIGIDTRUCK):e===b.H9?i=H().cloneDeep(s.EntityResult.HSEINSPECTIONRECEIPTTRAILER):e===b.G$?i=H().cloneDeep(s.EntityResult.HSEINSPECTIONRECEIPTPRIMEMOVER):e===b.w2?i=H().cloneDeep(s.EntityResult.HSEINSPECTIONRECEIPTNONFILLINGVEHICLE):e===b.lU?i=H().cloneDeep(s.EntityResult.HSEINSPECTIONMARINERECEIPTBARGE):e===b.OF?i=H().cloneDeep(s.EntityResult.HSEINSPECTIONMARINERECEIPTSHIP):e===b.G6?i=H().cloneDeep(s.EntityResult.HSEINSPECTIONRECEIPTRAILWAGON):e===b.gZ&&(i=H().cloneDeep(s.EntityResult.HSEINSPECTIONRECEIPTPIPELINE)),t.Attributes.length>0&&t.Attributes[0].ListOfAttributeData.forEach((e=>{void 0!==e&&i.length>0&&i[0].attributeMetaDataList.forEach((function(t){e.AttributeCode===t.Code&&(t.DefaultValue=e.AttributeValue)}))})),e===b.s$?this.setState({modAttributeList:i,attributeValidationErrors:C.Fl(s.EntityResult.HSEINSPECTIONSHIPMENTRIGIDTRUCK)}):e===b.Vy?this.setState({modAttributeList:i,attributeValidationErrors:C.Fl(s.EntityResult.HSEINSPECTIONSHIPMENTTRAILER)}):e===b.mD?this.setState({modAttributeList:i,attributeValidationErrors:C.Fl(s.EntityResult.HSEINSPECTIONSHIPMENTPRIMEMOVER)}):e===b.s8?this.setState({modAttributeList:i,attributeValidationErrors:C.Fl(s.EntityResult.HSEINSPECTIONSHIPMENTNONFILLINGVEHICLE)}):e===b.Zu?this.setState({modAttributeList:i,attributeValidationErrors:C.Fl(s.EntityResult.HSEINSPECTIONMARINESHIPMENTBARGE)}):e===b.Ak?this.setState({modAttributeList:i,attributeValidationErrors:C.Fl(s.EntityResult.HSEINSPECTIONMARINESHIPMENTSHIP)}):e===b.yM?this.setState({modAttributeList:i,attributeValidationErrors:C.Fl(s.EntityResult.HSEINSPECTIONSHIPMENTRAILWAGON)}):e===b.yO?this.setState({modAttributeList:i,attributeValidationErrors:C.Fl(s.EntityResult.HSEINSPECTIONSHIPMENTPIPELINE)}):e===b.Q7?this.setState({modAttributeList:i,attributeValidationErrors:C.Fl(s.EntityResult.HSEINSPECTIONRECEIPTRIGIDTRUCK)}):e===b.H9?this.setState({modAttributeList:i,attributeValidationErrors:C.Fl(s.EntityResult.HSEINSPECTIONRECEIPTTRAILER)}):e===b.G$?this.setState({modAttributeList:i,attributeValidationErrors:C.Fl(s.EntityResult.HSEINSPECTIONRECEIPTPRIMEMOVER)}):e===b.w2?this.setState({modAttributeList:i,attributeValidationErrors:C.Fl(s.EntityResult.HSEINSPECTIONRECEIPTNONFILLINGVEHICLE)}):e===b.lU?this.setState({modAttributeList:i,attributeValidationErrors:C.Fl(s.EntityResult.HSEINSPECTIONMARINERECEIPTBARGE)}):e===b.OF?this.setState({modAttributeList:i,attributeValidationErrors:C.Fl(s.EntityResult.HSEINSPECTIONMARINERECEIPTSHIP)}):e===b.G6?this.setState({modAttributeList:i,attributeValidationErrors:C.Fl(s.EntityResult.HSEINSPECTIONRECEIPTRAILWAGON)}):e===b.gZ&&this.setState({modAttributeList:i,attributeValidationErrors:C.Fl(s.EntityResult.HSEINSPECTIONRECEIPTPIPELINE)})}else this.setState({modAttributeList:[]}),console.log("Error in getAttributes:")}))}catch(e){console.log("Error while getAttributes:",e)}}updateAttributeInfo(e){let t=[];return e.forEach((e=>{t.push(e)})),t}setLookUpData(e){try{const t={},s=e.FileTypesAllowedToUpload.toLowerCase().split(",");for(let e=0;e<s.length;e++)s[e]="."+s[e];t.FileTypesAllowedToUpload=s,t.MaximumFileSize=parseInt(e.MaximumFileSize),e.MaximumFileSize>5120&&(e.MaximumFileSize=5120),t.NoOfFilesAllowedToUpload=parseInt(e.NoOfFilesAllowedToUpload),this.setState({attachmentFileSetting:t})}catch(t){console.log("HSEInspectionDetailsComposite: Error occurred on setLookUpData",t)}}isNodeEnterpriseOrWebortal(){return!(!this.props.userDetails.EntityResult.IsEnterpriseNode&&!this.props.userDetails.EntityResult.IsWebPortalUser)}getTransactionTypes(){const e=this.props.transportationType===l.LY.ROAD?{shipment:"SHIPMENT",receipt:"RECEIPT"}:{shipment:"DISPATCH",receipt:"RECEIPT"},t=[];for(let s in e)t.push({text:s,value:e[s]});this.setState({transactionTypeOptions:t})}getLocations(){T()(R.T1v+"?TransportationType="+this.props.transportationType,C.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;if(!0===t.IsSuccess){const e=[],s={};Array.isArray(t.EntityResult.Table)&&t.EntityResult.Table.forEach((t=>{e.push(t.LocationCode),s[t.LocationCode]=t.LocationType})),this.setState({locationCodeOptions:C.Zj(e),locationTypeMap:s})}else console.log("Error in getLocations: ",t.ErrorList)})).catch((e=>{console.log("HSEInspectionDetailsComposite: Error occurred on getLocations",e)}))}getCardReaderLocations(e){T()(R.Esr+"?ShareholderCode="+e,C.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;if(!0===t.IsSuccess){if(Array.isArray(t.EntityResult.Table)){const e={};for(let s of t.EntityResult.Table)void 0===e[s.WB_LocationCode]&&(e[s.WB_LocationCode]=[]),e[s.WB_LocationCode].push(s.PointName);this.setState({cardReaderMap:e})}}else console.log("Error in getCardReaderLocations:",t.ErrorList)})).catch((e=>{console.log("Error while getting card reader locations:",e)}))}mapCardReader(e,t){if(t.TransactionType="",t.LocationCode="",t.CardReader="",this.state.cardReaderMap[e]){const t=C.Zj(this.state.cardReaderMap[e]);this.setState({cardReader:"",cardReaderCodeOptions:t})}else this.setState({cardReader:"",cardReaderCodeOptions:[]})}componentWillUnmount(){this.handleCancelDetect()}readCardData(){const e={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,KeyCodes:[{key:g.tY,value:this.state.cardReader},{key:"ReadStartTime",value:this.state.ReadStartTime}]};T()(R.NL1,C.tW(e,this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;!0===t.IsSuccess&&void 0!==t.EntityResult.CardNumber&&null!==t.EntityResult.CardNumber&&(this.handleCancelDetect(),this.getAccessCard(t.EntityResult.CardNumber))})).catch((e=>{console.log("Error while read card data: ",e)}))}getAccessCard(e){const t={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,keyDataCode:g.aM,KeyCodes:[{key:g.aM,value:e}]};T()(R.dxk,C.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?"Vehicle"===t.EntityResult.EntityName&&null!==t.EntityResult.EntityValue&&""!==t.EntityResult.EntityValue&&(this.handleChange("VehicleCode",t.EntityResult.EntityValue+"["+t.EntityResult.ShareholderCode+"]"),this.getRoadShipmentReceiptCodes(this.state.modHSEInspection.TransactionType,t.EntityResult.ShareholderCode,t.EntityResult.EntityValue+"["+t.EntityResult.ShareholderCode+"]")):console.log("Error in GetAccessCard:",t.ErrorList)})).catch((e=>{console.log("Error while getting AccessCard:",e)}))}getVehicleCode(e){this.props.transportationType===l.LY.MARINE?T()(R.FKP+"?ShareholderCode="+e+"&TransportationType="+this.props.transportationType,C.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){const e=C.Zj(t.EntityResult);let s=H().cloneDeep(e);s.length>l.bM&&(s=s.slice(0,l.bM)),this.setState({vehicleCodeOptions:e,vehicleCodeSearchOptions:s})}}else console.log("Error in getVehicleCodes:",t.ErrorList)})).catch((e=>{console.log("Error while getting Vessel List:",e)})):this.props.transportationType===l.LY.ROAD&&T()(R.F1C,C.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var s=[],i=t.EntityResult;for(var o in i){i[o].forEach((e=>{s.push(e+"["+o+"]")}))}const e=C.Zj(s);let a=H().cloneDeep(e);a.length>l.bM&&(a=a.slice(0,l.bM)),this.setState({vehicleCodeOptions:e,vehicleCodeSearchOptions:a})}else console.log("HSE inspection:Error in GetVehiclesForLoggedInUser:",t.ErrorList)})).catch((e=>{console.log("HSE inspection:Error in GetVehiclesForLoggedInUser:",e)}))}getEntityAndShareholder(e){let t={ShareHolderCode:"",entityCode:""};const s=e.split(/\[/);return t.entityCode=s[0],s.length>1&&null!==s[1]&&""!==s[1]&&(t.ShareHolderCode=s[1].substring(0,s[1].length-1)),""===t.ShareHolderCode&&(t.ShareHolderCode=this.props.userDetails.EntityResult.PrimaryShareholder),t}getVehicleDetail(e,t){this.setState({modAttributeList:[],hseUnitInspectionType:""});let s=this.getEntityAndShareholder(e.VehicleCode),i=[{key:g.ok,value:s.entityCode},{key:g.v6,value:this.props.transportationType}],o={ShareHolderCode:null===e.ShareholderCode||""===e.ShareholderCode||void 0===e.ShareholderCode?s.ShareHolderCode:e.ShareholderCode,keyDataCode:g.ok,KeyCodes:i};T()(R.zRL,C.tW(o,this.props.tokenDetails.tokenInfo)).then((e=>{const s=e.data;!0===s.IsSuccess?(this.setState({hseUnitInspectionType:e.data.EntityResult.VehicleType}),t(s)):console.log("Error in getVehicleDetail:",s.ErrorList)})).catch((e=>{console.log("Error in getVehicleDetail:",e)}))}setRoadTransportationUnit(e){const t=[];if(e.EntityResult.VehicleType===l.$O.RigidTruckWithTrailer){if(Array.isArray(e.EntityResult.VehicleTrailers)){for(let s of e.EntityResult.VehicleTrailers)s.Trailer.TrailerType===l.YH.RIGID_TRAILER&&t.push("RIGID_TRUCK - "+s.TrailerCode);for(let s of e.EntityResult.VehicleTrailers)s.Trailer.TrailerType===l.YH.NON_RIGID_TRAILER&&t.push("TRAILER - "+s.TrailerCode)}}else if(e.EntityResult.VehicleType===l.$O.TractorWithTrailer&&(Array.isArray(e.EntityResult.VehiclePrimeMovers)&&e.EntityResult.VehiclePrimeMovers.length>0&&t.push("PRIMEMOVER - "+e.EntityResult.VehiclePrimeMovers[0].PrimeMoverCode),Array.isArray(e.EntityResult.VehicleTrailers)))for(let s of e.EntityResult.VehicleTrailers)t.push("TRAILER - "+s.TrailerCode);this.setState({roadTransportationUnitOptions:C.Zj(t),roadTransportationUnit:""})}getRailWagonDetail(e,t){var s=[{key:g.UT,value:e},{key:g.v6,value:l.LY.RAIL},{key:g._n,value:this.state.railWagonCarrierCompanyMap[e]}],i={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,keyDataCode:g.UT,KeyCodes:s};T()(R.r5l,C.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{const s=e.data;!0===s.IsSuccess&&t(s.EntityResult)})).catch((e=>{console.log("Error while getting railWagon:",e)}))}getRoadShipmentReceiptCodes(e,t,s){const i={TransportationType:this.props.transportationType,TransactionType:e,ShareholderCode:t};T()(R.o04,C.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;if(!0===t.IsSuccess)if(void 0!==t.EntityResult.Table&&null!==t.EntityResult.Table&&t.EntityResult.Table.length>0){const e={};let o=[];for(let n of t.EntityResult.Table)void 0!==n.VehicleCode&&null!==n.VehicleCode&&(void 0===e[n.VehicleCode+"["+i.ShareholderCode+"]"]&&(e[n.VehicleCode+"["+i.ShareholderCode+"]"]=[]),e[n.VehicleCode+"["+i.ShareholderCode+"]"].push({text:n.Code+"["+i.ShareholderCode+"]",value:n.Code+"["+i.ShareholderCode+"]"}),s===n.VehicleCode+"["+i.ShareholderCode+"]"&&o.push({text:n.Code+"["+i.ShareholderCode+"]",value:n.Code+"["+i.ShareholderCode+"]"}));let a=H().cloneDeep(o);a.length>l.bM&&(a=a.slice(0,l.bM)),this.setState({dispatchReceiptCodeMap:e,dispatchReceiptCodeOptions:o,dispatchReceiptCodeSearchOptions:a})}else this.setState({dispatchReceiptCodeMap:{},dispatchReceiptCodeOptions:[],dispatchReceiptCodeSearchOptions:[]});else console.log("Error while getting getRoadShipmentReceiptCodes:",t.ErrorList)})).catch((e=>{console.log("Error while getting getRoadShipmentReceiptCodes:",e)}))}getDispatchReceiptCode(e){if(this.props.transportationType===l.LY.ROAD)return this.setState({dispatchReceiptCodeMap:{},dispatchReceiptCodeOptions:[],dispatchReceiptCodeSearchOptions:[]}),void(void 0!==this.state.modHSEInspection.VehicleCode&&null!==this.state.modHSEInspection.VehicleCode&&this.getDispatchReceiptCodeByVehicle(this.state.modHSEInspection.VehicleCode,e));const t={TransportationType:this.props.transportationType,TransactionType:e,ShareholderCode:this.props.userDetails.EntityResult.PrimaryShareholder};T()(R.o04,C.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;if(!0===t.IsSuccess)if(void 0!==t.EntityResult.Table&&null!==t.EntityResult.Table&&t.EntityResult.Table.length>0){const e={};let s=[];for(let o of t.EntityResult.Table)void 0!==o.VehicleCode&&null!==o.VehicleCode?(void 0===e[o.VehicleCode]&&(e[o.VehicleCode]=[]),e[o.VehicleCode].push({text:o.Code,value:o.Code}),this.state.modHSEInspection.VehicleCode===o.VehicleCode&&s.push({text:o.Code,value:o.Code})):this.props.transportationType===l.LY.PIPELINE?s.push({text:o.Code+"["+o.ShareholderCode+"]",value:o.Code+"["+o.ShareholderCode+"]"}):s.push({text:o.Code,value:o.Code});let i=H().cloneDeep(s);i.length>l.bM&&(i=i.slice(0,l.bM)),this.setState({dispatchReceiptCodeMap:e,dispatchReceiptCodeOptions:s,dispatchReceiptCodeSearchOptions:i})}else this.setState({dispatchReceiptCodeMap:{},dispatchReceiptCodeOptions:[],dispatchReceiptCodeSearchOptions:[]});else console.log("Error while getting getDispatchReceiptCode:",t.ErrorList)})).catch((e=>{console.log("Error while getting getDispatchReceiptCode:",e)}))}getDispatchReceiptCodeByVehicle(e,t){if(this.props.transportationType===l.LY.ROAD){let s=this.getEntityAndShareholder(e),i="";if(void 0!==this.state.modHSEInspection.VehicleCode&&null!==this.state.modHSEInspection.VehicleCode){i=this.getEntityAndShareholder(this.state.modHSEInspection.VehicleCode).ShareHolderCode}s.ShareHolderCode!==i||this.state.modHSEInspection.TransactionType!==t?this.getRoadShipmentReceiptCodes(t,s.ShareHolderCode,e):this.setDispatchReceiptFilterOptions(e)}else this.setDispatchReceiptFilterOptions(e)}setDispatchReceiptFilterOptions(e){if(void 0!==this.state.dispatchReceiptCodeMap[e]&&Array.isArray(this.state.dispatchReceiptCodeMap[e])){const t=this.state.dispatchReceiptCodeMap[e];let s=H().cloneDeep(t);s.length>l.bM&&(s=s.slice(0,l.bM)),this.setState({dispatchReceiptCodeOptions:t,dispatchReceiptCodeSearchOptions:s})}else this.setState({dispatchReceiptCodeOptions:[],dispatchReceiptCodeSearchOptions:[]})}getDispatchReceiptSearchOptions(){const e=H().cloneDeep(this.state.dispatchReceiptCodeSearchOptions),t=this.state.modHSEInspection.DispatchReceiptCode;if(null!==t&&""!==t&&void 0!==t){void 0===e.find((e=>e.value.toLowerCase()===t.toLowerCase()))&&e.push({text:t,value:t})}return e}getRailWagonCode(e){if("DISPATCH"===e.TransactionType){const t=[{key:g.s0,value:e.DispatchReceiptCode},{key:g.v6,value:l.LY.RAIL}],s={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,keyDataCode:g.s0,KeyCodes:t};T()(R.bDb,C.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;!0===t.IsSuccess&&this.processRailDispatchReceiptData(t.EntityResult.DispatchCompartmentPlanList)})).catch((e=>{console.log("Error while getting getRailWagonCode:",e)}))}else{const t=[{key:g.eT,value:e.DispatchReceiptCode},{key:g.v6,value:l.LY.RAIL}],s={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,keyDataCode:g.eT,KeyCodes:t};T()(R.ffd,C.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;!0===t.IsSuccess&&this.processRailDispatchReceiptData(t.EntityResult.RailMarineReceiptCompartmentPlanList)})).catch((e=>{console.log("Error while getting RailWagonCode:",e)}))}}processRailDispatchReceiptData(e){if(null!==e){const t=[],s={};for(let i of e)t.push(i.TrailerCode),s[i.TrailerCode]=i.CarrierCompanyCode;this.setState({railWagonCodeOptions:C.Zj(t),railWagonCarrierCompanyMap:s,isReadyToRender:!0})}else this.setState({railWagonCodeOptions:[],railWagonCarrierCompanyMap:{},isReadyToRender:!0})}getHSEInspectionResult(e){let t=this.props.userDetails.EntityResult.PrimaryShareholder;if(this.props.transportationType!==l.LY.ROAD&&this.props.transportationType!==l.LY.PIPELINE||void 0===e.Shareholder||(t=e.Shareholder),S.Yz.TransportationType=this.props.transportationType,S.Yz.ShareholderCode=t,this.getCardReaderLocations(t),void 0===e.TransactionCode)return this.setState({HSEInspection:H().cloneDeep(S.Yz),modHSEInspection:H().cloneDeep(S.Yz),associations:[],modAssociations:[],attachments:[],isReadyToRender:!0,modAttributeList:[],attributeValidationErrors:[],hseUnitInspectionType:"",isManualEntry:!0,cardReaderCodeOptions:[],roadTransportationUnitOptions:[],roadTransportationUnit:"",railWagonCodeOptions:[],dispatchReceiptCodeOptions:[],dispatchReceiptCodeSearchOptions:[],railWagonCarrierCompanyMap:{},railWagon:"",displayTransportationUnit:!1,displayOverAllInspection:!1,isOverAllInspection:!1}),this.setDispatchReceiptLabel(S.Yz),void((this.props.transportationType===l.LY.ROAD||this.props.transportationType===l.LY.MARINE)&&this.getVehicleCode(t));if(null===e.OverAllHSEInspectionStatus){const s=H().cloneDeep(S.Yz);s.TransactionType=e.TransactionType,s.VehicleCode=e.VehicleCode,s.DispatchReceiptCode=e.TransactionCode,this.props.transportationType===l.LY.ROAD&&(s.VehicleCode=e.VehicleCode+"["+t+"]",s.DispatchReceiptCode=e.TransactionCode+"["+t+"]");let i=!1;this.props.transportationType!==l.LY.ROAD||e.VehicleType!==l.$O.RigidTruckWithTrailer&&e.VehicleType!==l.$O.TractorWithTrailer||(i=!0);const o=[];null!==e.VehicleCode&&""!==e.VehicleCode&&o.push({text:this.props.transportationType===l.LY.ROAD?e.VehicleCode+"["+t+"]":e.VehicleCode,value:this.props.transportationType===l.LY.ROAD?e.VehicleCode+"["+t+"]":e.VehicleCode});const a=H().cloneDeep(o),n=[];null!==e.TransactionCode&&""!==e.TransactionCode&&n.push({text:this.props.transportationType===l.LY.ROAD?e.TransactionCode+"["+t+"]":e.TransactionCode,value:this.props.transportationType===l.LY.ROAD?e.TransactionCode+"["+t+"]":e.TransactionCode});const r={HSEInspection:H().cloneDeep(s),modHSEInspection:H().cloneDeep(s),associations:[],modAssociations:[],isManualEntry:!1,vehicleCodeOptions:o,vehicleCodeSearchOptions:a,dispatchReceiptCodeOptions:n,dispatchReceiptCodeSearchOptions:H().cloneDeep(n),displayTransportationUnit:i};return this.props.transportationType!==l.LY.RAIL&&(r.isReadyToRender=!0),this.setState(r),this.setDispatchReceiptLabel(s),void(i?this.getVehicleDetail(s,(e=>{this.setRoadTransportationUnit(e),this.getAttributesMetaData()})):this.props.transportationType===l.LY.RAIL?this.getRailWagonCode(s):this.props.transportationType===l.LY.PIPELINE&&this.getHSEInspectionItems(s,l.LY.PIPELINE))}if(e.TransportationType===l.LY.ROAD){if(e.VehicleType===l.$O.RigidTruckWithTrailer||e.VehicleType===l.$O.TractorWithTrailer){const s=H().cloneDeep(S.Yz);if(s.TransactionType=e.TransactionType,s.DispatchReceiptCode=null===e.TransactionCode||""===e.TransactionCode?"":e.TransactionCode+"["+t+"]",s.LocationCode=e.LocationCode,s.VehicleCode=e.VehicleCode+"["+t+"]",void 0!==e.OverAllHSEInspectionStatus&&null!==e.OverAllHSEInspectionStatus?s.OverAllHSEInspectionStatus=e.OverAllHSEInspectionStatus:s.OverAllHSEInspectionStatus=0,""===this.state.roadTransportationUnit){const i=[];null!==e.VehicleCode&&""!==e.VehicleCode&&i.push({text:e.VehicleCode+"["+t+"]",value:e.VehicleCode+"["+t+"]"});const o=H().cloneDeep(i),a=[];return null!==e.TransactionCode&&""!==e.TransactionCode&&a.push({text:e.TransactionCode+"["+t+"]",value:e.TransactionCode+"["+t+"]"}),this.setState({HSEInspection:H().cloneDeep(s),modHSEInspection:H().cloneDeep(s),associations:[],modAssociations:[],isManualEntry:!1,dispatchReceiptCodeOptions:a,dispatchReceiptCodeSearchOptions:H().cloneDeep(a),vehicleCodeOptions:i,vehicleCodeSearchOptions:o,displayTransportationUnit:!0,displayOverAllInspection:!0,isOverAllInspection:e.OverAllHSEInspectionStatus===l.P6.PASS||e.OverAllHSEInspectionStatus===l.P6.FAIL}),this.getVehicleDetail(s,(e=>{this.setRoadTransportationUnit(e),this.setState({isReadyToRender:!0})})),void this.setDispatchReceiptLabel(s)}}}else if(e.TransportationType===l.LY.RAIL){const t=H().cloneDeep(S.Yz);t.TransactionType=e.TransactionType,t.DispatchReceiptCode=e.TransactionCode,t.LocationCode=e.LocationCode,void 0!==e.OverAllHSEInspectionStatus&&null!==e.OverAllHSEInspectionStatus?t.OverAllHSEInspectionStatus=e.OverAllHSEInspectionStatus:t.OverAllHSEInspectionStatus=0;const s={};if(s[e.LocationCode]=e.LocationType,""===this.state.railWagon){const i=[];return null!==e.TransactionCode&&""!==e.TransactionCode&&i.push({text:e.TransactionCode,value:e.TransactionCode}),this.setState({HSEInspection:H().cloneDeep(t),modHSEInspection:H().cloneDeep(t),associations:[],modAssociations:[],isManualEntry:!1,dispatchReceiptCodeOptions:i,dispatchReceiptCodeSearchOptions:H().cloneDeep(i),locationTypeMap:s}),this.getRailWagonCode(t),void this.setDispatchReceiptLabel(t)}return void this.getRailWagonDetail(this.state.railWagon,(e=>{this.getRailHSEInspectionResult(t,e.RailWagonCategory,this.state.railWagon)}))}const s={TransportationType:this.props.transportationType,TransactionType:e.TransactionType,Location:e.LocationCode,VehicleCode:e.VehicleCode,VehicleType:e.VehicleType,EntityCode:e.TransactionCode,TransportationUnitType:null===e.VehicleType?"":e.VehicleType,TransportationUnitTypeCode:e.VehicleCode,OverAllHSEInspectionStatus:e.OverAllHSEInspectionStatus,HSEInspectionResultsMasterId:e.HseinspectionResultsMasterId,ShareholderCode:t};this.props.transportationType===l.LY.PIPELINE&&(s.TransportationUnitType=l.LY.PIPELINE,s.TransportationUnitTypeCode=l.LY.PIPELINE,s.VehicleType="Pipeline"),T()(R.gyr,C.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;!0===t.IsSuccess&&null!==t.EntityResult?this.processResponse(t):(this.setState({HSEInspection:H().cloneDeep(S.Yz),modHSEInspection:H().cloneDeep(S.Yz),associations:[],modAssociations:[],attachments:[],isReadyToRender:!0,isManualEntry:!1}),this.setDispatchReceiptLabel(S.Yz),console.log("Error in getHSEInspectionResult: ",t.ErrorList))})).catch((e=>{console.log("HSEInspectionDetailsComposite: Error occurred on getHSEInspectionResult",e)}))}processResponse(e){null!==e.EntityResult.ShareholderCode&&""!==e.EntityResult.ShareholderCode||(e.EntityResult.ShareholderCode=this.props.selectedShareholder);const t=[];null!==e.EntityResult.VehicleCode&&""!==e.EntityResult.VehicleCode&&(e.EntityResult.TransportationType===l.LY.ROAD?(t.push({text:e.EntityResult.VehicleCode+"["+e.EntityResult.ShareholderCode+"]",value:e.EntityResult.VehicleCode+"["+e.EntityResult.ShareholderCode+"]"}),e.EntityResult.VehicleCode=e.EntityResult.VehicleCode+"["+e.EntityResult.ShareholderCode+"]"):t.push({text:e.EntityResult.VehicleCode,value:e.EntityResult.VehicleCode}));const s=H().cloneDeep(t),i=[];null!==e.EntityResult.DispatchReceiptCode&&""!==e.EntityResult.DispatchReceiptCode?e.EntityResult.TransportationType===l.LY.ROAD?i.push({text:e.EntityResult.DispatchReceiptCode+"["+e.EntityResult.ShareholderCode+"]",value:e.EntityResult.DispatchReceiptCode+"["+e.EntityResult.ShareholderCode+"]"}):e.EntityResult.TransportationType===l.LY.PIPELINE?(i.push({text:e.EntityResult.DispatchReceiptCode+"["+e.EntityResult.ShareholderCode+"]",value:e.EntityResult.DispatchReceiptCode+"["+e.EntityResult.ShareholderCode+"]"}),e.EntityResult.DispatchReceiptCode=e.EntityResult.DispatchReceiptCode+"["+e.EntityResult.ShareholderCode+"]"):i.push({text:e.EntityResult.DispatchReceiptCode,value:e.EntityResult.DispatchReceiptCode}):null!==e.EntityResult.ShipmentCode&&""!==e.EntityResult.ShipmentCode&&(e.EntityResult.TransportationType===l.LY.ROAD?(i.push({text:e.EntityResult.ShipmentCode+"["+e.EntityResult.ShareholderCode+"]",value:e.EntityResult.ShipmentCode+"["+e.EntityResult.ShareholderCode+"]"}),e.EntityResult.DispatchReceiptCode=e.EntityResult.ShipmentCode+"["+e.EntityResult.ShareholderCode+"]"):(i.push({text:e.EntityResult.ShipmentCode,value:e.EntityResult.ShipmentCode}),e.EntityResult.DispatchReceiptCode=e.EntityResult.ShipmentCode)),this.setState({HSEInspection:H().cloneDeep(e.EntityResult),modHSEInspection:H().cloneDeep(e.EntityResult),associations:this.getAssociationsFromXMLString(e.EntityResult.InspectedItems),modAssociations:this.getAssociationsFromXMLString(e.EntityResult.InspectedItems),attachments:this.documentsInfoToAttachments(e.EntityResult.HSEDocumentsInfo),isReadyToRender:!0,saveEnabled:C.ab(this.props.userDetails.EntityResult.FunctionsList,L.i.add,this.props.transportationType+L.np)&&(e.EntityResult.HSEInspectionStatus===l.P6.NOT_DONE||e.EntityResult.HSEInspectionStatus===l.P6.INPROGRESS),passFailAllEnabled:0===e.EntityResult.OverAllHSEInspectionStatus&&e.EntityResult.HSEInspectionStatus!==l.P6.INPROGRESS,vehicleCodeOptions:t,vehicleCodeSearchOptions:s,dispatchReceiptCodeOptions:i,dispatchReceiptCodeSearchOptions:H().cloneDeep(i),isOverAllInspection:e.EntityResult.OverAllHSEInspectionStatus===l.P6.PASS||e.EntityResult.OverAllHSEInspectionStatus===l.P6.FAIL,modAttributeList:[]}),this.getAttributesMetaData(),this.setDispatchReceiptLabel(e.EntityResult)}getRoadHSEInspectionResult(e,t,s,i){let o=this.getEntityAndShareholder(e.VehicleCode);e.VehicleCode=o.entityCode,e.ShareholderCode=o.ShareHolderCode;const a={TransportationType:this.props.transportationType,TransactionType:e.TransactionType,Location:e.LocationCode,EntityCode:e.DispatchReceiptCode,TransportationUnitType:null===s?"":s,TransportationUnitTypeCode:i,OverAllHSEInspectionStatus:e.OverAllHSEInspectionStatus,VehicleCode:e.VehicleCode,VehicleType:t,HSEInspectionResultsMasterId:void 0===this.props.selectedRow.HseinspectionResultsMasterId?this.state.modHSEInspection.MasterInpsectionResultsRefId:this.props.selectedRow.HseinspectionResultsMasterId,ShareholderCode:void 0===e.ShareholderCode||""===e.ShareholderCode||null===e.ShareholderCode?this.props.userDetails.EntityResult.PrimaryShareholder:e.ShareholderCode};T()(R.gyr,C.tW(a,this.props.tokenDetails.tokenInfo)).then((t=>{const i=t.data;!0===i.IsSuccess&&null!==i.EntityResult?this.processResponse(i):this.getHSEInspectionItems(e,s)})).catch((e=>{console.log("HSEInspectionDetailsComposite: Error occurred on getRailHSEInspectionResult",e)}))}getRailHSEInspectionResult(e,t,s){const i={TransportationType:this.props.transportationType,TransactionType:e.TransactionType,Location:e.LocationCode,EntityCode:e.DispatchReceiptCode,TransportationUnitType:null===t?"":t,TransportationUnitTypeCode:s,OverAllHSEInspectionStatus:e.OverAllHSEInspectionStatus,WagonCode:s,HSEInspectionResultsMasterId:this.props.selectedRow.HseinspectionResultsMasterId,ShareholderCode:null===this.props.selectedShareholder?this.props.userDetails.EntityResult.PrimaryShareholder:this.props.selectedShareholder};T()(R.gyr,C.tW(i,this.props.tokenDetails.tokenInfo)).then((s=>{const i=s.data;!0===i.IsSuccess&&null!==i.EntityResult?this.processRailResponse(i):this.getHSEInspectionItems(e,t)})).catch((e=>{console.log("HSEInspectionDetailsComposite: Error occurred on getRailHSEInspectionResult",e)}))}processRailResponse(e){const t=[];null!==e.EntityResult.DispatchReceiptCode&&""!==e.EntityResult.DispatchReceiptCode&&t.push({text:e.EntityResult.DispatchReceiptCode,value:e.EntityResult.DispatchReceiptCode}),e.EntityResult.ShareholderCode=this.props.userDetails.EntityResult.PrimaryShareholder;let s=!0;0===e.EntityResult.OverAllHSEInspectionStatus?3!==e.EntityResult.HSEInspectionStatus&&(s=!1):s=!1,this.setState({HSEInspection:H().cloneDeep(e.EntityResult),modHSEInspection:H().cloneDeep(e.EntityResult),associations:this.getAssociationsFromXMLString(e.EntityResult.InspectedItems),modAssociations:this.getAssociationsFromXMLString(e.EntityResult.InspectedItems),attachments:this.documentsInfoToAttachments(e.EntityResult.HSEDocumentsInfo),isReadyToRender:!0,saveEnabled:C.ab(this.props.userDetails.EntityResult.FunctionsList,L.i.add,this.props.transportationType+L.np)&&s,dispatchReceiptCodeOptions:t,dispatchReceiptCodeSearchOptions:H().cloneDeep(t)}),this.getAttributesMetaData()}getHSEInspectionItems(e,t){let s,i;switch(this.props.transportationType){case l.LY.ROAD:s=t,i=this.state.locationTypeMap[e.LocationCode];break;case l.LY.MARINE:s="VESSEL",i=this.state.locationTypeMap[e.LocationCode];break;case l.LY.RAIL:s="RAILWAGON",i=this.state.locationTypeMap[e.LocationCode];break;case l.LY.PIPELINE:s="PIPELINE",i="Pipeline";break;default:return}this.setState({modAttributeList:[]}),this.props.transportationType!==l.LY.ROAD&&this.props.transportationType!==l.LY.MARINE||this.setState({hseUnitInspectionType:t});const o=[{key:"TransportationType",value:this.props.transportationType},{key:"TransactionType",value:e.TransactionType},{key:"LocationType",value:i},{key:"TransportationUnit",value:s},{key:"TransportationUnitType",value:t}],a={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,KeyCodes:o};T()(R.XJy,C.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;if(!0===t.IsSuccess)if(t.EntityResult){const e=this.getAssociationsFromXMLString(t.EntityResult.Questions),s=[];for(let t of e)s.push({Severity:t.Severity,LocalizedText:t.LocalizedText,Status:!1,LastUpdatedTime:"",Remarks:"",ID:t.ID});const i=H().cloneDeep(this.state.modHSEInspection);i.HSEInspectionStatus=null,this.setState({modHSEInspection:i,associations:s,modAssociations:H().cloneDeep(s),attachments:[],saveEnabled:C.ab(this.props.userDetails.EntityResult.FunctionsList,L.i.add,this.props.transportationType+L.np)&&!this.state.isOverAllInspection,passFailAllEnabled:!this.state.isOverAllInspection})}else{let e;e=this.props.transportationType===l.LY.PIPELINE?"DISPATCH"===this.state.modHSEInspection.TransactionType?"HSE_Inspection_NoInspectionConfiguredForPipelineDispatch":"HSE_Inspection_NoInspectionConfiguredForPipelineReceipt":"HSE_Inspection_NoInspectionConfiguredForLocation";const t={messageType:"critical",message:"HSE_Inspection_GetInspectionConfiguredStatus",messageResultDetails:[{keyFields:[],keyValues:[],isSuccess:!1,errorMessage:e}]};(0,v.toast)((0,r.jsx)(n.A,{children:(0,r.jsx)(P.A,{notificationMessage:t})}),{autoClose:"success"===t.messageType&&1e4});const s=H().cloneDeep(this.state.modHSEInspection);s.HSEInspectionStatus=null,this.setState({modHSEInspection:s,associations:[],modAssociations:[],saveEnabled:!1,passFailAllEnabled:!1})}this.getAttributesMetaData()})).catch((e=>{console.log("HSEInspectionDetailsComposite: Error occurred on getHSEConfiguration",e)}))}convertStringtoDecimal(e,t){try{return t=C.SC(t),e.Attributes=C.Gh(t),e}catch(s){console.log("convertStringtoDecimal error HseInspection Details",s)}}getAssociationsFromXMLString(e){let t=null,s=!0;if(e)try{if(window.ActiveXObject){const s=new window.ActiveXObject("Microsoft.XMLDOM");s.async=!1,s.loadXML(e),t=s}else{const s=new DOMParser;t=s.parseFromString(e,"text/xml").getElementsByTagName("Questions")[0]}}catch(a){console.log("HSEInspectionDetailsComposite: Error occurred on getAssociationsFromXMLString",a),s=!1}else s=!1;if(!s)return[];const i=[];let o=0;for(let n of t.childNodes){if("Question"!==n.nodeName)continue;let e={ID:o};for(let t of n.childNodes)"Severity"!==t.nodeName&&"LocalizedText"!==t.nodeName&&"Status"!==t.nodeName&&"LastUpdatedTime"!==t.nodeName&&"Remarks"!==t.nodeName||("True"===t.textContent||"true"===t.textContent?e[t.nodeName]=!0:"False"===t.textContent||"false"===t.textContent?e[t.nodeName]=!1:e[t.nodeName]=t.textContent);i.push(e),o+=1}return i}getXMLStringFromAssociations(e,t){let s="<Questions>";for(let i in e){s+="<Question>";let o=this.state.associations[i],a=e[i];for(let e in a){if("LastUpdatedTime"===e)""!==a[e]&&(!0===o.Status?"True":"False")===a.Status&&o.Remarks===a.Remarks||(a[e]=t.toISOString());else if("Status"===e)a[e]=!0===a[e]?"True":"False";else if("ID"===e)continue;s+="<".concat(e,">").concat(a[e],"</").concat(e,">")}s+="</Question>"}return s+="</Questions>",s}setDispatchReceiptLabel(e){let t;t="RECEIPT"===e.TransactionType?"ReceiptCode":"Report_ShipmentCode",this.setState({dispatchReceiptLabel:t})}setTransportationUnit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";switch(e.TransportationType){case l.LY.ROAD:e.TransportationUnit=t,e.TransportationUnitType=t,e.TransportationUnitTypeCode=s,"SHIPMENT"===e.TransactionType?(e.ShipmentCode=e.DispatchReceiptCode,e.DispatchReceiptCode=""):e.ShipmentCode="";break;case l.LY.MARINE:e.TransportationUnit="VESSEL",e.TransportationUnitType=t,e.TransportationUnitTypeCode=e.VehicleCode,e.ShipmentCode="";break;case l.LY.RAIL:e.TransportationUnit="RAILWAGON",e.TransportationUnitType=t,e.TransportationUnitTypeCode=this.state.railWagon,e.ShipmentCode="";break;case l.LY.PIPELINE:e.TransportationUnit=l.LY.PIPELINE,e.TransportationUnitType=l.LY.PIPELINE,e.TransportationUnitTypeCode=e.DispatchReceiptCode,e.ShipmentCode=""}}validateSave(e,t){const s=H().cloneDeep(this.state.validationErrors);Object.keys(u.h2).forEach((function(t){void 0!==e[t]&&(s[t]=C.jr(u.h2[t],e[t]))})),e.TransportationType===l.LY.PIPELINE&&(s.LocationCode="");let i={messageType:"critical",message:"HSE_Inspection_UpdateStatus",messageResultDetails:[]};var o=H().cloneDeep(this.state.attributeValidationErrors);t.forEach((e=>{o.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=C.I5(e,e.DefaultValue)}))}))})),this.setState({validationErrors:s,attributeValidationErrors:o});var a=Object.values(s).every((function(e){return""===e}));return o.forEach((e=>{if(!a)return a;a=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),i.messageResultDetails.length>0?(this.props.onSaved(e,"update",i),!1):a}updateHSEInspection(e,t,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(e.HSEDocumentsInfo=this.attachmentsToDocumentsInfo(H().cloneDeep(this.state.attachments)),null===this.props.selectedRow.HseinspectionResultsMasterId&&void 0===this.props.selectedRow.HseinspectionResultsMasterId||(e.MasterInpsectionResultsRefId=this.props.selectedRow.HseinspectionResultsMasterId),this.props.transportationType===l.LY.ROAD){if(null!==e.DispatchReceiptCode){let t=this.getEntityAndShareholder(e.DispatchReceiptCode);e.DispatchReceiptCode=t.entityCode}if(null!==e.ShipmentCode){let t=this.getEntityAndShareholder(e.ShipmentCode);e.ShipmentCode=t.entityCode}if(null!==e.VehicleCode){let t=this.getEntityAndShareholder(e.VehicleCode);e.VehicleCode=t.entityCode}if(null!==e.TransportationUnitTypeCode){let t=this.getEntityAndShareholder(e.TransportationUnitTypeCode);e.TransportationUnitTypeCode=t.entityCode}}else if(this.props.transportationType===l.LY.PIPELINE&&null!==e.DispatchReceiptCode){let t=this.getEntityAndShareholder(e.DispatchReceiptCode);e.DispatchReceiptCode=t.entityCode,e.ShareholderCode=t.ShareHolderCode,e.TransportationUnitTypeCode=null}e.ShareholderCode=void 0===e.ShareholderCode||""===e.ShareholderCode||null===e.ShareholderCode?this.props.userDetails.EntityResult.PrimaryShareholder:e.ShareholderCode,e.TerminalCode=this.props.selectedTerminal,i=i.concat([{key:"HseInspectionStatus",value:t},{key:"isOverAllInspection",value:s}]);const o={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,KeyCodes:i,Entity:e},a={messageType:"critical",message:"HSE_Inspection_UpdateStatus",messageResultDetails:[{keyFields:["HSE_Inspection"],keyValues:[this.props.transportationType],isSuccess:!1,errorMessage:""}]};T()(R.Mfq,C.tW(o,this.props.tokenDetails.tokenInfo)).then((t=>{const s=t.data;this.setState({showAuthenticationLayout:!1}),a.messageType=s.IsSuccess?"success":"critical",a.messageResultDetails[0].isSuccess=s.IsSuccess,!0===s.IsSuccess?(-1===s.EntityResult.HSEInspectionStatus&&(s.EntityResult.HSEInspectionStatus=e.HSEInspectionStatus),this.props.transportationType===l.LY.RAIL?this.processRailResponse(s):this.processResponse(s)):(null===s.ErrorList[0]||""===s.ErrorList[0]||"INVALID_FILENAME_X"!==s.ErrorList[0].split(l.uV)[0]&&"UPLOADED_FILE_NOT_IMAGE"!==s.ErrorList[0].split(l.uV)[0]||this.setState({saveEnabled:!0}),a.messageResultDetails[0].errorMessage=s.ErrorList[0]),this.props.onSaved(a)})).catch((e=>{this.setState({saveEnabled:!0,showAuthenticationLayout:!1}),a.messageResultDetails[0].errorMessage=e,this.props.onSaved(a)}))}checkFileName(e){for(let t of this.state.attachments)if(t.doc.FileName===e)return!0;return!1}checkAttachmentsNumber(e){let t=0;for(let s of e)s.doc.FileMode!==l.Sm.DELETE&&(t+=1);return t}documentsInfoToAttachments(e){if(null===e)return[];const t=[];for(let s of e)s.FileMode!==l.Sm.DELETE&&(s.FileMode=null),t.push({blob:null,doc:s});return t}attachmentsToDocumentsInfo(e){const t=[];for(let s of e)t.push(s.doc);return t}getHSEInspectionResultsDoc(e,t,s){const i={ShareHolderCode:this.props.userDetails.EntityResult.PrimaryShareholder,KeyCodes:[],Entity:{HSEInspectionResultsId:e,FileName:t}};T()(R.Mhg,C.tW(i,this.props.tokenDetails.tokenInfo)).then((e=>{const t=e.data;!0===t.IsSuccess&&s(t)})).catch((e=>{console.log("Error while getting HSEInspectionResultsDoc:",e)}))}base64ToBlob(e,t){const s=atob(e);let i=s.length;const o=new Uint8Array(i);for(;i--;)o[i]=s.charCodeAt(i);return new Blob([o],{type:t})}downloadBlob(e,t){if(navigator.msSaveBlob)navigator.msSaveBlob(e,t);else{const s=document.createElementNS("http://www.w3.org/1999/xhtml","a"),i=window.URL||window.webkitURL||window;s.href=i.createObjectURL(e),s.download=t;const o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(o)}}getFunctionGroupName(){return this.props.transportationType===l.LY.RAIL?L.$b:this.props.transportationType===l.LY.MARINE?L._N:this.props.transportationType===l.LY.PIPELINE?L.t3:L.Rx}handleOperation(){return this.state.showAuthenticationLayout?this.saveHSEInspection:this.state.showUpdateAuthenticationLayout?this.handleUpdate:void 0}render(){const e=this.state.modalOpen,t=[];for(let s of this.state.attachments)s.doc.FileMode!==l.Sm.DELETE&&t.push((0,r.jsxs)("div",{className:"hse-inspection-attachments-item",children:[(0,r.jsx)("div",{className:"hse-inspection-attachments-name",onClick:()=>this.handleOpenAttachment(s),children:s.doc.FileName.split(l.uV)[0]}),(0,r.jsx)("div",{className:"hse-inspection-attachments-delete",onClick:()=>this.handleDeleteAttachments(s),children:"\xd7"})]},s.doc.FileName));return this.state.isReadyToRender?(0,r.jsxs)("div",{children:[(0,r.jsx)(n.A,{children:(0,r.jsx)(D.A,{newEntityName:"HSE Inspection - "+this.props.transportationType})}),(0,r.jsx)(n.A,{children:(0,r.jsx)(E,{HSEInspection:this.state.HSEInspection,modHSEInspection:this.state.modHSEInspection,modAssociations:this.state.modAssociations,validationErrors:this.state.validationErrors,attributeValidationErrors:this.state.attributeValidationErrors,modAttributeList:this.state.modAttributeList,handleCellDataEdit:this.handleCellDataEdit,listOptions:{transactionType:this.state.transactionTypeOptions,vehicleCode:this.state.vehicleCodeSearchOptions,locationCode:this.state.locationCodeOptions,dispatchReceiptCode:this.getDispatchReceiptSearchOptions(),roadTransportationUnit:this.state.roadTransportationUnitOptions,railWagonCode:this.state.railWagonCodeOptions,cardReaderCode:this.state.cardReaderCodeOptions},cardReader:this.state.cardReader,railWagon:this.state.railWagon,roadTransportationUnit:this.state.roadTransportationUnit,onFieldChange:this.handleChange,onInspectionItemChange:this.handleInspectionItemChange,onDetectVehicle:this.handleDetectVehicle,onCancelDetect:this.handleCancelDetect,transportationType:this.props.transportationType,dispatchReceiptLabel:this.state.dispatchReceiptLabel,isManualEntry:this.state.isManualEntry,handleUpdate:this.handleUpdate,displayTransportationUnit:this.state.displayTransportationUnit,onDispatchReceiptSearchChange:this.handleDispatchReceiptSearchChange,onVehicleSearchChange:this.handleVehicleSearchChange,handleOpenAttachmentsModal:this.handleOpenAttachmentsModal,numberOfAttachments:this.checkAttachmentsNumber(this.state.attachments)})}),(0,r.jsx)(n.A,{children:(0,r.jsx)(a.TranslationConsumer,{children:s=>(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col col-2",children:(0,r.jsx)(o.Button,{className:"backButton",onClick:this.props.onBack,content:s("Back")})}),(0,r.jsxs)("div",{className:"col col-10",style:{textAlign:"right"},children:[(0,r.jsx)(o.Button,{content:s("Save"),disabled:!this.state.saveEnabled||this.isNodeEnterpriseOrWebortal(),onClick:()=>this.handleSave()}),(0,r.jsx)(o.Button,{content:s("VehHSE_Pass"),disabled:!this.state.saveEnabled||this.isNodeEnterpriseOrWebortal(),onClick:()=>{e.pass=!0,this.setState({modalOpen:e})}}),(0,r.jsx)(o.Button,{content:s("VehHSE_Fail"),className:!0!==this.state.saveEnabled||this.isNodeEnterpriseOrWebortal()?"":"cancelButton",disabled:!this.state.saveEnabled||this.isNodeEnterpriseOrWebortal(),onClick:()=>{e.fail=!0,this.setState({modalOpen:e})}}),this.state.displayOverAllInspection?(0,r.jsx)(o.Button,{content:s("HSE_PassAll"),disabled:!this.state.passFailAllEnabled||this.isNodeEnterpriseOrWebortal(),onClick:()=>{e.passAll=!0,this.setState({modalOpen:e})}}):null,this.state.displayOverAllInspection?(0,r.jsx)(o.Button,{content:s("HSE_FailAll"),className:!0!==this.state.passFailAllEnabled||this.isNodeEnterpriseOrWebortal()?"":"cancelButton",disabled:!this.state.passFailAllEnabled||this.isNodeEnterpriseOrWebortal(),onClick:()=>{e.failAll=!0,this.setState({modalOpen:e})}}):null]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(o.Modal,{size:"mini",open:this.state.modalOpen.pass,closeOnDimmerClick:!1,children:[(0,r.jsx)(o.Modal.Content,{children:s("HSE_PassInspection")}),(0,r.jsxs)(o.Modal.Footer,{children:[(0,r.jsx)(o.Button,{content:s("AccessCardInfo_Ok"),onClick:()=>{e.pass=!1,this.setState({modalOpen:e}),this.updateHSE(1,!1)}}),(0,r.jsx)(o.Button,{content:s("AccessCardInfo_Cancel"),onClick:()=>{e.pass=!1,this.setState({modalOpen:e})}})]})]}),(0,r.jsxs)(o.Modal,{size:"mini",open:this.state.modalOpen.fail,closeOnDimmerClick:!1,children:[(0,r.jsx)(o.Modal.Content,{children:s("HSE_FailInspection")}),(0,r.jsxs)(o.Modal.Footer,{children:[(0,r.jsx)(o.Button,{content:s("AccessCardInfo_Ok"),onClick:()=>{e.fail=!1,this.setState({modalOpen:e}),this.updateHSE(2,!1)}}),(0,r.jsx)(o.Button,{content:s("AccessCardInfo_Cancel"),onClick:()=>{e.fail=!1,this.setState({modalOpen:e})}})]})]}),(0,r.jsxs)(o.Modal,{size:"mini",open:this.state.modalOpen.passAll,closeOnDimmerClick:!1,children:[(0,r.jsx)(o.Modal.Content,{children:s("HSE_PassInspection")}),(0,r.jsxs)(o.Modal.Footer,{children:[(0,r.jsx)(o.Button,{content:s("AccessCardInfo_Ok"),onClick:()=>{e.passAll=!1,this.setState({modalOpen:e}),this.updateHSE(1,!0)}}),(0,r.jsx)(o.Button,{content:s("AccessCardInfo_Cancel"),onClick:()=>{e.passAll=!1,this.setState({modalOpen:e})}})]})]}),(0,r.jsxs)(o.Modal,{size:"mini",open:this.state.modalOpen.failAll,closeOnDimmerClick:!1,children:[(0,r.jsx)(o.Modal.Content,{children:s("HSE_FailInspection")}),(0,r.jsxs)(o.Modal.Footer,{children:[(0,r.jsx)(o.Button,{content:s("AccessCardInfo_Ok"),onClick:()=>{e.failAll=!1,this.setState({modalOpen:e}),this.updateHSE(2,!0)}}),(0,r.jsx)(o.Button,{content:s("AccessCardInfo_Cancel"),onClick:()=>{e.failAll=!1,this.setState({modalOpen:e})}})]})]}),(0,r.jsxs)(o.Modal,{size:"small",open:this.state.modalOpen.attachments,closeOnDimmerClick:!1,placeholder:"Drop or Upload Any Image File",children:[(0,r.jsxs)(o.Modal.Content,{children:[(0,r.jsx)(o.FileDrop,{label:"File Upload",maxSize:1024*this.state.attachmentFileSetting.MaximumFileSize,multiple:!1,acceptedTypes:this.state.attachmentFileSetting.FileTypesAllowedToUpload,disabled:!this.state.addFileEnabled||!this.state.saveEnabled,onAccepted:e=>this.handleAddAttachment(e[0]),onReset:()=>this.handleResetAttachments()}),(0,r.jsx)("div",{children:t})]}),(0,r.jsx)(o.Modal.Footer,{children:(0,r.jsx)(o.Button,{content:s("Done"),onClick:()=>{e.attachments=!1,this.setState({modalOpen:e})}})})]})]})]})})}),this.state.showAuthenticationLayout||this.state.showUpdateAuthenticationLayout?(0,r.jsx)(M.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:L.i.modify,functionGroup:this.getFunctionGroupName(),handleOperation:this.handleOperation(),handleClose:this.handleAuthenticationClose}):null]}):(0,r.jsx)(O.A,{message:"Loading"})}}const V=(0,A.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})),(e=>({userActions:(0,m.zH)(y,e)})))(f)},43503:(e,t,s)=>{s.d(t,{A:()=>l});s(65043);var i=s(67907),o=s(72711),a=s(70579);function n(e){let{entityCode:t,newEntityName:s,popUpContents:n}=e;return(0,a.jsx)(i.TranslationConsumer,{children:e=>(0,a.jsx)("div",{className:"headerContainer",children:(0,a.jsxs)("div",{className:"row headerSpacing",children:[(0,a.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,a.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(s):t})}),""!==t&&void 0!==t&&n.length>0?(0,a.jsx)("div",{className:"headerItemRight",children:(0,a.jsx)(o.Popup,{element:(0,a.jsxs)("div",{children:[e(n[0].fieldName)+" ",":"," "+n[0].fieldValue,(0,a.jsx)(o.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,a.jsx)(o.List,{className:"detailsHeaderPopUp",children:n.map((t=>(0,a.jsxs)(o.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}n.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const l=n},85800:(e,t,s)=>{s.d(t,{n:()=>r});s(65043);var i=s(72711),o=s(67907),a=s(7523),n=s(35861),l=s(70579);function r(e){let{selectedAttributeList:t,handleCellDataEdit:s,attributeValidationErrors:r}=e;const c=e=>{if("0000-00-00"===e.DefaultValue)return p(e,new Date),new Date;var t=e.DefaultValue.split("-");return new Date(t[0],t[1]-1,t[2])},p=(e,t)=>{var i=new Date(t);t=i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2),s(e,t)};return(0,l.jsx)(o.TranslationConsumer,{children:e=>(0,l.jsx)("div",{className:"row",children:(0,l.jsx)("div",{className:"col-md-12 attributeDetails-wrap",children:(0,l.jsx)("div",{className:"row",children:t.map((t=>t.DataType.toLowerCase()===a.pe.STRING.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(i.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(r[t.Code]),reserveSpace:!1})}):t.DataType.toLowerCase()!==a.pe.INT.toLowerCase()&&t.DataType.toLowerCase()!==a.pe.LONG.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()!==a.pe.FLOAT.toLowerCase()&&t.DataType.toLowerCase()!==a.pe.DOUBLE.toLowerCase()||!0!==t.IsVisible?t.DataType.toLowerCase()===a.pe.BOOL.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(i.Checkbox,{className:"deviceCheckBox customDeviceCheckBox",label:e(t.DisplayName),checked:null===t.DefaultValue?"":"true"===t.DefaultValue.toString().toLowerCase(),disabled:!0===t.IsReadonly,onChange:e=>s(t,e)})}):t.DataType.toLowerCase()===a.pe.DATETIME.toLowerCase()&&!0===t.IsVisible?(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(i.DatePicker,{fluid:!0,value:null===t.DefaultValue||""===t.DefaultValue?"":c(t),label:e(t.DisplayName),displayFormat:(0,n.F1)(),showYearSelector:"true",indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>p(t,e),onTextChange:e=>{p(t,e)},error:e(r[t.Code]),reserveSpace:!1})}):null:(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(i.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue||""===t.DefaultValue?"":t.DefaultValue.toLocaleString(),indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(r[t.Code]),reserveSpace:!1})}):(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)(i.Input,{fluid:!0,label:e(t.DisplayName),value:null===t.DefaultValue?"":t.DefaultValue,indicator:!0===t.IsMandatory?"required":null,disabled:!0===t.IsReadonly,onChange:e=>s(t,e),error:e(r[t.Code]),reserveSpace:!1})})))})})})})}},15417:(e,t,s)=>{s.d(t,{$7:()=>P,AN:()=>se,AU:()=>H,Ak:()=>Ge,Ao:()=>i,B6:()=>q,C4:()=>Fe,CG:()=>$,Ct:()=>z,Cw:()=>U,EY:()=>L,G$:()=>qe,G6:()=>Qe,GF:()=>Ee,GJ:()=>V,Gj:()=>de,Gl:()=>ae,H9:()=>Ke,HB:()=>Ne,HP:()=>g,Hr:()=>Le,II:()=>ot,IQ:()=>y,Jr:()=>Y,Jx:()=>Re,Ki:()=>te,LP:()=>oe,Lv:()=>a,MK:()=>I,MX:()=>ee,Mx:()=>B,N4:()=>fe,NH:()=>Te,OF:()=>Ze,Ps:()=>k,Q7:()=>ze,QY:()=>F,SF:()=>n,Sq:()=>De,Sw:()=>le,TQ:()=>J,U7:()=>N,UH:()=>S,UO:()=>ne,V_:()=>ve,Vy:()=>we,W9:()=>ce,WN:()=>R,Wr:()=>o,Ww:()=>Q,XP:()=>Oe,Xk:()=>K,Yb:()=>Ae,Yy:()=>u,Z2:()=>Ve,ZN:()=>b,ZO:()=>me,Zu:()=>Ye,_G:()=>_,_N:()=>d,_u:()=>pe,ad:()=>re,al:()=>ye,ao:()=>w,bK:()=>G,bN:()=>T,cf:()=>M,dO:()=>Pe,dU:()=>E,dv:()=>l,eE:()=>X,g:()=>D,gG:()=>r,gS:()=>He,gT:()=>st,gW:()=>Z,gZ:()=>Je,go:()=>O,gp:()=>j,hq:()=>Me,i6:()=>et,ip:()=>he,k9:()=>C,kI:()=>m,l4:()=>Ue,l5:()=>A,lA:()=>f,lU:()=>$e,mD:()=>je,mY:()=>x,mq:()=>c,n$:()=>it,n7:()=>h,nZ:()=>be,rA:()=>xe,s$:()=>ke,s8:()=>We,se:()=>Ie,tA:()=>ge,vK:()=>tt,vs:()=>Se,w2:()=>Xe,w4:()=>Ce,wT:()=>p,wY:()=>v,wf:()=>ue,wk:()=>ie,xW:()=>W,yM:()=>_e,yO:()=>Be});const i="driver",o="carriercompany",a="shareholder",n="baseProduct",l="TRAILER",r="TRAILERCOMPARTMENT",c="terminal",p="customer",d="destination",h="finishedproduct",E="tank",u="marine_vessel",C="marine_trailercompartment",S="supplier",I="vehicle",T="vehicletrailer",R="originterminal",y="bay",m="loadingArm",A="cardreader",D="vehicleprimemover",g="meter",L="SHIPMENT",N="SHIPMENTCOMPARTMENT",H="SHIPMENTDESTINATIONCOMPARTMENT",O="SHIPMENTDETAILS",v="SHIPMENTTRAILERWEIGHBRIDGE",P="SHIPMENTTRAILER",b="SHIPMENTSTATUSTIME",M="MARINEDISPATCH",f="MARINEDISPATCHCOMPARTMENTDETAIL",V="railwagon",U="primemover",x="bcu",F="RAILRECEIPTPLAN",k="RAILRECEIPTWAGONDETAILPLAN",w="RAILUNLOADINGDETAILSFP",j="RAILUNLOADINGDETAILSBP",W="RAILUNLOADINGDETAILSADDITIVE",Y="RAILDISPATCHPLAN",G="RAILDISPATCHITEM",_="RAILDISPATCHSTATUSCHANGE",B="RAILDISPATCHWAGON",z="RAILDISPATCHWAGONDETAILPLAN",K="RAILDISPATCHWAGONWEIGHBRIDGE",q="RAILDISPATCHWAGONCOMPARTMENT",X="RAILLOADINGDETAILSFP",$="RAILLOADINGDETAILSBP",Z="RAILLOADINGDETAILSADDITIVE",Q="marineReceipt",J="UNACCOUNTEDMETERTRANSACTION",ee="UNACCOUNTEDTANKTRANSACTION",te="marineLoadingDetailsFP",se="marineLoadingDetailsAdditive",ie="marineLoadingDetailsBP",oe="marineReceiptCompartmentDetail",ae="marineUnloadingDetailsFP",ne="marineUnloadingDetailsBP",le="accessCard",re="LOADINGDETAILSFP",ce="LOADINGDETAILSBP",pe="LOADINGDETAILSADDITIVE",de="MARINERECEIPTSTATUSTIME",he="MARINEDISPATCHSTATUSTIME",Ee="RECEIPT",ue="UNLOADINGTRANSACTIONS",Ce="ORDER",Se="ORDERITEM",Ie="CONTRACT",Te="CONTRACT_ITEM",Re="RECEIPTORIGINTERMINALCOMPARTMENT",ye="GeneralTMUser_CAPTAIN",me="weighbridge",Ae="deu",De="GeneralTMUser_STAFF",ge="GeneralTMUser_VISITOR",Le="PIPELINEHEADER",Ne="SEALMASTER",He="PIPELINERECEIPT",Oe="ROADSHIPMENTSLOTINFO",ve="ROADRECEIPTSLOTINFO",Pe="MARINESHIPMENTSLOTINFO",be="MARINERECEIPTSLOTINFO",Me="PIPELINEDISPATCH",fe="PIPELINETRANSACTIONS",Ve="PIPELINEDISPATCHSTATUSTIME",Ue="PIPELINERECEIPTSTATUSTIME",xe="PROCESSCONFIG",Fe="PRODUCTALLOCATIONITEM",ke="HSEINSPECTIONSHIPMENTRIGIDTRUCK",we="HSEINSPECTIONSHIPMENTTRAILER",je="HSEINSPECTIONSHIPMENTPRIMEMOVER",We="HSEINSPECTIONSHIPMENTNONFILLINGVEHICLE",Ye="HSEINSPECTIONMARINESHIPMENTBARGE",Ge="HSEINSPECTIONMARINESHIPMENTSHIP",_e="HSEINSPECTIONSHIPMENTRAILWAGON",Be="HSEINSPECTIONSHIPMENTPIPELINE",ze="HSEINSPECTIONRECEIPTRIGIDTRUCK",Ke="HSEINSPECTIONRECEIPTTRAILER",qe="HSEINSPECTIONRECEIPTPRIMEMOVER",Xe="HSEINSPECTIONRECEIPTNONFILLINGVEHICLE",$e="HSEINSPECTIONMARINERECEIPTBARGE",Ze="HSEINSPECTIONMARINERECEIPTSHIP",Qe="HSEINSPECTIONRECEIPTRAILWAGON",Je="HSEINSPECTIONRECEIPTPIPELINE",et="SHAREHOLDERAGREEMENT",tt="COATEMPLATE",st="COAMANAGEMENT",it="COACUSTOMER",ot="COAASSIGNMENT"},35861:(e,t,s)=>{s.d(t,{F1:()=>l,i7:()=>r,r4:()=>n});var i=s(86178),o=s.n(i),a=(s(15660),s(65043),s(70579));function n(e,t){if(Array.isArray(e)){0===e.filter((e=>e.text===t)).length&&e.unshift({value:null,text:t})}return e}function l(){let e=window.navigator.userLanguage||window.navigator.language;return o().locale(e),o().localeData().longDateFormat("L")}function r(e){return(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:e}),(0,a.jsx)("div",{class:"ui red circular empty label badge  circle-padding"})]})}}}]);
//# sourceMappingURL=1568.13356445.chunk.js.map