"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[1857],{91857:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var s=a(65043),r=a(69062),n=a(40854),i=a.n(n),o=a(72067),l=a(9256),h=a(97508),c=a(46100),d=a(44192),p=(a(38726),a(65187)),u=a(43503),g=a(93779),E=a(7523),m=a(40252),x=a(53536),S=a.n(x),v=a(80312),y=a(72711),P=a(67907),D=a(70579);function R(e){let{exchangepartner:t,modExchangePartner:a,validationErrors:s,onFieldChange:r,listOptions:n}=e;return(0,D.jsx)(P.TranslationConsumer,{children:(e,i)=>(0,D.jsx)("div",{className:"detailsContainer",children:(0,D.jsxs)("div",{className:"row",children:[(0,D.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,D.jsx)(y.Input,{fluid:!0,value:a.ExchangePartnerName,indicator:"required",disabled:""!==t.ExchangePartnerName,onChange:e=>r("ExchangePartnerName",e),label:e("Exchange_Partner_Name"),error:e(s.ExchangePartnerName),reserveSpace:!1},i)}),(0,D.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,D.jsx)(y.Select,{fluid:!0,placeholder:e("FinishedProductInfo_Select"),value:null==a.SellerId?"":a.SellerId,label:e("Exchange_Partner_SellerId"),indicator:"required",options:n.ShareholderOptions,onChange:e=>{r("SellerId",e)},error:e(s.SellerId),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage")})}),(0,D.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,D.jsx)(y.Select,{fluid:!0,placeholder:e("FinishedProductInfo_Select"),value:null===a.FinalShipperID?"":a.FinalShipperID,label:e("Exchange_Partner_FinalShipper"),indicator:"required",options:n.ShareholderOptions,onChange:e=>{r("FinalShipperID",e)},error:e(s.FinalShipperID),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage")})})]})})})}R.defaultProps={isEnterpriseNode:!1,listOptions:{ShareholderOptions:[]}};var f=a(62900);class C extends s.Component{constructor(){super(...arguments),this.state={exchangepartner:S().cloneDeep(c.Hu),modExchangePartner:{},validationErrors:r.Th(d.M$),isReadyToRender:!1,saveEnabled:!1,lookUpData:null,isEnable:!0,shareHolderList:[],sharholderSerchOptions:[],sellerSharholder:[],ShareholderOptions:[],showAuthenticationLayout:!1,tempExchangePartner:{}},this.handleChange=(e,t)=>{try{const a=S().cloneDeep(this.state.modExchangePartner);a[e]=t,this.setState({modExchangePartner:a});const s=S().cloneDeep(this.state.validationErrors);void 0!==d.M$[e]&&(s[e]=r.jr(d.M$[e],t),this.setState({validationErrors:s}))}catch(a){console.log("ExchangePartnerDetailsComposite:Error occured on handleChange",a)}},this.handleReset=()=>{try{const{validationErrors:e}={...this.state},t=S().cloneDeep(this.state.exchangepartner);Object.keys(e).forEach((function(t){e[t]=""})),this.setState({modExchangePartner:{...t},validationErrors:e})}catch(e){console.log("exchangepartnerDetailsComposite:Error occured on handleReset",e)}},this.saveExchagePartner=()=>{try{this.setState({saveEnabled:!1});let e=S().cloneDeep(this.state.tempExchangePartner);""===this.state.exchangepartner.ExchangePartnerName?this.CreateExchagePartner(e):this.UpdateExchagePartner(e)}catch(e){console.log("ExchangePartnerDetailsComposite : Error in ExchangePartner")}},this.handleSave=()=>{try{if(Object.values(this.state.validationErrors).every((function(e){return""===e}))){let e=this.fillDetails();if(this.validateSave(e)){let t=S().cloneDeep(e),a=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showAuthenticationLayout:a,tempExchangePartner:t},(()=>{!1===a&&this.saveExchagePartner()}))}else this.setState({saveEnabled:!0})}}catch(e){console.log("ExchangePartnerDetailsComposite:Error occured on handleSave",e)}},this.handleShareholderSearchChange=e=>{try{let t=this.state.shareholderOptions.filter((t=>t.value.toLowerCase().includes(e.toLowerCase())));t.length>E.bM&&(t=t.slice(0,E.bM)),this.setState({shareholderSearchOptions:t})}catch(t){console.log(":Error occured on handleVehicleSearchChange",t)}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})}}componentDidMount(){try{r.pJ(this.props.userDetails.EntityResult.IsArchived),this.getExchangePartner(this.props.selectedRow),this.getSellerSharholder()}catch(e){console.log("ExchangePartnerDetailsComposite:Error occured on componentDidMount",e)}}componentWillReceiveProps(e){try{if(""!==this.state.exchangepartner.exchangePartnerName&&void 0===e.selectedRow.Name&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo){this.getExchangePartner(e.selectedRow);let t={...this.state.validationErrors};Object.keys(t).forEach((e=>{t[e]=""})),this.setState({validationErrors:t})}}catch(t){console.log("ExchangePartnerDetailsComposite:Error occured on componentWillReceiveProps",t)}}getExchangePartner(e){try{if(void 0===e.Name)return void this.setState({exchangepartner:S().cloneDeep(c.Hu),modExchangePartner:S().cloneDeep(c.Hu),isReadyToRender:!0,saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.add,v.QC)});var t=[{key:g.FR,value:e.Name}],a={ShareHolderCode:e.Name,keyDataCode:g.vf,KeyCodes:t};i()(o.Qv2,r.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({isReadyToRender:!0,exchangepartner:S().cloneDeep(t.EntityResult),modExchangePartner:S().cloneDeep(t.EntityResult),saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.QC)}):(this.setState({exchangepartner:S().cloneDeep(c.Hu),modExchangePartner:S().cloneDeep(c.Hu),isReadyToRender:!0}),console.log("Error in getexchangePartner:",t.ErrorList))})).catch((t=>{console.log("Error while getexchangePartner:",t,e)}))}catch(s){console.log("Error in get ExchangePartner",s)}}fillDetails(){try{let e=S().cloneDeep(this.state.modExchangePartner);if(console.log(this.state.ShareholderOptions),this.state.ShareholderOptions.length>=0&&""!==e.SellerId&&""!==e.FinalShipperID){let t=this.state.ShareholderOptions.findIndex((t=>t.value===e.SellerId));e.SellerId=this.state.ShareholderOptions[t].text;let a=this.state.ShareholderOptions.findIndex((t=>t.value===e.FinalShipperID));e.FinalShipperID=this.state.ShareholderOptions[a].text,this.setState({modExchangePartner:e})}return this.setState({modExchangePartner:e}),e}catch(e){console.log("ExchangePartnerDetailsComposite:Error occured on fillAttributeDetails",e)}}validateSave(e){try{var t=S().cloneDeep(this.state.validationErrors);Object.keys(d.M$).forEach((function(a){t[a]=r.jr(d.M$[a],e[a])}));let s={messageType:"critical",message:["ExchangePartnerList_SavedSuccess"],messageResultDetails:[]};e.SellerId===e.FinalShipperID&&""!==e.SellerId&&""!==e.FinalShipperID&&s.messageResultDetails.push({keyFields:["ExchangePartnerName"],keyValues:[e.ExchangePartnerName],isSuccess:!1,errorMessage:"Exchange_Partner_Seller_FinalShipper_Different"}),this.setState({validationErrors:t});var a=!0;return a&&(a=Object.values(t).every((function(e){return""===e}))),s.messageResultDetails.length>0?(this.props.onSaved(this.state.modExchangePartner,"update",s),!1):a}catch(s){console.log("error in validate save",s)}}CreateExchagePartner(e){try{let t=[{key:g.FR,value:e.ExchangePartnerName}],a={keyDataCode:g.vf,ShareHolderCode:e.ExchangePartnerName,KeyCodes:t,Entity:e},s={messageType:"critical",message:"ExchangePartnerList_SavedSuccess",messageResultDetails:[{keyFields:["Exchange_Partner_Name"],keyValues:[e.ExchangePartnerName],isSuccess:!1,errorMessage:""}]};i()(o.co7,r.tW(a,this.props.tokenDetails.tokenInfo)).then((t=>{let a=t.data;s.messageType=a.IsSuccess?"success":"critical",console.log(a),s.messageResultDetails[0].isSuccess=a.IsSuccess,!0===a.IsSuccess?this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.QC),showAuthenticationLayout:!1},(()=>this.getExchangePartner({Name:e.ExchangePartnerName}))):(s.messageResultDetails[0].errorMessage=a.ErrorList[0],this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.add,v.QC),showAuthenticationLayout:!1}),console.log("Error in ExchangePartner:",a.ErrorList)),this.props.onSaved(this.state.modExchangePartner,"add",s)})).catch((e=>{this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.add,v.QC),showAuthenticationLayout:!1}),s.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modExchangePartner,"add",s)}))}catch(t){console.log("error in create ExchangePartner",t)}}UpdateExchagePartner(e){try{let t=[{key:g.FR,value:e.ExchangePartnerName}],a={keyDataCode:g.FR,KeyCodes:t,Entity:e},s={messageType:"critical",message:"ExchangePartnerList_SavedSuccess",messageResultDetails:[{keyFields:["Exchange_Partner_Name"],keyValues:[e.ExchangePartnerName],isSuccess:!1,errorMessage:""}]};i()(o.VOK,r.tW(a,this.props.tokenDetails.tokenInfo)).then((t=>{let a=t.data;s.messageType=a.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=a.IsSuccess,!0===a.IsSuccess?this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.QC),showAuthenticationLayout:!1},(()=>this.getExchangePartner({Name:e.ExchangePartnerName}))):(s.messageResultDetails[0].errorMessage=a.ErrorList[0],this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.QC),showAuthenticationLayout:!1}),console.log("Error in update ExchangePartner:",a.ErrorList)),this.props.onSaved(this.state.modExchangePartner,"update",s)})).catch((e=>{this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,v.i.modify,v.QC),showAuthenticationLayout:!1}),s.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modExchangePartner,"update",s)}))}catch(t){console.log("Error in update exchange Partner",t)}}getSellerSharholder(){try{i()(o.b7s,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=[];null!==t.EntityResult&&(Object.keys(t.EntityResult).forEach((a=>{e.push({text:t.EntityResult[a],value:a})})),this.setState({ShareholderOptions:e,isReadyToRender:!0}))}else this.setState({ShareholderOptions:[],isReadyToRender:!0}),console.log("Error in getShareholderList:",t.ErrorList)})).catch((e=>{this.setState({ShareholderOptions:[],isReadyToRender:!0}),console.log("Error while getting ShareholderList:",e)}))}catch(e){console.log("error while getting Shareholder",e)}}render(){return this.state.isReadyToRender?(0,D.jsxs)("div",{children:[(0,D.jsx)(p.A,{children:(0,D.jsx)(u.A,{entityCode:this.state.exchangepartner.ExchangePartnerName,newEntityName:"Exchange_Partner_NewDetail"})}),(0,D.jsx)(p.A,{children:(0,D.jsx)(R,{exchangepartner:this.state.exchangepartner,modExchangePartner:this.state.modExchangePartner,validationErrors:this.state.validationErrors,onFieldChange:this.handleChange,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,onShareholderChange:this.handleShareHolderChange,listOptions:{ShareholderOptions:this.state.ShareholderOptions}})}),(0,D.jsx)(p.A,{children:(0,D.jsx)(l.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.showAuthenticationLayout?(0,D.jsx)(f.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.exchangepartner.ExchangePartnerName?v.i.add:v.i.modify,functionGroup:v.QC,handleOperation:this.saveExchagePartner,handleClose:this.handleAuthenticationClose}):null]}):(0,D.jsx)(m.A,{message:"Loading"})}}const N=(0,h.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(C)},43503:(e,t,a)=>{a.d(t,{A:()=>o});a(65043);var s=a(67907),r=a(72711),n=a(70579);function i(e){let{entityCode:t,newEntityName:a,popUpContents:i}=e;return(0,n.jsx)(s.TranslationConsumer,{children:e=>(0,n.jsx)("div",{className:"headerContainer",children:(0,n.jsxs)("div",{className:"row headerSpacing",children:[(0,n.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,n.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(a):t})}),""!==t&&void 0!==t&&i.length>0?(0,n.jsx)("div",{className:"headerItemRight",children:(0,n.jsx)(r.Popup,{element:(0,n.jsxs)("div",{children:[e(i[0].fieldName)+" ",":"," "+i[0].fieldValue,(0,n.jsx)(r.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,n.jsx)(r.List,{className:"detailsHeaderPopUp",children:i.map((t=>(0,n.jsxs)(r.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}i.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const o=i},9256:(e,t,a)=>{a.d(t,{q:()=>i});a(65043);var s=a(72711),r=a(67907),n=a(70579);function i(e){let{handleBack:t,handleSave:a,handleReset:i,saveEnabled:o}=e;return(0,n.jsx)(r.TranslationConsumer,{children:e=>(0,n.jsxs)("div",{className:"row userActionPosition",children:[(0,n.jsx)("div",{className:"col-12 col-md-3 col-lg-4",children:(0,n.jsx)(s.Button,{className:"backButton",onClick:t,content:e("Back")})}),(0,n.jsx)("div",{className:"col-12 col-md-9 col-lg-8",children:(0,n.jsxs)("div",{style:{float:"right"},children:[(0,n.jsx)(s.Button,{content:e("LookUpData_btnReset"),className:"cancelButton",onClick:i}),(0,n.jsx)(s.Button,{content:e("Save"),disabled:!o,onClick:a})]})})]})})}i.defaultProps={saveEnabled:!1}}}]);
//# sourceMappingURL=1857.ddbb4c2a.chunk.js.map