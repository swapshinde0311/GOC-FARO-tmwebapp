"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[6039],{26039:(e,t,a)=>{a.r(t),a.d(t,{default:()=>R});var s=a(65043),r=a(69062),i=a(7523),n=a(72067),l=a(93779),o=a(97508),c=a(14159),d=a(67907),u=a(72711),h=a(35861),m=a(70579);function p(e){let{listOptions:t,validationErrors:a,railMarineTransactionCommonInfo:s,onFieldChange:r,onDateTextChange:i,selectedCompartment:n,marineReceiptManualEntryEnabled:l}=e;return(0,m.jsx)(d.TranslationConsumer,{children:e=>(0,m.jsx)("div",{className:"detailsContainer",children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Select,{fluid:!0,placeholder:"Select",value:s.CompartmentSeqNoInVehicle,label:e("MarineReceiptManualEntry_CompSeqNo"),onChange:e=>r("CompartmentSeqNoInVehicle",e),indicator:"required",options:t.compartmentSeqNoInVehicleList,reserveSpace:!1,search:!1,multiple:!1,noResultsMessage:e("noResultsMessage"),error:e(a.CompartmentSeqNoInVehicle),disabled:null===n.ReceiptCompartmentStatus})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Select,{fluid:!0,placeholder:"Select",value:s.BayCode,label:e("MarineReceiptManualEntry_Bay"),indicator:"required",options:t.berthList,onChange:e=>r("BayCode",e),reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),error:e(a.BayCode),disabled:!l})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Select,{fluid:!0,placeholder:"Select",label:e("BCU_Code"),value:s.BCUCode,indicator:"required",options:t.bcuCodeList,onChange:e=>r("BCUCode",e),reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),error:e(a.BCUCode),disabled:!l})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Select,{fluid:!0,placeholder:"Select",value:s.UnLoadingArm,label:e("MarineReceiptManualEntry_UnloadingArm"),options:t.unLoadingArmList,onChange:e=>r("UnLoadingArm",e),reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),error:e(a.UnLoadingArm),disabled:!l})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.DatePicker,{fluid:!0,label:e("MarineReceiptManualEntry_UnloadStartTime"),value:new Date(s.StartTime),onChange:e=>r("StartTime",e),type:"datetime",disablePast:!1,indicator:"required",reserveSpace:!1,disableFuture:!0,minuteStep:1,displayFormat:(0,h.F1)(),onTextChange:(e,t)=>{i("StartTime",e,t)},error:e(a.StartTime),disabled:!l})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.DatePicker,{fluid:!0,label:e("MarineReceiptManualEntry_UnloadEndTime"),value:new Date(s.EndTime),onChange:e=>r("EndTime",e),type:"datetime",disablePast:!1,indicator:"required",reserveSpace:!1,disableFuture:!0,minuteStep:1,displayFormat:(0,h.F1)(),onTextChange:(e,t)=>{i("EndTime",e,t)},error:e(a.EndTime),disabled:!l})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("MarineReceiptManualEntry_FinishedProduct"),value:s.FinishedProductCode,disabled:!0,onChange:e=>r("FinishedProductCode",e),reserveSpace:!1,error:e(a.FinishedProductCode)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Select,{fluid:!0,placeholder:"Select",indicator:"required",label:e("MarineReceiptManualEntry_QuantityUOM"),value:s.QuantityUOM,onChange:e=>r("QuantityUOM",e),options:(0,h.r4)(t.quantityUOMList,e("Common_Select")),reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),error:e(a.QuantityUOM),disabled:!l})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("MarineReceiptManualEntry_TransactionNo"),value:s.TransactionID,onChange:e=>r("TransactionID",e),reserveSpace:!1,error:e(a.TransactionID),disabled:!l})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("MarineReceiptManualEntry_Remarks"),value:s.Remarks,onChange:e=>r("Remarks",e),reserveSpace:!1,error:e(a.Remarks),disabled:!l})})]})})})}var M=a(65187),C=a(85800);function E(e){let{validationErrors:t,listOptions:a,onFieldChange:s,railMarineTransactionCommonInfo:i,selectedAttributeList:n,handleAttributeCellDataEdit:l,attributeValidationErrors:o,isEnterpriseNode:c}=e;const p=(e,t)=>{let a=[];return a=e.find((e=>e.TerminalCode===t)),a.attributeValidationErrors};return(0,m.jsx)(d.TranslationConsumer,{children:e=>(0,m.jsx)("div",{className:"detailsContainer",children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,indicator:"required",label:e("GrossQuantity"),value:i.GrossQuantity,onChange:e=>s("GrossQuantity",e),reserveSpace:!1,error:e(t.GrossQuantity)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("MarineReceiptManualEntry_NetQuantity"),value:i.NetQuantity,onChange:e=>s("NetQuantity",e),reserveSpace:!1,error:e(t.NetQuantity)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("MarineReceiptManualEntry_Temperature"),value:i.Temperature,onChange:e=>s("Temperature",e),reserveSpace:!1,error:e(t.Temperature)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Select,{fluid:!0,placeholder:"Select",label:e("MarineReceiptManualEntry_TemperatureUOM"),value:i.TemperatureUOM,onChange:e=>s("TemperatureUOM",e),options:(0,h.r4)(a.temperatureUOMList,e("Common_Select")),reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),error:e(t.TemperatureUOM)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("Density"),value:i.ProductDensity,onChange:e=>s("ProductDensity",e),reserveSpace:!1,error:e(t.ProductDensity)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Select,{fluid:!0,placeholder:"Select",label:e("BaseProductInfox_UOM"),value:i.ProductDensityUOM,onChange:e=>s("ProductDensityUOM",e),options:(0,h.r4)(a.densityUOMList,e("Common_Select")),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage"),error:e(t.ProductDensityUOM)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("MarineDispatchManualEntry_ReferenceDensity"),value:i.ReferenceDensity,onChange:e=>s("ReferenceDensity",e),reserveSpace:!1,error:e(t.ReferenceDensity)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Select,{fluid:!0,placeholder:"Select",label:e("MeterCode"),value:i.MeterCode,onChange:e=>s("MeterCode",e),options:(0,h.r4)(a.meterCodeList,e("Common_Select")),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage"),error:e(t.MeterCode)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("MarineReceiptManualEntry_StartTotalizer"),value:i.StartTotalizer,onChange:e=>s("StartTotalizer",e),reserveSpace:!1,error:e(t.StartTotalizer)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("EndTotalizer"),value:i.EndTotalizer,onChange:e=>s("EndTotalizer",e),reserveSpace:!1,error:e(t.EndTotalizer)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("MarineReceiptManualEntry_NetStartTotalizer"),value:i.NetStartTotalizer,onChange:e=>s("NetStartTotalizer",e),reserveSpace:!1,error:e(t.NetStartTotalizer)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("MarineReceiptManualEntry_NetEndTotalizer"),value:i.NetEndTotalizer,onChange:e=>s("NetEndTotalizer",e),reserveSpace:!1,error:e(t.NetEndTotalizer)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("ViewMarineUnloadingDetails_Mass"),value:i.GrossMass,onChange:e=>s("GrossMass",e),reserveSpace:!1,error:e(t.GrossMass)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Select,{fluid:!0,placeholder:"Select",label:e("BCU_MassUOM"),value:i.MassUOM,onChange:e=>s("MassUOM",e),options:(0,h.r4)(a.massUOMList,e("Common_Select")),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage"),error:e(t.MassUOM)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("MarineReceiptManualEntry_Pressure"),value:i.Pressure,onChange:e=>s("Pressure",e),reserveSpace:!1,error:e(t.Pressure)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Select,{fluid:!0,placeholder:"Select",label:e("BCU_PressureUOM"),value:i.PressureUOM,onChange:e=>s("PressureUOM",e),options:(0,h.r4)(a.pressureUOMList,e("Common_Select")),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage"),error:e(t.PressureUOM)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("LoadingDetailsEntry_CalculatedGross"),value:i.CalculatedGross,onChange:e=>s("CalculatedGross",e),reserveSpace:!1,error:e(t.CalculatedGross)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("LoadingDetailsEntry_CalculatedNet"),value:i.CalculatedNet,onChange:e=>s("CalculatedNet",e),reserveSpace:!1,error:e(t.CalculatedNet)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Select,{fluid:!0,placeholder:"Select",label:e("LoadingDetailsEntry_CalculatedValueUOM"),value:i.CalculatedValueUOM,onChange:e=>s("CalculatedValueUOM",e),options:r.Zj(a.calculatedValueUOMList),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage"),error:e(t.CalculatedValueUOM)})}),n.length>0?n.map((t=>(0,m.jsx)(M.A,{children:(0,m.jsx)(u.Accordion,{children:(0,m.jsx)(u.Accordion.Content,{className:"attributeAccordian",title:c?t.TerminalCode+" - "+e("Attributes_Header"):e("Attributes_Header"),children:(0,m.jsx)(C.n,{selectedAttributeList:t.attributeMetaDataList,handleCellDataEdit:l,attributeValidationErrors:p(o,t.TerminalCode)})})})}))):null]})})})}function g(e){let{validationErrors:t,listOptions:a,index:s,onFieldChange:i,railMarineTransactionBPInfo:n,code:l,selectedAttributeList:o,handleAttributeCellDataEdit:c,attributeValidationErrors:p,isEnterpriseNode:E}=e;const g=(e,t)=>{let a=[];return a=e.find((e=>e.TerminalCode===t)),a.attributeValidationErrors};return(0,m.jsx)(d.TranslationConsumer,{children:e=>(0,m.jsxs)("div",{className:"detailsContainer",children:[(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,indicator:"required",label:e("GrossQuantity"),value:n.GrossQuantity,onChange:e=>i("GrossQuantity",e,l),reserveSpace:!1,error:e(t.GrossQuantity)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("MarineReceiptManualEntry_NetQuantity"),value:n.NetQuantity,onChange:e=>i("NetQuantity",e,l),reserveSpace:!1,error:e(t.NetQuantity)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("MarineReceiptManualEntry_Temperature"),value:n.Temperature,onChange:e=>i("Temperature",e,l),reserveSpace:!1,error:e(t.Temperature)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Select,{fluid:!0,placeholder:"Select",label:e("MarineReceiptManualEntry_TemperatureUOM"),value:n.TemperatureUOM,onChange:e=>i("TemperatureUOM",e,l),options:(0,h.r4)(a.temperatureUOMList,e("Common_Select")),reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage"),error:e(t.TemperatureUOM)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("Density"),value:n.ProductDensity,onChange:e=>i("ProductDensity",e,l),reserveSpace:!1,error:e(t.ProductDensity)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Select,{fluid:!0,placeholder:"Select",label:e("BaseProductInfox_UOM"),value:n.ProductDensityUOM,onChange:e=>i("ProductDensityUOM",e,l),options:(0,h.r4)(a.densityUOMList,e("Common_Select")),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage"),error:e(t.ProductDensityUOM)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("MarineDispatchManualEntry_ReferenceDensity"),value:n.ReferenceDensity,onChange:e=>i("ReferenceDensity",e,l),reserveSpace:!1,error:e(t.ReferenceDensity)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Select,{fluid:!0,placeholder:"Select",label:e("MeterCode"),value:n.MeterCode,onChange:e=>i("MeterCode",e,l),options:(0,h.r4)(a.meterCodeList,e("Common_Select")),indicator:"required",reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage"),error:e(t.MeterCode)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("MarineReceiptManualEntry_StartTotalizer"),value:n.StartTotalizer,onChange:e=>i("StartTotalizer",e,l),reserveSpace:!1,error:e(t.StartTotalizer)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("EndTotalizer"),value:n.EndTotalizer,onChange:e=>i("EndTotalizer",e,l),reserveSpace:!1,error:e(t.EndTotalizer)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("MarineReceiptManualEntry_NetStartTotalizer"),value:n.NetStartTotalizer,onChange:e=>i("NetStartTotalizer",e,l),reserveSpace:!1,error:e(t.NetStartTotalizer)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("MarineReceiptManualEntry_NetEndTotalizer"),value:n.NetEndTotalizer,onChange:e=>i("NetEndTotalizer",e,l),reserveSpace:!1,error:e(t.NetEndTotalizer)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("ViewMarineUnloadingDetails_Mass"),value:n.GrossMass,onChange:e=>i("GrossMass",e,l),reserveSpace:!1,error:e(t.GrossMass)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Select,{fluid:!0,placeholder:"Select",label:e("BCU_MassUOM"),value:n.MassUOM,onChange:e=>i("MassUOM",e,l),options:(0,h.r4)(a.massUOMList,e("Common_Select")),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage"),error:e(t.MassUOM)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Select,{fluid:!0,placeholder:"Select",label:e("Marine_ReceiptCompDetail_Tank"),value:n.TankCode,options:(0,h.r4)(a.tankList[s],e("Common_Select")),onChange:e=>i("TankCode",e,l),reserveSpace:!1,search:!1,noResultsMessage:e("noResultsMessage")})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("MarineReceiptManualEntry_Pressure"),value:n.Pressure,onChange:e=>i("Pressure",e,l),reserveSpace:!1,error:e(t.Pressure)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Select,{fluid:!0,placeholder:"Select",label:e("BCU_PressureUOM"),value:n.PressureUOM,onChange:e=>i("PressureUOM",e,l),options:(0,h.r4)(a.pressureUOMList,e("Common_Select")),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage"),error:e(t.PressureUOM)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("ViewMarineUnloadingDetails_TankStartGrossQuantity"),value:n.TankStartGrossQuantity,onChange:e=>i("TankStartGrossQuantity",e,l),reserveSpace:!1,error:e(t.TankStartGrossQuantity)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("ViewMarineUnloadingDetails_TankEndGrossQuantity"),value:n.TankEndGrossQuantity,onChange:e=>i("TankEndGrossQuantity",e,l),reserveSpace:!1,error:e(t.TankEndGrossQuantity)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("ViewMarineUnloadingDetails_TankStartNetQuantity"),value:n.TankStartNetQuantity,onChange:e=>i("TankStartNetQuantity",e,l),reserveSpace:!1,error:e(t.TankStartNetQuantity)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("ViewMarineUnloadingDetails_TankEndNetQuantity"),value:n.TankEndNetQuantity,onChange:e=>i("TankEndNetQuantity",e,l),reserveSpace:!1,error:e(t.TankEndNetQuantity)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("ViewMarineUnloadingDetails_TankStartGrossMass"),value:n.TankStartGrossMass,onChange:e=>i("TankStartGrossMass",e,l),reserveSpace:!1,error:e(t.TankStartGrossMass)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("ViewMarineUnloadingDetails_TankEndGrossMass"),value:n.TankEndGrossMass,onChange:e=>i("TankEndGrossMass",e,l),reserveSpace:!1,error:t.TankEndGrossMass})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("LoadingDetailsEntry_TankStartPressure"),value:n.TankStartPressure,onChange:e=>i("TankStartPressure",e,l),reserveSpace:!1,error:e(t.TankStartPressure)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("LoadingDetailsEntry_TankEndPressure"),value:n.TankEndPressure,onChange:e=>i("TankEndPressure",e,l),reserveSpace:!1,error:e(t.TankEndPressure)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("LoadingDetailsEntry_CalculatedGross"),value:n.CalculatedGross,onChange:e=>i("CalculatedGross",e,l),reserveSpace:!1,error:e(t.CalculatedGross)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Input,{fluid:!0,label:e("LoadingDetailsEntry_CalculatedNet"),value:n.CalculatedNet,onChange:e=>i("CalculatedNet",e,l),reserveSpace:!1,error:e(t.CalculatedNet)})}),(0,m.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,m.jsx)(u.Select,{fluid:!0,placeholder:"Select",label:e("LoadingDetailsEntry_CalculatedValueUOM"),value:n.CalculatedValueUOM,onChange:e=>i("CalculatedValueUOM",e,l),options:r.Zj(a.calculatedValueUOMList),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage"),error:e(t.CalculatedValueUOM)})})]}),o.length>0?o.map((t=>(0,m.jsx)(M.A,{children:(0,m.jsx)(u.Accordion,{children:(0,m.jsx)(u.Accordion.Content,{className:"attributeAccordian",title:E?t.TerminalCode+" - "+e("Attributes_Header"):e("Attributes_Header"),children:(0,m.jsx)(C.n,{selectedAttributeList:t.attributeMetaDataList,handleCellDataEdit:(e,t)=>{c(e,t,l)},attributeValidationErrors:g(p,t.TerminalCode)})})})}))):null]})})}g.defaultProps={isEnterpriseNode:!1};var y=a(40252),v=a(9256),T=a(46100),S=a(44192),b=a(11981),f=a(43503),D=a(53536),L=a.n(D),U=a(40854),P=a.n(U),O=a(15417),I=a(80312),j=a(62900);class N extends s.Component{constructor(){super(...arguments),this.state={railMarineTransactionCommonInfo:L().cloneDeep(T.f3),validationErrors:r.Th(S.j9),railMarineTransactionBPInfo:{},validationBPErrors:{},isReadyToRender:!1,saveEnabled:!0,selectedCompartment:{},compartmentSeqNoInVehicleList:[],receiptCompartmentDetails:[],productList:[],berthList:[],bcuCodeList:[],unLoadingArmList:[],quantityUOMList:[],temperatureUOMList:[],densityUOMList:[],meterCodeList:[],massUOMList:[],pressureUOMList:[],calculatedValueUOMList:[],tankList:{},activeIndex:0,attribute:[],selectedAttributeFPList:[],selectedAttributeBPList:{},attributeUnloadingDetailsFPDataList:[],attributeUnloadingDetailsBPDataList:[],attributeValidationBPErrors:{},attributeValidationFPErrors:[],marineReceiptManualEntryEnabled:!1,showAuthenticationLayout:!1},this.handleChange=(e,t)=>{try{let a=L().cloneDeep(this.state.railMarineTransactionCommonInfo);const s=L().cloneDeep(this.state.validationErrors);if(a[e]=t,this.setState({railMarineTransactionCommonInfo:a}),void 0!==S.j9[e]&&(s[e]=r.jr(S.j9[e],t),this.setState({validationErrors:s})),"CompartmentSeqNoInVehicle"===e){this.getselectedCompartment(t);let e=L().cloneDeep(T.f3);""!==t&&(e.CompartmentSeqNoInVehicle=t,e.QuantityUOM=this.props.QuantityUOM,e.StartTime=new Date,e.EndTime=new Date);const a={...this.state.validationErrors};Object.keys(a).forEach((function(e){a[e]=""})),this.setState({railMarineTransactionCommonInfo:e,validationErrors:a,bcuCodeList:[],unLoadingArmList:[],saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.modify,I.au)})}"BayCode"===e?null===t?this.setState({bcuCodeList:[]}):this.getBCUListByBerth(t):"BCUCode"===e?this.GetUnloadingArmListByBCU(t):"UnLoadingArm"===e&&this.setState({railMarineTransactionCommonInfo:a},(()=>{this.GetMetersForLA()}))}catch(a){console.log("MarineReceiptManualEntryDetails:Error occured on handleChange",a)}},this.handleBPChange=(e,t,a)=>{try{const s=L().cloneDeep(this.state.railMarineTransactionBPInfo),i=L().cloneDeep(this.state.validationBPErrors);s[a][e]=t,this.setState({railMarineTransactionBPInfo:s}),void 0!==S.JH[e]&&(i[a][e]=r.jr(S.JH[e],t),this.setState({validationBPErrors:i}))}catch(s){console.log("MarineReceiptManualEntryDetails:Error occured on handleChange",s)}},this.handleFPAttributeCellDataEdit=(e,t)=>{try{const a=L().cloneDeep(this.state.attributeValidationFPErrors);a.forEach((a=>{a.TerminalCode===e.TerminalCode&&(a.attributeValidationErrors[e.Code]=r.I5(e,t))})),this.setState({attributeValidationFPErrors:a}),e.DataType!==i.IB.INT&&e.DataType!==i.IB.LONG&&e.DataType!==i.IB.FLOAT&&e.DataType!==i.IB.DOUBLE||(t=r.bo(t)),e.DefaultValue=t,this.setState({attribute:e})}catch(a){console.log("MarineReceiptManualEntryDetails:Error occured on handleFPAttributeCellDataEdit",a)}},this.handleBPAttributeCellDataEdit=(e,t,a)=>{try{const s=L().cloneDeep(this.state.attributeValidationBPErrors);s[a].forEach((a=>{a.TerminalCode===e.TerminalCode&&(a.attributeValidationErrors[e.Code]=r.I5(e,t))})),this.setState({attributeValidationBPErrors:s}),e.DataType!==i.IB.INT&&e.DataType!==i.IB.LONG&&e.DataType!==i.IB.FLOAT&&e.DataType!==i.IB.DOUBLE||(t=r.bo(t)),e.DefaultValue=t,this.setState({attribute:e})}catch(s){console.log("MarineReceiptManualEntryDetails:Error occured on handleBPAttributeCellDataEdit",s)}},this.addLoadingDetails=()=>{try{this.setState({saveEnabled:!1,marineReceiptManualEntryEnabled:!1}),this.createManualEntry()}catch(e){console.log("Marine Loading DetailsComposite : Error in save Marine Loading details")}},this.handleSave=()=>{try{if(this.validateSave()){this.fillFPAttributeDetails(this.state.railMarineTransactionCommonInfo),this.fillBPAttributeDetails(this.state.railMarineTransactionBPInfo);let e=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showAuthenticationLayout:e},(()=>{!1===e&&this.addLoadingDetails()}))}else this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.modify,I.au)})}catch(e){console.log("MarineReceiptManualEntryDetailsComposite:Error occured on handleSave",e)}},this.handleReset=()=>{try{const e={...this.state.validationErrors},t=L().cloneDeep(T.f3);t.StartTime=new Date,t.EndTime=new Date,t.QuantityUOM=this.props.QuantityUOM,Object.keys(e).forEach((function(t){e[t]=""})),this.setState({validationErrors:e,activeIndex:0,bcuCodeList:[],unLoadingArmList:[],railMarineTransactionCommonInfo:t,selectedAttributeFPList:[],selectedAttributeBPList:{},attributeUnloadingDetailsFPDataList:[],attributeUnloadingDetailsBPDataList:[],attributeValidationBPErrors:{},attributeValidationFPErrors:[],saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.modify,I.au),marineReceiptManualEntryEnabled:!1}),this.handleResetForCompartmentSeqNoInVehicle()}catch(e){console.log("MarineReceiptManualEntryDetails:Error occured on handleChange",e)}},this.handleDateTextChange=(e,t,a)=>{try{var s=L().cloneDeep(this.state.validationErrors),r=L().cloneDeep(this.state.railMarineTransactionCommonInfo);s[e]=a,r[e]=t,this.setState({validationErrors:s,railMarineTransactionCommonInfo:r})}catch(a){console.log("MarineReceiptManualEntryDetails:Error occured on handleDateTextChange",a)}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})}}getMarineReceiptManualEntryEnabled(e){let t=Object.keys(i.vy),a="";for(const s of t)if(i.vy[s]===e.ReceiptCompartmentStatus){a=s;break}P()(n.MfI+"?ShareholderCode="+e.ShareholderCode+"&ReceiptStatus="+this.props.ReceiptStatus+"&ReceiptCompartmentStatus="+a,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let{marineReceiptManualEntryEnabled:e}=this.state;e="TRUE"===t.EntityResult,this.setState({marineReceiptManualEntryEnabled:e})}else this.setState({marineReceiptManualEntryEnabled:!1}),console.log("Error in getMarineReceiptManualEntryEnabled:",t.ErrorList)})).catch((e=>{console.log("Error while getting Marine Receipt ManualEntry Enabled:",e)}))}getBerthList(){P()(n.sML,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult.Table,s=[];a.forEach((e=>{s.push(e.Code)})),this.setState({berthList:r.Zj(s)})}else console.log("Error in GetMarineUOMListByType:",t.ErrorList)})).catch((e=>{console.log("Error while GetMarineUOMListByType:",e)}))}getBCUDetails(e){try{var t=[{key:l.wX,value:e}],a={ShareHolderCode:"",keyDataCode:l.wX,KeyCodes:t};P()(n.T1y,r.tW(a,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;if(!0===t.IsSuccess){let e=t.EntityResult,a=L().cloneDeep(this.state.railMarineTransactionCommonInfo);a.TemperatureUOM=e.TemperatureUOM,a.ProductDensityUOM=e.DensityUOM;let s=L().cloneDeep(this.state.railMarineTransactionBPInfo);null!=s&&Object.keys(s).forEach((t=>{s[t].TemperatureUOM=e.TemperatureUOM,s[t].ProductDensityUOM=e.DensityUOM})),this.setState({railMarineTransactionCommonInfo:a,railMarineTransactionBPInfo:s})}}))}catch(s){console.log("TruckShipmentManualEntryDetailsComposite:Error while getting getBCUDeviceDetails")}}GetMetersForLA(){const e=L().cloneDeep(this.state.railMarineTransactionCommonInfo);let t="",a="";if(t=e.BCUCode,a=e.UnLoadingArm,""!==t&&""!==a)try{var s=[{key:l.Dm,value:i.Dm.MARINE_BCUVIEW},{key:l.wX,value:t},{key:l.uw,value:this.props.ActualTerminalCode}],o={ShareHolderCode:"",keyDataCode:l.Dm,KeyCodes:s};P()(n._xh,r.tW(o,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess&&Array.isArray(t.EntityResult)&&t.EntityResult.length>0){let e=t.EntityResult[0].AssociatedArmsList.find((e=>e.Code===a));if(null!==e){let t=[];t=e.AssociatedMeterList.find((e=>"MAINLINE"===e.MeterLineType));let a="",s=[];if(null!==t&&""!==t&&(t.MeterList.forEach((e=>{s.push(e.Code)})),this.setState({meterCodeList:r.Zj(s)}),1===t.MeterList.length&&(a=t.MeterList[0].Code)),""!==a){let e=L().cloneDeep(this.state.railMarineTransactionCommonInfo);e.MeterCode=a;let t=L().cloneDeep(this.state.railMarineTransactionBPInfo);null!=t&&Object.keys(t).forEach((e=>{t[e].MeterCode=a})),this.setState({railMarineTransactionBPInfo:t,railMarineTransactionCommonInfo:e})}}}}))}catch(c){console.log("SiteTreeView:Error occured in GetMetersForLA",c)}}getQuantityUOMList(){P()(n.N6z+"?TypeName="+i.El.QuantityUOM,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult.Table,s=[];a.forEach((e=>{s.push(e.Code)})),this.setState({quantityUOMList:r.Zj(s)})}else console.log("Error in getQuantityUOMList:",t.ErrorList)})).catch((e=>{console.log("Error while getQuantityUOMList:",e)}))}getTemperatureUOMList(){P()(n.N6z+"?TypeName="+i.El.TemperatureUOM,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult.Table,s=[];a.forEach((e=>{s.push(e.Code)})),this.setState({temperatureUOMList:r.Zj(s)})}else console.log("Error in getTemperatureUOMList:",t.ErrorList)})).catch((e=>{console.log("Error while getTemperatureUOMList:",e)}))}getDensityUOMList(){P()(n.N6z+"?TypeName="+i.El.DensityUOM,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult.Table,s=[];a.forEach((e=>{s.push(e.Code)})),this.setState({densityUOMList:r.Zj(s)})}else console.log("Error in getDensityUOMList:",t.ErrorList)})).catch((e=>{console.log("Error while getDensityUOMList:",e)}))}getMeterCodeList(){P()(n.yXV,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult.Table,s=[];a.forEach((e=>{s.push(e.Code)})),this.setState({meterCodeList:r.Zj(s)})}else console.log("Error in GetMarineMeterList:",t.ErrorList)})).catch((e=>{console.log("Error while GetMarineMeterList:",e)}))}getMassUOMList(){P()(n.N6z+"?TypeName="+i.El.MassUOM,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult.Table,s=[];a.forEach((e=>{s.push(e.Code)})),this.setState({massUOMList:r.Zj(s)})}else console.log("Error in getMassUOMList:",t.ErrorList)})).catch((e=>{console.log("Error while getMassUOMList:",e)}))}getPressureUOMList(){P()(n.N6z+"?TypeName="+i.El.PressureUOM,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult.Table,s=[];a.forEach((e=>{s.push(e.Code)})),this.setState({pressureUOMList:r.Zj(s)})}else console.log("Error in getPressureUOMList:",t.ErrorList)})).catch((e=>{console.log("Error while getPressureUOMList:",e)}))}getCalculatedValueUOMList(){P()(n.N6z+"?TypeName="+i.El.CalculatedValueUOM,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult.Table,s=[];a.forEach((e=>{s.push(e.Code)})),this.setState({calculatedValueUOMList:s})}else console.log("Error in getCalculatedValueUOMList:",t.ErrorList)})).catch((e=>{console.log("Error while getCalculatedValueUOMList:",e)}))}getBCUListByBerth(e){P()(n.XRM+"?Berth="+e,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){var a=t.EntityResult,s=[];if(a.forEach((e=>{s.push(e.DeviceCode)})),this.setState({bcuCodeList:r.Zj(s)}),1===s.length){let e=L().cloneDeep(this.state.railMarineTransactionCommonInfo);e.BCUCode=s[0],this.setState({railMarineTransactionCommonInfo:e}),this.getBCUDetails(s[0]),this.GetUnloadingArmListByBCU(s[0])}}else console.log("Error in GetMarineBCUListByBerth:",t.ErrorList)})).catch((e=>{console.log("Error while GetMarineBCUListByBerth:",e)}))}GetUnloadingArmListByBCU(e){let t=L().cloneDeep(this.state.railMarineTransactionCommonInfo);P()(n.OC2+"?BCUCode="+e,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var a=e.data;if(!0===a.IsSuccess){var s=a.EntityResult.Table,i=[];s.forEach((e=>{i.push(e.LoadingArmCode)})),this.setState({unLoadingArmList:r.Zj(i)}),1===i.length&&(t.UnLoadingArm=i[0],this.setState({railMarineTransactionCommonInfo:t}),this.GetMetersForLA())}else console.log("Error in GetMarineLoadingArmListByBCU:",a.ErrorList)})).catch((e=>{console.log("Error while GetMarineLoadingArmListByBCU:",e)}))}getTankList(e,t){P()(n.n16+"?AdditiveCode=&BaseProductCode="+e.code,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var a=e.data;if(!0===a.IsSuccess){var s=a.EntityResult.Table,i=this.state.tankList;i[t]=[],s.forEach((e=>{i[t].push(e.Code)})),i[t]=r.Zj(i[t]),this.setState({tankList:i})}else console.log("Error in GetMarineTankList:  "+a.ErrorList)})).catch((e=>{console.log("Error while GetMarineTankList:"+e)}))}getPartialMarineReceiptData(){var e=[{key:"MarineReceiptCode",value:this.props.ReceiptCode},{key:"CompartmentSeqNoInVehicle",value:this.state.selectedCompartment.CompartmentSeqNoInVehicle}],t={ShareHolderCode:this.state.selectedCompartment.ShareholderCode,keyDataCode:l.UB,KeyCodes:e};P()(n.MSB,r.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{this.setState({productList:e.data.EntityResult.Table}),this.state.productList.forEach(((e,t)=>{this.getTankList(e,t),this.handleProductDetail(e)})),this.initializePartialAttribute(),this.getAttributes()})).catch((e=>{console.log("Error while getPartialMarineReceiptData:",e)}))}handleProductDetail(e){const{railMarineTransactionBPInfo:t,validationBPErrors:a}=this.state;t[e.code]=L().cloneDeep(T.gG),a[e.code]=r.Th(S.JH),this.setState({railMarineTransactionBPInfo:t,validationBPErrors:a})}getReceiptCompartmentDetails(){const{ReceiptCode:e}=this.props;void 0!==e?P()(n.ROG+"?MarineReceiptCode="+e,r.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?(this.setState({receiptCompartmentDetails:t.EntityResult}),this.getCompartmentSeqNoInVehicleList()):(this.setState({receiptCompartmentDetails:[]}),console.log("Error in getReceiptCompartmentDetails:",t.ErrorList))})).catch((e=>{console.log("Error while getting receipt compartment details:",e)})):this.setState({receiptCompartmentDetails:[]})}getCompartmentSeqNoInVehicleList(){let e=[];this.state.receiptCompartmentDetails.forEach((t=>{e.push(t.CompartmentSeqNoInVehicle)})),this.setState({compartmentSeqNoInVehicleList:r.Zj(e)})}getselectedCompartment(e){let t=this.state.receiptCompartmentDetails.find((t=>t.CompartmentSeqNoInVehicle===+e));this.setState({selectedCompartment:t,activeIndex:0,railMarineTransactionBPInfo:{},validationBPErrors:{}},(()=>{this.handleChange("FinishedProductCode",this.state.selectedCompartment.FinishedProductCode),this.getMarineReceiptManualEntryEnabled(t),this.getPartialMarineReceiptData()}))}componentDidMount(){this.setDefaultValues(),this.getReceiptCompartmentDetails(),this.getBerthList(),this.getQuantityUOMList(),this.getTemperatureUOMList(),this.getDensityUOMList(),this.getMeterCodeList(),this.getMassUOMList(),this.getPressureUOMList(),this.getCalculatedValueUOMList(),this.setState({isReadyToRender:!0})}setDefaultValues(){let e=L().cloneDeep(this.state.railMarineTransactionCommonInfo);e.StartTime=new Date,e.EndTime=new Date,e.QuantityUOM=this.props.QuantityUOM,this.setState({railMarineTransactionCommonInfo:e})}initializePartialAttribute(){let e=Object.keys(this.state.railMarineTransactionBPInfo),{selectedAttributeBPList:t}=this.state;e.forEach((e=>{t[e]=[]})),this.setState({selectedAttributeBPList:t,selectedAttributeFPList:[],attribute:[]})}getAttributes(){try{P()(n.fKH,r.tW([O.Gl,O.UO],this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){let e=Object.keys(this.state.railMarineTransactionBPInfo),{attributeValidationBPErrors:a}=this.state;e.forEach((e=>{a[e]=r.Fl(t.EntityResult.marineUnloadingDetailsBP)})),this.setState({attributeUnloadingDetailsFPDataList:L().cloneDeep(t.EntityResult.marineUnloadingDetailsFP),attributeValidationFPErrors:r.Fl(t.EntityResult.marineUnloadingDetailsFP),attributeUnloadingDetailsBPDataList:L().cloneDeep(t.EntityResult.marineUnloadingDetailsBP),attributeValidationBPErrors:a},(()=>{this.props.userDetails.EntityResult.IsEnterpriseNode?(this.state.attributeUnloadingDetailsBPDataList.length>0&&this.terminalSelectionChangeBP([this.state.attributeUnloadingDetailsBPDataList[0].TerminalCode]),this.state.attributeUnloadingDetailsFPDataList.length>0&&this.terminalSelectionChangeFP([this.state.attributeUnloadingDetailsFPDataList[0].TerminalCode])):this.localNodeAttribute()}))}else console.log("Failed to get Attributes")}))}catch(e){console.log("Error while getting Attributes:",e)}}localNodeAttribute(){try{var e=L().cloneDeep(this.state.attributeUnloadingDetailsBPDataList),t=L().cloneDeep(this.state.attributeUnloadingDetailsFPDataList);Array.isArray(e)&&e.length>0&&this.terminalSelectionChangeBP([e[0].TerminalCode]),Array.isArray(t)&&t.length>0&&this.terminalSelectionChangeFP([t[0].TerminalCode])}catch(a){console.log("MarineReceiptManualEntryDetails:Error occured on localNodeAttribute",a)}}terminalSelectionChangeFP(e){try{let r=[];var t=[],a=[];t=L().cloneDeep(this.state.attributeUnloadingDetailsFPDataList),a=L().cloneDeep(this.state.selectedAttributeFPList);const i=L().cloneDeep(this.state.attributeValidationFPErrors);var s=L().cloneDeep(T.f3);e.forEach((e=>{var i=a.find((t=>t.TerminalCode===e));void 0===i?t.forEach((function(t){if(t.TerminalCode===e){var a=s.Attributes.find((t=>t.TerminalCode===e));void 0!==a&&t.attributeUnloadingDetailsFPDataList.forEach((function(e){var t=a.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),r.push(t)}})):r.push(i)})),a=[],a=r,i.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationFPErrors).forEach((e=>t.attributeValidationFPErrors[e]=""))})),this.setState({selectedAttributeFPList:a,attributeValidationFPErrors:i})}catch(r){console.log("MarineReceiptManualEntryDetails:Error occured on terminalSelectionChangeFP",r)}}terminalSelectionChangeBP(e){Object.keys(this.state.railMarineTransactionBPInfo).forEach((t=>{try{let i=[];var a=[],s=[];a=L().cloneDeep(this.state.attributeUnloadingDetailsBPDataList),s=L().cloneDeep(this.state.selectedAttributeBPList[t]);const n=L().cloneDeep(this.state.attributeValidationBPErrors[t]);var r=L().cloneDeep(this.state.railMarineTransactionBPInfo[t]);e.forEach((e=>{var t=s.find((t=>t.TerminalCode===e));void 0===t?a.forEach((function(t){if(t.TerminalCode===e){var a=r.Attributes.find((t=>t.TerminalCode===e));void 0!==a&&t.attributeUnloadingDetailsBPDataList.forEach((function(e){var t=a.ListOfAttributeData.find((t=>t.AttributeCode===e.Code));void 0!==t&&(e.DefaultValue=t.AttributeValue)})),i.push(t)}})):i.push(t)})),s=[],s=i,n.forEach((t=>{void 0===e.find((e=>t.TerminalCode===e))&&Object.keys(t.attributeValidationBPErrors).forEach((e=>t.attributeValidationBPErrors[e]=""))}));let l=this.state.selectedAttributeBPList,o=this.state.attributeValidationBPErrors;l[t]=s,o[t]=n,this.setState({selectedAttributeBPList:l,attributeValidationBPErrors:o})}catch(i){console.log("MarineReceiptManualEntryDetails:Error occured on terminalSelectionChangeBP",i)}}))}validateSave(){const{railMarineTransactionBPInfo:e,railMarineTransactionCommonInfo:t}=this.state;var a=L().cloneDeep(this.state.validationErrors),s=L().cloneDeep(this.state.validationBPErrors);let i=Object.keys(s);Object.keys(S.j9).forEach((function(e){a[e]=r.jr(S.j9[e],t[e])})),t.StartTime>=t.EndTime&&(a.StartTime="MarineReceiptManualEntry_ErrorUnloadTime"),this.setState({validationErrors:a});let n=Object.values(a).every((function(e){return""===e}));if(n||this.setState({activeIndex:0}),""===t.CompartmentSeqNoInVehicle)return n;i.forEach((t=>{Object.keys(S.JH).forEach((function(a){s[t][a]=r.jr(S.JH[a],e[t][a])}))})),this.setState({validationBPErrors:s});let l=i.map((e=>Object.values(s[e]).every((function(e){return""===e})))),o=l.findIndex((e=>!0!==e));-1!==o&&this.setState({activeIndex:o+1});let c=l.every((function(e){return!0===e}));var d=L().cloneDeep(this.state.attributeValidationFPErrors);L().cloneDeep(this.state.selectedAttributeFPList).forEach((e=>{d.forEach((t=>{t.TerminalCode===e.TerminalCode&&e.attributeMetaDataList.forEach((e=>{t.attributeValidationErrors[e.Code]=r.I5(e,e.DefaultValue)}))}))})),this.setState({attributeValidationFPErrors:d});let u=!0;d.forEach((e=>{u=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),u||this.setState({activeIndex:0});let h=L().cloneDeep(this.state.attributeValidationBPErrors),m=L().cloneDeep(this.state.selectedAttributeBPList);i.forEach((e=>{m[e].forEach((t=>{h[e].forEach((e=>{e.TerminalCode===t.TerminalCode&&t.attributeMetaDataList.forEach((t=>{e.attributeValidationErrors[t.Code]=r.I5(t,t.DefaultValue)}))}))}))})),this.setState({attributeValidationBPErrors:h});let p=i.map((e=>{let t=!0;return h[e].forEach((e=>{t=Object.values(e.attributeValidationErrors).every((function(e){return""===e}))})),t})),M=p.findIndex((e=>!0!==e));-1!==M&&this.setState({activeIndex:M+1});let C=p.every((function(e){return!0===e}));return n&&c&&u&&C}createManualEntry(){this.handleAuthenticationClose();let e=L().cloneDeep(this.state.railMarineTransactionCommonInfo),t=L().cloneDeep(this.state.railMarineTransactionBPInfo);Object.keys(e).forEach((t=>{t.includes("UOM")||"BayCode"===t||"BCUCode"===t||"UnLoadingArm"===t||"StartTime"===t||"EndTime"===t||"FinishedProductCode"===t||"Remarks"===t||"MeterCode"===t||"Attributes"===t||(e[t]=r.bo(e[t]))}));let a=Object.keys(t);a.forEach((e=>{Object.keys(t[e]).forEach((a=>{a.includes("UOM")||"MeterCode"===a||"Attributes"===a||"TankCode"===a||(t[e][a]=r.bo(t[e][a]))}))}));var s=[{key:"MarineReceiptCode",value:this.props.ReceiptCode},{key:"CompartmentSeqNoInVehicle",value:this.state.selectedCompartment.CompartmentSeqNoInVehicle},{key:"FinishedProductCode",value:this.state.selectedCompartment.FinishedProductCode}],i={messageType:"critical",message:"MarineReceiptManualEntry_SavedSuccess",messageResultDetails:[{keyFields:["MarineReceiptManualEntry_CompSeqNo"],keyValues:[this.state.selectedCompartment.CompartmentSeqNoInVehicle],isSuccess:!1,errorMessage:""}]};let o=[];a.forEach((a=>{o.push({BaseProductCode:a,TankCode:t[a].TankCode,TankStartSnapShot:{MassUOM:t[a].MassUOM,GrossVolume:t[a].TankStartGrossQuantity,NetVolume:t[a].TankStartNetQuantity,GrossMass:t[a].TankStartGrossMass,Pressure:t[a].TankStartPressure},TankEndSnapShot:{MassUOM:t[a].MassUOM,GrossVolume:t[a].TankEndGrossQuantity,NetVolume:t[a].TankEndNetQuantity,GrossMass:t[a].TankEndGrossMass,Pressure:t[a].TankEndPressure},QuantityUOM:e.QuantityUOM,StartTime:e.StartTime,EndTime:e.EndTime,TransactionID:e.TransactionID,Remarks:e.Remarks,GrossQuantity:t[a].GrossQuantity,NetQuantity:t[a].NetQuantity,Temperature:t[a].Temperature,TemperatureUOM:t[a].TemperatureUOM,ProductDensity:t[a].ProductDensity,ProductDensityUOM:t[a].ProductDensityUOM,StartTotalizer:t[a].StartTotalizer,EndTotalizer:t[a].EndTotalizer,NetStartTotalizer:t[a].NetStartTotalizer,NetEndTotalizer:t[a].NetEndTotalizer,MeterCode:t[a].MeterCode,GrossMass:t[a].GrossMass,MassUOM:t[a].MassUOM,Pressure:t[a].Pressure,PressureUOM:t[a].PressureUOM,CalculatedGross:t[a].CalculatedGross,CalculatedNet:t[a].CalculatedNet,CalculatedValueUOM:t[a].CalculatedValueUOM,Attributes:t[a].Attributes})}));var d={CommonInfo:{BayCode:e.BayCode,BCUCode:e.BCUCode,UnLoadingArm:e.UnLoadingArm},TransactionFPinfo:{QuantityUOM:e.QuantityUOM,StartTime:e.StartTime,EndTime:e.EndTime,TransactionID:e.TransactionID,Remarks:e.Remarks,GrossQuantity:e.GrossQuantity,NetQuantity:e.NetQuantity,Temperature:e.Temperature,TemperatureUOM:e.TemperatureUOM,ProductDensity:e.ProductDensity,ProductDensityUOM:e.ProductDensityUOM,StartTotalizer:e.StartTotalizer,EndTotalizer:e.EndTotalizer,NetStartTotalizer:e.NetStartTotalizer,NetEndTotalizer:e.NetEndTotalizer,MeterCode:e.MeterCode,GrossMass:e.GrossMass,MassUOM:e.MassUOM,Pressure:e.Pressure,PressureUOM:e.PressureUOM,TankStartSnapShot:{MassUOM:e.MassUOM},TankEndSnapShot:{MassUOM:e.MassUOM},CalculatedGross:e.CalculatedGross,CalculatedNet:e.CalculatedNet,CalculatedValueUOM:e.CalculatedValueUOM,Attributes:e.Attributes},ArrTransactionBP:o,ArrTransactionAdditive:null},u={ShareHolderCode:this.state.selectedCompartment.ShareHolderCode,keyDataCode:l.UB,KeyCodes:s,Entity:d};P()(n.INc,r.tW(u,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;i.messageType=t.IsSuccess?"success":"critical",i.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess?this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.modify,I.au)},(()=>{this.getMarineReceiptManualEntryEnabled(this.state.selectedCompartment)})):(i.message="MarineReceiptManualEntry_SaveFailure",i.messageResultDetails[0].errorMessage=t.ErrorList[0],this.setState({saveEnabled:r.ab(this.props.userDetails.EntityResult.FunctionsList,I.i.modify,I.au),marineReceiptManualEntryEnabled:!1})),(0,c.toast)((0,m.jsx)(M.A,{children:(0,m.jsx)(b.A,{notificationMessage:i})}),{autoClose:"success"===i.messageType&&1e4})})).catch((e=>{i.messageResultDetails[0].errorMessage=e,console.log("Error while handleSave:",e)}))}handleResetForCompartmentSeqNoInVehicle(){this.setState({selectedCompartment:{},productList:[],tankList:{},railMarineTransactionBPInfo:{},validationBPErrors:{},activeIndex:0})}handleTabChange(e){this.setState({activeIndex:e})}fillFPAttributeDetails(e){try{let t=L().cloneDeep(this.state.selectedAttributeFPList);return e.Attributes=[],t.forEach((t=>{let a={ListOfAttributeData:[]};a.TerminalCode=t.TerminalCode,t.attributeMetaDataList.forEach((e=>{a.ListOfAttributeData.push({AttributeCode:e.Code,AttributeValue:e.DefaultValue})})),e.Attributes.push(a)})),this.setState({railMarineTransactionCommonInfo:e}),e}catch(t){console.log("MarineReceiptManualEntryDetails:Error occured on fillFPAttributeDetails",t)}}fillBPAttributeDetails(e){Object.keys(e).forEach((t=>{try{let a=L().cloneDeep(this.state.selectedAttributeBPList[t]);return e[t].Attributes=[],a.forEach((a=>{let s={ListOfAttributeData:[]};s.TerminalCode=a.TerminalCode,a.attributeMetaDataList.forEach((e=>{s.ListOfAttributeData.push({AttributeCode:e.Code,AttributeValue:e.DefaultValue})})),e[t].Attributes.push(s)})),this.setState({railMarineTransactionBPInfo:e}),e}catch(a){console.log("MarineReceiptManualEntryDetails:Error occured on fillFPAttributeDetails",a)}}))}render(){const e={compartmentSeqNoInVehicleList:this.state.compartmentSeqNoInVehicleList,bcuCodeList:this.state.bcuCodeList,unLoadingArmList:this.state.unLoadingArmList,berthList:this.state.berthList,quantityUOMList:this.state.quantityUOMList,temperatureUOMList:this.state.temperatureUOMList,densityUOMList:this.state.densityUOMList,meterCodeList:this.state.meterCodeList,massUOMList:this.state.massUOMList,pressureUOMList:this.state.pressureUOMList,calculatedValueUOMList:this.state.calculatedValueUOMList,tankList:this.state.tankList},{selectedCompartment:t,saveEnabled:a,marineReceiptManualEntryEnabled:s}=this.state;return this.state.isReadyToRender?(0,m.jsx)(d.TranslationConsumer,{children:r=>(0,m.jsxs)("div",{children:[(0,m.jsx)(M.A,{children:(0,m.jsx)(f.A,{newEntityName:"MarineReceiptManualEntry_PageTitle"})}),(0,m.jsx)(M.A,{children:(0,m.jsx)(p,{selectedCompartment:t,listOptions:e,validationErrors:this.state.validationErrors,onFieldChange:this.handleChange,railMarineTransactionCommonInfo:this.state.railMarineTransactionCommonInfo,onDateTextChange:this.handleDateTextChange,marineReceiptManualEntryEnabled:s})}),(0,m.jsx)(M.A,{children:(0,m.jsxs)(u.Tab,{onTabChange:e=>this.handleTabChange(e),activeIndex:this.state.activeIndex,children:[(0,m.jsx)(u.Tab.Pane,{title:""===this.state.railMarineTransactionCommonInfo.FinishedProductCode?r("FinishedProduct"):r("FinishedProduct")+"-"+this.state.railMarineTransactionCommonInfo.FinishedProductCode,children:(0,m.jsx)(E,{validationErrors:this.state.validationErrors,listOptions:e,onFieldChange:this.handleChange,railMarineTransactionCommonInfo:this.state.railMarineTransactionCommonInfo,selectedAttributeList:this.state.selectedAttributeFPList,attributeValidationErrors:this.state.attributeValidationFPErrors,handleAttributeCellDataEdit:this.handleFPAttributeCellDataEdit,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode})}),this.state.productList.map(((t,a)=>(0,m.jsx)(u.Tab.Pane,{title:"baseproduct"===t.ProductTYPE?r("MarineReceipt_BaseProduct")+"-"+t.code:r("MarineReceipt_BaseProduct"),children:(0,m.jsx)(g,{validationErrors:this.state.validationBPErrors[t.code],listOptions:e,index:a,code:t.code,onFieldChange:this.handleBPChange,railMarineTransactionBPInfo:this.state.railMarineTransactionBPInfo[t.code],selectedAttributeList:this.state.selectedAttributeBPList[t.code],attributeValidationErrors:this.state.attributeValidationBPErrors[t.code],handleAttributeCellDataEdit:this.handleBPAttributeCellDataEdit})},a)))]})}),(0,m.jsx)(M.A,{children:(0,m.jsx)(v.q,{handleBack:this.props.handleBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:a&&s})}),this.state.showAuthenticationLayout?(0,m.jsx)(j.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:I.i.add,functionGroup:I.r6,handleOperation:this.addLoadingDetails,handleClose:this.handleAuthenticationClose}):null]})}):(0,m.jsx)(y.A,{message:"Loading"})}}const R=(0,o.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(N)}}]);
//# sourceMappingURL=6039.bf8d0492.chunk.js.map