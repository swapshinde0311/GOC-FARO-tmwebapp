"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[6027,5841,8222,3624],{66554:(e,t,s)=>{s.d(t,{$:()=>c});var i=s(65043),a=s(72711),o=s(67907),l=s(65187),r=s(69062),n=s(70579);function d(e){let{operationsVisibilty:t,breadcrumbItem:s,shareholders:d,selectedShareholder:c,onShareholderChange:h,onDelete:p,onAdd:m,popUpContent:u,shrVisible:b,handleBreadCrumbClick:y,addVisible:E,deleteVisible:g}=e;const[C,v]=(0,i.useState)(!1),[R,S]=(0,i.useState)(!1);function P(){t.add&&(u.length>0?S(!1===R):m())}return(0,n.jsxs)("div",{className:"row",style:{alignItems:"flex-start",padding:"0px"},children:[(0,n.jsx)("div",{className:"col-9 col-sm-9 col-md-9 col-lg-10 col-xl-10",style:{padding:"0px"},children:(0,n.jsxs)("div",{className:"row",style:{marginTop:"10px",alignItems:""},children:[(0,n.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-8",children:(0,n.jsxs)(l.A,{children:[" ",(0,n.jsx)(o.TranslationConsumer,{children:e=>(0,n.jsxs)(a.Breadcrumb,{children:[s.parents.map((t=>(0,n.jsx)(a.Breadcrumb.Item,{onClick:()=>{void 0!==y&&null!==y&&y(t.itemCode,s.parents)},children:e(t.localizedKey)},t.itemCode))),(0,n.jsx)(a.Breadcrumb.Item,{children:e(s.localizedKey)},s.itemCode)]})})]})}),(0,n.jsx)("div",{className:"col-12 col-sm-12 col-md-12 col-lg-6 col-xl-4",children:(0,n.jsx)(o.TranslationConsumer,{children:e=>(0,n.jsx)("div",{className:"compartmentIcon",style:{justifyContent:"flex-start"},children:!1===b?"":(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:(0,n.jsxs)("h4",{className:"shrText",children:[e("Common_Shareholder"),":"]})}),(0,n.jsx)("div",{className:"opSelect",children:(0,n.jsx)(a.Select,{placeholder:e("Common_Shareholder"),value:c,disabled:!t.shareholder,options:r.Zj(d),onChange:e=>h(e)})})]})})})}),(0,n.jsx)(o.TranslationConsumer,{children:e=>(0,n.jsxs)(a.Modal,{open:C,size:"small",children:[(0,n.jsx)(a.Modal.Content,{children:(0,n.jsx)("div",{children:(0,n.jsx)("b",{children:e("Confirm_Delete")})})}),(0,n.jsxs)(a.Modal.Footer,{children:[(0,n.jsx)(a.Button,{type:"secondary",content:e("Cancel"),onClick:()=>v(!1)}),(0,n.jsx)(a.Button,{type:"primary",content:e("PipelineDispatch_BtnSubmit"),onClick:()=>{v(!1),p()}})]})]})})]})}),(0,n.jsx)("div",{className:"col-3 col-sm-3 col-md-3 col-lg-2 col-xl-2",children:(0,n.jsxs)("div",{style:{float:"right",display:"inline-block",marginTop:"10px"},children:[E?(0,n.jsx)(a.Popup,{position:"bottom right",className:"popup-theme-wrap",element:(0,n.jsx)("div",{className:(t.add?"iconCircle ":"iconCircleDisable ")+"iconblock",onClick:P,children:(0,n.jsx)(a.Icon,{root:"common",name:"badge-plus",size:"small",color:"white"})}),on:"click",open:R,children:(0,n.jsx)("div",{onMouseLeave:()=>S(!1),children:(0,n.jsx)(o.TranslationConsumer,{children:e=>(0,n.jsx)(a.VerticalMenu,{children:(0,n.jsxs)(a.VerticalMenu,{children:[(0,n.jsx)(a.VerticalMenu.Header,{children:e("Common_Create")}),u.map((t=>(0,n.jsx)(a.VerticalMenu.Item,{onClick:()=>{return e=t.fieldName,S(!1),void m(e);var e},children:e(t.fieldValue)})))]})})})})}):"",g?(0,n.jsx)("div",{style:{marginLeft:"10px"},onClick:()=>{t.delete&&v(!0)},className:(t.delete?"iconCircle ":"iconCircleDisable ")+"iconblock",children:(0,n.jsx)(a.Icon,{root:"common",name:"delete",size:"small",color:"white"})}):""]})})]})}d.defaultProps={operationsVisibilty:{add:!1,delete:!1,shareholder:!1},breadcrumbItem:{itemName:"",itemCode:"",localizedKey:"",itemProps:{},parents:[],isComponent:!1},shareholders:[],selectedShareholder:"",popUpContent:[],shrVisible:!0,addVisible:!0,deleteVisible:!0};s(38726);function c(e){let{operationsVisibilty:t,breadcrumbItem:s,shareholders:i,selectedShareholder:a,onShareholderChange:o,onDelete:l,onAdd:r,popUpContent:c,shrVisible:h,handleBreadCrumbClick:p,addVisible:m,deleteVisible:u}=e;return(0,n.jsx)(d,{operationsVisibilty:t,breadcrumbItem:s,shareholders:i,selectedShareholder:a,onShareholderChange:o,onDelete:l,onAdd:r,popUpContent:c,shrVisible:h,handleBreadCrumbClick:p,addVisible:m,deleteVisible:u})}},53624:(e,t,s)=>{s.r(t),s.d(t,{default:()=>D});var i=s(65043),a=s(69062),o=s(40854),l=s.n(o),r=s(72067),n=s(72711),d=s(67907),c=s(78374),h=s(7523),p=s(70579);function m(e){const t=e.value;if("boolean"===typeof t)return t?(0,p.jsx)(n.Icon,{name:"check",size:"small",color:"green"}):(0,p.jsx)(n.Icon,{name:"close",size:"small",color:"red"})}function u(e){let{webPortalUser:t,modWebPortalUser:s,validationErrors:i,onFieldChange:a,listOptions:o,userChange:l,handleAvailableEntitySelection:r,handleAssociatedEntitySelection:u,handleEntityAssociation:b,handleEntityDisassociation:y,pageSize:E}=e;return(0,p.jsx)(d.TranslationConsumer,{children:e=>(0,p.jsxs)("div",{className:"detailsContainer",children:[(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:""===t.UserName?(0,p.jsx)(n.Select,{fluid:!0,placeholder:e("Common_Select"),label:e("WebPortal_Username"),value:s.UserName,options:o.securityUsers,onChange:e=>{l(e)},indicator:"required",error:e(i.UserName),reserveSpace:!1,search:!0,noResultsMessage:e("noResultsMessage")}):(0,p.jsx)(n.Input,{fluid:!0,value:s.UserName,indicator:"required",disabled:!0,label:e("WebPortal_Username"),error:e(i.UserName),reserveSpace:!1})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(n.Input,{fluid:!0,value:s.UserPrincipal,indicator:"required",onChange:e=>a("UserPrincipal",e),label:e("WebPortal_UserPrincipal"),error:e(i.UserPrincipal),reserveSpace:!1,disabled:""!==t.UserName})}),(0,p.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,p.jsx)(n.Input,{fluid:!0,value:s.RoleName,label:e("WebPortal_Role"),reserveSpace:!1,disabled:!0})})]}),o.availableEntities.length>0||s.WebPortalUserEntityItems.length>0?(0,p.jsxs)("div",{className:"row",children:[(0,p.jsxs)("div",{className:"col-12 col-md-5 col-lg-5",children:[(0,p.jsx)("h4",{children:e("WebPortal_AvailableEntity")}),(0,p.jsx)("div",{className:"detailsTable",children:(0,p.jsxs)(c.bQ,{data:o.availableEntities,search:!0,selectionMode:"multiple",selection:o.selectedAvailableEntities,onSelectionChange:r,rows:E,searchPlaceholder:e("LoadingDetailsView_SearchGrid"),children:[(0,p.jsx)(c.bQ.Column,{className:"compColHeight",field:"Code",header:e("WebPortal_Entity"),editFieldType:"text"},"Code"),(0,p.jsx)(c.bQ.Column,{className:"compColHeight",field:"ShareholderCode",header:e("AccessCardInfo_Shareholder"),editFieldType:"text"},"ShareholderCode"),Array.isArray(o.availableEntities)&&o.availableEntities.length>E?(0,p.jsx)(c.bQ.Pagination,{}):""]})})]}),(0,p.jsxs)("div",{className:"col-12 col-md-2 col-lg-2",children:[(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsxs)("div",{style:{textAlign:"center"},children:[(0,p.jsx)(n.Button,{type:"primary",icon:(0,p.jsx)(n.Icon,{name:"caret-right",root:"common"}),content:"",iconPosition:"right",onClick:b,disabled:s.RoleName===h.Av.SHAREHOLDER}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)(n.Button,{type:"primary",icon:(0,p.jsx)(n.Icon,{name:"caret-left",root:"common"}),content:"",iconPosition:"right",onClick:y,disabled:s.RoleName===h.Av.SHAREHOLDER})]})]}),(0,p.jsxs)("div",{className:"col-12 col-md-5 col-lg-5",children:[(0,p.jsx)("h4",{children:e("WebPortal_AssociatedEntity")}),(0,p.jsx)("div",{className:"detailsTable",children:(0,p.jsxs)(c.bQ,{data:s.WebPortalUserEntityItems,search:!0,selectionMode:"multiple",selection:o.selectedAssociatedEntities,onSelectionChange:u,rows:E,searchPlaceholder:e("LoadingDetailsView_SearchGrid"),children:[(0,p.jsx)(c.bQ.Column,{className:"compColHeight",field:"Code",header:e("WebPortal_Entity"),editFieldType:"text"},"Code"),(0,p.jsx)(c.bQ.Column,{className:"compColHeight",field:"ShareholderCode",header:e("AccessCardInfo_Shareholder"),editFieldType:"text"},"ShareholderCode"),(0,p.jsx)(c.bQ.Column,{className:"compColHeight",field:"IsEntityActive",header:e("TankGroupInfo_Active"),editable:!1,renderer:m,editFieldType:"text"},"IsEntityActive"),Array.isArray(s.WebPortalUserEntityItems)&&s.WebPortalUserEntityItems.length>E?(0,p.jsx)(c.bQ.Pagination,{}):""]})})]})]}):null]})})}u.defaultProps={listOptions:{securityUsers:[],availableEntities:[],selectedAvailableEntities:[],selectedAssociatedEntities:[]}};var b=s(9256),y=s(97508),E=s(46100),g=s(44192),C=(s(38726),s(65187)),v=s(43503),R=s(40252),S=s(53536),P=s.n(S),U=s(80312);class x extends i.Component{constructor(){super(...arguments),this.state={webPortalUser:P().cloneDeep(E.v1),modWebPortalUser:{},validationErrors:a.Th(g.GV),isReadyToRender:!1,saveEnabled:!1,securityUsers:[],availableEntities:[],selectedAvailableEntites:[],selectedAssociatedEntities:[],entityDisassociationPopUp:!1},this.handleChange=(e,t)=>{try{const s=P().cloneDeep(this.state.modWebPortalUser);s[e]=t,this.setState({modWebPortalUser:s});const i=P().cloneDeep(this.state.validationErrors);void 0!==g.GV[e]&&(i[e]=a.jr(g.GV[e],t),this.setState({validationErrors:i}))}catch(s){console.log("WebPortalUserMapDetailsComposite:Error occured on handleChange",s)}},this.handleReset=()=>{try{const{validationErrors:e}={...this.state},t=P().cloneDeep(this.state.webPortalUser);Object.keys(e).forEach((function(t){e[t]=""})),this.setState({modWebPortalUser:{...t},selectedCompRow:[],validationErrors:e,availableEntities:[],selectedAvailableEntites:[],selectedAssociatedEntities:[],isReadyToRender:!1},(()=>{void 0!==t.UserName&&null!==t.UserName&&""!==t.UserName?this.getEntityForPortalUser(t.UserName):this.setState({isReadyToRender:!0})}))}catch(e){console.log("WebPortalUserMapDetailsComposite:Error occured on handleReset",e)}},this.handleUserChange=e=>{try{let t=P().cloneDeep(E.v1);const s=P().cloneDeep(this.state.validationErrors);s.UserName="",t.UserName=e,this.setState({modWebPortalUser:t,validationErrors:s,selectedAssociatedEntities:[],selectedAvailableEntites:[]},(()=>{this.getEntityForPortalUser(e)}))}catch(t){console.log("WebPortalUserMapDetailsComposite:Error occured on handleUserChange",t)}},this.getEntityForPortalUser=e=>{try{let t=P().cloneDeep(this.state.modWebPortalUser);l()(r.QA6+"?userName="+e+"&entityType=",a.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var s=e.data;!0===s.IsSuccess?(t.RoleName=s.EntityResult.Table[0].RoleName,s.EntityResult.Table[0].RoleName===h.Av.SHAREHOLDER?(t.WebPortalUserEntityItems=s.EntityResult.Table1,this.setState({availableEntities:[],modWebPortalUser:t,isReadyToRender:!0})):this.setState({availableEntities:s.EntityResult.Table1,modWebPortalUser:t,isReadyToRender:!0})):console.log("Error in GetEntityForPortalUser:",s.ErrorList)}))}catch(t){console.log("WebPortalUserMapDetailsComposite:Error occured on getEntityForPortalUser",t)}},this.handleAvailableEntitySelection=e=>{this.setState({selectedAvailableEntites:e})},this.handleAssociatedEntitySelection=e=>{this.setState({selectedAssociatedEntities:e})},this.handleEntityAssociation=()=>{try{this.setState({isReadyToRender:!1},(()=>{const e=P().cloneDeep(this.state.selectedAvailableEntites);let t=P().cloneDeep(this.state.availableEntities),s=P().cloneDeep(this.state.modWebPortalUser);e.forEach((e=>{s.WebPortalUserEntityItems.push(e),t=t.filter((t=>t.Code!==e.Code))})),this.setState({modWebPortalUser:s,selectedAvailableEntites:[],availableEntities:t,isReadyToRender:!0})}))}catch(e){console.log("WebPortalUserMapDetailsComposite:Error occured on handleEntityAssociation",e)}},this.handleEntityDisassociation=()=>{this.state.selectedAssociatedEntities.length>0&&this.setState({entityDisassociationPopUp:!0})},this.EntityDisassociation=()=>{try{this.setState({isReadyToRender:!1},(()=>{const e=P().cloneDeep(this.state.selectedAssociatedEntities);let t=P().cloneDeep(this.state.modWebPortalUser),s=P().cloneDeep(this.state.availableEntities);e.forEach(((e,i)=>{s.push(e),t.WebPortalUserEntityItems=t.WebPortalUserEntityItems.filter(((t,s)=>t.Code!==e.Code))})),this.setState({selectedAssociatedEntities:[],modWebPortalUser:t,availableEntities:s,isReadyToRender:!0})}))}catch(e){console.log("WebPortalUserMapDetailsComposite:Error occured on handleEntityDisassociation",e)}},this.confirmEntityDisassociation=()=>(0,p.jsx)(d.TranslationConsumer,{children:e=>(0,p.jsxs)(n.Modal,{open:this.state.entityDisassociationPopUp,size:"small",children:[(0,p.jsx)(n.Modal.Content,{children:(0,p.jsx)("div",{className:"col col-lg-12",children:(0,p.jsx)("h5",{children:e("WebPortal_ConfirmDisassociation")})})}),(0,p.jsxs)(n.Modal.Footer,{children:[(0,p.jsx)(n.Button,{type:"primary",content:e("AccessCardInfo_Ok"),onClick:()=>{this.setState({entityDisassociationPopUp:!1},(()=>{this.EntityDisassociation()}))}}),(0,p.jsx)(n.Button,{type:"primary",content:e("Cancel"),onClick:()=>{this.setState({entityDisassociationPopUp:!1})}})]})]})}),this.handleSave=()=>{try{let e=this.fillDetails();this.setState({saveEnabled:!1}),this.validateSave(e)?""===this.state.webPortalUser.UserName?this.createWebPortalUser(e):this.updateWebPortalUser(e):this.setState({saveEnabled:!0})}catch(e){console.log("WebPortalUserMapDetailsComposite:Error occured on handleSave",e)}}}componentDidMount(){try{a.pJ(this.props.userDetails.EntityResult.IsArchived),this.getWebPortalUser(this.props.selectedRow),this.GetSecurityUsers()}catch(e){console.log("WebPortalUserMapDetailsComposite:Error occured on componentDidMount",e)}}componentWillReceiveProps(e){try{if(""!==this.state.webPortalUser.UserName&&void 0===e.selectedRow.WebPortal_UserName&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo){this.getWebPortalUser(e.selectedRow);let t={...this.state.validationErrors};Object.keys(t).forEach((e=>{t[e]=""})),this.setState({validationErrors:t})}}catch(t){console.log("WebPortalUserMapDetailsComposite:Error occured on componentWillReceiveProps",t)}}getWebPortalUser(e){void 0!==e.WebPortal_UserName?l()(r.mBC+"?userName="+e.WebPortal_UserName,a.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({isReadyToRender:!1,webPortalUser:P().cloneDeep(t.EntityResult),modWebPortalUser:P().cloneDeep(t.EntityResult),saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,U.i.modify,U.Ee)},(()=>{this.getEntityForPortalUser(t.EntityResult.UserName)})):this.setState({webPortalUser:P().cloneDeep(E.v1),modWebPortalUser:P().cloneDeep(E.v1),isReadyToRender:!0})})):this.setState({webPortalUser:P().cloneDeep(E.v1),modWebPortalUser:P().cloneDeep(E.v1),isReadyToRender:!0,saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,U.i.add,U.Ee),availableEntities:[]},(()=>{this.GetSecurityUsers()}))}GetSecurityUsers(){try{l()(r.lVD,a.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&Array.isArray(t.EntityResult)){let e=a.Zj(t.EntityResult);this.setState({securityUsers:e})}}else console.log("Error in getUsers:",t.ErrorList)}))}catch(e){console.log("Error while getting getUsers:",e)}}fillDetails(){try{let e=P().cloneDeep(this.state.modWebPortalUser),t=[];return e.WebPortalUserEntityItems.forEach((e=>{let s={EntityType:void 0===e.EntityType?e.Entity:e.EntityType,Code:e.Code,ShareholderCode:e.ShareholderCode};t.push(s)})),e.WebPortalUserEntityItems=t,this.setState({modWebPortalUser:e}),e}catch(e){console.log("WebPortalUserMapDetailsComposite:Error occured on fillDetails",e)}}validateSave(e){const t={...this.state.validationErrors};Object.keys(g.GV).forEach((function(s){void 0!==e[s]&&(t[s]=a.jr(g.GV[s],e[s]))})),this.setState({validationErrors:t});let s={messageType:"critical",message:"WebPortaUserMap_SavedStatus",messageResultDetails:[]};0===e.WebPortalUserEntityItems.length&&s.messageResultDetails.push({keyFields:["WebPortal_UserName"],keyValues:[e.UserName],isSuccess:!1,errorMessage:"ASSOCIATED_ENTITY_ITEMS_EMPTY_X"});let i=Object.values(t).every((function(e){return""===e}));return s.messageResultDetails.length>0?(this.props.onSaved(this.state.modWebPortalUser,"update",s),!1):i}createWebPortalUser(e){let t={Entity:e},s={messageType:"critical",message:"WebPortaUserMap_SavedStatus",messageResultDetails:[{keyFields:["WebPortal_UserName"],keyValues:[e.UserName],isSuccess:!1,errorMessage:""}]};l()(r._K5,a.tW(t,this.props.tokenDetails.tokenInfo)).then((t=>{let i=t.data;s.messageType=i.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=i.IsSuccess,!0===i.IsSuccess?this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,U.i.modify,U.Ee)},(()=>this.getWebPortalUser({WebPortal_UserName:e.UserName}))):(s.messageResultDetails[0].errorMessage=i.ErrorList[0],this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,U.i.add,U.Ee)}),console.log("Error in createWebPortalUser:",i.ErrorList)),this.props.onSaved(this.state.modWebPortalUser,"add",s)})).catch((e=>{this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,U.i.add,U.Ee)}),s.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modWebPortalUser,"add",s)}))}updateWebPortalUser(e){let t={Entity:e},s={messageType:"critical",message:"WebPortaUserMap_SavedStatus",messageResultDetails:[{keyFields:["WebPortal_UserName"],keyValues:[e.UserName],isSuccess:!1,errorMessage:""}]};l()(r.rqn,a.tW(t,this.props.tokenDetails.tokenInfo)).then((t=>{let i=t.data;s.messageType=i.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=i.IsSuccess,!0===i.IsSuccess?this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,U.i.modify,U.Ee)},(()=>this.getWebPortalUser({WebPortal_UserName:e.UserName}))):(s.messageResultDetails[0].errorMessage=i.ErrorList[0],this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,U.i.modify,U.Ee)}),console.log("Error in update updateWebPortalUser:",i.ErrorList)),this.props.onSaved(this.state.modWebPortalUser,"update",s)})).catch((e=>{this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,U.i.modify,U.Ee)}),s.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modWebPortalUser,"modify",s)}))}render(){const e={securityUsers:this.state.securityUsers,availableEntities:this.state.availableEntities,selectedAvailableEntities:this.state.selectedAvailableEntites,selectedAssociatedEntities:this.state.selectedAssociatedEntities};return this.state.isReadyToRender?(0,p.jsxs)("div",{children:[(0,p.jsx)(C.A,{children:(0,p.jsx)(v.A,{entityCode:this.state.webPortalUser.UserName,newEntityName:"WebPortalUserAssociation",popUpContents:[]})}),(0,p.jsx)(C.A,{children:(0,p.jsx)(u,{webPortalUser:this.state.webPortalUser,modWebPortalUser:this.state.modWebPortalUser,listOptions:e,validationErrors:this.state.validationErrors,onFieldChange:this.handleChange,onActiveStatusChange:this.handleActiveStatusChange,onAllTerminalsChange:this.handleAllTerminalsChange,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode,attributeValidationErrors:this.state.attributeValidationErrors,selectedAttributeList:this.state.selectedAttributeList,handleCellDataEdit:this.handleCellDataEdit,userChange:this.handleUserChange,handleAvailableEntitySelection:this.handleAvailableEntitySelection,handleAssociatedEntitySelection:this.handleAssociatedEntitySelection,handleEntityAssociation:this.handleEntityAssociation,handleEntityDisassociation:this.handleEntityDisassociation,pageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize})}),(0,p.jsx)(C.A,{children:(0,p.jsx)(b.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.entityDisassociationPopUp?this.confirmEntityDisassociation():null]}):(0,p.jsx)(R.A,{message:"Loading"})}}const D=(0,y.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(x)},46027:(e,t,s)=>{s.r(t),s.d(t,{default:()=>S});var i=s(65043),a=s(97508),o=s(65187),l=s(69062),r=s(40252),n=s(80312),d=s(40854),c=s.n(d),h=s(72067),p=s(14159),m=(s(92342),s(66554)),u=s(78374),b=s(72711),y=s(67907),E=s(70579);function g(e){let{tableData:t,columnDetails:s,pageSize:i,selectedItems:a,onSelectionChange:l,onRowClick:r,toggleExpand:n,expandedRows:d}=e;const[c]=(0,y.useTranslation)();return(0,E.jsx)("div",{children:(0,E.jsx)("div",{className:"projectMasterList",children:(0,E.jsxs)(u.bQ,{data:t,onCellClick:e=>void 0!==r?r(e):{},selectionMode:"multiple",selection:a,onSelectionChange:e=>l(e),search:!0,searchPlaceholder:c("LoadingDetailsView_SearchGrid"),rows:i,rowExpansionTemplate:function(e){return Array.isArray(e.EntityList)&&e.EntityList.length>0?(0,E.jsx)("div",{className:"ChildGridViewAllShipmentLoadingDetails secondarytable",children:(0,E.jsx)(o.A,{children:(0,E.jsxs)(u.bQ,{data:e.EntityList,children:[(0,E.jsx)(u.bQ.Column,{className:"compColHeight",field:"Code",header:c("Common_Code")},"Code"),(0,E.jsx)(u.bQ.Column,{className:"compColHeight",field:"Shareholder",header:c("Shareholder")},"Shareholder")]})})}):""},expandedRows:d,children:[(0,E.jsx)(u.bQ.ActionBar,{}),s.map((function(e){return(0,E.jsx)(u.bQ.Column,{initialWidth:e.Width,field:e.Name,header:c(e.Name),sortable:!0,renderer:e=>e.value},e.Name)})),(0,E.jsx)(u.bQ.Column,{className:"expandedColumn",initialWidth:"50px",renderer:e=>{try{const t=d.findIndex((t=>t.WebPortal_UserName===e.rowData.WebPortal_UserName))>=0;return(0,E.jsx)("div",{onClick:()=>n(e.rowData,t),className:"compartmentIcon gridButtonFontColor",children:(0,E.jsx)(o.A,{children:(0,E.jsx)(b.Icon,{root:"common",name:t?"slidercontrols-minus":"ellipsis-horizontal",className:"margin_l10"})})})}catch(t){console.log("WebPortalUserMapSummaryComposite:Error occured on expanderTemplate",t)}}}),Array.isArray(t)&&t.length>i?(0,E.jsx)(u.bQ.Pagination,{}):""]})})})}var C=s(53624),v=s(11981);class R extends i.Component{constructor(){super(...arguments),this.state={isDetails:!1,isReadyToRender:!1,isDetailsModified:!1,operationsVisibilty:{add:!1,delete:!1,shareholder:!1},selectedRow:{},selectedItems:[],data:{},expandedRows:[]},this.handleAdd=()=>{try{var{operationsVisibilty:e}={...this.state};e.delete=!1,e.add=!1,this.setState({isDetails:!0,selectedRow:{},operationsVisibilty:e})}catch(t){console.log("WebPortalUserMapComposite:Error occured on handleAdd",t)}},this.savedEvent=(e,t,s)=>{try{const a={...this.state.operationsVisibilty};if("success"===s.messageType&&(a.add=l.ab(this.props.userDetails.EntityResult.FunctionsList,n.i.add,n.Ee),a.delete=l.ab(this.props.userDetails.EntityResult.FunctionsList,n.i.remove,n.Ee),this.setState({isDetailsModified:!0,operationsVisibilty:a})),"success"===s.messageType&&"add"===t){var i=[{WebPortal_UserName:e.UserName}];this.setState({selectedItems:i})}(0,p.toast)((0,E.jsx)(o.A,{children:(0,E.jsx)(v.A,{notificationMessage:s})}),{autoClose:"success"===s.messageType&&1e4})}catch(a){console.log("WebPortalUserMapComposite:Error occured on savedEvent",a)}},this.handleBack=()=>{try{var{operationsVisibilty:e}={...this.state};e.add=l.ab(this.props.userDetails.EntityResult.FunctionsList,n.i.add,n.Ee),e.delete=!1,this.setState({isDetails:!1,selectedRow:{},selectedItems:[],expandedRows:[],isReadyToRender:!1}),this.getWebportalUserList()}catch(t){console.log("WebPortalUserMapComposite:Error occured on Back click",t)}},this.handleRowClick=e=>{try{if(void 0!==e.field){var{operationsVisibilty:t}={...this.state};t.add=l.ab(this.props.userDetails.EntityResult.FunctionsList,n.i.add,n.Ee),t.delete=l.ab(this.props.userDetails.EntityResult.FunctionsList,n.i.remove,n.Ee),this.setState({isDetails:!0,selectedRow:e.rowData,selectedItems:[e.rowData],operationsVisibilty:t})}}catch(s){console.log("WebPortalUserMapComposite:Error occured on Row click",s)}},this.handleSelection=e=>{try{var{operationsVisibilty:t}={...this.state};t.delete=e.length>0&&l.ab(this.props.userDetails.EntityResult.FunctionsList,n.i.remove,n.Ee),this.setState({selectedItems:e,operationsVisibilty:t})}catch(s){console.log("WebPortalUserMapComposite:Error occured on handleSelection",s)}},this.handleDelete=()=>{try{var{operationsVisibilty:e}={...this.state};e.delete=!1,this.setState({operationsVisibilty:e});for(var t=[],s=0;s<this.state.selectedItems.length;s++){var i=this.state.selectedItems[s].WebPortal_UserName;t.push(i)}let a={Entity:t};c()(h.FKd,l.tW(a,this.props.tokenDetails.tokenInfo)).then((t=>{var s=t.data,i=s.isSuccess;null!==s.ResultDataList&&void 0!==s.ResultDataList&&(i=s.ResultDataList.filter((function(e){return!e.IsSuccess})).length!==s.ResultDataList.length);var a=l.Cy(s,"WebPortaUserMap_DeletionStatus",["ShareHolderCode"]);i?(this.setState({isReadyToRender:!1}),this.getWebportalUserList(),e.delete=!1,this.setState({selectedItems:[],operationsVisibilty:e,selectedRow:{}})):(e.delete=!0,this.setState({operationsVisibilty:e})),a.messageResultDetails.forEach((e=>{e.keyFields.length>0&&(e.keyFields[0]="WebPortal_UserName")})),(0,p.toast)((0,E.jsx)(o.A,{children:(0,E.jsx)(v.A,{notificationMessage:a})}),{autoClose:"success"===a.messageType&&1e4})})).catch((e=>{console.log("Error occured while deleting:"+e);var{operationsVisibilty:t}={...this.state};t.delete=!0,this.setState({operationsVisibilty:t})}))}catch(a){console.log("WebPortalUserMapComposite:Error occured on handleDelet",a)}},this.toggleExpand=(e,t)=>{try{let s=this.state.expandedRows,i=s.findIndex((t=>t.WebPortal_UserName===e.WebPortal_UserName));t?s.splice(i,1):s.push(e),this.setState({expandedRows:s})}catch(s){console.log("WebPortalUserMapComposite:Error occured on toggleExpand",s)}}}componentDidMount(){try{l.pJ(this.props.userDetails.EntityResult.IsArchived);var{operationsVisibilty:e}={...this.state};e.add=l.ab(this.props.userDetails.EntityResult.FunctionsList,n.i.add,n.Ee),this.setState({operationsVisibilty:e}),this.getWebportalUserList()}catch(t){console.log("WebPortalUserMapComposite:Error occured on componentDidMount",t)}}getWebportalUserList(){c()(h.vVw,l.Jm(this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;if(!0===t.IsSuccess){if(null!==t.EntityResult&&void 0!==t.EntityResult.Table&&void 0!==t.EntityResult.Table2&&null!==t.EntityResult.Table&&null!==t.EntityResult.Table2&&Array.isArray(t.EntityResult.Table)&&Array.isArray(t.EntityResult.Table2)){let e=t.EntityResult.Table2;t.EntityResult.Table.forEach((t=>{let s=e.filter((e=>e.UserName===t.WebPortal_UserName));t.EntityList=s}))}this.setState({data:t.EntityResult,isReadyToRender:!0})}else this.setState({data:[],isReadyToRender:!0}),console.log("Error in getWebportalUserList:",t.ErrorList)})).catch((e=>{this.setState({data:[],isReadyToRender:!0}),console.log("Error while getWebportalUserList List:",e)}))}render(){return(0,E.jsxs)("div",{children:[(0,E.jsx)(o.A,{children:(0,E.jsx)(m.$,{operationsVisibilty:this.state.operationsVisibilty,breadcrumbItem:this.props.activeItem,shareholders:this.props.userDetails.EntityResult.ShareholderList,onDelete:this.handleDelete,onAdd:this.handleAdd,shrVisible:!1,handleBreadCrumbClick:this.props.handleBreadCrumbClick})}),!0===this.state.isDetails?(0,E.jsx)(o.A,{children:(0,E.jsx)(C.default,{selectedRow:this.state.selectedRow,onBack:this.handleBack,onSaved:this.savedEvent})}):this.state.isReadyToRender?(0,E.jsx)("div",{children:(0,E.jsx)(o.A,{children:(0,E.jsx)(g,{tableData:this.state.data.Table,columnDetails:this.state.data.Column,pageSize:this.props.userDetails.EntityResult.PageAttibutes.WebPortalListPageSize,selectedItems:this.state.selectedItems,onRowClick:this.handleRowClick,onSelectionChange:this.handleSelection,expandedRows:this.state.expandedRows,toggleExpand:this.toggleExpand})})}):(0,E.jsx)(r.A,{message:"Loading"}),(0,E.jsx)(o.A,{children:(0,E.jsx)(p.ToastContainer,{hideProgressBar:!0,closeOnClick:!1,closeButton:!0,newestOnTop:!0,position:"bottom-right",toastClassName:"toast-notification-wrap"})})]})}}const S=(0,a.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(R)},43503:(e,t,s)=>{s.d(t,{A:()=>r});s(65043);var i=s(67907),a=s(72711),o=s(70579);function l(e){let{entityCode:t,newEntityName:s,popUpContents:l}=e;return(0,o.jsx)(i.TranslationConsumer,{children:e=>(0,o.jsx)("div",{className:"headerContainer",children:(0,o.jsxs)("div",{className:"row headerSpacing",children:[(0,o.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,o.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(s):t})}),""!==t&&void 0!==t&&l.length>0?(0,o.jsx)("div",{className:"headerItemRight",children:(0,o.jsx)(a.Popup,{element:(0,o.jsxs)("div",{children:[e(l[0].fieldName)+" ",":"," "+l[0].fieldValue,(0,o.jsx)(a.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,o.jsx)(a.List,{className:"detailsHeaderPopUp",children:l.map((t=>(0,o.jsxs)(a.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}l.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const r=l},9256:(e,t,s)=>{s.d(t,{q:()=>l});s(65043);var i=s(72711),a=s(67907),o=s(70579);function l(e){let{handleBack:t,handleSave:s,handleReset:l,saveEnabled:r}=e;return(0,o.jsx)(a.TranslationConsumer,{children:e=>(0,o.jsxs)("div",{className:"row userActionPosition",children:[(0,o.jsx)("div",{className:"col-12 col-md-3 col-lg-4",children:(0,o.jsx)(i.Button,{className:"backButton",onClick:t,content:e("Back")})}),(0,o.jsx)("div",{className:"col-12 col-md-9 col-lg-8",children:(0,o.jsxs)("div",{style:{float:"right"},children:[(0,o.jsx)(i.Button,{content:e("LookUpData_btnReset"),className:"cancelButton",onClick:l}),(0,o.jsx)(i.Button,{content:e("Save"),disabled:!r,onClick:s})]})})]})})}l.defaultProps={saveEnabled:!1}},80312:(e,t,s)=>{s.d(t,{$3:()=>z,$H:()=>ie,$J:()=>me,$K:()=>be,$V:()=>jt,$b:()=>vt,$p:()=>F,AE:()=>U,Al:()=>_,B2:()=>it,By:()=>Ut,CW:()=>bt,DA:()=>n,Ee:()=>Be,FO:()=>N,Fy:()=>we,G9:()=>st,H8:()=>ee,Hq:()=>rt,Ig:()=>k,Iu:()=>E,JI:()=>dt,JJ:()=>te,JU:()=>K,Jz:()=>Ke,KQ:()=>le,Kk:()=>Ze,Kw:()=>et,LP:()=>ft,LR:()=>c,Lg:()=>$,Mg:()=>ve,Mm:()=>w,N1:()=>Y,Nm:()=>u,No:()=>de,Ow:()=>O,P2:()=>o,P8:()=>ge,PD:()=>We,PE:()=>h,PG:()=>J,PP:()=>mt,Pb:()=>Te,QB:()=>R,QC:()=>Z,RE:()=>ot,RO:()=>$e,Rc:()=>Et,Rl:()=>Rt,Rx:()=>yt,TI:()=>g,Tm:()=>ue,Ug:()=>X,Ur:()=>He,V9:()=>d,VK:()=>H,VL:()=>pe,VQ:()=>re,WD:()=>Me,Wf:()=>j,YO:()=>I,YY:()=>Ne,Yb:()=>ye,Yg:()=>ze,Z9:()=>pt,ZE:()=>ct,ZU:()=>v,_N:()=>gt,_S:()=>At,_d:()=>Nt,aS:()=>B,aZ:()=>ht,au:()=>Pe,b0:()=>Dt,bL:()=>_e,c2:()=>Ve,d4:()=>ke,dB:()=>y,dD:()=>Fe,dK:()=>Q,dY:()=>W,de:()=>p,dv:()=>Ae,eQ:()=>r,f3:()=>Re,fF:()=>M,fL:()=>Ct,fN:()=>Pt,fk:()=>A,fl:()=>Ee,fr:()=>S,go:()=>a,h:()=>he,hD:()=>D,hE:()=>f,hh:()=>Xe,hk:()=>oe,hz:()=>ut,i:()=>i,j2:()=>lt,jN:()=>G,je:()=>b,jx:()=>V,kL:()=>Ye,ke:()=>Oe,km:()=>ne,l0:()=>ae,l6:()=>Qe,lz:()=>T,m0:()=>C,nS:()=>xe,nk:()=>nt,nn:()=>P,np:()=>q,oh:()=>at,op:()=>Je,pt:()=>Le,qk:()=>ce,qp:()=>Ce,r6:()=>De,rQ:()=>je,rj:()=>L,rp:()=>l,t3:()=>St,tM:()=>Ie,to:()=>It,ts:()=>tt,uH:()=>Se,uy:()=>qe,w1:()=>fe,x5:()=>se,xz:()=>x,y_:()=>Ge,yu:()=>m,yx:()=>xt,z8:()=>Ue,z_:()=>Wt});const i={view:"view",add:"add",modify:"modify",remove:"remove"},a="carriercompany",o="driver",l="customer",r="trailer",n="originterminal",d="destination",c="primemover",h="vehicle",p="shipmentbycompartment",m="shipmentbyproduct",u="ViewShipmentStatus",b="vessel",y="order",E="OrderForceClose",g="contract",C="receiptplanbycompartment",v="ViewMarineShipment",R="MarineShipmentByCompartment",S="ViewMarineReceipt",P="supplier",U="finishedproduct",x="RailDispatch",D="RailReceipt",j="RailRoute",A="RailWagon",f="CloseRailDispatch",N="PrintRailBOL",W="PrintRailFAN",I="RailDispatchLoadSpotAssignment",T="RailDispatchProductAssignment",k="ViewRailDispatch",w="ViewRailLoadingDetails",M="CloseRailReceipt",L="PrintRailBOD",V="PrintRailRAN",_="ViewRailReceipt",F="ViewRailUnLoadingDetails",B="SMS",O="UnAccountedTransactionTank",H="UnAccountedTransactionMeter",Q="PipelineDispatch",z="PipelineReceipt",G="PipelineDispatchManualEntry",K="PipelineReceiptManualEntry",J="LookUpData",q="HSEInspection",$="HSEInspectionConfig",Y="Email",Z="Shareholder",X="LocationConfig",ee="DeviceConfig",te="baseproduct",se="SiteView",ie="LeakageManualEntry",ae="Terminal",oe="SlotInformation",le="TankGroup",re="Tank",ne="SealMaster",de="TankEODEntry",ce="UnmatchedLocalTransactions",he="AccessCard",pe="ResetPin",me="SlotConfiguration",ue="PrintMarineFAN",be="PrintMarineBOL",ye="ViewMarineLoadingDetails",Ee="ViewMarineShipmentAuditTrail",ge="CloseMarineShipment",Ce="IssueCard",ve="ActivateCard",Re="RevokeCard",Se="AutoIDAssociation",Pe="MarineReceiptByCompartment",Ue="PrintMarineRAN",xe="PrintMarineBOD",De="ViewMarineUnloadingDetails",je="ViewMarineReceiptAuditTrail",Ae="CloseMarineReceipt",fe="WeekendConfig",Ne="EODAdmin",We="PrintBOL",Ie="PrintFAN",Te="PrintBOD",ke="CloseShipment",we="CloseReceipt",Me="CONTRACTFORCECLOSE",Le="Captain",Ve="OverrideShipmentSequence",_e="KPIInformation",Fe="Language",Be="WebPortalUserMap",Oe="BayGroup",He="PipelineHeaderSiteView",Qe="TankMonitor",ze="PersonAdmin",Ge="ProductReconciliationReports",Ke="ReportConfiguration",Je="EXECONFIGURATION",qe="ShareholderAllocation",$e="NotificationGroup",Ye="NotificationRestriction",Ze="NotificationConfig",Xe="AllowWeighBridgeManualEntry",et="ProductAllocation",tt="MasterDeviceConfiguration",st="ShareholderAgreement",it="TANKSHAREHOLDERPRIMEFUNCTION",at="ROLEADMIN",ot="ShiftConfig",lt="PrinterConfiguration",rt="CustomerAgreement",nt="BaySCADAConfiguration",dt="RailReceiptUnloadSpotAssignment",ct="STAFF_VISITOR",ht="PipelineMeterSiteView",pt="RailSiteView",mt="MarineSiteView",ut="LoadingDetails",bt="UnloadingDetails",yt="RoadHSEInspection",Et="RoadHSEInspectionConfig",gt="MarineHSEInspection",Ct="MarineHSEInspectionConfig",vt="RailHSEInspection",Rt="RailHSEInspectionConfig",St="PipelineHSEInspection",Pt="PipelineHSEInspectionConfig",Ut="PrintRAN",xt="ViewReceiptStatus",Dt="customerrecipe",jt="COAParameter",At="COATemplate",ft="COAManagement",Nt="COACustomer",Wt="COAAssignment",It="ProductForecastConfiguration"},92342:()=>{}}]);
//# sourceMappingURL=6027.113d755e.chunk.js.map