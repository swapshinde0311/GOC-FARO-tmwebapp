"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[6507],{56507:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var a=t(65043),l=t(97508),o=t(69062),i=t(28882),r=t(65187),n=t(53536),p=t.n(n),d=t(40854),h=t.n(d),m=t(93779),c=t(72067),u=t(11981),C=t(14159),S=t(67907),g=t(72711),N=t(78374),x=t(70579);class j extends a.Component{constructor(){super(...arguments),this.state={sealCompartments:this.props.sealCompartments},this.updateSealCompartments=()=>{let e=p().cloneDeep(this.state.sealCompartments),s=[],t={messageType:"critical",message:"ViewAllShipment_SealCompUpdate",messageResultDetails:[]};if(e.forEach((e=>{s.push({SealNo:e.SealNo,CompNo:e.CompNo,ShareholderCode:this.props.selectedShareholder,ShipmentCode:this.props.transactionCode}),i.F1.forEach((s=>{let a="";void 0!==s.validator&&(a=o.jr(s.validator,e[s.field])),""!==a&&t.messageResultDetails.push({keyFields:["ShipmentCompDetail_CompSeqInVehicle",s.displayName],keyValues:[e.CompNo,e[s.field]],isSuccess:!1,errorMessage:a})}))})),t.messageResultDetails.length>0)(0,C.toast)((0,x.jsx)(r.A,{children:(0,x.jsx)(u.A,{notificationMessage:t})}),{autoClose:"success"===t.messageType&&1e4});else{t.messageResultDetails.push({keyFields:["ShipmentCompDetail_ShipmentNumber"],keyValues:[this.props.transactionCode],isSuccess:!1,errorMessage:""});var a=[{key:m.FR,value:this.props.selectedShareholder},{key:m.yz,value:this.props.transactionCode}],l={ShareHolderCode:this.props.selectedShareholder,keyDataCode:m.yz,KeyCodes:a,Entity:s};h()(c.AXO,o.tW(l,this.props.tokenDetails.tokenInfo)).then((e=>{var s=e.data;t.messageType=s.IsSuccess?"success":"critical",t.messageResultDetails[0].isSuccess=s.IsSuccess,t.messageResultDetails[0].errorMessage=s.ErrorList[0],(0,C.toast)((0,x.jsx)(r.A,{children:(0,x.jsx)(u.A,{notificationMessage:t})}),{autoClose:"success"===t.messageType&&1e4})})).catch((e=>{console.log("Error while update Shipment Seal Info:",e)}))}},this.handleSealNoInput=e=>{let s=e.rowData;return(0,x.jsx)(g.Input,{fluid:!0,value:s.SealNo,disabled:!1,onChange:e=>{let t=p().cloneDeep(this.state.sealCompartments),a=t.findIndex((e=>e.CompNo===s.CompNo));a>=0&&(t[a].SealNo=e),this.setState({sealCompartments:t})},reserveSpace:!1})}}isNodeEnterpriseOrWebortal(){return!(!this.props.userDetails.EntityResult.IsEnterpriseNode&&!this.props.userDetails.EntityResult.IsWebPortalUser)}render(){return(0,x.jsx)("div",{children:(0,x.jsx)(S.TranslationConsumer,{children:e=>(0,x.jsxs)(g.Modal,{open:!0,size:"large",className:"sealCompartmentsPopUp",children:[(0,x.jsxs)(g.Modal.Content,{children:[(0,x.jsx)("div",{className:"col col-lg-12",children:(0,x.jsx)("h3",{children:e("ViewAllShipment_SealCompartment")+" : "+this.props.transactionCode})}),(0,x.jsx)("div",{className:"col-12 detailsTable",children:(0,x.jsxs)(N.bQ,{data:this.state.sealCompartments,children:[(0,x.jsx)(N.bQ.Column,{className:"compColHeight",field:"CompNo",header:e("ViewShipment_CompartmentSeq"),editable:!1}),(0,x.jsx)(N.bQ.Column,{className:"compColHeight",field:"FinishedProductCode",header:e("ViewShipment_FinishedProductCode"),editable:!1}),(0,x.jsx)(N.bQ.Column,{className:"compColHeight",field:"ShipmentCompartmentStatus",header:e("ViewShipment_Status"),editable:!1}),(0,x.jsx)(N.bQ.Column,{className:"compColHeight",field:"LoadedQuantityUOM",header:e("ViewShipmentStatus_LoadedQuantity"),editable:!1}),(0,x.jsx)(N.bQ.Column,{className:"compColHeight",header:e("SealMaster_SealNo"),renderer:e=>this.handleSealNoInput(e)})]})})]}),(0,x.jsxs)(g.Modal.Footer,{children:[(0,x.jsx)(g.Button,{content:e("MarineEOD_Close"),className:"cancelButton",onClick:this.props.handleSealClose}),(0,x.jsx)(g.Button,{type:"primary",content:e("SealMaster_Save"),disabled:this.isNodeEnterpriseOrWebortal(),onClick:this.updateSealCompartments})]})]})})})}}const y=(0,l.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(j)}}]);
//# sourceMappingURL=6507.7890ef58.chunk.js.map