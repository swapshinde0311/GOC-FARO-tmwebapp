"use strict";(self.webpackChunktmwebapp=self.webpackChunktmwebapp||[]).push([[8773,9999],{38773:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var i=s(65043),a=s(69062),o=s(40854),n=s.n(o),l=s(72067),r=s(9256),d=s(97508),h=(s(38726),s(65187)),c=s(43503),u=s(93779),f=s(40252),m=s(53536),p=s.n(m),g=s(46100),S=s(80312),v=s(72711),C=s(67907),E=s(98277),D=s(34348),y=s.n(D),R=s(70579);function j(e){let{shiftConfig:t,modShiftConfig:s,validationErrors:i,onFieldChange:a}=e;return(0,R.jsx)(C.TranslationConsumer,{children:(e,o)=>(0,R.jsx)("div",{className:"detailsContainer",children:(0,R.jsxs)("div",{className:"row",children:[(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(v.Input,{fluid:!0,value:s.Name,indicator:"required",disabled:""!==t.Name,onChange:e=>a("Name",e),label:e("ShiftInfo_ShiftName"),error:e(i.Name),reserveSpace:!1},o)}),(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(E._,{value:y()(null===s.StartTime||void 0===s.StartTime||""===s.StartTime?(new Date).setSeconds(0):new Date(s.StartTime).setSeconds(0)),label:e("ShiftInfo_StartTime"),displayFormat:"hh:mm A",onChange:e=>a("StartTime",y()(e).format()),error:e(i.StartTime)})}),(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4 ",children:(0,R.jsx)(E._,{value:y()(null===s.EndTime||void 0===s.EndTime||""===s.EndTime?(new Date).setSeconds(0):new Date(s.EndTime).setSeconds(0)),label:e("ShiftInfo_EndTime"),displayFormat:"hh:mm A",onChange:e=>a("EndTime",y()(e).format()),error:e(i.EndTime)})}),(0,R.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,R.jsx)(v.Input,{fluid:!0,value:s.Remarks,label:e("Description"),onChange:e=>a("Remarks",e),error:e(i.Remarks),reserveSpace:!1})})]})})})}j.defaultProps={isEnterpriseNode:!1,terminalCode:[]};var x=s(44192),N=s(62900);class b extends i.Component{constructor(){super(...arguments),this.state={shiftConfig:p().cloneDeep(g.aK),modShiftConfig:{},validationErrors:a.Th(x.lZ),isReadyToRender:!1,saveEnabled:!1,showAuthenticationLayout:!1,tempShiftConfiguration:{}},this.handleChange=(e,t)=>{try{const s=p().cloneDeep(this.state.modShiftConfig);s[e]=t,this.setState({modShiftConfig:s});const i=p().cloneDeep(this.state.validationErrors);void 0!==x.lZ[e]&&(i[e]=a.jr(x.lZ[e],t),this.setState({validationErrors:i}))}catch(s){console.log("ShiftConfigurationDetailsComposite:Error occured on handleChange",s)}},this.handleReset=()=>{try{const{validationErrors:e}={...this.state},t=p().cloneDeep(this.state.shiftConfig);Object.keys(e).forEach((function(t){e[t]=""})),this.setState({modShiftConfig:{...t},validationErrors:e})}catch(e){console.log("ShiftConfigurationDetailsComposite:Error occured on handleReset",e)}},this.saveShiftConfiguration=()=>{try{this.setState({saveEnabled:!1});let e=p().cloneDeep(this.state.tempShiftConfiguration);this.CreateAndUpdateShiftConfiguration(e)}catch(e){console.log("ShiftConfigurationDetailsComposite : Error in ShiftConfiguration")}},this.handleSave=()=>{try{let e=p().cloneDeep(this.state.modShiftConfig);if(this.validateSave(e)){let t=p().cloneDeep(e),s=!0!==this.props.userDetails.EntityResult.IsWebPortalUser;this.setState({showAuthenticationLayout:s,tempShiftConfiguration:t},(()=>{!1===s&&this.saveShiftConfiguration()}))}else this.setState({saveEnabled:!0})}catch(e){console.log("ShiftConfigurationDetailsComposite:Error occured on handleSave",e)}},this.handleAuthenticationClose=()=>{this.setState({showAuthenticationLayout:!1})}}componentDidMount(){try{a.pJ(this.props.userDetails.EntityResult.IsArchived),this.GetShift(this.props.selectedRow)}catch(e){console.log("ShiftConfigurationDetailsComposite:Error occured on componentDidMount",e)}}componentWillReceiveProps(e){try{if(""!==this.state.shiftConfig.ID&&void 0===e.selectedRow.ID&&this.props.tokenDetails.tokenInfo===e.tokenDetails.tokenInfo){this.GetShift(e.selectedRow);let t={...this.state.validationErrors};Object.keys(t).forEach((e=>{t[e]=""})),this.setState({validationErrors:t})}}catch(t){console.log("ShiftConfigurationDetailsComposite:Error occured on componentWillReceiveProps",t)}}GetShift(e){try{if(void 0===e.ID)return void this.setState({shiftConfig:p().cloneDeep(g.aK),modShiftConfig:p().cloneDeep(g.aK),isReadyToRender:!0,saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,S.i.add,S.RE)});var t=[{key:u.O5,value:e.ID}],s={ShiftID:e.ID,keyDataCode:u.O5,KeyCodes:t};n()(l.xWM,a.tW(s,this.props.tokenDetails.tokenInfo)).then((e=>{var t=e.data;!0===t.IsSuccess?this.setState({isReadyToRender:!0,shiftConfig:p().cloneDeep(t.EntityResult),modShiftConfig:p().cloneDeep(t.EntityResult),saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,S.i.modify,S.RE)}):(this.setState({shiftConfig:p().cloneDeep(g.aK),modShiftConfig:p().cloneDeep(g.aK),isReadyToRender:!0}),console.log("Error in getShiftConfig:",t.ErrorList))})).catch((t=>{console.log("Error while getShiftConfig:",t,e)}))}catch(i){console.log("Error while getShiftConfig:",i)}}validateSave(e){try{var t=p().cloneDeep(this.state.validationErrors);Object.keys(x.lZ).forEach((function(s){t[s]=a.jr(x.lZ[s],e[s])}));let i={messageType:"critical",message:"ShiftConfigurationDetails_SavedStatus",messageResultDetails:[]};this.setState({validationErrors:t});var s=!0;return s&&(s=Object.values(t).every((function(e){return""===e}))),i.messageResultDetails.length>0?(this.props.onSaved(this.state.modShiftConfig,"update",i),!1):s}catch(i){console.log("Error in validatesave",i)}}CreateAndUpdateShiftConfiguration(e){try{let t={Entity:e},s={messageType:"critical",message:"ShiftConfigurationDetails_SavedStatus",messageResultDetails:[{keyFields:["ShiftInfo_ShiftName"],keyValues:[e.Name],isSuccess:!1,errorMessage:""}]};n()(l.HgR,a.tW(t,this.props.tokenDetails.tokenInfo)).then((e=>{let t=e.data;if(s.messageType=t.IsSuccess?"success":"critical",s.messageResultDetails[0].isSuccess=t.IsSuccess,!0===t.IsSuccess){let e=t.EntityResult;this.setState({modShiftConfig:p().cloneDeep(t.EntityResult),saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,S.i.modify,S.RE),showAuthenticationLayout:!1},(()=>this.GetShift({ID:e.ID})))}else s.messageResultDetails[0].errorMessage=t.ErrorList[0],this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,S.i.add,S.RE),showAuthenticationLayout:!1}),console.log("Error in ShiftCongiguration:",t.ErrorList);this.props.onSaved(this.state.modShiftConfig,"add",s)})).catch((e=>{this.setState({saveEnabled:a.ab(this.props.userDetails.EntityResult.FunctionsList,S.i.add,S.RE),showAuthenticationLayout:!1}),s.messageResultDetails[0].errorMessage=e,this.props.onSaved(this.state.modShiftConfig,"add",s)}))}catch(t){console.log("error while create/update shift configuration",t)}}render(){return this.state.isReadyToRender?(0,R.jsxs)("div",{children:[(0,R.jsx)(h.A,{children:(0,R.jsx)(c.A,{entityCode:this.state.shiftConfig.Name,newEntityName:"ShiftInfo_NewShift"})}),(0,R.jsx)(h.A,{children:(0,R.jsx)(j,{shiftConfig:this.state.shiftConfig,modShiftConfig:this.state.modShiftConfig,validationErrors:this.state.validationErrors,onFieldChange:this.handleChange,isEnterpriseNode:this.props.userDetails.EntityResult.IsEnterpriseNode})}),(0,R.jsx)(h.A,{children:(0,R.jsx)(r.q,{handleBack:this.props.onBack,handleSave:this.handleSave,handleReset:this.handleReset,saveEnabled:this.state.saveEnabled})}),this.state.showAuthenticationLayout?(0,R.jsx)(N.A,{Username:this.props.userDetails.EntityResult.UserName,functionName:""===this.state.shiftConfig.Name?S.i.add:S.i.modify,functionGroup:S.RE,handleOperation:this.saveShiftConfiguration,handleClose:this.handleAuthenticationClose}):null]}):(0,R.jsx)(f.A,{message:"Loading"})}}const k=(0,d.Ng)((e=>({userDetails:e.getUserDetails.userDetails,tokenDetails:e.getUserDetails.TokenAuth})))(b)},43503:(e,t,s)=>{s.d(t,{A:()=>l});s(65043);var i=s(67907),a=s(72711),o=s(70579);function n(e){let{entityCode:t,newEntityName:s,popUpContents:n}=e;return(0,o.jsx)(i.TranslationConsumer,{children:e=>(0,o.jsx)("div",{className:"headerContainer",children:(0,o.jsxs)("div",{className:"row headerSpacing",children:[(0,o.jsx)("div",{className:"col paddingHeaderItemLeft",children:(0,o.jsx)("span",{style:{margin:"auto"},className:"headerLabel",children:""===t||void 0===t?e(s):t})}),""!==t&&void 0!==t&&n.length>0?(0,o.jsx)("div",{className:"headerItemRight",children:(0,o.jsx)(a.Popup,{element:(0,o.jsxs)("div",{children:[e(n[0].fieldName)+" ",":"," "+n[0].fieldValue,(0,o.jsx)(a.Icon,{style:{marginLeft:"10px"},root:"common",name:"caret-down",size:"small"})]}),position:"bottom left",children:(0,o.jsx)(a.List,{className:"detailsHeaderPopUp",children:n.map((t=>(0,o.jsxs)(a.List.Content,{className:"detailsHeaderPopUpListPadding",children:[e(t.fieldName)+" ",":"," "+t.fieldValue]},"content.fieldName")))})})}):""]})})})}n.defaultProps={entityCode:"",newEntityName:"",popUpContents:[]};const l=n},9256:(e,t,s)=>{s.d(t,{q:()=>n});s(65043);var i=s(72711),a=s(67907),o=s(70579);function n(e){let{handleBack:t,handleSave:s,handleReset:n,saveEnabled:l}=e;return(0,o.jsx)(a.TranslationConsumer,{children:e=>(0,o.jsxs)("div",{className:"row userActionPosition",children:[(0,o.jsx)("div",{className:"col-12 col-md-3 col-lg-4",children:(0,o.jsx)(i.Button,{className:"backButton",onClick:t,content:e("Back")})}),(0,o.jsx)("div",{className:"col-12 col-md-9 col-lg-8",children:(0,o.jsxs)("div",{style:{float:"right"},children:[(0,o.jsx)(i.Button,{content:e("LookUpData_btnReset"),className:"cancelButton",onClick:n}),(0,o.jsx)(i.Button,{content:e("Save"),disabled:!l,onClick:s})]})})]})})}n.defaultProps={saveEnabled:!1}},98277:(e,t,s)=>{s.d(t,{_:()=>o});s(65043);var i=s(7676),a=s(70579);function o(e){let{value:t,label:s,displayFormat:o,onChange:n,disabled:l,error:r}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"ui input-label",children:(0,a.jsx)("span",{className:"input-label-message",children:s})}),(0,a.jsx)("div",{className:"ui single-input picker-input datetime-time  fluid has-icon",children:(0,a.jsx)(i.A,{showSecond:!1,defaultValue:t,value:t,onChange:n,format:o,use12Hours:!0,className:"input-wrap",disabled:l,error:r})})]})}o.defaultProps={disabled:!1}}}]);
//# sourceMappingURL=8773.3a1efba0.chunk.js.map